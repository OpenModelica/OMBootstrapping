#include "omc_simulation_settings.h"
#include "NBJacobian.h"
#define _OMC_LIT0_data "/home/adrpo33/OpenModelica/OMCompiler/Compiler/NBackEnd/Modules/3_Post/NBJacobian.mo"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT0,84,_OMC_LIT0_data);
#define _OMC_LIT0 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT0)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT1_6,1.758197185e9);
#define _OMC_LIT1_6 MMC_REFREALLIT(_OMC_LIT_STRUCT1_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT1,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT0,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(880)),MMC_IMMEDIATE(MMC_TAGFIXNUM(41)),MMC_IMMEDIATE(MMC_TAGFIXNUM(881)),MMC_IMMEDIATE(MMC_TAGFIXNUM(13)),_OMC_LIT1_6}};
#define _OMC_LIT1 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT1)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT2_6,1.758197185e9);
#define _OMC_LIT2_6 MMC_REFREALLIT(_OMC_LIT_STRUCT2_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT2,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT0,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(884)),MMC_IMMEDIATE(MMC_TAGFIXNUM(13)),MMC_IMMEDIATE(MMC_TAGFIXNUM(885)),MMC_IMMEDIATE(MMC_TAGFIXNUM(11)),_OMC_LIT2_6}};
#define _OMC_LIT2 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT2)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT3,1,5) {&ErrorTypes_MessageType_TRANSLATION__desc,}};
#define _OMC_LIT3 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT3)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT4,1,4) {&ErrorTypes_Severity_ERROR__desc,}};
#define _OMC_LIT4 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT4)
#define _OMC_LIT5_data "Internal error %s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT5,17,_OMC_LIT5_data);
#define _OMC_LIT5 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT5)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT6,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT5}};
#define _OMC_LIT6 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT7,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(63)),_OMC_LIT3,_OMC_LIT4,_OMC_LIT6}};
#define _OMC_LIT7 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT7)
#define _OMC_LIT8_data "NBJacobian.getTmpFilterFunction failed because jacobian type is not known: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT8,75,_OMC_LIT8_data);
#define _OMC_LIT8 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT8)
#define _OMC_LIT9_data "NBJacobian.jacobianSymbolic failed because no strong components were given!"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT9,75,_OMC_LIT9_data);
#define _OMC_LIT9 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT9)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT10,2,1) {_OMC_LIT9,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT10 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT10)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT11,1,4) {&NFComponentRef_EMPTY__desc,}};
#define _OMC_LIT11 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT11)
#define _OMC_LIT12_data "NBJacobian.jacobianSymbolic"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT12,27,_OMC_LIT12_data);
#define _OMC_LIT12 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT12)
#define _OMC_LIT13_data "symjacdump"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT13,10,_OMC_LIT13_data);
#define _OMC_LIT13 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT13)
#define _OMC_LIT14_data "Dumps information about symbolic Jacobians."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT14,43,_OMC_LIT14_data);
#define _OMC_LIT14 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT14)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT15,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT14}};
#define _OMC_LIT15 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT15)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT16,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(45)),_OMC_LIT13,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT15}};
#define _OMC_LIT16 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT16)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT17_6,1.758197185e9);
#define _OMC_LIT17_6 MMC_REFREALLIT(_OMC_LIT_STRUCT17_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT17,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT0,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(619)),MMC_IMMEDIATE(MMC_TAGFIXNUM(13)),MMC_IMMEDIATE(MMC_TAGFIXNUM(619)),MMC_IMMEDIATE(MMC_TAGFIXNUM(89)),_OMC_LIT17_6}};
#define _OMC_LIT17 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT17)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT18_6,1.758197185e9);
#define _OMC_LIT18_6 MMC_REFREALLIT(_OMC_LIT_STRUCT18_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT18,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT0,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(618)),MMC_IMMEDIATE(MMC_TAGFIXNUM(11)),MMC_IMMEDIATE(MMC_TAGFIXNUM(623)),MMC_IMMEDIATE(MMC_TAGFIXNUM(18)),_OMC_LIT18_6}};
#define _OMC_LIT18 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT18)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT19_6,1.758197185e9);
#define _OMC_LIT19_6 MMC_REFREALLIT(_OMC_LIT_STRUCT19_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT19,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT0,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(617)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(624)),MMC_IMMEDIATE(MMC_TAGFIXNUM(16)),_OMC_LIT19_6}};
#define _OMC_LIT19 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT19)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT20_6,1.758197185e9);
#define _OMC_LIT20_6 MMC_REFREALLIT(_OMC_LIT_STRUCT20_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT20,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT0,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(631)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(631)),MMC_IMMEDIATE(MMC_TAGFIXNUM(120)),_OMC_LIT20_6}};
#define _OMC_LIT20 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT20)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT21_6,1.758197185e9);
#define _OMC_LIT21_6 MMC_REFREALLIT(_OMC_LIT_STRUCT21_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT21,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT0,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(543)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(544)),MMC_IMMEDIATE(MMC_TAGFIXNUM(107)),_OMC_LIT21_6}};
#define _OMC_LIT21 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT21)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT22_6,1.758197185e9);
#define _OMC_LIT22_6 MMC_REFREALLIT(_OMC_LIT_STRUCT22_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT22,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT0,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(564)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(564)),MMC_IMMEDIATE(MMC_TAGFIXNUM(155)),_OMC_LIT22_6}};
#define _OMC_LIT22 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT22)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT23_6,1.758197185e9);
#define _OMC_LIT23_6 MMC_REFREALLIT(_OMC_LIT_STRUCT23_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT23,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT0,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(568)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(568)),MMC_IMMEDIATE(MMC_TAGFIXNUM(155)),_OMC_LIT23_6}};
#define _OMC_LIT23 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT23)
#define _OMC_LIT24_data "Sparsity Coloring"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT24,17,_OMC_LIT24_data);
#define _OMC_LIT24 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT24)
#define _OMC_LIT25_data "\n<empty sparsity pattern>\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT25,26,_OMC_LIT25_data);
#define _OMC_LIT25 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT25)
#define _OMC_LIT26_data "Color ("
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT26,7,_OMC_LIT26_data);
#define _OMC_LIT26 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT26)
#define _OMC_LIT27_data ")\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT27,2,_OMC_LIT27_data);
#define _OMC_LIT27 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT27)
#define _OMC_LIT28_data "  - Column: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT28,12,_OMC_LIT28_data);
#define _OMC_LIT28 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT28)
#define _OMC_LIT29_data "\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT29,1,_OMC_LIT29_data);
#define _OMC_LIT29 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT29)
#define _OMC_LIT30_data "  - Row:    "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT30,12,_OMC_LIT30_data);
#define _OMC_LIT30 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT30)
#define _OMC_LIT31_data "\n\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT31,2,_OMC_LIT31_data);
#define _OMC_LIT31 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT31)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT32,6,3) {&NBJacobian_SparsityPattern_SPARSITY__PATTERN__desc,MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT32 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT32)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT33_6,1.758197185e9);
#define _OMC_LIT33_6 MMC_REFREALLIT(_OMC_LIT_STRUCT33_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT33,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT0,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(432)),MMC_IMMEDIATE(MMC_TAGFIXNUM(19)),MMC_IMMEDIATE(MMC_TAGFIXNUM(432)),MMC_IMMEDIATE(MMC_TAGFIXNUM(99)),_OMC_LIT33_6}};
#define _OMC_LIT33 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT33)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT34_6,1.758197185e9);
#define _OMC_LIT34_6 MMC_REFREALLIT(_OMC_LIT_STRUCT34_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT34,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT0,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(425)),MMC_IMMEDIATE(MMC_TAGFIXNUM(13)),MMC_IMMEDIATE(MMC_TAGFIXNUM(435)),MMC_IMMEDIATE(MMC_TAGFIXNUM(19)),_OMC_LIT34_6}};
#define _OMC_LIT34 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT34)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT35_6,1.758197185e9);
#define _OMC_LIT35_6 MMC_REFREALLIT(_OMC_LIT_STRUCT35_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT35,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT0,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(441)),MMC_IMMEDIATE(MMC_TAGFIXNUM(15)),MMC_IMMEDIATE(MMC_TAGFIXNUM(441)),MMC_IMMEDIATE(MMC_TAGFIXNUM(134)),_OMC_LIT35_6}};
#define _OMC_LIT35 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT35)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT36_6,1.758197185e9);
#define _OMC_LIT36_6 MMC_REFREALLIT(_OMC_LIT_STRUCT36_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT36,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT0,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(440)),MMC_IMMEDIATE(MMC_TAGFIXNUM(13)),MMC_IMMEDIATE(MMC_TAGFIXNUM(444)),MMC_IMMEDIATE(MMC_TAGFIXNUM(19)),_OMC_LIT36_6}};
#define _OMC_LIT36 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT36)
#define _OMC_LIT37_data "NBJacobian.SparsityPattern.create failed because of missing strong components."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT37,78,_OMC_LIT37_data);
#define _OMC_LIT37 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT37)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT38,2,1) {_OMC_LIT37,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT38 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT38)
#define _OMC_LIT39_data "NBJacobian.SparsityPattern.create failed."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT39,41,_OMC_LIT39_data);
#define _OMC_LIT39 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT39)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT40,2,1) {_OMC_LIT39,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT40 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT40)
#define _OMC_LIT41_data "dumpSparsePattern"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT41,17,_OMC_LIT41_data);
#define _OMC_LIT41 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT41)
#define _OMC_LIT42_data "Dumps sparse pattern with coloring used for simulation."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT42,55,_OMC_LIT42_data);
#define _OMC_LIT42 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT42)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT43,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT42}};
#define _OMC_LIT43 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT43)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT44,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(49)),_OMC_LIT41,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT43}};
#define _OMC_LIT44 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT44)
#define _OMC_LIT45_data "Sparsity Pattern (nnz: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT45,23,_OMC_LIT45_data);
#define _OMC_LIT45 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT45)
#define _OMC_LIT46_data ")"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT46,1,_OMC_LIT46_data);
#define _OMC_LIT46 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT46)
#define _OMC_LIT47_data "### Seeds (col vars) ###"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT47,24,_OMC_LIT47_data);
#define _OMC_LIT47 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT47)
#define _OMC_LIT48_data ""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT48,0,_OMC_LIT48_data);
#define _OMC_LIT48 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT48)
#define _OMC_LIT49_data "{"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT49,1,_OMC_LIT49_data);
#define _OMC_LIT49 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT49)
#define _OMC_LIT50_data ", "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT50,2,_OMC_LIT50_data);
#define _OMC_LIT50 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT50)
#define _OMC_LIT51_data "}"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT51,1,_OMC_LIT51_data);
#define _OMC_LIT51 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT51)
#define _OMC_LIT52_data "### Partials (row vars) ###"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT52,27,_OMC_LIT52_data);
#define _OMC_LIT52 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT52)
#define _OMC_LIT53_data "### Columns ###"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT53,15,_OMC_LIT53_data);
#define _OMC_LIT53 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT53)
#define _OMC_LIT54_data "("
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT54,1,_OMC_LIT54_data);
#define _OMC_LIT54 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT54)
#define _OMC_LIT55_data ")	 affects:	"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT55,12,_OMC_LIT55_data);
#define _OMC_LIT55 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT55)
#define _OMC_LIT56_data "##### Rows #####"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT56,16,_OMC_LIT56_data);
#define _OMC_LIT56 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT56)
#define _OMC_LIT57_data ")	 depends on:	"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT57,15,_OMC_LIT57_data);
#define _OMC_LIT57 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT57)
#define _OMC_LIT58_data "[ODE]"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT58,5,_OMC_LIT58_data);
#define _OMC_LIT58 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT58)
#define _OMC_LIT59_data "[DAE]"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT59,5,_OMC_LIT59_data);
#define _OMC_LIT59 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT59)
#define _OMC_LIT60_data "[LS-]"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT60,5,_OMC_LIT60_data);
#define _OMC_LIT60 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT60)
#define _OMC_LIT61_data "[NLS]"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT61,5,_OMC_LIT61_data);
#define _OMC_LIT61 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT61)
#define _OMC_LIT62_data "[ERR]"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT62,5,_OMC_LIT62_data);
#define _OMC_LIT62 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT62)
#define _OMC_LIT63_data "generateDynamicJacobian"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT63,23,_OMC_LIT63_data);
#define _OMC_LIT63 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT63)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT64,1,4) {&Flags_FlagVisibility_EXTERNAL__desc,}};
#define _OMC_LIT64 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT64)
#define _OMC_LIT65_data "numeric"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT65,7,_OMC_LIT65_data);
#define _OMC_LIT65 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT65)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT66,2,8) {&Flags_FlagData_STRING__FLAG__desc,_OMC_LIT65}};
#define _OMC_LIT66 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT66)
#define _OMC_LIT67_data "none"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT67,4,_OMC_LIT67_data);
#define _OMC_LIT67 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT67)
#define _OMC_LIT68_data "Does not generate Jacobian. For use with explicit solvers."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT68,58,_OMC_LIT68_data);
#define _OMC_LIT68 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT68)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT69,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT68}};
#define _OMC_LIT69 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT69)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT70,2,0) {_OMC_LIT67,_OMC_LIT69}};
#define _OMC_LIT70 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT70)
#define _OMC_LIT71_data "Generates sparsity pattern for numeric Jacobian."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT71,48,_OMC_LIT71_data);
#define _OMC_LIT71 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT71)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT72,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT71}};
#define _OMC_LIT72 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT72)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT73,2,0) {_OMC_LIT65,_OMC_LIT72}};
#define _OMC_LIT73 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT73)
#define _OMC_LIT74_data "symbolic"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT74,8,_OMC_LIT74_data);
#define _OMC_LIT74 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT74)
#define _OMC_LIT75_data "Generates symbolic Jacobian. Used by dassl or ida solver with simulation flag '-jacobian'."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT75,90,_OMC_LIT75_data);
#define _OMC_LIT75 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT75)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT76,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT75}};
#define _OMC_LIT76 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT76)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT77,2,0) {_OMC_LIT74,_OMC_LIT76}};
#define _OMC_LIT77 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT77)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT78,2,1) {_OMC_LIT77,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT78 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT78)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT79,2,1) {_OMC_LIT73,_OMC_LIT78}};
#define _OMC_LIT79 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT79)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT80,2,1) {_OMC_LIT70,_OMC_LIT79}};
#define _OMC_LIT80 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT80)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT81,2,4) {&Flags_ValidOptions_STRING__DESC__OPTION__desc,_OMC_LIT80}};
#define _OMC_LIT81 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT81)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT82,1,1) {_OMC_LIT81}};
#define _OMC_LIT82 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT82)
#define _OMC_LIT83_data "Select how Jacobian matrix is generated, where der(x) is differentiated w.r.t. x."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT83,81,_OMC_LIT83_data);
#define _OMC_LIT83 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT83)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT84,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT83}};
#define _OMC_LIT84 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT84)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT85,8,3) {&Flags_ConfigFlag_CONFIG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(51)),_OMC_LIT63,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT64,_OMC_LIT66,_OMC_LIT82,_OMC_LIT84}};
#define _OMC_LIT85 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT85)
#define _OMC_LIT86_data "NBJacobian.combine failed for\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT86,30,_OMC_LIT86_data);
#define _OMC_LIT86 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT86)
#define _OMC_LIT87_data "NLSanalyticJacobian"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT87,19,_OMC_LIT87_data);
#define _OMC_LIT87 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT87)
#define _OMC_LIT88_data "Enables analytical jacobian for non-linear strong components without user-defined function calls, for that see forceNLSanalyticJacobian"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT88,135,_OMC_LIT88_data);
#define _OMC_LIT88 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT88)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT89,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT88}};
#define _OMC_LIT89 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT89)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT90,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(83)),_OMC_LIT87,MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */)),_OMC_LIT89}};
#define _OMC_LIT90 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT90)
#define _OMC_LIT91_data "ODE_JAC"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT91,7,_OMC_LIT91_data);
#define _OMC_LIT91 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT91)
#define _OMC_LIT92_data "DAE_JAC"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT92,7,_OMC_LIT92_data);
#define _OMC_LIT92 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT92)
#define _OMC_LIT93_data "NBJacobian.main failed for: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT93,28,_OMC_LIT93_data);
#define _OMC_LIT93 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT93)
#define _OMC_LIT94_data "[symjacdump] Creating symbolic Jacobians:"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT94,41,_OMC_LIT94_data);
#define _OMC_LIT94 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT94)
#include "util/modelica.h"

#include "NBJacobian_includes.h"


/* default, do not make protected functions static */
#if !defined(PROTECTED_FUNCTION_STATIC)
#define PROTECTED_FUNCTION_STATIC
#endif
PROTECTED_FUNCTION_STATIC void omc_NBJacobian_makeVarTraverse(threadData_t *threadData, modelica_metatype _var_ptr, modelica_string _name, modelica_metatype _vars_ptr, modelica_metatype _map, modelica_fnptr _makeVar, modelica_boolean _init);
PROTECTED_FUNCTION_STATIC void boxptr_NBJacobian_makeVarTraverse(threadData_t *threadData, modelica_metatype _var_ptr, modelica_metatype _name, modelica_metatype _vars_ptr, modelica_metatype _map, modelica_fnptr _makeVar, modelica_metatype _init);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBJacobian_makeVarTraverse,2,0) {(void*) boxptr_NBJacobian_makeVarTraverse,0}};
#define boxvar_NBJacobian_makeVarTraverse MMC_REFSTRUCTLIT(boxvar_lit_NBJacobian_makeVarTraverse)
PROTECTED_FUNCTION_STATIC modelica_fnptr omc_NBJacobian_getTmpFilterFunction(threadData_t *threadData, modelica_integer _jacType);
PROTECTED_FUNCTION_STATIC modelica_fnptr boxptr_NBJacobian_getTmpFilterFunction(threadData_t *threadData, modelica_metatype _jacType);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBJacobian_getTmpFilterFunction,2,0) {(void*) boxptr_NBJacobian_getTmpFilterFunction,0}};
#define boxvar_NBJacobian_getTmpFilterFunction MMC_REFSTRUCTLIT(boxvar_lit_NBJacobian_getTmpFilterFunction)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBJacobian_jacobianNone(threadData_t *threadData, modelica_string _name, modelica_integer _jacType, modelica_metatype _seedCandidates, modelica_metatype _partialCandidates, modelica_metatype _equations, modelica_metatype _knowns, modelica_metatype _strongComponents, modelica_metatype __omcQ_24in_5FfuncTree, modelica_boolean _init, modelica_metatype *out_funcTree);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBJacobian_jacobianNone(threadData_t *threadData, modelica_metatype _name, modelica_metatype _jacType, modelica_metatype _seedCandidates, modelica_metatype _partialCandidates, modelica_metatype _equations, modelica_metatype _knowns, modelica_metatype _strongComponents, modelica_metatype __omcQ_24in_5FfuncTree, modelica_metatype _init, modelica_metatype *out_funcTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBJacobian_jacobianNone,2,0) {(void*) boxptr_NBJacobian_jacobianNone,0}};
#define boxvar_NBJacobian_jacobianNone MMC_REFSTRUCTLIT(boxvar_lit_NBJacobian_jacobianNone)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBJacobian_jacobianNumeric(threadData_t *threadData, modelica_string _name, modelica_integer _jacType, modelica_metatype _seedCandidates, modelica_metatype _partialCandidates, modelica_metatype _equations, modelica_metatype _knowns, modelica_metatype _strongComponents, modelica_metatype __omcQ_24in_5FfuncTree, modelica_boolean _init, modelica_metatype *out_funcTree);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBJacobian_jacobianNumeric(threadData_t *threadData, modelica_metatype _name, modelica_metatype _jacType, modelica_metatype _seedCandidates, modelica_metatype _partialCandidates, modelica_metatype _equations, modelica_metatype _knowns, modelica_metatype _strongComponents, modelica_metatype __omcQ_24in_5FfuncTree, modelica_metatype _init, modelica_metatype *out_funcTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBJacobian_jacobianNumeric,2,0) {(void*) boxptr_NBJacobian_jacobianNumeric,0}};
#define boxvar_NBJacobian_jacobianNumeric MMC_REFSTRUCTLIT(boxvar_lit_NBJacobian_jacobianNumeric)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBJacobian_jacobianSymbolic(threadData_t *threadData, modelica_string _name, modelica_integer _jacType, modelica_metatype _seedCandidates, modelica_metatype _partialCandidates, modelica_metatype _equations, modelica_metatype _knowns, modelica_metatype _strongComponents, modelica_metatype __omcQ_24in_5FfuncTree, modelica_boolean _init, modelica_metatype *out_funcTree);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBJacobian_jacobianSymbolic(threadData_t *threadData, modelica_metatype _name, modelica_metatype _jacType, modelica_metatype _seedCandidates, modelica_metatype _partialCandidates, modelica_metatype _equations, modelica_metatype _knowns, modelica_metatype _strongComponents, modelica_metatype __omcQ_24in_5FfuncTree, modelica_metatype _init, modelica_metatype *out_funcTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBJacobian_jacobianSymbolic,2,0) {(void*) boxptr_NBJacobian_jacobianSymbolic,0}};
#define boxvar_NBJacobian_jacobianSymbolic MMC_REFSTRUCTLIT(boxvar_lit_NBJacobian_jacobianSymbolic)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBJacobian_partJacobian(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fpart, modelica_metatype __omcQ_24in_5FfuncTree, modelica_metatype _knowns, modelica_string _name, modelica_fnptr _func, modelica_metatype *out_funcTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBJacobian_partJacobian,2,0) {(void*) boxptr_NBJacobian_partJacobian,0}};
#define boxvar_NBJacobian_partJacobian MMC_REFSTRUCTLIT(boxvar_lit_NBJacobian_partJacobian)

PROTECTED_FUNCTION_STATIC void omc_NBJacobian_makeVarTraverse(threadData_t *threadData, modelica_metatype _var_ptr, modelica_string _name, modelica_metatype _vars_ptr, modelica_metatype _map, modelica_fnptr _makeVar, modelica_boolean _init)
{
  modelica_metatype _var = NULL;
  modelica_metatype _diff = NULL;
  modelica_metatype _parent_name = NULL;
  modelica_metatype _diff_parent_name = NULL;
  modelica_metatype _diff_ptr = NULL;
  modelica_metatype _parent = NULL;
  modelica_metatype _diff_parent = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _var = omc_Pointer_access(threadData, _var_ptr);
  // _diff has no default value.
  // _parent_name has no default value.
  // _diff_parent_name has no default value.
  // _diff_ptr has no default value.
  // _parent has no default value.
  // _diff_parent has no default value.
  if(omc_NBVariable_isContinuous(threadData, _var_ptr, _init))
  {
    _diff = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_makeVar), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_string, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_makeVar), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_makeVar), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_var), 2))), _name ,&_diff_ptr) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_string, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_makeVar), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_var), 2))), _name ,&_diff_ptr);

    tmpMeta1 = mmc_mk_cons(_diff_ptr, omc_Pointer_access(threadData, _vars_ptr));
    omc_Pointer_update(threadData, _vars_ptr, tmpMeta1);

    omc_UnorderedMap_add(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_var), 2))), _diff, _map);

    { /* match expression */
      modelica_metatype tmp4_1;
      tmp4_1 = omc_NBVariable_getParent(threadData, _var_ptr);
      {
        volatile mmc_switch_type tmp4;
        int tmp5;
        tmp4 = 0;
        for (; tmp4 < 2; tmp4++) {
          switch (MMC_SWITCH_CAST(tmp4)) {
          case 0: {
            modelica_metatype tmpMeta6;
            modelica_metatype tmpMeta7;
            if (optionNone(tmp4_1)) goto tmp3_end;
            tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
            _parent = tmpMeta6;
            /* Pattern matching succeeded */
            _parent_name = omc_NBVariable_getVarName(threadData, _parent);

            { /* match expression */
              modelica_metatype tmp10_1;
              tmp10_1 = omc_UnorderedMap_get(threadData, _parent_name, _map);
              {
                volatile mmc_switch_type tmp10;
                int tmp11;
                tmp10 = 0;
                for (; tmp10 < 2; tmp10++) {
                  switch (MMC_SWITCH_CAST(tmp10)) {
                  case 0: {
                    modelica_metatype tmpMeta12;
                    if (optionNone(tmp10_1)) goto tmp9_end;
                    tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp10_1), 1));
                    _diff_parent_name = tmpMeta12;
                    /* Pattern matching succeeded */
                    tmpMeta7 = omc_NBVariable_getVarPointer(threadData, _diff_parent_name, _OMC_LIT1);
                    goto tmp9_done;
                  }
                  case 1: {
                    
                    /* Pattern matching succeeded */
                    _diff_parent_name = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_makeVar), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_string, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_makeVar), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_makeVar), 2))), _parent_name, _name, NULL) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_string, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_makeVar), 1)))) (threadData, _parent_name, _name, NULL);

                    omc_UnorderedMap_add(threadData, _parent_name, _diff_parent_name, _map);
                    tmpMeta7 = omc_NBVariable_getVarPointer(threadData, _diff_parent_name, _OMC_LIT2);
                    goto tmp9_done;
                  }
                  }
                  goto tmp9_end;
                  tmp9_end: ;
                }
                goto goto_8;
                goto_8:;
                goto goto_2;
                goto tmp9_done;
                tmp9_done:;
              }
            }
            _diff_parent = tmpMeta7;

            omc_NBVariable_addRecordChild(threadData, _diff_parent, _diff_ptr);

            _diff_ptr = omc_NBVariable_setParent(threadData, _diff_ptr, _diff_parent);
            goto tmp3_done;
          }
          case 1: {
            
            /* Pattern matching succeeded */
            goto tmp3_done;
          }
          }
          goto tmp3_end;
          tmp3_end: ;
        }
        goto goto_2;
        goto_2:;
        MMC_THROW_INTERNAL();
        goto tmp3_done;
        tmp3_done:;
      }
    }
    ;
  }
  _return: OMC_LABEL_UNUSED
  return;
}
PROTECTED_FUNCTION_STATIC void boxptr_NBJacobian_makeVarTraverse(threadData_t *threadData, modelica_metatype _var_ptr, modelica_metatype _name, modelica_metatype _vars_ptr, modelica_metatype _map, modelica_fnptr _makeVar, modelica_metatype _init)
{
  modelica_integer tmp1;
  tmp1 = mmc_unbox_integer(_init);
  omc_NBJacobian_makeVarTraverse(threadData, _var_ptr, _name, _vars_ptr, _map, _makeVar, tmp1);
  return;
}

PROTECTED_FUNCTION_STATIC modelica_fnptr omc_NBJacobian_getTmpFilterFunction(threadData_t *threadData, modelica_integer _jacType)
{
  modelica_fnptr _func;
  modelica_fnptr tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  { /* match expression */
    modelica_integer tmp4_1;
    tmp4_1 = (modelica_integer)_jacType;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 5; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (1 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = boxvar_NBVariable_isStateDerivative;
          goto tmp3_done;
        }
        case 1: {
          if (2 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = boxvar_NBVariable_isResidual;
          goto tmp3_done;
        }
        case 2: {
          if (3 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = boxvar_NBVariable_isResidual;
          goto tmp3_done;
        }
        case 3: {
          if (4 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = boxvar_NBVariable_isResidual;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          
          /* Pattern matching succeeded */
          tmpMeta7 = stringAppend(_OMC_LIT8,omc_NBJacobian_jacobianTypeString(threadData, (modelica_integer)_jacType));
          tmpMeta6 = mmc_mk_cons(tmpMeta7, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT7, tmpMeta6);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _func = (modelica_fnptr) tmp1;
  _return: OMC_LABEL_UNUSED
  return _func;
}
PROTECTED_FUNCTION_STATIC modelica_fnptr boxptr_NBJacobian_getTmpFilterFunction(threadData_t *threadData, modelica_metatype _jacType)
{
  modelica_integer tmp1;
  modelica_fnptr _func;
  tmp1 = mmc_unbox_integer(_jacType);
  _func = omc_NBJacobian_getTmpFilterFunction(threadData, tmp1);
  return _func;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBJacobian_jacobianNone(threadData_t *threadData, modelica_string _name, modelica_integer _jacType, modelica_metatype _seedCandidates, modelica_metatype _partialCandidates, modelica_metatype _equations, modelica_metatype _knowns, modelica_metatype _strongComponents, modelica_metatype __omcQ_24in_5FfuncTree, modelica_boolean _init, modelica_metatype *out_funcTree)
{
  modelica_metatype _jacobian = NULL;
  modelica_metatype _funcTree = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _jacobian has no default value.
  _funcTree = __omcQ_24in_5FfuncTree;
  _jacobian = mmc_mk_none();
  _return: OMC_LABEL_UNUSED
  if (out_funcTree) { *out_funcTree = _funcTree; }
  return _jacobian;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBJacobian_jacobianNone(threadData_t *threadData, modelica_metatype _name, modelica_metatype _jacType, modelica_metatype _seedCandidates, modelica_metatype _partialCandidates, modelica_metatype _equations, modelica_metatype _knowns, modelica_metatype _strongComponents, modelica_metatype __omcQ_24in_5FfuncTree, modelica_metatype _init, modelica_metatype *out_funcTree)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _jacobian = NULL;
  tmp1 = mmc_unbox_integer(_jacType);
  tmp2 = mmc_unbox_integer(_init);
  _jacobian = omc_NBJacobian_jacobianNone(threadData, _name, tmp1, _seedCandidates, _partialCandidates, _equations, _knowns, _strongComponents, __omcQ_24in_5FfuncTree, tmp2, out_funcTree);
  /* skip box _jacobian; Option<NBackendDAE> */
  /* skip box _funcTree; NFFlatten.FunctionTreeImpl.Tree */
  return _jacobian;
}

static modelica_metatype closure0_NBVariable_isContinuous(threadData_t *thData, modelica_metatype closure, modelica_metatype var_ptr)
{
  modelica_metatype init = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NBVariable_isContinuous(thData, var_ptr, init);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBJacobian_jacobianNumeric(threadData_t *threadData, modelica_string _name, modelica_integer _jacType, modelica_metatype _seedCandidates, modelica_metatype _partialCandidates, modelica_metatype _equations, modelica_metatype _knowns, modelica_metatype _strongComponents, modelica_metatype __omcQ_24in_5FfuncTree, modelica_boolean _init, modelica_metatype *out_funcTree)
{
  modelica_metatype _jacobian = NULL;
  modelica_metatype _funcTree = NULL;
  modelica_metatype _varDataJac = NULL;
  modelica_metatype _sparsityPattern = NULL;
  modelica_metatype _sparsityColoring = NULL;
  modelica_metatype _res_vars = NULL;
  modelica_metatype _tmp_vars = NULL;
  modelica_fnptr _func;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _jacobian has no default value.
  _funcTree = __omcQ_24in_5FfuncTree;
  // _varDataJac has no default value.
  // _sparsityPattern has no default value.
  // _sparsityColoring has no default value.
  // _res_vars has no default value.
  // _tmp_vars has no default value.
  _func = omc_NBJacobian_getTmpFilterFunction(threadData, (modelica_integer)_jacType);
  _res_vars = omc_List_splitOnTrue(threadData, omc_NBVariable_VariablePointers_toList(threadData, _partialCandidates), ((modelica_fnptr) _func) ,&_tmp_vars);

  tmpMeta1 = mmc_mk_box1(0, mmc_mk_boolean(_init));
  _tmp_vars = omc_List_splitOnTrue(threadData, _tmp_vars, (modelica_fnptr) mmc_mk_box2(0,closure0_NBVariable_isContinuous,tmpMeta1), NULL);

  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta8 = mmc_mk_box11(4, &NBVariable_VarData_VAR__DATA__JAC__desc, omc_NBVariable_VariablePointers_fromList(threadData, tmpMeta2, 0 /* false */), _partialCandidates, omc_NBVariable_VariablePointers_fromList(threadData, tmpMeta3, 0 /* false */), omc_NBVariable_VariablePointers_fromList(threadData, tmpMeta4, 0 /* false */), omc_NBVariable_VariablePointers_fromList(threadData, tmpMeta5, 0 /* false */), omc_NBVariable_VariablePointers_fromList(threadData, tmpMeta6, 0 /* false */), omc_NBVariable_VariablePointers_fromList(threadData, tmpMeta7, 0 /* false */), omc_NBVariable_VariablePointers_fromList(threadData, _res_vars, 0 /* false */), omc_NBVariable_VariablePointers_fromList(threadData, _tmp_vars, 0 /* false */), _seedCandidates);
  _varDataJac = tmpMeta8;

  _sparsityPattern = omc_NBJacobian_SparsityPattern_create(threadData, _seedCandidates, _partialCandidates, _strongComponents, (modelica_integer)_jacType ,&_sparsityColoring);

  tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta10 = mmc_mk_box7(4, &NBackendDAE_JACOBIAN__desc, _name, mmc_mk_integer((modelica_integer)_jacType), _varDataJac, listArray(tmpMeta9), _sparsityPattern, _sparsityColoring);
  _jacobian = mmc_mk_some(tmpMeta10);
  _return: OMC_LABEL_UNUSED
  if (out_funcTree) { *out_funcTree = _funcTree; }
  return _jacobian;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBJacobian_jacobianNumeric(threadData_t *threadData, modelica_metatype _name, modelica_metatype _jacType, modelica_metatype _seedCandidates, modelica_metatype _partialCandidates, modelica_metatype _equations, modelica_metatype _knowns, modelica_metatype _strongComponents, modelica_metatype __omcQ_24in_5FfuncTree, modelica_metatype _init, modelica_metatype *out_funcTree)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _jacobian = NULL;
  tmp1 = mmc_unbox_integer(_jacType);
  tmp2 = mmc_unbox_integer(_init);
  _jacobian = omc_NBJacobian_jacobianNumeric(threadData, _name, tmp1, _seedCandidates, _partialCandidates, _equations, _knowns, _strongComponents, __omcQ_24in_5FfuncTree, tmp2, out_funcTree);
  /* skip box _jacobian; Option<NBackendDAE> */
  /* skip box _funcTree; NFFlatten.FunctionTreeImpl.Tree */
  return _jacobian;
}

static void closure1_NBJacobian_makeVarTraverse(threadData_t *thData, modelica_metatype closure, modelica_metatype var_ptr)
{
  modelica_string name = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype vars_ptr = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  modelica_metatype map = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),3));
  modelica_fnptr makeVar = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),4));
  modelica_metatype init = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),5));
  boxptr_NBJacobian_makeVarTraverse(thData, var_ptr, name, vars_ptr, map, makeVar, init);
}static modelica_metatype closure2_NBVariable_isContinuous(threadData_t *thData, modelica_metatype closure, modelica_metatype var_ptr)
{
  modelica_metatype init = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NBVariable_isContinuous(thData, var_ptr, init);
}static modelica_metatype closure3_NBVariable_makePDerVar(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_cref, modelica_string name, modelica_metatype tmp11)
{
  modelica_metatype isTmp = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NBVariable_makePDerVar(thData, $in_cref, name, isTmp, tmp11);
}static modelica_metatype closure4_NBVariable_makePDerVar(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_cref, modelica_string name, modelica_metatype tmp16)
{
  modelica_metatype isTmp = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NBVariable_makePDerVar(thData, $in_cref, name, isTmp, tmp16);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBJacobian_jacobianSymbolic(threadData_t *threadData, modelica_string _name, modelica_integer _jacType, modelica_metatype _seedCandidates, modelica_metatype _partialCandidates, modelica_metatype _equations, modelica_metatype _knowns, modelica_metatype _strongComponents, modelica_metatype __omcQ_24in_5FfuncTree, modelica_boolean _init, modelica_metatype *out_funcTree)
{
  modelica_metatype _jacobian = NULL;
  modelica_metatype _funcTree = NULL;
  modelica_metatype _comps = NULL;
  modelica_metatype _diffed_comps = NULL;
  modelica_metatype _seed_vars_ptr = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _pDer_vars_ptr = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype _diff_map = NULL;
  modelica_metatype _diffArguments = NULL;
  modelica_metatype _idx = NULL;
  modelica_metatype _all_vars = NULL;
  modelica_metatype _unknown_vars = NULL;
  modelica_metatype _aux_vars = NULL;
  modelica_metatype _alias_vars = NULL;
  modelica_metatype _depend_vars = NULL;
  modelica_metatype _res_vars = NULL;
  modelica_metatype _tmp_vars = NULL;
  modelica_metatype _seed_vars = NULL;
  modelica_metatype _varDataJac = NULL;
  modelica_metatype _sparsityPattern = NULL;
  modelica_metatype _sparsityColoring = NULL;
  modelica_fnptr _func;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  modelica_metatype tmpMeta17;
  modelica_metatype tmpMeta18;
  modelica_metatype tmpMeta19;
  modelica_metatype tmpMeta20;
  modelica_metatype tmpMeta21;
  modelica_metatype tmpMeta22;
  modelica_metatype tmpMeta23;
  modelica_metatype tmpMeta24;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _jacobian has no default value.
  _funcTree = __omcQ_24in_5FfuncTree;
  // _comps has no default value.
  // _diffed_comps has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _seed_vars_ptr = omc_Pointer_create(threadData, tmpMeta1);
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _pDer_vars_ptr = omc_Pointer_create(threadData, tmpMeta2);
  _diff_map = omc_UnorderedMap_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 1));
  // _diffArguments has no default value.
  _idx = omc_Pointer_create(threadData, mmc_mk_integer(((modelica_integer) 0)));
  // _all_vars has no default value.
  // _unknown_vars has no default value.
  // _aux_vars has no default value.
  // _alias_vars has no default value.
  // _depend_vars has no default value.
  // _res_vars has no default value.
  // _tmp_vars has no default value.
  // _seed_vars has no default value.
  // _varDataJac has no default value.
  // _sparsityPattern has no default value.
  // _sparsityColoring has no default value.
  _func = omc_NBJacobian_getTmpFilterFunction(threadData, (modelica_integer)_jacType);
  if(isSome(_strongComponents))
  {
    {
      modelica_metatype __omcQ_24tmpVar3;
      modelica_metatype* tmp4;
      modelica_metatype tmpMeta5;
      modelica_metatype __omcQ_24tmpVar2;
      modelica_integer tmp6;
      modelica_metatype _comp_loopVar = 0;
      modelica_integer tmp7;
      modelica_metatype _comp;
      _comp_loopVar = omc_Util_getOption(threadData, _strongComponents);
      tmp7 = 1;
      tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
      __omcQ_24tmpVar3 = tmpMeta5; /* defaultValue */
      tmp4 = &__omcQ_24tmpVar3;
      while(1) {
        tmp6 = 1;
        while (tmp7 <= arrayLength(_comp_loopVar)) {
          _comp = arrayGet(_comp_loopVar, tmp7++);
          if ((!omc_NBStrongComponent_isDiscrete(threadData, _comp))) {
            tmp6--;
            break;
          }
        }
        if (tmp6 == 0) {
          __omcQ_24tmpVar2 = _comp;
          *tmp4 = mmc_mk_cons(__omcQ_24tmpVar2,0);
          tmp4 = &MMC_CDR(*tmp4);
        } else if (tmp6 == 1) {
          break;
        } else {
          MMC_THROW_INTERNAL();
        }
      }
      *tmp4 = mmc_mk_nil();
      tmpMeta3 = __omcQ_24tmpVar3;
    }
    _comps = tmpMeta3;
  }
  else
  {
    omc_Error_addMessage(threadData, _OMC_LIT7, _OMC_LIT10);
  }

  tmpMeta8 = mmc_mk_box5(0, _name, _seed_vars_ptr, _diff_map, boxvar_NBVariable_makeSeedVar, mmc_mk_boolean(_init));
  omc_NBVariable_VariablePointers_mapPtr(threadData, _seedCandidates, (modelica_fnptr) mmc_mk_box2(0,closure1_NBJacobian_makeVarTraverse,tmpMeta8));

  _res_vars = omc_List_splitOnTrue(threadData, omc_NBVariable_VariablePointers_toList(threadData, _partialCandidates), ((modelica_fnptr) _func) ,&_tmp_vars);

  tmpMeta9 = mmc_mk_box1(0, mmc_mk_boolean(_init));
  _tmp_vars = omc_List_splitOnTrue(threadData, _tmp_vars, (modelica_fnptr) mmc_mk_box2(0,closure2_NBVariable_isContinuous,tmpMeta9), NULL);

  {
    modelica_metatype _v;
    for (tmpMeta10 = _res_vars; !listEmpty(tmpMeta10); tmpMeta10=MMC_CDR(tmpMeta10))
    {
      _v = MMC_CAR(tmpMeta10);
      tmpMeta12 = mmc_mk_box1(0, mmc_mk_boolean(0 /* false */));
      omc_NBJacobian_makeVarTraverse(threadData, _v, _name, _pDer_vars_ptr, _diff_map, (modelica_fnptr) mmc_mk_box2(0,closure3_NBVariable_makePDerVar,tmpMeta12), _init);
    }
  }

  _res_vars = omc_Pointer_access(threadData, _pDer_vars_ptr);

  tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
  _pDer_vars_ptr = omc_Pointer_create(threadData, tmpMeta14);

  {
    modelica_metatype _v;
    for (tmpMeta15 = _tmp_vars; !listEmpty(tmpMeta15); tmpMeta15=MMC_CDR(tmpMeta15))
    {
      _v = MMC_CAR(tmpMeta15);
      tmpMeta17 = mmc_mk_box1(0, mmc_mk_boolean(1 /* true */));
      omc_NBJacobian_makeVarTraverse(threadData, _v, _name, _pDer_vars_ptr, _diff_map, (modelica_fnptr) mmc_mk_box2(0,closure4_NBVariable_makePDerVar,tmpMeta17), _init);
    }
  }

  _tmp_vars = omc_Pointer_access(threadData, _pDer_vars_ptr);

  tmpMeta19 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta20 = mmc_mk_box7(3, &NBDifferentiate_DifferentiationArguments_DIFFERENTIATION__ARGUMENTS__desc, _OMC_LIT11, tmpMeta19, mmc_mk_some(_diff_map), mmc_mk_integer(4), _funcTree, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_seedCandidates), 4))));
  _diffArguments = tmpMeta20;

  _diffed_comps = omc_NBDifferentiate_differentiateStrongComponentList(threadData, _comps, _diffArguments, _idx, _name, _OMC_LIT12 ,&_diffArguments);

  _funcTree = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_diffArguments), 6)));

  _unknown_vars = listAppend(_res_vars, _tmp_vars);

  _all_vars = _unknown_vars;

  _seed_vars = omc_Pointer_access(threadData, _seed_vars_ptr);

  _aux_vars = _seed_vars;

  tmpMeta21 = MMC_REFSTRUCTLIT(mmc_nil);
  _alias_vars = tmpMeta21;

  tmpMeta22 = MMC_REFSTRUCTLIT(mmc_nil);
  _depend_vars = tmpMeta22;

  tmpMeta23 = mmc_mk_box11(4, &NBVariable_VarData_VAR__DATA__JAC__desc, omc_NBVariable_VariablePointers_fromList(threadData, _all_vars, 0 /* false */), omc_NBVariable_VariablePointers_fromList(threadData, _unknown_vars, 0 /* false */), _knowns, omc_NBVariable_VariablePointers_fromList(threadData, _aux_vars, 0 /* false */), omc_NBVariable_VariablePointers_fromList(threadData, _alias_vars, 0 /* false */), _partialCandidates, omc_NBVariable_VariablePointers_fromList(threadData, _depend_vars, 0 /* false */), omc_NBVariable_VariablePointers_fromList(threadData, _res_vars, 0 /* false */), omc_NBVariable_VariablePointers_fromList(threadData, _tmp_vars, 0 /* false */), omc_NBVariable_VariablePointers_fromList(threadData, _seed_vars, 0 /* false */));
  _varDataJac = tmpMeta23;

  _sparsityPattern = omc_NBJacobian_SparsityPattern_create(threadData, _seedCandidates, _partialCandidates, _strongComponents, (modelica_integer)_jacType ,&_sparsityColoring);

  tmpMeta24 = mmc_mk_box7(4, &NBackendDAE_JACOBIAN__desc, _name, mmc_mk_integer((modelica_integer)_jacType), _varDataJac, listArray(_diffed_comps), _sparsityPattern, _sparsityColoring);
  _jacobian = mmc_mk_some(tmpMeta24);
  _return: OMC_LABEL_UNUSED
  if (out_funcTree) { *out_funcTree = _funcTree; }
  return _jacobian;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBJacobian_jacobianSymbolic(threadData_t *threadData, modelica_metatype _name, modelica_metatype _jacType, modelica_metatype _seedCandidates, modelica_metatype _partialCandidates, modelica_metatype _equations, modelica_metatype _knowns, modelica_metatype _strongComponents, modelica_metatype __omcQ_24in_5FfuncTree, modelica_metatype _init, modelica_metatype *out_funcTree)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _jacobian = NULL;
  tmp1 = mmc_unbox_integer(_jacType);
  tmp2 = mmc_unbox_integer(_init);
  _jacobian = omc_NBJacobian_jacobianSymbolic(threadData, _name, tmp1, _seedCandidates, _partialCandidates, _equations, _knowns, _strongComponents, __omcQ_24in_5FfuncTree, tmp2, out_funcTree);
  /* skip box _jacobian; Option<NBackendDAE> */
  /* skip box _funcTree; NFFlatten.FunctionTreeImpl.Tree */
  return _jacobian;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBJacobian_partJacobian(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fpart, modelica_metatype __omcQ_24in_5FfuncTree, modelica_metatype _knowns, modelica_string _name, modelica_fnptr _func, modelica_metatype *out_funcTree)
{
  modelica_metatype _part = NULL;
  modelica_metatype _funcTree = NULL;
  modelica_integer _jacType;
  modelica_metatype _unknowns = NULL;
  modelica_metatype _derivative_vars = NULL;
  modelica_metatype _state_vars = NULL;
  modelica_metatype _seedCandidates = NULL;
  modelica_metatype _partialCandidates = NULL;
  modelica_metatype _jacobian = NULL;
  modelica_integer _kind;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _part = __omcQ_24in_5Fpart;
  _funcTree = __omcQ_24in_5FfuncTree;
  // _jacType has no default value.
  // _unknowns has no default value.
  // _derivative_vars has no default value.
  // _state_vars has no default value.
  // _seedCandidates has no default value.
  // _partialCandidates has no default value.
  // _jacobian has no default value.
  _kind = omc_NBPartition_Partition_getKind(threadData, _part);
  _partialCandidates = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_part), 4)));

  _unknowns = ((omc_NBPartition_Partition_getKind(threadData, _part) == 6)?omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_part), 5)))):(MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_part), 4))));

  _jacType = ((omc_NBPartition_Partition_getKind(threadData, _part) == 6)?2:1);

  {
    modelica_metatype __omcQ_24tmpVar5;
    modelica_metatype* tmp2;
    modelica_metatype tmpMeta3;
    modelica_metatype __omcQ_24tmpVar4;
    modelica_integer tmp4;
    modelica_metatype _var_loopVar = 0;
    modelica_metatype _var;
    _var_loopVar = omc_NBVariable_VariablePointers_toList(threadData, _unknowns);
    tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar5 = tmpMeta3; /* defaultValue */
    tmp2 = &__omcQ_24tmpVar5;
    while(1) {
      tmp4 = 1;
      while (!listEmpty(_var_loopVar)) {
        _var = MMC_CAR(_var_loopVar);
        _var_loopVar = MMC_CDR(_var_loopVar);
        if (omc_NBVariable_isStateDerivative(threadData, _var)) {
          tmp4--;
          break;
        }
      }
      if (tmp4 == 0) {
        __omcQ_24tmpVar4 = _var;
        *tmp2 = mmc_mk_cons(__omcQ_24tmpVar4,0);
        tmp2 = &MMC_CDR(*tmp2);
      } else if (tmp4 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp2 = mmc_mk_nil();
    tmpMeta1 = __omcQ_24tmpVar5;
  }
  _derivative_vars = tmpMeta1;

  {
    modelica_metatype __omcQ_24tmpVar7;
    modelica_metatype* tmp6;
    modelica_metatype tmpMeta7;
    modelica_metatype __omcQ_24tmpVar6;
    modelica_integer tmp8;
    modelica_metatype _var_loopVar = 0;
    modelica_metatype _var;
    _var_loopVar = _derivative_vars;
    tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar7 = tmpMeta7; /* defaultValue */
    tmp6 = &__omcQ_24tmpVar7;
    while(1) {
      tmp8 = 1;
      if (!listEmpty(_var_loopVar)) {
        _var = MMC_CAR(_var_loopVar);
        _var_loopVar = MMC_CDR(_var_loopVar);
        tmp8--;
      }
      if (tmp8 == 0) {
        __omcQ_24tmpVar6 = omc_Util_getOption(threadData, omc_NBVariable_getVarState(threadData, _var, NULL));
        *tmp6 = mmc_mk_cons(__omcQ_24tmpVar6,0);
        tmp6 = &MMC_CDR(*tmp6);
      } else if (tmp8 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp6 = mmc_mk_nil();
    tmpMeta5 = __omcQ_24tmpVar7;
  }
  _state_vars = tmpMeta5;

  _seedCandidates = omc_NBVariable_VariablePointers_fromList(threadData, _state_vars, mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_partialCandidates), 4)))));

  _jacobian = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_string, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _name, mmc_mk_integer((modelica_integer)_jacType), _seedCandidates, _partialCandidates, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_part), 6))), _knowns, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_part), 9))), _funcTree, mmc_mk_boolean(((modelica_integer)_kind == 5)) ,&_funcTree) : ((modelica_metatype(*)(threadData_t*, modelica_string, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _name, mmc_mk_integer((modelica_integer)_jacType), _seedCandidates, _partialCandidates, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_part), 6))), _knowns, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_part), 9))), _funcTree, mmc_mk_boolean(((modelica_integer)_kind == 5)) ,&_funcTree);

  tmpMeta10 = mmc_mk_box3(3, &NBPartition_Association_CONTINUOUS__desc, mmc_mk_integer((modelica_integer)_kind), _jacobian);
  tmpMeta9 = MMC_TAGPTR(mmc_alloc_words(10));
  memcpy(MMC_UNTAGPTR(tmpMeta9), MMC_UNTAGPTR(_part), 10*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta9))[3] = tmpMeta10;
  _part = tmpMeta9;

  if(omc_Flags_isSet(threadData, _OMC_LIT16))
  {
    fputs(MMC_STRINGDATA(omc_NBPartition_Partition_toString(threadData, _part, ((modelica_integer) 2))),stdout);
  }
  _return: OMC_LABEL_UNUSED
  if (out_funcTree) { *out_funcTree = _funcTree; }
  return _part;
}

DLLDirection
modelica_metatype omc_NBJacobian_SparsityColoring_combine(threadData_t *threadData, modelica_metatype _coloring1, modelica_metatype _coloring2)
{
  modelica_metatype _coloring_out = NULL;
  modelica_metatype _smaller_coloring = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_boolean tmp3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_integer tmp8;
  modelica_integer tmp9;
  modelica_integer tmp10;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _coloring_out has no default value.
  // _smaller_coloring has no default value.
  /* Pattern-matching assignment */
  tmp3 = (modelica_boolean)(arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_coloring2), 2)))) > arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_coloring1), 2)))));
  if(tmp3)
  {
    tmpMeta1 = mmc_mk_box2(0, _coloring2, _coloring1);
    tmpMeta4 = tmpMeta1;
  }
  else
  {
    tmpMeta2 = mmc_mk_box2(0, _coloring1, _coloring2);
    tmpMeta4 = tmpMeta2;
  }
  tmpMeta5 = tmpMeta4;
  tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 1));
  tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 2));
  _coloring_out = tmpMeta6;
  _smaller_coloring = tmpMeta7;

  tmp8 = ((modelica_integer) 1); tmp9 = 1; tmp10 = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_smaller_coloring), 2))));
  if(!(((tmp9 > 0) && (tmp8 > tmp10)) || ((tmp9 < 0) && (tmp8 < tmp10))))
  {
    modelica_integer _i;
    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp8, tmp10); _i += tmp9)
    {
      arrayUpdate((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_coloring_out), 2))),_i,listAppend(arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_coloring_out), 2))),_i) /* DAE.ASUB */, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_smaller_coloring), 2))),_i) /* DAE.ASUB */));

      arrayUpdate((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_coloring_out), 3))),_i,listAppend(arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_coloring_out), 3))),_i) /* DAE.ASUB */, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_smaller_coloring), 3))),_i) /* DAE.ASUB */));
    }
  }
  _return: OMC_LABEL_UNUSED
  return _coloring_out;
}

DLLDirection
modelica_metatype omc_NBJacobian_SparsityColoring_PartialD2ColoringAlg(threadData_t *threadData, modelica_metatype _sparsityPattern, modelica_metatype _map)
{
  modelica_metatype _sparsityColoring = NULL;
  modelica_metatype _cref_lookup = NULL;
  modelica_metatype _index_lookup = NULL;
  modelica_metatype _color_exists = NULL;
  modelica_metatype _coloring = NULL;
  modelica_metatype _forbidden_colors = NULL;
  modelica_metatype _col_coloring = NULL;
  modelica_metatype _row_coloring = NULL;
  modelica_integer _color;
  modelica_metatype _cols_lst = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _rows_lst = NULL;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_integer tmp4;
  modelica_integer tmp5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_integer tmp12;
  modelica_integer tmp13;
  modelica_integer tmp14;
  modelica_metatype tmpMeta15;
  modelica_integer tmp16;
  modelica_integer tmp17;
  modelica_integer tmp18;
  modelica_metatype tmpMeta19;
  modelica_metatype tmpMeta20;
  modelica_integer tmp21;
  modelica_integer tmp22;
  modelica_integer tmp23;
  modelica_metatype tmpMeta24;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _sparsityColoring has no default value.
  // _cref_lookup has no default value.
  // _index_lookup has no default value.
  // _color_exists has no default value.
  // _coloring has no default value.
  // _forbidden_colors has no default value.
  // _col_coloring has no default value.
  // _row_coloring has no default value.
  // _color has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _cols_lst = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _rows_lst = tmpMeta2;
  _cref_lookup = listArray((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sparsityPattern), 4))));

  _index_lookup = omc_UnorderedMap_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, omc_Util_nextPrime(threadData, listLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sparsityPattern), 4))))));

  tmp3 = ((modelica_integer) 1); tmp4 = 1; tmp5 = arrayLength(_cref_lookup);
  if(!(((tmp4 > 0) && (tmp3 > tmp5)) || ((tmp4 < 0) && (tmp3 < tmp5))))
  {
    modelica_integer _i;
    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp3, tmp5); _i += tmp4)
    {
      omc_UnorderedMap_add(threadData, arrayGet(_cref_lookup,_i) /* DAE.ASUB */, mmc_mk_integer(_i), _index_lookup);
    }
  }

  _coloring = arrayCreate(arrayLength(_cref_lookup), mmc_mk_integer(((modelica_integer) 0)));

  _forbidden_colors = arrayCreate(arrayLength(_cref_lookup), mmc_mk_integer(((modelica_integer) 0)));

  _color_exists = arrayCreate(arrayLength(_cref_lookup), mmc_mk_boolean(0 /* false */));

  tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
  _col_coloring = arrayCreate(arrayLength(_cref_lookup), tmpMeta6);

  tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
  _row_coloring = arrayCreate(arrayLength(_cref_lookup), tmpMeta7);

  tmp12 = ((modelica_integer) 1); tmp13 = 1; tmp14 = arrayLength(_cref_lookup);
  if(!(((tmp13 > 0) && (tmp12 > tmp14)) || ((tmp13 < 0) && (tmp12 < tmp14))))
  {
    modelica_integer _i;
    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp12, tmp14); _i += tmp13)
    {
      {
        modelica_metatype _row_var;
        for (tmpMeta8 = omc_UnorderedMap_getSafe(threadData, arrayGet(_cref_lookup,_i) /* DAE.ASUB */, _map, _OMC_LIT19); !listEmpty(tmpMeta8); tmpMeta8=MMC_CDR(tmpMeta8))
        {
          _row_var = MMC_CAR(tmpMeta8);
          {
            modelica_metatype _col_var;
            for (tmpMeta9 = omc_UnorderedMap_getSafe(threadData, _row_var, _map, _OMC_LIT18); !listEmpty(tmpMeta9); tmpMeta9=MMC_CDR(tmpMeta9))
            {
              _col_var = MMC_CAR(tmpMeta9);
              _color = mmc_unbox_integer(arrayGet(_coloring,mmc_unbox_integer(omc_UnorderedMap_getSafe(threadData, _col_var, _index_lookup, _OMC_LIT17))) /* DAE.ASUB */);

              if((_color > ((modelica_integer) 0)))
              {
                arrayUpdate(_forbidden_colors,_color,mmc_mk_integer(_i));
              }
            }
          }
        }
      }

      _color = ((modelica_integer) 1);

      while(1)
      {
        if(!(mmc_unbox_integer(arrayGet(_forbidden_colors,_color) /* DAE.ASUB */) == _i)) break;
        _color = ((modelica_integer) 1) + _color;
      }

      arrayUpdate(_coloring,_i,mmc_mk_integer(_color));

      arrayUpdate(_row_coloring,_color,listAppend(arrayGet(_row_coloring,_color) /* DAE.ASUB */, omc_UnorderedMap_getSafe(threadData, arrayGet(_cref_lookup,_i) /* DAE.ASUB */, _map, _OMC_LIT20)));

      arrayUpdate(_color_exists,_color,mmc_mk_boolean(1 /* true */));
    }
  }

  tmp16 = ((modelica_integer) 1); tmp17 = 1; tmp18 = arrayLength(_coloring);
  if(!(((tmp17 > 0) && (tmp16 > tmp18)) || ((tmp17 < 0) && (tmp16 < tmp18))))
  {
    modelica_integer _i;
    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp16, tmp18); _i += tmp17)
    {
      tmpMeta15 = mmc_mk_cons(arrayGet(_cref_lookup,_i) /* DAE.ASUB */, arrayGet(_col_coloring,mmc_unbox_integer(arrayGet(_coloring,_i) /* DAE.ASUB */)) /* DAE.ASUB */);
      arrayUpdate(_col_coloring,mmc_unbox_integer(arrayGet(_coloring,_i) /* DAE.ASUB */),tmpMeta15);
    }
  }

  tmp21 = arrayLength(_color_exists); tmp22 = ((modelica_integer) -1); tmp23 = ((modelica_integer) 1);
  if(!(((tmp22 > 0) && (tmp21 > tmp23)) || ((tmp22 < 0) && (tmp21 < tmp23))))
  {
    modelica_integer _i;
    for(_i = arrayLength(_color_exists); in_range_integer(_i, tmp21, tmp23); _i += tmp22)
    {
      if(mmc_unbox_boolean(arrayGet(_color_exists,_i) /* DAE.ASUB */))
      {
        tmpMeta19 = mmc_mk_cons(arrayGet(_col_coloring,_i) /* DAE.ASUB */, _cols_lst);
        _cols_lst = tmpMeta19;

        tmpMeta20 = mmc_mk_cons(arrayGet(_row_coloring,_i) /* DAE.ASUB */, _rows_lst);
        _rows_lst = tmpMeta20;
      }
    }
  }

  tmpMeta24 = mmc_mk_box3(3, &NBJacobian_SparsityColoring_SPARSITY__COLORING__desc, listArray(_cols_lst), listArray(_rows_lst));
  _sparsityColoring = tmpMeta24;
  _return: OMC_LABEL_UNUSED
  return _sparsityColoring;
}

DLLDirection
modelica_metatype omc_NBJacobian_SparsityColoring_PartialD2ColoringAlgC(threadData_t *threadData, modelica_metatype _sparsityPattern, modelica_integer _jacType)
{
  modelica_metatype _sparsityColoring = NULL;
  modelica_metatype _seeds = NULL;
  modelica_metatype _partials = NULL;
  modelica_metatype _seed_indices = NULL;
  modelica_metatype _partial_indices = NULL;
  modelica_integer _sizeCols;
  modelica_integer _sizeRows;
  modelica_metatype _idx_cref = NULL;
  modelica_metatype _deps = NULL;
  modelica_metatype _cols = NULL;
  modelica_metatype _rows = NULL;
  modelica_metatype _colored_cols = NULL;
  modelica_metatype _cref_colored_cols = NULL;
  modelica_metatype tmpMeta1;
  modelica_integer tmp5;
  modelica_integer tmp6;
  modelica_integer tmp7;
  modelica_integer tmp8;
  modelica_integer tmp9;
  modelica_integer tmp10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  modelica_metatype tmpMeta16;
  modelica_metatype tmpMeta17;
  modelica_metatype tmpMeta21;
  modelica_metatype tmpMeta22;
  modelica_metatype tmpMeta23;
  modelica_metatype tmpMeta24;
  modelica_metatype tmpMeta25;
  modelica_metatype tmpMeta26;
  modelica_metatype tmpMeta30;
  modelica_metatype tmpMeta31;
  modelica_metatype tmpMeta32;
  modelica_integer tmp36;
  modelica_integer tmp37;
  modelica_integer tmp38;
  modelica_metatype tmpMeta39;
  modelica_metatype tmpMeta40;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _sparsityColoring has no default value.
  // _seeds has no default value.
  // _partials has no default value.
  // _seed_indices has no default value.
  // _partial_indices has no default value.
  // _sizeCols has no default value.
  // _sizeRows has no default value.
  // _idx_cref has no default value.
  // _deps has no default value.
  // _cols has no default value.
  // _rows has no default value.
  // _colored_cols has no default value.
  // _cref_colored_cols has no default value.
  _seeds = listArray((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sparsityPattern), 4))));

  if(((modelica_integer)_jacType == 4))
  {
    _partials = listArray((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sparsityPattern), 5))));
  }
  else
  {
    {
      modelica_metatype __omcQ_24tmpVar9;
      modelica_metatype* tmp2;
      modelica_metatype tmpMeta3;
      modelica_metatype __omcQ_24tmpVar8;
      modelica_integer tmp4;
      modelica_metatype _cref_loopVar = 0;
      modelica_metatype _cref;
      _cref_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sparsityPattern), 5)));
      tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
      __omcQ_24tmpVar9 = tmpMeta3; /* defaultValue */
      tmp2 = &__omcQ_24tmpVar9;
      while(1) {
        tmp4 = 1;
        while (!listEmpty(_cref_loopVar)) {
          _cref = MMC_CAR(_cref_loopVar);
          _cref_loopVar = MMC_CDR(_cref_loopVar);
          if ((omc_NBVariable_checkCref(threadData, _cref, boxvar_NBVariable_isStateDerivative, _OMC_LIT21) || omc_NBVariable_checkCref(threadData, _cref, boxvar_NBVariable_isResidual, _OMC_LIT21))) {
            tmp4--;
            break;
          }
        }
        if (tmp4 == 0) {
          __omcQ_24tmpVar8 = _cref;
          *tmp2 = mmc_mk_cons(__omcQ_24tmpVar8,0);
          tmp2 = &MMC_CDR(*tmp2);
        } else if (tmp4 == 1) {
          break;
        } else {
          MMC_THROW_INTERNAL();
        }
      }
      *tmp2 = mmc_mk_nil();
      tmpMeta1 = __omcQ_24tmpVar9;
    }
    _partials = listArray(tmpMeta1);
  }

  _sizeCols = arrayLength(_seeds);

  _sizeRows = arrayLength(_partials);

  _seed_indices = omc_UnorderedMap_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, omc_Util_nextPrime(threadData, _sizeCols));

  _partial_indices = omc_UnorderedMap_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, omc_Util_nextPrime(threadData, _sizeRows));

  tmp5 = ((modelica_integer) 1); tmp6 = 1; tmp7 = _sizeCols;
  if(!(((tmp6 > 0) && (tmp5 > tmp7)) || ((tmp6 < 0) && (tmp5 < tmp7))))
  {
    modelica_integer _i;
    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp5, tmp7); _i += tmp6)
    {
      omc_UnorderedMap_add(threadData, arrayGet(_seeds,_i) /* DAE.ASUB */, mmc_mk_integer(_i), _seed_indices);
    }
  }

  tmp8 = ((modelica_integer) 1); tmp9 = 1; tmp10 = _sizeRows;
  if(!(((tmp9 > 0) && (tmp8 > tmp10)) || ((tmp9 < 0) && (tmp8 < tmp10))))
  {
    modelica_integer _i;
    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp8, tmp10); _i += tmp9)
    {
      omc_UnorderedMap_add(threadData, arrayGet(_partials,_i) /* DAE.ASUB */, mmc_mk_integer(_i), _partial_indices);
    }
  }

  tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
  _cols = arrayCreate(_sizeCols, tmpMeta11);

  tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
  _rows = arrayCreate(_sizeRows, tmpMeta12);

  {
    modelica_metatype _tpl;
    for (tmpMeta13 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sparsityPattern), 2))); !listEmpty(tmpMeta13); tmpMeta13=MMC_CDR(tmpMeta13))
    {
      _tpl = MMC_CAR(tmpMeta13);
      /* Pattern-matching assignment */
      tmpMeta14 = _tpl;
      tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 1));
      tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
      _idx_cref = tmpMeta15;
      _deps = tmpMeta16;

      {
        modelica_metatype __omcQ_24tmpVar11;
        modelica_metatype* tmp18;
        modelica_metatype tmpMeta19;
        modelica_metatype __omcQ_24tmpVar10;
        modelica_integer tmp20;
        modelica_metatype _dep_loopVar = 0;
        modelica_metatype _dep;
        _dep_loopVar = _deps;
        tmpMeta19 = MMC_REFSTRUCTLIT(mmc_nil);
        __omcQ_24tmpVar11 = tmpMeta19; /* defaultValue */
        tmp18 = &__omcQ_24tmpVar11;
        while(1) {
          tmp20 = 1;
          if (!listEmpty(_dep_loopVar)) {
            _dep = MMC_CAR(_dep_loopVar);
            _dep_loopVar = MMC_CDR(_dep_loopVar);
            tmp20--;
          }
          if (tmp20 == 0) {
            __omcQ_24tmpVar10 = omc_UnorderedMap_getSafe(threadData, _dep, _partial_indices, _OMC_LIT22);
            *tmp18 = mmc_mk_cons(__omcQ_24tmpVar10,0);
            tmp18 = &MMC_CDR(*tmp18);
          } else if (tmp20 == 1) {
            break;
          } else {
            MMC_THROW_INTERNAL();
          }
        }
        *tmp18 = mmc_mk_nil();
        tmpMeta17 = __omcQ_24tmpVar11;
      }
      arrayUpdate(_cols,mmc_unbox_integer(omc_UnorderedMap_getSafe(threadData, _idx_cref, _seed_indices, _OMC_LIT22)),tmpMeta17);
    }
  }

  {
    modelica_metatype _tpl;
    for (tmpMeta22 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sparsityPattern), 3))); !listEmpty(tmpMeta22); tmpMeta22=MMC_CDR(tmpMeta22))
    {
      _tpl = MMC_CAR(tmpMeta22);
      /* Pattern-matching assignment */
      tmpMeta23 = _tpl;
      tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 1));
      tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 2));
      _idx_cref = tmpMeta24;
      _deps = tmpMeta25;

      {
        modelica_metatype __omcQ_24tmpVar13;
        modelica_metatype* tmp27;
        modelica_metatype tmpMeta28;
        modelica_metatype __omcQ_24tmpVar12;
        modelica_integer tmp29;
        modelica_metatype _dep_loopVar = 0;
        modelica_metatype _dep;
        _dep_loopVar = _deps;
        tmpMeta28 = MMC_REFSTRUCTLIT(mmc_nil);
        __omcQ_24tmpVar13 = tmpMeta28; /* defaultValue */
        tmp27 = &__omcQ_24tmpVar13;
        while(1) {
          tmp29 = 1;
          if (!listEmpty(_dep_loopVar)) {
            _dep = MMC_CAR(_dep_loopVar);
            _dep_loopVar = MMC_CDR(_dep_loopVar);
            tmp29--;
          }
          if (tmp29 == 0) {
            __omcQ_24tmpVar12 = omc_UnorderedMap_getSafe(threadData, _dep, _seed_indices, _OMC_LIT23);
            *tmp27 = mmc_mk_cons(__omcQ_24tmpVar12,0);
            tmp27 = &MMC_CDR(*tmp27);
          } else if (tmp29 == 1) {
            break;
          } else {
            MMC_THROW_INTERNAL();
          }
        }
        *tmp27 = mmc_mk_nil();
        tmpMeta26 = __omcQ_24tmpVar13;
      }
      arrayUpdate(_rows,mmc_unbox_integer(omc_UnorderedMap_getSafe(threadData, _idx_cref, _partial_indices, _OMC_LIT23)),tmpMeta26);
    }
  }

  _colored_cols = omc_SymbolicJacobian_createColoring(threadData, _rows, _cols, _sizeCols, _sizeRows);

  tmpMeta31 = MMC_REFSTRUCTLIT(mmc_nil);
  _cref_colored_cols = arrayCreate(arrayLength(_colored_cols), tmpMeta31);

  tmp36 = ((modelica_integer) 1); tmp37 = 1; tmp38 = arrayLength(_colored_cols);
  if(!(((tmp37 > 0) && (tmp36 > tmp38)) || ((tmp37 < 0) && (tmp36 < tmp38))))
  {
    modelica_integer _i;
    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp36, tmp38); _i += tmp37)
    {
      {
        modelica_metatype __omcQ_24tmpVar15;
        modelica_metatype* tmp33;
        modelica_metatype tmpMeta34;
        modelica_metatype __omcQ_24tmpVar14;
        modelica_integer tmp35;
        modelica_metatype _idx_loopVar = 0;
        modelica_metatype _idx;
        _idx_loopVar = arrayGet(_colored_cols,_i) /* DAE.ASUB */;
        tmpMeta34 = MMC_REFSTRUCTLIT(mmc_nil);
        __omcQ_24tmpVar15 = tmpMeta34; /* defaultValue */
        tmp33 = &__omcQ_24tmpVar15;
        while(1) {
          tmp35 = 1;
          if (!listEmpty(_idx_loopVar)) {
            _idx = MMC_CAR(_idx_loopVar);
            _idx_loopVar = MMC_CDR(_idx_loopVar);
            tmp35--;
          }
          if (tmp35 == 0) {
            __omcQ_24tmpVar14 = arrayGet(_seeds,mmc_unbox_integer(_idx)) /* DAE.ASUB */;
            *tmp33 = mmc_mk_cons(__omcQ_24tmpVar14,0);
            tmp33 = &MMC_CDR(*tmp33);
          } else if (tmp35 == 1) {
            break;
          } else {
            MMC_THROW_INTERNAL();
          }
        }
        *tmp33 = mmc_mk_nil();
        tmpMeta32 = __omcQ_24tmpVar15;
      }
      arrayUpdate(_cref_colored_cols,_i,tmpMeta32);
    }
  }

  tmpMeta39 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta40 = mmc_mk_box3(3, &NBJacobian_SparsityColoring_SPARSITY__COLORING__desc, _cref_colored_cols, arrayCreate(_sizeRows, tmpMeta39));
  _sparsityColoring = tmpMeta40;
  _return: OMC_LABEL_UNUSED
  return _sparsityColoring;
}
modelica_metatype boxptr_NBJacobian_SparsityColoring_PartialD2ColoringAlgC(threadData_t *threadData, modelica_metatype _sparsityPattern, modelica_metatype _jacType)
{
  modelica_integer tmp1;
  modelica_metatype _sparsityColoring = NULL;
  tmp1 = mmc_unbox_integer(_jacType);
  _sparsityColoring = omc_NBJacobian_SparsityColoring_PartialD2ColoringAlgC(threadData, _sparsityPattern, tmp1);
  /* skip box _sparsityColoring; NBJacobian.SparsityColoring */
  return _sparsityColoring;
}

DLLDirection
modelica_metatype omc_NBJacobian_SparsityColoring_lazy(threadData_t *threadData, modelica_metatype _sparsityPattern)
{
  modelica_metatype _sparsityColoring = NULL;
  modelica_metatype _cols = NULL;
  modelica_metatype _rows = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _sparsityColoring has no default value.
  // _cols has no default value.
  // _rows has no default value.
  {
    modelica_metatype __omcQ_24tmpVar17;
    modelica_metatype* tmp2;
    modelica_metatype tmpMeta3;
    modelica_metatype tmpMeta4;
    modelica_metatype __omcQ_24tmpVar16;
    modelica_integer tmp5;
    modelica_metatype _cref_loopVar = 0;
    modelica_metatype _cref;
    _cref_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sparsityPattern), 4)));
    tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar17 = tmpMeta3; /* defaultValue */
    tmp2 = &__omcQ_24tmpVar17;
    while(1) {
      tmp5 = 1;
      if (!listEmpty(_cref_loopVar)) {
        _cref = MMC_CAR(_cref_loopVar);
        _cref_loopVar = MMC_CDR(_cref_loopVar);
        tmp5--;
      }
      if (tmp5 == 0) {
        tmpMeta4 = mmc_mk_cons(_cref, MMC_REFSTRUCTLIT(mmc_nil));
        __omcQ_24tmpVar16 = tmpMeta4;
        *tmp2 = mmc_mk_cons(__omcQ_24tmpVar16,0);
        tmp2 = &MMC_CDR(*tmp2);
      } else if (tmp5 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp2 = mmc_mk_nil();
    tmpMeta1 = __omcQ_24tmpVar17;
  }
  _cols = listArray(tmpMeta1);

  _rows = arrayCreate(arrayLength(_cols), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sparsityPattern), 5))));

  tmpMeta6 = mmc_mk_box3(3, &NBJacobian_SparsityColoring_SPARSITY__COLORING__desc, _cols, _rows);
  _sparsityColoring = tmpMeta6;
  _return: OMC_LABEL_UNUSED
  return _sparsityColoring;
}

DLLDirection
modelica_string omc_NBJacobian_SparsityColoring_toString(threadData_t *threadData, modelica_metatype _sparsityColoring)
{
  modelica_string _str = NULL;
  modelica_boolean _empty;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_integer tmp11;
  modelica_integer tmp12;
  modelica_integer tmp13;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _str = omc_StringUtil_headline__2(threadData, _OMC_LIT24);
  _empty = (arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sparsityColoring), 2)))) == ((modelica_integer) 0));
  if(_empty)
  {
    tmpMeta1 = stringAppend(_str,_OMC_LIT25);
    _str = tmpMeta1;
  }

  tmp11 = ((modelica_integer) 1); tmp12 = 1; tmp13 = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sparsityColoring), 2))));
  if(!(((tmp12 > 0) && (tmp11 > tmp13)) || ((tmp12 < 0) && (tmp11 < tmp13))))
  {
    modelica_integer _i;
    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp11, tmp13); _i += tmp12)
    {
      tmpMeta2 = stringAppend(_str,_OMC_LIT26);
      tmpMeta3 = stringAppend(tmpMeta2,intString(_i));
      tmpMeta4 = stringAppend(tmpMeta3,_OMC_LIT27);
      tmpMeta5 = stringAppend(tmpMeta4,_OMC_LIT28);
      tmpMeta6 = stringAppend(tmpMeta5,omc_NFComponentRef_listToString(threadData, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sparsityColoring), 2))),_i) /* DAE.ASUB */));
      tmpMeta7 = stringAppend(tmpMeta6,_OMC_LIT29);
      tmpMeta8 = stringAppend(tmpMeta7,_OMC_LIT30);
      tmpMeta9 = stringAppend(tmpMeta8,omc_NFComponentRef_listToString(threadData, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sparsityColoring), 3))),_i) /* DAE.ASUB */));
      tmpMeta10 = stringAppend(tmpMeta9,_OMC_LIT31);
      _str = tmpMeta10;
    }
  }
  _return: OMC_LABEL_UNUSED
  return _str;
}

DLLDirection
modelica_metatype omc_NBJacobian_SparsityPattern_createEmpty(threadData_t *threadData, modelica_metatype *out_sparsityColoring)
{
  modelica_metatype _sparsityPattern = NULL;
  modelica_metatype _sparsityColoring = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _sparsityPattern = _OMC_LIT32;
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta3 = mmc_mk_box3(3, &NBJacobian_SparsityColoring_SPARSITY__COLORING__desc, listArray(tmpMeta1), listArray(tmpMeta2));
  _sparsityColoring = tmpMeta3;
  _return: OMC_LABEL_UNUSED
  if (out_sparsityColoring) { *out_sparsityColoring = _sparsityColoring; }
  return _sparsityPattern;
}

DLLDirection
modelica_metatype omc_NBJacobian_SparsityPattern_create(threadData_t *threadData, modelica_metatype _seedCandidates, modelica_metatype _partialCandidates, modelica_metatype _strongComponents, modelica_integer _jacType, modelica_metatype *out_sparsityColoring)
{
  modelica_metatype _sparsityPattern = NULL;
  modelica_metatype _sparsityColoring = NULL;
  modelica_metatype _map = NULL;
  modelica_metatype tmpMeta43;
  modelica_metatype tmpMeta44;
  modelica_metatype tmpMeta45;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _sparsityPattern has no default value.
  // _sparsityColoring has no default value.
  // _map has no default value.
  
  
  { /* match expression */
    modelica_metatype tmp8_1;
    tmp8_1 = _strongComponents;
    {
      modelica_metatype _seed_mapping = NULL;
      modelica_metatype _partial_mapping = NULL;
      modelica_metatype _comps = NULL;
      modelica_metatype _seed_vars = NULL;
      modelica_metatype _seed_vars_array = NULL;
      modelica_metatype _partial_vars = NULL;
      modelica_metatype _partial_vars_array = NULL;
      modelica_metatype _tmp = NULL;
      modelica_metatype _row_vars = NULL;
      modelica_metatype tmpMeta3;
      modelica_metatype _col_vars = NULL;
      modelica_metatype tmpMeta4;
      modelica_metatype _set = NULL;
      modelica_metatype _cols = NULL;
      modelica_metatype tmpMeta5;
      modelica_metatype _rows = NULL;
      modelica_metatype tmpMeta6;
      modelica_integer _nnz;
      volatile mmc_switch_type tmp8;
      int tmp9;
      // _seed_mapping has no default value.
      // _partial_mapping has no default value.
      // _comps has no default value.
      // _seed_vars has no default value.
      // _seed_vars_array has no default value.
      // _partial_vars has no default value.
      // _partial_vars_array has no default value.
      // _tmp has no default value.
      tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
      _row_vars = tmpMeta3;
      tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
      _col_vars = tmpMeta4;
      // _set has no default value.
      tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
      _cols = tmpMeta5;
      tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
      _rows = tmpMeta6;
      _nnz = ((modelica_integer) 0);
      tmp8 = 0;
      for (; tmp8 < 4; tmp8++) {
        switch (MMC_SWITCH_CAST(tmp8)) {
        case 0: {
          modelica_metatype tmpMeta10;
          if (optionNone(tmp8_1)) goto tmp7_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 1));
          _comps = tmpMeta10;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(arrayLength(_comps) == ((modelica_integer) 0))) goto tmp7_end;
          tmpMeta[0+0] = _OMC_LIT32;
          tmpMeta[0+1] = omc_UnorderedMap_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 1));
          goto tmp7_done;
        }
        case 1: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_integer tmp22;
          modelica_integer tmp23;
          modelica_integer tmp24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          if (optionNone(tmp8_1)) goto tmp7_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 1));
          _comps = tmpMeta11;
          /* Pattern matching succeeded */
          _seed_mapping = omc_NBAdjacency_Mapping_create(threadData, omc_NBEquation_EquationPointers_empty(threadData, ((modelica_integer) 4013)), _seedCandidates);

          _partial_mapping = omc_NBAdjacency_Mapping_create(threadData, omc_NBEquation_EquationPointers_empty(threadData, ((modelica_integer) 4013)), _partialCandidates);

          _partial_vars = omc_NBVariable_VariablePointers_getScalarVarNames(threadData, _partialCandidates);

          _seed_vars = omc_NBVariable_VariablePointers_getScalarVarNames(threadData, _seedCandidates);

          _seed_vars_array = omc_NBVariable_VariablePointers_getVarNames(threadData, _seedCandidates);

          _partial_vars_array = omc_NBVariable_VariablePointers_getVarNames(threadData, _partialCandidates);

          _map = omc_UnorderedMap_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, omc_Util_nextPrime(threadData, listLength(_seed_vars) + listLength(_partial_vars)));

          _set = omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, omc_Util_nextPrime(threadData, listLength(_seed_vars_array)));

          {
            modelica_metatype _cref;
            for (tmpMeta12 = _seed_vars; !listEmpty(tmpMeta12); tmpMeta12=MMC_CDR(tmpMeta12))
            {
              _cref = MMC_CAR(tmpMeta12);
              tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
              omc_UnorderedMap_add(threadData, _cref, tmpMeta13, _map);
            }
          }

          {
            modelica_metatype _cref;
            for (tmpMeta15 = _partial_vars; !listEmpty(tmpMeta15); tmpMeta15=MMC_CDR(tmpMeta15))
            {
              _cref = MMC_CAR(tmpMeta15);
              tmpMeta16 = MMC_REFSTRUCTLIT(mmc_nil);
              omc_UnorderedMap_add(threadData, _cref, tmpMeta16, _map);
            }
          }

          {
            modelica_metatype _cref;
            for (tmpMeta18 = _seed_vars_array; !listEmpty(tmpMeta18); tmpMeta18=MMC_CDR(tmpMeta18))
            {
              _cref = MMC_CAR(tmpMeta18);
              omc_UnorderedSet_add(threadData, _cref, _set);
            }
          }

          {
            modelica_metatype _cref;
            for (tmpMeta20 = _partial_vars_array; !listEmpty(tmpMeta20); tmpMeta20=MMC_CDR(tmpMeta20))
            {
              _cref = MMC_CAR(tmpMeta20);
              omc_UnorderedSet_add(threadData, _cref, _set);
            }
          }

          tmp22 = ((modelica_integer) 1); tmp23 = 1; tmp24 = arrayLength(_comps);
          if(!(((tmp23 > 0) && (tmp22 > tmp24)) || ((tmp23 < 0) && (tmp22 < tmp24))))
          {
            modelica_integer _i;
            for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp22, tmp24); _i += tmp23)
            {
              omc_NBStrongComponent_collectCrefs(threadData, arrayGet(_comps,_i) /* DAE.ASUB */, _seedCandidates, _partialCandidates, _seed_mapping, _partial_mapping, _map, _set, (modelica_integer)_jacType);
            }
          }

          {
            modelica_metatype _cref;
            for (tmpMeta25 = listReverse(_partial_vars); !listEmpty(tmpMeta25); tmpMeta25=MMC_CDR(tmpMeta25))
            {
              _cref = MMC_CAR(tmpMeta25);
              if(((((modelica_integer)_jacType == 4) || omc_NBVariable_checkCref(threadData, _cref, boxvar_NBVariable_isStateDerivative, _OMC_LIT34)) || omc_NBVariable_checkCref(threadData, _cref, boxvar_NBVariable_isResidual, _OMC_LIT34)))
              {
                if(omc_UnorderedMap_contains(threadData, _cref, _map))
                {
                  _tmp = omc_UnorderedSet_unique__list(threadData, omc_UnorderedMap_getOrFail(threadData, _cref, _map), boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual);

                  tmpMeta27 = mmc_mk_box2(0, _cref, _tmp);
                  tmpMeta26 = mmc_mk_cons(tmpMeta27, _rows);
                  _rows = tmpMeta26;

                  tmpMeta28 = mmc_mk_cons(_cref, _row_vars);
                  _row_vars = tmpMeta28;

                  {
                    modelica_metatype _dep;
                    for (tmpMeta29 = _tmp; !listEmpty(tmpMeta29); tmpMeta29=MMC_CDR(tmpMeta29))
                    {
                      _dep = MMC_CAR(tmpMeta29);
                      tmpMeta30 = mmc_mk_cons(_cref, omc_UnorderedMap_getSafe(threadData, _dep, _map, _OMC_LIT33));
                      omc_UnorderedMap_add(threadData, _dep, tmpMeta30, _map);
                    }
                  }
                }
              }
            }
          }

          {
            modelica_metatype _cref;
            for (tmpMeta33 = listReverse(_seed_vars); !listEmpty(tmpMeta33); tmpMeta33=MMC_CDR(tmpMeta33))
            {
              _cref = MMC_CAR(tmpMeta33);
              if((((modelica_integer)_jacType == 4) || omc_NBVariable_checkCref(threadData, _cref, boxvar_NBVariable_isState, _OMC_LIT36)))
              {
                _tmp = omc_UnorderedSet_unique__list(threadData, omc_UnorderedMap_getSafe(threadData, _cref, _map, _OMC_LIT35), boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual);

                tmpMeta35 = mmc_mk_box2(0, _cref, _tmp);
                tmpMeta34 = mmc_mk_cons(tmpMeta35, _cols);
                _cols = tmpMeta34;

                tmpMeta36 = mmc_mk_cons(_cref, _col_vars);
                _col_vars = tmpMeta36;
              }
            }
          }

          {
            modelica_metatype _col;
            for (tmpMeta38 = _cols; !listEmpty(tmpMeta38); tmpMeta38=MMC_CDR(tmpMeta38))
            {
              _col = MMC_CAR(tmpMeta38);
              /* Pattern-matching assignment */
              tmpMeta39 = _col;
              tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta39), 2));
              _tmp = tmpMeta40;

              _nnz = _nnz + listLength(_tmp);
            }
          }
          tmpMeta42 = mmc_mk_box6(3, &NBJacobian_SparsityPattern_SPARSITY__PATTERN__desc, _cols, _rows, listReverse(_col_vars), listReverse(_row_vars), mmc_mk_integer(_nnz));
          tmpMeta[0+0] = tmpMeta42;
          tmpMeta[0+1] = _map;
          goto tmp7_done;
        }
        case 2: {
          if (!optionNone(tmp8_1)) goto tmp7_end;
          /* Pattern matching succeeded */
          omc_Error_addMessage(threadData, _OMC_LIT7, _OMC_LIT38);
          goto goto_2;
          goto tmp7_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          omc_Error_addMessage(threadData, _OMC_LIT7, _OMC_LIT40);
          goto goto_2;
          goto tmp7_done;
        }
        }
        goto tmp7_end;
        tmp7_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp7_done;
      tmp7_done:;
    }
  }
  _sparsityPattern = tmpMeta[0+0];
  _map = tmpMeta[0+1];

  _sparsityColoring = omc_NBJacobian_SparsityColoring_PartialD2ColoringAlgC(threadData, _sparsityPattern, (modelica_integer)_jacType);

  if(omc_Flags_isSet(threadData, _OMC_LIT44))
  {
    tmpMeta43 = stringAppend(omc_NBJacobian_SparsityPattern_toString(threadData, _sparsityPattern),_OMC_LIT29);
    tmpMeta44 = stringAppend(tmpMeta43,omc_NBJacobian_SparsityColoring_toString(threadData, _sparsityColoring));
    tmpMeta45 = stringAppend(tmpMeta44,_OMC_LIT29);
    fputs(MMC_STRINGDATA(tmpMeta45),stdout);
  }
  _return: OMC_LABEL_UNUSED
  if (out_sparsityColoring) { *out_sparsityColoring = _sparsityColoring; }
  return _sparsityPattern;
}
modelica_metatype boxptr_NBJacobian_SparsityPattern_create(threadData_t *threadData, modelica_metatype _seedCandidates, modelica_metatype _partialCandidates, modelica_metatype _strongComponents, modelica_metatype _jacType, modelica_metatype *out_sparsityColoring)
{
  modelica_integer tmp1;
  modelica_metatype _sparsityPattern = NULL;
  tmp1 = mmc_unbox_integer(_jacType);
  _sparsityPattern = omc_NBJacobian_SparsityPattern_create(threadData, _seedCandidates, _partialCandidates, _strongComponents, tmp1, out_sparsityColoring);
  /* skip box _sparsityPattern; NBJacobian.SparsityPattern */
  /* skip box _sparsityColoring; NBJacobian.SparsityColoring */
  return _sparsityPattern;
}

DLLDirection
modelica_metatype omc_NBJacobian_SparsityPattern_lazy(threadData_t *threadData, modelica_metatype _seedCandidates, modelica_metatype _partialCandidates, modelica_metatype _strongComponents, modelica_integer _jacType, modelica_metatype *out_sparsityColoring)
{
  modelica_metatype _sparsityPattern = NULL;
  modelica_metatype _sparsityColoring = NULL;
  modelica_metatype _seed_vars = NULL;
  modelica_metatype _partial_vars = NULL;
  modelica_metatype _cols = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _rows = NULL;
  modelica_metatype tmpMeta2;
  modelica_integer _nnz;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta13;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _sparsityPattern has no default value.
  // _sparsityColoring has no default value.
  // _seed_vars has no default value.
  // _partial_vars has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _cols = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _rows = tmpMeta2;
  // _nnz has no default value.
  _seed_vars = omc_NBVariable_VariablePointers_getScalarVarNames(threadData, _seedCandidates);

  _partial_vars = omc_NBVariable_VariablePointers_getScalarVarNames(threadData, _partialCandidates);

  {
    modelica_metatype __omcQ_24tmpVar19;
    modelica_metatype* tmp4;
    modelica_metatype tmpMeta5;
    modelica_metatype tmpMeta6;
    modelica_metatype __omcQ_24tmpVar18;
    modelica_integer tmp7;
    modelica_metatype _s_loopVar = 0;
    modelica_metatype _s;
    _s_loopVar = _seed_vars;
    tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar19 = tmpMeta5; /* defaultValue */
    tmp4 = &__omcQ_24tmpVar19;
    while(1) {
      tmp7 = 1;
      if (!listEmpty(_s_loopVar)) {
        _s = MMC_CAR(_s_loopVar);
        _s_loopVar = MMC_CDR(_s_loopVar);
        tmp7--;
      }
      if (tmp7 == 0) {
        tmpMeta6 = mmc_mk_box2(0, _s, _partial_vars);
        __omcQ_24tmpVar18 = tmpMeta6;
        *tmp4 = mmc_mk_cons(__omcQ_24tmpVar18,0);
        tmp4 = &MMC_CDR(*tmp4);
      } else if (tmp7 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp4 = mmc_mk_nil();
    tmpMeta3 = __omcQ_24tmpVar19;
  }
  _cols = tmpMeta3;

  {
    modelica_metatype __omcQ_24tmpVar21;
    modelica_metatype* tmp9;
    modelica_metatype tmpMeta10;
    modelica_metatype tmpMeta11;
    modelica_metatype __omcQ_24tmpVar20;
    modelica_integer tmp12;
    modelica_metatype _p_loopVar = 0;
    modelica_metatype _p;
    _p_loopVar = _partial_vars;
    tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar21 = tmpMeta10; /* defaultValue */
    tmp9 = &__omcQ_24tmpVar21;
    while(1) {
      tmp12 = 1;
      if (!listEmpty(_p_loopVar)) {
        _p = MMC_CAR(_p_loopVar);
        _p_loopVar = MMC_CDR(_p_loopVar);
        tmp12--;
      }
      if (tmp12 == 0) {
        tmpMeta11 = mmc_mk_box2(0, _p, _seed_vars);
        __omcQ_24tmpVar20 = tmpMeta11;
        *tmp9 = mmc_mk_cons(__omcQ_24tmpVar20,0);
        tmp9 = &MMC_CDR(*tmp9);
      } else if (tmp12 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp9 = mmc_mk_nil();
    tmpMeta8 = __omcQ_24tmpVar21;
  }
  _rows = tmpMeta8;

  _nnz = (listLength(_partial_vars)) * (listLength(_seed_vars));

  tmpMeta13 = mmc_mk_box6(3, &NBJacobian_SparsityPattern_SPARSITY__PATTERN__desc, _cols, _rows, _seed_vars, _partial_vars, mmc_mk_integer(_nnz));
  _sparsityPattern = tmpMeta13;

  _sparsityColoring = omc_NBJacobian_SparsityColoring_lazy(threadData, _sparsityPattern);
  _return: OMC_LABEL_UNUSED
  if (out_sparsityColoring) { *out_sparsityColoring = _sparsityColoring; }
  return _sparsityPattern;
}
modelica_metatype boxptr_NBJacobian_SparsityPattern_lazy(threadData_t *threadData, modelica_metatype _seedCandidates, modelica_metatype _partialCandidates, modelica_metatype _strongComponents, modelica_metatype _jacType, modelica_metatype *out_sparsityColoring)
{
  modelica_integer tmp1;
  modelica_metatype _sparsityPattern = NULL;
  tmp1 = mmc_unbox_integer(_jacType);
  _sparsityPattern = omc_NBJacobian_SparsityPattern_lazy(threadData, _seedCandidates, _partialCandidates, _strongComponents, tmp1, out_sparsityColoring);
  /* skip box _sparsityPattern; NBJacobian.SparsityPattern */
  /* skip box _sparsityColoring; NBJacobian.SparsityColoring */
  return _sparsityPattern;
}

DLLDirection
modelica_string omc_NBJacobian_SparsityPattern_toString(threadData_t *threadData, modelica_metatype _pattern)
{
  modelica_string _str = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype _cref = NULL;
  modelica_metatype _dependencies = NULL;
  modelica_boolean _colEmpty;
  modelica_boolean _rowEmpty;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  modelica_metatype tmpMeta16;
  modelica_metatype tmpMeta17;
  modelica_metatype tmpMeta18;
  modelica_metatype tmpMeta19;
  modelica_metatype tmpMeta20;
  modelica_metatype tmpMeta21;
  modelica_metatype tmpMeta22;
  modelica_metatype tmpMeta23;
  modelica_metatype tmpMeta24;
  modelica_metatype tmpMeta25;
  modelica_metatype tmpMeta26;
  modelica_metatype tmpMeta27;
  modelica_metatype tmpMeta28;
  modelica_metatype tmpMeta29;
  modelica_metatype tmpMeta30;
  modelica_metatype tmpMeta31;
  modelica_metatype tmpMeta32;
  modelica_metatype tmpMeta33;
  modelica_metatype tmpMeta34;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = stringAppend(_OMC_LIT45,intString(mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_pattern), 6))))));
  tmpMeta2 = stringAppend(tmpMeta1,_OMC_LIT46);
  _str = omc_StringUtil_headline__2(threadData, tmpMeta2);
  // _cref has no default value.
  // _dependencies has no default value.
  _colEmpty = listEmpty((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_pattern), 2))));
  _rowEmpty = listEmpty((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_pattern), 3))));
  tmpMeta3 = stringAppend(_str,_OMC_LIT29);
  tmpMeta4 = stringAppend(tmpMeta3,omc_StringUtil_headline__3(threadData, _OMC_LIT47));
  _str = tmpMeta4;

  tmpMeta5 = stringAppend(_str,omc_List_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_pattern), 4))), boxvar_NFComponentRef_toString, _OMC_LIT48, _OMC_LIT49, _OMC_LIT50, _OMC_LIT51, 1 /* true */, ((modelica_integer) 0)));
  tmpMeta6 = stringAppend(tmpMeta5,_OMC_LIT29);
  _str = tmpMeta6;

  tmpMeta7 = stringAppend(_str,_OMC_LIT29);
  tmpMeta8 = stringAppend(tmpMeta7,omc_StringUtil_headline__3(threadData, _OMC_LIT52));
  _str = tmpMeta8;

  tmpMeta9 = stringAppend(_str,omc_List_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_pattern), 5))), boxvar_NFComponentRef_toString, _OMC_LIT48, _OMC_LIT49, _OMC_LIT50, _OMC_LIT51, 1 /* true */, ((modelica_integer) 0)));
  tmpMeta10 = stringAppend(tmpMeta9,_OMC_LIT29);
  _str = tmpMeta10;

  if((!_colEmpty))
  {
    tmpMeta11 = stringAppend(_str,_OMC_LIT29);
    tmpMeta12 = stringAppend(tmpMeta11,omc_StringUtil_headline__3(threadData, _OMC_LIT53));
    _str = tmpMeta12;

    {
      modelica_metatype _col;
      for (tmpMeta13 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_pattern), 2))); !listEmpty(tmpMeta13); tmpMeta13=MMC_CDR(tmpMeta13))
      {
        _col = MMC_CAR(tmpMeta13);
        /* Pattern-matching assignment */
        tmpMeta14 = _col;
        tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 1));
        tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
        _cref = tmpMeta15;
        _dependencies = tmpMeta16;

        tmpMeta17 = stringAppend(_str,_OMC_LIT54);
        tmpMeta18 = stringAppend(tmpMeta17,omc_NFComponentRef_toString(threadData, _cref));
        tmpMeta19 = stringAppend(tmpMeta18,_OMC_LIT55);
        tmpMeta20 = stringAppend(tmpMeta19,omc_NFComponentRef_listToString(threadData, _dependencies));
        tmpMeta21 = stringAppend(tmpMeta20,_OMC_LIT29);
        _str = tmpMeta21;
      }
    }
  }

  if((!_rowEmpty))
  {
    tmpMeta23 = stringAppend(_str,_OMC_LIT29);
    tmpMeta24 = stringAppend(tmpMeta23,omc_StringUtil_headline__3(threadData, _OMC_LIT56));
    _str = tmpMeta24;

    {
      modelica_metatype _row;
      for (tmpMeta25 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_pattern), 3))); !listEmpty(tmpMeta25); tmpMeta25=MMC_CDR(tmpMeta25))
      {
        _row = MMC_CAR(tmpMeta25);
        /* Pattern-matching assignment */
        tmpMeta26 = _row;
        tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta26), 1));
        tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta26), 2));
        _cref = tmpMeta27;
        _dependencies = tmpMeta28;

        tmpMeta29 = stringAppend(_str,_OMC_LIT54);
        tmpMeta30 = stringAppend(tmpMeta29,omc_NFComponentRef_toString(threadData, _cref));
        tmpMeta31 = stringAppend(tmpMeta30,_OMC_LIT57);
        tmpMeta32 = stringAppend(tmpMeta31,omc_NFComponentRef_listToString(threadData, _dependencies));
        tmpMeta33 = stringAppend(tmpMeta32,_OMC_LIT29);
        _str = tmpMeta33;
      }
    }
  }
  _return: OMC_LABEL_UNUSED
  return _str;
}

DLLDirection
modelica_string omc_NBJacobian_jacobianTypeString(threadData_t *threadData, modelica_integer _jacType)
{
  modelica_string _str = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _str has no default value.
  { /* match expression */
    modelica_integer tmp4_1;
    tmp4_1 = (modelica_integer)_jacType;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 5; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (1 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT58;
          goto tmp3_done;
        }
        case 1: {
          if (2 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT59;
          goto tmp3_done;
        }
        case 2: {
          if (3 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT60;
          goto tmp3_done;
        }
        case 3: {
          if (4 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT61;
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT62;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _str = tmp1;
  _return: OMC_LABEL_UNUSED
  return _str;
}
modelica_metatype boxptr_NBJacobian_jacobianTypeString(threadData_t *threadData, modelica_metatype _jacType)
{
  modelica_integer tmp1;
  modelica_string _str = NULL;
  tmp1 = mmc_unbox_integer(_jacType);
  _str = omc_NBJacobian_jacobianTypeString(threadData, tmp1);
  /* skip box _str; String */
  return _str;
}

DLLDirection
modelica_string omc_NBJacobian_toString(threadData_t *threadData, modelica_metatype _jacobian, modelica_string __omcQ_24in_5Fstr)
{
  modelica_string _str = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _str = __omcQ_24in_5Fstr;
  _str = omc_NBackendDAE_toString(threadData, _jacobian, _str);
  _return: OMC_LABEL_UNUSED
  return _str;
}

DLLDirection
modelica_fnptr omc_NBJacobian_getModule(threadData_t *threadData)
{
  modelica_fnptr _func;
  modelica_fnptr tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  { /* match expression */
    modelica_string tmp4_1;
    tmp4_1 = omc_Flags_getConfigString(threadData, _OMC_LIT85);
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (8 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT74), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = boxvar_NBJacobian_jacobianSymbolic;
          goto tmp3_done;
        }
        case 1: {
          if (7 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT65), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = boxvar_NBJacobian_jacobianNumeric;
          goto tmp3_done;
        }
        case 2: {
          if (4 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT67), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = boxvar_NBJacobian_jacobianNone;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _func = (modelica_fnptr) tmp1;
  _return: OMC_LABEL_UNUSED
  return _func;
}

DLLDirection
modelica_metatype omc_NBJacobian_combine(threadData_t *threadData, modelica_metatype _jacobians, modelica_string _name)
{
  modelica_metatype _jacobian = NULL;
  modelica_integer _jacType;
  modelica_metatype _variables = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _unknowns = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype _knowns = NULL;
  modelica_metatype tmpMeta3;
  modelica_metatype _auxiliaryVars = NULL;
  modelica_metatype tmpMeta4;
  modelica_metatype _aliasVars = NULL;
  modelica_metatype tmpMeta5;
  modelica_metatype _diffVars = NULL;
  modelica_metatype tmpMeta6;
  modelica_metatype _dependencies = NULL;
  modelica_metatype tmpMeta7;
  modelica_metatype _resultVars = NULL;
  modelica_metatype tmpMeta8;
  modelica_metatype _tmpVars = NULL;
  modelica_metatype tmpMeta9;
  modelica_metatype _seedVars = NULL;
  modelica_metatype tmpMeta10;
  modelica_metatype _comps = NULL;
  modelica_metatype tmpMeta11;
  modelica_metatype _col_wise_pattern = NULL;
  modelica_metatype tmpMeta12;
  modelica_metatype _row_wise_pattern = NULL;
  modelica_metatype tmpMeta13;
  modelica_metatype _seed_vars = NULL;
  modelica_metatype tmpMeta14;
  modelica_metatype _partial_vars = NULL;
  modelica_metatype tmpMeta15;
  modelica_integer _nnz;
  modelica_metatype _varData = NULL;
  modelica_metatype _eqData = NULL;
  modelica_metatype _sparsityPattern = NULL;
  modelica_metatype _sparsityColoring = NULL;
  modelica_metatype tmpMeta16;
  modelica_metatype tmpMeta22;
  modelica_metatype tmpMeta31;
  modelica_metatype tmpMeta32;
  modelica_metatype tmpMeta33;
  modelica_metatype tmpMeta34;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _jacobian has no default value.
  // _jacType has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _variables = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _unknowns = tmpMeta2;
  tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
  _knowns = tmpMeta3;
  tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
  _auxiliaryVars = tmpMeta4;
  tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
  _aliasVars = tmpMeta5;
  tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
  _diffVars = tmpMeta6;
  tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
  _dependencies = tmpMeta7;
  tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
  _resultVars = tmpMeta8;
  tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
  _tmpVars = tmpMeta9;
  tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
  _seedVars = tmpMeta10;
  tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
  _comps = tmpMeta11;
  tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
  _col_wise_pattern = tmpMeta12;
  tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
  _row_wise_pattern = tmpMeta13;
  tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
  _seed_vars = tmpMeta14;
  tmpMeta15 = MMC_REFSTRUCTLIT(mmc_nil);
  _partial_vars = tmpMeta15;
  _nnz = ((modelica_integer) 0);
  // _varData has no default value.
  // _eqData has no default value.
  // _sparsityPattern has no default value.
  _sparsityColoring = omc_NBJacobian_SparsityColoring_lazy(threadData, _OMC_LIT32);
  if(omc_List_hasOneElement(threadData, _jacobians))
  {
    _jacobian = listHead(_jacobians);

    { /* match expression */
      modelica_metatype tmp19_1;
      tmp19_1 = _jacobian;
      {
        volatile mmc_switch_type tmp19;
        int tmp20;
        tmp19 = 0;
        for (; tmp19 < 1; tmp19++) {
          switch (MMC_SWITCH_CAST(tmp19)) {
          case 0: {
            modelica_metatype tmpMeta21;
            if (mmc__uniontype__metarecord__typedef__equal(tmp19_1,1,6) == 0) goto tmp18_end;
            
            /* Pattern matching succeeded */
            tmpMeta21 = MMC_TAGPTR(mmc_alloc_words(8));
            memcpy(MMC_UNTAGPTR(tmpMeta21), MMC_UNTAGPTR(_jacobian), 8*sizeof(modelica_metatype));
            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta21))[2] = _name;
            _jacobian = tmpMeta21;
            tmpMeta16 = _jacobian;
            goto tmp18_done;
          }
          }
          goto tmp18_end;
          tmp18_end: ;
        }
        goto goto_17;
        goto_17:;
        MMC_THROW_INTERNAL();
        goto tmp18_done;
        tmp18_done:;
      }
    }
    _jacobian = tmpMeta16;
  }
  else
  {
    {
      modelica_metatype _jac;
      for (tmpMeta22 = _jacobians; !listEmpty(tmpMeta22); tmpMeta22=MMC_CDR(tmpMeta22))
      {
        _jac = MMC_CAR(tmpMeta22);
        { /* match expression */
          modelica_metatype tmp25_1;
          tmp25_1 = _jac;
          {
            modelica_metatype _tmpVarData = NULL;
            modelica_metatype _tmpPattern = NULL;
            volatile mmc_switch_type tmp25;
            int tmp26;
            // _tmpVarData has no default value.
            // _tmpPattern has no default value.
            tmp25 = 0;
            for (; tmp25 < 2; tmp25++) {
              switch (MMC_SWITCH_CAST(tmp25)) {
              case 0: {
                modelica_metatype tmpMeta27;
                modelica_metatype tmpMeta28;
                if (mmc__uniontype__metarecord__typedef__equal(tmp25_1,1,6) == 0) goto tmp24_end;
                tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp25_1), 4));
                if (mmc__uniontype__metarecord__typedef__equal(tmpMeta27,1,10) == 0) goto tmp24_end;
                tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp25_1), 6));
                
                _tmpVarData = tmpMeta27;
                _tmpPattern = tmpMeta28;
                /* Pattern matching succeeded */
                _jacType = mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_jac), 3))));

                _variables = listAppend(omc_NBVariable_VariablePointers_toList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tmpVarData), 2)))), _variables);

                _unknowns = listAppend(omc_NBVariable_VariablePointers_toList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tmpVarData), 3)))), _unknowns);

                _knowns = listAppend(omc_NBVariable_VariablePointers_toList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tmpVarData), 4)))), _knowns);

                _auxiliaryVars = listAppend(omc_NBVariable_VariablePointers_toList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tmpVarData), 5)))), _auxiliaryVars);

                _aliasVars = listAppend(omc_NBVariable_VariablePointers_toList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tmpVarData), 6)))), _aliasVars);

                _diffVars = listAppend(omc_NBVariable_VariablePointers_toList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tmpVarData), 7)))), _diffVars);

                _dependencies = listAppend(omc_NBVariable_VariablePointers_toList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tmpVarData), 8)))), _dependencies);

                _resultVars = listAppend(omc_NBVariable_VariablePointers_toList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tmpVarData), 9)))), _resultVars);

                _tmpVars = listAppend(omc_NBVariable_VariablePointers_toList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tmpVarData), 10)))), _tmpVars);

                _seedVars = listAppend(omc_NBVariable_VariablePointers_toList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tmpVarData), 11)))), _seedVars);

                _comps = listAppend(arrayList((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_jac), 5)))), _comps);

                _col_wise_pattern = listAppend((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tmpPattern), 2))), _col_wise_pattern);

                _row_wise_pattern = listAppend((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tmpPattern), 3))), _row_wise_pattern);

                _seed_vars = listAppend((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tmpPattern), 4))), _seed_vars);

                _partial_vars = listAppend((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tmpPattern), 5))), _partial_vars);

                _nnz = _nnz + mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tmpPattern), 6))));

                _sparsityColoring = omc_NBJacobian_SparsityColoring_combine(threadData, _sparsityColoring, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_jac), 7))));
                goto tmp24_done;
              }
              case 1: {
                modelica_metatype tmpMeta29;
                modelica_metatype tmpMeta30;
                
                /* Pattern matching succeeded */
                tmpMeta30 = stringAppend(_OMC_LIT86,omc_NBackendDAE_toString(threadData, _jac, _OMC_LIT48));
                tmpMeta29 = mmc_mk_cons(tmpMeta30, MMC_REFSTRUCTLIT(mmc_nil));
                omc_Error_addMessage(threadData, _OMC_LIT7, tmpMeta29);
                goto goto_23;
                goto tmp24_done;
              }
              }
              goto tmp24_end;
              tmp24_end: ;
            }
            goto goto_23;
            goto_23:;
            MMC_THROW_INTERNAL();
            goto tmp24_done;
            tmp24_done:;
          }
        }
        ;
      }
    }

    tmpMeta32 = mmc_mk_box11(4, &NBVariable_VarData_VAR__DATA__JAC__desc, omc_NBVariable_VariablePointers_fromList(threadData, _variables, 0 /* false */), omc_NBVariable_VariablePointers_fromList(threadData, _unknowns, 0 /* false */), omc_NBVariable_VariablePointers_fromList(threadData, _knowns, 0 /* false */), omc_NBVariable_VariablePointers_fromList(threadData, _auxiliaryVars, 0 /* false */), omc_NBVariable_VariablePointers_fromList(threadData, _aliasVars, 0 /* false */), omc_NBVariable_VariablePointers_fromList(threadData, _diffVars, 0 /* false */), omc_NBVariable_VariablePointers_fromList(threadData, _dependencies, 0 /* false */), omc_NBVariable_VariablePointers_fromList(threadData, _resultVars, 0 /* false */), omc_NBVariable_VariablePointers_fromList(threadData, _tmpVars, 0 /* false */), omc_NBVariable_VariablePointers_fromList(threadData, _seedVars, 0 /* false */));
    _varData = tmpMeta32;

    tmpMeta33 = mmc_mk_box6(3, &NBJacobian_SparsityPattern_SPARSITY__PATTERN__desc, _col_wise_pattern, _row_wise_pattern, _seed_vars, _partial_vars, mmc_mk_integer(_nnz));
    _sparsityPattern = tmpMeta33;

    tmpMeta34 = mmc_mk_box7(4, &NBackendDAE_JACOBIAN__desc, _name, mmc_mk_integer((modelica_integer)_jacType), _varData, listArray(_comps), _sparsityPattern, _sparsityColoring);
    _jacobian = tmpMeta34;
  }
  _return: OMC_LABEL_UNUSED
  return _jacobian;
}

DLLDirection
modelica_metatype omc_NBJacobian_nonlinear(threadData_t *threadData, modelica_metatype _variables, modelica_metatype _equations, modelica_metatype _comps, modelica_metatype __omcQ_24in_5FfuncTree, modelica_string _name, modelica_boolean _init, modelica_metatype *out_funcTree)
{
  modelica_metatype _jacobian = NULL;
  modelica_metatype _funcTree = NULL;
  modelica_fnptr _func;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _jacobian has no default value.
  _funcTree = __omcQ_24in_5FfuncTree;
  _func = (omc_Flags_isSet(threadData, _OMC_LIT90)?boxvar_NBJacobian_jacobianSymbolic:boxvar_NBJacobian_jacobianNumeric);
  _jacobian = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_string, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _name, mmc_mk_integer(4), _variables, omc_NBEquation_EquationPointers_getResiduals(threadData, _equations), _equations, omc_NBVariable_VariablePointers_empty(threadData, ((modelica_integer) 0), 0 /* false */), mmc_mk_some(_comps), _funcTree, mmc_mk_boolean(_init) ,&_funcTree) : ((modelica_metatype(*)(threadData_t*, modelica_string, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _name, mmc_mk_integer(4), _variables, omc_NBEquation_EquationPointers_getResiduals(threadData, _equations), _equations, omc_NBVariable_VariablePointers_empty(threadData, ((modelica_integer) 0), 0 /* false */), mmc_mk_some(_comps), _funcTree, mmc_mk_boolean(_init) ,&_funcTree);
  _return: OMC_LABEL_UNUSED
  if (out_funcTree) { *out_funcTree = _funcTree; }
  return _jacobian;
}
modelica_metatype boxptr_NBJacobian_nonlinear(threadData_t *threadData, modelica_metatype _variables, modelica_metatype _equations, modelica_metatype _comps, modelica_metatype __omcQ_24in_5FfuncTree, modelica_metatype _name, modelica_metatype _init, modelica_metatype *out_funcTree)
{
  modelica_integer tmp1;
  modelica_metatype _jacobian = NULL;
  tmp1 = mmc_unbox_integer(_init);
  _jacobian = omc_NBJacobian_nonlinear(threadData, _variables, _equations, _comps, __omcQ_24in_5FfuncTree, _name, tmp1, out_funcTree);
  /* skip box _jacobian; Option<NBackendDAE> */
  /* skip box _funcTree; NFFlatten.FunctionTreeImpl.Tree */
  return _jacobian;
}

DLLDirection
modelica_metatype omc_NBJacobian_main(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fbdae, modelica_integer _kind)
{
  modelica_metatype _bdae = NULL;
  modelica_fnptr _func;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _bdae = __omcQ_24in_5Fbdae;
  _func = omc_NBJacobian_getModule(threadData);
  { /* match expression */
    modelica_metatype tmp6_1;
    tmp6_1 = _bdae;
    {
      modelica_string _name = NULL;
      modelica_metatype _knowns = NULL;
      modelica_metatype _funcTree = NULL;
      modelica_metatype _oldPartitions = NULL;
      modelica_metatype _newPartitions = NULL;
      modelica_metatype tmpMeta3;
      modelica_metatype _oldEvents = NULL;
      modelica_metatype _newEvents = NULL;
      modelica_metatype tmpMeta4;
      volatile mmc_switch_type tmp6;
      int tmp7;
      // _name has no default value.
      // _knowns has no default value.
      // _funcTree has no default value.
      // _oldPartitions has no default value.
      tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
      _newPartitions = tmpMeta3;
      // _oldEvents has no default value.
      tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
      _newEvents = tmpMeta4;
      tmp6 = 0;
      for (; tmp6 < 2; tmp6++) {
        switch (MMC_SWITCH_CAST(tmp6)) {
        case 0: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_string tmp11_c1 __attribute__((unused)) = 0;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,0,13) == 0) goto tmp5_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 10));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,23) == 0) goto tmp5_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 4));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 14));
          _knowns = tmpMeta9;
          _funcTree = tmpMeta10;
          /* Pattern matching succeeded */
          
          
          { /* match expression */
            modelica_integer tmp14_1;
            tmp14_1 = (modelica_integer)_kind;
            {
              volatile mmc_switch_type tmp14;
              int tmp15;
              tmp14 = 0;
              for (; tmp14 < 3; tmp14++) {
                switch (MMC_SWITCH_CAST(tmp14)) {
                case 0: {
                  if (1 != tmp14_1) goto tmp13_end;
                  /* Pattern matching succeeded */
                  tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_bdae), 2)));
                  tmp11_c1 = _OMC_LIT91;
                  goto tmp13_done;
                }
                case 1: {
                  if (6 != tmp14_1) goto tmp13_end;
                  /* Pattern matching succeeded */
                  tmpMeta[0+0] = omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_bdae), 9))));
                  tmp11_c1 = _OMC_LIT92;
                  goto tmp13_done;
                }
                case 2: {
                  modelica_metatype tmpMeta16;
                  modelica_metatype tmpMeta17;
                  
                  /* Pattern matching succeeded */
                  tmpMeta17 = stringAppend(_OMC_LIT93,omc_NBPartition_Partition_kindToString(threadData, (modelica_integer)_kind));
                  tmpMeta16 = mmc_mk_cons(tmpMeta17, MMC_REFSTRUCTLIT(mmc_nil));
                  omc_Error_addMessage(threadData, _OMC_LIT7, tmpMeta16);
                  goto goto_12;
                  goto tmp13_done;
                }
                }
                goto tmp13_end;
                tmp13_end: ;
              }
              goto goto_12;
              goto_12:;
              goto goto_2;
              goto tmp13_done;
              tmp13_done:;
            }
          }
          _oldPartitions = tmpMeta[0+0];
          _name = tmp11_c1;

          _oldEvents = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_bdae), 4)));

          if(omc_Flags_isSet(threadData, _OMC_LIT16))
          {
            tmpMeta18 = stringAppend(omc_StringUtil_headline__1(threadData, _OMC_LIT94),_OMC_LIT29);
            fputs(MMC_STRINGDATA(tmpMeta18),stdout);
          }

          {
            modelica_metatype _part;
            for (tmpMeta19 = listReverse(_oldPartitions); !listEmpty(tmpMeta19); tmpMeta19=MMC_CDR(tmpMeta19))
            {
              _part = MMC_CAR(tmpMeta19);
              _part = omc_NBJacobian_partJacobian(threadData, _part, _funcTree, _knowns, _name, omc_NBJacobian_getModule(threadData) ,&_funcTree);

              tmpMeta20 = mmc_mk_cons(_part, _newPartitions);
              _newPartitions = tmpMeta20;
            }
          }

          {
            modelica_metatype _part;
            for (tmpMeta22 = listReverse(_oldEvents); !listEmpty(tmpMeta22); tmpMeta22=MMC_CDR(tmpMeta22))
            {
              _part = MMC_CAR(tmpMeta22);
              _part = omc_NBJacobian_partJacobian(threadData, _part, _funcTree, _knowns, _name, omc_NBJacobian_getModule(threadData) ,&_funcTree);

              tmpMeta23 = mmc_mk_cons(_part, _newEvents);
              _newEvents = tmpMeta23;
            }
          }

          { /* match expression */
            modelica_integer tmp27_1;
            tmp27_1 = (modelica_integer)_kind;
            {
              volatile mmc_switch_type tmp27;
              int tmp28;
              tmp27 = 0;
              for (; tmp27 < 3; tmp27++) {
                switch (MMC_SWITCH_CAST(tmp27)) {
                case 0: {
                  modelica_metatype tmpMeta29;
                  if (1 != tmp27_1) goto tmp26_end;
                  /* Pattern matching succeeded */
                  tmpMeta29 = MMC_TAGPTR(mmc_alloc_words(15));
                  memcpy(MMC_UNTAGPTR(tmpMeta29), MMC_UNTAGPTR(_bdae), 15*sizeof(modelica_metatype));
                  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta29))[2] = _newPartitions;
                  _bdae = tmpMeta29;
                  goto tmp26_done;
                }
                case 1: {
                  modelica_metatype tmpMeta30;
                  if (6 != tmp27_1) goto tmp26_end;
                  /* Pattern matching succeeded */
                  tmpMeta30 = MMC_TAGPTR(mmc_alloc_words(15));
                  memcpy(MMC_UNTAGPTR(tmpMeta30), MMC_UNTAGPTR(_bdae), 15*sizeof(modelica_metatype));
                  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta30))[9] = mmc_mk_some(_newPartitions);
                  _bdae = tmpMeta30;
                  goto tmp26_done;
                }
                case 2: {
                  
                  /* Pattern matching succeeded */
                  goto tmp26_done;
                }
                }
                goto tmp26_end;
                tmp26_end: ;
              }
              goto goto_25;
              goto_25:;
              goto goto_2;
              goto tmp26_done;
              tmp26_done:;
            }
          }
          ;

          tmpMeta31 = MMC_TAGPTR(mmc_alloc_words(15));
          memcpy(MMC_UNTAGPTR(tmpMeta31), MMC_UNTAGPTR(_bdae), 15*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta31))[4] = _newEvents;
          _bdae = tmpMeta31;

          tmpMeta32 = MMC_TAGPTR(mmc_alloc_words(15));
          memcpy(MMC_UNTAGPTR(tmpMeta32), MMC_UNTAGPTR(_bdae), 15*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta32))[14] = _funcTree;
          _bdae = tmpMeta32;
          tmpMeta1 = _bdae;
          goto tmp5_done;
        }
        case 1: {
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          
          /* Pattern matching succeeded */
          tmpMeta34 = stringAppend(_OMC_LIT93,omc_NBackendDAE_toString(threadData, _bdae, _OMC_LIT48));
          tmpMeta33 = mmc_mk_cons(tmpMeta34, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT7, tmpMeta33);
          goto goto_2;
          goto tmp5_done;
        }
        }
        goto tmp5_end;
        tmp5_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp5_done;
      tmp5_done:;
    }
  }
  _bdae = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _bdae;
}
modelica_metatype boxptr_NBJacobian_main(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fbdae, modelica_metatype _kind)
{
  modelica_integer tmp1;
  modelica_metatype _bdae = NULL;
  tmp1 = mmc_unbox_integer(_kind);
  _bdae = omc_NBJacobian_main(threadData, __omcQ_24in_5Fbdae, tmp1);
  /* skip box _bdae; NBackendDAE */
  return _bdae;
}

DLLDirection
modelica_boolean omc_NBJacobian_isDynamic(threadData_t *threadData, modelica_integer _jacType)
{
  modelica_boolean _b;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _b has no default value.
  { /* match expression */
    modelica_integer tmp4_1;
    tmp4_1 = (modelica_integer)_jacType;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (1 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          if (2 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _b = tmp1;
  _return: OMC_LABEL_UNUSED
  return _b;
}
modelica_metatype boxptr_NBJacobian_isDynamic(threadData_t *threadData, modelica_metatype _jacType)
{
  modelica_integer tmp1;
  modelica_boolean _b;
  modelica_metatype out_b;
  tmp1 = mmc_unbox_integer(_jacType);
  _b = omc_NBJacobian_isDynamic(threadData, tmp1);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

