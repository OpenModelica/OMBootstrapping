#include "omc_simulation_settings.h"
#include "Differentiate.h"
#define _OMC_LIT0_data "### dumpInputData ###\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT0,22,_OMC_LIT0_data);
#define _OMC_LIT0 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT0)
#define _OMC_LIT1_data "### for "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT1,8,_OMC_LIT1_data);
#define _OMC_LIT1 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT1)
#define _OMC_LIT2_data " ###\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT2,5,_OMC_LIT2_data);
#define _OMC_LIT2 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT2)
#define _OMC_LIT3_data "independentVars:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT3,17,_OMC_LIT3_data);
#define _OMC_LIT3 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT3)
#define _OMC_LIT4_data "dependenentVars:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT4,17,_OMC_LIT4_data);
#define _OMC_LIT4 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT4)
#define _OMC_LIT5_data "knownVars:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT5,11,_OMC_LIT5_data);
#define _OMC_LIT5 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT5)
#define _OMC_LIT6_data "allVars:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT6,9,_OMC_LIT6_data);
#define _OMC_LIT6 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT6)
#define _OMC_LIT7_data "controlVars:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT7,13,_OMC_LIT7_data);
#define _OMC_LIT7 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT7)
#define _OMC_LIT8_data "diffCrefs:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT8,11,_OMC_LIT8_data);
#define _OMC_LIT8 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT8)
#define _OMC_LIT9_data "\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT9,1,_OMC_LIT9_data);
#define _OMC_LIT9 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT9)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT10,1,5) {&ErrorTypes_MessageType_TRANSLATION__desc,}};
#define _OMC_LIT10 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT10)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT11,1,4) {&ErrorTypes_Severity_ERROR__desc,}};
#define _OMC_LIT11 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT11)
#define _OMC_LIT12_data "Internal error %s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT12,17,_OMC_LIT12_data);
#define _OMC_LIT12 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT12)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT13,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT12}};
#define _OMC_LIT13 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT13)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT14,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(63)),_OMC_LIT10,_OMC_LIT11,_OMC_LIT13}};
#define _OMC_LIT14 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT14)
#define _OMC_LIT15_data "Differentiate.addElementVars2Dep failed"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT15,39,_OMC_LIT15_data);
#define _OMC_LIT15 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT15)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT16,2,1) {_OMC_LIT15,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT16 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT16)
#define _OMC_LIT17_data "failtrace"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT17,9,_OMC_LIT17_data);
#define _OMC_LIT17 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT17)
#define _OMC_LIT18_data "Sets whether to print a failtrace or not."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT18,41,_OMC_LIT18_data);
#define _OMC_LIT18 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT18)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT19,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT18}};
#define _OMC_LIT19 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT19)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT20,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),_OMC_LIT17,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT19}};
#define _OMC_LIT20 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT20)
#define _OMC_LIT21_data "- Differentiate.lowerVarsElementVars failed."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT21,44,_OMC_LIT21_data);
#define _OMC_LIT21 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT21)
#define _OMC_LIT22_data "-Differentiate.getFunctionMapper1 failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT22,41,_OMC_LIT22_data);
#define _OMC_LIT22 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT22)
#define _OMC_LIT23_data "."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT23,1,_OMC_LIT23_data);
#define _OMC_LIT23 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT23)
#define _OMC_LIT24_data "-Differentiate.getFunctionMapper failed for function "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT24,53,_OMC_LIT24_data);
#define _OMC_LIT24 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT24)
#define _OMC_LIT25_data "-Differentiate.checkDerFunctionConds failed"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT25,43,_OMC_LIT25_data);
#define _OMC_LIT25 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT25)
#define _OMC_LIT26_data "-Differentiate.checkDerivativeFunctionInputs failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT26,52,_OMC_LIT26_data);
#define _OMC_LIT26 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT26)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT27,1,5) {&AvlSetPath_Tree_EMPTY__desc,}};
#define _OMC_LIT27 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT27)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT28,9,3) {&BackendDAE_DifferentiateInputData_DIFFINPUTDATA__desc,MMC_REFSTRUCTLIT(mmc_none),MMC_REFSTRUCTLIT(mmc_none),MMC_REFSTRUCTLIT(mmc_none),MMC_REFSTRUCTLIT(mmc_none),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT27}};
#define _OMC_LIT28 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT28)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT29,1,5) {&BackendDAE_DifferentiationType_DIFFERENTIATION__FUNCTION__desc,}};
#define _OMC_LIT29 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT29)
#define _OMC_LIT30_data "$DER"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT30,4,_OMC_LIT30_data);
#define _OMC_LIT30 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT30)
#define _OMC_LIT31_data "### Differentiate differentiateFunctionCallPartial: \n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT31,53,_OMC_LIT31_data);
#define _OMC_LIT31 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT31)
#define _OMC_LIT32_data "\n\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT32,2,_OMC_LIT32_data);
#define _OMC_LIT32 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT32)
#define _OMC_LIT33_data "debugDifferentiationVerbose"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT33,27,_OMC_LIT33_data);
#define _OMC_LIT33 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT33)
#define _OMC_LIT34_data "Dumps verbose debug output for the differentiation process."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT34,59,_OMC_LIT34_data);
#define _OMC_LIT34 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT34)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT35,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT34}};
#define _OMC_LIT35 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT35)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT36,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(134)),_OMC_LIT33,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT35}};
#define _OMC_LIT36 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT36)
#define _OMC_LIT37_data "### Differentiate differentiateFunctionCallPartial stmts: \n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT37,59,_OMC_LIT37_data);
#define _OMC_LIT37 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT37)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT38,1,4) {&DAE_VarVisibility_PROTECTED__desc,}};
#define _OMC_LIT38 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT38)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT39,1,5) {&DAE_VarDirection_BIDIR__desc,}};
#define _OMC_LIT39 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT39)
#define _OMC_LIT40_data ""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT40,0,_OMC_LIT40_data);
#define _OMC_LIT40 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT40)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT41,0.0);
#define _OMC_LIT41 MMC_REFREALLIT(_OMC_LIT_STRUCT41)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT42,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT40,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT41}};
#define _OMC_LIT42 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT42)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT43,1,4) {&DAE_ComponentPrefix_NOCOMPPRE__desc,}};
#define _OMC_LIT43 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT43)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT44,8,3) {&DAE_ElementSource_SOURCE__desc,_OMC_LIT42,MMC_REFSTRUCTLIT(mmc_nil),_OMC_LIT43,MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT44 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT44)
#define _OMC_LIT45_data "\nDifferentiate.differentiatePartialFunction failed for function: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT45,65,_OMC_LIT45_data);
#define _OMC_LIT45 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT45)
#define _OMC_LIT46_data "$"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT46,1,_OMC_LIT46_data);
#define _OMC_LIT46 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT46)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT47,2,4) {&DAE_Type_T__REAL__desc,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT47 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT47)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT48,4,4) {&DAE_ComponentRef_CREF__IDENT__desc,_OMC_LIT46,_OMC_LIT47,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT48 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT48)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT49,2,7) {&BackendDAE_DifferentiationType_GENERIC__GRADIENT__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */))}};
#define _OMC_LIT49 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT49)
#define _OMC_LIT50_data "### differentiated argument list:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT50,34,_OMC_LIT50_data);
#define _OMC_LIT50 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT50)
#define _OMC_LIT51_data "Diffed ExpList: \n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT51,17,_OMC_LIT51_data);
#define _OMC_LIT51 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT51)
#define _OMC_LIT52_data ", "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT52,2,_OMC_LIT52_data);
#define _OMC_LIT52 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT52)
#define _OMC_LIT53_data "debugDifferentiation"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT53,20,_OMC_LIT53_data);
#define _OMC_LIT53 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT53)
#define _OMC_LIT54_data "Dumps debug output for the differentiation process."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT54,51,_OMC_LIT54_data);
#define _OMC_LIT54 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT54)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT55,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT54}};
#define _OMC_LIT55 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT55)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT56,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(133)),_OMC_LIT53,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT55}};
#define _OMC_LIT56 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT56)
#define _OMC_LIT57_data ";\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT57,2,_OMC_LIT57_data);
#define _OMC_LIT57 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT57)
#define _OMC_LIT58_data "Input warnings for function mapper2\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT58,36,_OMC_LIT58_data);
#define _OMC_LIT58 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT58)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT59,1,5) {&ErrorTypes_Severity_WARNING__desc,}};
#define _OMC_LIT59 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT59)
#define _OMC_LIT60_data "Function %s has not the expected inputs. Expected inputs are %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT60,64,_OMC_LIT60_data);
#define _OMC_LIT60 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT60)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT61,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT60}};
#define _OMC_LIT61 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT61)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT62,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(128)),_OMC_LIT10,_OMC_LIT59,_OMC_LIT61}};
#define _OMC_LIT62 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT62)
#define _OMC_LIT63_data "### Differentiate function: \n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT63,29,_OMC_LIT63_data);
#define _OMC_LIT63 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT63)
#define _OMC_LIT64_data "### Detailed arguments list: \n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT64,30,_OMC_LIT64_data);
#define _OMC_LIT64 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT64)
#define _OMC_LIT65_data "### and argument types: \n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT65,25,_OMC_LIT65_data);
#define _OMC_LIT65 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT65)
#define _OMC_LIT66_data " | "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT66,3,_OMC_LIT66_data);
#define _OMC_LIT66 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT66)
#define _OMC_LIT67_data "### and output type: \n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT67,22,_OMC_LIT67_data);
#define _OMC_LIT67 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT67)
#define _OMC_LIT68_data "### Selected Arguments: \n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT68,25,_OMC_LIT68_data);
#define _OMC_LIT68 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT68)
#define _OMC_LIT69_data "### Diffed ExpList: \n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT69,21,_OMC_LIT69_data);
#define _OMC_LIT69 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT69)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT70,1,7) {&DAE_InlineType_NO__INLINE__desc,}};
#define _OMC_LIT70 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT70)
#define _OMC_LIT71_data "### differentiated result CALL :\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT71,33,_OMC_LIT71_data);
#define _OMC_LIT71 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT71)
#define _OMC_LIT72_data "Differentiate.differentiateFunctionCallPartial failed for "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT72,58,_OMC_LIT72_data);
#define _OMC_LIT72 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT72)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT73,1,3) {&DAE_InlineType_NORM__INLINE__desc,}};
#define _OMC_LIT73 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT73)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT74,1,6) {&DAE_InlineType_DEFAULT__INLINE__desc,}};
#define _OMC_LIT74 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT74)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT75,2,1) {_OMC_LIT74,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT75 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT75)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT76,2,1) {_OMC_LIT73,_OMC_LIT75}};
#define _OMC_LIT76 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT76)
#define _OMC_LIT77_data "### Differentiate call\n "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT77,24,_OMC_LIT77_data);
#define _OMC_LIT77 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT77)
#define _OMC_LIT78_data " w.r.t. "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT78,8,_OMC_LIT78_data);
#define _OMC_LIT78 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT78)
#define _OMC_LIT79_data "### result output :\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT79,20,_OMC_LIT79_data);
#define _OMC_LIT79 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT79)
#define _OMC_LIT80_data "Differentiate.differentiateFunctionCall failed for "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT80,51,_OMC_LIT80_data);
#define _OMC_LIT80 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT80)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT81,2,3) {&DAE_Exp_ICONST__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1))}};
#define _OMC_LIT81 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT81)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT82,1.0);
#define _OMC_LIT82 MMC_REFREALLIT(_OMC_LIT_STRUCT82)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT83,2,4) {&DAE_Exp_RCONST__desc,_OMC_LIT82}};
#define _OMC_LIT83 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT83)
#define _OMC_LIT84_data "log"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT84,3,_OMC_LIT84_data);
#define _OMC_LIT84 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT84)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT85,2,4) {&DAE_Exp_RCONST__desc,_OMC_LIT41}};
#define _OMC_LIT85 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT85)
#define _OMC_LIT86_data "\n- Function differentiateBinary failed. differentiateExp "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT86,57,_OMC_LIT86_data);
#define _OMC_LIT86 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT86)
#define _OMC_LIT87_data " w.r.t: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT87,8,_OMC_LIT87_data);
#define _OMC_LIT87 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT87)
#define _OMC_LIT88_data " failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT88,8,_OMC_LIT88_data);
#define _OMC_LIT88 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT88)
#define _OMC_LIT89_data "smooth"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT89,6,_OMC_LIT89_data);
#define _OMC_LIT89 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT89)
#define _OMC_LIT90_data "noEvent"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT90,7,_OMC_LIT90_data);
#define _OMC_LIT90 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT90)
#define _OMC_LIT91_data "cross"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT91,5,_OMC_LIT91_data);
#define _OMC_LIT91 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT91)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT92,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT90}};
#define _OMC_LIT92 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT92)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT93,2,6) {&DAE_Type_T__BOOL__desc,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT93 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT93)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT94,1,3) {&DAE_TailCall_NO__TAIL__desc,}};
#define _OMC_LIT94 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT94)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT95,8,3) {&DAE_CallAttributes_CALL__ATTR__desc,_OMC_LIT93,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT70,_OMC_LIT94}};
#define _OMC_LIT95 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT95)
#define _OMC_LIT96_data "floor"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT96,5,_OMC_LIT96_data);
#define _OMC_LIT96 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT96)
#define _OMC_LIT97_data "div"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT97,3,_OMC_LIT97_data);
#define _OMC_LIT97 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT97)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT98,1,3) {&BackendDAE_DifferentiationType_DIFFERENTIATION__TIME__desc,}};
#define _OMC_LIT98 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT98)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT99,2,3) {&DAE_Exp_ICONST__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(-1))}};
#define _OMC_LIT99 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT99)
#define _OMC_LIT100_data "atan2"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT100,5,_OMC_LIT100_data);
#define _OMC_LIT100 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT100)
#define _OMC_LIT101_data "semiLinear"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT101,10,_OMC_LIT101_data);
#define _OMC_LIT101 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT101)
#define _OMC_LIT102_data "max"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT102,3,_OMC_LIT102_data);
#define _OMC_LIT102 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT102)
#define _OMC_LIT103_data "min"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT103,3,_OMC_LIT103_data);
#define _OMC_LIT103 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT103)
#define _OMC_LIT104_data "mod"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT104,3,_OMC_LIT104_data);
#define _OMC_LIT104 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT104)
#define _OMC_LIT105_data "rem"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT105,3,_OMC_LIT105_data);
#define _OMC_LIT105 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT105)
#define _OMC_LIT106_data "delay"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT106,5,_OMC_LIT106_data);
#define _OMC_LIT106 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT106)
#define _OMC_LIT107_data "sample"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT107,6,_OMC_LIT107_data);
#define _OMC_LIT107 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT107)
#define _OMC_LIT108_data "ceil"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT108,4,_OMC_LIT108_data);
#define _OMC_LIT108 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT108)
#define _OMC_LIT109_data "integer"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT109,7,_OMC_LIT109_data);
#define _OMC_LIT109 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT109)
#define _OMC_LIT110_data "cos"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT110,3,_OMC_LIT110_data);
#define _OMC_LIT110 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT110)
#define _OMC_LIT111_data "sin"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT111,3,_OMC_LIT111_data);
#define _OMC_LIT111 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT111)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT112,2.0);
#define _OMC_LIT112 MMC_REFREALLIT(_OMC_LIT_STRUCT112)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT113,2,4) {&DAE_Exp_RCONST__desc,_OMC_LIT112}};
#define _OMC_LIT113 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT113)
#define _OMC_LIT114_data "sqrt"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT114,4,_OMC_LIT114_data);
#define _OMC_LIT114 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT114)
#define _OMC_LIT115_data "cosh"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT115,4,_OMC_LIT115_data);
#define _OMC_LIT115 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT115)
#define _OMC_LIT116_data "sinh"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT116,4,_OMC_LIT116_data);
#define _OMC_LIT116 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT116)
#define _OMC_LIT117_data "exp"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT117,3,_OMC_LIT117_data);
#define _OMC_LIT117 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT117)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT118,10.0);
#define _OMC_LIT118 MMC_REFREALLIT(_OMC_LIT_STRUCT118)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT119,2,4) {&DAE_Exp_RCONST__desc,_OMC_LIT118}};
#define _OMC_LIT119 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT119)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT120,2,1) {_OMC_LIT119,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT120 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT120)
#define _OMC_LIT121_data "sign"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT121,4,_OMC_LIT121_data);
#define _OMC_LIT121 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT121)
#define _OMC_LIT122_data "transpose"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT122,9,_OMC_LIT122_data);
#define _OMC_LIT122 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT122)
#define _OMC_LIT123_data "sum"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT123,3,_OMC_LIT123_data);
#define _OMC_LIT123 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT123)
#define _OMC_LIT124_data "pre"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT124,3,_OMC_LIT124_data);
#define _OMC_LIT124 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT124)
#define _OMC_LIT125_data "previous"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT125,8,_OMC_LIT125_data);
#define _OMC_LIT125 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT125)
#define _OMC_LIT126_data "$getPart"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT126,8,_OMC_LIT126_data);
#define _OMC_LIT126 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT126)
#define _OMC_LIT127_data "firstTick"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT127,9,_OMC_LIT127_data);
#define _OMC_LIT127 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT127)
#define _OMC_LIT128_data "interval"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT128,8,_OMC_LIT128_data);
#define _OMC_LIT128 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT128)
#define _OMC_LIT129_data "tan"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT129,3,_OMC_LIT129_data);
#define _OMC_LIT129 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT129)
#define _OMC_LIT130_data "asin"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT130,4,_OMC_LIT130_data);
#define _OMC_LIT130 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT130)
#define _OMC_LIT131_data "acos"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT131,4,_OMC_LIT131_data);
#define _OMC_LIT131 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT131)
#define _OMC_LIT132_data "atan"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT132,4,_OMC_LIT132_data);
#define _OMC_LIT132 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT132)
#define _OMC_LIT133_data "tanh"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT133,4,_OMC_LIT133_data);
#define _OMC_LIT133 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT133)
#define _OMC_LIT134_data "log10"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT134,5,_OMC_LIT134_data);
#define _OMC_LIT134 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT134)
#define _OMC_LIT135_data "abs"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT135,3,_OMC_LIT135_data);
#define _OMC_LIT135 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT135)
#define _OMC_LIT136_data "$CLKPRE"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT136,7,_OMC_LIT136_data);
#define _OMC_LIT136 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT136)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT137,2,3) {&DAE_Exp_ICONST__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(2))}};
#define _OMC_LIT137 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT137)
#define _OMC_LIT138_data "$DAE_CJ"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT138,7,_OMC_LIT138_data);
#define _OMC_LIT138 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT138)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT139,4,4) {&DAE_ComponentRef_CREF__IDENT__desc,_OMC_LIT138,_OMC_LIT47,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT139 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT139)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT140,2,5) {&DAE_Operator_MUL__desc,_OMC_LIT47}};
#define _OMC_LIT140 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT140)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT141,2,1) {_OMC_LIT73,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT141 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT141)
#define _OMC_LIT142_data "\n- Function differentiateCalls failed. differentiateExp "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT142,56,_OMC_LIT142_data);
#define _OMC_LIT142 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT142)
#define _OMC_LIT143_data "homotopy"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT143,8,_OMC_LIT143_data);
#define _OMC_LIT143 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT143)
#define _OMC_LIT144_data "der"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT144,3,_OMC_LIT144_data);
#define _OMC_LIT144 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT144)
#define _OMC_LIT145_data "Seed"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT145,4,_OMC_LIT145_data);
#define _OMC_LIT145 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT145)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT146,1,11) {&DAE_Type_T__UNKNOWN__desc,}};
#define _OMC_LIT146 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT146)
#define _OMC_LIT147_data "$funDER"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT147,7,_OMC_LIT147_data);
#define _OMC_LIT147 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT147)
#define _OMC_LIT148_data "nfScalarize"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT148,11,_OMC_LIT148_data);
#define _OMC_LIT148 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT148)
#define _OMC_LIT149_data "Run scalarization in NF, default true."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT149,38,_OMC_LIT149_data);
#define _OMC_LIT149 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT149)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT150,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT149}};
#define _OMC_LIT150 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT150)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT151,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(168)),_OMC_LIT148,MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */)),_OMC_LIT150}};
#define _OMC_LIT151 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT151)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT152,1,9) {&BackendDAE_VarKind_DISCRETE__desc,}};
#define _OMC_LIT152 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT152)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT153,2,1) {_OMC_LIT152,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT153 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT153)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT154,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT144}};
#define _OMC_LIT154 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT154)
#define _OMC_LIT155_data "\n- differentiateCrefs "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT155,22,_OMC_LIT155_data);
#define _OMC_LIT155 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT155)
#define _OMC_LIT156_data " type:"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT156,6,_OMC_LIT156_data);
#define _OMC_LIT156 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT156)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT157,2,3) {&DAE_Type_T__INTEGER__desc,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT157 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT157)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT158,1,5) {&DAE_VarParallelism_NON__PARALLEL__desc,}};
#define _OMC_LIT158 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT158)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT159,1,6) {&DAE_ConnectorType_NON__CONNECTOR__desc,}};
#define _OMC_LIT159 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT159)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT160,1,6) {&DAE_VarInnerOuter_NOT__INNER__OUTER__desc,}};
#define _OMC_LIT160 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT160)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT161,1,3) {&DAE_Else_NOELSE__desc,}};
#define _OMC_LIT161 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT161)
#define _OMC_LIT162_data "- differentiateStatements "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT162,26,_OMC_LIT162_data);
#define _OMC_LIT162 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT162)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT163,2,3) {&DAE_Exp_ICONST__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT163 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT163)
#define _OMC_LIT164_data "__HOM_LAMBDA"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT164,12,_OMC_LIT164_data);
#define _OMC_LIT164 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT164)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT165,2,3) {&DAE_Operator_ADD__desc,_OMC_LIT47}};
#define _OMC_LIT165 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT165)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT166,2,4) {&DAE_Operator_SUB__desc,_OMC_LIT47}};
#define _OMC_LIT166 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT166)
#define _OMC_LIT167_data "- differentiateExp "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT167,19,_OMC_LIT167_data);
#define _OMC_LIT167 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT167)
#define _OMC_LIT168_data " type: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT168,7,_OMC_LIT168_data);
#define _OMC_LIT168 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT168)
#define _OMC_LIT169_data " w.r.t "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT169,7,_OMC_LIT169_data);
#define _OMC_LIT169 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT169)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT170,1,6) {&ErrorTypes_MessageType_SYMBOLIC__desc,}};
#define _OMC_LIT170 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT170)
#define _OMC_LIT171_data "Derivative of expression \"%s\" w.r.t. \"%s\" is non-existent."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT171,58,_OMC_LIT171_data);
#define _OMC_LIT171 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT171)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT172,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT171}};
#define _OMC_LIT172 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT172)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT173,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(36)),_OMC_LIT170,_OMC_LIT11,_OMC_LIT172}};
#define _OMC_LIT173 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT173)
#define _OMC_LIT174_data "equation list"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT174,13,_OMC_LIT174_data);
#define _OMC_LIT174 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT174)
#define _OMC_LIT175_data "/home/adrpo33/OpenModelica/OMCompiler/Compiler/BackEnd/Differentiate.mo"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT175,71,_OMC_LIT175_data);
#define _OMC_LIT175 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT175)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT176_6,1.758197185e9);
#define _OMC_LIT176_6 MMC_REFREALLIT(_OMC_LIT_STRUCT176_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT176,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT175,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(495)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(495)),MMC_IMMEDIATE(MMC_TAGFIXNUM(176)),_OMC_LIT176_6}};
#define _OMC_LIT176 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT176)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT177_6,1.758197185e9);
#define _OMC_LIT177_6 MMC_REFREALLIT(_OMC_LIT_STRUCT177_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT177,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT175,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(457)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(457)),MMC_IMMEDIATE(MMC_TAGFIXNUM(154)),_OMC_LIT177_6}};
#define _OMC_LIT177 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT177)
#define _OMC_LIT178_data "### differentiateEquation\n "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT178,27,_OMC_LIT178_data);
#define _OMC_LIT178 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT178)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT179_6,1.758197185e9);
#define _OMC_LIT179_6 MMC_REFREALLIT(_OMC_LIT_STRUCT179_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT179,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT175,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(418)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7)),MMC_IMMEDIATE(MMC_TAGFIXNUM(418)),MMC_IMMEDIATE(MMC_TAGFIXNUM(159)),_OMC_LIT179_6}};
#define _OMC_LIT179 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT179)
#define _OMC_LIT180_data "### Result of differentiateEquation\n --> "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT180,41,_OMC_LIT180_data);
#define _OMC_LIT180 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT180)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT181_6,1.758197185e9);
#define _OMC_LIT181_6 MMC_REFREALLIT(_OMC_LIT_STRUCT181_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT181,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT175,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(268)),MMC_IMMEDIATE(MMC_TAGFIXNUM(5)),MMC_IMMEDIATE(MMC_TAGFIXNUM(268)),MMC_IMMEDIATE(MMC_TAGFIXNUM(157)),_OMC_LIT181_6}};
#define _OMC_LIT181 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT181)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT182,1,6) {&BackendDAE_DifferentiationType_DIFF__FULL__JACOBIAN__desc,}};
#define _OMC_LIT182 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT182)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT183_6,1.758197185e9);
#define _OMC_LIT183_6 MMC_REFREALLIT(_OMC_LIT_STRUCT183_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT183,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT175,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(240)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7)),MMC_IMMEDIATE(MMC_TAGFIXNUM(240)),MMC_IMMEDIATE(MMC_TAGFIXNUM(147)),_OMC_LIT183_6}};
#define _OMC_LIT183 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT183)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT184,1,5) {&DAE_AvlTreePathFunction_Tree_EMPTY__desc,}};
#define _OMC_LIT184 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT184)
#define _OMC_LIT185_data "### differentiateExpSolve\n "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT185,27,_OMC_LIT185_data);
#define _OMC_LIT185 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT185)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT186,1,4) {&BackendDAE_DifferentiationType_SIMPLE__DIFFERENTIATION__desc,}};
#define _OMC_LIT186 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT186)
#define _OMC_LIT187_data "### Result of differentiateExpSolve\n --> "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT187,41,_OMC_LIT187_data);
#define _OMC_LIT187 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT187)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT188_6,1.758197185e9);
#define _OMC_LIT188_6 MMC_REFREALLIT(_OMC_LIT_STRUCT188_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT188,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT175,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(203)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7)),MMC_IMMEDIATE(MMC_TAGFIXNUM(203)),MMC_IMMEDIATE(MMC_TAGFIXNUM(147)),_OMC_LIT188_6}};
#define _OMC_LIT188 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT188)
#define _OMC_LIT189_data "### differentiateExpTime\n "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT189,26,_OMC_LIT189_data);
#define _OMC_LIT189 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT189)
#define _OMC_LIT190_data " w.r.t. time\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT190,13,_OMC_LIT190_data);
#define _OMC_LIT190 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT190)
#define _OMC_LIT191_data "time"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT191,4,_OMC_LIT191_data);
#define _OMC_LIT191 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT191)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT192,4,4) {&DAE_ComponentRef_CREF__IDENT__desc,_OMC_LIT191,_OMC_LIT47,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT192 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT192)
#define _OMC_LIT193_data "### Result of differentiateExpTime\n --> "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT193,40,_OMC_LIT193_data);
#define _OMC_LIT193 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT193)
#define _OMC_LIT194_data "n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT194,1,_OMC_LIT194_data);
#define _OMC_LIT194 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT194)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT195_6,1.758197185e9);
#define _OMC_LIT195_6 MMC_REFREALLIT(_OMC_LIT_STRUCT195_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT195,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT175,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(166)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7)),MMC_IMMEDIATE(MMC_TAGFIXNUM(166)),MMC_IMMEDIATE(MMC_TAGFIXNUM(119)),_OMC_LIT195_6}};
#define _OMC_LIT195 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT195)
#define _OMC_LIT196_data "### differentiateEquationTime\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT196,30,_OMC_LIT196_data);
#define _OMC_LIT196 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT196)
#define _OMC_LIT197_data "### Result of differentiateEquationTime\n --> "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT197,45,_OMC_LIT197_data);
#define _OMC_LIT197 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT197)
#define _OMC_LIT198_data "\nDifferentiate.differentiateEquationTime failed for "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT198,52,_OMC_LIT198_data);
#define _OMC_LIT198 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT198)
#include "util/modelica.h"

#include "Differentiate_includes.h"


/* default, do not make protected functions static */
#if !defined(PROTECTED_FUNCTION_STATIC)
#define PROTECTED_FUNCTION_STATIC
#endif
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Differentiate_isParamOrConstant(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _diffData);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_isParamOrConstant(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _diffData);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_isParamOrConstant,2,0) {(void*) boxptr_Differentiate_isParamOrConstant,0}};
#define boxvar_Differentiate_isParamOrConstant MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_isParamOrConstant)
PROTECTED_FUNCTION_STATIC void omc_Differentiate_dumpInputData(threadData_t *threadData, modelica_metatype _inDiffData);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_dumpInputData,2,0) {(void*) boxptr_Differentiate_dumpInputData,0}};
#define boxvar_Differentiate_dumpInputData MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_dumpInputData)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_addElementVars2Dep(threadData_t *threadData, modelica_metatype _inElementLstVars, modelica_metatype _inFunctions, modelica_metatype _inDiffData, modelica_metatype *out_outEqnsLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_addElementVars2Dep,2,0) {(void*) boxptr_Differentiate_addElementVars2Dep,0}};
#define boxvar_Differentiate_addElementVars2Dep MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_addElementVars2Dep)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_lowerVarsElementVars(threadData_t *threadData, modelica_metatype _inElementLstVars, modelica_metatype _functions, modelica_metatype *out_eqnsLst, modelica_metatype *out_reqnsLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_lowerVarsElementVars,2,0) {(void*) boxptr_Differentiate_lowerVarsElementVars,0}};
#define boxvar_Differentiate_lowerVarsElementVars MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_lowerVarsElementVars)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_addGlobalVars(threadData_t *threadData, modelica_metatype _inVarsLst, modelica_metatype _inDiffData);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_addGlobalVars,2,0) {(void*) boxptr_Differentiate_addGlobalVars,0}};
#define boxvar_Differentiate_addGlobalVars MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_addGlobalVars)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_addAllVars(threadData_t *threadData, modelica_metatype _inVarsLst, modelica_metatype _inDiffData);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_addAllVars,2,0) {(void*) boxptr_Differentiate_addAllVars,0}};
#define boxvar_Differentiate_addAllVars MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_addAllVars)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_addDependentVars(threadData_t *threadData, modelica_metatype _inVarsLst, modelica_metatype _inDiffData);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_addDependentVars,2,0) {(void*) boxptr_Differentiate_addDependentVars,0}};
#define boxvar_Differentiate_addDependentVars MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_addDependentVars)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Differentiate_diffableTypes(threadData_t *threadData, modelica_metatype _inType);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_diffableTypes(threadData_t *threadData, modelica_metatype _inType);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_diffableTypes,2,0) {(void*) boxptr_Differentiate_diffableTypes,0}};
#define boxvar_Differentiate_diffableTypes MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_diffableTypes)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_getFunctionMapper1(threadData_t *threadData, modelica_metatype _inFuncDefs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_getFunctionMapper1,2,0) {(void*) boxptr_Differentiate_getFunctionMapper1,0}};
#define boxvar_Differentiate_getFunctionMapper1 MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_getFunctionMapper1)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_getlowerOrderDerivative(threadData_t *threadData, modelica_metatype _fname, modelica_metatype _functions);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_getlowerOrderDerivative,2,0) {(void*) boxptr_Differentiate_getlowerOrderDerivative,0}};
#define boxvar_Differentiate_getlowerOrderDerivative MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_getlowerOrderDerivative)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_checkDerFunctionConds(threadData_t *threadData, modelica_metatype _inbarr, modelica_metatype _icrlst, modelica_metatype _expl, modelica_metatype _inDiffArgs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_checkDerFunctionConds,2,0) {(void*) boxptr_Differentiate_checkDerFunctionConds,0}};
#define boxvar_Differentiate_checkDerFunctionConds MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_checkDerFunctionConds)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Differentiate_checkDerivativeFunctionInputs(threadData_t *threadData, modelica_metatype _blst, modelica_metatype _tp, modelica_metatype _dtp, modelica_metatype *out_outExpectedTypeLst);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_checkDerivativeFunctionInputs(threadData_t *threadData, modelica_metatype _blst, modelica_metatype _tp, modelica_metatype _dtp, modelica_metatype *out_outExpectedTypeLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_checkDerivativeFunctionInputs,2,0) {(void*) boxptr_Differentiate_checkDerivativeFunctionInputs,0}};
#define boxvar_Differentiate_checkDerivativeFunctionInputs MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_checkDerivativeFunctionInputs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateFunction1(threadData_t *threadData, modelica_metatype _inFuncName, modelica_metatype _inMapper, modelica_metatype _inTp, modelica_metatype _expl, modelica_metatype _inDiffArgs, modelica_metatype *out_blst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_differentiateFunction1,2,0) {(void*) boxptr_Differentiate_differentiateFunction1,0}};
#define boxvar_Differentiate_differentiateFunction1 MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_differentiateFunction1)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateElementVars(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype _inElementsDer, modelica_metatype _inElementsNoDer, modelica_metatype _inBooleanLst, modelica_integer _maxIter, modelica_boolean _elementListInputs, modelica_metatype *out_outFunctionTree, modelica_metatype *out_outElementsNoDer, modelica_metatype *out_outBooleanLst);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiateElementVars(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype _inElementsDer, modelica_metatype _inElementsNoDer, modelica_metatype _inBooleanLst, modelica_metatype _maxIter, modelica_metatype _elementListInputs, modelica_metatype *out_outFunctionTree, modelica_metatype *out_outElementsNoDer, modelica_metatype *out_outBooleanLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_differentiateElementVars,2,0) {(void*) boxptr_Differentiate_differentiateElementVars,0}};
#define boxvar_Differentiate_differentiateElementVars MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_differentiateElementVars)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_getFunctionInOutVars(threadData_t *threadData, modelica_metatype _inFunction, modelica_metatype _inFunctionTree, modelica_metatype _inDiffwrtCref, modelica_integer _maxIter, modelica_metatype *out_inputVarsDer, modelica_metatype *out_inputVarsNoDer, modelica_metatype *out_outputVarsDer, modelica_metatype *out_outputVarsNoDer, modelica_metatype *out_blst);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_getFunctionInOutVars(threadData_t *threadData, modelica_metatype _inFunction, modelica_metatype _inFunctionTree, modelica_metatype _inDiffwrtCref, modelica_metatype _maxIter, modelica_metatype *out_inputVarsDer, modelica_metatype *out_inputVarsNoDer, modelica_metatype *out_outputVarsDer, modelica_metatype *out_outputVarsNoDer, modelica_metatype *out_blst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_getFunctionInOutVars,2,0) {(void*) boxptr_Differentiate_getFunctionInOutVars,0}};
#define boxvar_Differentiate_getFunctionInOutVars MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_getFunctionInOutVars)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_getDiffedTypeandName(threadData_t *threadData, modelica_metatype _inFunction, modelica_metatype _inputVarsDer, modelica_metatype _outputVarsDer, modelica_metatype _blst, modelica_metatype *out_diffedType);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_getDiffedTypeandName,2,0) {(void*) boxptr_Differentiate_getDiffedTypeandName,0}};
#define boxvar_Differentiate_getDiffedTypeandName MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_getDiffedTypeandName)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiatePartialFunction(threadData_t *threadData, modelica_metatype _inFunction, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_integer _maxIter, modelica_metatype *out_outFunctionTree, modelica_metatype *out_outBooleanlst);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiatePartialFunction(threadData_t *threadData, modelica_metatype _inFunction, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype _maxIter, modelica_metatype *out_outFunctionTree, modelica_metatype *out_outBooleanlst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_differentiatePartialFunction,2,0) {(void*) boxptr_Differentiate_differentiatePartialFunction,0}};
#define boxvar_Differentiate_differentiatePartialFunction MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_differentiatePartialFunction)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_prepareArgumentsExplArray(threadData_t *threadData, modelica_metatype _inWorkLst, modelica_metatype _inArgs, modelica_integer _inCurrentArg, modelica_metatype _inAccum);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_prepareArgumentsExplArray(threadData_t *threadData, modelica_metatype _inWorkLst, modelica_metatype _inArgs, modelica_metatype _inCurrentArg, modelica_metatype _inAccum);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_prepareArgumentsExplArray,2,0) {(void*) boxptr_Differentiate_prepareArgumentsExplArray,0}};
#define boxvar_Differentiate_prepareArgumentsExplArray MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_prepareArgumentsExplArray)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_createPartialSum(threadData_t *threadData, modelica_metatype _inArgsLst, modelica_metatype _inDiff, modelica_metatype _inCall, modelica_metatype _inAccum);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_createPartialSum,2,0) {(void*) boxptr_Differentiate_createPartialSum,0}};
#define boxvar_Differentiate_createPartialSum MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_createPartialSum)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_createPartialDifferentiatedExp(threadData_t *threadData, modelica_metatype _inDiffExpl, modelica_metatype _inDiffExplZero, modelica_metatype _inOrginalExpl, modelica_metatype _inCall, modelica_integer _currentLstElement, modelica_metatype _inAccum);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_createPartialDifferentiatedExp(threadData_t *threadData, modelica_metatype _inDiffExpl, modelica_metatype _inDiffExplZero, modelica_metatype _inOrginalExpl, modelica_metatype _inCall, modelica_metatype _currentLstElement, modelica_metatype _inAccum);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_createPartialDifferentiatedExp,2,0) {(void*) boxptr_Differentiate_createPartialDifferentiatedExp,0}};
#define boxvar_Differentiate_createPartialDifferentiatedExp MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_createPartialDifferentiatedExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_createPartialArgumentsRecord(threadData_t *threadData, modelica_metatype _inTypesLst, modelica_metatype _inVarNames, modelica_metatype _inArgs, modelica_metatype _inDiffedArgs, modelica_metatype _inOrginalExpl, modelica_metatype _inCall);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_createPartialArgumentsRecord,2,0) {(void*) boxptr_Differentiate_createPartialArgumentsRecord,0}};
#define boxvar_Differentiate_createPartialArgumentsRecord MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_createPartialArgumentsRecord)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_createPartialArgumentsTuple(threadData_t *threadData, modelica_metatype _inTypesLst, modelica_metatype _inArgs, modelica_metatype _inDiffedArgs, modelica_metatype _inOrginalExpl, modelica_metatype _inCall);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_createPartialArgumentsTuple,2,0) {(void*) boxptr_Differentiate_createPartialArgumentsTuple,0}};
#define boxvar_Differentiate_createPartialArgumentsTuple MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_createPartialArgumentsTuple)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_createPartialArguments(threadData_t *threadData, modelica_metatype _outputType, modelica_metatype _inArgs, modelica_metatype _inDiffedArgs, modelica_metatype _inOrginalExpl, modelica_metatype _inCall);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_createPartialArguments,2,0) {(void*) boxptr_Differentiate_createPartialArguments,0}};
#define boxvar_Differentiate_createPartialArguments MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_createPartialArguments)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_tryZeroDiff(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexplist, modelica_metatype __omcQ_24in_5Ffunctions, modelica_integer _maxIter, modelica_metatype *out_functions, modelica_boolean *out_success);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_tryZeroDiff(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexplist, modelica_metatype __omcQ_24in_5Ffunctions, modelica_metatype _maxIter, modelica_metatype *out_functions, modelica_metatype *out_success);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_tryZeroDiff,2,0) {(void*) boxptr_Differentiate_tryZeroDiff,0}};
#define boxvar_Differentiate_tryZeroDiff MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_tryZeroDiff)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_addFunctionConstantsAndParameters(threadData_t *threadData, modelica_metatype __omcQ_24in_5FknownVars_5Fopt, modelica_metatype _func);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_addFunctionConstantsAndParameters,2,0) {(void*) boxptr_Differentiate_addFunctionConstantsAndParameters,0}};
#define boxvar_Differentiate_addFunctionConstantsAndParameters MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_addFunctionConstantsAndParameters)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateFunctionCallPartial(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_integer _maxIter, modelica_metatype *out_outFunctionTree);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiateFunctionCallPartial(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype _maxIter, modelica_metatype *out_outFunctionTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_differentiateFunctionCallPartial,2,0) {(void*) boxptr_Differentiate_differentiateFunctionCallPartial,0}};
#define boxvar_Differentiate_differentiateFunctionCallPartial MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_differentiateFunctionCallPartial)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateFunctionCall(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_integer _maxIter, modelica_metatype *out_outFunctionTree);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiateFunctionCall(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype _maxIter, modelica_metatype *out_outFunctionTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_differentiateFunctionCall,2,0) {(void*) boxptr_Differentiate_differentiateFunctionCall,0}};
#define boxvar_Differentiate_differentiateFunctionCall MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_differentiateFunctionCall)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateBinary(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_integer _maxIter, modelica_metatype *out_outFunctionTree);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiateBinary(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype _maxIter, modelica_metatype *out_outFunctionTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_differentiateBinary,2,0) {(void*) boxptr_Differentiate_differentiateBinary,0}};
#define boxvar_Differentiate_differentiateBinary MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_differentiateBinary)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateCallExpNArg(threadData_t *threadData, modelica_string _name, modelica_metatype _inExpl, modelica_metatype _inAttr, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_integer _maxIter, modelica_metatype *out_outFunctionTree);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiateCallExpNArg(threadData_t *threadData, modelica_metatype _name, modelica_metatype _inExpl, modelica_metatype _inAttr, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype _maxIter, modelica_metatype *out_outFunctionTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_differentiateCallExpNArg,2,0) {(void*) boxptr_Differentiate_differentiateCallExpNArg,0}};
#define boxvar_Differentiate_differentiateCallExpNArg MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_differentiateCallExpNArg)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_createFromNCall2ArgsCall(threadData_t *threadData, modelica_string _funcName, modelica_metatype _expl, modelica_metatype _tp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_createFromNCall2ArgsCall,2,0) {(void*) boxptr_Differentiate_createFromNCall2ArgsCall,0}};
#define boxvar_Differentiate_createFromNCall2ArgsCall MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_createFromNCall2ArgsCall)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateCallExp1Arg(threadData_t *threadData, modelica_string _name, modelica_metatype _exp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFuncs, modelica_integer _maxIter, modelica_metatype *out_outFunctionTree);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiateCallExp1Arg(threadData_t *threadData, modelica_metatype _name, modelica_metatype _exp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFuncs, modelica_metatype _maxIter, modelica_metatype *out_outFunctionTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_differentiateCallExp1Arg,2,0) {(void*) boxptr_Differentiate_differentiateCallExp1Arg,0}};
#define boxvar_Differentiate_differentiateCallExp1Arg MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_differentiateCallExp1Arg)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateCalls(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_integer _maxIter, modelica_metatype *out_outFunctionTree);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiateCalls(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype _maxIter, modelica_metatype *out_outFunctionTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_differentiateCalls,2,0) {(void*) boxptr_Differentiate_differentiateCalls,0}};
#define boxvar_Differentiate_differentiateCalls MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_differentiateCalls)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateCrefs(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_integer _maxIter, modelica_metatype *out_outFunctionTree);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiateCrefs(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype _maxIter, modelica_metatype *out_outFunctionTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_differentiateCrefs,2,0) {(void*) boxptr_Differentiate_differentiateCrefs,0}};
#define boxvar_Differentiate_differentiateCrefs MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_differentiateCrefs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_makeAssignmentfromTuple(threadData_t *threadData, modelica_metatype _inTpl, modelica_metatype _source, modelica_metatype _inFunctionTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_makeAssignmentfromTuple,2,0) {(void*) boxptr_Differentiate_makeAssignmentfromTuple,0}};
#define boxvar_Differentiate_makeAssignmentfromTuple MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_makeAssignmentfromTuple)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Differentiate_isDiscreteAssignStatment(threadData_t *threadData, modelica_metatype _inStmt);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_isDiscreteAssignStatment(threadData_t *threadData, modelica_metatype _inStmt);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_isDiscreteAssignStatment,2,0) {(void*) boxptr_Differentiate_isDiscreteAssignStatment,0}};
#define boxvar_Differentiate_isDiscreteAssignStatment MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_isDiscreteAssignStatment)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateStatements(threadData_t *threadData, modelica_metatype _inStmts, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inStmtsAccum, modelica_metatype _inFunctionTree, modelica_integer _maxIter, modelica_metatype *out_outFunctionTree);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiateStatements(threadData_t *threadData, modelica_metatype _inStmts, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inStmtsAccum, modelica_metatype _inFunctionTree, modelica_metatype _maxIter, modelica_metatype *out_outFunctionTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_differentiateStatements,2,0) {(void*) boxptr_Differentiate_differentiateStatements,0}};
#define boxvar_Differentiate_differentiateStatements MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_differentiateStatements)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_integer _maxIter, modelica_metatype *out_outFunctionTree);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiateExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype _maxIter, modelica_metatype *out_outFunctionTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_differentiateExp,2,0) {(void*) boxptr_Differentiate_differentiateExp,0}};
#define boxvar_Differentiate_differentiateExp MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_differentiateExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateWhenEquations(threadData_t *threadData, modelica_metatype _inWhenEquations, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype *out_outFunctionTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_differentiateWhenEquations,2,0) {(void*) boxptr_Differentiate_differentiateWhenEquations,0}};
#define boxvar_Differentiate_differentiateWhenEquations MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_differentiateWhenEquations)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateEquationsLst(threadData_t *threadData, modelica_metatype _inEquationsLst, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inEquationsLstAccum, modelica_metatype _inFunctionTree, modelica_metatype *out_outFunctionTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_differentiateEquationsLst,2,0) {(void*) boxptr_Differentiate_differentiateEquationsLst,0}};
#define boxvar_Differentiate_differentiateEquationsLst MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_differentiateEquationsLst)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateEquations(threadData_t *threadData, modelica_metatype _inEquations, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inEquationsAccum, modelica_metatype _inFunctionTree, modelica_metatype *out_outFunctionTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Differentiate_differentiateEquations,2,0) {(void*) boxptr_Differentiate_differentiateEquations,0}};
#define boxvar_Differentiate_differentiateEquations MMC_REFSTRUCTLIT(boxvar_lit_Differentiate_differentiateEquations)

PROTECTED_FUNCTION_STATIC modelica_boolean omc_Differentiate_isParamOrConstant(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _diffData)
{
  modelica_boolean _b;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _b has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _diffData;
    {
      modelica_metatype _knownVars = NULL;
      modelica_metatype _var_lst = NULL;
      modelica_metatype _var = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _knownVars has no default value.
      // _var_lst has no default value.
      // _var has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          if (optionNone(tmpMeta6)) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
          
          _knownVars = tmpMeta7;
          /* Pattern matching succeeded */
          _var_lst = omc_BackendVariable_getVarTryHard(threadData, _cref, _knownVars);

          if(isSome(_var_lst))
          {
            /* Pattern-matching assignment */
            tmpMeta8 = omc_Util_getOption(threadData, _var_lst);
            if (listEmpty(tmpMeta8)) goto goto_2;
            tmpMeta9 = MMC_CAR(tmpMeta8);
            tmpMeta10 = MMC_CDR(tmpMeta8);
            _var = tmpMeta9;

            _b = omc_BackendVariable_isParamOrConstant(threadData, _var);
          }
          else
          {
            _b = 0 /* false */;
          }
          tmp1 = _b;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _b = tmp1;
  _return: OMC_LABEL_UNUSED
  return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_isParamOrConstant(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _diffData)
{
  modelica_boolean _b;
  modelica_metatype out_b;
  _b = omc_Differentiate_isParamOrConstant(threadData, _cref, _diffData);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

PROTECTED_FUNCTION_STATIC void omc_Differentiate_dumpInputData(threadData_t *threadData, modelica_metatype _inDiffData)
{
  modelica_metatype _independenentVars = NULL;
  modelica_metatype _dependenentVars = NULL;
  modelica_metatype _knownVars = NULL;
  modelica_metatype _allVars = NULL;
  modelica_metatype _controlVars = NULL;
  modelica_metatype _diffCrefs = NULL;
  modelica_metatype _matrixName = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _independenentVars has no default value.
  // _dependenentVars has no default value.
  // _knownVars has no default value.
  // _allVars has no default value.
  // _controlVars has no default value.
  // _diffCrefs has no default value.
  // _matrixName has no default value.
  fputs(MMC_STRINGDATA(_OMC_LIT0),stdout);

  if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDiffData), 8)))))
  {
    tmpMeta1 = stringAppend(_OMC_LIT1,omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDiffData), 8)))));
    tmpMeta2 = stringAppend(tmpMeta1,_OMC_LIT2);
    fputs(MMC_STRINGDATA(tmpMeta2),stdout);
  }

  if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDiffData), 2)))))
  {
    fputs(MMC_STRINGDATA(_OMC_LIT3),stdout);

    omc_BackendDump_printVariables(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDiffData), 2)))));
  }

  if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDiffData), 3)))))
  {
    fputs(MMC_STRINGDATA(_OMC_LIT4),stdout);

    omc_BackendDump_printVariables(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDiffData), 3)))));
  }

  if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDiffData), 4)))))
  {
    fputs(MMC_STRINGDATA(_OMC_LIT5),stdout);

    omc_BackendDump_printVariables(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDiffData), 4)))));
  }

  if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDiffData), 5)))))
  {
    fputs(MMC_STRINGDATA(_OMC_LIT6),stdout);

    omc_BackendDump_printVariables(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDiffData), 5)))));
  }

  if((!listEmpty((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDiffData), 6))))))
  {
    fputs(MMC_STRINGDATA(_OMC_LIT7),stdout);

    omc_BackendDump_printVarList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDiffData), 6))));
  }

  if((!listEmpty((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDiffData), 7))))))
  {
    tmpMeta3 = stringAppend(_OMC_LIT8,omc_ComponentReference_printComponentRefListStr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDiffData), 7)))));
    tmpMeta4 = stringAppend(tmpMeta3,_OMC_LIT9);
    fputs(MMC_STRINGDATA(tmpMeta4),stdout);
  }
  _return: OMC_LABEL_UNUSED
  return;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_addElementVars2Dep(threadData_t *threadData, modelica_metatype _inElementLstVars, modelica_metatype _inFunctions, modelica_metatype _inDiffData, modelica_metatype *out_outEqnsLst)
{
  modelica_metatype _outDiffData = NULL;
  modelica_metatype _outEqnsLst = NULL;
  modelica_metatype _varsLst = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDiffData has no default value.
  // _outEqnsLst has no default value.
  // _varsLst has no default value.
  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp2_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          /* Pattern matching succeeded */
          _varsLst = omc_Differentiate_lowerVarsElementVars(threadData, _inElementLstVars, _inFunctions ,&_outEqnsLst, NULL);

          _outDiffData = omc_Differentiate_addDependentVars(threadData, _varsLst, _inDiffData);
          goto tmp2_done;
        }
        case 1: {
          /* Pattern matching succeeded */
          omc_Error_addMessage(threadData, _OMC_LIT14, _OMC_LIT16);

          goto goto_1;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      tmp2_done:
      (void)tmp3;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp2_done2;
      goto_1:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp3 < 2) {
        goto tmp2_top;
      }
      MMC_THROW_INTERNAL();
      tmp2_done2:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  if (out_outEqnsLst) { *out_outEqnsLst = _outEqnsLst; }
  return _outDiffData;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_lowerVarsElementVars(threadData_t *threadData, modelica_metatype _inElementLstVars, modelica_metatype _functions, modelica_metatype *out_eqnsLst, modelica_metatype *out_reqnsLst)
{
  modelica_metatype _varsLst = NULL;
  modelica_metatype _eqnsLst = NULL;
  modelica_metatype _reqnsLst = NULL;
  modelica_metatype _vars = NULL;
  modelica_metatype _knvars = NULL;
  modelica_metatype _exvars = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _varsLst has no default value.
  // _eqnsLst has no default value.
  // _reqnsLst has no default value.
  // _vars has no default value.
  // _knvars has no default value.
  // _exvars has no default value.
  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp2_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          /* Pattern matching succeeded */
          tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
          _vars = omc_BackendDAECreate_lowerVars(threadData, _inElementLstVars, _functions, tmpMeta5, tmpMeta6, tmpMeta7, tmpMeta8, tmpMeta9 ,&_knvars ,&_exvars ,&_eqnsLst ,&_reqnsLst);

          _varsLst = listAppend(_exvars, listAppend(_vars, _knvars));
          goto tmp2_done;
        }
        case 1: {
          modelica_boolean tmp10;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp10 = omc_Flags_isSet(threadData, _OMC_LIT20);
          if (1 /* true */ != tmp10) goto goto_1;

          omc_Debug_traceln(threadData, _OMC_LIT21);
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      tmp2_done:
      (void)tmp3;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp2_done2;
      goto_1:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp3 < 2) {
        goto tmp2_top;
      }
      MMC_THROW_INTERNAL();
      tmp2_done2:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  if (out_eqnsLst) { *out_eqnsLst = _eqnsLst; }
  if (out_reqnsLst) { *out_reqnsLst = _reqnsLst; }
  return _varsLst;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_addGlobalVars(threadData_t *threadData, modelica_metatype _inVarsLst, modelica_metatype _inDiffData)
{
  modelica_metatype _outDiffData = NULL;
  modelica_metatype _glVars = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outDiffData = _inDiffData;
  // _glVars has no default value.
  if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outDiffData), 4)))))
  {
    _glVars = omc_BackendVariable_addVars(threadData, _inVarsLst, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outDiffData), 4)))));
  }
  else
  {
    _glVars = omc_BackendVariable_listVar(threadData, _inVarsLst);
  }

  tmpMeta1 = MMC_TAGPTR(mmc_alloc_words(10));
  memcpy(MMC_UNTAGPTR(tmpMeta1), MMC_UNTAGPTR(_outDiffData), 10*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta1))[4] = mmc_mk_some(_glVars);
  _outDiffData = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outDiffData;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_addAllVars(threadData_t *threadData, modelica_metatype _inVarsLst, modelica_metatype _inDiffData)
{
  modelica_metatype _outDiffData = NULL;
  modelica_metatype _allVars = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outDiffData = _inDiffData;
  // _allVars has no default value.
  if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outDiffData), 5)))))
  {
    _allVars = omc_BackendVariable_addVars(threadData, _inVarsLst, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outDiffData), 5)))));
  }
  else
  {
    _allVars = omc_BackendVariable_listVar(threadData, _inVarsLst);
  }

  tmpMeta1 = MMC_TAGPTR(mmc_alloc_words(10));
  memcpy(MMC_UNTAGPTR(tmpMeta1), MMC_UNTAGPTR(_outDiffData), 10*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta1))[5] = mmc_mk_some(_allVars);
  _outDiffData = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outDiffData;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_addDependentVars(threadData_t *threadData, modelica_metatype _inVarsLst, modelica_metatype _inDiffData)
{
  modelica_metatype _outDiffData = NULL;
  modelica_metatype _depVars = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outDiffData = _inDiffData;
  // _depVars has no default value.
  if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outDiffData), 3)))))
  {
    _depVars = omc_BackendVariable_addVars(threadData, _inVarsLst, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outDiffData), 3)))));
  }
  else
  {
    _depVars = omc_BackendVariable_listVar(threadData, _inVarsLst);
  }

  tmpMeta1 = MMC_TAGPTR(mmc_alloc_words(10));
  memcpy(MMC_UNTAGPTR(tmpMeta1), MMC_UNTAGPTR(_outDiffData), 10*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta1))[3] = mmc_mk_some(_depVars);
  _outDiffData = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outDiffData;
}

PROTECTED_FUNCTION_STATIC modelica_boolean omc_Differentiate_diffableTypes(threadData_t *threadData, modelica_metatype _inType)
{
  modelica_boolean _out;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _out = (omc_Types_isRealOrSubTypeReal(threadData, _inType) || omc_Types_isRecord(threadData, _inType));
  _return: OMC_LABEL_UNUSED
  return _out;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_diffableTypes(threadData_t *threadData, modelica_metatype _inType)
{
  modelica_boolean _out;
  modelica_metatype out_out;
  _out = omc_Differentiate_diffableTypes(threadData, _inType);
  out_out = mmc_mk_icon(_out);
  return out_out;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_getFunctionMapper1(threadData_t *threadData, modelica_metatype _inFuncDefs)
{
  modelica_metatype _mapper = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _mapper has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _inFuncDefs;
    {
      modelica_metatype _m = NULL;
      modelica_metatype _funcDefs = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _m has no default value.
      // _funcDefs has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,2,6) == 0) goto tmp3_end;
          
          _m = tmpMeta6;
          /* Pattern matching succeeded */
          tmpMeta1 = _m;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta8 = MMC_CAR(tmp4_1);
          tmpMeta9 = MMC_CDR(tmp4_1);
          _funcDefs = tmpMeta9;
          /* Pattern matching succeeded */
          tmpMeta1 = omc_Differentiate_getFunctionMapper1(threadData, _funcDefs);
          goto tmp3_done;
        }
        case 2: {
          modelica_boolean tmp10;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp10 = omc_Flags_isSet(threadData, _OMC_LIT20);
          if (1 /* true */ != tmp10) goto goto_2;

          omc_Debug_trace(threadData, _OMC_LIT22);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _mapper = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _mapper;
}

DLLDirection
modelica_metatype omc_Differentiate_getFunctionMapper(threadData_t *threadData, modelica_metatype _fname, modelica_metatype _functions, modelica_metatype *out_tp)
{
  modelica_metatype _mapper = NULL;
  modelica_metatype _tp = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _mapper has no default value.
  // _tp has no default value.
  
  
  { /* matchcontinue expression */
    {
      modelica_metatype _flst = NULL;
      modelica_metatype _t = NULL;
      modelica_metatype _m = NULL;
      modelica_string _s = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _flst has no default value.
      // _t has no default value.
      // _m has no default value.
      // _s has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta6 = omc_DAE_AvlTreePathFunction_get(threadData, _functions, _fname);
          if (optionNone(tmpMeta6)) goto goto_2;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,10) == 0) goto goto_2;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
          _flst = tmpMeta8;
          _t = tmpMeta9;

          _m = omc_Differentiate_getFunctionMapper1(threadData, _flst);
          tmpMeta[0+0] = _m;
          tmpMeta[0+1] = _t;
          goto tmp3_done;
        }
        case 1: {
          modelica_boolean tmp10;
          modelica_metatype tmpMeta11;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp10 = omc_Flags_isSet(threadData, _OMC_LIT20);
          if (1 /* true */ != tmp10) goto goto_2;

          _s = omc_AbsynUtil_pathString(threadData, _fname, _OMC_LIT23, 1 /* true */, 0 /* false */);

          tmpMeta11 = stringAppend(_OMC_LIT24,_s);
          _s = tmpMeta11;

          omc_Debug_traceln(threadData, _s);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _mapper = tmpMeta[0+0];
  _tp = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_tp) { *out_tp = _tp; }
  return _mapper;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_getlowerOrderDerivative(threadData_t *threadData, modelica_metatype _fname, modelica_metatype _functions)
{
  modelica_metatype _outFName = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outFName has no default value.
  { /* match expression */
    {
      modelica_metatype _flst = NULL;
      modelica_metatype _lowerOrderDerivatives = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _flst has no default value.
      // _lowerOrderDerivatives has no default value.
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta6 = omc_DAE_AvlTreePathFunction_get(threadData, _functions, _fname);
          if (optionNone(tmpMeta6)) goto goto_2;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,10) == 0) goto goto_2;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
          _flst = tmpMeta8;

          /* Pattern-matching assignment */
          tmpMeta9 = omc_Differentiate_getFunctionMapper1(threadData, _flst);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,2,6) == 0) goto goto_2;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 7));
          _lowerOrderDerivatives = tmpMeta10;
          tmpMeta1 = omc_List_last(threadData, _lowerOrderDerivatives);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outFName = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outFName;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_checkDerFunctionConds(threadData_t *threadData, modelica_metatype _inbarr, modelica_metatype _icrlst, modelica_metatype _expl, modelica_metatype _inDiffArgs)
{
  modelica_metatype _outblst = NULL;
  modelica_integer _i;
  modelica_metatype _dc = NULL;
  modelica_metatype _e = NULL;
  modelica_metatype _p1 = NULL;
  modelica_metatype _p2 = NULL;
  modelica_metatype _ba = NULL;
  modelica_metatype _diffwrtCref = NULL;
  modelica_metatype _inputData = NULL;
  modelica_metatype _diffType = NULL;
  modelica_metatype _functionTree = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_integer tmp9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta23;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outblst has no default value.
  // _i has no default value.
  // _dc has no default value.
  // _e has no default value.
  // _p1 has no default value.
  // _p2 has no default value.
  _ba = _inbarr;
  // _diffwrtCref has no default value.
  // _inputData has no default value.
  // _diffType has no default value.
  // _functionTree has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inDiffArgs;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 4));
  _diffwrtCref = tmpMeta2;
  _inputData = tmpMeta3;
  _diffType = tmpMeta4;
  _functionTree = tmpMeta5;

  {
    modelica_metatype _tpl;
    for (tmpMeta6 = _icrlst; !listEmpty(tmpMeta6); tmpMeta6=MMC_CDR(tmpMeta6))
    {
      _tpl = MMC_CAR(tmpMeta6);
      /* Pattern-matching assignment */
      tmpMeta7 = _tpl;
      tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
      tmp9 = mmc_unbox_integer(tmpMeta8);
      tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
      _i = tmp9  /* pattern as ty=Integer */;
      _dc = tmpMeta10;

      { /* matchcontinue expression */
        volatile modelica_metatype tmp13_1;
        tmp13_1 = _dc;
        {
          volatile mmc_switch_type tmp13;
          int tmp14;
          tmp13 = 0;
          MMC_TRY_INTERNAL(mmc_jumper)
          tmp12_top:
          threadData->mmc_jumper = &new_mmc_jumper;
          for (; tmp13 < 4; tmp13++) {
            switch (MMC_SWITCH_CAST(tmp13)) {
            case 0: {
              modelica_boolean tmp15;
              if (mmc__uniontype__metarecord__typedef__equal(tmp13_1,0,0) == 0) goto tmp12_end;
              tmp13 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
              _e = listGet(_expl, _i);

              _e = omc_Differentiate_differentiateExp(threadData, _e, _diffwrtCref, _inputData, _diffType, _functionTree, ((modelica_integer) 20) ,&_functionTree);

              /* Pattern-matching assignment */
              tmp15 = omc_Expression_isZero(threadData, _e);
              if (1 /* true */ != tmp15) goto goto_11;
              goto tmp12_done;
            }
            case 1: {
              modelica_metatype tmpMeta16;
              modelica_metatype tmpMeta17;
              modelica_metatype tmpMeta18;
              modelica_metatype tmpMeta19;
              modelica_boolean tmp20;
              if (mmc__uniontype__metarecord__typedef__equal(tmp13_1,1,1) == 0) goto tmp12_end;
              tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp13_1), 2));
              if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,13,3) == 0) goto tmp12_end;
              tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
              
              _p1 = tmpMeta17;
              tmp13 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
              /* Pattern-matching assignment */
              tmpMeta18 = listGet(_expl, _i);
              if (mmc__uniontype__metarecord__typedef__equal(tmpMeta18,13,3) == 0) goto goto_11;
              tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
              _p2 = tmpMeta19;

              /* Pattern-matching assignment */
              tmp20 = omc_AbsynUtil_pathEqual(threadData, _p1, _p2);
              if (1 /* true */ != tmp20) goto goto_11;
              goto tmp12_done;
            }
            case 2: {
              modelica_metatype tmpMeta21;
              if (mmc__uniontype__metarecord__typedef__equal(tmp13_1,1,1) == 0) goto tmp12_end;
              tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp13_1), 2));
              if (mmc__uniontype__metarecord__typedef__equal(tmpMeta21,0,1) == 0) goto tmp12_end;
              
              /* Pattern matching succeeded */
              goto tmp12_done;
            }
            case 3: {
              modelica_boolean tmp22;
              
              /* Pattern matching succeeded */
              /* Pattern-matching assignment */
              tmp22 = omc_Flags_isSet(threadData, _OMC_LIT20);
              if (1 /* true */ != tmp22) goto goto_11;

              omc_Debug_traceln(threadData, _OMC_LIT25);
              goto goto_11;
              goto tmp12_done;
            }
            }
            goto tmp12_end;
            tmp12_end: ;
          }
          goto goto_11;
          tmp12_done:
          (void)tmp13;
          MMC_RESTORE_INTERNAL(mmc_jumper);
          goto tmp12_done2;
          goto_11:;
          MMC_CATCH_INTERNAL(mmc_jumper);
          if (++tmp13 < 4) {
            goto tmp12_top;
          }
          MMC_THROW_INTERNAL();
          tmp12_done2:;
        }
      }
      ;

      arrayUpdate(_ba, _i, mmc_mk_boolean(0 /* false */));
    }
  }

  _outblst = arrayList(_ba);
  _return: OMC_LABEL_UNUSED
  return _outblst;
}

PROTECTED_FUNCTION_STATIC modelica_boolean omc_Differentiate_checkDerivativeFunctionInputs(threadData_t *threadData, modelica_metatype _blst, modelica_metatype _tp, modelica_metatype _dtp, modelica_metatype *out_outExpectedTypeLst)
{
  modelica_boolean _outBoolean;
  modelica_metatype _outExpectedTypeLst = NULL;
  modelica_boolean tmp1_c0 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outBoolean has no default value.
  // _outExpectedTypeLst has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _tp;
    tmp4_2 = _dtp;
    {
      modelica_metatype _falst = NULL;
      modelica_metatype _falst1 = NULL;
      modelica_metatype _falst2 = NULL;
      modelica_metatype _dfalst = NULL;
      modelica_metatype _tlst = NULL;
      modelica_metatype _dtlst = NULL;
      modelica_boolean _ret;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _falst has no default value.
      // _falst1 has no default value.
      // _falst2 has no default value.
      // _dfalst has no default value.
      // _tlst has no default value.
      // _dtlst has no default value.
      // _ret has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,4) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,11,4) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          
          _falst = tmpMeta6;
          _dfalst = tmpMeta7;
          /* Pattern matching succeeded */
          _falst1 = omc_List_splitOnBoolList(threadData, _falst, _blst, NULL);

          _falst2 = listAppend(_falst, _falst1);

          _tlst = omc_List_map(threadData, _falst2, boxvar_Types_funcArgType);

          _dtlst = omc_List_map(threadData, _dfalst, boxvar_Types_funcArgType);

          _ret = omc_List_isEqualOnTrue(threadData, _tlst, _dtlst, boxvar_Types_equivtypes);
          tmp1_c0 = _ret;
          tmpMeta[0+1] = _tlst;
          goto tmp3_done;
        }
        case 1: {
          modelica_boolean tmp8;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp8 = omc_Flags_isSet(threadData, _OMC_LIT20);
          if (1 /* true */ != tmp8) goto goto_2;

          omc_Debug_trace(threadData, _OMC_LIT26);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outBoolean = tmp1_c0;
  _outExpectedTypeLst = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outExpectedTypeLst) { *out_outExpectedTypeLst = _outExpectedTypeLst; }
  return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_checkDerivativeFunctionInputs(threadData_t *threadData, modelica_metatype _blst, modelica_metatype _tp, modelica_metatype _dtp, modelica_metatype *out_outExpectedTypeLst)
{
  modelica_boolean _outBoolean;
  modelica_metatype out_outBoolean;
  _outBoolean = omc_Differentiate_checkDerivativeFunctionInputs(threadData, _blst, _tp, _dtp, out_outExpectedTypeLst);
  out_outBoolean = mmc_mk_icon(_outBoolean);
  /* skip box _outExpectedTypeLst; list<DAE.Type> */
  return out_outBoolean;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateFunction1(threadData_t *threadData, modelica_metatype _inFuncName, modelica_metatype _inMapper, modelica_metatype _inTp, modelica_metatype _expl, modelica_metatype _inDiffArgs, modelica_metatype *out_blst)
{
  modelica_metatype _outFuncName = NULL;
  modelica_metatype _blst = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outFuncName has no default value.
  // _blst has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
    tmp4_1 = _inMapper;
    tmp4_2 = _inTp;
    tmp4_3 = _inDiffArgs;
    {
      modelica_metatype _functions = NULL;
      modelica_metatype _default = NULL;
      modelica_metatype _fname = NULL;
      modelica_metatype _inDFuncName = NULL;
      modelica_metatype _cr = NULL;
      modelica_integer _derivativeOrder;
      modelica_metatype _funcArg = NULL;
      modelica_metatype _tplst = NULL;
      modelica_metatype _bl = NULL;
      modelica_metatype _lowerOrderDerivatives = NULL;
      modelica_metatype _mapper = NULL;
      modelica_metatype _tp = NULL;
      modelica_metatype _ba = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _functions has no default value.
      // _default has no default value.
      // _fname has no default value.
      // _inDFuncName has no default value.
      // _cr has no default value.
      // _derivativeOrder has no default value.
      // _funcArg has no default value.
      // _tplst has no default value.
      // _bl has no default value.
      // _lowerOrderDerivatives has no default value.
      // _mapper has no default value.
      // _tp has no default value.
      // _ba has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_integer tmp8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,6) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmp8 = mmc_unbox_integer(tmpMeta7);
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,11,4) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          
          _inDFuncName = tmpMeta6;
          _derivativeOrder = tmp8  /* pattern as ty=Integer */;
          _cr = tmpMeta9;
          _funcArg = tmpMeta10;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(((modelica_integer) 1) == _derivativeOrder)) goto tmp3_end;
          _tplst = omc_List_map(threadData, _funcArg, boxvar_Types_funcArgType);

          _ba = omc_Array_mapList(threadData, _tplst, boxvar_Differentiate_diffableTypes);

          _bl = omc_Differentiate_checkDerFunctionConds(threadData, _ba, _cr, _expl, _inDiffArgs);
          tmpMeta[0+0] = _inDFuncName;
          tmpMeta[0+1] = _bl;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_integer tmp13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,6) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmp13 = mmc_unbox_integer(tmpMeta12);
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 4));
          _inDFuncName = tmpMeta11;
          _derivativeOrder = tmp13  /* pattern as ty=Integer */;
          _cr = tmpMeta14;
          _tp = tmp4_2;
          _functions = tmpMeta15;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(!(((modelica_integer) 1) == _derivativeOrder))) goto tmp3_end;
          _fname = omc_Differentiate_getlowerOrderDerivative(threadData, _inFuncName, _functions);

          _mapper = omc_Differentiate_getFunctionMapper(threadData, _fname, _functions ,&_tp);

          omc_Differentiate_differentiateFunction1(threadData, _fname, _mapper, _tp, _expl, _inDiffArgs ,&_blst);

          _bl = omc_List_split1OnTrue(threadData, _blst, boxvar_valueEq, mmc_mk_boolean(1 /* true */), NULL);

          _ba = arrayAppend(arrayCreate(listLength(_blst), mmc_mk_boolean(0 /* false */)), listArray(_bl));

          _bl = omc_Differentiate_checkDerFunctionConds(threadData, _ba, _cr, _expl, _inDiffArgs);
          tmpMeta[0+0] = _inDFuncName;
          tmpMeta[0+1] = _bl;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_integer tmp18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,6) == 0) goto tmp3_end;
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmp18 = mmc_unbox_integer(tmpMeta17);
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
          if (optionNone(tmpMeta19)) goto tmp3_end;
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 1));
          tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
          
          _fname = tmpMeta16;
          _derivativeOrder = tmp18  /* pattern as ty=Integer */;
          _default = tmpMeta20;
          _lowerOrderDerivatives = tmpMeta21;
          _tp = tmp4_2;
          /* Pattern matching succeeded */
          tmpMeta22 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta23 = mmc_mk_box7(5, &DAE_FunctionDefinition_FUNCTION__DER__MAPPER__desc, _fname, _default, mmc_mk_integer(_derivativeOrder), tmpMeta22, mmc_mk_some(_default), _lowerOrderDerivatives);
          tmpMeta[0+0] = omc_Differentiate_differentiateFunction1(threadData, _inFuncName, tmpMeta23, _tp, _expl, _inDiffArgs, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outFuncName = tmpMeta[0+0];
  _blst = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_blst) { *out_blst = _blst; }
  return _outFuncName;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateElementVars(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype _inElementsDer, modelica_metatype _inElementsNoDer, modelica_metatype _inBooleanLst, modelica_integer _maxIter, modelica_boolean _elementListInputs, modelica_metatype *out_outFunctionTree, modelica_metatype *out_outElementsNoDer, modelica_metatype *out_outBooleanLst)
{
  modelica_metatype _outElements = NULL;
  modelica_metatype _outFunctionTree = NULL;
  modelica_metatype _outElementsNoDer = NULL;
  modelica_metatype _outBooleanLst = NULL;
  modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outElements has no default value.
  // _outFunctionTree has no default value.
  // _outElementsNoDer has no default value.
  // _outBooleanLst has no default value.
  
  
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inElements;
    tmp4_2 = _inInputData;
    {
      modelica_metatype _timevars = NULL;
      modelica_metatype _rest = NULL;
      modelica_metatype _vars = NULL;
      modelica_metatype _elementsNoDer = NULL;
      modelica_metatype _var = NULL;
      modelica_metatype _var1 = NULL;
      modelica_metatype _cref = NULL;
      modelica_metatype _dcref = NULL;
      modelica_metatype _crefLst = NULL;
      modelica_metatype _e = NULL;
      modelica_metatype _functions = NULL;
      modelica_metatype _tp = NULL;
      modelica_metatype _binding = NULL;
      modelica_metatype _dbinding = NULL;
      modelica_metatype _blst = NULL;
      modelica_string _matrixName = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _timevars has no default value.
      // _rest has no default value.
      // _vars has no default value.
      // _elementsNoDer has no default value.
      // _var has no default value.
      // _var1 has no default value.
      // _cref has no default value.
      // _dcref has no default value.
      // _crefLst has no default value.
      // _e has no default value.
      // _functions has no default value.
      // _tp has no default value.
      // _binding has no default value.
      // _dbinding has no default value.
      // _blst has no default value.
      // _matrixName has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 7; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          
          tmp4 += 6; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta[0+0] = listReverseInPlace(_inElementsDer);
          tmpMeta[0+1] = _inFunctionTree;
          tmpMeta[0+2] = listReverseInPlace(_inElementsNoDer);
          tmpMeta[0+3] = listReverseInPlace(_inBooleanLst);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          if (optionNone(tmpMeta6)) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta8 = MMC_CAR(tmp4_1);
          tmpMeta9 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,14) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 7));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,9,4) == 0) goto tmp3_end;
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,3,1) == 0) goto tmp3_end;
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 8));
          if (optionNone(tmpMeta13)) goto tmp3_end;
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 1));
          
          _matrixName = tmpMeta7;
          _var1 = tmpMeta8;
          _cref = tmpMeta10;
          _binding = tmpMeta14;
          _rest = tmpMeta9;
          /* Pattern matching succeeded */
          _dcref = omc_Differentiate_createDiffedCrefName(threadData, _cref, _matrixName);

          _var = omc_DAEUtil_replaceCrefInVar(threadData, _dcref, _var1);

          _dbinding = omc_Differentiate_differentiateExp(threadData, _binding, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter, NULL);

          _var = omc_DAEUtil_replaceBindungInVar(threadData, _dbinding, _var);

          tmpMeta15 = mmc_mk_cons(_var, _inElementsDer);
          _vars = tmpMeta15;

          tmpMeta16 = mmc_mk_cons(mmc_mk_boolean(1 /* true */), _inBooleanLst);
          _blst = tmpMeta16;
          tmpMeta[0+0] = omc_Differentiate_differentiateElementVars(threadData, _rest, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _vars, _inElementsNoDer, _blst, _maxIter, _elementListInputs, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3]);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          if (optionNone(tmpMeta17)) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 1));
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta19 = MMC_CAR(tmp4_1);
          tmpMeta20 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,0,14) == 0) goto tmp3_end;
          tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 2));
          tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 7));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta22,9,4) == 0) goto tmp3_end;
          tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta23,3,1) == 0) goto tmp3_end;
          
          _matrixName = tmpMeta18;
          _var1 = tmpMeta19;
          _cref = tmpMeta21;
          _rest = tmpMeta20;
          /* Pattern matching succeeded */
          _dcref = omc_Differentiate_createDiffedCrefName(threadData, _cref, _matrixName);

          _var = omc_DAEUtil_replaceCrefInVar(threadData, _dcref, _var1);

          tmpMeta24 = mmc_mk_cons(_var, _inElementsDer);
          _vars = tmpMeta24;

          tmpMeta25 = mmc_mk_cons(mmc_mk_boolean(1 /* true */), _inBooleanLst);
          _blst = tmpMeta25;
          tmpMeta[0+0] = omc_Differentiate_differentiateElementVars(threadData, _rest, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _vars, _inElementsNoDer, _blst, _maxIter, _elementListInputs, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3]);
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          if (optionNone(tmpMeta26)) goto tmp3_end;
          tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta26), 1));
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta28 = MMC_CAR(tmp4_1);
          tmpMeta29 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta28,0,14) == 0) goto tmp3_end;
          tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta28), 8));
          if (optionNone(tmpMeta30)) goto tmp3_end;
          tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta30), 1));
          
          _timevars = tmpMeta27;
          _var = tmpMeta28;
          _binding = tmpMeta31;
          _rest = tmpMeta29;
          /* Pattern matching succeeded */
          _crefLst = omc_Expression_extractCrefsFromExp(threadData, _binding);

          /* Pattern-matching tuple assignment */
          tmpMeta33 = omc_BackendVariable_getVarLst(threadData, _crefLst, _timevars, &tmpMeta32);
          if (!listEmpty(tmpMeta33)) goto goto_2;
          if (!listEmpty(tmpMeta32)) goto goto_2;

          tmpMeta34 = mmc_mk_cons(_var, _inElementsNoDer);
          _vars = tmpMeta34;

          tmpMeta35 = mmc_mk_cons(mmc_mk_boolean(0 /* false */), _inBooleanLst);
          _blst = tmpMeta35;
          tmpMeta[0+0] = omc_Differentiate_differentiateElementVars(threadData, _rest, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _inElementsDer, _vars, _blst, _maxIter, _elementListInputs, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3]);
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta36;
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          modelica_metatype tmpMeta41;
          modelica_boolean tmp42;
          modelica_metatype tmpMeta43;
          modelica_metatype tmpMeta44;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta36 = MMC_CAR(tmp4_1);
          tmpMeta37 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta36,0,14) == 0) goto tmp3_end;
          tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta36), 2));
          tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta36), 7));
          tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta36), 8));
          if (optionNone(tmpMeta40)) goto tmp3_end;
          tmpMeta41 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta40), 1));
          
          _var1 = tmpMeta36;
          _cref = tmpMeta38;
          _tp = tmpMeta39;
          _binding = tmpMeta41;
          _rest = tmpMeta37;
          /* Pattern matching succeeded */
          if(_elementListInputs)
          {
            /* Pattern-matching assignment */
            tmp42 = omc_Types_isRealOrSubTypeReal(threadData, _tp);
            if (1 /* true */ != tmp42) goto goto_2;
          }

          _e = omc_Expression_crefExp(threadData, _cref);

          _e = omc_Differentiate_differentiateCrefs(threadData, _e, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_functions);

          _dcref = omc_Expression_expCref(threadData, _e);

          _var = omc_DAEUtil_replaceCrefInVar(threadData, _dcref, _var1);

          _dbinding = omc_Differentiate_differentiateExp(threadData, _binding, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_functions);

          _var = omc_DAEUtil_replaceBindungInVar(threadData, _dbinding, _var);

          tmpMeta43 = mmc_mk_cons(_var, _inElementsDer);
          _vars = tmpMeta43;

          tmpMeta44 = mmc_mk_cons(mmc_mk_boolean(1 /* true */), _inBooleanLst);
          _blst = tmpMeta44;
          tmpMeta[0+0] = omc_Differentiate_differentiateElementVars(threadData, _rest, _inDiffwrtCref, _inInputData, _inDiffType, _functions, _vars, _inElementsNoDer, _blst, _maxIter, _elementListInputs, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3]);
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta45;
          modelica_metatype tmpMeta46;
          modelica_metatype tmpMeta47;
          modelica_metatype tmpMeta48;
          modelica_boolean tmp49;
          modelica_metatype tmpMeta50;
          modelica_metatype tmpMeta51;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta45 = MMC_CAR(tmp4_1);
          tmpMeta46 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta45,0,14) == 0) goto tmp3_end;
          tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta45), 2));
          tmpMeta48 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta45), 7));
          
          _var1 = tmpMeta45;
          _cref = tmpMeta47;
          _tp = tmpMeta48;
          _rest = tmpMeta46;
          /* Pattern matching succeeded */
          if(_elementListInputs)
          {
            /* Pattern-matching assignment */
            tmp49 = omc_Types_isRealOrSubTypeReal(threadData, _tp);
            if (1 /* true */ != tmp49) goto goto_2;
          }

          _e = omc_Expression_crefExp(threadData, _cref);

          _e = omc_Differentiate_differentiateCrefs(threadData, _e, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_functions);

          _dcref = omc_Expression_expCref(threadData, _e);

          _var = omc_DAEUtil_replaceCrefInVar(threadData, _dcref, _var1);

          tmpMeta50 = mmc_mk_cons(_var, _inElementsDer);
          _vars = tmpMeta50;

          tmpMeta51 = mmc_mk_cons(mmc_mk_boolean(1 /* true */), _inBooleanLst);
          _blst = tmpMeta51;
          tmpMeta[0+0] = omc_Differentiate_differentiateElementVars(threadData, _rest, _inDiffwrtCref, _inInputData, _inDiffType, _functions, _vars, _inElementsNoDer, _blst, _maxIter, _elementListInputs, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3]);
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta52;
          modelica_metatype tmpMeta53;
          modelica_metatype tmpMeta54;
          modelica_metatype tmpMeta55;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta52 = MMC_CAR(tmp4_1);
          tmpMeta53 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta52,0,14) == 0) goto tmp3_end;
          
          _var = tmpMeta52;
          _rest = tmpMeta53;
          /* Pattern matching succeeded */
          tmpMeta54 = mmc_mk_cons(_var, _inElementsNoDer);
          _elementsNoDer = tmpMeta54;

          tmpMeta55 = mmc_mk_cons(mmc_mk_boolean(0 /* false */), _inBooleanLst);
          _blst = tmpMeta55;
          tmpMeta[0+0] = omc_Differentiate_differentiateElementVars(threadData, _rest, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _inElementsDer, _elementsNoDer, _blst, _maxIter, _elementListInputs, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3]);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 7) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outElements = tmpMeta[0+0];
  _outFunctionTree = tmpMeta[0+1];
  _outElementsNoDer = tmpMeta[0+2];
  _outBooleanLst = tmpMeta[0+3];
  _return: OMC_LABEL_UNUSED
  if (out_outFunctionTree) { *out_outFunctionTree = _outFunctionTree; }
  if (out_outElementsNoDer) { *out_outElementsNoDer = _outElementsNoDer; }
  if (out_outBooleanLst) { *out_outBooleanLst = _outBooleanLst; }
  return _outElements;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiateElementVars(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype _inElementsDer, modelica_metatype _inElementsNoDer, modelica_metatype _inBooleanLst, modelica_metatype _maxIter, modelica_metatype _elementListInputs, modelica_metatype *out_outFunctionTree, modelica_metatype *out_outElementsNoDer, modelica_metatype *out_outBooleanLst)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _outElements = NULL;
  tmp1 = mmc_unbox_integer(_maxIter);
  tmp2 = mmc_unbox_integer(_elementListInputs);
  _outElements = omc_Differentiate_differentiateElementVars(threadData, _inElements, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _inElementsDer, _inElementsNoDer, _inBooleanLst, tmp1, tmp2, out_outFunctionTree, out_outElementsNoDer, out_outBooleanLst);
  /* skip box _outElements; list<DAE.Element> */
  /* skip box _outFunctionTree; DAE.AvlTreePathFunction.Tree */
  /* skip box _outElementsNoDer; list<DAE.Element> */
  /* skip box _outBooleanLst; list<#Boolean> */
  return _outElements;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_getFunctionInOutVars(threadData_t *threadData, modelica_metatype _inFunction, modelica_metatype _inFunctionTree, modelica_metatype _inDiffwrtCref, modelica_integer _maxIter, modelica_metatype *out_inputVarsDer, modelica_metatype *out_inputVarsNoDer, modelica_metatype *out_outputVarsDer, modelica_metatype *out_outputVarsNoDer, modelica_metatype *out_blst)
{
  modelica_metatype _functions = NULL;
  modelica_metatype _inputVarsDer = NULL;
  modelica_metatype _inputVarsNoDer = NULL;
  modelica_metatype _outputVarsDer = NULL;
  modelica_metatype _outputVarsNoDer = NULL;
  modelica_metatype _blst = NULL;
  modelica_metatype _inputVars = NULL;
  modelica_metatype _outputVars = NULL;
  modelica_metatype _diffData = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _functions = _inFunctionTree;
  // _inputVarsDer has no default value.
  // _inputVarsNoDer has no default value.
  // _outputVarsDer has no default value.
  // _outputVarsNoDer has no default value.
  // _blst has no default value.
  // _inputVars has no default value.
  // _outputVars has no default value.
  // _diffData has no default value.
  _inputVars = omc_DAEUtil_getFunctionInputVars(threadData, _inFunction);

  _outputVars = omc_DAEUtil_getFunctionOutputVars(threadData, _inFunction);

  _diffData = _OMC_LIT28;

  tmpMeta1 = MMC_TAGPTR(mmc_alloc_words(10));
  memcpy(MMC_UNTAGPTR(tmpMeta1), MMC_UNTAGPTR(_diffData), 10*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta1))[8] = mmc_mk_some(omc_BackendUtil_modelicaStringToCStr(threadData, omc_AbsynUtil_pathString(threadData, omc_DAEUtil_functionName(threadData, _inFunction), _OMC_LIT23, 1 /* true */, 0 /* false */), 0 /* false */));
  _diffData = tmpMeta1;

  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
  _inputVarsDer = omc_Differentiate_differentiateElementVars(threadData, _inputVars, _inDiffwrtCref, _diffData, _OMC_LIT29, _functions, tmpMeta2, tmpMeta3, tmpMeta4, _maxIter, 1 /* true */ ,&_functions ,&_inputVarsNoDer ,&_blst);

  tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
  _outputVarsDer = omc_Differentiate_differentiateElementVars(threadData, _outputVars, _inDiffwrtCref, _diffData, _OMC_LIT29, _functions, tmpMeta5, tmpMeta6, tmpMeta7, _maxIter, 0 /* false */ ,&_functions ,&_outputVarsNoDer ,NULL);
  _return: OMC_LABEL_UNUSED
  if (out_inputVarsDer) { *out_inputVarsDer = _inputVarsDer; }
  if (out_inputVarsNoDer) { *out_inputVarsNoDer = _inputVarsNoDer; }
  if (out_outputVarsDer) { *out_outputVarsDer = _outputVarsDer; }
  if (out_outputVarsNoDer) { *out_outputVarsNoDer = _outputVarsNoDer; }
  if (out_blst) { *out_blst = _blst; }
  return _functions;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_getFunctionInOutVars(threadData_t *threadData, modelica_metatype _inFunction, modelica_metatype _inFunctionTree, modelica_metatype _inDiffwrtCref, modelica_metatype _maxIter, modelica_metatype *out_inputVarsDer, modelica_metatype *out_inputVarsNoDer, modelica_metatype *out_outputVarsDer, modelica_metatype *out_outputVarsNoDer, modelica_metatype *out_blst)
{
  modelica_integer tmp1;
  modelica_metatype _functions = NULL;
  tmp1 = mmc_unbox_integer(_maxIter);
  _functions = omc_Differentiate_getFunctionInOutVars(threadData, _inFunction, _inFunctionTree, _inDiffwrtCref, tmp1, out_inputVarsDer, out_inputVarsNoDer, out_outputVarsDer, out_outputVarsNoDer, out_blst);
  /* skip box _functions; DAE.AvlTreePathFunction.Tree */
  /* skip box _inputVarsDer; list<DAE.Element> */
  /* skip box _inputVarsNoDer; list<DAE.Element> */
  /* skip box _outputVarsDer; list<DAE.Element> */
  /* skip box _outputVarsNoDer; list<DAE.Element> */
  /* skip box _blst; list<#Boolean> */
  return _functions;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_getDiffedTypeandName(threadData_t *threadData, modelica_metatype _inFunction, modelica_metatype _inputVarsDer, modelica_metatype _outputVarsDer, modelica_metatype _blst, modelica_metatype *out_diffedType)
{
  modelica_metatype _diffedName = NULL;
  modelica_metatype _diffedType = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _diffedName has no default value.
  // _diffedType has no default value.
  _diffedType = omc_Types_extendsFunctionTypeArgs(threadData, omc_DAEUtil_getFunctionType(threadData, _inFunction), _inputVarsDer, _outputVarsDer, _blst);

  tmpMeta1 = stringAppend(_OMC_LIT30,omc_BackendUtil_modelicaStringToCStr(threadData, omc_AbsynUtil_pathString(threadData, omc_DAEUtil_functionName(threadData, _inFunction), _OMC_LIT23, 1 /* true */, 0 /* false */), 0 /* false */));
  _diffedName = omc_AbsynUtil_stringPath(threadData, tmpMeta1);
  _return: OMC_LABEL_UNUSED
  if (out_diffedType) { *out_diffedType = _diffedType; }
  return _diffedName;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiatePartialFunction(threadData_t *threadData, modelica_metatype _inFunction, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_integer _maxIter, modelica_metatype *out_outFunctionTree, modelica_metatype *out_outBooleanlst)
{
  modelica_metatype _outDerFunction = NULL;
  modelica_metatype _outFunctionTree = NULL;
  modelica_metatype _outBooleanlst = NULL;
  modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDerFunction has no default value.
  // _outFunctionTree has no default value.
  // _outBooleanlst has no default value.
  
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _inFunction;
    {
      modelica_metatype _inputData = NULL;
      modelica_metatype _diffFuncData = NULL;
      modelica_metatype _path = NULL;
      modelica_metatype _dpath = NULL;
      modelica_boolean _isImpure;
      modelica_metatype _dinl = NULL;
      modelica_metatype _functions = NULL;
      modelica_metatype _dtp = NULL;
      modelica_string _str = NULL;
      modelica_metatype _funcbodyDer = NULL;
      modelica_metatype _inputVars = NULL;
      modelica_metatype _inputVarsNoDer = NULL;
      modelica_metatype _inputVarsDer = NULL;
      modelica_metatype _outputVars = NULL;
      modelica_metatype _outputVarsNoDer = NULL;
      modelica_metatype _outputVarsDer = NULL;
      modelica_metatype _protectedVars = NULL;
      modelica_metatype _protectedVarsNoDer = NULL;
      modelica_metatype _protectedVarsDer = NULL;
      modelica_metatype _newProtectedVars = NULL;
      modelica_metatype _bodyStmts = NULL;
      modelica_metatype _derbodyStmts = NULL;
      modelica_metatype _func = NULL;
      modelica_metatype _dfunc = NULL;
      modelica_string _funcname = NULL;
      modelica_string _funstring = NULL;
      modelica_metatype _blst = NULL;
      modelica_metatype _visibility = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _inputData has no default value.
      // _diffFuncData has no default value.
      // _path has no default value.
      // _dpath has no default value.
      // _isImpure has no default value.
      // _dinl has no default value.
      // _functions has no default value.
      // _dtp has no default value.
      // _str has no default value.
      // _funcbodyDer has no default value.
      // _inputVars has no default value.
      // _inputVarsNoDer has no default value.
      // _inputVarsDer has no default value.
      // _outputVars has no default value.
      // _outputVarsNoDer has no default value.
      // _outputVarsDer has no default value.
      // _protectedVars has no default value.
      // _protectedVarsNoDer has no default value.
      // _protectedVarsDer has no default value.
      // _newProtectedVars has no default value.
      // _bodyStmts has no default value.
      // _derbodyStmts has no default value.
      // _func has no default value.
      // _dfunc has no default value.
      // _funcname has no default value.
      // _funstring has no default value.
      // _blst has no default value.
      // _visibility has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          
          _func = tmp4_1;
          /* Pattern matching succeeded */
          if(omc_Flags_isSet(threadData, _OMC_LIT36))
          {
            _funstring = omc_Tpl_tplString(threadData, boxvar_DAEDumpTpl_dumpFunction, _func);

            tmpMeta6 = stringAppend(_OMC_LIT31,_funstring);
            tmpMeta7 = stringAppend(tmpMeta6,_OMC_LIT32);
            fputs(MMC_STRINGDATA(tmpMeta7),stdout);
          }

          _inputVars = omc_DAEUtil_getFunctionInputVars(threadData, _func);

          _outputVars = omc_DAEUtil_getFunctionOutputVars(threadData, _func);

          _protectedVars = omc_DAEUtil_getFunctionProtectedVars(threadData, _func);

          _bodyStmts = omc_DAEUtil_getFunctionAlgorithmStmts(threadData, _func);

          _visibility = omc_DAEUtil_getFunctionVisibility(threadData, _func);

          _functions = omc_Differentiate_getFunctionInOutVars(threadData, _func, _inFunctionTree, _inDiffwrtCref, _maxIter ,&_inputVarsDer ,&_inputVarsNoDer ,&_outputVarsDer ,&_outputVarsNoDer ,&_blst);

          _path = omc_DAEUtil_functionName(threadData, _func);

          _funcname = omc_BackendUtil_modelicaStringToCStr(threadData, omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT23, 1 /* true */, 0 /* false */), 0 /* false */);

          _diffFuncData = _OMC_LIT28;

          tmpMeta8 = MMC_TAGPTR(mmc_alloc_words(10));
          memcpy(MMC_UNTAGPTR(tmpMeta8), MMC_UNTAGPTR(_diffFuncData), 10*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta8))[8] = mmc_mk_some(_funcname);
          _diffFuncData = tmpMeta8;

          tmpMeta9 = MMC_TAGPTR(mmc_alloc_words(10));
          memcpy(MMC_UNTAGPTR(tmpMeta9), MMC_UNTAGPTR(_diffFuncData), 10*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta9))[9] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inInputData), 9)));
          _diffFuncData = tmpMeta9;

          _inputData = omc_Differentiate_addElementVars2Dep(threadData, _inputVarsNoDer, _functions, _diffFuncData, NULL);

          _inputData = omc_Differentiate_addElementVars2Dep(threadData, _outputVarsNoDer, _functions, _inputData, NULL);

          tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
          _protectedVarsDer = omc_Differentiate_differentiateElementVars(threadData, _protectedVars, _inDiffwrtCref, _inputData, _OMC_LIT29, _functions, tmpMeta10, tmpMeta11, tmpMeta12, _maxIter, 0 /* false */ ,&_functions ,&_protectedVarsNoDer ,NULL);

          _inputData = omc_Differentiate_addElementVars2Dep(threadData, _protectedVarsNoDer, _functions, _inputData, NULL);

          if(omc_Flags_isSet(threadData, _OMC_LIT36))
          {
            omc_Differentiate_dumpInputData(threadData, _inputData);
          }

          tmpMeta13 = MMC_TAGPTR(mmc_alloc_words(10));
          memcpy(MMC_UNTAGPTR(tmpMeta13), MMC_UNTAGPTR(_inputData), 10*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta13))[4] = omc_Differentiate_addFunctionConstantsAndParameters(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inputData), 4))), _func);
          _inputData = tmpMeta13;

          tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
          _derbodyStmts = omc_Differentiate_differentiateStatements(threadData, listReverse(_bodyStmts), _inDiffwrtCref, _inputData, _OMC_LIT29, tmpMeta14, _functions, _maxIter ,&_functions);

          if(omc_Flags_isSet(threadData, _OMC_LIT36))
          {
            _funstring = omc_DAEDump_ppStmtListStr(threadData, _derbodyStmts, ((modelica_integer) 0));

            tmpMeta15 = stringAppend(_OMC_LIT37,_funstring);
            tmpMeta16 = stringAppend(tmpMeta15,_OMC_LIT32);
            fputs(MMC_STRINGDATA(tmpMeta16),stdout);
          }

          _dpath = omc_Differentiate_getDiffedTypeandName(threadData, _func, _inputVarsDer, _outputVarsDer, _blst ,&_dtp);

          _newProtectedVars = omc_List_map1(threadData, _outputVars, boxvar_DAEUtil_setElementVarVisibility, _OMC_LIT38);

          _newProtectedVars = omc_List_map1(threadData, _newProtectedVars, boxvar_DAEUtil_setElementVarDirection, _OMC_LIT39);

          tmpMeta18 = mmc_mk_box2(3, &DAE_Algorithm_ALGORITHM__STMTS__desc, _derbodyStmts);
          tmpMeta19 = mmc_mk_box3(19, &DAE_Element_ALGORITHM__desc, tmpMeta18, _OMC_LIT44);
          tmpMeta17 = mmc_mk_cons(tmpMeta19, MMC_REFSTRUCTLIT(mmc_nil));
          _funcbodyDer = listAppend(_newProtectedVars, tmpMeta17);

          _funcbodyDer = listAppend(_protectedVarsDer, _funcbodyDer);

          _funcbodyDer = listAppend(_protectedVars, _funcbodyDer);

          _funcbodyDer = listAppend(_outputVarsDer, _funcbodyDer);

          _funcbodyDer = listAppend(_inputVarsDer, _funcbodyDer);

          _funcbodyDer = listAppend(_inputVars, _funcbodyDer);

          _isImpure = omc_DAEUtil_getFunctionImpureAttribute(threadData, _func);

          _dinl = omc_DAEUtil_getFunctionInlineType(threadData, _func);

          tmpMeta21 = mmc_mk_box2(3, &DAE_FunctionDefinition_FUNCTION__DEF__desc, _funcbodyDer);
          tmpMeta20 = mmc_mk_cons(tmpMeta21, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta22 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta23 = mmc_mk_box11(3, &DAE_Function_FUNCTION__desc, _dpath, tmpMeta20, _dtp, _visibility, mmc_mk_boolean(0 /* false */), mmc_mk_boolean(_isImpure), _dinl, tmpMeta22, _OMC_LIT44, mmc_mk_none());
          _dfunc = tmpMeta23;
          tmpMeta[0+0] = _dfunc;
          tmpMeta[0+1] = _functions;
          tmpMeta[0+2] = _blst;
          goto tmp3_done;
        }
        case 1: {
          modelica_boolean tmp24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp24 = omc_Flags_isSet(threadData, _OMC_LIT20);
          if (1 /* true */ != tmp24) goto goto_2;

          _path = omc_DAEUtil_functionName(threadData, _inFunction);

          tmpMeta25 = stringAppend(_OMC_LIT45,omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT23, 1 /* true */, 0 /* false */));
          tmpMeta26 = stringAppend(tmpMeta25,_OMC_LIT9);
          _str = tmpMeta26;

          omc_Debug_trace(threadData, _str);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outDerFunction = tmpMeta[0+0];
  _outFunctionTree = tmpMeta[0+1];
  _outBooleanlst = tmpMeta[0+2];
  _return: OMC_LABEL_UNUSED
  if (out_outFunctionTree) { *out_outFunctionTree = _outFunctionTree; }
  if (out_outBooleanlst) { *out_outBooleanlst = _outBooleanlst; }
  return _outDerFunction;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiatePartialFunction(threadData_t *threadData, modelica_metatype _inFunction, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype _maxIter, modelica_metatype *out_outFunctionTree, modelica_metatype *out_outBooleanlst)
{
  modelica_integer tmp1;
  modelica_metatype _outDerFunction = NULL;
  tmp1 = mmc_unbox_integer(_maxIter);
  _outDerFunction = omc_Differentiate_differentiatePartialFunction(threadData, _inFunction, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, tmp1, out_outFunctionTree, out_outBooleanlst);
  /* skip box _outDerFunction; DAE.Function */
  /* skip box _outFunctionTree; DAE.AvlTreePathFunction.Tree */
  /* skip box _outBooleanlst; list<#Boolean> */
  return _outDerFunction;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_prepareArgumentsExplArray(threadData_t *threadData, modelica_metatype _inWorkLst, modelica_metatype _inArgs, modelica_integer _inCurrentArg, modelica_metatype _inAccum)
{
  modelica_metatype _outExpLstLst = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExpLstLst has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inWorkLst;
    {
      modelica_metatype _rest = NULL;
      modelica_metatype _args = NULL;
      modelica_metatype _e = NULL;
      modelica_metatype _eone = NULL;
      modelica_metatype _tp = NULL;
      modelica_metatype _dims = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _rest has no default value.
      // _args has no default value.
      // _e has no default value.
      // _eone has no default value.
      // _tp has no default value.
      // _dims has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta1 = listReverse(_inAccum);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          _e = tmpMeta6;
          _rest = tmpMeta7;
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _e);

          _dims = omc_Expression_arrayDimension(threadData, _tp);

          _eone = omc_Expression_makeOneExpression(threadData, _dims, NULL);

          _args = omc_List_set(threadData, _inArgs, _inCurrentArg, _eone);
          tmpMeta8 = mmc_mk_cons(_args, _inAccum);
          /* Tail recursive call */
          _inWorkLst = _rest;
          _inCurrentArg = ((modelica_integer) 1) + _inCurrentArg;
          _inAccum = tmpMeta8;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExpLstLst = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExpLstLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_prepareArgumentsExplArray(threadData_t *threadData, modelica_metatype _inWorkLst, modelica_metatype _inArgs, modelica_metatype _inCurrentArg, modelica_metatype _inAccum)
{
  modelica_integer tmp1;
  modelica_metatype _outExpLstLst = NULL;
  tmp1 = mmc_unbox_integer(_inCurrentArg);
  _outExpLstLst = omc_Differentiate_prepareArgumentsExplArray(threadData, _inWorkLst, _inArgs, tmp1, _inAccum);
  /* skip box _outExpLstLst; list<list<DAE.Exp>> */
  return _outExpLstLst;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_createPartialSum(threadData_t *threadData, modelica_metatype _inArgsLst, modelica_metatype _inDiff, modelica_metatype _inCall, modelica_metatype _inAccum)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _restDiff = NULL;
  modelica_metatype _de = NULL;
  modelica_metatype _res = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta29;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outExp = _inAccum;
  _restDiff = _inDiff;
  // _de has no default value.
  // _res has no default value.
  {
    modelica_metatype _expLst;
    for (tmpMeta1 = _inArgsLst; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _expLst = MMC_CAR(tmpMeta1);
      /* Pattern-matching assignment */
      tmpMeta2 = _restDiff;
      if (listEmpty(tmpMeta2)) MMC_THROW_INTERNAL();
      tmpMeta3 = MMC_CAR(tmpMeta2);
      tmpMeta4 = MMC_CDR(tmpMeta2);
      _de = tmpMeta3;
      _restDiff = tmpMeta4;

      if((!omc_Expression_isZero(threadData, _de)))
      {
        { /* match expression */
          modelica_metatype tmp8_1;
          tmp8_1 = _inCall;
          {
            modelica_metatype _path = NULL;
            modelica_metatype _attr = NULL;
            modelica_metatype _ty = NULL;
            modelica_integer _ix;
            modelica_string _name = NULL;
            int tmp8;
            // _path has no default value.
            // _attr has no default value.
            // _ty has no default value.
            // _ix has no default value.
            // _name has no default value.
            {
              switch (MMC_SWITCH_CAST(valueConstructor(tmp8_1))) {
              case 26: {
                modelica_metatype tmpMeta9;
                modelica_metatype tmpMeta10;
                modelica_metatype tmpMeta11;
                modelica_metatype tmpMeta12;
                modelica_integer tmp13;
                modelica_metatype tmpMeta14;
                modelica_metatype tmpMeta15;
                modelica_metatype tmpMeta16;
                modelica_metatype tmpMeta17;
                if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,23,4) == 0) goto tmp7_end;
                tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 2));
                if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,13,3) == 0) goto tmp7_end;
                tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
                tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 4));
                tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 3));
                tmp13 = mmc_unbox_integer(tmpMeta12);
                tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 4));
                tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 5));
                _path = tmpMeta10;
                _attr = tmpMeta11;
                _ix = tmp13  /* pattern as ty=Integer */;
                _name = tmpMeta14;
                _ty = tmpMeta15;
                /* Pattern matching succeeded */
                tmpMeta16 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _path, _expLst, _attr);
                tmpMeta17 = mmc_mk_box5(26, &DAE_Exp_RSUB__desc, tmpMeta16, mmc_mk_integer(_ix), _name, _ty);
                tmpMeta5 = tmpMeta17;
                goto tmp7_done;
              }
              case 25: {
                modelica_metatype tmpMeta18;
                modelica_metatype tmpMeta19;
                modelica_metatype tmpMeta20;
                modelica_metatype tmpMeta21;
                modelica_integer tmp22;
                modelica_metatype tmpMeta23;
                modelica_metatype tmpMeta24;
                modelica_metatype tmpMeta25;
                if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,22,3) == 0) goto tmp7_end;
                tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 2));
                if (mmc__uniontype__metarecord__typedef__equal(tmpMeta18,13,3) == 0) goto tmp7_end;
                tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
                tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 4));
                tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 3));
                tmp22 = mmc_unbox_integer(tmpMeta21);
                tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 4));
                _path = tmpMeta19;
                _attr = tmpMeta20;
                _ix = tmp22  /* pattern as ty=Integer */;
                _ty = tmpMeta23;
                /* Pattern matching succeeded */
                tmpMeta24 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _path, _expLst, _attr);
                tmpMeta25 = mmc_mk_box4(25, &DAE_Exp_TSUB__desc, tmpMeta24, mmc_mk_integer(_ix), _ty);
                tmpMeta5 = tmpMeta25;
                goto tmp7_done;
              }
              case 16: {
                modelica_metatype tmpMeta26;
                modelica_metatype tmpMeta27;
                modelica_metatype tmpMeta28;
                if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,13,3) == 0) goto tmp7_end;
                tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 2));
                tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 4));
                _path = tmpMeta26;
                _attr = tmpMeta27;
                /* Pattern matching succeeded */
                tmpMeta28 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _path, _expLst, _attr);
                tmpMeta5 = tmpMeta28;
                goto tmp7_done;
              }
              }
              goto tmp7_end;
              tmp7_end: ;
            }
            goto goto_6;
            goto_6:;
            MMC_THROW_INTERNAL();
            goto tmp7_done;
            tmp7_done:;
          }
        }
        _res = tmpMeta5;

        _res = omc_Expression_expMul(threadData, _de, _res);

        _outExp = omc_Expression_expAdd(threadData, _outExp, _res);
      }
    }
  }
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_createPartialDifferentiatedExp(threadData_t *threadData, modelica_metatype _inDiffExpl, modelica_metatype _inDiffExplZero, modelica_metatype _inOrginalExpl, modelica_metatype _inCall, modelica_integer _currentLstElement, modelica_metatype _inAccum)
{
  modelica_metatype _outExp = NULL;
  modelica_integer _i;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta21;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outExp = _inAccum;
  _i = _currentLstElement;
  {
    modelica_metatype _de;
    for (tmpMeta1 = _inDiffExpl; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _de = MMC_CAR(tmpMeta1);
      { /* match expression */
        modelica_metatype tmp5_1;modelica_metatype tmp5_2;
        tmp5_1 = _de;
        tmp5_2 = _inCall;
        {
          modelica_metatype _eone = NULL;
          modelica_metatype _eArray = NULL;
          modelica_metatype _arrayArgs = NULL;
          modelica_metatype _expl = NULL;
          modelica_metatype _expLst = NULL;
          modelica_metatype _dexpLst = NULL;
          modelica_metatype _tp = NULL;
          modelica_metatype _dims = NULL;
          modelica_boolean _b;
          modelica_metatype _path = NULL;
          modelica_metatype _attr = NULL;
          volatile mmc_switch_type tmp5;
          int tmp6;
          // _eone has no default value.
          // _eArray has no default value.
          // _arrayArgs has no default value.
          // _expl has no default value.
          // _expLst has no default value.
          // _dexpLst has no default value.
          // _tp has no default value.
          // _dims has no default value.
          // _b has no default value.
          // _path has no default value.
          // _attr has no default value.
          tmp5 = 0;
          for (; tmp5 < 3; tmp5++) {
            switch (MMC_SWITCH_CAST(tmp5)) {
            case 0: {
              modelica_metatype tmpMeta7;
              modelica_metatype tmpMeta8;
              modelica_metatype tmpMeta9;
              if (mmc__uniontype__metarecord__typedef__equal(tmp5_2,13,3) == 0) goto tmp4_end;
              tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_2), 2));
              tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_2), 4));
              
              _path = tmpMeta7;
              _attr = tmpMeta8;
              /* Pattern matching succeeded */
              /* Check guard condition after assignments */
              if (!omc_Types_isRecord(threadData, omc_Expression_typeof(threadData, _de))) goto tmp4_end;
              _dexpLst = omc_List_set(threadData, _inDiffExplZero, _i, _de);

              _expLst = listAppend(_inOrginalExpl, _dexpLst);
              tmpMeta9 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _path, _expLst, _attr);
              tmpMeta2 = tmpMeta9;
              goto tmp4_done;
            }
            case 1: {
              modelica_metatype tmpMeta10;
              modelica_metatype tmpMeta11;
              modelica_integer tmp12;
              modelica_metatype tmpMeta13;
              modelica_metatype tmpMeta14;
              modelica_metatype tmpMeta15;
              if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,16,3) == 0) goto tmp4_end;
              tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
              tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
              tmp12 = mmc_unbox_integer(tmpMeta11);
              tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 4));
              
              _tp = tmpMeta10;
              _b = tmp12  /* pattern as ty=Boolean */;
              _expl = tmpMeta13;
              /* Pattern matching succeeded */
              _eArray = listGet(_inDiffExplZero, _i);

              _dexpLst = omc_Expression_arrayElements(threadData, _eArray);

              tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
              _arrayArgs = omc_Differentiate_prepareArgumentsExplArray(threadData, _expl, _dexpLst, ((modelica_integer) 1), tmpMeta14);

              _expLst = omc_List_map2(threadData, _arrayArgs, boxvar_Expression_makeArray, _tp, mmc_mk_boolean(_b));

              {
                modelica_metatype __omcQ_24tmpVar1;
                modelica_metatype* tmp16;
                modelica_metatype tmpMeta17;
                modelica_metatype __omcQ_24tmpVar0;
                modelica_integer tmp18;
                modelica_metatype _exp_loopVar = 0;
                modelica_metatype _exp;
                _exp_loopVar = _expLst;
                tmpMeta17 = MMC_REFSTRUCTLIT(mmc_nil);
                __omcQ_24tmpVar1 = tmpMeta17; /* defaultValue */
                tmp16 = &__omcQ_24tmpVar1;
                while(1) {
                  tmp18 = 1;
                  if (!listEmpty(_exp_loopVar)) {
                    _exp = MMC_CAR(_exp_loopVar);
                    _exp_loopVar = MMC_CDR(_exp_loopVar);
                    tmp18--;
                  }
                  if (tmp18 == 0) {
                    __omcQ_24tmpVar0 = omc_List_set(threadData, _inDiffExplZero, _i, _exp);
                    *tmp16 = mmc_mk_cons(__omcQ_24tmpVar0,0);
                    tmp16 = &MMC_CDR(*tmp16);
                  } else if (tmp18 == 1) {
                    break;
                  } else {
                    goto goto_3;
                  }
                }
                *tmp16 = mmc_mk_nil();
                tmpMeta15 = __omcQ_24tmpVar1;
              }
              _arrayArgs = tmpMeta15;

              _arrayArgs = omc_List_map1r(threadData, _arrayArgs, boxvar_listAppend, _inOrginalExpl);
              tmpMeta2 = omc_Differentiate_createPartialSum(threadData, _arrayArgs, _expl, _inCall, _outExp);
              goto tmp4_done;
            }
            case 2: {
              modelica_metatype tmpMeta19;
              modelica_metatype tmpMeta20;
              
              /* Pattern matching succeeded */
              _tp = omc_Expression_typeof(threadData, _de);

              _dims = omc_Expression_arrayDimension(threadData, _tp);

              _eone = omc_Expression_makeOneExpression(threadData, _dims, NULL);

              _dexpLst = omc_List_set(threadData, _inDiffExplZero, _i, _eone);

              _expLst = listAppend(_inOrginalExpl, _dexpLst);
              tmpMeta19 = mmc_mk_cons(_expLst, MMC_REFSTRUCTLIT(mmc_nil));
              tmpMeta20 = mmc_mk_cons(_de, MMC_REFSTRUCTLIT(mmc_nil));
              tmpMeta2 = omc_Differentiate_createPartialSum(threadData, tmpMeta19, tmpMeta20, _inCall, _outExp);
              goto tmp4_done;
            }
            }
            goto tmp4_end;
            tmp4_end: ;
          }
          goto goto_3;
          goto_3:;
          MMC_THROW_INTERNAL();
          goto tmp4_done;
          tmp4_done:;
        }
      }
      _outExp = tmpMeta2;

      _i = ((modelica_integer) 1) + _i;
    }
  }
  _return: OMC_LABEL_UNUSED
  return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_createPartialDifferentiatedExp(threadData_t *threadData, modelica_metatype _inDiffExpl, modelica_metatype _inDiffExplZero, modelica_metatype _inOrginalExpl, modelica_metatype _inCall, modelica_metatype _currentLstElement, modelica_metatype _inAccum)
{
  modelica_integer tmp1;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_currentLstElement);
  _outExp = omc_Differentiate_createPartialDifferentiatedExp(threadData, _inDiffExpl, _inDiffExplZero, _inOrginalExpl, _inCall, tmp1, _inAccum);
  /* skip box _outExp; DAE.Exp */
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_createPartialArgumentsRecord(threadData_t *threadData, modelica_metatype _inTypesLst, modelica_metatype _inVarNames, modelica_metatype _inArgs, modelica_metatype _inDiffedArgs, modelica_metatype _inOrginalExpl, modelica_metatype _inCall)
{
  modelica_metatype _outExpLst = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExpLst has no default value.
  {
    modelica_metatype __omcQ_24tmpVar3;
    modelica_metatype* tmp2;
    modelica_metatype tmpMeta3;
    modelica_metatype tmpMeta4;
    modelica_metatype __omcQ_24tmpVar2;
    modelica_integer tmp5;
    modelica_metatype _tp_loopVar = 0;
    modelica_metatype _tp;
    modelica_metatype _name_loopVar = 0;
    modelica_metatype _name;
    _tp_loopVar = _inTypesLst;
    _name_loopVar = _inVarNames;
    tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar3 = tmpMeta3; /* defaultValue */
    tmp2 = &__omcQ_24tmpVar3;
    while(1) {
      tmp5 = 2;
      if (!listEmpty(_tp_loopVar)) {
        _tp = MMC_CAR(_tp_loopVar);
        _tp_loopVar = MMC_CDR(_tp_loopVar);
        tmp5--;
      }if (!listEmpty(_name_loopVar)) {
        _name = MMC_CAR(_name_loopVar);
        _name_loopVar = MMC_CDR(_name_loopVar);
        tmp5--;
      }
      if (tmp5 == 0) {
        tmpMeta4 = mmc_mk_box5(26, &DAE_Exp_RSUB__desc, _inCall, mmc_mk_integer(((modelica_integer) -1)), _name, _tp);
        __omcQ_24tmpVar2 = omc_Differentiate_createPartialArguments(threadData, _tp, _inArgs, _inDiffedArgs, _inOrginalExpl, tmpMeta4);
        *tmp2 = mmc_mk_cons(__omcQ_24tmpVar2,0);
        tmp2 = &MMC_CDR(*tmp2);
      } else if (tmp5 == 2) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp2 = mmc_mk_nil();
    tmpMeta1 = __omcQ_24tmpVar3;
  }
  _outExpLst = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExpLst;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_createPartialArgumentsTuple(threadData_t *threadData, modelica_metatype _inTypesLst, modelica_metatype _inArgs, modelica_metatype _inDiffedArgs, modelica_metatype _inOrginalExpl, modelica_metatype _inCall)
{
  modelica_metatype _outExpLst = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExpLst has no default value.
  {
    modelica_metatype __omcQ_24tmpVar5;
    modelica_metatype* tmp2;
    modelica_metatype tmpMeta3;
    modelica_metatype tmpMeta4;
    modelica_metatype __omcQ_24tmpVar4;
    modelica_integer tmp5;
    modelica_metatype _tp_loopVar = 0;
    modelica_metatype _tp;
    modelica_integer tmp6;
    modelica_integer tmp7;
    modelica_integer _number;
    _tp_loopVar = _inTypesLst;
    tmp6 = 1 /* Range step-value */;
    tmp7 = listLength(_inTypesLst) /* Range stop-value */;
    _number = ((modelica_integer) 1) /* Range start-value */;
    _number = (((modelica_integer) 1) /* Range start-value */)-tmp6;
    tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar5 = tmpMeta3; /* defaultValue */
    tmp2 = &__omcQ_24tmpVar5;
    while(1) {
      tmp5 = 2;
      if (!listEmpty(_tp_loopVar)) {
        _tp = MMC_CAR(_tp_loopVar);
        _tp_loopVar = MMC_CDR(_tp_loopVar);
        tmp5--;
      }if (tmp6 > 0 ? _number+tmp6 <= tmp7 : _number+tmp6 >= tmp7) {
        _number += tmp6;
        tmp5--;
      }
      if (tmp5 == 0) {
        tmpMeta4 = mmc_mk_box4(25, &DAE_Exp_TSUB__desc, _inCall, mmc_mk_integer(_number), _tp);
        __omcQ_24tmpVar4 = omc_Differentiate_createPartialArguments(threadData, _tp, _inArgs, _inDiffedArgs, _inOrginalExpl, tmpMeta4);
        *tmp2 = mmc_mk_cons(__omcQ_24tmpVar4,0);
        tmp2 = &MMC_CDR(*tmp2);
      } else if (tmp5 == 2) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp2 = mmc_mk_nil();
    tmpMeta1 = __omcQ_24tmpVar5;
  }
  _outExpLst = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExpLst;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_createPartialArguments(threadData_t *threadData, modelica_metatype _outputType, modelica_metatype _inArgs, modelica_metatype _inDiffedArgs, modelica_metatype _inOrginalExpl, modelica_metatype _inCall)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _outputType;
    tmp4_2 = _inCall;
    {
      modelica_metatype _path = NULL;
      modelica_metatype _rPath = NULL;
      modelica_metatype _attr = NULL;
      modelica_metatype _expLst = NULL;
      modelica_metatype _ezero = NULL;
      modelica_metatype _dims = NULL;
      modelica_metatype _tys = NULL;
      modelica_metatype _varLst = NULL;
      modelica_metatype _varNames = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _path has no default value.
      // _rPath has no default value.
      // _attr has no default value.
      // _expLst has no default value.
      // _ezero has no default value.
      // _dims has no default value.
      // _tys has no default value.
      // _varLst has no default value.
      // _varNames has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 5; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta17;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,13,3) == 0) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,4) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,3,1) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _rPath = tmpMeta7;
          _varLst = tmpMeta8;
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          {
            modelica_metatype __omcQ_24tmpVar7;
            modelica_metatype* tmp10;
            modelica_metatype tmpMeta11;
            modelica_metatype __omcQ_24tmpVar6;
            modelica_integer tmp12;
            modelica_metatype _v_loopVar = 0;
            modelica_metatype _v;
            _v_loopVar = _varLst;
            tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar7 = tmpMeta11; /* defaultValue */
            tmp10 = &__omcQ_24tmpVar7;
            while(1) {
              tmp12 = 1;
              if (!listEmpty(_v_loopVar)) {
                _v = MMC_CAR(_v_loopVar);
                _v_loopVar = MMC_CDR(_v_loopVar);
                tmp12--;
              }
              if (tmp12 == 0) {
                __omcQ_24tmpVar6 = omc_DAEUtil_varType(threadData, _v);
                *tmp10 = mmc_mk_cons(__omcQ_24tmpVar6,0);
                tmp10 = &MMC_CDR(*tmp10);
              } else if (tmp12 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp10 = mmc_mk_nil();
            tmpMeta9 = __omcQ_24tmpVar7;
          }
          _tys = tmpMeta9;

          {
            modelica_metatype __omcQ_24tmpVar9;
            modelica_metatype* tmp14;
            modelica_metatype tmpMeta15;
            modelica_string __omcQ_24tmpVar8;
            modelica_integer tmp16;
            modelica_metatype _v_loopVar = 0;
            modelica_metatype _v;
            _v_loopVar = _varLst;
            tmpMeta15 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar9 = tmpMeta15; /* defaultValue */
            tmp14 = &__omcQ_24tmpVar9;
            while(1) {
              tmp16 = 1;
              if (!listEmpty(_v_loopVar)) {
                _v = MMC_CAR(_v_loopVar);
                _v_loopVar = MMC_CDR(_v_loopVar);
                tmp16--;
              }
              if (tmp16 == 0) {
                __omcQ_24tmpVar8 = omc_DAEUtil_typeVarIdent(threadData, _v);
                *tmp14 = mmc_mk_cons(__omcQ_24tmpVar8,0);
                tmp14 = &MMC_CDR(*tmp14);
              } else if (tmp16 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp14 = mmc_mk_nil();
            tmpMeta13 = __omcQ_24tmpVar9;
          }
          _varNames = tmpMeta13;

          _expLst = omc_Differentiate_createPartialArgumentsRecord(threadData, _tys, _varNames, _inArgs, _inDiffedArgs, _inOrginalExpl, _inCall);
          tmpMeta17 = mmc_mk_box5(17, &DAE_Exp_RECORD__desc, _rPath, _expLst, _varNames, _outputType);
          tmpMeta1 = tmpMeta17;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,4) == 0) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta18,3,1) == 0) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,22,3) == 0) goto tmp3_end;
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,13,3) == 0) goto tmp3_end;
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 2));
          tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 4));
          
          _path = tmpMeta20;
          _attr = tmpMeta21;
          tmp4 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta22 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _path, listAppend(_inOrginalExpl, _inArgs), _attr);
          tmpMeta1 = tmpMeta22;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,2) == 0) goto tmp3_end;
          tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _tys = tmpMeta23;
          /* Pattern matching succeeded */
          _expLst = omc_Differentiate_createPartialArgumentsTuple(threadData, _tys, _inArgs, _inDiffedArgs, _inOrginalExpl, _inCall);
          tmpMeta24 = mmc_mk_box2(22, &DAE_Exp_TUPLE__desc, _expLst);
          tmpMeta1 = tmpMeta24;
          goto tmp3_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          _dims = omc_Expression_arrayDimension(threadData, _outputType);

          _ezero = omc_Expression_makeZeroExpression(threadData, _dims, NULL);
          tmpMeta1 = omc_Differentiate_createPartialDifferentiatedExp(threadData, _inArgs, _inDiffedArgs, _inOrginalExpl, _inCall, ((modelica_integer) 1), _ezero);
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,13,3) == 0) goto tmp3_end;
          tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          
          _path = tmpMeta25;
          _attr = tmpMeta26;
          /* Pattern matching succeeded */
          tmpMeta27 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _path, listAppend(_inOrginalExpl, _inArgs), _attr);
          tmpMeta1 = tmpMeta27;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 5) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

static modelica_metatype closure0_Differentiate_differentiateExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inDiffwrtCref, modelica_metatype inInputData, modelica_metatype inDiffType, modelica_metatype inFunctionTree, modelica_metatype tmp5)
{
  modelica_metatype maxIter = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_Differentiate_differentiateExp(thData, inExp, inDiffwrtCref, inInputData, inDiffType, inFunctionTree, maxIter, tmp5);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_tryZeroDiff(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexplist, modelica_metatype __omcQ_24in_5Ffunctions, modelica_integer _maxIter, modelica_metatype *out_functions, modelica_boolean *out_success)
{
  modelica_metatype _explist = NULL;
  modelica_metatype _functions = NULL;
  modelica_boolean _success;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _explist = __omcQ_24in_5Fexplist;
  _functions = __omcQ_24in_5Ffunctions;
  // _success has no default value.
  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp2_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta6;
          /* Pattern matching succeeded */
          tmpMeta6 = mmc_mk_box1(0, mmc_mk_integer(_maxIter));
          _explist = omc_List_map3Fold(threadData, _explist, (modelica_fnptr) mmc_mk_box2(0,closure0_Differentiate_differentiateExp,tmpMeta6), _OMC_LIT48, _OMC_LIT28, _OMC_LIT49, _functions ,&_functions);

          _success = 1 /* true */;
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          /* Pattern matching succeeded */
          tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
          _explist = tmpMeta7;

          _success = 0 /* false */;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      tmp2_done:
      (void)tmp3;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp2_done2;
      goto_1:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp3 < 2) {
        goto tmp2_top;
      }
      MMC_THROW_INTERNAL();
      tmp2_done2:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  if (out_functions) { *out_functions = _functions; }
  if (out_success) { *out_success = _success; }
  return _explist;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_tryZeroDiff(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexplist, modelica_metatype __omcQ_24in_5Ffunctions, modelica_metatype _maxIter, modelica_metatype *out_functions, modelica_metatype *out_success)
{
  modelica_integer tmp1;
  modelica_boolean _success;
  modelica_metatype _explist = NULL;
  tmp1 = mmc_unbox_integer(_maxIter);
  _explist = omc_Differentiate_tryZeroDiff(threadData, __omcQ_24in_5Fexplist, __omcQ_24in_5Ffunctions, tmp1, out_functions, &_success);
  /* skip box _explist; list<DAE.Exp> */
  /* skip box _functions; DAE.AvlTreePathFunction.Tree */
  if (out_success) { *out_success = mmc_mk_icon(_success); }
  return _explist;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_addFunctionConstantsAndParameters(threadData_t *threadData, modelica_metatype __omcQ_24in_5FknownVars_5Fopt, modelica_metatype _func)
{
  modelica_metatype _knownVars_opt = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _knownVars_opt = __omcQ_24in_5FknownVars_5Fopt;
  { /* match expression */
    modelica_metatype tmp5_1;
    tmp5_1 = _func;
    {
      modelica_metatype _body = NULL;
      modelica_metatype _var_opt = NULL;
      modelica_metatype _body_knowns = NULL;
      modelica_metatype tmpMeta3;
      volatile mmc_switch_type tmp5;
      int tmp6;
      // _body has no default value.
      // _var_opt has no default value.
      tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
      _body_knowns = tmpMeta3;
      tmp5 = 0;
      for (; tmp5 < 2; tmp5++) {
        switch (MMC_SWITCH_CAST(tmp5)) {
        case 0: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,0,10) == 0) goto tmp4_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          if (listEmpty(tmpMeta7)) goto tmp4_end;
          tmpMeta8 = MMC_CAR(tmpMeta7);
          tmpMeta9 = MMC_CDR(tmpMeta7);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,1) == 0) goto tmp4_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
          
          _body = tmpMeta10;
          /* Pattern matching succeeded */
          {
            modelica_metatype _element;
            for (tmpMeta11 = _body; !listEmpty(tmpMeta11); tmpMeta11=MMC_CDR(tmpMeta11))
            {
              _element = MMC_CAR(tmpMeta11);
              _var_opt = omc_BackendDAECreate_lowerKnownVarSingle(threadData, _element);

              if(isSome(_var_opt))
              {
                tmpMeta12 = mmc_mk_cons(omc_Util_getOption(threadData, _var_opt), _body_knowns);
                _body_knowns = tmpMeta12;
              }
            }
          }

          if(listEmpty(_body_knowns))
          {
            _knownVars_opt = _knownVars_opt;
          }
          else
          {
            if(isSome(_knownVars_opt))
            {
              _knownVars_opt = mmc_mk_some(omc_BackendVariable_addVars(threadData, _body_knowns, omc_Util_getOption(threadData, _knownVars_opt)));
            }
            else
            {
              _knownVars_opt = mmc_mk_some(omc_BackendVariable_listVar(threadData, _body_knowns));
            }
          }
          tmpMeta1 = _knownVars_opt;
          goto tmp4_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _knownVars_opt;
          goto tmp4_done;
        }
        }
        goto tmp4_end;
        tmp4_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp4_done;
      tmp4_done:;
    }
  }
  _knownVars_opt = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _knownVars_opt;
}

static modelica_metatype closure1_Differentiate_differentiateExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inDiffwrtCref, modelica_metatype inInputData, modelica_metatype inDiffType, modelica_metatype inFunctionTree, modelica_metatype tmp23)
{
  modelica_metatype maxIter = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_Differentiate_differentiateExp(thData, inExp, inDiffwrtCref, inInputData, inDiffType, inFunctionTree, maxIter, tmp23);
}static modelica_metatype closure2_Differentiate_differentiateExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inDiffwrtCref, modelica_metatype inInputData, modelica_metatype inDiffType, modelica_metatype inFunctionTree, modelica_metatype tmp26)
{
  modelica_metatype maxIter = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_Differentiate_differentiateExp(thData, inExp, inDiffwrtCref, inInputData, inDiffType, inFunctionTree, maxIter, tmp26);
}static modelica_metatype closure3_Differentiate_differentiateExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inDiffwrtCref, modelica_metatype inInputData, modelica_metatype inDiffType, modelica_metatype inFunctionTree, modelica_metatype tmp76)
{
  modelica_metatype maxIter = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_Differentiate_differentiateExp(thData, inExp, inDiffwrtCref, inInputData, inDiffType, inFunctionTree, maxIter, tmp76);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateFunctionCallPartial(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_integer _maxIter, modelica_metatype *out_outFunctionTree)
{
  modelica_metatype _outDiffedExp = NULL;
  modelica_metatype _outFunctionTree = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDiffedExp has no default value.
  // _outFunctionTree has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _inExp;
    {
      modelica_metatype _diffFuncData = NULL;
      modelica_metatype _e = NULL;
      modelica_metatype _exp = NULL;
      modelica_metatype _expl = NULL;
      modelica_metatype _expl1 = NULL;
      modelica_metatype _dexpl = NULL;
      modelica_metatype _dexplZero = NULL;
      modelica_metatype _path = NULL;
      modelica_metatype _dpath = NULL;
      modelica_boolean _b;
      modelica_boolean _c;
      modelica_boolean _isImpure;
      modelica_metatype _dinl = NULL;
      modelica_metatype _ty = NULL;
      modelica_metatype _dtp = NULL;
      modelica_metatype _functions = NULL;
      modelica_metatype _mapper = NULL;
      modelica_metatype _tp = NULL;
      modelica_metatype _blst = NULL;
      modelica_metatype _tlst = NULL;
      modelica_metatype _expBoolLst = NULL;
      modelica_string _typstring = NULL;
      modelica_string _dastring = NULL;
      modelica_string _funstring = NULL;
      modelica_string _str = NULL;
      modelica_metatype _typlststring = NULL;
      modelica_metatype _tc = NULL;
      modelica_metatype _inputVarsDer = NULL;
      modelica_metatype _outputVarsDer = NULL;
      modelica_metatype _func = NULL;
      modelica_metatype _dfunc = NULL;
      modelica_string _funcname = NULL;
      modelica_boolean _success;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _diffFuncData has no default value.
      // _e has no default value.
      // _exp has no default value.
      // _expl has no default value.
      // _expl1 has no default value.
      // _dexpl has no default value.
      // _dexplZero has no default value.
      // _path has no default value.
      // _dpath has no default value.
      // _b has no default value.
      // _c has no default value.
      // _isImpure has no default value.
      // _dinl has no default value.
      // _ty has no default value.
      // _dtp has no default value.
      // _functions has no default value.
      // _mapper has no default value.
      // _tp has no default value.
      // _blst has no default value.
      // _tlst has no default value.
      // _expBoolLst has no default value.
      // _typstring has no default value.
      // _dastring has no default value.
      // _funstring has no default value.
      // _str has no default value.
      // _typlststring has no default value.
      // _tc has no default value.
      // _inputVarsDer has no default value.
      // _outputVarsDer has no default value.
      // _func has no default value.
      // _dfunc has no default value.
      // _funcname has no default value.
      // _success has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 4; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_integer tmp11;
          modelica_metatype tmpMeta12;
          modelica_integer tmp13;
          modelica_metatype tmpMeta14;
          modelica_integer tmp15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_boolean tmp22;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
          tmp11 = mmc_unbox_integer(tmpMeta10);
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 4));
          tmp13 = mmc_unbox_integer(tmpMeta12);
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
          tmp15 = mmc_unbox_integer(tmpMeta14);
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 8));
          _path = tmpMeta6;
          _expl = tmpMeta7;
          _ty = tmpMeta9;
          _b = tmp11  /* pattern as ty=Boolean */;
          _c = tmp13  /* pattern as ty=Boolean */;
          _isImpure = tmp15  /* pattern as ty=Boolean */;
          _tc = tmpMeta16;
          /* Pattern matching succeeded */
          _mapper = omc_Differentiate_getFunctionMapper(threadData, _path, _inFunctionTree ,&_tp);

          tmpMeta17 = mmc_mk_box4(0, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree);
          _dpath = omc_Differentiate_differentiateFunction1(threadData, _path, _mapper, _tp, _expl, tmpMeta17 ,&_blst);

          /* Pattern-matching assignment */
          tmpMeta18 = omc_DAE_AvlTreePathFunction_get(threadData, _inFunctionTree, _dpath);
          if (optionNone(tmpMeta18)) goto goto_2;
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,0,10) == 0) goto goto_2;
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 4));
          tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 8));
          _dtp = tmpMeta20;
          _dinl = tmpMeta21;

          /* Pattern-matching tuple assignment */
          tmp22 = omc_Differentiate_checkDerivativeFunctionInputs(threadData, _blst, _tp, _dtp, NULL);
          if (1 /* true */ != tmp22) goto goto_2;

          _expl1 = omc_List_splitOnBoolList(threadData, _expl, _blst, NULL);

          tmpMeta24 = mmc_mk_box1(0, mmc_mk_integer(_maxIter));
          _dexpl = omc_List_map3Fold(threadData, _expl1, (modelica_fnptr) mmc_mk_box2(0,closure1_Differentiate_differentiateExp,tmpMeta24), _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree ,&_functions);

          _funcname = omc_BackendUtil_modelicaStringToCStr(threadData, omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT23, 1 /* true */, 0 /* false */), 0 /* false */);

          _diffFuncData = _OMC_LIT28;

          tmpMeta25 = MMC_TAGPTR(mmc_alloc_words(10));
          memcpy(MMC_UNTAGPTR(tmpMeta25), MMC_UNTAGPTR(_diffFuncData), 10*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta25))[8] = mmc_mk_some(_funcname);
          _diffFuncData = tmpMeta25;

          tmpMeta27 = mmc_mk_box1(0, mmc_mk_integer(_maxIter));
          _dexplZero = omc_List_map3Fold(threadData, _expl1, (modelica_fnptr) mmc_mk_box2(0,closure2_Differentiate_differentiateExp,tmpMeta27), _OMC_LIT48, _diffFuncData, _OMC_LIT49, _functions ,&_functions);

          if(omc_Flags_isSet(threadData, _OMC_LIT56))
          {
            fputs(MMC_STRINGDATA(_OMC_LIT50),stdout);

            fputs(MMC_STRINGDATA(_OMC_LIT51),stdout);

            tmpMeta28 = stringAppend(stringDelimitList(omc_List_map(threadData, _dexpl, boxvar_ExpressionDump_printExpStr), _OMC_LIT52),_OMC_LIT9);
            fputs(MMC_STRINGDATA(tmpMeta28),stdout);
          }

          tmpMeta29 = mmc_mk_box8(3, &DAE_CallAttributes_CALL__ATTR__desc, _ty, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_isImpure), mmc_mk_boolean(0 /* false */), _dinl, _tc);
          tmpMeta30 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _dpath, _expl1, tmpMeta29);
          _e = tmpMeta30;

          _e = omc_Differentiate_createPartialArguments(threadData, _ty, _dexpl, _dexplZero, _expl, _e);
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _functions;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          modelica_metatype tmpMeta37;
          modelica_boolean tmp38;
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _path = tmpMeta31;
          _expl = tmpMeta32;
          /* Pattern matching succeeded */
          _mapper = omc_Differentiate_getFunctionMapper(threadData, _path, _inFunctionTree ,&_tp);

          tmpMeta33 = mmc_mk_box4(0, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree);
          _dpath = omc_Differentiate_differentiateFunction1(threadData, _path, _mapper, _tp, _expl, tmpMeta33 ,&_blst);

          /* Pattern-matching assignment */
          tmpMeta34 = omc_DAE_AvlTreePathFunction_get(threadData, _inFunctionTree, _dpath);
          if (optionNone(tmpMeta34)) goto goto_2;
          tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta34), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta35,0,10) == 0) goto goto_2;
          tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta35), 4));
          _dtp = tmpMeta36;

          /* Pattern-matching tuple assignment */
          tmp38 = omc_Differentiate_checkDerivativeFunctionInputs(threadData, _blst, _tp, _dtp, &tmpMeta37);
          if (0 /* false */ != tmp38) goto goto_2;
          _tlst = tmpMeta37;

          _typlststring = omc_List_map(threadData, _tlst, boxvar_Types_unparseType);

          tmpMeta39 = stringAppend(_OMC_LIT9,stringDelimitList(_typlststring, _OMC_LIT57));
          _typstring = tmpMeta39;

          _dastring = omc_AbsynUtil_pathString(threadData, _dpath, _OMC_LIT23, 1 /* true */, 0 /* false */);

          fputs(MMC_STRINGDATA(_OMC_LIT58),stdout);

          tmpMeta40 = mmc_mk_cons(_dastring, mmc_mk_cons(_typstring, MMC_REFSTRUCTLIT(mmc_nil)));
          omc_Error_addMessage(threadData, _OMC_LIT62, tmpMeta40);
          goto goto_2;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          modelica_metatype tmpMeta44;
          modelica_metatype tmpMeta45;
          modelica_integer tmp46;
          modelica_metatype tmpMeta47;
          modelica_integer tmp48;
          modelica_metatype tmpMeta49;
          modelica_integer tmp50;
          modelica_metatype tmpMeta51;
          modelica_boolean tmp52;
          modelica_metatype tmpMeta54;
          modelica_boolean tmp55;
          modelica_metatype tmpMeta57;
          modelica_metatype tmpMeta58;
          modelica_metatype tmpMeta59;
          modelica_metatype tmpMeta60;
          modelica_metatype tmpMeta61;
          modelica_metatype tmpMeta62;
          modelica_metatype tmpMeta63;
          modelica_metatype tmpMeta64;
          modelica_metatype tmpMeta65;
          modelica_metatype tmpMeta66;
          modelica_metatype tmpMeta67;
          modelica_metatype tmpMeta68;
          modelica_metatype tmpMeta69;
          modelica_metatype tmpMeta70;
          modelica_metatype tmpMeta71;
          modelica_metatype tmpMeta72;
          modelica_metatype tmpMeta73;
          modelica_metatype tmpMeta74;
          modelica_metatype tmpMeta75;
          modelica_metatype tmpMeta77;
          modelica_metatype tmpMeta78;
          modelica_metatype tmpMeta79;
          modelica_metatype tmpMeta80;
          modelica_metatype tmpMeta81;
          modelica_metatype tmpMeta82;
          modelica_metatype tmpMeta83;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta41 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta42 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta43 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta44 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta43), 2));
          tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta43), 3));
          tmp46 = mmc_unbox_integer(tmpMeta45);
          tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta43), 4));
          tmp48 = mmc_unbox_integer(tmpMeta47);
          if (0 /* false */ != tmp48) goto tmp3_end;
          tmpMeta49 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta43), 5));
          tmp50 = mmc_unbox_integer(tmpMeta49);
          tmpMeta51 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta43), 8));
          _e = tmp4_1;
          _path = tmpMeta41;
          _expl = tmpMeta42;
          _ty = tmpMeta44;
          _b = tmp46  /* pattern as ty=Boolean */;
          _isImpure = tmp50  /* pattern as ty=Boolean */;
          _tc = tmpMeta51;
          /* Pattern matching succeeded */
          tmp52 = 0; /* begin failure */
          MMC_TRY_INTERNAL(mmc_jumper)
            /* Pattern-matching assignment */
            tmpMeta54 = _inDiffType;
            if (mmc__uniontype__metarecord__typedef__equal(tmpMeta54,1,0) == 0) goto goto_53;
            tmp52 = 1;
          goto goto_53;
          goto_53:;
          MMC_CATCH_INTERNAL(mmc_jumper)
          if (tmp52) {goto goto_2;} /* end failure */

          tmp55 = 0; /* begin failure */
          MMC_TRY_INTERNAL(mmc_jumper)
            /* Pattern-matching assignment */
            tmpMeta57 = _inDiffType;
            if (mmc__uniontype__metarecord__typedef__equal(tmpMeta57,3,0) == 0) goto goto_56;
            tmp55 = 1;
          goto goto_56;
          goto_56:;
          MMC_CATCH_INTERNAL(mmc_jumper)
          if (tmp55) {goto goto_2;} /* end failure */

          /* Pattern-matching assignment */
          tmpMeta58 = omc_DAE_AvlTreePathFunction_get(threadData, _inFunctionTree, _path);
          if (optionNone(tmpMeta58)) goto goto_2;
          tmpMeta59 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta58), 1));
          _func = tmpMeta59;

          if((!omc_AvlSetPath_hasKey(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inInputData), 9))), _path)))
          {
            tmpMeta60 = MMC_TAGPTR(mmc_alloc_words(10));
            memcpy(MMC_UNTAGPTR(tmpMeta60), MMC_UNTAGPTR(_inInputData), 10*sizeof(modelica_metatype));
            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta60))[9] = omc_AvlSetPath_add(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inInputData), 9))), _path);
            _inInputData = tmpMeta60;

            _dfunc = omc_Differentiate_differentiatePartialFunction(threadData, _func, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_functions ,&_blst);

            _dpath = omc_DAEUtil_functionName(threadData, _dfunc);

            /* Pattern-matching assignment */
            tmpMeta61 = omc_DAEUtil_getFunctionType(threadData, _dfunc);
            if (mmc__uniontype__metarecord__typedef__equal(tmpMeta61,11,4) == 0) goto goto_2;
            tmpMeta62 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta61), 3));
            _dtp = tmpMeta62;

            if(omc_Flags_isSet(threadData, _OMC_LIT36))
            {
              _funstring = omc_Tpl_tplString(threadData, boxvar_DAEDumpTpl_dumpFunction, _dfunc);

              tmpMeta63 = stringAppend(_OMC_LIT63,_funstring);
              tmpMeta64 = stringAppend(tmpMeta63,_OMC_LIT32);
              fputs(MMC_STRINGDATA(tmpMeta64),stdout);
            }

            tmpMeta65 = mmc_mk_cons(_dfunc, MMC_REFSTRUCTLIT(mmc_nil));
            _functions = omc_DAEUtil_addDaeFunction(threadData, tmpMeta65, _functions);

            tmpMeta66 = MMC_REFSTRUCTLIT(mmc_nil);
            tmpMeta67 = MMC_REFSTRUCTLIT(mmc_nil);
            tmpMeta68 = mmc_mk_box7(5, &DAE_FunctionDefinition_FUNCTION__DER__MAPPER__desc, _path, _dpath, mmc_mk_integer(((modelica_integer) 1)), tmpMeta66, mmc_mk_none(), tmpMeta67);
            _func = omc_DAEUtil_addFunctionDefinition(threadData, _func, tmpMeta68);

            _functions = omc_DAE_AvlTreePathFunction_add(threadData, _functions, _path, mmc_mk_some(_func), boxvar_DAE_AvlTreePathFunction_addConflictDefault);
          }
          else
          {
            _functions = omc_Differentiate_getFunctionInOutVars(threadData, _func, _inFunctionTree, _inDiffwrtCref, _maxIter ,&_inputVarsDer ,NULL ,&_outputVarsDer ,NULL ,&_blst);

            _dpath = omc_Differentiate_getDiffedTypeandName(threadData, _func, _inputVarsDer, _outputVarsDer, _blst ,&_dtp);

            /* Pattern-matching assignment */
            tmpMeta69 = _dtp;
            if (mmc__uniontype__metarecord__typedef__equal(tmpMeta69,11,4) == 0) goto goto_2;
            tmpMeta70 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta69), 3));
            _dtp = tmpMeta70;
          }

          if(omc_Flags_isSet(threadData, _OMC_LIT36))
          {
            fputs(MMC_STRINGDATA(_OMC_LIT64),stdout);

            tmpMeta71 = stringAppend(stringDelimitList(omc_List_map(threadData, _expl, boxvar_ExpressionDump_printExpStr), _OMC_LIT52),_OMC_LIT9);
            fputs(MMC_STRINGDATA(tmpMeta71),stdout);

            fputs(MMC_STRINGDATA(_OMC_LIT65),stdout);

            tmpMeta72 = stringAppend(stringDelimitList(omc_List_mapMap(threadData, _expl, boxvar_Expression_typeof, boxvar_Types_printTypeStr), _OMC_LIT66),_OMC_LIT9);
            fputs(MMC_STRINGDATA(tmpMeta72),stdout);

            tmpMeta73 = stringAppend(_OMC_LIT67,omc_Types_printTypeStr(threadData, _dtp));
            tmpMeta74 = stringAppend(tmpMeta73,_OMC_LIT9);
            fputs(MMC_STRINGDATA(tmpMeta74),stdout);
          }

          _expBoolLst = omc_List_zip(threadData, _expl, _blst);

          _expBoolLst = omc_List_filterOnTrue(threadData, _expBoolLst, boxvar_Util_tuple22);

          _expl1 = omc_List_map(threadData, _expBoolLst, boxvar_Util_tuple21);

          if(omc_Flags_isSet(threadData, _OMC_LIT36))
          {
            fputs(MMC_STRINGDATA(_OMC_LIT68),stdout);

            tmpMeta75 = stringAppend(stringDelimitList(omc_List_map(threadData, _expl1, boxvar_ExpressionDump_printExpStr), _OMC_LIT52),_OMC_LIT9);
            fputs(MMC_STRINGDATA(tmpMeta75),stdout);
          }

          tmpMeta77 = mmc_mk_box1(0, mmc_mk_integer(_maxIter));
          _dexpl = omc_List_map3Fold(threadData, _expl1, (modelica_fnptr) mmc_mk_box2(0,closure3_Differentiate_differentiateExp,tmpMeta77), _inDiffwrtCref, _inInputData, _inDiffType, _functions ,&_functions);

          if(omc_Flags_isSet(threadData, _OMC_LIT36))
          {
            fputs(MMC_STRINGDATA(_OMC_LIT69),stdout);

            tmpMeta78 = stringAppend(stringDelimitList(omc_List_map(threadData, _dexpl, boxvar_ExpressionDump_printExpStr), _OMC_LIT52),_OMC_LIT9);
            fputs(MMC_STRINGDATA(tmpMeta78),stdout);
          }

          _dexplZero = omc_Differentiate_tryZeroDiff(threadData, _expl1, _functions, _maxIter ,&_functions ,&_success);

          if(_success)
          {
            tmpMeta79 = mmc_mk_box8(3, &DAE_CallAttributes_CALL__ATTR__desc, _dtp, mmc_mk_boolean(_b), mmc_mk_boolean(0 /* false */), mmc_mk_boolean(_isImpure), mmc_mk_boolean(0 /* false */), _OMC_LIT70, _tc);
            tmpMeta80 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _dpath, _dexpl, tmpMeta79);
            _e = tmpMeta80;

            _exp = omc_Differentiate_createPartialArguments(threadData, _ty, _dexpl, _dexplZero, _expl, _e);
          }
          else
          {
            tmpMeta81 = mmc_mk_box8(3, &DAE_CallAttributes_CALL__ATTR__desc, _dtp, mmc_mk_boolean(_b), mmc_mk_boolean(0 /* false */), mmc_mk_boolean(_isImpure), mmc_mk_boolean(0 /* false */), _OMC_LIT70, _tc);
            tmpMeta82 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _dpath, listAppend(_expl, _dexpl), tmpMeta81);
            _exp = tmpMeta82;
          }

          if(omc_Flags_isSet(threadData, _OMC_LIT36))
          {
            fputs(MMC_STRINGDATA(_OMC_LIT71),stdout);

            tmpMeta83 = stringAppend(omc_ExpressionDump_printExpStr(threadData, _exp),_OMC_LIT9);
            fputs(MMC_STRINGDATA(tmpMeta83),stdout);
          }
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = _functions;
          goto tmp3_done;
        }
        case 3: {
          modelica_boolean tmp84;
          modelica_metatype tmpMeta85;
          modelica_metatype tmpMeta86;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp84 = omc_Flags_isSet(threadData, _OMC_LIT20);
          if (1 /* true */ != tmp84) goto goto_2;

          tmpMeta85 = stringAppend(_OMC_LIT72,omc_ExpressionDump_printExpStr(threadData, _inExp));
          tmpMeta86 = stringAppend(tmpMeta85,_OMC_LIT9);
          _str = tmpMeta86;

          omc_Debug_trace(threadData, _str);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 4) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outDiffedExp = tmpMeta[0+0];
  _outFunctionTree = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outFunctionTree) { *out_outFunctionTree = _outFunctionTree; }
  return _outDiffedExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiateFunctionCallPartial(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype _maxIter, modelica_metatype *out_outFunctionTree)
{
  modelica_integer tmp1;
  modelica_metatype _outDiffedExp = NULL;
  tmp1 = mmc_unbox_integer(_maxIter);
  _outDiffedExp = omc_Differentiate_differentiateFunctionCallPartial(threadData, _inExp, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, tmp1, out_outFunctionTree);
  /* skip box _outDiffedExp; DAE.Exp */
  /* skip box _outFunctionTree; DAE.AvlTreePathFunction.Tree */
  return _outDiffedExp;
}

static modelica_metatype closure4_Differentiate_differentiateExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inDiffwrtCref, modelica_metatype inInputData, modelica_metatype inDiffType, modelica_metatype inFunctionTree, modelica_metatype tmp23)
{
  modelica_metatype maxIter = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_Differentiate_differentiateExp(thData, inExp, inDiffwrtCref, inInputData, inDiffType, inFunctionTree, maxIter, tmp23);
}static modelica_metatype closure5_Differentiate_differentiateExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inDiffwrtCref, modelica_metatype inInputData, modelica_metatype inDiffType, modelica_metatype inFunctionTree, modelica_metatype tmp49)
{
  modelica_metatype maxIter = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_Differentiate_differentiateExp(thData, inExp, inDiffwrtCref, inInputData, inDiffType, inFunctionTree, maxIter, tmp49);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateFunctionCall(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_integer _maxIter, modelica_metatype *out_outFunctionTree)
{
  modelica_metatype _outDiffedExp = NULL;
  modelica_metatype _outFunctionTree = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDiffedExp has no default value.
  // _outFunctionTree has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inExp;
    tmp4_2 = _inDiffType;
    {
      modelica_metatype _e = NULL;
      modelica_metatype _de = NULL;
      modelica_metatype _zero = NULL;
      modelica_metatype _expl = NULL;
      modelica_metatype _expl1 = NULL;
      modelica_metatype _dexpl = NULL;
      modelica_metatype _path = NULL;
      modelica_metatype _dpath = NULL;
      modelica_boolean _b;
      modelica_boolean _c;
      modelica_boolean _isImpure;
      modelica_metatype _dinl = NULL;
      modelica_metatype _ty = NULL;
      modelica_metatype _functions = NULL;
      modelica_metatype _mapper = NULL;
      modelica_metatype _tp = NULL;
      modelica_metatype _dtp = NULL;
      modelica_metatype _blst = NULL;
      modelica_metatype _tlst = NULL;
      modelica_string _typstring = NULL;
      modelica_string _dastring = NULL;
      modelica_metatype _typlststring = NULL;
      modelica_metatype _tc = NULL;
      modelica_metatype _attr = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e has no default value.
      // _de has no default value.
      // _zero has no default value.
      // _expl has no default value.
      // _expl1 has no default value.
      // _dexpl has no default value.
      // _path has no default value.
      // _dpath has no default value.
      // _b has no default value.
      // _c has no default value.
      // _isImpure has no default value.
      // _dinl has no default value.
      // _ty has no default value.
      // _functions has no default value.
      // _mapper has no default value.
      // _tp has no default value.
      // _dtp has no default value.
      // _blst has no default value.
      // _tlst has no default value.
      // _typstring has no default value.
      // _dastring has no default value.
      // _typlststring has no default value.
      // _tc has no default value.
      // _attr has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 8; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,0) == 0) goto tmp3_end;
          
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          /* Check guard condition after assignments */
          if (!(!omc_Expression_expHasCref(threadData, _inExp, _inDiffwrtCref))) goto tmp3_end;
          _e = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, omc_ComponentReference_crefTypeFull(threadData, _inDiffwrtCref)), NULL);
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_integer tmp11;
          modelica_metatype tmpMeta12;
          modelica_integer tmp13;
          modelica_metatype tmpMeta14;
          modelica_integer tmp15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_boolean tmp22;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
          tmp11 = mmc_unbox_integer(tmpMeta10);
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 4));
          tmp13 = mmc_unbox_integer(tmpMeta12);
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
          tmp15 = mmc_unbox_integer(tmpMeta14);
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 8));
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,0) == 0) goto tmp3_end;
          _path = tmpMeta6;
          _expl = tmpMeta7;
          _ty = tmpMeta9;
          _b = tmp11  /* pattern as ty=Boolean */;
          _c = tmp13  /* pattern as ty=Boolean */;
          _isImpure = tmp15  /* pattern as ty=Boolean */;
          _tc = tmpMeta16;
          /* Pattern matching succeeded */
          _mapper = omc_Differentiate_getFunctionMapper(threadData, _path, _inFunctionTree ,&_tp);

          tmpMeta17 = mmc_mk_box4(0, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree);
          _dpath = omc_Differentiate_differentiateFunction1(threadData, _path, _mapper, _tp, _expl, tmpMeta17 ,&_blst);

          /* Pattern-matching assignment */
          tmpMeta18 = omc_DAE_AvlTreePathFunction_get(threadData, _inFunctionTree, _dpath);
          if (optionNone(tmpMeta18)) goto goto_2;
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,0,10) == 0) goto goto_2;
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 4));
          tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 8));
          _dtp = tmpMeta20;
          _dinl = tmpMeta21;

          /* Pattern-matching tuple assignment */
          tmp22 = omc_Differentiate_checkDerivativeFunctionInputs(threadData, _blst, _tp, _dtp, NULL);
          if (1 /* true */ != tmp22) goto goto_2;

          _expl1 = omc_List_splitOnBoolList(threadData, _expl, _blst, NULL);

          tmpMeta24 = mmc_mk_box1(0, mmc_mk_integer(_maxIter));
          _dexpl = omc_List_map3Fold(threadData, _expl1, (modelica_fnptr) mmc_mk_box2(0,closure4_Differentiate_differentiateExp,tmpMeta24), _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree ,&_outFunctionTree);

          _expl1 = listAppend(_expl, _dexpl);
          tmpMeta25 = mmc_mk_box8(3, &DAE_CallAttributes_CALL__ATTR__desc, _ty, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_isImpure), mmc_mk_boolean(0 /* false */), _dinl, _tc);
          tmpMeta26 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _dpath, _expl1, tmpMeta25);
          tmpMeta[0+0] = tmpMeta26;
          tmpMeta[0+1] = _outFunctionTree;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_boolean tmp34;
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,0) == 0) goto tmp3_end;
          _path = tmpMeta27;
          _expl = tmpMeta28;
          /* Pattern matching succeeded */
          _mapper = omc_Differentiate_getFunctionMapper(threadData, _path, _inFunctionTree ,&_tp);

          tmpMeta29 = mmc_mk_box4(0, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree);
          _dpath = omc_Differentiate_differentiateFunction1(threadData, _path, _mapper, _tp, _expl, tmpMeta29 ,&_blst);

          /* Pattern-matching assignment */
          tmpMeta30 = omc_DAE_AvlTreePathFunction_get(threadData, _inFunctionTree, _dpath);
          if (optionNone(tmpMeta30)) goto goto_2;
          tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta30), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,0,10) == 0) goto goto_2;
          tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 4));
          _dtp = tmpMeta32;

          /* Pattern-matching tuple assignment */
          tmp34 = omc_Differentiate_checkDerivativeFunctionInputs(threadData, _blst, _tp, _dtp, &tmpMeta33);
          if (0 /* false */ != tmp34) goto goto_2;
          _tlst = tmpMeta33;

          _typlststring = omc_List_map(threadData, _tlst, boxvar_Types_unparseType);

          tmpMeta35 = stringAppend(_OMC_LIT9,stringDelimitList(_typlststring, _OMC_LIT57));
          _typstring = tmpMeta35;

          _dastring = omc_AbsynUtil_pathString(threadData, _dpath, _OMC_LIT23, 1 /* true */, 0 /* false */);

          fputs(MMC_STRINGDATA(_OMC_LIT58),stdout);

          tmpMeta36 = mmc_mk_cons(_dastring, mmc_mk_cons(_typstring, MMC_REFSTRUCTLIT(mmc_nil)));
          omc_Error_addMessage(threadData, _OMC_LIT62, tmpMeta36);
          goto goto_2;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          modelica_integer tmp39;
          modelica_boolean tmp40;
          modelica_metatype tmpMeta42;
          modelica_boolean tmp43;
          modelica_metatype tmpMeta44;
          modelica_metatype tmpMeta45;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 4));
          tmp39 = mmc_unbox_integer(tmpMeta38);
          if (0 /* false */ != tmp39) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp40 = 0; /* begin failure */
          MMC_TRY_INTERNAL(mmc_jumper)
            /* Pattern-matching assignment */
            tmpMeta42 = _inDiffType;
            if (mmc__uniontype__metarecord__typedef__equal(tmpMeta42,3,0) == 0) goto goto_41;
            tmp40 = 1;
          goto goto_41;
          goto_41:;
          MMC_CATCH_INTERNAL(mmc_jumper)
          if (tmp40) {goto goto_2;} /* end failure */

          /* Pattern-matching tuple assignment */
          tmpMeta44 = mmc_mk_box2(0, mmc_mk_some(_inFunctionTree), _OMC_LIT76);
          tmpMeta45 = omc_Inline_forceInlineExp(threadData, _inExp, tmpMeta44, _OMC_LIT44, NULL, &tmp43);
          _e = tmpMeta45;
          if (1 /* true */ != tmp43) goto goto_2;
          tmpMeta[0+0] = omc_Differentiate_differentiateExp(threadData, _e, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta46;
          modelica_metatype tmpMeta47;
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta50;
          modelica_metatype tmpMeta51;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta46 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta48 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          
          _e = tmp4_1;
          _path = tmpMeta46;
          _expl = tmpMeta47;
          _attr = tmpMeta48;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_Expression_isRecordCall(threadData, _e, _inFunctionTree)) goto tmp3_end;
          tmpMeta50 = mmc_mk_box1(0, mmc_mk_integer(_maxIter));
          _dexpl = omc_List_map3Fold(threadData, _expl, (modelica_fnptr) mmc_mk_box2(0,closure5_Differentiate_differentiateExp,tmpMeta50), _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree ,&_functions);
          tmpMeta51 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _path, _dexpl, _attr);
          tmpMeta[0+0] = tmpMeta51;
          tmpMeta[0+1] = _functions;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta52;
          modelica_metatype tmpMeta53;
          modelica_metatype tmpMeta54;
          modelica_metatype tmpMeta55;
          modelica_metatype tmpMeta56;
          
          _e = tmp4_1;
          /* Pattern matching succeeded */
          if(omc_Flags_isSet(threadData, _OMC_LIT56))
          {
            tmpMeta52 = stringAppend(_OMC_LIT78,omc_ComponentReference_crefStr(threadData, _inDiffwrtCref));
            tmpMeta53 = stringAppend(tmpMeta52,_OMC_LIT9);
            omc_BackendDump_debugStrExpStr(threadData, _OMC_LIT77, _e, tmpMeta53);
          }

          _de = omc_Differentiate_differentiateFunctionCallPartial(threadData, _e, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_functions);

          tmpMeta54 = mmc_mk_box2(0, mmc_mk_some(_functions), _OMC_LIT76);
          _e = omc_Inline_forceInlineExp(threadData, _de, tmpMeta54, _OMC_LIT44 ,NULL ,&_b);

          if(_b)
          {
            _de = _e;
          }

          if(omc_Flags_isSet(threadData, _OMC_LIT56))
          {
            tmpMeta55 = stringAppend(_OMC_LIT78,omc_ComponentReference_crefStr(threadData, _inDiffwrtCref));
            tmpMeta56 = stringAppend(tmpMeta55,_OMC_LIT9);
            omc_BackendDump_debugStrExpStr(threadData, _OMC_LIT79, _de, tmpMeta56);
          }
          tmpMeta[0+0] = _de;
          tmpMeta[0+1] = _functions;
          goto tmp3_done;
        }
        case 6: {
          modelica_boolean tmp57;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp57 = omc_Expression_expContains(threadData, _inExp, omc_Expression_crefExp(threadData, _inDiffwrtCref));
          if (0 /* false */ != tmp57) goto goto_2;

          _tp = omc_Expression_typeof(threadData, _inExp);

          _zero = omc_Expression_createZeroExpression(threadData, _tp);
          tmpMeta[0+0] = _zero;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 7: {
          modelica_boolean tmp58;
          modelica_metatype tmpMeta59;
          modelica_metatype tmpMeta60;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp58 = omc_Flags_isSet(threadData, _OMC_LIT20);
          if (1 /* true */ != tmp58) goto goto_2;

          tmpMeta59 = stringAppend(_OMC_LIT80,omc_ExpressionDump_printExpStr(threadData, _inExp));
          tmpMeta60 = stringAppend(tmpMeta59,_OMC_LIT9);
          omc_Debug_trace(threadData, tmpMeta60);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 8) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outDiffedExp = tmpMeta[0+0];
  _outFunctionTree = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outFunctionTree) { *out_outFunctionTree = _outFunctionTree; }
  return _outDiffedExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiateFunctionCall(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype _maxIter, modelica_metatype *out_outFunctionTree)
{
  modelica_integer tmp1;
  modelica_metatype _outDiffedExp = NULL;
  tmp1 = mmc_unbox_integer(_maxIter);
  _outDiffedExp = omc_Differentiate_differentiateFunctionCall(threadData, _inExp, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, tmp1, out_outFunctionTree);
  /* skip box _outDiffedExp; DAE.Exp */
  /* skip box _outFunctionTree; DAE.AvlTreePathFunction.Tree */
  return _outDiffedExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateBinary(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_integer _maxIter, modelica_metatype *out_outFunctionTree)
{
  modelica_metatype _outDiffedExp = NULL;
  modelica_metatype _outFunctionTree = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDiffedExp has no default value.
  // _outFunctionTree has no default value.
  
  
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inExp;
    {
      modelica_metatype _cr = NULL;
      modelica_metatype _e = NULL;
      modelica_metatype _e0 = NULL;
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _zero = NULL;
      modelica_metatype _etmp = NULL;
      modelica_metatype _de1 = NULL;
      modelica_metatype _de2 = NULL;
      modelica_metatype _funcs = NULL;
      modelica_metatype _tp = NULL;
      modelica_metatype _tp1 = NULL;
      modelica_integer _i;
      modelica_real _r;
      modelica_string _s1 = NULL;
      modelica_string _s2 = NULL;
      modelica_string _serr = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _cr has no default value.
      // _e has no default value.
      // _e0 has no default value.
      // _e1 has no default value.
      // _e2 has no default value.
      // _zero has no default value.
      // _etmp has no default value.
      // _de1 has no default value.
      // _de2 has no default value.
      // _funcs has no default value.
      // _tp has no default value.
      // _tp1 has no default value.
      // _i has no default value.
      // _r has no default value.
      // _s1 has no default value.
      // _s2 has no default value.
      // _serr has no default value.
      tmp4 = 0;
      for (; tmp4 < 23; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e1 = tmpMeta6;
          _tp = tmpMeta8;
          _e2 = tmpMeta9;
          /* Pattern matching succeeded */
          _de1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _de2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);
          tmpMeta10 = mmc_mk_box2(3, &DAE_Operator_ADD__desc, _tp);
          tmpMeta11 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _de1, tmpMeta10, _de2);
          tmpMeta[0+0] = tmpMeta11;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,7,1) == 0) goto tmp3_end;
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e1 = tmpMeta12;
          _tp = tmpMeta14;
          _e2 = tmpMeta15;
          /* Pattern matching succeeded */
          _de1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _de2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);
          tmpMeta16 = mmc_mk_box2(10, &DAE_Operator_ADD__ARR__desc, _tp);
          tmpMeta17 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _de1, tmpMeta16, _de2);
          tmpMeta[0+0] = tmpMeta17;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,12,1) == 0) goto tmp3_end;
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 2));
          tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e1 = tmpMeta18;
          _tp = tmpMeta20;
          _e2 = tmpMeta21;
          /* Pattern matching succeeded */
          _de1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _de2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);
          tmpMeta22 = mmc_mk_box2(15, &DAE_Operator_ADD__ARRAY__SCALAR__desc, _tp);
          tmpMeta23 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _de1, tmpMeta22, _de2);
          tmpMeta[0+0] = tmpMeta23;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta25,1,1) == 0) goto tmp3_end;
          tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 2));
          tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e1 = tmpMeta24;
          _tp = tmpMeta26;
          _e2 = tmpMeta27;
          /* Pattern matching succeeded */
          _de1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _de2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);
          tmpMeta28 = mmc_mk_box2(4, &DAE_Operator_SUB__desc, _tp);
          tmpMeta29 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _de1, tmpMeta28, _de2);
          tmpMeta[0+0] = tmpMeta29;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,8,1) == 0) goto tmp3_end;
          tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
          tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e1 = tmpMeta30;
          _tp = tmpMeta32;
          _e2 = tmpMeta33;
          /* Pattern matching succeeded */
          _de1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _de2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);
          tmpMeta34 = mmc_mk_box2(11, &DAE_Operator_SUB__ARR__desc, _tp);
          tmpMeta35 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _de1, tmpMeta34, _de2);
          tmpMeta[0+0] = tmpMeta35;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta36;
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          modelica_metatype tmpMeta41;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta37,13,1) == 0) goto tmp3_end;
          tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 2));
          tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e1 = tmpMeta36;
          _tp = tmpMeta38;
          _e2 = tmpMeta39;
          /* Pattern matching succeeded */
          _de1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _de2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);
          tmpMeta40 = mmc_mk_box2(16, &DAE_Operator_SUB__SCALAR__ARRAY__desc, _tp);
          tmpMeta41 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _de1, tmpMeta40, _de2);
          tmpMeta[0+0] = tmpMeta41;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          modelica_metatype tmpMeta44;
          modelica_metatype tmpMeta45;
          modelica_metatype tmpMeta46;
          modelica_metatype tmpMeta47;
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta49;
          modelica_metatype tmpMeta50;
          modelica_metatype tmpMeta51;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta42 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta43 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta43,2,1) == 0) goto tmp3_end;
          tmpMeta44 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta43), 2));
          tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e1 = tmpMeta42;
          _tp = tmpMeta44;
          _e2 = tmpMeta45;
          /* Pattern matching succeeded */
          _de1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _de2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);
          tmpMeta46 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta47 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta46, _de2);
          tmpMeta48 = mmc_mk_box2(3, &DAE_Operator_ADD__desc, _tp);
          tmpMeta49 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta50 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _de1, tmpMeta49, _e2);
          tmpMeta51 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta47, tmpMeta48, tmpMeta50);
          tmpMeta[0+0] = tmpMeta51;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta52;
          modelica_metatype tmpMeta53;
          modelica_metatype tmpMeta54;
          modelica_metatype tmpMeta55;
          modelica_metatype tmpMeta56;
          modelica_metatype tmpMeta57;
          modelica_metatype tmpMeta58;
          modelica_metatype tmpMeta59;
          modelica_metatype tmpMeta60;
          modelica_metatype tmpMeta61;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta52 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta53 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta53,9,1) == 0) goto tmp3_end;
          tmpMeta54 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta53), 2));
          tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e1 = tmpMeta52;
          _tp = tmpMeta54;
          _e2 = tmpMeta55;
          /* Pattern matching succeeded */
          _de1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _de2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);
          tmpMeta56 = mmc_mk_box2(12, &DAE_Operator_MUL__ARR__desc, _tp);
          tmpMeta57 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta56, _de2);
          tmpMeta58 = mmc_mk_box2(3, &DAE_Operator_ADD__desc, _tp);
          tmpMeta59 = mmc_mk_box2(12, &DAE_Operator_MUL__ARR__desc, _tp);
          tmpMeta60 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _de1, tmpMeta59, _e2);
          tmpMeta61 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta57, tmpMeta58, tmpMeta60);
          tmpMeta[0+0] = tmpMeta61;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta62;
          modelica_metatype tmpMeta63;
          modelica_metatype tmpMeta64;
          modelica_metatype tmpMeta65;
          modelica_metatype tmpMeta66;
          modelica_metatype tmpMeta67;
          modelica_metatype tmpMeta68;
          modelica_metatype tmpMeta69;
          modelica_metatype tmpMeta70;
          modelica_metatype tmpMeta71;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta62 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta63 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta63,11,1) == 0) goto tmp3_end;
          tmpMeta64 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta63), 2));
          tmpMeta65 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e1 = tmpMeta62;
          _tp = tmpMeta64;
          _e2 = tmpMeta65;
          /* Pattern matching succeeded */
          _de1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _de2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);
          tmpMeta66 = mmc_mk_box2(14, &DAE_Operator_MUL__ARRAY__SCALAR__desc, _tp);
          tmpMeta67 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta66, _de2);
          tmpMeta68 = mmc_mk_box2(10, &DAE_Operator_ADD__ARR__desc, _tp);
          tmpMeta69 = mmc_mk_box2(14, &DAE_Operator_MUL__ARRAY__SCALAR__desc, _tp);
          tmpMeta70 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _de1, tmpMeta69, _e2);
          tmpMeta71 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta67, tmpMeta68, tmpMeta70);
          tmpMeta[0+0] = tmpMeta71;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta72;
          modelica_metatype tmpMeta73;
          modelica_metatype tmpMeta74;
          modelica_metatype tmpMeta75;
          modelica_metatype tmpMeta76;
          modelica_metatype tmpMeta77;
          modelica_metatype tmpMeta78;
          modelica_metatype tmpMeta79;
          modelica_metatype tmpMeta80;
          modelica_metatype tmpMeta81;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta72 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta73 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta73,14,1) == 0) goto tmp3_end;
          tmpMeta74 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta73), 2));
          tmpMeta75 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e1 = tmpMeta72;
          _tp = tmpMeta74;
          _e2 = tmpMeta75;
          /* Pattern matching succeeded */
          _de1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _de2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);
          tmpMeta76 = mmc_mk_box2(17, &DAE_Operator_MUL__SCALAR__PRODUCT__desc, _tp);
          tmpMeta77 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta76, _de2);
          tmpMeta78 = mmc_mk_box2(3, &DAE_Operator_ADD__desc, _tp);
          tmpMeta79 = mmc_mk_box2(17, &DAE_Operator_MUL__SCALAR__PRODUCT__desc, _tp);
          tmpMeta80 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _de1, tmpMeta79, _e2);
          tmpMeta81 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta77, tmpMeta78, tmpMeta80);
          tmpMeta[0+0] = tmpMeta81;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta82;
          modelica_metatype tmpMeta83;
          modelica_metatype tmpMeta84;
          modelica_metatype tmpMeta85;
          modelica_metatype tmpMeta86;
          modelica_metatype tmpMeta87;
          modelica_metatype tmpMeta88;
          modelica_metatype tmpMeta89;
          modelica_metatype tmpMeta90;
          modelica_metatype tmpMeta91;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta82 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta83 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta83,15,1) == 0) goto tmp3_end;
          tmpMeta84 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta83), 2));
          tmpMeta85 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e1 = tmpMeta82;
          _tp = tmpMeta84;
          _e2 = tmpMeta85;
          /* Pattern matching succeeded */
          _de1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _de2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);
          tmpMeta86 = mmc_mk_box2(18, &DAE_Operator_MUL__MATRIX__PRODUCT__desc, _tp);
          tmpMeta87 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta86, _de2);
          tmpMeta88 = mmc_mk_box2(10, &DAE_Operator_ADD__ARR__desc, _tp);
          tmpMeta89 = mmc_mk_box2(18, &DAE_Operator_MUL__MATRIX__PRODUCT__desc, _tp);
          tmpMeta90 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _de1, tmpMeta89, _e2);
          tmpMeta91 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta87, tmpMeta88, tmpMeta90);
          tmpMeta[0+0] = tmpMeta91;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta92;
          modelica_metatype tmpMeta93;
          modelica_metatype tmpMeta94;
          modelica_metatype tmpMeta95;
          modelica_metatype tmpMeta96;
          modelica_metatype tmpMeta97;
          modelica_metatype tmpMeta98;
          modelica_metatype tmpMeta99;
          modelica_metatype tmpMeta100;
          modelica_metatype tmpMeta101;
          modelica_metatype tmpMeta102;
          modelica_metatype tmpMeta103;
          modelica_metatype tmpMeta104;
          modelica_metatype tmpMeta105;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta92 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta93 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta93,3,1) == 0) goto tmp3_end;
          tmpMeta94 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta93), 2));
          tmpMeta95 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e1 = tmpMeta92;
          _tp = tmpMeta94;
          _e2 = tmpMeta95;
          /* Pattern matching succeeded */
          _de1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _de2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);
          tmpMeta96 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta97 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _de1, tmpMeta96, _e2);
          tmpMeta98 = mmc_mk_box2(4, &DAE_Operator_SUB__desc, _tp);
          tmpMeta99 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta100 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta99, _de2);
          tmpMeta101 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta97, tmpMeta98, tmpMeta100);
          tmpMeta102 = mmc_mk_box2(6, &DAE_Operator_DIV__desc, _tp);
          tmpMeta103 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta104 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e2, tmpMeta103, _e2);
          tmpMeta105 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta101, tmpMeta102, tmpMeta104);
          tmpMeta[0+0] = tmpMeta105;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 12: {
          modelica_metatype tmpMeta106;
          modelica_metatype tmpMeta107;
          modelica_metatype tmpMeta108;
          modelica_metatype tmpMeta109;
          modelica_metatype tmpMeta110;
          modelica_metatype tmpMeta111;
          modelica_metatype tmpMeta112;
          modelica_metatype tmpMeta113;
          modelica_metatype tmpMeta114;
          modelica_metatype tmpMeta115;
          modelica_metatype tmpMeta116;
          modelica_metatype tmpMeta117;
          modelica_metatype tmpMeta118;
          modelica_metatype tmpMeta119;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta106 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta107 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta107,10,1) == 0) goto tmp3_end;
          tmpMeta108 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta107), 2));
          tmpMeta109 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e1 = tmpMeta106;
          _tp = tmpMeta108;
          _e2 = tmpMeta109;
          /* Pattern matching succeeded */
          _de1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _de2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);
          tmpMeta110 = mmc_mk_box2(12, &DAE_Operator_MUL__ARR__desc, _tp);
          tmpMeta111 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _de1, tmpMeta110, _e2);
          tmpMeta112 = mmc_mk_box2(11, &DAE_Operator_SUB__ARR__desc, _tp);
          tmpMeta113 = mmc_mk_box2(12, &DAE_Operator_MUL__ARR__desc, _tp);
          tmpMeta114 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta113, _de2);
          tmpMeta115 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta111, tmpMeta112, tmpMeta114);
          tmpMeta116 = mmc_mk_box2(13, &DAE_Operator_DIV__ARR__desc, _tp);
          tmpMeta117 = mmc_mk_box2(12, &DAE_Operator_MUL__ARR__desc, _tp);
          tmpMeta118 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e2, tmpMeta117, _e2);
          tmpMeta119 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta115, tmpMeta116, tmpMeta118);
          tmpMeta[0+0] = tmpMeta119;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 13: {
          modelica_metatype tmpMeta120;
          modelica_metatype tmpMeta121;
          modelica_metatype tmpMeta122;
          modelica_metatype tmpMeta123;
          modelica_metatype tmpMeta124;
          modelica_metatype tmpMeta125;
          modelica_metatype tmpMeta126;
          modelica_metatype tmpMeta127;
          modelica_metatype tmpMeta128;
          modelica_metatype tmpMeta129;
          modelica_metatype tmpMeta130;
          modelica_metatype tmpMeta131;
          modelica_metatype tmpMeta132;
          modelica_metatype tmpMeta133;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta120 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta121 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta121,16,1) == 0) goto tmp3_end;
          tmpMeta122 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta121), 2));
          tmpMeta123 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e1 = tmpMeta120;
          _tp = tmpMeta122;
          _e2 = tmpMeta123;
          /* Pattern matching succeeded */
          _de1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _de2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);

          _tp1 = omc_Expression_typeof(threadData, _e2);
          tmpMeta124 = mmc_mk_box2(14, &DAE_Operator_MUL__ARRAY__SCALAR__desc, _tp);
          tmpMeta125 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _de1, tmpMeta124, _e2);
          tmpMeta126 = mmc_mk_box2(11, &DAE_Operator_SUB__ARR__desc, _tp);
          tmpMeta127 = mmc_mk_box2(14, &DAE_Operator_MUL__ARRAY__SCALAR__desc, _tp);
          tmpMeta128 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta127, _de2);
          tmpMeta129 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta125, tmpMeta126, tmpMeta128);
          tmpMeta130 = mmc_mk_box2(19, &DAE_Operator_DIV__ARRAY__SCALAR__desc, _tp);
          tmpMeta131 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp1);
          tmpMeta132 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e2, tmpMeta131, _e2);
          tmpMeta133 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta129, tmpMeta130, tmpMeta132);
          tmpMeta[0+0] = tmpMeta133;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 14: {
          modelica_metatype tmpMeta134;
          modelica_metatype tmpMeta135;
          modelica_metatype tmpMeta136;
          modelica_metatype tmpMeta137;
          modelica_metatype tmpMeta138;
          modelica_metatype tmpMeta139;
          modelica_metatype tmpMeta140;
          modelica_metatype tmpMeta141;
          modelica_metatype tmpMeta142;
          modelica_metatype tmpMeta143;
          modelica_metatype tmpMeta144;
          modelica_metatype tmpMeta145;
          modelica_metatype tmpMeta146;
          modelica_metatype tmpMeta147;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta134 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta135 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta135,17,1) == 0) goto tmp3_end;
          tmpMeta136 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta135), 2));
          tmpMeta137 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e1 = tmpMeta134;
          _tp = tmpMeta136;
          _e2 = tmpMeta137;
          /* Pattern matching succeeded */
          _de1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _de2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);
          tmpMeta138 = mmc_mk_box2(14, &DAE_Operator_MUL__ARRAY__SCALAR__desc, _tp);
          tmpMeta139 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _de1, tmpMeta138, _e2);
          tmpMeta140 = mmc_mk_box2(11, &DAE_Operator_SUB__ARR__desc, _tp);
          tmpMeta141 = mmc_mk_box2(14, &DAE_Operator_MUL__ARRAY__SCALAR__desc, _tp);
          tmpMeta142 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta141, _de2);
          tmpMeta143 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta139, tmpMeta140, tmpMeta142);
          tmpMeta144 = mmc_mk_box2(13, &DAE_Operator_DIV__ARR__desc, _tp);
          tmpMeta145 = mmc_mk_box2(12, &DAE_Operator_MUL__ARR__desc, _tp);
          tmpMeta146 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e2, tmpMeta145, _e2);
          tmpMeta147 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta143, tmpMeta144, tmpMeta146);
          tmpMeta[0+0] = tmpMeta147;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 15: {
          modelica_metatype tmpMeta148;
          modelica_metatype tmpMeta149;
          modelica_metatype tmpMeta150;
          modelica_metatype tmpMeta151;
          modelica_metatype tmpMeta152;
          modelica_real tmp153;
          modelica_metatype tmpMeta154;
          modelica_metatype tmpMeta155;
          modelica_metatype tmpMeta156;
          modelica_metatype tmpMeta157;
          modelica_metatype tmpMeta158;
          modelica_metatype tmpMeta159;
          modelica_metatype tmpMeta160;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta148 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta149 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta149,4,1) == 0) goto tmp3_end;
          tmpMeta150 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta149), 2));
          tmpMeta151 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta151,1,1) == 0) goto tmp3_end;
          tmpMeta152 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta151), 2));
          tmp153 = mmc_unbox_real(tmpMeta152);
          _e1 = tmpMeta148;
          _tp = tmpMeta150;
          _e2 = tmpMeta151;
          _r = tmp153  /* pattern as ty=Real */;
          /* Pattern matching succeeded */
          _de1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _r = -1.0 + _r;

          tmpMeta154 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta155 = mmc_mk_box2(7, &DAE_Operator_POW__desc, _tp);
          tmpMeta156 = mmc_mk_box2(4, &DAE_Exp_RCONST__desc, mmc_mk_real(_r));
          tmpMeta157 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta155, tmpMeta156);
          tmpMeta158 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e2, tmpMeta154, tmpMeta157);
          tmpMeta159 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta160 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta158, tmpMeta159, _de1);
          _e = tmpMeta160;
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 16: {
          modelica_metatype tmpMeta161;
          modelica_metatype tmpMeta162;
          modelica_metatype tmpMeta163;
          modelica_metatype tmpMeta164;
          modelica_metatype tmpMeta165;
          modelica_integer tmp166;
          modelica_metatype tmpMeta167;
          modelica_metatype tmpMeta168;
          modelica_metatype tmpMeta169;
          modelica_metatype tmpMeta170;
          modelica_metatype tmpMeta171;
          modelica_metatype tmpMeta172;
          modelica_metatype tmpMeta173;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta161 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta162 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta162,4,1) == 0) goto tmp3_end;
          tmpMeta163 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta162), 2));
          tmpMeta164 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta164,0,1) == 0) goto tmp3_end;
          tmpMeta165 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta164), 2));
          tmp166 = mmc_unbox_integer(tmpMeta165);
          _e1 = tmpMeta161;
          _tp = tmpMeta163;
          _e2 = tmpMeta164;
          _i = tmp166  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          _de1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _i = ((modelica_integer) -1) + _i;

          tmpMeta167 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta168 = mmc_mk_box2(7, &DAE_Operator_POW__desc, _tp);
          tmpMeta169 = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_i));
          tmpMeta170 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta168, tmpMeta169);
          tmpMeta171 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e2, tmpMeta167, tmpMeta170);
          tmpMeta172 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta173 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta171, tmpMeta172, _de1);
          _e = tmpMeta173;
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 17: {
          modelica_metatype tmpMeta174;
          modelica_metatype tmpMeta175;
          modelica_real tmp176;
          modelica_metatype tmpMeta177;
          modelica_metatype tmpMeta178;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta174 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta174,1,1) == 0) goto tmp3_end;
          tmpMeta175 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta174), 2));
          tmp176 = mmc_unbox_real(tmpMeta175);
          if (0.0 != tmp176) goto tmp3_end;
          tmpMeta177 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta177,4,1) == 0) goto tmp3_end;
          tmpMeta178 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta177), 2));
          
          _tp = tmpMeta178;
          /* Pattern matching succeeded */
          _zero = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _zero;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 18: {
          modelica_metatype tmpMeta179;
          modelica_metatype tmpMeta180;
          modelica_real tmp181;
          modelica_metatype tmpMeta182;
          modelica_metatype tmpMeta183;
          modelica_metatype tmpMeta184;
          modelica_real tmp185;
          modelica_metatype tmpMeta186;
          modelica_metatype tmpMeta187;
          modelica_metatype tmpMeta188;
          modelica_metatype tmpMeta189;
          modelica_metatype tmpMeta190;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta179 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta179,1,1) == 0) goto tmp3_end;
          tmpMeta180 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta179), 2));
          tmp181 = mmc_unbox_real(tmpMeta180);
          tmpMeta182 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta182,4,1) == 0) goto tmp3_end;
          tmpMeta183 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta182), 2));
          tmpMeta184 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e0 = tmp4_1;
          _r = tmp181  /* pattern as ty=Real */;
          _tp = tmpMeta183;
          _e1 = tmpMeta184;
          /* Pattern matching succeeded */
          _de1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          tmp185 = _r;
          if(!(tmp185 > 0.0))
          {
            FILE_INFO info = {"",0,0,0,0,0};
            omc_assert(threadData, info, "Model error: Argument of log(r) was %g should be > 0", tmp185);
          }
          _r = log(tmp185);

          tmpMeta186 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta187 = mmc_mk_box2(4, &DAE_Exp_RCONST__desc, mmc_mk_real(_r));
          tmpMeta188 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e0, tmpMeta186, tmpMeta187);
          tmpMeta189 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta190 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta188, tmpMeta189, _de1);
          _e = tmpMeta190;
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 19: {
          modelica_metatype tmpMeta191;
          modelica_metatype tmpMeta192;
          modelica_metatype tmpMeta193;
          modelica_metatype tmpMeta194;
          modelica_metatype tmpMeta195;
          modelica_metatype tmpMeta196;
          modelica_metatype tmpMeta205;
          modelica_metatype tmpMeta206;
          modelica_metatype tmpMeta207;
          modelica_metatype tmpMeta208;
          modelica_metatype tmpMeta209;
          modelica_metatype tmpMeta210;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta191 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta192 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta192,4,1) == 0) goto tmp3_end;
          tmpMeta193 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta192), 2));
          tmpMeta194 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta194,6,2) == 0) goto tmp3_end;
          tmpMeta195 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta194), 2));
          
          _e1 = tmpMeta191;
          _tp = tmpMeta193;
          _e2 = tmpMeta194;
          _cr = tmpMeta195;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_Differentiate_isParamOrConstant(threadData, _cr, _inInputData)) goto tmp3_end;
          { /* match expression */
            modelica_metatype tmp199_1;
            tmp199_1 = _tp;
            {
              volatile mmc_switch_type tmp199;
              int tmp200;
              tmp199 = 0;
              for (; tmp199 < 2; tmp199++) {
                switch (MMC_SWITCH_CAST(tmp199)) {
                case 0: {
                  modelica_metatype tmpMeta201;
                  modelica_metatype tmpMeta202;
                  if (mmc__uniontype__metarecord__typedef__equal(tmp199_1,0,1) == 0) goto tmp198_end;
                  
                  /* Pattern matching succeeded */
                  tmpMeta201 = mmc_mk_box2(4, &DAE_Operator_SUB__desc, _tp);
                  tmpMeta202 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e2, tmpMeta201, _OMC_LIT81);
                  tmpMeta196 = tmpMeta202;
                  goto tmp198_done;
                }
                case 1: {
                  modelica_metatype tmpMeta203;
                  modelica_metatype tmpMeta204;
                  
                  /* Pattern matching succeeded */
                  tmpMeta203 = mmc_mk_box2(4, &DAE_Operator_SUB__desc, _tp);
                  tmpMeta204 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e2, tmpMeta203, _OMC_LIT83);
                  tmpMeta196 = tmpMeta204;
                  goto tmp198_done;
                }
                }
                goto tmp198_end;
                tmp198_end: ;
              }
              goto goto_197;
              goto_197:;
              goto goto_2;
              goto tmp198_done;
              tmp198_done:;
            }
          }
          _etmp = tmpMeta196;

          _de1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          tmpMeta205 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta206 = mmc_mk_box2(7, &DAE_Operator_POW__desc, _tp);
          tmpMeta207 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta206, _etmp);
          tmpMeta208 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e2, tmpMeta205, tmpMeta207);
          tmpMeta209 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta210 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta208, tmpMeta209, _de1);
          _e = tmpMeta210;
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 20: {
          modelica_metatype tmpMeta211;
          modelica_metatype tmpMeta212;
          modelica_metatype tmpMeta213;
          modelica_metatype tmpMeta214;
          modelica_metatype tmpMeta215;
          modelica_metatype tmpMeta216;
          modelica_metatype tmpMeta217;
          modelica_metatype tmpMeta218;
          modelica_metatype tmpMeta219;
          modelica_metatype tmpMeta220;
          modelica_metatype tmpMeta221;
          modelica_metatype tmpMeta222;
          modelica_metatype tmpMeta223;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta211 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta211,6,2) == 0) goto tmp3_end;
          tmpMeta212 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta211), 2));
          tmpMeta213 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta213,4,1) == 0) goto tmp3_end;
          tmpMeta214 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta213), 2));
          tmpMeta215 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e0 = tmp4_1;
          _e1 = tmpMeta211;
          _cr = tmpMeta212;
          _tp = tmpMeta214;
          _e2 = tmpMeta215;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_Differentiate_isParamOrConstant(threadData, _cr, _inInputData)) goto tmp3_end;
          _de2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          tmpMeta216 = mmc_mk_cons(_e1, MMC_REFSTRUCTLIT(mmc_nil));
          _etmp = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT84, tmpMeta216, _tp);

          tmpMeta217 = mmc_mk_box2(32, &DAE_Operator_EQUAL__desc, _tp);
          tmpMeta218 = mmc_mk_box6(14, &DAE_Exp_RELATION__desc, _e1, tmpMeta217, _OMC_LIT85, mmc_mk_integer(((modelica_integer) -1)), mmc_mk_none());
          tmpMeta219 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta220 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e0, tmpMeta219, _etmp);
          tmpMeta221 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta222 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta220, tmpMeta221, _de2);
          tmpMeta223 = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, tmpMeta218, _OMC_LIT85, tmpMeta222);
          _e = omc_Expression_addNoEventToRelations(threadData, tmpMeta223);
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 21: {
          modelica_metatype tmpMeta224;
          modelica_metatype tmpMeta225;
          modelica_metatype tmpMeta226;
          modelica_metatype tmpMeta227;
          modelica_metatype tmpMeta228;
          modelica_metatype tmpMeta229;
          modelica_metatype tmpMeta230;
          modelica_metatype tmpMeta231;
          modelica_metatype tmpMeta232;
          modelica_metatype tmpMeta233;
          modelica_metatype tmpMeta234;
          modelica_metatype tmpMeta235;
          modelica_metatype tmpMeta236;
          modelica_metatype tmpMeta237;
          modelica_metatype tmpMeta238;
          modelica_metatype tmpMeta239;
          modelica_metatype tmpMeta240;
          modelica_metatype tmpMeta241;
          modelica_metatype tmpMeta242;
          modelica_metatype tmpMeta243;
          modelica_metatype tmpMeta244;
          modelica_metatype tmpMeta245;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta224 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta225 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta225,4,1) == 0) goto tmp3_end;
          tmpMeta226 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta225), 2));
          tmpMeta227 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e1 = tmpMeta224;
          _tp = tmpMeta226;
          _e2 = tmpMeta227;
          /* Pattern matching succeeded */
          _de1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _de2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          tmpMeta228 = mmc_mk_cons(_e1, MMC_REFSTRUCTLIT(mmc_nil));
          _etmp = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT84, tmpMeta228, _tp);

          tmpMeta229 = mmc_mk_box2(32, &DAE_Operator_EQUAL__desc, _tp);
          tmpMeta230 = mmc_mk_box6(14, &DAE_Exp_RELATION__desc, _e1, tmpMeta229, _OMC_LIT85, mmc_mk_integer(((modelica_integer) -1)), mmc_mk_none());
          tmpMeta231 = mmc_mk_box2(7, &DAE_Operator_POW__desc, _tp);
          tmpMeta232 = mmc_mk_box2(4, &DAE_Operator_SUB__desc, _tp);
          tmpMeta233 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e2, tmpMeta232, _OMC_LIT83);
          tmpMeta234 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta231, tmpMeta233);
          tmpMeta235 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta236 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta237 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta236, _etmp);
          tmpMeta238 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta239 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta237, tmpMeta238, _de2);
          tmpMeta240 = mmc_mk_box2(3, &DAE_Operator_ADD__desc, _tp);
          tmpMeta241 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta242 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e2, tmpMeta241, _de1);
          tmpMeta243 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta239, tmpMeta240, tmpMeta242);
          tmpMeta244 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta234, tmpMeta235, tmpMeta243);
          tmpMeta245 = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, tmpMeta230, _OMC_LIT85, tmpMeta244);
          _e = omc_Expression_addNoEventToRelations(threadData, tmpMeta245);
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 22: {
          modelica_boolean tmp246;
          modelica_metatype tmpMeta247;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp246 = omc_Flags_isSet(threadData, _OMC_LIT20);
          if (1 /* true */ != tmp246) goto goto_2;

          _s1 = omc_ExpressionDump_printExpStr(threadData, _inExp);

          _s2 = omc_ComponentReference_printComponentRefStr(threadData, _inDiffwrtCref);

          tmpMeta247 = mmc_mk_cons(_OMC_LIT86, mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT87, mmc_mk_cons(_s2, mmc_mk_cons(_OMC_LIT88, MMC_REFSTRUCTLIT(mmc_nil))))));
          _serr = stringAppendList(tmpMeta247);

          omc_Debug_trace(threadData, _serr);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outDiffedExp = tmpMeta[0+0];
  _outFunctionTree = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outFunctionTree) { *out_outFunctionTree = _outFunctionTree; }
  return _outDiffedExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiateBinary(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype _maxIter, modelica_metatype *out_outFunctionTree)
{
  modelica_integer tmp1;
  modelica_metatype _outDiffedExp = NULL;
  tmp1 = mmc_unbox_integer(_maxIter);
  _outDiffedExp = omc_Differentiate_differentiateBinary(threadData, _inExp, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, tmp1, out_outFunctionTree);
  /* skip box _outDiffedExp; DAE.Exp */
  /* skip box _outFunctionTree; DAE.AvlTreePathFunction.Tree */
  return _outDiffedExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateCallExpNArg(threadData_t *threadData, modelica_string _name, modelica_metatype _inExpl, modelica_metatype _inAttr, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_integer _maxIter, modelica_metatype *out_outFunctionTree)
{
  modelica_metatype _outDiffedExp = NULL;
  modelica_metatype _outFunctionTree = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDiffedExp has no default value.
  // _outFunctionTree has no default value.
  
  
  { /* match expression */
    modelica_string tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
    tmp4_1 = _name;
    tmp4_2 = _inExpl;
    tmp4_3 = _inAttr;
    {
      modelica_metatype _e = NULL;
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _e3 = NULL;
      modelica_metatype _e4 = NULL;
      modelica_metatype _etmp = NULL;
      modelica_metatype _res = NULL;
      modelica_metatype _res1 = NULL;
      modelica_metatype _res2 = NULL;
      modelica_metatype _tp = NULL;
      modelica_metatype _funcs = NULL;
      modelica_integer _i;
      int tmp4;
      // _e has no default value.
      // _e1 has no default value.
      // _e2 has no default value.
      // _e3 has no default value.
      // _e4 has no default value.
      // _etmp has no default value.
      // _res has no default value.
      // _res1 has no default value.
      // _res2 has no default value.
      // _tp has no default value.
      // _funcs has no default value.
      // _i has no default value.
      {
        switch (MMC_SWITCH_CAST(stringHashDjb2Mod(tmp4_1,128))) {
        case 31 /* smooth */: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_integer tmp8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_boolean tmp14;
          modelica_metatype tmpMeta15;
          if (6 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT89), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta5 = MMC_CAR(tmp4_2);
          tmpMeta6 = MMC_CDR(tmp4_2);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta5,0,1) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 2));
          tmp8 = mmc_unbox_integer(tmpMeta7);
          if (listEmpty(tmpMeta6)) goto tmp3_end;
          tmpMeta9 = MMC_CAR(tmpMeta6);
          tmpMeta10 = MMC_CDR(tmpMeta6);
          if (!listEmpty(tmpMeta10)) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
          
          _i = tmp8  /* pattern as ty=Integer */;
          _e2 = tmpMeta9;
          _tp = tmpMeta11;
          /* Pattern matching succeeded */
          _res1 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          tmpMeta12 = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(((modelica_integer) -1) + _i));
          _e1 = tmpMeta12;

          tmp14 = (modelica_boolean)(_i >= ((modelica_integer) 1));
          if(tmp14)
          {
            tmpMeta13 = mmc_mk_cons(_e1, mmc_mk_cons(_res1, MMC_REFSTRUCTLIT(mmc_nil)));
            tmpMeta15 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT89, tmpMeta13, _tp);
          }
          else
          {
            tmpMeta15 = _res1;
          }
          _res2 = tmpMeta15;
          tmpMeta[0+0] = _res2;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 100 /* noEvent */: {
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          if (7 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT90), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta16 = MMC_CAR(tmp4_2);
          tmpMeta17 = MMC_CDR(tmp4_2);
          if (!listEmpty(tmpMeta17)) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
          
          _e1 = tmpMeta16;
          _tp = tmpMeta18;
          /* Pattern matching succeeded */
          _res1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          tmpMeta19 = mmc_mk_cons(_res1, MMC_REFSTRUCTLIT(mmc_nil));
          _res1 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT90, tmpMeta19, _tp);
          tmpMeta[0+0] = _res1;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 123 /* atan2 */: {
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          if (5 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT100), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta20 = MMC_CAR(tmp4_2);
          tmpMeta21 = MMC_CDR(tmp4_2);
          if (listEmpty(tmpMeta21)) goto tmp3_end;
          tmpMeta22 = MMC_CAR(tmpMeta21);
          tmpMeta23 = MMC_CDR(tmpMeta21);
          if (!listEmpty(tmpMeta23)) goto tmp3_end;
          tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
          
          _e = tmpMeta20;
          _e1 = tmpMeta22;
          _tp = tmpMeta24;
          /* Pattern matching succeeded */
          _e2 = omc_Expression_makeDiv(threadData, _e, _e1);

          _res1 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          tmpMeta25 = mmc_mk_box2(32, &DAE_Operator_EQUAL__desc, _tp);
          tmpMeta26 = mmc_mk_box6(14, &DAE_Exp_RELATION__desc, _e1, tmpMeta25, _OMC_LIT85, mmc_mk_integer(((modelica_integer) -1)), mmc_mk_none());
          tmpMeta27 = mmc_mk_box2(6, &DAE_Operator_DIV__desc, _tp);
          tmpMeta28 = mmc_mk_box2(3, &DAE_Operator_ADD__desc, _tp);
          tmpMeta29 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta30 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e2, tmpMeta29, _e2);
          tmpMeta31 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _OMC_LIT83, tmpMeta28, tmpMeta30);
          tmpMeta32 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _res1, tmpMeta27, tmpMeta31);
          tmpMeta33 = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, tmpMeta26, _e1, tmpMeta32);
          _res2 = omc_Expression_addNoEventToRelations(threadData, tmpMeta33);
          tmpMeta[0+0] = _res2;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 110 /* semiLinear */: {
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          if (10 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT101), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta34 = MMC_CAR(tmp4_2);
          tmpMeta35 = MMC_CDR(tmp4_2);
          if (listEmpty(tmpMeta35)) goto tmp3_end;
          tmpMeta36 = MMC_CAR(tmpMeta35);
          tmpMeta37 = MMC_CDR(tmpMeta35);
          if (listEmpty(tmpMeta37)) goto tmp3_end;
          tmpMeta38 = MMC_CAR(tmpMeta37);
          tmpMeta39 = MMC_CDR(tmpMeta37);
          if (!listEmpty(tmpMeta39)) goto tmp3_end;
          tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
          
          _e = tmpMeta34;
          _e1 = tmpMeta36;
          _e2 = tmpMeta38;
          _tp = tmpMeta40;
          /* Pattern matching succeeded */
          _res = omc_Differentiate_differentiateExp(threadData, _e, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _res1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);

          _res2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);

          _res1 = omc_Expression_expAdd(threadData, omc_Expression_expMul(threadData, _res1, _e), omc_Expression_expMul(threadData, _e1, _res));

          _res2 = omc_Expression_expAdd(threadData, omc_Expression_expMul(threadData, _res2, _e), omc_Expression_expMul(threadData, _e2, _res));

          _res = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);

          tmpMeta41 = mmc_mk_box2(31, &DAE_Operator_GREATEREQ__desc, _tp);
          tmpMeta42 = mmc_mk_box6(14, &DAE_Exp_RELATION__desc, _e, tmpMeta41, _res, mmc_mk_integer(((modelica_integer) -1)), mmc_mk_none());
          _res = tmpMeta42;
          tmpMeta43 = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, _res, _res1, _res2);
          tmpMeta[0+0] = tmpMeta43;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 47 /* cross */: {
          modelica_metatype tmpMeta44;
          modelica_metatype tmpMeta45;
          modelica_metatype tmpMeta46;
          modelica_metatype tmpMeta47;
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta49;
          modelica_metatype tmpMeta50;
          modelica_metatype tmpMeta51;
          modelica_metatype tmpMeta52;
          if (5 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT91), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta44 = MMC_CAR(tmp4_2);
          tmpMeta45 = MMC_CDR(tmp4_2);
          if (listEmpty(tmpMeta45)) goto tmp3_end;
          tmpMeta46 = MMC_CAR(tmpMeta45);
          tmpMeta47 = MMC_CDR(tmpMeta45);
          if (!listEmpty(tmpMeta47)) goto tmp3_end;
          tmpMeta48 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
          
          _e1 = tmpMeta44;
          _e2 = tmpMeta46;
          _tp = tmpMeta48;
          /* Pattern matching succeeded */
          _res1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _res2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);

          tmpMeta49 = mmc_mk_cons(_e1, mmc_mk_cons(_res2, MMC_REFSTRUCTLIT(mmc_nil)));
          _res2 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT91, tmpMeta49, _tp);

          tmpMeta50 = mmc_mk_cons(_res1, mmc_mk_cons(_e2, MMC_REFSTRUCTLIT(mmc_nil)));
          _res1 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT91, tmpMeta50, _tp);
          tmpMeta51 = mmc_mk_box2(10, &DAE_Operator_ADD__ARR__desc, _tp);
          tmpMeta52 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _res2, tmpMeta51, _res1);
          tmpMeta[0+0] = tmpMeta52;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 11 /* max */: {
          modelica_metatype tmpMeta53;
          modelica_metatype tmpMeta54;
          modelica_metatype tmpMeta55;
          modelica_metatype tmpMeta56;
          modelica_metatype tmpMeta57;
          modelica_metatype tmpMeta58;
          modelica_metatype tmpMeta59;
          modelica_metatype tmpMeta60;
          modelica_metatype tmpMeta61;
          modelica_metatype tmpMeta62;
          if (3 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT102), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta53 = MMC_CAR(tmp4_2);
          tmpMeta54 = MMC_CDR(tmp4_2);
          if (listEmpty(tmpMeta54)) goto tmp3_end;
          tmpMeta55 = MMC_CAR(tmpMeta54);
          tmpMeta56 = MMC_CDR(tmpMeta54);
          if (!listEmpty(tmpMeta56)) goto tmp3_end;
          tmpMeta57 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
          
          _e1 = tmpMeta53;
          _e2 = tmpMeta55;
          _tp = tmpMeta57;
          /* Pattern matching succeeded */
          _res1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _res2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);
          tmpMeta59 = mmc_mk_box2(30, &DAE_Operator_GREATER__desc, _tp);
          tmpMeta60 = mmc_mk_box6(14, &DAE_Exp_RELATION__desc, _e1, tmpMeta59, _e2, mmc_mk_integer(((modelica_integer) -1)), mmc_mk_none());
          tmpMeta58 = mmc_mk_cons(tmpMeta60, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta61 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _OMC_LIT92, tmpMeta58, _OMC_LIT95);
          tmpMeta62 = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, tmpMeta61, _res1, _res2);
          tmpMeta[0+0] = tmpMeta62;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 9 /* min */: {
          modelica_metatype tmpMeta63;
          modelica_metatype tmpMeta64;
          modelica_metatype tmpMeta65;
          modelica_metatype tmpMeta66;
          modelica_metatype tmpMeta67;
          modelica_metatype tmpMeta68;
          modelica_metatype tmpMeta69;
          modelica_metatype tmpMeta70;
          modelica_metatype tmpMeta71;
          modelica_metatype tmpMeta72;
          if (3 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT103), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta63 = MMC_CAR(tmp4_2);
          tmpMeta64 = MMC_CDR(tmp4_2);
          if (listEmpty(tmpMeta64)) goto tmp3_end;
          tmpMeta65 = MMC_CAR(tmpMeta64);
          tmpMeta66 = MMC_CDR(tmpMeta64);
          if (!listEmpty(tmpMeta66)) goto tmp3_end;
          tmpMeta67 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
          
          _e1 = tmpMeta63;
          _e2 = tmpMeta65;
          _tp = tmpMeta67;
          /* Pattern matching succeeded */
          _res1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          _res2 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);
          tmpMeta69 = mmc_mk_box2(28, &DAE_Operator_LESS__desc, _tp);
          tmpMeta70 = mmc_mk_box6(14, &DAE_Exp_RELATION__desc, _e1, tmpMeta69, _e2, mmc_mk_integer(((modelica_integer) -1)), mmc_mk_none());
          tmpMeta68 = mmc_mk_cons(tmpMeta70, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta71 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _OMC_LIT92, tmpMeta68, _OMC_LIT95);
          tmpMeta72 = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, tmpMeta71, _res1, _res2);
          tmpMeta[0+0] = tmpMeta72;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 72 /* div */: {
          modelica_metatype tmpMeta73;
          modelica_metatype tmpMeta74;
          modelica_metatype tmpMeta75;
          modelica_metatype tmpMeta76;
          modelica_metatype tmpMeta77;
          if (3 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT97), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta73 = MMC_CAR(tmp4_2);
          tmpMeta74 = MMC_CDR(tmp4_2);
          if (listEmpty(tmpMeta74)) goto tmp3_end;
          tmpMeta75 = MMC_CAR(tmpMeta74);
          tmpMeta76 = MMC_CDR(tmpMeta74);
          if (!listEmpty(tmpMeta76)) goto tmp3_end;
          tmpMeta77 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
          
          _tp = tmpMeta77;
          /* Pattern matching succeeded */
          _res1 = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _res1;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 69 /* mod */: {
          modelica_metatype tmpMeta78;
          modelica_metatype tmpMeta79;
          modelica_metatype tmpMeta80;
          modelica_metatype tmpMeta81;
          modelica_metatype tmpMeta82;
          modelica_metatype tmpMeta83;
          modelica_metatype tmpMeta84;
          modelica_metatype tmpMeta85;
          modelica_metatype tmpMeta86;
          modelica_metatype tmpMeta87;
          modelica_metatype tmpMeta88;
          modelica_metatype tmpMeta89;
          if (3 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT104), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta78 = MMC_CAR(tmp4_2);
          tmpMeta79 = MMC_CDR(tmp4_2);
          if (listEmpty(tmpMeta79)) goto tmp3_end;
          tmpMeta80 = MMC_CAR(tmpMeta79);
          tmpMeta81 = MMC_CDR(tmpMeta79);
          if (!listEmpty(tmpMeta81)) goto tmp3_end;
          tmpMeta82 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
          
          _e1 = tmpMeta78;
          _e2 = tmpMeta80;
          _tp = tmpMeta82;
          /* Pattern matching succeeded */
          tmpMeta84 = mmc_mk_box2(6, &DAE_Operator_DIV__desc, _tp);
          tmpMeta85 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta84, _e2);
          tmpMeta83 = mmc_mk_cons(tmpMeta85, MMC_REFSTRUCTLIT(mmc_nil));
          _etmp = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT96, tmpMeta83, _tp);

          tmpMeta86 = mmc_mk_box2(4, &DAE_Operator_SUB__desc, _tp);
          tmpMeta87 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta88 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e2, tmpMeta87, _etmp);
          tmpMeta89 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta86, tmpMeta88);
          _e = tmpMeta89;
          tmpMeta[0+0] = omc_Differentiate_differentiateExp(threadData, _e, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 73 /* rem */: {
          modelica_metatype tmpMeta90;
          modelica_metatype tmpMeta91;
          modelica_metatype tmpMeta92;
          modelica_metatype tmpMeta93;
          modelica_metatype tmpMeta94;
          modelica_metatype tmpMeta95;
          if (3 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT105), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta90 = MMC_CAR(tmp4_2);
          tmpMeta91 = MMC_CDR(tmp4_2);
          if (listEmpty(tmpMeta91)) goto tmp3_end;
          tmpMeta92 = MMC_CAR(tmpMeta91);
          tmpMeta93 = MMC_CDR(tmpMeta91);
          if (!listEmpty(tmpMeta93)) goto tmp3_end;
          tmpMeta94 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
          
          _e1 = tmpMeta90;
          _e2 = tmpMeta92;
          _tp = tmpMeta94;
          /* Pattern matching succeeded */
          tmpMeta95 = mmc_mk_cons(_e1, mmc_mk_cons(_e2, MMC_REFSTRUCTLIT(mmc_nil)));
          omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT97, tmpMeta95, _tp);
          tmpMeta[0+0] = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 52 /* delay */: {
          modelica_metatype tmpMeta96;
          modelica_metatype tmpMeta97;
          modelica_metatype tmpMeta98;
          modelica_metatype tmpMeta99;
          modelica_metatype tmpMeta100;
          modelica_metatype tmpMeta101;
          modelica_metatype tmpMeta102;
          modelica_metatype tmpMeta103;
          modelica_metatype tmpMeta104;
          modelica_metatype tmpMeta105;
          modelica_metatype tmpMeta110;
          modelica_metatype tmpMeta111;
          modelica_metatype tmpMeta112;
          modelica_metatype tmpMeta113;
          modelica_metatype tmpMeta114;
          modelica_metatype tmpMeta115;
          modelica_metatype tmpMeta116;
          if (5 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT106), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta96 = MMC_CAR(tmp4_2);
          tmpMeta97 = MMC_CDR(tmp4_2);
          if (listEmpty(tmpMeta97)) goto tmp3_end;
          tmpMeta98 = MMC_CAR(tmpMeta97);
          tmpMeta99 = MMC_CDR(tmpMeta97);
          if (listEmpty(tmpMeta99)) goto tmp3_end;
          tmpMeta100 = MMC_CAR(tmpMeta99);
          tmpMeta101 = MMC_CDR(tmpMeta99);
          if (listEmpty(tmpMeta101)) goto tmp3_end;
          tmpMeta102 = MMC_CAR(tmpMeta101);
          tmpMeta103 = MMC_CDR(tmpMeta101);
          if (!listEmpty(tmpMeta103)) goto tmp3_end;
          tmpMeta104 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
          
          _e2 = tmpMeta98;
          _e3 = tmpMeta100;
          _e4 = tmpMeta102;
          _tp = tmpMeta104;
          /* Pattern matching succeeded */
          { /* match expression */
            modelica_metatype tmp108_1;
            tmp108_1 = _inDiffType;
            {
              volatile mmc_switch_type tmp108;
              int tmp109;
              tmp108 = 0;
              for (; tmp108 < 2; tmp108++) {
                switch (MMC_SWITCH_CAST(tmp108)) {
                case 0: {
                  if (mmc__uniontype__metarecord__typedef__equal(tmp108_1,0,0) == 0) goto tmp107_end;
                  /* Pattern matching succeeded */
                  tmpMeta105 = _OMC_LIT83;
                  goto tmp107_done;
                }
                case 1: {
                  
                  /* Pattern matching succeeded */
                  tmpMeta105 = _OMC_LIT85;
                  goto tmp107_done;
                }
                }
                goto tmp107_end;
                tmp107_end: ;
              }
              goto goto_106;
              goto_106:;
              goto goto_2;
              goto tmp107_done;
              tmp107_done:;
            }
          }
          _res1 = tmpMeta105;

          _res2 = omc_Differentiate_differentiateExp(threadData, _e3, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          tmpMeta110 = mmc_mk_box2(4, &DAE_Operator_SUB__desc, _tp);
          tmpMeta111 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _res1, tmpMeta110, _res2);
          _res2 = tmpMeta111;

          _res2 = omc_ExpressionSimplify_simplify(threadData, _res2, NULL);

          if(omc_Expression_isZero(threadData, _res2))
          {
            _res = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          }
          else
          {
            _e = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _OMC_LIT98, _funcs, _maxIter ,&_funcs);

            tmpMeta112 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
            tmpMeta113 = mmc_mk_cons(_OMC_LIT99, mmc_mk_cons(_e, mmc_mk_cons(_e3, mmc_mk_cons(_e4, MMC_REFSTRUCTLIT(mmc_nil)))));
            tmpMeta114 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, tmpMeta112, tmpMeta113, _inAttr);
            _e = tmpMeta114;

            tmpMeta115 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
            tmpMeta116 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _res2, tmpMeta115, _e);
            _res = tmpMeta116;

            _res = omc_ExpressionSimplify_simplify(threadData, _res, NULL);
          }
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 7 /* sample */: {
          modelica_metatype tmpMeta117;
          if (6 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT107), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          tmpMeta117 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
          
          _tp = tmpMeta117;
          /* Pattern matching succeeded */
          _res1 = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _res1;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 103 /* floor */: {
          modelica_metatype tmpMeta118;
          if (5 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT96), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          tmpMeta118 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
          
          _tp = tmpMeta118;
          /* Pattern matching succeeded */
          _res1 = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _res1;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 34 /* ceil */: {
          modelica_metatype tmpMeta119;
          if (4 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT108), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          tmpMeta119 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
          
          _tp = tmpMeta119;
          /* Pattern matching succeeded */
          _res1 = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _res1;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 19 /* integer */: {
          modelica_metatype tmpMeta120;
          if (7 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT109), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          tmpMeta120 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
          
          _tp = tmpMeta120;
          /* Pattern matching succeeded */
          _res1 = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _res1;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outDiffedExp = tmpMeta[0+0];
  _outFunctionTree = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outFunctionTree) { *out_outFunctionTree = _outFunctionTree; }
  return _outDiffedExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiateCallExpNArg(threadData_t *threadData, modelica_metatype _name, modelica_metatype _inExpl, modelica_metatype _inAttr, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype _maxIter, modelica_metatype *out_outFunctionTree)
{
  modelica_integer tmp1;
  modelica_metatype _outDiffedExp = NULL;
  tmp1 = mmc_unbox_integer(_maxIter);
  _outDiffedExp = omc_Differentiate_differentiateCallExpNArg(threadData, _name, _inExpl, _inAttr, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, tmp1, out_outFunctionTree);
  /* skip box _outDiffedExp; DAE.Exp */
  /* skip box _outFunctionTree; DAE.AvlTreePathFunction.Tree */
  return _outDiffedExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_createFromNCall2ArgsCall(threadData_t *threadData, modelica_string _funcName, modelica_metatype _expl, modelica_metatype _tp)
{
  modelica_metatype _result = NULL;
  modelica_metatype _e1 = NULL;
  modelica_metatype _e2 = NULL;
  modelica_metatype _rest = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _result has no default value.
  // _e1 has no default value.
  // _e2 has no default value.
  // _rest has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _expl;
  if (listEmpty(tmpMeta1)) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_CAR(tmpMeta1);
  tmpMeta3 = MMC_CDR(tmpMeta1);
  if (listEmpty(tmpMeta3)) MMC_THROW_INTERNAL();
  tmpMeta4 = MMC_CAR(tmpMeta3);
  tmpMeta5 = MMC_CDR(tmpMeta3);
  _e1 = tmpMeta2;
  _e2 = tmpMeta4;
  _rest = tmpMeta5;

  tmpMeta6 = mmc_mk_cons(_e1, mmc_mk_cons(_e2, MMC_REFSTRUCTLIT(mmc_nil)));
  _result = omc_Expression_makePureBuiltinCall(threadData, _funcName, tmpMeta6, _tp);

  {
    modelica_metatype _elem;
    for (tmpMeta7 = _rest; !listEmpty(tmpMeta7); tmpMeta7=MMC_CDR(tmpMeta7))
    {
      _elem = MMC_CAR(tmpMeta7);
      tmpMeta8 = mmc_mk_cons(_result, mmc_mk_cons(_elem, MMC_REFSTRUCTLIT(mmc_nil)));
      _result = omc_Expression_makePureBuiltinCall(threadData, _funcName, tmpMeta8, _tp);
    }
  }
  _return: OMC_LABEL_UNUSED
  return _result;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateCallExp1Arg(threadData_t *threadData, modelica_string _name, modelica_metatype _exp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFuncs, modelica_integer _maxIter, modelica_metatype *out_outFunctionTree)
{
  modelica_metatype _outDiffedExp = NULL;
  modelica_metatype _outFunctionTree = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDiffedExp has no default value.
  // _outFunctionTree has no default value.
  
  
  { /* match expression */
    modelica_string tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _name;
    tmp4_2 = _exp;
    {
      modelica_metatype _exp_1 = NULL;
      modelica_metatype _exp_2 = NULL;
      modelica_metatype _funcs = NULL;
      modelica_metatype _tp = NULL;
      modelica_metatype _expl = NULL;
      int tmp4;
      // _exp_1 has no default value.
      // _exp_2 has no default value.
      // _funcs has no default value.
      // _tp has no default value.
      // _expl has no default value.
      {
        switch (MMC_SWITCH_CAST(stringHashDjb2Mod(tmp4_1,8192))) {
        case 7788 /* pre */: {
          if (3 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT124), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _exp_1;
          tmpMeta[0+1] = _inFuncs;
          goto tmp3_done;
        }
        case 2274 /* previous */: {
          if (8 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT125), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _exp_1;
          tmpMeta[0+1] = _inFuncs;
          goto tmp3_done;
        }
        case 5984 /* $getPart */: {
          if (8 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT126), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_Differentiate_differentiateExp(threadData, _exp, _inDiffwrtCref, _inInputData, _inDiffType, _inFuncs, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 1464 /* firstTick */: {
          if (9 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT127), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = _inFuncs;
          goto tmp3_done;
        }
        case 3882 /* interval */: {
          if (8 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT128), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = _inFuncs;
          goto tmp3_done;
        }
        case 2575 /* sin */: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (3 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT111), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Differentiate_differentiateExp(threadData, _exp, _inDiffwrtCref, _inInputData, _inDiffType, _inFuncs, _maxIter ,&_funcs);

          tmpMeta5 = mmc_mk_cons(_exp, MMC_REFSTRUCTLIT(mmc_nil));
          _exp_2 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT110, tmpMeta5, _tp);
          tmpMeta6 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta7 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _exp_2, tmpMeta6, _exp_1);
          tmpMeta[0+0] = tmpMeta7;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 1738 /* cos */: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          if (3 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT110), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Differentiate_differentiateExp(threadData, _exp, _inDiffwrtCref, _inInputData, _inDiffType, _inFuncs, _maxIter ,&_funcs);

          tmpMeta8 = mmc_mk_cons(_exp, MMC_REFSTRUCTLIT(mmc_nil));
          _exp_2 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT111, tmpMeta8, _tp);
          tmpMeta9 = mmc_mk_box2(8, &DAE_Operator_UMINUS__desc, _tp);
          tmpMeta10 = mmc_mk_box3(11, &DAE_Exp_UNARY__desc, tmpMeta9, _exp_2);
          tmpMeta11 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta12 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta10, tmpMeta11, _exp_1);
          tmpMeta[0+0] = tmpMeta12;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 3400 /* tan */: {
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          if (3 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT129), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Differentiate_differentiateExp(threadData, _exp, _inDiffwrtCref, _inInputData, _inDiffType, _inFuncs, _maxIter ,&_funcs);

          tmpMeta14 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta15 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _OMC_LIT113, tmpMeta14, _exp);
          tmpMeta13 = mmc_mk_cons(tmpMeta15, MMC_REFSTRUCTLIT(mmc_nil));
          _exp_2 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT110, tmpMeta13, _tp);
          tmpMeta16 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta17 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _OMC_LIT113, tmpMeta16, _exp_1);
          tmpMeta18 = mmc_mk_box2(6, &DAE_Operator_DIV__desc, _tp);
          tmpMeta19 = mmc_mk_box2(3, &DAE_Operator_ADD__desc, _tp);
          tmpMeta20 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _exp_2, tmpMeta19, _OMC_LIT83);
          tmpMeta21 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta17, tmpMeta18, tmpMeta20);
          tmpMeta[0+0] = tmpMeta21;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 6000 /* asin */: {
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          if (4 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT130), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Differentiate_differentiateExp(threadData, _exp, _inDiffwrtCref, _inInputData, _inDiffType, _inFuncs, _maxIter ,&_funcs);

          tmpMeta23 = mmc_mk_box2(4, &DAE_Operator_SUB__desc, _tp);
          tmpMeta24 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta25 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _exp, tmpMeta24, _exp);
          tmpMeta26 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _OMC_LIT83, tmpMeta23, tmpMeta25);
          tmpMeta22 = mmc_mk_cons(tmpMeta26, MMC_REFSTRUCTLIT(mmc_nil));
          _exp_2 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT114, tmpMeta22, _tp);
          tmpMeta27 = mmc_mk_box2(6, &DAE_Operator_DIV__desc, _tp);
          tmpMeta28 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _exp_1, tmpMeta27, _exp_2);
          tmpMeta[0+0] = tmpMeta28;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 5163 /* acos */: {
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          modelica_metatype tmpMeta37;
          if (4 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT131), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Differentiate_differentiateExp(threadData, _exp, _inDiffwrtCref, _inInputData, _inDiffType, _inFuncs, _maxIter ,&_funcs);

          tmpMeta30 = mmc_mk_box2(4, &DAE_Operator_SUB__desc, _tp);
          tmpMeta31 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta32 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _exp, tmpMeta31, _exp);
          tmpMeta33 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _OMC_LIT83, tmpMeta30, tmpMeta32);
          tmpMeta29 = mmc_mk_cons(tmpMeta33, MMC_REFSTRUCTLIT(mmc_nil));
          _exp_2 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT114, tmpMeta29, _tp);
          tmpMeta34 = mmc_mk_box2(8, &DAE_Operator_UMINUS__desc, _tp);
          tmpMeta35 = mmc_mk_box2(6, &DAE_Operator_DIV__desc, _tp);
          tmpMeta36 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _exp_1, tmpMeta35, _exp_2);
          tmpMeta37 = mmc_mk_box3(11, &DAE_Exp_UNARY__desc, tmpMeta34, tmpMeta36);
          tmpMeta[0+0] = tmpMeta37;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 6825 /* atan */: {
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          if (4 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT132), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Differentiate_differentiateExp(threadData, _exp, _inDiffwrtCref, _inInputData, _inDiffType, _inFuncs, _maxIter ,&_funcs);
          tmpMeta38 = mmc_mk_box2(6, &DAE_Operator_DIV__desc, _tp);
          tmpMeta39 = mmc_mk_box2(3, &DAE_Operator_ADD__desc, _tp);
          tmpMeta40 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta41 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _exp, tmpMeta40, _exp);
          tmpMeta42 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _OMC_LIT83, tmpMeta39, tmpMeta41);
          tmpMeta43 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _exp_1, tmpMeta38, tmpMeta42);
          tmpMeta[0+0] = tmpMeta43;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 3159 /* sinh */: {
          modelica_metatype tmpMeta44;
          modelica_metatype tmpMeta45;
          modelica_metatype tmpMeta46;
          if (4 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT116), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Differentiate_differentiateExp(threadData, _exp, _inDiffwrtCref, _inInputData, _inDiffType, _inFuncs, _maxIter ,&_funcs);

          tmpMeta44 = mmc_mk_cons(_exp, MMC_REFSTRUCTLIT(mmc_nil));
          _exp_2 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT115, tmpMeta44, _tp);
          tmpMeta45 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta46 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _exp_1, tmpMeta45, _exp_2);
          tmpMeta[0+0] = tmpMeta46;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 114 /* cosh */: {
          modelica_metatype tmpMeta47;
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta49;
          if (4 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT115), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Differentiate_differentiateExp(threadData, _exp, _inDiffwrtCref, _inInputData, _inDiffType, _inFuncs, _maxIter ,&_funcs);

          tmpMeta47 = mmc_mk_cons(_exp, MMC_REFSTRUCTLIT(mmc_nil));
          _exp_2 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT116, tmpMeta47, _tp);
          tmpMeta48 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta49 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _exp_1, tmpMeta48, _exp_2);
          tmpMeta[0+0] = tmpMeta49;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 5808 /* tanh */: {
          modelica_metatype tmpMeta50;
          modelica_metatype tmpMeta51;
          modelica_metatype tmpMeta52;
          modelica_metatype tmpMeta53;
          modelica_metatype tmpMeta54;
          if (4 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT133), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Differentiate_differentiateExp(threadData, _exp, _inDiffwrtCref, _inInputData, _inDiffType, _inFuncs, _maxIter ,&_funcs);

          tmpMeta50 = mmc_mk_cons(_exp, MMC_REFSTRUCTLIT(mmc_nil));
          _exp_2 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT115, tmpMeta50, _tp);
          tmpMeta51 = mmc_mk_box2(6, &DAE_Operator_DIV__desc, _tp);
          tmpMeta52 = mmc_mk_box2(7, &DAE_Operator_POW__desc, _tp);
          tmpMeta53 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _exp_2, tmpMeta52, _OMC_LIT113);
          tmpMeta54 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _exp_1, tmpMeta51, tmpMeta53);
          tmpMeta[0+0] = tmpMeta54;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 4210 /* exp */: {
          modelica_metatype tmpMeta55;
          modelica_metatype tmpMeta56;
          modelica_metatype tmpMeta57;
          if (3 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT117), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Differentiate_differentiateExp(threadData, _exp, _inDiffwrtCref, _inInputData, _inDiffType, _inFuncs, _maxIter ,&_funcs);

          tmpMeta55 = mmc_mk_cons(_exp, MMC_REFSTRUCTLIT(mmc_nil));
          _exp_2 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT117, tmpMeta55, _tp);
          tmpMeta56 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta57 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _exp_2, tmpMeta56, _exp_1);
          tmpMeta[0+0] = tmpMeta57;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 3335 /* log */: {
          modelica_metatype tmpMeta58;
          modelica_metatype tmpMeta59;
          if (3 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT84), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Differentiate_differentiateExp(threadData, _exp, _inDiffwrtCref, _inInputData, _inDiffType, _inFuncs, _maxIter ,&_funcs);
          tmpMeta58 = mmc_mk_box2(6, &DAE_Operator_DIV__desc, _tp);
          tmpMeta59 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _exp_1, tmpMeta58, _exp);
          tmpMeta[0+0] = tmpMeta59;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 4424 /* log10 */: {
          modelica_metatype tmpMeta60;
          modelica_metatype tmpMeta61;
          modelica_metatype tmpMeta62;
          modelica_metatype tmpMeta63;
          if (5 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT134), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Differentiate_differentiateExp(threadData, _exp, _inDiffwrtCref, _inInputData, _inDiffType, _inFuncs, _maxIter ,&_funcs);

          _exp_2 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT84, _OMC_LIT120, _tp);
          tmpMeta60 = mmc_mk_box2(6, &DAE_Operator_DIV__desc, _tp);
          tmpMeta61 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta62 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _exp, tmpMeta61, _exp_2);
          tmpMeta63 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _exp_1, tmpMeta60, tmpMeta62);
          tmpMeta[0+0] = tmpMeta63;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 3823 /* sqrt */: {
          modelica_metatype tmpMeta64;
          modelica_metatype tmpMeta65;
          modelica_metatype tmpMeta66;
          modelica_metatype tmpMeta67;
          modelica_metatype tmpMeta68;
          if (4 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT114), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Differentiate_differentiateExp(threadData, _exp, _inDiffwrtCref, _inInputData, _inDiffType, _inFuncs, _maxIter ,&_funcs);

          tmpMeta64 = mmc_mk_cons(_exp, MMC_REFSTRUCTLIT(mmc_nil));
          _exp_2 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT114, tmpMeta64, _tp);
          tmpMeta65 = mmc_mk_box2(6, &DAE_Operator_DIV__desc, _tp);
          tmpMeta66 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta67 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _OMC_LIT113, tmpMeta66, _exp_2);
          tmpMeta68 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _exp_1, tmpMeta65, tmpMeta67);
          tmpMeta[0+0] = tmpMeta68;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 7323 /* abs */: {
          modelica_metatype tmpMeta69;
          modelica_metatype tmpMeta70;
          modelica_metatype tmpMeta71;
          if (3 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT135), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Differentiate_differentiateExp(threadData, _exp, _inDiffwrtCref, _inInputData, _inDiffType, _inFuncs, _maxIter ,&_funcs);

          tmpMeta69 = mmc_mk_cons(_exp, MMC_REFSTRUCTLIT(mmc_nil));
          _exp_2 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT121, tmpMeta69, _tp);
          tmpMeta70 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
          tmpMeta71 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _exp_2, tmpMeta70, _exp_1);
          tmpMeta[0+0] = tmpMeta71;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 2934 /* sign */: {
          if (4 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT121), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _exp_1;
          tmpMeta[0+1] = _inFuncs;
          goto tmp3_done;
        }
        case 6500 /* transpose */: {
          modelica_metatype tmpMeta72;
          if (9 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT122), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Differentiate_differentiateExp(threadData, _exp, _inDiffwrtCref, _inInputData, _inDiffType, _inFuncs, _maxIter ,&_funcs);

          tmpMeta72 = mmc_mk_cons(_exp_1, MMC_REFSTRUCTLIT(mmc_nil));
          _exp_2 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT122, tmpMeta72, _tp);
          tmpMeta[0+0] = _exp_2;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 2970 /* sum */: {
          modelica_metatype tmpMeta73;
          if (3 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT123), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Differentiate_differentiateExp(threadData, _exp, _inDiffwrtCref, _inInputData, _inDiffType, _inFuncs, _maxIter ,&_funcs);

          tmpMeta73 = mmc_mk_cons(_exp_1, MMC_REFSTRUCTLIT(mmc_nil));
          _exp_2 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT123, tmpMeta73, _tp);
          tmpMeta[0+0] = _exp_2;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 3979 /* max */: {
          modelica_metatype tmpMeta74;
          modelica_metatype tmpMeta75;
          if (3 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT102), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,16,3) == 0) goto tmp3_end;
          tmpMeta74 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmpMeta75 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          _tp = tmpMeta74;
          _expl = tmpMeta75;
          /* Pattern matching succeeded */
          _tp = omc_Types_arrayElementType(threadData, _tp);

          _exp_1 = omc_Differentiate_createFromNCall2ArgsCall(threadData, _OMC_LIT102, _expl, _tp);
          tmpMeta[0+0] = omc_Differentiate_differentiateExp(threadData, _exp_1, _inDiffwrtCref, _inInputData, _inDiffType, _inFuncs, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 4233 /* min */: {
          modelica_metatype tmpMeta76;
          modelica_metatype tmpMeta77;
          if (3 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT103), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,16,3) == 0) goto tmp3_end;
          tmpMeta76 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmpMeta77 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          _tp = tmpMeta76;
          _expl = tmpMeta77;
          /* Pattern matching succeeded */
          _tp = omc_Types_arrayElementType(threadData, _tp);

          _exp_1 = omc_Differentiate_createFromNCall2ArgsCall(threadData, _OMC_LIT103, _expl, _tp);
          tmpMeta[0+0] = omc_Differentiate_differentiateExp(threadData, _exp_1, _inDiffwrtCref, _inInputData, _inDiffType, _inFuncs, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 871 /* floor */: {
          if (5 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT96), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _exp_1;
          tmpMeta[0+1] = _inFuncs;
          goto tmp3_done;
        }
        case 5282 /* ceil */: {
          if (4 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT108), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _exp_1;
          tmpMeta[0+1] = _inFuncs;
          goto tmp3_done;
        }
        case 7699 /* integer */: {
          if (7 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT109), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _tp = omc_Expression_typeof(threadData, _exp);

          _exp_1 = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _exp_1;
          tmpMeta[0+1] = _inFuncs;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outDiffedExp = tmpMeta[0+0];
  _outFunctionTree = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outFunctionTree) { *out_outFunctionTree = _outFunctionTree; }
  return _outDiffedExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiateCallExp1Arg(threadData_t *threadData, modelica_metatype _name, modelica_metatype _exp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFuncs, modelica_metatype _maxIter, modelica_metatype *out_outFunctionTree)
{
  modelica_integer tmp1;
  modelica_metatype _outDiffedExp = NULL;
  tmp1 = mmc_unbox_integer(_maxIter);
  _outDiffedExp = omc_Differentiate_differentiateCallExp1Arg(threadData, _name, _exp, _inDiffwrtCref, _inInputData, _inDiffType, _inFuncs, tmp1, out_outFunctionTree);
  /* skip box _outDiffedExp; DAE.Exp */
  /* skip box _outFunctionTree; DAE.AvlTreePathFunction.Tree */
  return _outDiffedExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateCalls(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_integer _maxIter, modelica_metatype *out_outFunctionTree)
{
  modelica_metatype _outDiffedExp = NULL;
  modelica_metatype _outFunctionTree = NULL;
  modelica_boolean _debug;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDiffedExp has no default value.
  // _outFunctionTree has no default value.
  _debug = 0 /* false */;
  
  
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;modelica_metatype tmp4_4;
    tmp4_1 = _inExp;
    tmp4_2 = _inDiffwrtCref;
    tmp4_3 = _inInputData;
    tmp4_4 = _inDiffType;
    {
      modelica_metatype _path = NULL;
      modelica_metatype _timevars = NULL;
      modelica_metatype _attr = NULL;
      modelica_metatype _cr = NULL;
      modelica_metatype _cj = NULL;
      modelica_metatype _e = NULL;
      modelica_metatype _e1 = NULL;
      modelica_metatype _zero = NULL;
      modelica_metatype _res = NULL;
      modelica_metatype _actual = NULL;
      modelica_metatype _simplified = NULL;
      modelica_metatype _tp = NULL;
      modelica_metatype _funcs = NULL;
      modelica_integer _i;
      modelica_metatype _expl = NULL;
      modelica_string _s1 = NULL;
      modelica_string _s2 = NULL;
      modelica_string _serr = NULL;
      modelica_string _matrixName = NULL;
      modelica_string _name = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _path has no default value.
      // _timevars has no default value.
      // _attr has no default value.
      // _cr has no default value.
      // _cj has no default value.
      // _e has no default value.
      // _e1 has no default value.
      // _zero has no default value.
      // _res has no default value.
      // _actual has no default value.
      // _simplified has no default value.
      // _tp has no default value.
      // _funcs has no default value.
      // _i has no default value.
      // _expl has no default value.
      // _s1 has no default value.
      // _s2 has no default value.
      // _serr has no default value.
      // _matrixName has no default value.
      // _name has no default value.
      tmp4 = 0;
      for (; tmp4 < 13; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,1) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (8 != MMC_STRLEN(tmpMeta7) || strcmp(MMC_STRINGDATA(_OMC_LIT143), MMC_STRINGDATA(tmpMeta7)) != 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_CAR(tmpMeta8);
          tmpMeta10 = MMC_CDR(tmpMeta8);
          if (listEmpty(tmpMeta10)) goto tmp3_end;
          tmpMeta11 = MMC_CAR(tmpMeta10);
          tmpMeta12 = MMC_CDR(tmpMeta10);
          if (!listEmpty(tmpMeta12)) goto tmp3_end;
          
          _actual = tmpMeta9;
          _simplified = tmpMeta11;
          /* Pattern matching succeeded */
          _e1 = omc_Differentiate_differentiateExp(threadData, _actual, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          omc_Differentiate_differentiateExp(threadData, _simplified, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, _maxIter ,&_funcs);
          tmpMeta[0+0] = _e1;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_4,4,1) == 0) goto tmp3_end;
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
          if (optionNone(tmpMeta13)) goto tmp3_end;
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 1));
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 8));
          if (optionNone(tmpMeta15)) goto tmp3_end;
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,1,1) == 0) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 2));
          if (8 != MMC_STRLEN(tmpMeta18) || strcmp(MMC_STRINGDATA(_OMC_LIT125), MMC_STRINGDATA(tmpMeta18)) != 0) goto tmp3_end;
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta19)) goto tmp3_end;
          tmpMeta20 = MMC_CAR(tmpMeta19);
          tmpMeta21 = MMC_CDR(tmpMeta19);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta20,6,2) == 0) goto tmp3_end;
          tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 2));
          tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 3));
          if (!listEmpty(tmpMeta21)) goto tmp3_end;
          
          _timevars = tmpMeta14;
          _matrixName = tmpMeta16;
          _cr = tmpMeta22;
          _tp = tmpMeta23;
          /* Pattern matching succeeded */
          tmpMeta24 = MMC_REFSTRUCTLIT(mmc_nil);
          _cr = omc_ComponentReference_makeCrefQual(threadData, _OMC_LIT136, _tp, tmpMeta24, _cr);

          /* Pattern-matching tuple assignment */
          tmpMeta25 = omc_BackendVariable_getVar(threadData, _cr, _timevars, NULL);
          if (listEmpty(tmpMeta25)) goto goto_2;
          tmpMeta26 = MMC_CAR(tmpMeta25);
          tmpMeta27 = MMC_CDR(tmpMeta25);

          _cr = omc_Differentiate_createSeedCrefName(threadData, _cr, _matrixName);

          tmpMeta28 = mmc_mk_box3(9, &DAE_Exp_CREF__desc, _cr, _tp);
          _res = tmpMeta28;
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_4,0,0) == 0) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta29,1,1) == 0) goto tmp3_end;
          tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta29), 2));
          if (3 != MMC_STRLEN(tmpMeta30) || strcmp(MMC_STRINGDATA(_OMC_LIT144), MMC_STRINGDATA(tmpMeta30)) != 0) goto tmp3_end;
          tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta31)) goto tmp3_end;
          tmpMeta32 = MMC_CAR(tmpMeta31);
          tmpMeta33 = MMC_CDR(tmpMeta31);
          if (!listEmpty(tmpMeta33)) goto tmp3_end;
          tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          
          _path = tmpMeta29;
          _e = tmpMeta32;
          _attr = tmpMeta34;
          /* Pattern matching succeeded */
          tmpMeta35 = mmc_mk_cons(_e, mmc_mk_cons(_OMC_LIT137, MMC_REFSTRUCTLIT(mmc_nil)));
          tmpMeta36 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _path, tmpMeta35, _attr);
          tmpMeta[0+0] = tmpMeta36;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          modelica_metatype tmpMeta44;
          modelica_integer tmp45;
          modelica_metatype tmpMeta46;
          modelica_metatype tmpMeta47;
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta49;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_4,0,0) == 0) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta37,1,1) == 0) goto tmp3_end;
          tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 2));
          if (3 != MMC_STRLEN(tmpMeta38) || strcmp(MMC_STRINGDATA(_OMC_LIT144), MMC_STRINGDATA(tmpMeta38)) != 0) goto tmp3_end;
          tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta39)) goto tmp3_end;
          tmpMeta40 = MMC_CAR(tmpMeta39);
          tmpMeta41 = MMC_CDR(tmpMeta39);
          if (listEmpty(tmpMeta41)) goto tmp3_end;
          tmpMeta42 = MMC_CAR(tmpMeta41);
          tmpMeta43 = MMC_CDR(tmpMeta41);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta42,0,1) == 0) goto tmp3_end;
          tmpMeta44 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta42), 2));
          tmp45 = mmc_unbox_integer(tmpMeta44);
          if (!listEmpty(tmpMeta43)) goto tmp3_end;
          tmpMeta46 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          
          _path = tmpMeta37;
          _e = tmpMeta40;
          _i = tmp45  /* pattern as ty=Integer */;
          _attr = tmpMeta46;
          /* Pattern matching succeeded */
          _i = ((modelica_integer) 1) + _i;
          tmpMeta48 = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_i));
          tmpMeta47 = mmc_mk_cons(_e, mmc_mk_cons(tmpMeta48, MMC_REFSTRUCTLIT(mmc_nil)));
          tmpMeta49 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _path, tmpMeta47, _attr);
          tmpMeta[0+0] = tmpMeta49;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta50;
          modelica_metatype tmpMeta51;
          modelica_metatype tmpMeta52;
          modelica_integer tmp53;
          modelica_metatype tmpMeta54;
          modelica_metatype tmpMeta55;
          modelica_metatype tmpMeta56;
          modelica_metatype tmpMeta57;
          modelica_metatype tmpMeta58;
          modelica_metatype tmpMeta59;
          tmpMeta50 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 8));
          if (optionNone(tmpMeta50)) goto tmp3_end;
          tmpMeta51 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta50), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_4,4,1) == 0) goto tmp3_end;
          tmpMeta52 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_4), 2));
          tmp53 = mmc_unbox_integer(tmpMeta52);
          if (1 /* true */ != tmp53) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta54 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta54,1,1) == 0) goto tmp3_end;
          tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta54), 2));
          if (3 != MMC_STRLEN(tmpMeta55) || strcmp(MMC_STRINGDATA(_OMC_LIT144), MMC_STRINGDATA(tmpMeta55)) != 0) goto tmp3_end;
          tmpMeta56 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta56)) goto tmp3_end;
          tmpMeta57 = MMC_CAR(tmpMeta56);
          tmpMeta58 = MMC_CDR(tmpMeta56);
          if (!listEmpty(tmpMeta58)) goto tmp3_end;
          
          _matrixName = tmpMeta51;
          _e = tmpMeta57;
          /* Pattern matching succeeded */
          _cj = _OMC_LIT139;

          _cr = omc_Expression_expCref(threadData, _e);

          _tp = omc_Expression_typeof(threadData, _e);

          _cr = omc_Differentiate_createSeedCrefName(threadData, _cr, _matrixName);

          _res = omc_Expression_makeCrefExp(threadData, _cr, _tp);

          tmpMeta59 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, omc_Expression_makeCrefExp(threadData, _cj, _OMC_LIT47), _OMC_LIT140, _res);
          _res = tmpMeta59;
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta60;
          modelica_metatype tmpMeta61;
          modelica_metatype tmpMeta62;
          modelica_metatype tmpMeta63;
          modelica_metatype tmpMeta64;
          modelica_metatype tmpMeta65;
          modelica_metatype tmpMeta66;
          tmpMeta60 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 8));
          if (optionNone(tmpMeta60)) goto tmp3_end;
          tmpMeta61 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta60), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta62 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta62,1,1) == 0) goto tmp3_end;
          tmpMeta63 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta62), 2));
          if (3 != MMC_STRLEN(tmpMeta63) || strcmp(MMC_STRINGDATA(_OMC_LIT144), MMC_STRINGDATA(tmpMeta63)) != 0) goto tmp3_end;
          tmpMeta64 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta64)) goto tmp3_end;
          tmpMeta65 = MMC_CAR(tmpMeta64);
          tmpMeta66 = MMC_CDR(tmpMeta64);
          if (!listEmpty(tmpMeta66)) goto tmp3_end;
          
          _matrixName = tmpMeta61;
          _e = tmpMeta65;
          /* Pattern matching succeeded */
          _cr = omc_Expression_expCref(threadData, _e);

          _tp = omc_Expression_typeof(threadData, _e);

          _cr = omc_ComponentReference_crefPrefixDer(threadData, _cr);

          _cr = omc_ComponentReference_createDifferentiatedCrefName(threadData, _cr, _inDiffwrtCref, _matrixName);

          _res = omc_Expression_makeCrefExp(threadData, _cr, _tp);

          if(omc_ComponentReference_crefEqual(threadData, _OMC_LIT48, _inDiffwrtCref))
          {
            _res = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          }
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta67;
          modelica_metatype tmpMeta68;
          modelica_metatype tmpMeta69;
          modelica_metatype tmpMeta70;
          modelica_metatype tmpMeta71;
          modelica_metatype tmpMeta72;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,3) == 0) goto tmp3_end;
          tmpMeta67 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          if (1 != MMC_STRLEN(tmpMeta67) || strcmp(MMC_STRINGDATA(_OMC_LIT46), MMC_STRINGDATA(tmpMeta67)) != 0) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta68 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta68,1,1) == 0) goto tmp3_end;
          tmpMeta69 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta68), 2));
          if (3 != MMC_STRLEN(tmpMeta69) || strcmp(MMC_STRINGDATA(_OMC_LIT144), MMC_STRINGDATA(tmpMeta69)) != 0) goto tmp3_end;
          tmpMeta70 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta70)) goto tmp3_end;
          tmpMeta71 = MMC_CAR(tmpMeta70);
          tmpMeta72 = MMC_CDR(tmpMeta70);
          if (!listEmpty(tmpMeta72)) goto tmp3_end;
          
          _e = tmpMeta71;
          /* Pattern matching succeeded */
          _zero = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, omc_Expression_typeof(threadData, _e)), NULL);
          tmpMeta[0+0] = _zero;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta73;
          modelica_metatype tmpMeta74;
          modelica_metatype tmpMeta75;
          modelica_integer tmp76;
          modelica_metatype tmpMeta77;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta73 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta74 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta73), 2));
          tmpMeta75 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta73), 4));
          tmp76 = mmc_unbox_integer(tmpMeta75);
          if (0 /* false */ != tmp76) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,3) == 0) goto tmp3_end;
          tmpMeta77 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          if (1 != MMC_STRLEN(tmpMeta77) || strcmp(MMC_STRINGDATA(_OMC_LIT46), MMC_STRINGDATA(tmpMeta77)) != 0) goto tmp3_end;
          
          _e = tmp4_1;
          _tp = tmpMeta74;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(!omc_Expression_isRecordCall(threadData, _e, _inFunctionTree))) goto tmp3_end;
          _zero = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _zero;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta78;
          modelica_metatype tmpMeta79;
          modelica_metatype tmpMeta80;
          modelica_metatype tmpMeta81;
          modelica_metatype tmpMeta82;
          modelica_metatype tmpMeta83;
          modelica_metatype tmpMeta84;
          modelica_integer tmp85;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta78 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta78,1,1) == 0) goto tmp3_end;
          tmpMeta79 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta78), 2));
          tmpMeta80 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta80)) goto tmp3_end;
          tmpMeta81 = MMC_CAR(tmpMeta80);
          tmpMeta82 = MMC_CDR(tmpMeta80);
          if (!listEmpty(tmpMeta82)) goto tmp3_end;
          tmpMeta83 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta84 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta83), 4));
          tmp85 = mmc_unbox_integer(tmpMeta84);
          if (1 /* true */ != tmp85) goto tmp3_end;
          
          _name = tmpMeta79;
          _e = tmpMeta81;
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_Differentiate_differentiateCallExp1Arg(threadData, _name, _e, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta86;
          modelica_metatype tmpMeta87;
          modelica_metatype tmpMeta88;
          modelica_metatype tmpMeta89;
          modelica_metatype tmpMeta90;
          modelica_metatype tmpMeta91;
          modelica_metatype tmpMeta92;
          modelica_metatype tmpMeta93;
          modelica_real tmp94;
          modelica_metatype tmpMeta95;
          modelica_metatype tmpMeta96;
          modelica_integer tmp97;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta86 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta86,1,1) == 0) goto tmp3_end;
          tmpMeta87 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta86), 2));
          if (5 != MMC_STRLEN(tmpMeta87) || strcmp(MMC_STRINGDATA(_OMC_LIT100), MMC_STRINGDATA(tmpMeta87)) != 0) goto tmp3_end;
          tmpMeta88 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta88)) goto tmp3_end;
          tmpMeta89 = MMC_CAR(tmpMeta88);
          tmpMeta90 = MMC_CDR(tmpMeta88);
          if (listEmpty(tmpMeta90)) goto tmp3_end;
          tmpMeta91 = MMC_CAR(tmpMeta90);
          tmpMeta92 = MMC_CDR(tmpMeta90);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta91,1,1) == 0) goto tmp3_end;
          tmpMeta93 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta91), 2));
          tmp94 = mmc_unbox_real(tmpMeta93);
          if (0.0 != tmp94) goto tmp3_end;
          if (!listEmpty(tmpMeta92)) goto tmp3_end;
          tmpMeta95 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta96 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta95), 4));
          tmp97 = mmc_unbox_integer(tmpMeta96);
          if (1 /* true */ != tmp97) goto tmp3_end;
          
          _e1 = tmpMeta91;
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _e1;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta98;
          modelica_metatype tmpMeta99;
          modelica_metatype tmpMeta100;
          modelica_metatype tmpMeta101;
          modelica_metatype tmpMeta102;
          modelica_metatype tmpMeta103;
          modelica_metatype tmpMeta104;
          modelica_metatype tmpMeta105;
          modelica_metatype tmpMeta106;
          modelica_integer tmp107;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta98 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta98,1,1) == 0) goto tmp3_end;
          tmpMeta99 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta98), 2));
          tmpMeta100 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta100)) goto tmp3_end;
          tmpMeta101 = MMC_CAR(tmpMeta100);
          tmpMeta102 = MMC_CDR(tmpMeta100);
          if (listEmpty(tmpMeta102)) goto tmp3_end;
          tmpMeta103 = MMC_CAR(tmpMeta102);
          tmpMeta104 = MMC_CDR(tmpMeta102);
          tmpMeta105 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta106 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta105), 4));
          tmp107 = mmc_unbox_integer(tmpMeta106);
          if (1 /* true */ != tmp107) goto tmp3_end;
          
          _name = tmpMeta99;
          _expl = tmpMeta100;
          _attr = tmpMeta105;
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_Differentiate_differentiateCallExpNArg(threadData, _name, _expl, _attr, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta108;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          
          _e = tmp4_1;
          /* Pattern matching succeeded */
          _e1 = omc_Differentiate_differentiateFunctionCall(threadData, _e, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_funcs);

          tmpMeta108 = mmc_mk_box2(0, mmc_mk_some(_funcs), _OMC_LIT141);
          _e1 = omc_Inline_inlineExp(threadData, _e1, tmpMeta108, _OMC_LIT44, NULL, NULL, NULL);
          tmpMeta[0+0] = _e1;
          tmpMeta[0+1] = _funcs;
          goto tmp3_done;
        }
        case 12: {
          modelica_boolean tmp109;
          modelica_metatype tmpMeta110;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp109 = omc_Flags_isSet(threadData, _OMC_LIT20);
          if (1 /* true */ != tmp109) goto goto_2;

          _s1 = omc_ExpressionDump_printExpStr(threadData, _inExp);

          _s2 = omc_ComponentReference_printComponentRefStr(threadData, _inDiffwrtCref);

          tmpMeta110 = mmc_mk_cons(_OMC_LIT142, mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT87, mmc_mk_cons(_s2, mmc_mk_cons(_OMC_LIT88, MMC_REFSTRUCTLIT(mmc_nil))))));
          _serr = stringAppendList(tmpMeta110);

          omc_Debug_trace(threadData, _serr);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outDiffedExp = tmpMeta[0+0];
  _outFunctionTree = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outFunctionTree) { *out_outFunctionTree = _outFunctionTree; }
  return _outDiffedExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiateCalls(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype _maxIter, modelica_metatype *out_outFunctionTree)
{
  modelica_integer tmp1;
  modelica_metatype _outDiffedExp = NULL;
  tmp1 = mmc_unbox_integer(_maxIter);
  _outDiffedExp = omc_Differentiate_differentiateCalls(threadData, _inExp, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, tmp1, out_outFunctionTree);
  /* skip box _outDiffedExp; DAE.Exp */
  /* skip box _outFunctionTree; DAE.AvlTreePathFunction.Tree */
  return _outDiffedExp;
}

DLLDirection
modelica_boolean omc_Differentiate_isSeedCref(threadData_t *threadData, modelica_metatype _cr)
{
  modelica_boolean _b;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _b has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _cr;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_StringUtil_startsWith(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cr), 2))), _OMC_LIT145);
          goto tmp3_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _cr = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cr), 5)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _b = tmp1;
  _return: OMC_LABEL_UNUSED
  return _b;
}
modelica_metatype boxptr_Differentiate_isSeedCref(threadData_t *threadData, modelica_metatype _cr)
{
  modelica_boolean _b;
  modelica_metatype out_b;
  _b = omc_Differentiate_isSeedCref(threadData, _cr);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

DLLDirection
modelica_metatype omc_Differentiate_createSeedCrefName(threadData_t *threadData, modelica_metatype _inCref, modelica_string _inMatrixName)
{
  modelica_metatype _outCref = NULL;
  modelica_metatype _subs = NULL;
  modelica_boolean _debug;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outCref has no default value.
  // _subs has no default value.
  _debug = 0 /* false */;
  _subs = omc_ComponentReference_crefLastSubs(threadData, _inCref);

  _outCref = omc_ComponentReference_crefStripLastSubs(threadData, _inCref);

  _outCref = omc_ComponentReference_crefSetLastType(threadData, _outCref, _OMC_LIT146);

  tmpMeta1 = stringAppend(_OMC_LIT145,_inMatrixName);
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _outCref = omc_ComponentReference_joinCrefs(threadData, _outCref, omc_ComponentReference_makeCrefIdent(threadData, tmpMeta1, _OMC_LIT146, tmpMeta2));

  _outCref = omc_ComponentReference_crefSetLastSubs(threadData, _outCref, _subs);

  _outCref = omc_ComponentReference_crefSetLastType(threadData, _outCref, omc_ComponentReference_crefLastType(threadData, _inCref));
  _return: OMC_LABEL_UNUSED
  return _outCref;
}

DLLDirection
modelica_metatype omc_Differentiate_createDiffedCrefName(threadData_t *threadData, modelica_metatype _inCref, modelica_string _inMatrixName)
{
  modelica_metatype _outCref = NULL;
  modelica_metatype _subs = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outCref has no default value.
  // _subs has no default value.
  _subs = omc_ComponentReference_crefLastSubs(threadData, _inCref);

  _outCref = omc_ComponentReference_crefStripLastSubs(threadData, _inCref);

  _outCref = omc_ComponentReference_prependStringCref(threadData, _OMC_LIT147, _outCref);

  _outCref = omc_ComponentReference_prependStringCref(threadData, _inMatrixName, _outCref);

  _outCref = omc_ComponentReference_crefSetLastSubs(threadData, _outCref, _subs);

  _outCref = omc_ComponentReference_crefSetLastType(threadData, _outCref, omc_ComponentReference_crefLastType(threadData, _inCref));
  _return: OMC_LABEL_UNUSED
  return _outCref;
}

static modelica_metatype closure6_Differentiate_differentiateExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inDiffwrtCref, modelica_metatype inInputData, modelica_metatype inDiffType, modelica_metatype inFunctionTree, modelica_metatype tmp17)
{
  modelica_metatype maxIter = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_Differentiate_differentiateExp(thData, inExp, inDiffwrtCref, inInputData, inDiffType, inFunctionTree, maxIter, tmp17);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateCrefs(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_integer _maxIter, modelica_metatype *out_outFunctionTree)
{
  modelica_metatype _outDiffedExp = NULL;
  modelica_metatype _outFunctionTree = NULL;
  modelica_boolean _debug;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDiffedExp has no default value.
  // _outFunctionTree has no default value.
  _debug = 0 /* false */;
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp5_1;volatile modelica_metatype tmp5_2;volatile modelica_metatype tmp5_3;volatile modelica_metatype tmp5_4;
    tmp5_1 = _inExp;
    tmp5_2 = _inDiffwrtCref;
    tmp5_3 = _inInputData;
    tmp5_4 = _inDiffType;
    {
      modelica_metatype _diffType = NULL;
      modelica_metatype _path = NULL;
      modelica_metatype _timevars = NULL;
      modelica_metatype _knvars = NULL;
      modelica_metatype _var = NULL;
      modelica_metatype _kind = NULL;
      modelica_metatype _scalarLst = NULL;
      modelica_metatype _tp = NULL;
      modelica_metatype _arrayType = NULL;
      modelica_metatype _e = NULL;
      modelica_metatype _e1 = NULL;
      modelica_metatype _zero = NULL;
      modelica_metatype _one = NULL;
      modelica_metatype _res = NULL;
      modelica_metatype _res1 = NULL;
      modelica_metatype _cr = NULL;
      modelica_metatype _cr1 = NULL;
      modelica_metatype _expl = NULL;
      modelica_metatype _expl_1 = NULL;
      modelica_metatype _diffed_exps = NULL;
      modelica_metatype tmpMeta3;
      modelica_metatype _varLst = NULL;
      modelica_metatype _scalarCrefs = NULL;
      modelica_string _s1 = NULL;
      modelica_string _s2 = NULL;
      modelica_string _serr = NULL;
      modelica_string _se1 = NULL;
      modelica_string _matrixName = NULL;
      volatile mmc_switch_type tmp5;
      int tmp6;
      // _diffType has no default value.
      // _path has no default value.
      // _timevars has no default value.
      // _knvars has no default value.
      // _var has no default value.
      // _kind has no default value.
      // _scalarLst has no default value.
      // _tp has no default value.
      // _arrayType has no default value.
      // _e has no default value.
      // _e1 has no default value.
      // _zero has no default value.
      // _one has no default value.
      // _res has no default value.
      // _res1 has no default value.
      // _cr has no default value.
      // _cr1 has no default value.
      // _expl has no default value.
      // _expl_1 has no default value.
      tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
      _diffed_exps = tmpMeta3;
      // _varLst has no default value.
      // _scalarCrefs has no default value.
      // _s1 has no default value.
      // _s2 has no default value.
      // _serr has no default value.
      // _se1 has no default value.
      // _matrixName has no default value.
      tmp5 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp4_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp5 < 22; tmp5++) {
        switch (MMC_SWITCH_CAST(tmp5)) {
        case 0: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_3), 8));
          if (optionNone(tmpMeta7)) goto tmp4_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_4,2,0) == 0) goto tmp4_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,9,4) == 0) goto tmp4_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,3,1) == 0) goto tmp4_end;
          
          _matrixName = tmpMeta8;
          _cr = tmpMeta9;
          _tp = tmpMeta10;
          /* Pattern matching succeeded */
          _cr = omc_ComponentReference_prependStringCref(threadData, _OMC_LIT147, _cr);

          _cr = omc_ComponentReference_prependStringCref(threadData, _matrixName, _cr);

          _res = omc_Expression_makeCrefExp(threadData, _cr, _tp);
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp4_done;
        }
        case 1: {
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,9,4) == 0) goto tmp4_end;
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,3,1) == 0) goto tmp4_end;
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 3));
          
          _cr = tmpMeta12;
          _tp = tmpMeta13;
          _path = tmpMeta15;
          _varLst = tmpMeta16;
          tmp5 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          _expl = omc_List_map1(threadData, _varLst, boxvar_Expression_generateCrefsExpFromExpVar, _cr);

          tmpMeta18 = mmc_mk_box1(0, mmc_mk_integer(_maxIter));
          _expl_1 = omc_List_map3Fold(threadData, _expl, (modelica_fnptr) mmc_mk_box2(0,closure6_Differentiate_differentiateExp,tmpMeta18), _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree ,&_outFunctionTree);

          tmpMeta19 = mmc_mk_box8(3, &DAE_CallAttributes_CALL__ATTR__desc, _tp, mmc_mk_boolean(0 /* false */), mmc_mk_boolean(0 /* false */), mmc_mk_boolean(0 /* false */), mmc_mk_boolean(0 /* false */), _OMC_LIT70, _OMC_LIT94);
          tmpMeta20 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _path, _expl_1, tmpMeta19);
          _res = tmpMeta20;
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _outFunctionTree;
          goto tmp4_done;
        }
        case 2: {
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_3), 8));
          if (optionNone(tmpMeta21)) goto tmp4_end;
          tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_4,2,0) == 0) goto tmp4_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
          tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta24,6,2) == 0) goto tmp4_end;
          
          _matrixName = tmpMeta22;
          _cr = tmpMeta23;
          _tp = tmpMeta24;
          /* Pattern matching succeeded */
          _cr = omc_ComponentReference_prependStringCref(threadData, _OMC_LIT147, _cr);

          _cr = omc_ComponentReference_prependStringCref(threadData, _matrixName, _cr);

          _res = omc_Expression_makeCrefExp(threadData, _cr, _tp);
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp4_done;
        }
        case 3: {
          modelica_metatype tmpMeta25;
          modelica_boolean tmp26;
          modelica_boolean tmp27;
          modelica_metatype tmpMeta28;
          modelica_boolean tmp29 = 0;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta25,6,2) == 0) goto tmp4_end;
          
          _e = tmp5_1;
          _diffType = tmp5_4;
          { /* match expression */
            modelica_metatype tmp32_1;
            tmp32_1 = _diffType;
            {
              volatile mmc_switch_type tmp32;
              int tmp33;
              tmp32 = 0;
              for (; tmp32 < 2; tmp32++) {
                switch (MMC_SWITCH_CAST(tmp32)) {
                case 0: {
                  if (mmc__uniontype__metarecord__typedef__equal(tmp32_1,4,1) == 0) goto tmp31_end;
                  
                  /* Pattern matching succeeded */
                  tmp29 = 0 /* false */;
                  goto tmp31_done;
                }
                case 1: {
                  
                  /* Pattern matching succeeded */
                  tmp29 = 1 /* true */;
                  goto tmp31_done;
                }
                }
                goto tmp31_end;
                tmp31_end: ;
              }
              goto goto_30;
              goto_30:;
              goto goto_2;
              goto tmp31_done;
              tmp31_done:;
            }
          }
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!tmp29) goto tmp4_end;
          /* Pattern-matching assignment */
          tmp26 = omc_Flags_isSet(threadData, _OMC_LIT151);
          if (1 /* true */ != tmp26) goto goto_2;

          /* Pattern-matching tuple assignment */
          tmpMeta28 = omc_Expression_extendArrExp(threadData, _e, 0 /* false */, &tmp27);
          _e1 = tmpMeta28;
          if (1 /* true */ != tmp27) goto goto_2;
          tmpMeta[0+0] = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter, &tmpMeta[0+1]);
          goto tmp4_done;
        }
        case 4: {
          modelica_metatype tmpMeta34;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta34,3,0) == 0) goto tmp4_end;
          
          _e = tmp5_1;
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp4_done;
        }
        case 5: {
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          modelica_boolean tmp37;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
          tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          
          _cr = tmpMeta35;
          _tp = tmpMeta36;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp37 = omc_ComponentReference_crefEqual(threadData, _cr, _inDiffwrtCref);
          if (1 /* true */ != tmp37) goto goto_2;

          _one = omc_Expression_makeOneExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _one;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp4_done;
        }
        case 6: {
          modelica_metatype tmpMeta38;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_4,1,0) == 0) goto tmp4_end;
          
          _tp = tmpMeta38;
          tmp5 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
          _zero = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _zero;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp4_done;
        }
        case 7: {
          modelica_metatype tmpMeta39;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_4,3,0) == 0) goto tmp4_end;
          
          _tp = tmpMeta39;
          /* Pattern matching succeeded */
          _zero = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _zero;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp4_done;
        }
        case 8: {
          modelica_metatype tmpMeta40;
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          modelica_boolean tmp44;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
          tmpMeta41 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          tmpMeta42 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_3), 4));
          if (optionNone(tmpMeta42)) goto tmp4_end;
          tmpMeta43 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta42), 1));
          
          _cr = tmpMeta40;
          _tp = tmpMeta41;
          _knvars = tmpMeta43;
          /* Pattern matching succeeded */
          _var = omc_BackendVariable_getVarSingle(threadData, _cr, _knvars, NULL);

          /* Pattern-matching assignment */
          tmp44 = omc_BackendVariable_isVarOnTopLevelAndInput(threadData, _var);
          if (0 /* false */ != tmp44) goto goto_2;

          _zero = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _zero;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp4_done;
        }
        case 9: {
          modelica_metatype tmpMeta45;
          modelica_metatype tmpMeta46;
          modelica_metatype tmpMeta47;
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta49;
          modelica_metatype tmpMeta50;
          modelica_boolean tmp51;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
          tmpMeta46 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_3), 5));
          if (optionNone(tmpMeta47)) goto tmp4_end;
          tmpMeta48 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta47), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_4,0,0) == 0) goto tmp4_end;
          
          _cr = tmpMeta45;
          _tp = tmpMeta46;
          _timevars = tmpMeta48;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta49 = omc_BackendVariable_getVarSingle(threadData, _cr, _timevars, NULL);
          tmpMeta50 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta49), 3));
          _kind = tmpMeta50;

          /* Pattern-matching assignment */
          tmp51 = (listMember(_kind, _OMC_LIT153) || (!omc_Types_isReal(threadData, _tp)));
          if (1 /* true */ != tmp51) goto goto_2;

          _zero = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _zero;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp4_done;
        }
        case 10: {
          modelica_metatype tmpMeta52;
          modelica_metatype tmpMeta53;
          modelica_metatype tmpMeta54;
          modelica_metatype tmpMeta55;
          modelica_boolean tmp56;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta52 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
          tmpMeta53 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          tmpMeta54 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_3), 3));
          if (optionNone(tmpMeta54)) goto tmp4_end;
          tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta54), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_4,0,0) == 0) goto tmp4_end;
          
          _cr = tmpMeta52;
          _tp = tmpMeta53;
          _timevars = tmpMeta55;
          /* Pattern matching succeeded */
          _var = omc_BackendVariable_getVarSingle(threadData, _cr, _timevars, NULL);

          /* Pattern-matching assignment */
          tmp56 = omc_BackendVariable_isDummyStateVar(threadData, _var);
          if (1 /* true */ != tmp56) goto goto_2;

          _cr = omc_ComponentReference_crefPrefixDer(threadData, _cr);

          _res = omc_Expression_makeCrefExp(threadData, _cr, _tp);
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp4_done;
        }
        case 11: {
          modelica_metatype tmpMeta57;
          modelica_metatype tmpMeta58;
          modelica_metatype tmpMeta59;
          modelica_metatype tmpMeta60;
          modelica_metatype tmpMeta61;
          modelica_metatype tmpMeta62;
          modelica_metatype tmpMeta63;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta57 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
          tmpMeta58 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          tmpMeta59 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_3), 3));
          if (optionNone(tmpMeta59)) goto tmp4_end;
          tmpMeta60 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta59), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_4,0,0) == 0) goto tmp4_end;
          
          _e = tmp5_1;
          _cr = tmpMeta57;
          _tp = tmpMeta58;
          _timevars = tmpMeta60;
          tmp5 += 8; /* Pattern matching succeeded; we may skip some cases if we fail */
          omc_BackendVariable_getVarSingle(threadData, _cr, _timevars, NULL);

          tmpMeta61 = mmc_mk_cons(_e, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta62 = mmc_mk_box8(3, &DAE_CallAttributes_CALL__ATTR__desc, _tp, mmc_mk_boolean(0 /* false */), mmc_mk_boolean(1 /* true */), mmc_mk_boolean(0 /* false */), mmc_mk_boolean(0 /* false */), _OMC_LIT70, _OMC_LIT94);
          tmpMeta63 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _OMC_LIT154, tmpMeta61, tmpMeta62);
          _res = tmpMeta63;
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp4_done;
        }
        case 12: {
          modelica_metatype tmpMeta64;
          modelica_metatype tmpMeta65;
          modelica_metatype tmpMeta66;
          modelica_metatype tmpMeta67;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta64 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
          tmpMeta65 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          tmpMeta66 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_3), 3));
          if (optionNone(tmpMeta66)) goto tmp4_end;
          tmpMeta67 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta66), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_4,2,0) == 0) goto tmp4_end;
          
          _cr = tmpMeta64;
          _tp = tmpMeta65;
          _timevars = tmpMeta67;
          /* Pattern matching succeeded */
          _cr1 = omc_ComponentReference_crefStripLastSubs(threadData, _cr);

          omc_BackendVariable_getVar(threadData, _cr1, _timevars, NULL);

          _zero = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _zero;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp4_done;
        }
        case 13: {
          modelica_metatype tmpMeta68;
          modelica_metatype tmpMeta69;
          modelica_metatype tmpMeta70;
          modelica_metatype tmpMeta71;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta68 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
          tmpMeta69 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          tmpMeta70 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_3), 3));
          if (optionNone(tmpMeta70)) goto tmp4_end;
          tmpMeta71 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_4,2,0) == 0) goto tmp4_end;
          
          _cr = tmpMeta68;
          _tp = tmpMeta69;
          _timevars = tmpMeta71;
          /* Pattern matching succeeded */
          omc_BackendVariable_getVar(threadData, _cr, _timevars, NULL);

          _zero = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _zero;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp4_done;
        }
        case 14: {
          modelica_metatype tmpMeta72;
          modelica_metatype tmpMeta73;
          modelica_metatype tmpMeta74;
          modelica_metatype tmpMeta75;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta72 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
          tmpMeta73 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          tmpMeta74 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_3), 8));
          if (optionNone(tmpMeta74)) goto tmp4_end;
          tmpMeta75 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta74), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_4,2,0) == 0) goto tmp4_end;
          
          _cr = tmpMeta72;
          _tp = tmpMeta73;
          _matrixName = tmpMeta75;
          tmp5 += 6; /* Pattern matching succeeded; we may skip some cases if we fail */
          _cr = omc_ComponentReference_prependStringCref(threadData, _OMC_LIT147, _cr);

          _cr = omc_ComponentReference_prependStringCref(threadData, _matrixName, _cr);

          _res = omc_Expression_makeCrefExp(threadData, _cr, _tp);
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp4_done;
        }
        case 15: {
          modelica_metatype tmpMeta76;
          modelica_metatype tmpMeta77;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta76 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_4,4,1) == 0) goto tmp4_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_2,1,3) == 0) goto tmp4_end;
          tmpMeta77 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_2), 2));
          if (1 != MMC_STRLEN(tmpMeta77) || strcmp(MMC_STRINGDATA(_OMC_LIT46), MMC_STRINGDATA(tmpMeta77)) != 0) goto tmp4_end;
          
          _tp = tmpMeta76;
          /* Pattern matching succeeded */
          _res = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp4_done;
        }
        case 16: {
          modelica_metatype tmpMeta78;
          modelica_metatype tmpMeta79;
          modelica_metatype tmpMeta80;
          modelica_metatype tmpMeta81;
          modelica_metatype tmpMeta82;
          modelica_metatype tmpMeta83;
          modelica_metatype tmpMeta84;
          modelica_metatype tmpMeta85;
          modelica_metatype tmpMeta86;
          modelica_metatype tmpMeta87;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta78 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
          tmpMeta79 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_4,4,1) == 0) goto tmp4_end;
          tmpMeta80 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_3), 2));
          if (optionNone(tmpMeta80)) goto tmp4_end;
          tmpMeta81 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta80), 1));
          tmpMeta82 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_3), 8));
          if (optionNone(tmpMeta82)) goto tmp4_end;
          tmpMeta83 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta82), 1));
          
          _cr = tmpMeta78;
          _tp = tmpMeta79;
          _timevars = tmpMeta81;
          _matrixName = tmpMeta83;
          /* Pattern matching succeeded */
          _scalarLst = omc_BackendVariable_getVar(threadData, _cr, _timevars, NULL);

          _arrayType = omc_ComponentReference_crefTypeFull(threadData, _cr);

          if(((!listEmpty(_scalarLst)) && (listLength(_scalarLst) != omc_Types_getDimensionProduct(threadData, _arrayType))))
          {
            _scalarCrefs = omc_ComponentReference_expandCref(threadData, _cr, 1 /* true */);

            _outFunctionTree = _inFunctionTree;

            {
              modelica_metatype _cref;
              for (tmpMeta84 = _scalarCrefs; !listEmpty(tmpMeta84); tmpMeta84=MMC_CDR(tmpMeta84))
              {
                _cref = MMC_CAR(tmpMeta84);
                _res1 = omc_Differentiate_differentiateCrefs(threadData, omc_Expression_crefExp(threadData, _cref), _inDiffwrtCref, _inInputData, _inDiffType, _outFunctionTree, _maxIter ,&_outFunctionTree);

                tmpMeta85 = mmc_mk_cons(_res1, _diffed_exps);
                _diffed_exps = tmpMeta85;
              }
            }

            _res = omc_Expression_listToArray(threadData, listReverse(_diffed_exps), omc_Types_getDimensions(threadData, _arrayType));
          }
          else
          {
            _cr = omc_Differentiate_createSeedCrefName(threadData, _cr, _matrixName);

            tmpMeta87 = mmc_mk_box3(9, &DAE_Exp_CREF__desc, _cr, _tp);
            _res = tmpMeta87;
          }
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp4_done;
        }
        case 17: {
          modelica_metatype tmpMeta88;
          modelica_metatype tmpMeta89;
          modelica_metatype tmpMeta90;
          modelica_metatype tmpMeta91;
          modelica_metatype tmpMeta92;
          modelica_metatype tmpMeta93;
          modelica_metatype tmpMeta94;
          modelica_metatype tmpMeta95;
          modelica_metatype tmpMeta96;
          modelica_boolean tmp97;
          modelica_metatype tmpMeta98;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta88 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
          tmpMeta89 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_4,4,1) == 0) goto tmp4_end;
          tmpMeta90 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_3), 5));
          if (optionNone(tmpMeta90)) goto tmp4_end;
          tmpMeta91 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta90), 1));
          tmpMeta92 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_3), 8));
          if (optionNone(tmpMeta92)) goto tmp4_end;
          tmpMeta93 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta92), 1));
          
          _cr = tmpMeta88;
          _tp = tmpMeta89;
          _timevars = tmpMeta91;
          _matrixName = tmpMeta93;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta94 = omc_BackendVariable_getVar(threadData, _cr, _timevars, NULL);
          if (listEmpty(tmpMeta94)) goto goto_2;
          tmpMeta95 = MMC_CAR(tmpMeta94);
          tmpMeta96 = MMC_CDR(tmpMeta94);
          _var = tmpMeta95;

          /* Pattern-matching assignment */
          tmp97 = omc_BackendVariable_isStateVar(threadData, _var);
          if (0 /* false */ != tmp97) goto goto_2;

          _cr = omc_ComponentReference_createDifferentiatedCrefName(threadData, _cr, _inDiffwrtCref, _matrixName);

          tmpMeta98 = mmc_mk_box3(9, &DAE_Exp_CREF__desc, _cr, _tp);
          _res = tmpMeta98;
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp4_done;
        }
        case 18: {
          modelica_metatype tmpMeta99;
          modelica_metatype tmpMeta100;
          modelica_metatype tmpMeta101;
          modelica_metatype tmpMeta102;
          modelica_metatype tmpMeta103;
          modelica_metatype tmpMeta104;
          modelica_metatype tmpMeta105;
          modelica_metatype tmpMeta106;
          modelica_metatype tmpMeta107;
          modelica_boolean tmp108;
          modelica_metatype tmpMeta109;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta99 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
          tmpMeta100 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_4,4,1) == 0) goto tmp4_end;
          tmpMeta101 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_3), 3));
          if (optionNone(tmpMeta101)) goto tmp4_end;
          tmpMeta102 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta101), 1));
          tmpMeta103 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_3), 8));
          if (optionNone(tmpMeta103)) goto tmp4_end;
          tmpMeta104 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta103), 1));
          
          _cr = tmpMeta99;
          _tp = tmpMeta100;
          _timevars = tmpMeta102;
          _matrixName = tmpMeta104;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta105 = omc_BackendVariable_getVar(threadData, _cr, _timevars, NULL);
          if (listEmpty(tmpMeta105)) goto goto_2;
          tmpMeta106 = MMC_CAR(tmpMeta105);
          tmpMeta107 = MMC_CDR(tmpMeta105);
          _var = tmpMeta106;

          /* Pattern-matching assignment */
          tmp108 = omc_BackendVariable_isStateVar(threadData, _var);
          if (0 /* false */ != tmp108) goto goto_2;

          _cr = omc_ComponentReference_createDifferentiatedCrefName(threadData, _cr, _inDiffwrtCref, _matrixName);

          tmpMeta109 = mmc_mk_box3(9, &DAE_Exp_CREF__desc, _cr, _tp);
          _res = tmpMeta109;
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp4_done;
        }
        case 19: {
          modelica_metatype tmpMeta110;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta110 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_4,4,1) == 0) goto tmp4_end;
          
          _tp = tmpMeta110;
          tmp5 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
          _zero = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _zero;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp4_done;
        }
        case 20: {
          modelica_metatype tmpMeta111;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          tmpMeta111 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_4,0,0) == 0) goto tmp4_end;
          
          _tp = tmpMeta111;
          /* Pattern matching succeeded */
          _zero = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta[0+0] = _zero;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp4_done;
        }
        case 21: {
          modelica_boolean tmp112;
          modelica_metatype tmpMeta113;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp112 = omc_Flags_isSet(threadData, _OMC_LIT20);
          if (1 /* true */ != tmp112) goto goto_2;

          _s1 = omc_ExpressionDump_printExpStr(threadData, _inExp);

          _se1 = omc_Types_printTypeStr(threadData, omc_Expression_typeof(threadData, _inExp));

          _s2 = omc_ComponentReference_printComponentRefStr(threadData, _inDiffwrtCref);

          tmpMeta113 = mmc_mk_cons(_OMC_LIT155, mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT156, mmc_mk_cons(_se1, mmc_mk_cons(_OMC_LIT87, mmc_mk_cons(_s2, mmc_mk_cons(_OMC_LIT88, MMC_REFSTRUCTLIT(mmc_nil))))))));
          _serr = stringAppendList(tmpMeta113);

          omc_Debug_trace(threadData, _serr);
          goto goto_2;
          goto tmp4_done;
        }
        }
        goto tmp4_end;
        tmp4_end: ;
      }
      goto goto_2;
      tmp4_done:
      (void)tmp5;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp4_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp5 < 22) {
        goto tmp4_top;
      }
      MMC_THROW_INTERNAL();
      tmp4_done2:;
    }
  }
  _outDiffedExp = tmpMeta[0+0];
  _outFunctionTree = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outFunctionTree) { *out_outFunctionTree = _outFunctionTree; }
  return _outDiffedExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiateCrefs(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype _maxIter, modelica_metatype *out_outFunctionTree)
{
  modelica_integer tmp1;
  modelica_metatype _outDiffedExp = NULL;
  tmp1 = mmc_unbox_integer(_maxIter);
  _outDiffedExp = omc_Differentiate_differentiateCrefs(threadData, _inExp, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, tmp1, out_outFunctionTree);
  /* skip box _outDiffedExp; DAE.Exp */
  /* skip box _outFunctionTree; DAE.AvlTreePathFunction.Tree */
  return _outDiffedExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_makeAssignmentfromTuple(threadData_t *threadData, modelica_metatype _inTpl, modelica_metatype _source, modelica_metatype _inFunctionTree)
{
  modelica_metatype _outStmt = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outStmt has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inTpl;
    {
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _tp = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e1 has no default value.
      // _e2 has no default value.
      // _tp has no default value.
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,6,2) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          _e1 = tmpMeta6;
          _tp = tmpMeta7;
          _e2 = tmpMeta8;
          /* Pattern matching succeeded */
          tmpMeta9 = mmc_mk_box5(3, &DAE_Statement_STMT__ASSIGN__desc, _tp, _e1, _e2, _source);
          tmpMeta1 = mmc_mk_some(tmpMeta9);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,13,3) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          _e1 = tmpMeta10;
          _e2 = tmpMeta11;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_Expression_isRecordCall(threadData, _e1, _inFunctionTree)) goto tmp3_end;
          _tp = omc_Expression_typeof(threadData, _e1);
          tmpMeta12 = mmc_mk_box5(3, &DAE_Statement_STMT__ASSIGN__desc, _tp, _e1, _e2, _source);
          tmpMeta1 = mmc_mk_some(tmpMeta12);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          _e1 = tmpMeta13;
          _e2 = tmpMeta14;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_Expression_isZero(threadData, _e1)) goto tmp3_end;
          omc_Expression_typeof(threadData, _e2);
          tmpMeta1 = mmc_mk_none();
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outStmt = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outStmt;
}

PROTECTED_FUNCTION_STATIC modelica_boolean omc_Differentiate_isDiscreteAssignStatment(threadData_t *threadData, modelica_metatype _inStmt)
{
  modelica_boolean _out;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _out has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inStmt;
    {
      modelica_metatype _tp = NULL;
      int tmp4;
      // _tp has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          modelica_metatype tmpMeta5;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _tp = tmpMeta5;
          /* Pattern matching succeeded */
          tmp1 = omc_Types_isDiscreteType(threadData, _tp);
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,4) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _tp = tmpMeta6;
          /* Pattern matching succeeded */
          tmp1 = omc_Types_isDiscreteType(threadData, _tp);
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,4) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _tp = tmpMeta7;
          /* Pattern matching succeeded */
          tmp1 = omc_Types_isDiscreteType(threadData, _tp);
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _out = tmp1;
  _return: OMC_LABEL_UNUSED
  return _out;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_isDiscreteAssignStatment(threadData_t *threadData, modelica_metatype _inStmt)
{
  modelica_boolean _out;
  modelica_metatype out_out;
  _out = omc_Differentiate_isDiscreteAssignStatment(threadData, _inStmt);
  out_out = mmc_mk_icon(_out);
  return out_out;
}

static modelica_metatype closure7_Differentiate_differentiateExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inDiffwrtCref, modelica_metatype inInputData, modelica_metatype inDiffType, modelica_metatype inFunctionTree, modelica_metatype tmp20)
{
  modelica_metatype maxIter = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_Differentiate_differentiateExp(thData, inExp, inDiffwrtCref, inInputData, inDiffType, inFunctionTree, maxIter, tmp20);
}static modelica_metatype closure8_Differentiate_differentiateExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inDiffwrtCref, modelica_metatype inInputData, modelica_metatype inDiffType, modelica_metatype inFunctionTree, modelica_metatype tmp38)
{
  modelica_metatype maxIter = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_Differentiate_differentiateExp(thData, inExp, inDiffwrtCref, inInputData, inDiffType, inFunctionTree, maxIter, tmp38);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateStatements(threadData_t *threadData, modelica_metatype _inStmts, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inStmtsAccum, modelica_metatype _inFunctionTree, modelica_integer _maxIter, modelica_metatype *out_outFunctionTree)
{
  modelica_metatype _outDiffedStmts = NULL;
  modelica_metatype _outFunctionTree = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDiffedStmts has no default value.
  // _outFunctionTree has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _inStmts;
    {
      modelica_metatype _cref = NULL;
      modelica_metatype _source = NULL;
      modelica_metatype _lhs = NULL;
      modelica_metatype _rhs = NULL;
      modelica_metatype _derivedLHS = NULL;
      modelica_metatype _derivedRHS = NULL;
      modelica_metatype _functions = NULL;
      modelica_metatype _currStatement = NULL;
      modelica_metatype _stmt = NULL;
      modelica_metatype _dstmt = NULL;
      modelica_metatype _type_ = NULL;
      modelica_metatype _inputData = NULL;
      modelica_metatype _controlVar = NULL;
      modelica_boolean _iterIsArray;
      modelica_boolean _initialCall;
      modelica_string _ident = NULL;
      modelica_metatype _exp = NULL;
      modelica_metatype _elseif_exp = NULL;
      modelica_metatype _elseif_else_ = NULL;
      modelica_metatype _expLst = NULL;
      modelica_metatype _dexpLst = NULL;
      modelica_metatype _expLstRHS = NULL;
      modelica_metatype _exptl = NULL;
      modelica_metatype _statementLst = NULL;
      modelica_metatype _restStatements = NULL;
      modelica_metatype _derivedStatements1 = NULL;
      modelica_metatype _derivedStatements2 = NULL;
      modelica_metatype _else_statementLst = NULL;
      modelica_metatype _elseif_statementLst = NULL;
      modelica_string _s1 = NULL;
      modelica_string _s2 = NULL;
      modelica_metatype _optDerivedStatements1 = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _cref has no default value.
      // _source has no default value.
      // _lhs has no default value.
      // _rhs has no default value.
      // _derivedLHS has no default value.
      // _derivedRHS has no default value.
      // _functions has no default value.
      // _currStatement has no default value.
      // _stmt has no default value.
      // _dstmt has no default value.
      // _type_ has no default value.
      // _inputData has no default value.
      // _controlVar has no default value.
      // _iterIsArray has no default value.
      // _initialCall has no default value.
      // _ident has no default value.
      // _exp has no default value.
      // _elseif_exp has no default value.
      // _elseif_else_ has no default value.
      // _expLst has no default value.
      // _dexpLst has no default value.
      // _expLstRHS has no default value.
      // _exptl has no default value.
      // _statementLst has no default value.
      // _restStatements has no default value.
      // _derivedStatements1 has no default value.
      // _derivedStatements2 has no default value.
      // _else_statementLst has no default value.
      // _elseif_statementLst has no default value.
      // _s1 has no default value.
      // _s2 has no default value.
      // _optDerivedStatements1 has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 19; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          tmp4 += 17; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta[0+0] = listReverse(_inStmtsAccum);
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,4) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 5));
          _currStatement = tmpMeta6;
          _type_ = tmpMeta8;
          _lhs = tmpMeta9;
          _rhs = tmpMeta10;
          _source = tmpMeta11;
          _restStatements = tmpMeta7;
          tmp4 += 16; /* Pattern matching succeeded; we may skip some cases if we fail */
          _derivedLHS = omc_Differentiate_differentiateExp(threadData, _lhs, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_functions);

          _derivedRHS = omc_Differentiate_differentiateExp(threadData, _rhs, _inDiffwrtCref, _inInputData, _inDiffType, _functions, _maxIter ,&_functions);

          _derivedRHS = omc_ExpressionSimplify_simplify(threadData, _derivedRHS, NULL);

          if(omc_Expression_isZero(threadData, _derivedLHS))
          {
            tmpMeta12 = mmc_mk_cons(_currStatement, MMC_REFSTRUCTLIT(mmc_nil));
            _derivedStatements1 = tmpMeta12;
          }
          else
          {
            tmpMeta14 = mmc_mk_box5(3, &DAE_Statement_STMT__ASSIGN__desc, _type_, _derivedLHS, _derivedRHS, _source);
            tmpMeta13 = mmc_mk_cons(tmpMeta14, mmc_mk_cons(_currStatement, MMC_REFSTRUCTLIT(mmc_nil)));
            _derivedStatements1 = tmpMeta13;
          }

          _derivedStatements2 = listAppend(_derivedStatements1, _inStmtsAccum);
          tmpMeta[0+0] = omc_Differentiate_differentiateStatements(threadData, _restStatements, _inDiffwrtCref, _inInputData, _inDiffType, _derivedStatements2, _functions, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta31;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta15 = MMC_CAR(tmp4_1);
          tmpMeta16 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,1,4) == 0) goto tmp3_end;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 3));
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 4));
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 5));
          _currStatement = tmpMeta15;
          _expLst = tmpMeta17;
          _rhs = tmpMeta18;
          _source = tmpMeta19;
          _restStatements = tmpMeta16;
          /* Pattern matching succeeded */
          tmpMeta21 = mmc_mk_box1(0, mmc_mk_integer(_maxIter));
          _dexpLst = omc_List_map3Fold(threadData, _expLst, (modelica_fnptr) mmc_mk_box2(0,closure7_Differentiate_differentiateExp,tmpMeta21), _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree ,&_functions);

          /* Pattern-matching tuple assignment */
          tmpMeta23 = omc_Differentiate_differentiateExp(threadData, _rhs, _inDiffwrtCref, _inInputData, _inDiffType, _functions, _maxIter, &tmpMeta22);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta23,19,1) == 0) goto goto_2;
          tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 2));
          _derivedRHS = tmpMeta23;
          _expLstRHS = tmpMeta24;
          _functions = tmpMeta22;

          /* Pattern-matching tuple assignment */
          tmpMeta25 = omc_ExpressionSimplify_simplify(threadData, _derivedRHS, NULL);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta25,19,1) == 0) goto goto_2;
          tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 2));
          _expLstRHS = tmpMeta26;

          _exptl = omc_List_zip(threadData, _dexpLst, _expLstRHS);

          _optDerivedStatements1 = omc_List_map2(threadData, _exptl, boxvar_Differentiate_makeAssignmentfromTuple, _source, _inFunctionTree);

          {
            modelica_metatype __omcQ_24tmpVar11;
            modelica_metatype* tmp28;
            modelica_metatype tmpMeta29;
            modelica_metatype __omcQ_24tmpVar10;
            modelica_integer tmp30;
            modelica_metatype _s_loopVar = 0;
            modelica_metatype _s;
            _s_loopVar = _optDerivedStatements1;
            tmpMeta29 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar11 = tmpMeta29; /* defaultValue */
            tmp28 = &__omcQ_24tmpVar11;
            while(1) {
              tmp30 = 1;
              while (!listEmpty(_s_loopVar)) {
                _s = MMC_CAR(_s_loopVar);
                _s_loopVar = MMC_CDR(_s_loopVar);
                if (isSome(_s)) {
                  tmp30--;
                  break;
                }
              }
              if (tmp30 == 0) {
                __omcQ_24tmpVar10 = omc_Util_getOption(threadData, _s);
                *tmp28 = mmc_mk_cons(__omcQ_24tmpVar10,0);
                tmp28 = &MMC_CDR(*tmp28);
              } else if (tmp30 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp28 = mmc_mk_nil();
            tmpMeta27 = __omcQ_24tmpVar11;
          }
          _derivedStatements1 = tmpMeta27;

          tmpMeta31 = mmc_mk_cons(_currStatement, MMC_REFSTRUCTLIT(mmc_nil));
          _derivedStatements2 = listAppend(_derivedStatements1, tmpMeta31);

          _derivedStatements1 = listAppend(_derivedStatements2, _inStmtsAccum);
          tmpMeta[0+0] = omc_Differentiate_differentiateStatements(threadData, _restStatements, _inDiffwrtCref, _inInputData, _inDiffType, _derivedStatements1, _functions, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          modelica_metatype tmpMeta44;
          modelica_metatype tmpMeta45;
          modelica_metatype tmpMeta46;
          modelica_metatype tmpMeta50;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta32 = MMC_CAR(tmp4_1);
          tmpMeta33 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta32,1,4) == 0) goto tmp3_end;
          tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 2));
          tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 3));
          tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 4));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta36,13,3) == 0) goto tmp3_end;
          tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 5));
          _currStatement = tmpMeta32;
          _type_ = tmpMeta34;
          _expLst = tmpMeta35;
          _rhs = tmpMeta36;
          _source = tmpMeta37;
          _restStatements = tmpMeta33;
          tmp4 += 14; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta39 = mmc_mk_box1(0, mmc_mk_integer(_maxIter));
          _dexpLst = omc_List_map3Fold(threadData, _expLst, (modelica_fnptr) mmc_mk_box2(0,closure8_Differentiate_differentiateExp,tmpMeta39), _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree ,&_functions);

          /* Pattern-matching tuple assignment */
          tmpMeta41 = omc_Differentiate_differentiateExp(threadData, _rhs, _inDiffwrtCref, _inInputData, _inDiffType, _functions, _maxIter, &tmpMeta40);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta41,13,3) == 0) goto goto_2;
          tmpMeta42 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta41), 4));
          tmpMeta43 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta42), 2));
          _derivedRHS = tmpMeta41;
          _type_ = tmpMeta43;
          _functions = tmpMeta40;

          tmpMeta45 = mmc_mk_box5(4, &DAE_Statement_STMT__TUPLE__ASSIGN__desc, _type_, _dexpLst, _derivedRHS, _source);
          tmpMeta44 = mmc_mk_cons(mmc_mk_some(tmpMeta45), MMC_REFSTRUCTLIT(mmc_nil));
          _optDerivedStatements1 = tmpMeta44;

          {
            modelica_metatype __omcQ_24tmpVar13;
            modelica_metatype* tmp47;
            modelica_metatype tmpMeta48;
            modelica_metatype __omcQ_24tmpVar12;
            modelica_integer tmp49;
            modelica_metatype _s_loopVar = 0;
            modelica_metatype _s;
            _s_loopVar = _optDerivedStatements1;
            tmpMeta48 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar13 = tmpMeta48; /* defaultValue */
            tmp47 = &__omcQ_24tmpVar13;
            while(1) {
              tmp49 = 1;
              while (!listEmpty(_s_loopVar)) {
                _s = MMC_CAR(_s_loopVar);
                _s_loopVar = MMC_CDR(_s_loopVar);
                if (isSome(_s)) {
                  tmp49--;
                  break;
                }
              }
              if (tmp49 == 0) {
                __omcQ_24tmpVar12 = omc_Util_getOption(threadData, _s);
                *tmp47 = mmc_mk_cons(__omcQ_24tmpVar12,0);
                tmp47 = &MMC_CDR(*tmp47);
              } else if (tmp49 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp47 = mmc_mk_nil();
            tmpMeta46 = __omcQ_24tmpVar13;
          }
          _derivedStatements1 = tmpMeta46;

          tmpMeta50 = mmc_mk_cons(_currStatement, MMC_REFSTRUCTLIT(mmc_nil));
          _derivedStatements2 = listAppend(_derivedStatements1, tmpMeta50);

          _derivedStatements1 = listAppend(_derivedStatements2, _inStmtsAccum);
          tmpMeta[0+0] = omc_Differentiate_differentiateStatements(threadData, _restStatements, _inDiffwrtCref, _inInputData, _inDiffType, _derivedStatements1, _functions, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta51;
          modelica_metatype tmpMeta52;
          modelica_metatype tmpMeta53;
          modelica_metatype tmpMeta54;
          modelica_metatype tmpMeta55;
          modelica_metatype tmpMeta56;
          modelica_metatype tmpMeta57;
          modelica_metatype tmpMeta58;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta51 = MMC_CAR(tmp4_1);
          tmpMeta52 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta51,2,4) == 0) goto tmp3_end;
          tmpMeta53 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta51), 2));
          tmpMeta54 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta51), 3));
          tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta51), 4));
          tmpMeta56 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta51), 5));
          _currStatement = tmpMeta51;
          _type_ = tmpMeta53;
          _lhs = tmpMeta54;
          _rhs = tmpMeta55;
          _source = tmpMeta56;
          _restStatements = tmpMeta52;
          tmp4 += 13; /* Pattern matching succeeded; we may skip some cases if we fail */
          _derivedLHS = omc_Differentiate_differentiateExp(threadData, _lhs, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_functions);

          _derivedRHS = omc_Differentiate_differentiateExp(threadData, _rhs, _inDiffwrtCref, _inInputData, _inDiffType, _functions, _maxIter ,&_functions);

          _derivedRHS = omc_ExpressionSimplify_simplify(threadData, _derivedRHS, NULL);

          tmpMeta58 = mmc_mk_box5(5, &DAE_Statement_STMT__ASSIGN__ARR__desc, _type_, _derivedLHS, _derivedRHS, _source);
          tmpMeta57 = mmc_mk_cons(tmpMeta58, mmc_mk_cons(_currStatement, MMC_REFSTRUCTLIT(mmc_nil)));
          _derivedStatements1 = tmpMeta57;

          _derivedStatements2 = listAppend(_derivedStatements1, _inStmtsAccum);
          tmpMeta[0+0] = omc_Differentiate_differentiateStatements(threadData, _restStatements, _inDiffwrtCref, _inInputData, _inDiffType, _derivedStatements2, _functions, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta59;
          modelica_metatype tmpMeta60;
          modelica_metatype tmpMeta61;
          modelica_metatype tmpMeta62;
          modelica_integer tmp63;
          modelica_metatype tmpMeta64;
          modelica_metatype tmpMeta65;
          modelica_metatype tmpMeta66;
          modelica_metatype tmpMeta67;
          modelica_metatype tmpMeta68;
          modelica_metatype tmpMeta69;
          modelica_metatype tmpMeta70;
          modelica_metatype tmpMeta71;
          modelica_metatype tmpMeta72;
          modelica_metatype tmpMeta73;
          modelica_metatype tmpMeta74;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta59 = MMC_CAR(tmp4_1);
          tmpMeta60 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta59,4,6) == 0) goto tmp3_end;
          tmpMeta61 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta59), 2));
          tmpMeta62 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta59), 3));
          tmp63 = mmc_unbox_integer(tmpMeta62);
          tmpMeta64 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta59), 4));
          tmpMeta65 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta59), 5));
          tmpMeta66 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta59), 6));
          tmpMeta67 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta59), 7));
          _type_ = tmpMeta61;
          _iterIsArray = tmp63  /* pattern as ty=Boolean */;
          _ident = tmpMeta64;
          _exp = tmpMeta65;
          _statementLst = tmpMeta66;
          _source = tmpMeta67;
          _restStatements = tmpMeta60;
          tmp4 += 12; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta68 = MMC_REFSTRUCTLIT(mmc_nil);
          _cref = omc_ComponentReference_makeCrefIdent(threadData, _ident, _OMC_LIT157, tmpMeta68);

          tmpMeta69 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta70 = mmc_mk_box19(3, &BackendDAE_Var_VAR__desc, _cref, _OMC_LIT152, _OMC_LIT39, _OMC_LIT158, _OMC_LIT47, mmc_mk_none(), mmc_mk_none(), tmpMeta69, _OMC_LIT44, mmc_mk_none(), mmc_mk_none(), mmc_mk_none(), mmc_mk_none(), _OMC_LIT159, _OMC_LIT160, mmc_mk_boolean(0 /* false */), mmc_mk_boolean(0 /* false */), mmc_mk_boolean(0 /* false */));
          _controlVar = tmpMeta70;

          tmpMeta71 = mmc_mk_cons(_controlVar, MMC_REFSTRUCTLIT(mmc_nil));
          _inputData = omc_Differentiate_addGlobalVars(threadData, tmpMeta71, _inInputData);

          tmpMeta72 = MMC_REFSTRUCTLIT(mmc_nil);
          _derivedStatements1 = omc_Differentiate_differentiateStatements(threadData, _statementLst, _inDiffwrtCref, _inputData, _inDiffType, tmpMeta72, _inFunctionTree, _maxIter ,&_functions);

          tmpMeta74 = mmc_mk_box7(7, &DAE_Statement_STMT__FOR__desc, _type_, mmc_mk_boolean(_iterIsArray), _ident, _exp, _derivedStatements1, _source);
          tmpMeta73 = mmc_mk_cons(tmpMeta74, MMC_REFSTRUCTLIT(mmc_nil));
          _derivedStatements1 = tmpMeta73;

          _derivedStatements2 = listAppend(_derivedStatements1, _inStmtsAccum);
          tmpMeta[0+0] = omc_Differentiate_differentiateStatements(threadData, _restStatements, _inDiffwrtCref, _inInputData, _inDiffType, _derivedStatements2, _functions, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta75;
          modelica_metatype tmpMeta76;
          modelica_metatype tmpMeta77;
          modelica_metatype tmpMeta78;
          modelica_metatype tmpMeta79;
          modelica_metatype tmpMeta80;
          modelica_metatype tmpMeta81;
          modelica_metatype tmpMeta82;
          modelica_metatype tmpMeta83;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta75 = MMC_CAR(tmp4_1);
          tmpMeta76 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta75,3,4) == 0) goto tmp3_end;
          tmpMeta77 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta75), 2));
          tmpMeta78 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta75), 3));
          tmpMeta79 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta75), 4));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta79,0,0) == 0) goto tmp3_end;
          tmpMeta80 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta75), 5));
          _exp = tmpMeta77;
          _statementLst = tmpMeta78;
          _source = tmpMeta80;
          _restStatements = tmpMeta76;
          tmp4 += 11; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta81 = MMC_REFSTRUCTLIT(mmc_nil);
          _derivedStatements1 = omc_Differentiate_differentiateStatements(threadData, _statementLst, _inDiffwrtCref, _inInputData, _inDiffType, tmpMeta81, _inFunctionTree, _maxIter ,&_functions);

          tmpMeta83 = mmc_mk_box5(6, &DAE_Statement_STMT__IF__desc, _exp, _derivedStatements1, _OMC_LIT161, _source);
          tmpMeta82 = mmc_mk_cons(tmpMeta83, MMC_REFSTRUCTLIT(mmc_nil));
          _derivedStatements1 = tmpMeta82;

          _derivedStatements2 = listAppend(_derivedStatements1, _inStmtsAccum);
          tmpMeta[0+0] = omc_Differentiate_differentiateStatements(threadData, _restStatements, _inDiffwrtCref, _inInputData, _inDiffType, _derivedStatements2, _functions, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta84;
          modelica_metatype tmpMeta85;
          modelica_metatype tmpMeta86;
          modelica_metatype tmpMeta87;
          modelica_metatype tmpMeta88;
          modelica_metatype tmpMeta89;
          modelica_metatype tmpMeta90;
          modelica_metatype tmpMeta91;
          modelica_metatype tmpMeta92;
          modelica_metatype tmpMeta93;
          modelica_metatype tmpMeta94;
          modelica_metatype tmpMeta95;
          modelica_metatype tmpMeta96;
          modelica_metatype tmpMeta97;
          modelica_metatype tmpMeta98;
          modelica_metatype tmpMeta99;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta84 = MMC_CAR(tmp4_1);
          tmpMeta85 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta84,3,4) == 0) goto tmp3_end;
          tmpMeta86 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta84), 2));
          tmpMeta87 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta84), 3));
          tmpMeta88 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta84), 4));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta88,1,3) == 0) goto tmp3_end;
          tmpMeta89 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta88), 2));
          tmpMeta90 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta88), 3));
          tmpMeta91 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta88), 4));
          tmpMeta92 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta84), 5));
          _exp = tmpMeta86;
          _statementLst = tmpMeta87;
          _elseif_exp = tmpMeta89;
          _elseif_statementLst = tmpMeta90;
          _elseif_else_ = tmpMeta91;
          _source = tmpMeta92;
          _restStatements = tmpMeta85;
          tmp4 += 10; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta93 = MMC_REFSTRUCTLIT(mmc_nil);
          _derivedStatements1 = omc_Differentiate_differentiateStatements(threadData, _statementLst, _inDiffwrtCref, _inInputData, _inDiffType, tmpMeta93, _inFunctionTree, _maxIter ,&_functions);

          tmpMeta95 = mmc_mk_box5(6, &DAE_Statement_STMT__IF__desc, _elseif_exp, _elseif_statementLst, _elseif_else_, _source);
          tmpMeta94 = mmc_mk_cons(tmpMeta95, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta96 = MMC_REFSTRUCTLIT(mmc_nil);
          _derivedStatements2 = omc_Differentiate_differentiateStatements(threadData, tmpMeta94, _inDiffwrtCref, _inInputData, _inDiffType, tmpMeta96, _functions, _maxIter ,&_functions);

          tmpMeta98 = mmc_mk_box2(5, &DAE_Else_ELSE__desc, _derivedStatements2);
          tmpMeta99 = mmc_mk_box5(6, &DAE_Statement_STMT__IF__desc, _exp, _derivedStatements1, tmpMeta98, _source);
          tmpMeta97 = mmc_mk_cons(tmpMeta99, MMC_REFSTRUCTLIT(mmc_nil));
          _derivedStatements1 = tmpMeta97;

          _derivedStatements2 = listAppend(_derivedStatements1, _inStmtsAccum);
          tmpMeta[0+0] = omc_Differentiate_differentiateStatements(threadData, _restStatements, _inDiffwrtCref, _inInputData, _inDiffType, _derivedStatements2, _functions, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta100;
          modelica_metatype tmpMeta101;
          modelica_metatype tmpMeta102;
          modelica_metatype tmpMeta103;
          modelica_metatype tmpMeta104;
          modelica_metatype tmpMeta105;
          modelica_metatype tmpMeta106;
          modelica_metatype tmpMeta107;
          modelica_metatype tmpMeta108;
          modelica_metatype tmpMeta109;
          modelica_metatype tmpMeta110;
          modelica_metatype tmpMeta111;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta100 = MMC_CAR(tmp4_1);
          tmpMeta101 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta100,3,4) == 0) goto tmp3_end;
          tmpMeta102 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta100), 2));
          tmpMeta103 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta100), 3));
          tmpMeta104 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta100), 4));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta104,2,1) == 0) goto tmp3_end;
          tmpMeta105 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta104), 2));
          tmpMeta106 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta100), 5));
          _exp = tmpMeta102;
          _statementLst = tmpMeta103;
          _else_statementLst = tmpMeta105;
          _source = tmpMeta106;
          _restStatements = tmpMeta101;
          tmp4 += 9; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta107 = MMC_REFSTRUCTLIT(mmc_nil);
          _derivedStatements1 = omc_Differentiate_differentiateStatements(threadData, _statementLst, _inDiffwrtCref, _inInputData, _inDiffType, tmpMeta107, _inFunctionTree, _maxIter ,&_functions);

          tmpMeta108 = MMC_REFSTRUCTLIT(mmc_nil);
          _derivedStatements2 = omc_Differentiate_differentiateStatements(threadData, _else_statementLst, _inDiffwrtCref, _inInputData, _inDiffType, tmpMeta108, _functions, _maxIter ,&_functions);

          tmpMeta110 = mmc_mk_box2(5, &DAE_Else_ELSE__desc, _derivedStatements2);
          tmpMeta111 = mmc_mk_box5(6, &DAE_Statement_STMT__IF__desc, _exp, _derivedStatements1, tmpMeta110, _source);
          tmpMeta109 = mmc_mk_cons(tmpMeta111, MMC_REFSTRUCTLIT(mmc_nil));
          _derivedStatements1 = tmpMeta109;

          _derivedStatements2 = listAppend(_derivedStatements1, _inStmtsAccum);
          tmpMeta[0+0] = omc_Differentiate_differentiateStatements(threadData, _restStatements, _inDiffwrtCref, _inInputData, _inDiffType, _derivedStatements2, _functions, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta112;
          modelica_metatype tmpMeta113;
          modelica_metatype tmpMeta114;
          modelica_metatype tmpMeta115;
          modelica_metatype tmpMeta116;
          modelica_metatype tmpMeta117;
          modelica_metatype tmpMeta118;
          modelica_metatype tmpMeta119;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta112 = MMC_CAR(tmp4_1);
          tmpMeta113 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta112,6,3) == 0) goto tmp3_end;
          tmpMeta114 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta112), 2));
          tmpMeta115 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta112), 3));
          tmpMeta116 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta112), 4));
          _exp = tmpMeta114;
          _statementLst = tmpMeta115;
          _source = tmpMeta116;
          _restStatements = tmpMeta113;
          tmp4 += 8; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta117 = MMC_REFSTRUCTLIT(mmc_nil);
          _derivedStatements1 = omc_Differentiate_differentiateStatements(threadData, _statementLst, _inDiffwrtCref, _inInputData, _inDiffType, tmpMeta117, _inFunctionTree, _maxIter ,&_functions);

          tmpMeta119 = mmc_mk_box4(9, &DAE_Statement_STMT__WHILE__desc, _exp, _derivedStatements1, _source);
          tmpMeta118 = mmc_mk_cons(tmpMeta119, MMC_REFSTRUCTLIT(mmc_nil));
          _derivedStatements1 = tmpMeta118;

          _derivedStatements2 = listAppend(_derivedStatements1, _inStmtsAccum);
          tmpMeta[0+0] = omc_Differentiate_differentiateStatements(threadData, _restStatements, _inDiffwrtCref, _inInputData, _inDiffType, _derivedStatements2, _functions, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta120;
          modelica_metatype tmpMeta121;
          modelica_metatype tmpMeta122;
          modelica_metatype tmpMeta123;
          modelica_integer tmp124;
          modelica_metatype tmpMeta125;
          modelica_metatype tmpMeta126;
          modelica_metatype tmpMeta127;
          modelica_metatype tmpMeta128;
          modelica_metatype tmpMeta129;
          modelica_metatype tmpMeta130;
          modelica_metatype tmpMeta131;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta120 = MMC_CAR(tmp4_1);
          tmpMeta121 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta120,7,6) == 0) goto tmp3_end;
          tmpMeta122 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta120), 2));
          tmpMeta123 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta120), 4));
          tmp124 = mmc_unbox_integer(tmpMeta123);
          tmpMeta125 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta120), 5));
          tmpMeta126 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta120), 6));
          if (!optionNone(tmpMeta126)) goto tmp3_end;
          tmpMeta127 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta120), 7));
          _exp = tmpMeta122;
          _initialCall = tmp124  /* pattern as ty=Boolean */;
          _statementLst = tmpMeta125;
          _source = tmpMeta127;
          _restStatements = tmpMeta121;
          tmp4 += 7; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta128 = MMC_REFSTRUCTLIT(mmc_nil);
          _derivedStatements1 = omc_Differentiate_differentiateStatements(threadData, _statementLst, _inDiffwrtCref, _inInputData, _inDiffType, tmpMeta128, _inFunctionTree, _maxIter ,&_functions);

          tmpMeta130 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta131 = mmc_mk_box7(10, &DAE_Statement_STMT__WHEN__desc, _exp, tmpMeta130, mmc_mk_boolean(_initialCall), _derivedStatements1, mmc_mk_none(), _source);
          tmpMeta129 = mmc_mk_cons(tmpMeta131, MMC_REFSTRUCTLIT(mmc_nil));
          _derivedStatements1 = tmpMeta129;

          _derivedStatements2 = listAppend(_derivedStatements1, _inStmtsAccum);
          tmpMeta[0+0] = omc_Differentiate_differentiateStatements(threadData, _restStatements, _inDiffwrtCref, _inInputData, _inDiffType, _derivedStatements2, _functions, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta132;
          modelica_metatype tmpMeta133;
          modelica_metatype tmpMeta134;
          modelica_metatype tmpMeta135;
          modelica_integer tmp136;
          modelica_metatype tmpMeta137;
          modelica_metatype tmpMeta138;
          modelica_metatype tmpMeta139;
          modelica_metatype tmpMeta140;
          modelica_metatype tmpMeta141;
          modelica_metatype tmpMeta142;
          modelica_metatype tmpMeta143;
          modelica_metatype tmpMeta144;
          modelica_metatype tmpMeta145;
          modelica_metatype tmpMeta146;
          modelica_metatype tmpMeta147;
          modelica_metatype tmpMeta148;
          modelica_metatype tmpMeta149;
          modelica_metatype tmpMeta150;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta132 = MMC_CAR(tmp4_1);
          tmpMeta133 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta132,7,6) == 0) goto tmp3_end;
          tmpMeta134 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta132), 2));
          tmpMeta135 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta132), 4));
          tmp136 = mmc_unbox_integer(tmpMeta135);
          tmpMeta137 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta132), 5));
          tmpMeta138 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta132), 6));
          if (optionNone(tmpMeta138)) goto tmp3_end;
          tmpMeta139 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta138), 1));
          tmpMeta140 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta132), 7));
          _exp = tmpMeta134;
          _initialCall = tmp136  /* pattern as ty=Boolean */;
          _statementLst = tmpMeta137;
          _stmt = tmpMeta139;
          _source = tmpMeta140;
          _restStatements = tmpMeta133;
          tmp4 += 6; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta141 = MMC_REFSTRUCTLIT(mmc_nil);
          _derivedStatements1 = omc_Differentiate_differentiateStatements(threadData, _statementLst, _inDiffwrtCref, _inInputData, _inDiffType, tmpMeta141, _inFunctionTree, _maxIter ,&_functions);

          /* Pattern-matching tuple assignment */
          tmpMeta143 = mmc_mk_cons(_stmt, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta144 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta145 = omc_Differentiate_differentiateStatements(threadData, tmpMeta143, _inDiffwrtCref, _inInputData, _inDiffType, tmpMeta144, _functions, _maxIter, &tmpMeta142);
          if (listEmpty(tmpMeta145)) goto goto_2;
          tmpMeta146 = MMC_CAR(tmpMeta145);
          tmpMeta147 = MMC_CDR(tmpMeta145);
          if (!listEmpty(tmpMeta147)) goto goto_2;
          _dstmt = tmpMeta146;
          _functions = tmpMeta142;

          tmpMeta149 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta150 = mmc_mk_box7(10, &DAE_Statement_STMT__WHEN__desc, _exp, tmpMeta149, mmc_mk_boolean(_initialCall), _derivedStatements1, mmc_mk_some(_dstmt), _source);
          tmpMeta148 = mmc_mk_cons(tmpMeta150, MMC_REFSTRUCTLIT(mmc_nil));
          _derivedStatements1 = tmpMeta148;

          _derivedStatements2 = listAppend(_derivedStatements1, _inStmtsAccum);
          tmpMeta[0+0] = omc_Differentiate_differentiateStatements(threadData, _restStatements, _inDiffwrtCref, _inInputData, _inDiffType, _derivedStatements2, _functions, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 12: {
          modelica_metatype tmpMeta151;
          modelica_metatype tmpMeta152;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta151 = MMC_CAR(tmp4_1);
          tmpMeta152 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta151,8,4) == 0) goto tmp3_end;
          
          _restStatements = tmpMeta152;
          tmp4 += 5; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta[0+0] = omc_Differentiate_differentiateStatements(threadData, _restStatements, _inDiffwrtCref, _inInputData, _inDiffType, _inStmtsAccum, _inFunctionTree, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 13: {
          modelica_metatype tmpMeta153;
          modelica_metatype tmpMeta154;
          modelica_metatype tmpMeta155;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta153 = MMC_CAR(tmp4_1);
          tmpMeta154 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta153,9,2) == 0) goto tmp3_end;
          
          _currStatement = tmpMeta153;
          _restStatements = tmpMeta154;
          tmp4 += 4; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta155 = mmc_mk_cons(_currStatement, _inStmtsAccum);
          _derivedStatements1 = tmpMeta155;
          tmpMeta[0+0] = omc_Differentiate_differentiateStatements(threadData, _restStatements, _inDiffwrtCref, _inInputData, _inDiffType, _derivedStatements1, _inFunctionTree, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 14: {
          modelica_metatype tmpMeta156;
          modelica_metatype tmpMeta157;
          modelica_metatype tmpMeta158;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta156 = MMC_CAR(tmp4_1);
          tmpMeta157 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta156,10,3) == 0) goto tmp3_end;
          
          _currStatement = tmpMeta156;
          _restStatements = tmpMeta157;
          tmp4 += 3; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta158 = mmc_mk_cons(_currStatement, _inStmtsAccum);
          _derivedStatements1 = tmpMeta158;
          tmpMeta[0+0] = omc_Differentiate_differentiateStatements(threadData, _restStatements, _inDiffwrtCref, _inInputData, _inDiffType, _derivedStatements1, _inFunctionTree, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 15: {
          modelica_metatype tmpMeta159;
          modelica_metatype tmpMeta160;
          modelica_metatype tmpMeta161;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta159 = MMC_CAR(tmp4_1);
          tmpMeta160 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta159,11,2) == 0) goto tmp3_end;
          
          _currStatement = tmpMeta159;
          _restStatements = tmpMeta160;
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta161 = mmc_mk_cons(_currStatement, _inStmtsAccum);
          _derivedStatements1 = tmpMeta161;
          tmpMeta[0+0] = omc_Differentiate_differentiateStatements(threadData, _restStatements, _inDiffwrtCref, _inInputData, _inDiffType, _derivedStatements1, _inFunctionTree, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 16: {
          modelica_metatype tmpMeta162;
          modelica_metatype tmpMeta163;
          modelica_metatype tmpMeta164;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta162 = MMC_CAR(tmp4_1);
          tmpMeta163 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta162,12,1) == 0) goto tmp3_end;
          
          _currStatement = tmpMeta162;
          _restStatements = tmpMeta163;
          tmp4 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta164 = mmc_mk_cons(_currStatement, _inStmtsAccum);
          _derivedStatements1 = tmpMeta164;
          tmpMeta[0+0] = omc_Differentiate_differentiateStatements(threadData, _restStatements, _inDiffwrtCref, _inInputData, _inDiffType, _derivedStatements1, _inFunctionTree, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 17: {
          modelica_metatype tmpMeta165;
          modelica_metatype tmpMeta166;
          modelica_metatype tmpMeta167;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta165 = MMC_CAR(tmp4_1);
          tmpMeta166 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta165,13,1) == 0) goto tmp3_end;
          
          _currStatement = tmpMeta165;
          _restStatements = tmpMeta166;
          /* Pattern matching succeeded */
          tmpMeta167 = mmc_mk_cons(_currStatement, _inStmtsAccum);
          _derivedStatements1 = tmpMeta167;
          tmpMeta[0+0] = omc_Differentiate_differentiateStatements(threadData, _restStatements, _inDiffwrtCref, _inInputData, _inDiffType, _derivedStatements1, _inFunctionTree, _maxIter, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 18: {
          modelica_metatype tmpMeta168;
          modelica_metatype tmpMeta169;
          modelica_metatype tmpMeta170;
          modelica_metatype tmpMeta171;
          modelica_metatype tmpMeta172;
          modelica_metatype tmpMeta173;
          modelica_metatype tmpMeta174;
          
          /* Pattern matching succeeded */
          if(omc_Flags_isSet(threadData, _OMC_LIT20))
          {
            /* Pattern-matching assignment */
            tmpMeta168 = _inStmts;
            if (listEmpty(tmpMeta168)) goto goto_2;
            tmpMeta169 = MMC_CAR(tmpMeta168);
            tmpMeta170 = MMC_CDR(tmpMeta168);
            _currStatement = tmpMeta169;

            _s1 = omc_DAEDump_ppStatementStr(threadData, _currStatement);

            _s2 = omc_ComponentReference_printComponentRefStr(threadData, _inDiffwrtCref);

            tmpMeta171 = stringAppend(_OMC_LIT162,_s1);
            tmpMeta172 = stringAppend(tmpMeta171,_OMC_LIT87);
            tmpMeta173 = stringAppend(tmpMeta172,_s2);
            tmpMeta174 = stringAppend(tmpMeta173,_OMC_LIT88);
            omc_Debug_trace(threadData, tmpMeta174);
          }
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 19) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outDiffedStmts = tmpMeta[0+0];
  _outFunctionTree = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outFunctionTree) { *out_outFunctionTree = _outFunctionTree; }
  return _outDiffedStmts;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiateStatements(threadData_t *threadData, modelica_metatype _inStmts, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inStmtsAccum, modelica_metatype _inFunctionTree, modelica_metatype _maxIter, modelica_metatype *out_outFunctionTree)
{
  modelica_integer tmp1;
  modelica_metatype _outDiffedStmts = NULL;
  tmp1 = mmc_unbox_integer(_maxIter);
  _outDiffedStmts = omc_Differentiate_differentiateStatements(threadData, _inStmts, _inDiffwrtCref, _inInputData, _inDiffType, _inStmtsAccum, _inFunctionTree, tmp1, out_outFunctionTree);
  /* skip box _outDiffedStmts; list<DAE.Statement> */
  /* skip box _outFunctionTree; DAE.AvlTreePathFunction.Tree */
  return _outDiffedStmts;
}

static modelica_metatype closure9_Differentiate_differentiateExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inDiffwrtCref, modelica_metatype inInputData, modelica_metatype inDiffType, modelica_metatype inFunctionTree, modelica_metatype tmp49)
{
  modelica_metatype maxIter = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_Differentiate_differentiateExp(thData, inExp, inDiffwrtCref, inInputData, inDiffType, inFunctionTree, maxIter, tmp49);
}static modelica_metatype closure10_Differentiate_differentiateExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inFunctionTree, modelica_metatype tmp56)
{
  modelica_metatype inDiffwrtCref = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype inInputData = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  modelica_metatype inDiffType = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),3));
  modelica_metatype maxIter = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),4));
  return boxptr_Differentiate_differentiateExp(thData, inExp, inDiffwrtCref, inInputData, inDiffType, inFunctionTree, maxIter, tmp56);
}static modelica_metatype closure11_Differentiate_differentiateExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inDiffwrtCref, modelica_metatype inInputData, modelica_metatype inDiffType, modelica_metatype inFunctionTree, modelica_metatype tmp60)
{
  modelica_metatype maxIter = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_Differentiate_differentiateExp(thData, inExp, inDiffwrtCref, inInputData, inDiffType, inFunctionTree, maxIter, tmp60);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_integer _maxIter, modelica_metatype *out_outFunctionTree)
{
  modelica_metatype _outDiffedExp = NULL;
  modelica_metatype _outFunctionTree = NULL;
  modelica_boolean _debug;
  modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDiffedExp has no default value.
  // _outFunctionTree has no default value.
  _debug = 0 /* false */;
  
  
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inExp;
    {
      modelica_metatype _p = NULL;
      modelica_metatype _p1 = NULL;
      modelica_metatype _p2 = NULL;
      modelica_boolean _b;
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _e3 = NULL;
      modelica_metatype _actual = NULL;
      modelica_metatype _simplified = NULL;
      modelica_metatype _lambda = NULL;
      modelica_metatype _res = NULL;
      modelica_metatype _res1 = NULL;
      modelica_metatype _res2 = NULL;
      modelica_metatype _functionTree = NULL;
      modelica_metatype _op = NULL;
      modelica_metatype _tp = NULL;
      modelica_integer _i;
      modelica_string _s1 = NULL;
      modelica_string _s2 = NULL;
      modelica_string _stp = NULL;
      modelica_metatype _strLst = NULL;
      modelica_metatype _varLst = NULL;
      modelica_metatype _sub = NULL;
      modelica_metatype _expl = NULL;
      modelica_metatype _matrix = NULL;
      modelica_metatype _dmatrix = NULL;
      modelica_metatype _cref = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _p has no default value.
      // _p1 has no default value.
      // _p2 has no default value.
      // _b has no default value.
      // _e1 has no default value.
      // _e2 has no default value.
      // _e3 has no default value.
      // _actual has no default value.
      // _simplified has no default value.
      // _lambda has no default value.
      // _res has no default value.
      // _res1 has no default value.
      // _res2 has no default value.
      // _functionTree has no default value.
      // _op has no default value.
      // _tp has no default value.
      // _i has no default value.
      // _s1 has no default value.
      // _s2 has no default value.
      // _stp has no default value.
      // _strLst has no default value.
      // _varLst has no default value.
      // _sub has no default value.
      // _expl has no default value.
      // _matrix has no default value.
      // _dmatrix has no default value.
      // _cref has no default value.
      tmp4 = 0;
      for (; tmp4 < 28; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 2: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 3: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 4: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _OMC_LIT163;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 5: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _OMC_LIT85;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          _cref = tmpMeta6;
          _tp = tmpMeta7;
          /* Pattern matching succeeded */
          if(omc_ComponentReference_isStartCref(threadData, _cref))
          {
            _res = omc_Expression_makeConstZero(threadData, _tp);

            _functionTree = _inFunctionTree;
          }
          else
          {
            _res = omc_Differentiate_differentiateCrefs(threadData, _inExp, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, ((modelica_integer) -1) + _maxIter ,&_functionTree);
          }
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _functionTree;
          goto tmp3_done;
        }
        case 7: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _res = omc_Differentiate_differentiateBinary(threadData, _inExp, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, ((modelica_integer) -1) + _maxIter ,&_functionTree);

          _res = omc_ExpressionSimplify_simplifyBinaryExp(threadData, _res);
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _functionTree;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          _op = tmpMeta8;
          _e1 = tmpMeta9;
          /* Pattern matching succeeded */
          _res = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, ((modelica_integer) -1) + _maxIter ,&_functionTree);

          tmpMeta10 = mmc_mk_box3(11, &DAE_Exp_UNARY__desc, _op, _res);
          _res = tmpMeta10;

          _res = omc_ExpressionSimplify_simplifyUnaryExp(threadData, _res);
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _functionTree;
          goto tmp3_done;
        }
        case 9: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 10: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 11: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,5) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 12: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e1 = tmpMeta11;
          _e2 = tmpMeta12;
          _e3 = tmpMeta13;
          /* Pattern matching succeeded */
          _res1 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, ((modelica_integer) -1) + _maxIter ,&_functionTree);

          _res2 = omc_Differentiate_differentiateExp(threadData, _e3, _inDiffwrtCref, _inInputData, _inDiffType, _functionTree, ((modelica_integer) -1) + _maxIter ,&_functionTree);

          tmpMeta14 = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, _e1, _res1, _res2);
          _res = tmpMeta14;

          _res = omc_ExpressionSimplify_simplify1(threadData, _res, NULL);
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _functionTree;
          goto tmp3_done;
        }
        case 13: {
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,1,1) == 0) goto tmp3_end;
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
          if (8 != MMC_STRLEN(tmpMeta16) || strcmp(MMC_STRINGDATA(_OMC_LIT143), MMC_STRINGDATA(tmpMeta16)) != 0) goto tmp3_end;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta17)) goto tmp3_end;
          tmpMeta18 = MMC_CAR(tmpMeta17);
          tmpMeta19 = MMC_CDR(tmpMeta17);
          if (listEmpty(tmpMeta19)) goto tmp3_end;
          tmpMeta20 = MMC_CAR(tmpMeta19);
          tmpMeta21 = MMC_CDR(tmpMeta19);
          if (!listEmpty(tmpMeta21)) goto tmp3_end;
          
          _actual = tmpMeta18;
          _simplified = tmpMeta20;
          /* Pattern matching succeeded */
          tmpMeta22 = MMC_REFSTRUCTLIT(mmc_nil);
          _lambda = omc_Expression_crefExp(threadData, omc_ComponentReference_makeCrefIdent(threadData, _OMC_LIT164, _OMC_LIT47, tmpMeta22));

          _e1 = omc_Differentiate_differentiateExp(threadData, _actual, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, _maxIter ,&_functionTree);

          _e2 = omc_Differentiate_differentiateExp(threadData, _simplified, _inDiffwrtCref, _inInputData, _inDiffType, _functionTree, _maxIter ,&_functionTree);

          tmpMeta23 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _lambda, _OMC_LIT140, _e1);
          tmpMeta24 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _OMC_LIT83, _OMC_LIT166, _lambda);
          tmpMeta25 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta24, _OMC_LIT140, _e2);
          tmpMeta26 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta23, _OMC_LIT165, tmpMeta25);
          _e3 = tmpMeta26;
          tmpMeta[0+0] = _e3;
          tmpMeta[0+1] = _functionTree;
          goto tmp3_done;
        }
        case 14: {
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta27,1,1) == 0) goto tmp3_end;
          tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 2));
          if (10 != MMC_STRLEN(tmpMeta28) || strcmp(MMC_STRINGDATA(_OMC_LIT101), MMC_STRINGDATA(tmpMeta28)) != 0) goto tmp3_end;
          tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta29)) goto tmp3_end;
          tmpMeta30 = MMC_CAR(tmpMeta29);
          tmpMeta31 = MMC_CDR(tmpMeta29);
          if (listEmpty(tmpMeta31)) goto tmp3_end;
          tmpMeta32 = MMC_CAR(tmpMeta31);
          tmpMeta33 = MMC_CDR(tmpMeta31);
          if (listEmpty(tmpMeta33)) goto tmp3_end;
          tmpMeta34 = MMC_CAR(tmpMeta33);
          tmpMeta35 = MMC_CDR(tmpMeta33);
          if (!listEmpty(tmpMeta35)) goto tmp3_end;
          
          _e2 = tmpMeta32;
          _e3 = tmpMeta34;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(omc_Expression_expHasCref(threadData, _e2, _inDiffwrtCref) || omc_Expression_expHasCref(threadData, _e3, _inDiffwrtCref))) goto tmp3_end;
          goto goto_2;
          goto tmp3_done;
        }
        case 15: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _res = omc_Differentiate_differentiateCalls(threadData, _inExp, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, ((modelica_integer) -1) + _maxIter ,&_functionTree);

          _res = omc_ExpressionSimplify_simplify1(threadData, _res, NULL);
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _functionTree;
          goto tmp3_done;
        }
        case 16: {
          modelica_metatype tmpMeta36;
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          modelica_metatype tmpMeta44;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,4) == 0) goto tmp3_end;
          tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          _p = tmpMeta36;
          _expl = tmpMeta37;
          _strLst = tmpMeta38;
          _tp = tmpMeta39;
          /* Pattern matching succeeded */
          tmpMeta40 = MMC_REFSTRUCTLIT(mmc_nil);
          _sub = tmpMeta40;

          _functionTree = _inFunctionTree;

          {
            modelica_metatype _e;
            for (tmpMeta41 = _expl; !listEmpty(tmpMeta41); tmpMeta41=MMC_CDR(tmpMeta41))
            {
              _e = MMC_CAR(tmpMeta41);
              _e1 = omc_Differentiate_differentiateExp(threadData, _e, _inDiffwrtCref, _inInputData, _inDiffType, _functionTree, _maxIter ,&_functionTree);

              tmpMeta42 = mmc_mk_cons(_e1, _sub);
              _sub = tmpMeta42;
            }
          }
          tmpMeta44 = mmc_mk_box5(17, &DAE_Exp_RECORD__desc, _p, listReverse(_sub), _strLst, _tp);
          tmpMeta[0+0] = tmpMeta44;
          tmpMeta[0+1] = _functionTree;
          goto tmp3_done;
        }
        case 17: {
          modelica_metatype tmpMeta45;
          modelica_metatype tmpMeta46;
          modelica_integer tmp47;
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta50;
          modelica_metatype tmpMeta51;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
          tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta46 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmp47 = mmc_unbox_integer(tmpMeta46);
          tmpMeta48 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _tp = tmpMeta45;
          _b = tmp47  /* pattern as ty=Boolean */;
          _expl = tmpMeta48;
          /* Pattern matching succeeded */
          tmpMeta50 = mmc_mk_box1(0, mmc_mk_integer(((modelica_integer) -1) + _maxIter));
          _expl = omc_List_map3Fold(threadData, _expl, (modelica_fnptr) mmc_mk_box2(0,closure9_Differentiate_differentiateExp,tmpMeta50), _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree ,&_functionTree);

          tmpMeta51 = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, _tp, mmc_mk_boolean(_b), _expl);
          _res = tmpMeta51;

          _res = omc_ExpressionSimplify_simplify1(threadData, _res, NULL);
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _functionTree;
          goto tmp3_done;
        }
        case 18: {
          modelica_metatype tmpMeta52;
          modelica_metatype tmpMeta53;
          modelica_integer tmp54;
          modelica_metatype tmpMeta55;
          modelica_metatype tmpMeta57;
          modelica_metatype tmpMeta58;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,3) == 0) goto tmp3_end;
          tmpMeta52 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta53 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmp54 = mmc_unbox_integer(tmpMeta53);
          tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _tp = tmpMeta52;
          _i = tmp54  /* pattern as ty=Integer */;
          _matrix = tmpMeta55;
          /* Pattern matching succeeded */
          tmpMeta57 = mmc_mk_box4(0, _inDiffwrtCref, _inInputData, _inDiffType, mmc_mk_integer(((modelica_integer) -1) + _maxIter));
          _dmatrix = omc_List_mapFoldList(threadData, _matrix, (modelica_fnptr) mmc_mk_box2(0,closure10_Differentiate_differentiateExp,tmpMeta57), _inFunctionTree ,&_functionTree);

          tmpMeta58 = mmc_mk_box4(20, &DAE_Exp_MATRIX__desc, _tp, mmc_mk_integer(_i), _dmatrix);
          _res = tmpMeta58;

          _res = omc_ExpressionSimplify_simplify1(threadData, _res, NULL);
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _functionTree;
          goto tmp3_done;
        }
        case 19: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 20: {
          modelica_metatype tmpMeta59;
          modelica_metatype tmpMeta61;
          modelica_metatype tmpMeta62;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,1) == 0) goto tmp3_end;
          tmpMeta59 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          _expl = tmpMeta59;
          /* Pattern matching succeeded */
          tmpMeta61 = mmc_mk_box1(0, mmc_mk_integer(((modelica_integer) -1) + _maxIter));
          _expl = omc_List_map3Fold(threadData, _expl, (modelica_fnptr) mmc_mk_box2(0,closure11_Differentiate_differentiateExp,tmpMeta61), _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree ,&_functionTree);

          tmpMeta62 = mmc_mk_box2(22, &DAE_Exp_TUPLE__desc, _expl);
          _res = tmpMeta62;

          _res = omc_ExpressionSimplify_simplify1(threadData, _res, NULL);
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _functionTree;
          goto tmp3_done;
        }
        case 21: {
          modelica_metatype tmpMeta63;
          modelica_metatype tmpMeta64;
          modelica_metatype tmpMeta65;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,2) == 0) goto tmp3_end;
          tmpMeta63 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta64 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          _tp = tmpMeta63;
          _e1 = tmpMeta64;
          /* Pattern matching succeeded */
          _res = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, ((modelica_integer) -1) + _maxIter ,&_functionTree);

          _res = omc_ExpressionSimplify_simplify1(threadData, _res, NULL);
          tmpMeta65 = mmc_mk_box3(23, &DAE_Exp_CAST__desc, _tp, _res);
          tmpMeta[0+0] = tmpMeta65;
          tmpMeta[0+1] = _functionTree;
          goto tmp3_done;
        }
        case 22: {
          modelica_metatype tmpMeta66;
          modelica_metatype tmpMeta67;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,2) == 0) goto tmp3_end;
          tmpMeta66 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta67 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          _e1 = tmpMeta66;
          _sub = tmpMeta67;
          /* Pattern matching succeeded */
          _res1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, ((modelica_integer) -1) + _maxIter ,&_functionTree);

          _res = omc_Expression_makeASUB(threadData, _res1, _sub);

          _res = omc_ExpressionSimplify_simplify1(threadData, _res, NULL);
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _functionTree;
          goto tmp3_done;
        }
        case 23: {
          modelica_metatype tmpMeta68;
          modelica_metatype tmpMeta69;
          modelica_integer tmp70;
          modelica_metatype tmpMeta71;
          modelica_metatype tmpMeta72;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,3) == 0) goto tmp3_end;
          tmpMeta68 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta69 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmp70 = mmc_unbox_integer(tmpMeta69);
          tmpMeta71 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e1 = tmpMeta68;
          _i = tmp70  /* pattern as ty=Integer */;
          _tp = tmpMeta71;
          /* Pattern matching succeeded */
          _res1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, ((modelica_integer) -1) + _maxIter ,&_functionTree);

          if((!referenceEq(_e1, _res1)))
          {
            tmpMeta72 = mmc_mk_box4(25, &DAE_Exp_TSUB__desc, _res1, mmc_mk_integer(_i), _tp);
            _res = tmpMeta72;

            _res = omc_ExpressionSimplify_simplify1(threadData, _res, NULL);
          }
          else
          {
            _res = _inExp;
          }
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _functionTree;
          goto tmp3_done;
        }
        case 24: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,23,4) == 0) goto tmp3_end;
          
          _e1 = tmp4_1;
          /* Pattern matching succeeded */
          _res = omc_ExpressionSimplify_simplify(threadData, _e1 ,&_b);

          if(_b)
          {
            _res = omc_Differentiate_differentiateExp(threadData, _res, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, ((modelica_integer) -1) + _maxIter ,&_functionTree);
          }
          else
          {
            _res1 = omc_Differentiate_differentiateExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e1), 2))), _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, ((modelica_integer) -1) + _maxIter ,&_functionTree);

            if((!referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e1), 2))), _res1)))
            {
              { /* matchcontinue expression */
                {
                  volatile mmc_switch_type tmp75;
                  int tmp76;
                  tmp75 = 0;
                  MMC_TRY_INTERNAL(mmc_jumper)
                  tmp74_top:
                  threadData->mmc_jumper = &new_mmc_jumper;
                  for (; tmp75 < 2; tmp75++) {
                    switch (MMC_SWITCH_CAST(tmp75)) {
                    case 0: {
                      /* Pattern matching succeeded */
                      
                      
                      { /* match expression */
                        modelica_metatype tmp80_1;
                        tmp80_1 = _res1;
                        {
                          volatile mmc_switch_type tmp80;
                          int tmp81;
                          tmp80 = 0;
                          for (; tmp80 < 2; tmp80++) {
                            switch (MMC_SWITCH_CAST(tmp80)) {
                            case 0: {
                              modelica_metatype tmpMeta82;
                              modelica_metatype tmpMeta83;
                              if (mmc__uniontype__metarecord__typedef__equal(tmp80_1,14,4) == 0) goto tmp79_end;
                              tmpMeta82 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp80_1), 3));
                              tmpMeta83 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp80_1), 4));
                              
                              _expl = tmpMeta82;
                              _strLst = tmpMeta83;
                              /* Pattern matching succeeded */
                              tmpMeta[2+0] = _expl;
                              tmpMeta[2+1] = _strLst;
                              goto tmp79_done;
                            }
                            case 1: {
                              modelica_metatype tmpMeta84;
                              modelica_metatype tmpMeta85;
                              modelica_metatype tmpMeta86;
                              modelica_metatype tmpMeta87;
                              modelica_metatype tmpMeta88;
                              modelica_metatype tmpMeta89;
                              modelica_metatype tmpMeta90;
                              modelica_metatype tmpMeta91;
                              if (mmc__uniontype__metarecord__typedef__equal(tmp80_1,13,3) == 0) goto tmp79_end;
                              tmpMeta84 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp80_1), 2));
                              tmpMeta85 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp80_1), 3));
                              tmpMeta86 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp80_1), 4));
                              tmpMeta87 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta86), 2));
                              if (mmc__uniontype__metarecord__typedef__equal(tmpMeta87,9,4) == 0) goto tmp79_end;
                              tmpMeta88 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta87), 2));
                              if (mmc__uniontype__metarecord__typedef__equal(tmpMeta88,3,1) == 0) goto tmp79_end;
                              tmpMeta89 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta88), 2));
                              tmpMeta90 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta87), 3));
                              
                              _p1 = tmpMeta84;
                              _expl = tmpMeta85;
                              _p2 = tmpMeta89;
                              _varLst = tmpMeta90;
                              /* Pattern matching succeeded */
                              /* Check guard condition after assignments */
                              if (!omc_AbsynUtil_pathEqual(threadData, _p1, _p2)) goto tmp79_end;
                              {
                                modelica_metatype __omcQ_24tmpVar15;
                                modelica_metatype* tmp92;
                                modelica_metatype tmpMeta93;
                                modelica_string __omcQ_24tmpVar14;
                                modelica_integer tmp94;
                                modelica_metatype _v_loopVar = 0;
                                modelica_metatype _v;
                                _v_loopVar = _varLst;
                                tmpMeta93 = MMC_REFSTRUCTLIT(mmc_nil);
                                __omcQ_24tmpVar15 = tmpMeta93; /* defaultValue */
                                tmp92 = &__omcQ_24tmpVar15;
                                while(1) {
                                  tmp94 = 1;
                                  if (!listEmpty(_v_loopVar)) {
                                    _v = MMC_CAR(_v_loopVar);
                                    _v_loopVar = MMC_CDR(_v_loopVar);
                                    tmp94--;
                                  }
                                  if (tmp94 == 0) {
                                    __omcQ_24tmpVar14 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_v), 2)));
                                    *tmp92 = mmc_mk_cons(__omcQ_24tmpVar14,0);
                                    tmp92 = &MMC_CDR(*tmp92);
                                  } else if (tmp94 == 1) {
                                    break;
                                  } else {
                                    goto goto_78;
                                  }
                                }
                                *tmp92 = mmc_mk_nil();
                                tmpMeta91 = __omcQ_24tmpVar15;
                              }
                              tmpMeta[2+0] = _expl;
                              tmpMeta[2+1] = tmpMeta91;
                              goto tmp79_done;
                            }
                            }
                            goto tmp79_end;
                            tmp79_end: ;
                          }
                          goto goto_78;
                          goto_78:;
                          goto goto_73;
                          goto tmp79_done;
                          tmp79_done:;
                        }
                      }
                      _expl = tmpMeta[2+0];
                      _strLst = tmpMeta[2+1];

                      _res = listGet(_expl, omc_List_position1OnTrue(threadData, _strLst, boxvar_stringEq, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e1), 4)))));
                      goto tmp74_done;
                    }
                    case 1: {
                      modelica_metatype tmpMeta95;
                      /* Pattern matching succeeded */
                      tmpMeta95 = MMC_TAGPTR(mmc_alloc_words(6));
                      memcpy(MMC_UNTAGPTR(tmpMeta95), MMC_UNTAGPTR(_e1), 6*sizeof(modelica_metatype));
                      ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta95))[2] = _res1;
                      _e1 = tmpMeta95;

                      _res = omc_ExpressionSimplify_simplify1(threadData, _e1, NULL);
                      goto tmp74_done;
                    }
                    }
                    goto tmp74_end;
                    tmp74_end: ;
                  }
                  goto goto_73;
                  tmp74_done:
                  (void)tmp75;
                  MMC_RESTORE_INTERNAL(mmc_jumper);
                  goto tmp74_done2;
                  goto_73:;
                  MMC_CATCH_INTERNAL(mmc_jumper);
                  if (++tmp75 < 2) {
                    goto tmp74_top;
                  }
                  goto goto_2;
                  tmp74_done2:;
                }
              }
              ;
            }
          }
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _functionTree;
          goto tmp3_done;
        }
        case 25: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 26: {
          modelica_metatype tmpMeta96;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _res1 = omc_Differentiate_differentiateExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 3))), _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, ((modelica_integer) -1) + _maxIter ,&_functionTree);

          if((!referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 3))), _res1)))
          {
            tmpMeta96 = mmc_mk_box4(30, &DAE_Exp_REDUCTION__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 2))), _res1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 4))));
            _res = tmpMeta96;

            _res = omc_ExpressionSimplify_simplify1(threadData, _res, NULL);
          }
          else
          {
            _res = _inExp;
          }
          tmpMeta[0+0] = _res;
          tmpMeta[0+1] = _functionTree;
          goto tmp3_done;
        }
        case 27: {
          modelica_boolean tmp97;
          modelica_metatype tmpMeta98;
          modelica_metatype tmpMeta99;
          modelica_metatype tmpMeta100;
          modelica_metatype tmpMeta101;
          modelica_metatype tmpMeta102;
          modelica_metatype tmpMeta103;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp97 = omc_Flags_isSet(threadData, _OMC_LIT20);
          if (1 /* true */ != tmp97) goto goto_2;

          _s1 = omc_ExpressionDump_printExpStr(threadData, _inExp);

          _s2 = omc_ComponentReference_printComponentRefStr(threadData, _inDiffwrtCref);

          _stp = omc_Types_printTypeStr(threadData, omc_Expression_typeof(threadData, _inExp));

          tmpMeta98 = stringAppend(_OMC_LIT167,_s1);
          tmpMeta99 = stringAppend(tmpMeta98,_OMC_LIT168);
          tmpMeta100 = stringAppend(tmpMeta99,_stp);
          tmpMeta101 = stringAppend(tmpMeta100,_OMC_LIT169);
          tmpMeta102 = stringAppend(tmpMeta101,_s2);
          tmpMeta103 = stringAppend(tmpMeta102,_OMC_LIT88);
          omc_Debug_trace(threadData, tmpMeta103);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outDiffedExp = tmpMeta[0+0];
  _outFunctionTree = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outFunctionTree) { *out_outFunctionTree = _outFunctionTree; }
  return _outDiffedExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Differentiate_differentiateExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype _maxIter, modelica_metatype *out_outFunctionTree)
{
  modelica_integer tmp1;
  modelica_metatype _outDiffedExp = NULL;
  tmp1 = mmc_unbox_integer(_maxIter);
  _outDiffedExp = omc_Differentiate_differentiateExp(threadData, _inExp, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, tmp1, out_outFunctionTree);
  /* skip box _outDiffedExp; DAE.Exp */
  /* skip box _outFunctionTree; DAE.AvlTreePathFunction.Tree */
  return _outDiffedExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateWhenEquations(threadData_t *threadData, modelica_metatype _inWhenEquations, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype *out_outFunctionTree)
{
  modelica_metatype _outWhenEquations = NULL;
  modelica_metatype _outFunctionTree = NULL;
  modelica_metatype _elsewhenPart = NULL;
  modelica_metatype _delsewhenPart = NULL;
  modelica_metatype _oelsepart = NULL;
  modelica_metatype _whenStmtLst = NULL;
  modelica_metatype _stmtLst = NULL;
  modelica_metatype _funcs = NULL;
  modelica_metatype _condition = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta16;
  modelica_metatype tmpMeta17;
  modelica_metatype tmpMeta18;
  modelica_metatype tmpMeta19;
  modelica_metatype tmpMeta20;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outWhenEquations has no default value.
  // _outFunctionTree has no default value.
  // _elsewhenPart has no default value.
  // _delsewhenPart has no default value.
  // _oelsepart has no default value.
  // _whenStmtLst has no default value.
  // _stmtLst has no default value.
  // _funcs has no default value.
  // _condition has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inWhenEquations;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 4));
  _condition = tmpMeta2;
  _whenStmtLst = tmpMeta3;
  _oelsepart = tmpMeta4;

  _funcs = _inFunctionTree;

  tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
  _stmtLst = tmpMeta5;

  {
    modelica_metatype _rs;
    for (tmpMeta6 = _whenStmtLst; !listEmpty(tmpMeta6); tmpMeta6=MMC_CDR(tmpMeta6))
    {
      _rs = MMC_CAR(tmpMeta6);
      { /* match expression */
        modelica_metatype tmp10_1;
        tmp10_1 = _rs;
        {
          modelica_metatype _src = NULL;
          modelica_metatype _right = NULL;
          modelica_metatype _dright = NULL;
          modelica_metatype _eleft = NULL;
          modelica_metatype _dleft = NULL;
          volatile mmc_switch_type tmp10;
          int tmp11;
          // _src has no default value.
          // _right has no default value.
          // _dright has no default value.
          // _eleft has no default value.
          // _dleft has no default value.
          tmp10 = 0;
          for (; tmp10 < 2; tmp10++) {
            switch (MMC_SWITCH_CAST(tmp10)) {
            case 0: {
              modelica_metatype tmpMeta12;
              modelica_metatype tmpMeta13;
              modelica_metatype tmpMeta14;
              modelica_metatype tmpMeta15;
              if (mmc__uniontype__metarecord__typedef__equal(tmp10_1,0,3) == 0) goto tmp9_end;
              tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp10_1), 2));
              tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp10_1), 3));
              tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp10_1), 4));
              _eleft = tmpMeta12;
              _right = tmpMeta13;
              _src = tmpMeta14;
              /* Pattern matching succeeded */
              _dleft = omc_Differentiate_differentiateExp(threadData, _eleft, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, ((modelica_integer) 20) ,&_funcs);

              _dright = omc_Differentiate_differentiateExp(threadData, _right, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, ((modelica_integer) 20) ,&_funcs);
              tmpMeta15 = mmc_mk_box4(3, &BackendDAE_WhenOperator_ASSIGN__desc, _dleft, _dright, _src);
              tmpMeta7 = tmpMeta15;
              goto tmp9_done;
            }
            case 1: {
              
              /* Pattern matching succeeded */
              tmpMeta7 = _rs;
              goto tmp9_done;
            }
            }
            goto tmp9_end;
            tmp9_end: ;
          }
          goto goto_8;
          goto_8:;
          MMC_THROW_INTERNAL();
          goto tmp9_done;
          tmp9_done:;
        }
      }
      _rs = tmpMeta7;

      tmpMeta16 = mmc_mk_cons(_rs, _stmtLst);
      _stmtLst = tmpMeta16;
    }
  }

  if(isSome(_oelsepart))
  {
    /* Pattern-matching assignment */
    tmpMeta18 = _oelsepart;
    if (optionNone(tmpMeta18)) MMC_THROW_INTERNAL();
    tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 1));
    _elsewhenPart = tmpMeta19;

    _delsewhenPart = omc_Differentiate_differentiateWhenEquations(threadData, _elsewhenPart, _inDiffwrtCref, _inInputData, _inDiffType, _funcs ,&_funcs);

    _oelsepart = mmc_mk_some(_delsewhenPart);
  }
  else
  {
    _oelsepart = mmc_mk_none();
  }

  tmpMeta20 = mmc_mk_box4(3, &BackendDAE_WhenEquation_WHEN__STMTS__desc, _condition, _stmtLst, _oelsepart);
  _outWhenEquations = tmpMeta20;

  _outFunctionTree = _funcs;
  _return: OMC_LABEL_UNUSED
  if (out_outFunctionTree) { *out_outFunctionTree = _outFunctionTree; }
  return _outWhenEquations;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateEquationsLst(threadData_t *threadData, modelica_metatype _inEquationsLst, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inEquationsLstAccum, modelica_metatype _inFunctionTree, modelica_metatype *out_outFunctionTree)
{
  modelica_metatype _outEquationsLst = NULL;
  modelica_metatype _outFunctionTree = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEquationsLst has no default value.
  // _outFunctionTree has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _inEquationsLst;
    {
      modelica_metatype _funcs = NULL;
      modelica_metatype _rest = NULL;
      modelica_metatype _eqnsLst = NULL;
      modelica_metatype _eqns = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _funcs has no default value.
      // _rest has no default value.
      // _eqnsLst has no default value.
      // _eqns has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta[0+0] = listReverse(_inEquationsLstAccum);
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          _eqns = tmpMeta6;
          _rest = tmpMeta7;
          /* Pattern matching succeeded */
          tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
          _eqns = omc_Differentiate_differentiateEquations(threadData, _eqns, _inDiffwrtCref, _inInputData, _inDiffType, tmpMeta8, _inFunctionTree ,&_funcs);

          tmpMeta9 = mmc_mk_cons(_eqns, _inEquationsLstAccum);
          _eqnsLst = tmpMeta9;
          tmpMeta[0+0] = omc_Differentiate_differentiateEquationsLst(threadData, _rest, _inDiffwrtCref, _inInputData, _inDiffType, _eqnsLst, _funcs, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta10 = MMC_CAR(tmp4_1);
          tmpMeta11 = MMC_CDR(tmp4_1);
          _eqns = tmpMeta10;
          /* Pattern matching succeeded */
          tmpMeta12 = mmc_mk_cons(omc_BackendDump_equationListString(threadData, _eqns, _OMC_LIT174), mmc_mk_cons(omc_ComponentReference_crefStr(threadData, _inDiffwrtCref), MMC_REFSTRUCTLIT(mmc_nil)));
          omc_Error_addSourceMessage(threadData, _OMC_LIT173, tmpMeta12, _OMC_LIT176);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outEquationsLst = tmpMeta[0+0];
  _outFunctionTree = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outFunctionTree) { *out_outFunctionTree = _outFunctionTree; }
  return _outEquationsLst;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_Differentiate_differentiateEquations(threadData_t *threadData, modelica_metatype _inEquations, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inEquationsAccum, modelica_metatype _inFunctionTree, modelica_metatype *out_outFunctionTree)
{
  modelica_metatype _outEquations = NULL;
  modelica_metatype _outFunctionTree = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEquations has no default value.
  // _outFunctionTree has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _inEquations;
    {
      modelica_metatype _funcs = NULL;
      modelica_metatype _rest = NULL;
      modelica_metatype _eqns = NULL;
      modelica_metatype _eqn = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _funcs has no default value.
      // _rest has no default value.
      // _eqns has no default value.
      // _eqn has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta[0+0] = listReverse(_inEquationsAccum);
          tmpMeta[0+1] = _inFunctionTree;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          _eqn = tmpMeta6;
          _rest = tmpMeta7;
          /* Pattern matching succeeded */
          _eqn = omc_Differentiate_differentiateEquation(threadData, _eqn, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree ,&_funcs);

          tmpMeta8 = mmc_mk_cons(_eqn, _inEquationsAccum);
          _eqns = tmpMeta8;
          tmpMeta[0+0] = omc_Differentiate_differentiateEquations(threadData, _rest, _inDiffwrtCref, _inInputData, _inDiffType, _eqns, _funcs, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta9 = MMC_CAR(tmp4_1);
          tmpMeta10 = MMC_CDR(tmp4_1);
          _eqn = tmpMeta9;
          /* Pattern matching succeeded */
          tmpMeta11 = mmc_mk_cons(omc_BackendDump_equationString(threadData, _eqn), mmc_mk_cons(omc_ComponentReference_crefStr(threadData, _inDiffwrtCref), MMC_REFSTRUCTLIT(mmc_nil)));
          omc_Error_addSourceMessage(threadData, _OMC_LIT173, tmpMeta11, _OMC_LIT177);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outEquations = tmpMeta[0+0];
  _outFunctionTree = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outFunctionTree) { *out_outFunctionTree = _outFunctionTree; }
  return _outEquations;
}

DLLDirection
modelica_metatype omc_Differentiate_differentiateEquationFragile(threadData_t *threadData, modelica_metatype _inEquation, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype *out_outFunctionTree)
{
  modelica_metatype _outEquation = NULL;
  modelica_metatype _outFunctionTree = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEquation has no default value.
  // _outFunctionTree has no default value.
  if(omc_Flags_isSet(threadData, _OMC_LIT56))
  {
    tmpMeta1 = stringAppend(_OMC_LIT78,omc_ComponentReference_crefStr(threadData, _inDiffwrtCref));
    tmpMeta2 = stringAppend(tmpMeta1,_OMC_LIT9);
    omc_BackendDump_debugStrEqnStr(threadData, _OMC_LIT178, _inEquation, tmpMeta2);
  }

  
  
  { /* match expression */
    modelica_metatype tmp6_1;
    tmp6_1 = _inEquation;
    {
      modelica_metatype _e1_1 = NULL;
      modelica_metatype _e2_1 = NULL;
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _cref = NULL;
      modelica_metatype _source = NULL;
      modelica_integer _size;
      modelica_metatype _recordSize = NULL;
      modelica_metatype _expExpLst = NULL;
      modelica_metatype _dimSize = NULL;
      modelica_metatype _op1 = NULL;
      modelica_metatype _op2 = NULL;
      modelica_metatype _funcs = NULL;
      modelica_metatype _alg = NULL;
      modelica_metatype _eqns = NULL;
      modelica_metatype _eqnslst = NULL;
      modelica_metatype _statementLst = NULL;
      modelica_metatype _expand = NULL;
      modelica_metatype _whenEqn = NULL;
      modelica_metatype _eqAttr = NULL;
      volatile mmc_switch_type tmp6;
      int tmp7;
      // _e1_1 has no default value.
      // _e2_1 has no default value.
      // _e1 has no default value.
      // _e2 has no default value.
      // _cref has no default value.
      // _source has no default value.
      // _size has no default value.
      // _recordSize has no default value.
      // _expExpLst has no default value.
      // _dimSize has no default value.
      // _op1 has no default value.
      // _op2 has no default value.
      // _funcs has no default value.
      // _alg has no default value.
      // _eqns has no default value.
      // _eqnslst has no default value.
      // _statementLst has no default value.
      // _expand has no default value.
      // _whenEqn has no default value.
      // _eqAttr has no default value.
      tmp6 = 0;
      for (; tmp6 < 9; tmp6++) {
        switch (MMC_SWITCH_CAST(tmp6)) {
        case 0: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,0,4) == 0) goto tmp5_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 2));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 3));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
          _e1 = tmpMeta8;
          _e2 = tmpMeta9;
          _source = tmpMeta10;
          _eqAttr = tmpMeta11;
          /* Pattern matching succeeded */
          _e1_1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, ((modelica_integer) 20) ,&_funcs);

          _e1_1 = omc_ExpressionSimplify_simplify(threadData, _e1_1, NULL);

          _e2_1 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, ((modelica_integer) 20) ,&_funcs);

          _e2_1 = omc_ExpressionSimplify_simplify(threadData, _e2_1, NULL);

          tmpMeta12 = mmc_mk_box4(8, &DAE_SymbolicOperation_OP__DIFFERENTIATE__desc, _inDiffwrtCref, _e1, _e1_1);
          _op1 = tmpMeta12;

          tmpMeta13 = mmc_mk_box4(8, &DAE_SymbolicOperation_OP__DIFFERENTIATE__desc, _inDiffwrtCref, _e2, _e2_1);
          _op2 = tmpMeta13;

          tmpMeta14 = mmc_mk_cons(_op1, mmc_mk_cons(_op2, MMC_REFSTRUCTLIT(mmc_nil)));
          _source = omc_List_foldr(threadData, tmpMeta14, boxvar_ElementSource_addSymbolicTransformation, _source);
          tmpMeta15 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _e1_1, _e2_1, _source, _eqAttr);
          tmpMeta[0+0] = tmpMeta15;
          tmpMeta[0+1] = _funcs;
          goto tmp5_done;
        }
        case 1: {
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,2,4) == 0) goto tmp5_end;
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 2));
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 3));
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
          _cref = tmpMeta16;
          _e2 = tmpMeta17;
          _source = tmpMeta18;
          _eqAttr = tmpMeta19;
          /* Pattern matching succeeded */
          _e1 = omc_Expression_crefExp(threadData, _cref);

          _e1_1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, ((modelica_integer) 20) ,&_funcs);

          _e1_1 = omc_ExpressionSimplify_simplify(threadData, _e1_1, NULL);

          _e2_1 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, ((modelica_integer) 20) ,&_funcs);

          _e2_1 = omc_ExpressionSimplify_simplify(threadData, _e2_1, NULL);

          tmpMeta20 = mmc_mk_box4(8, &DAE_SymbolicOperation_OP__DIFFERENTIATE__desc, _inDiffwrtCref, _e1, _e1_1);
          _op1 = tmpMeta20;

          tmpMeta21 = mmc_mk_box4(8, &DAE_SymbolicOperation_OP__DIFFERENTIATE__desc, _inDiffwrtCref, _e2, _e2_1);
          _op2 = tmpMeta21;

          tmpMeta22 = mmc_mk_cons(_op1, mmc_mk_cons(_op2, MMC_REFSTRUCTLIT(mmc_nil)));
          _source = omc_List_foldr(threadData, tmpMeta22, boxvar_ElementSource_addSymbolicTransformation, _source);
          tmpMeta23 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _e1_1, _e2_1, _source, _eqAttr);
          tmpMeta[0+0] = tmpMeta23;
          tmpMeta[0+1] = _funcs;
          goto tmp5_done;
        }
        case 2: {
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,3,3) == 0) goto tmp5_end;
          tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 2));
          tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 3));
          tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
          _e1 = tmpMeta24;
          _source = tmpMeta25;
          _eqAttr = tmpMeta26;
          /* Pattern matching succeeded */
          _e1_1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, ((modelica_integer) 20) ,&_funcs);

          _e1_1 = omc_ExpressionSimplify_simplify(threadData, _e1_1, NULL);

          tmpMeta27 = mmc_mk_box4(8, &DAE_SymbolicOperation_OP__DIFFERENTIATE__desc, _inDiffwrtCref, _e1, _e1_1);
          _op1 = tmpMeta27;

          tmpMeta28 = mmc_mk_cons(_op1, MMC_REFSTRUCTLIT(mmc_nil));
          _source = omc_List_foldr(threadData, tmpMeta28, boxvar_ElementSource_addSymbolicTransformation, _source);
          tmpMeta29 = mmc_mk_box4(6, &BackendDAE_Equation_RESIDUAL__EQUATION__desc, _e1_1, _source, _eqAttr);
          tmpMeta[0+0] = tmpMeta29;
          tmpMeta[0+1] = _funcs;
          goto tmp5_done;
        }
        case 3: {
          modelica_metatype tmpMeta30;
          modelica_integer tmp31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,6,5) == 0) goto tmp5_end;
          tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 2));
          tmp31 = mmc_unbox_integer(tmpMeta30);
          tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 3));
          tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
          tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
          tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 6));
          _size = tmp31  /* pattern as ty=Integer */;
          _e1 = tmpMeta32;
          _e2 = tmpMeta33;
          _source = tmpMeta34;
          _eqAttr = tmpMeta35;
          /* Pattern matching succeeded */
          _e1_1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, ((modelica_integer) 20) ,&_funcs);

          _e1_1 = omc_ExpressionSimplify_simplify(threadData, _e1_1, NULL);

          _e2_1 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, ((modelica_integer) 20) ,&_funcs);

          _e2_1 = omc_ExpressionSimplify_simplify(threadData, _e2_1, NULL);

          tmpMeta36 = mmc_mk_box4(8, &DAE_SymbolicOperation_OP__DIFFERENTIATE__desc, _inDiffwrtCref, _e1, _e1_1);
          _op1 = tmpMeta36;

          tmpMeta37 = mmc_mk_box4(8, &DAE_SymbolicOperation_OP__DIFFERENTIATE__desc, _inDiffwrtCref, _e2, _e2_1);
          _op2 = tmpMeta37;

          tmpMeta38 = mmc_mk_cons(_op1, mmc_mk_cons(_op2, MMC_REFSTRUCTLIT(mmc_nil)));
          _source = omc_List_foldr(threadData, tmpMeta38, boxvar_ElementSource_addSymbolicTransformation, _source);
          tmpMeta39 = mmc_mk_box6(9, &BackendDAE_Equation_COMPLEX__EQUATION__desc, mmc_mk_integer(_size), _e1_1, _e2_1, _source, _eqAttr);
          tmpMeta[0+0] = tmpMeta39;
          tmpMeta[0+1] = _funcs;
          goto tmp5_done;
        }
        case 4: {
          modelica_metatype tmpMeta40;
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          modelica_metatype tmpMeta44;
          modelica_metatype tmpMeta45;
          modelica_metatype tmpMeta46;
          modelica_metatype tmpMeta47;
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta49;
          if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,1,6) == 0) goto tmp5_end;
          tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 2));
          tmpMeta41 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 3));
          tmpMeta42 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
          tmpMeta43 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
          tmpMeta44 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 6));
          tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 7));
          _dimSize = tmpMeta40;
          _e1 = tmpMeta41;
          _e2 = tmpMeta42;
          _source = tmpMeta43;
          _eqAttr = tmpMeta44;
          _recordSize = tmpMeta45;
          /* Pattern matching succeeded */
          _e1_1 = omc_Differentiate_differentiateExp(threadData, _e1, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree, ((modelica_integer) 20) ,&_funcs);

          _e1_1 = omc_ExpressionSimplify_simplify(threadData, _e1_1, NULL);

          _e2_1 = omc_Differentiate_differentiateExp(threadData, _e2, _inDiffwrtCref, _inInputData, _inDiffType, _funcs, ((modelica_integer) 20) ,&_funcs);

          _e2_1 = omc_ExpressionSimplify_simplify(threadData, _e2_1, NULL);

          tmpMeta46 = mmc_mk_box4(8, &DAE_SymbolicOperation_OP__DIFFERENTIATE__desc, _inDiffwrtCref, _e1, _e1_1);
          _op1 = tmpMeta46;

          tmpMeta47 = mmc_mk_box4(8, &DAE_SymbolicOperation_OP__DIFFERENTIATE__desc, _inDiffwrtCref, _e2, _e2_1);
          _op2 = tmpMeta47;

          tmpMeta48 = mmc_mk_cons(_op1, mmc_mk_cons(_op2, MMC_REFSTRUCTLIT(mmc_nil)));
          _source = omc_List_foldr(threadData, tmpMeta48, boxvar_ElementSource_addSymbolicTransformation, _source);
          tmpMeta49 = mmc_mk_box7(4, &BackendDAE_Equation_ARRAY__EQUATION__desc, _dimSize, _e1_1, _e2_1, _source, _eqAttr, _recordSize);
          tmpMeta[0+0] = tmpMeta49;
          tmpMeta[0+1] = _funcs;
          goto tmp5_done;
        }
        case 5: {
          modelica_metatype tmpMeta50;
          modelica_integer tmp51;
          modelica_metatype tmpMeta52;
          modelica_metatype tmpMeta53;
          modelica_metatype tmpMeta54;
          modelica_metatype tmpMeta55;
          modelica_metatype tmpMeta56;
          modelica_metatype tmpMeta57;
          modelica_metatype tmpMeta58;
          modelica_metatype tmpMeta59;
          if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,4,5) == 0) goto tmp5_end;
          tmpMeta50 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 2));
          tmp51 = mmc_unbox_integer(tmpMeta50);
          tmpMeta52 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 3));
          tmpMeta53 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 2));
          tmpMeta54 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
          tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
          tmpMeta56 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 6));
          _size = tmp51  /* pattern as ty=Integer */;
          _statementLst = tmpMeta53;
          _source = tmpMeta54;
          _expand = tmpMeta55;
          _eqAttr = tmpMeta56;
          /* Pattern matching succeeded */
          tmpMeta57 = MMC_REFSTRUCTLIT(mmc_nil);
          _statementLst = omc_Differentiate_differentiateStatements(threadData, _statementLst, _inDiffwrtCref, _inInputData, _inDiffType, tmpMeta57, _inFunctionTree, ((modelica_integer) 20) ,&_funcs);

          tmpMeta58 = mmc_mk_box2(3, &DAE_Algorithm_ALGORITHM__STMTS__desc, _statementLst);
          _alg = tmpMeta58;
          tmpMeta59 = mmc_mk_box6(7, &BackendDAE_Equation_ALGORITHM__desc, mmc_mk_integer(_size), _alg, _source, _expand, _eqAttr);
          tmpMeta[0+0] = tmpMeta59;
          tmpMeta[0+1] = _funcs;
          goto tmp5_done;
        }
        case 6: {
          modelica_metatype tmpMeta60;
          modelica_metatype tmpMeta61;
          modelica_metatype tmpMeta62;
          modelica_metatype tmpMeta63;
          modelica_metatype tmpMeta64;
          modelica_metatype tmpMeta65;
          modelica_metatype tmpMeta66;
          modelica_metatype tmpMeta67;
          if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,7,5) == 0) goto tmp5_end;
          tmpMeta60 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 2));
          tmpMeta61 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 3));
          tmpMeta62 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
          tmpMeta63 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
          tmpMeta64 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 6));
          _expExpLst = tmpMeta60;
          _eqnslst = tmpMeta61;
          _eqns = tmpMeta62;
          _source = tmpMeta63;
          _eqAttr = tmpMeta64;
          /* Pattern matching succeeded */
          tmpMeta65 = MMC_REFSTRUCTLIT(mmc_nil);
          _eqnslst = omc_Differentiate_differentiateEquationsLst(threadData, _eqnslst, _inDiffwrtCref, _inInputData, _inDiffType, tmpMeta65, _inFunctionTree ,&_funcs);

          tmpMeta66 = MMC_REFSTRUCTLIT(mmc_nil);
          _eqns = omc_Differentiate_differentiateEquations(threadData, _eqns, _inDiffwrtCref, _inInputData, _inDiffType, tmpMeta66, _funcs ,&_funcs);
          tmpMeta67 = mmc_mk_box6(10, &BackendDAE_Equation_IF__EQUATION__desc, _expExpLst, _eqnslst, _eqns, _source, _eqAttr);
          tmpMeta[0+0] = tmpMeta67;
          tmpMeta[0+1] = _funcs;
          goto tmp5_done;
        }
        case 7: {
          modelica_metatype tmpMeta68;
          modelica_integer tmp69;
          modelica_metatype tmpMeta70;
          modelica_metatype tmpMeta71;
          modelica_metatype tmpMeta72;
          modelica_metatype tmpMeta73;
          if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,5,4) == 0) goto tmp5_end;
          tmpMeta68 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 2));
          tmp69 = mmc_unbox_integer(tmpMeta68);
          tmpMeta70 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 3));
          tmpMeta71 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
          tmpMeta72 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
          _size = tmp69  /* pattern as ty=Integer */;
          _whenEqn = tmpMeta70;
          _source = tmpMeta71;
          _eqAttr = tmpMeta72;
          /* Pattern matching succeeded */
          _whenEqn = omc_Differentiate_differentiateWhenEquations(threadData, _whenEqn, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree ,&_funcs);
          tmpMeta73 = mmc_mk_box5(8, &BackendDAE_Equation_WHEN__EQUATION__desc, mmc_mk_integer(_size), _whenEqn, _source, _eqAttr);
          tmpMeta[0+0] = tmpMeta73;
          tmpMeta[0+1] = _funcs;
          goto tmp5_done;
        }
        case 8: {
          modelica_metatype tmpMeta74;
          
          /* Pattern matching succeeded */
          tmpMeta74 = mmc_mk_cons(omc_BackendDump_equationString(threadData, _inEquation), mmc_mk_cons(omc_ComponentReference_crefStr(threadData, _inDiffwrtCref), MMC_REFSTRUCTLIT(mmc_nil)));
          omc_Error_addSourceMessage(threadData, _OMC_LIT173, tmpMeta74, _OMC_LIT179);
          goto goto_4;
          goto tmp5_done;
        }
        }
        goto tmp5_end;
        tmp5_end: ;
      }
      goto goto_4;
      goto_4:;
      MMC_THROW_INTERNAL();
      goto tmp5_done;
      tmp5_done:;
    }
  }
  _outEquation = tmpMeta[0+0];
  _outFunctionTree = tmpMeta[0+1];

  if(omc_Flags_isSet(threadData, _OMC_LIT56))
  {
    omc_BackendDump_debugStrEqnStr(threadData, _OMC_LIT180, _outEquation, _OMC_LIT9);
  }
  _return: OMC_LABEL_UNUSED
  if (out_outFunctionTree) { *out_outFunctionTree = _outFunctionTree; }
  return _outEquation;
}

DLLDirection
modelica_metatype omc_Differentiate_differentiateEquation(threadData_t *threadData, modelica_metatype _inEquation, modelica_metatype _inDiffwrtCref, modelica_metatype _inInputData, modelica_metatype _inDiffType, modelica_metatype _inFunctionTree, modelica_metatype *out_outFunctionTree)
{
  modelica_metatype _outEquation = NULL;
  modelica_metatype _outFunctionTree = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEquation has no default value.
  // _outFunctionTree has no default value.
  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp2_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          /* Pattern matching succeeded */
          _outEquation = omc_Differentiate_differentiateEquationFragile(threadData, _inEquation, _inDiffwrtCref, _inInputData, _inDiffType, _inFunctionTree ,&_outFunctionTree);
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta5;
          /* Pattern matching succeeded */
          tmpMeta5 = mmc_mk_cons(omc_BackendDump_equationString(threadData, _inEquation), mmc_mk_cons(omc_ComponentReference_crefStr(threadData, _inDiffwrtCref), MMC_REFSTRUCTLIT(mmc_nil)));
          omc_Error_addSourceMessage(threadData, _OMC_LIT173, tmpMeta5, _OMC_LIT181);

          goto goto_1;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      tmp2_done:
      (void)tmp3;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp2_done2;
      goto_1:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp3 < 2) {
        goto tmp2_top;
      }
      MMC_THROW_INTERNAL();
      tmp2_done2:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  if (out_outFunctionTree) { *out_outFunctionTree = _outFunctionTree; }
  return _outEquation;
}

DLLDirection
modelica_metatype omc_Differentiate_differentiateExpCrefFullJacobian(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCref, modelica_metatype _inVariables, modelica_metatype _inShared, modelica_metatype *out_outShared)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _outShared = NULL;
  modelica_metatype _dexp = NULL;
  modelica_metatype _funcs = NULL;
  modelica_metatype _diffData = NULL;
  modelica_metatype _knvars = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _outShared has no default value.
  // _dexp has no default value.
  // _funcs has no default value.
  // _diffData has no default value.
  // _knvars has no default value.
  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp2_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          /* Pattern matching succeeded */
          _funcs = omc_BackendDAEUtil_getFunctions(threadData, _inShared);

          _knvars = omc_BackendDAEUtil_getGlobalKnownVarsFromShared(threadData, _inShared);

          _diffData = _OMC_LIT28;

          tmpMeta5 = MMC_TAGPTR(mmc_alloc_words(10));
          memcpy(MMC_UNTAGPTR(tmpMeta5), MMC_UNTAGPTR(_diffData), 10*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta5))[3] = mmc_mk_some(_inVariables);
          _diffData = tmpMeta5;

          tmpMeta6 = MMC_TAGPTR(mmc_alloc_words(10));
          memcpy(MMC_UNTAGPTR(tmpMeta6), MMC_UNTAGPTR(_diffData), 10*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta6))[4] = mmc_mk_some(_knvars);
          _diffData = tmpMeta6;

          _dexp = omc_Differentiate_differentiateExp(threadData, _inExp, _inCref, _diffData, _OMC_LIT182, _funcs, ((modelica_integer) 20) ,&_funcs);

          _outExp = omc_ExpressionSimplify_simplify(threadData, _dexp, NULL);

          _outShared = omc_BackendDAEUtil_setSharedFunctionTree(threadData, _inShared, _funcs);
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          /* Pattern matching succeeded */
          if(omc_Flags_isSet(threadData, _OMC_LIT20))
          {
            tmpMeta7 = mmc_mk_cons(omc_ExpressionDump_printExpStr(threadData, _inExp), mmc_mk_cons(omc_ComponentReference_crefStr(threadData, _inCref), MMC_REFSTRUCTLIT(mmc_nil)));
            omc_Error_addSourceMessage(threadData, _OMC_LIT173, tmpMeta7, _OMC_LIT183);
          }

          goto goto_1;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      tmp2_done:
      (void)tmp3;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp2_done2;
      goto_1:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp3 < 2) {
        goto tmp2_top;
      }
      MMC_THROW_INTERNAL();
      tmp2_done2:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  if (out_outShared) { *out_outShared = _outShared; }
  return _outExp;
}

DLLDirection
modelica_metatype omc_Differentiate_differentiateExpSolve(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCref, modelica_metatype _functions)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _fac = NULL;
  modelica_metatype _dexp = NULL;
  modelica_metatype _fun = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  _fac = omc_Expression_factors(threadData, _inExp);
  // _dexp has no default value.
  // _fun has no default value.
  /* Pattern-matching tuple assignment */
  tmpMeta1 = omc_List_split1OnTrue(threadData, _fac, boxvar_Expression_expHasCrefInIf, _inCref, NULL);
  if (!listEmpty(tmpMeta1)) MMC_THROW_INTERNAL();

  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          /* Pattern matching succeeded */
          { /* match expression */
            modelica_metatype tmp9_1;
            tmp9_1 = _functions;
            {
              modelica_metatype _fun_ = NULL;
              volatile mmc_switch_type tmp9;
              int tmp10;
              // _fun_ has no default value.
              tmp9 = 0;
              for (; tmp9 < 2; tmp9++) {
                switch (MMC_SWITCH_CAST(tmp9)) {
                case 0: {
                  modelica_metatype tmpMeta11;
                  if (optionNone(tmp9_1)) goto tmp8_end;
                  tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp9_1), 1));
                  _fun_ = tmpMeta11;
                  /* Pattern matching succeeded */
                  tmpMeta6 = _fun_;
                  goto tmp8_done;
                }
                case 1: {
                  
                  /* Pattern matching succeeded */
                  tmpMeta6 = _OMC_LIT184;
                  goto tmp8_done;
                }
                }
                goto tmp8_end;
                tmp8_end: ;
              }
              goto goto_7;
              goto_7:;
              goto goto_2;
              goto tmp8_done;
              tmp8_done:;
            }
          }
          _fun = tmpMeta6;

          if(omc_Flags_isSet(threadData, _OMC_LIT56))
          {
            omc_BackendDump_debugStrExpStrCrefStr(threadData, _OMC_LIT185, _inExp, _OMC_LIT78, _inCref, _OMC_LIT9);
          }

          _dexp = omc_Differentiate_differentiateExp(threadData, _inExp, _inCref, _OMC_LIT28, _OMC_LIT186, _fun, ((modelica_integer) 20), NULL);

          _outExp = omc_ExpressionSimplify_simplify(threadData, _dexp, NULL);

          if(omc_Flags_isSet(threadData, _OMC_LIT56))
          {
            omc_BackendDump_debugStrExpStr(threadData, _OMC_LIT187, _outExp, _OMC_LIT9);
          }
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta12;
          /* Pattern matching succeeded */
          if(omc_Flags_isSet(threadData, _OMC_LIT20))
          {
            tmpMeta12 = mmc_mk_cons(omc_ExpressionDump_printExpStr(threadData, _inExp), mmc_mk_cons(omc_ComponentReference_crefStr(threadData, _inCref), MMC_REFSTRUCTLIT(mmc_nil)));
            omc_Error_addSourceMessage(threadData, _OMC_LIT173, tmpMeta12, _OMC_LIT188);
          }

          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_Differentiate_differentiateExpTime(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inVariables, modelica_metatype _inShared, modelica_metatype *out_outShared)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _outShared = NULL;
  modelica_metatype _dexp = NULL;
  modelica_metatype _funcs = NULL;
  modelica_metatype _diffData = NULL;
  modelica_metatype _knvars = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _outShared has no default value.
  // _dexp has no default value.
  // _funcs has no default value.
  // _diffData has no default value.
  // _knvars has no default value.
  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp2_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          /* Pattern matching succeeded */
          if(omc_Flags_isSet(threadData, _OMC_LIT56))
          {
            omc_BackendDump_debugStrExpStr(threadData, _OMC_LIT189, _inExp, _OMC_LIT190);
          }

          _funcs = omc_BackendDAEUtil_getFunctions(threadData, _inShared);

          _knvars = omc_BackendDAEUtil_getGlobalKnownVarsFromShared(threadData, _inShared);

          _diffData = _OMC_LIT28;

          tmpMeta5 = MMC_TAGPTR(mmc_alloc_words(10));
          memcpy(MMC_UNTAGPTR(tmpMeta5), MMC_UNTAGPTR(_diffData), 10*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta5))[3] = mmc_mk_some(_inVariables);
          _diffData = tmpMeta5;

          tmpMeta6 = MMC_TAGPTR(mmc_alloc_words(10));
          memcpy(MMC_UNTAGPTR(tmpMeta6), MMC_UNTAGPTR(_diffData), 10*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta6))[4] = mmc_mk_some(_knvars);
          _diffData = tmpMeta6;

          _dexp = omc_Differentiate_differentiateExp(threadData, _inExp, _OMC_LIT192, _diffData, _OMC_LIT98, _funcs, ((modelica_integer) 20) ,&_funcs);

          _outExp = omc_ExpressionSimplify_simplify(threadData, _dexp, NULL);

          _outShared = omc_BackendDAEUtil_setSharedFunctionTree(threadData, _inShared, _funcs);

          if(omc_Flags_isSet(threadData, _OMC_LIT56))
          {
            omc_BackendDump_debugStrExpStr(threadData, _OMC_LIT193, _outExp, _OMC_LIT194);
          }
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          /* Pattern matching succeeded */
          if(omc_Flags_isSet(threadData, _OMC_LIT20))
          {
            tmpMeta7 = mmc_mk_cons(omc_ExpressionDump_printExpStr(threadData, _inExp), mmc_mk_cons(_OMC_LIT191, MMC_REFSTRUCTLIT(mmc_nil)));
            omc_Error_addSourceMessage(threadData, _OMC_LIT173, tmpMeta7, _OMC_LIT195);
          }

          goto goto_1;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      tmp2_done:
      (void)tmp3;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp2_done2;
      goto_1:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp3 < 2) {
        goto tmp2_top;
      }
      MMC_THROW_INTERNAL();
      tmp2_done2:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  if (out_outShared) { *out_outShared = _outShared; }
  return _outExp;
}

DLLDirection
modelica_metatype omc_Differentiate_differentiateEquationTime(threadData_t *threadData, modelica_metatype _inEquation, modelica_metatype _inVariables, modelica_metatype _inShared, modelica_metatype *out_outShared)
{
  modelica_metatype _outEquation = NULL;
  modelica_metatype _outShared = NULL;
  modelica_metatype _diffData = NULL;
  modelica_metatype _eqn = NULL;
  modelica_metatype _knvars = NULL;
  modelica_metatype _source = NULL;
  modelica_metatype _funcs = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEquation has no default value.
  _outShared = _inShared;
  // _diffData has no default value.
  // _eqn has no default value.
  // _knvars has no default value.
  // _source has no default value.
  // _funcs has no default value.
  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp2_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          /* Pattern matching succeeded */
          if(omc_Flags_isSet(threadData, _OMC_LIT56))
          {
            omc_BackendDump_debugStrEqnStr(threadData, _OMC_LIT196, _inEquation, _OMC_LIT190);
          }

          _funcs = omc_BackendDAEUtil_getFunctions(threadData, _inShared);

          _knvars = omc_BackendDAEUtil_getGlobalKnownVarsFromShared(threadData, _inShared);

          _diffData = _OMC_LIT28;

          tmpMeta5 = MMC_TAGPTR(mmc_alloc_words(10));
          memcpy(MMC_UNTAGPTR(tmpMeta5), MMC_UNTAGPTR(_diffData), 10*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta5))[3] = mmc_mk_some(_inVariables);
          _diffData = tmpMeta5;

          tmpMeta6 = MMC_TAGPTR(mmc_alloc_words(10));
          memcpy(MMC_UNTAGPTR(tmpMeta6), MMC_UNTAGPTR(_diffData), 10*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta6))[4] = mmc_mk_some(_knvars);
          _diffData = tmpMeta6;

          tmpMeta7 = MMC_TAGPTR(mmc_alloc_words(10));
          memcpy(MMC_UNTAGPTR(tmpMeta7), MMC_UNTAGPTR(_diffData), 10*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta7))[5] = mmc_mk_some(_inVariables);
          _diffData = tmpMeta7;

          _eqn = omc_Differentiate_differentiateEquation(threadData, _inEquation, _OMC_LIT192, _diffData, _OMC_LIT98, _funcs ,&_funcs);

          _outEquation = mmc_mk_some(_eqn);

          _outShared = omc_BackendDAEUtil_setSharedFunctionTree(threadData, _inShared, _funcs);

          if(omc_Flags_isSet(threadData, _OMC_LIT56))
          {
            omc_BackendDump_debugStrEqnStr(threadData, _OMC_LIT197, _eqn, _OMC_LIT9);
          }
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          /* Pattern matching succeeded */
          _source = omc_BackendEquation_equationSource(threadData, _inEquation);

          tmpMeta9 = stringAppend(_OMC_LIT198,omc_BackendDump_equationString(threadData, _inEquation));
          tmpMeta10 = stringAppend(tmpMeta9,_OMC_LIT32);
          tmpMeta8 = mmc_mk_cons(tmpMeta10, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addSourceMessage(threadData, _OMC_LIT14, tmpMeta8, omc_ElementSource_getElementSourceFileInfo(threadData, _source));

          _outEquation = mmc_mk_none();
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      tmp2_done:
      (void)tmp3;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp2_done2;
      goto_1:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp3 < 2) {
        goto tmp2_top;
      }
      MMC_THROW_INTERNAL();
      tmp2_done2:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  if (out_outShared) { *out_outShared = _outShared; }
  return _outEquation;
}

