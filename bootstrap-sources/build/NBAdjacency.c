#include "omc_simulation_settings.h"
#include "NBAdjacency.h"
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT0,1,4) {&NBAdjacency_Solvability_UNSOLVABLE__desc,}};
#define _OMC_LIT0 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT0)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT1,1,5) {&NBAdjacency_Solvability_IMPLICIT__desc,}};
#define _OMC_LIT1 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT1)
#define _OMC_LIT2_data "/home/adrpo33/OpenModelica/OMCompiler/Compiler/NBackEnd/Util/NBAdjacency.mo"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT2,75,_OMC_LIT2_data);
#define _OMC_LIT2 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT2)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT3_6,1.758197185e9);
#define _OMC_LIT3_6 MMC_REFREALLIT(_OMC_LIT_STRUCT3_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT3,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1887)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1887)),MMC_IMMEDIATE(MMC_TAGFIXNUM(57)),_OMC_LIT3_6}};
#define _OMC_LIT3 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT3)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT4,3,7) {&NBAdjacency_Solvability_EXPLICIT__LINEAR__desc,MMC_REFSTRUCTLIT(mmc_none),MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT4 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT4)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT5,1,3) {&NBAdjacency_Solvability_UNKNOWN__desc,}};
#define _OMC_LIT5 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT5)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT6_6,1.758197185e9);
#define _OMC_LIT6_6 MMC_REFREALLIT(_OMC_LIT_STRUCT6_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT6,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1566)),MMC_IMMEDIATE(MMC_TAGFIXNUM(11)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1566)),MMC_IMMEDIATE(MMC_TAGFIXNUM(67)),_OMC_LIT6_6}};
#define _OMC_LIT6 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT6)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT7_6,1.758197185e9);
#define _OMC_LIT7_6 MMC_REFREALLIT(_OMC_LIT_STRUCT7_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT7,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1539)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1548)),MMC_IMMEDIATE(MMC_TAGFIXNUM(18)),_OMC_LIT7_6}};
#define _OMC_LIT7 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT7)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT8,1,5) {&ErrorTypes_MessageType_TRANSLATION__desc,}};
#define _OMC_LIT8 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT8)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT9,1,4) {&ErrorTypes_Severity_ERROR__desc,}};
#define _OMC_LIT9 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT9)
#define _OMC_LIT10_data "Internal error %s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT10,17,_OMC_LIT10_data);
#define _OMC_LIT10 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT10)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT11,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT10}};
#define _OMC_LIT11 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT11)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT12,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(63)),_OMC_LIT8,_OMC_LIT9,_OMC_LIT11}};
#define _OMC_LIT12 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT12)
#define _OMC_LIT13_data "NBAdjacency.Solvability.rank failed because of unknown solvability kind."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT13,72,_OMC_LIT13_data);
#define _OMC_LIT13 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT13)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT14,2,1) {_OMC_LIT13,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT14 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT14)
#define _OMC_LIT15_data "XX"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT15,2,_OMC_LIT15_data);
#define _OMC_LIT15 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT15)
#define _OMC_LIT16_data "II"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT16,2,_OMC_LIT16_data);
#define _OMC_LIT16 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT16)
#define _OMC_LIT17_data "N"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT17,1,_OMC_LIT17_data);
#define _OMC_LIT17 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT17)
#define _OMC_LIT18_data "+"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT18,1,_OMC_LIT18_data);
#define _OMC_LIT18 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT18)
#define _OMC_LIT19_data "-"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT19,1,_OMC_LIT19_data);
#define _OMC_LIT19 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT19)
#define _OMC_LIT20_data "L"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT20,1,_OMC_LIT20_data);
#define _OMC_LIT20 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT20)
#define _OMC_LIT21_data "V"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT21,1,_OMC_LIT21_data);
#define _OMC_LIT21 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT21)
#define _OMC_LIT22_data "P"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT22,1,_OMC_LIT22_data);
#define _OMC_LIT22 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT22)
#define _OMC_LIT23_data "C"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT23,1,_OMC_LIT23_data);
#define _OMC_LIT23 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT23)
#define _OMC_LIT24_data "||"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT24,2,_OMC_LIT24_data);
#define _OMC_LIT24 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT24)
#define _OMC_LIT25_data "NBAdjacency.Solvability.toString failed because of unknown solvability kind."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT25,76,_OMC_LIT25_data);
#define _OMC_LIT25 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT25)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT26,2,1) {_OMC_LIT25,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT26 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT26)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT27_6,1.758197185e9);
#define _OMC_LIT27_6 MMC_REFREALLIT(_OMC_LIT_STRUCT27_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT27,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1428)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1450)),MMC_IMMEDIATE(MMC_TAGFIXNUM(18)),_OMC_LIT27_6}};
#define _OMC_LIT27 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT27)
#define _OMC_LIT28_data "NBAdjacency.Dependency.removeSkips failed because cref "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT28,55,_OMC_LIT28_data);
#define _OMC_LIT28 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT28)
#define _OMC_LIT29_data " was not found in the map."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT29,26,_OMC_LIT29_data);
#define _OMC_LIT29 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT29)
#define _OMC_LIT30_data "NBAdjacency.Dependency.skip failed because cref "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT30,48,_OMC_LIT30_data);
#define _OMC_LIT30 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT30)
#define _OMC_LIT31_data "NBAdjacency.Dependency.skip: Cref "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT31,34,_OMC_LIT31_data);
#define _OMC_LIT31 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT31)
#define _OMC_LIT32_data " was saved with depth "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT32,22,_OMC_LIT32_data);
#define _OMC_LIT32 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT32)
#define _OMC_LIT33_data " but depth "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT33,11,_OMC_LIT33_data);
#define _OMC_LIT33 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT33)
#define _OMC_LIT34_data " was requested."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT34,15,_OMC_LIT34_data);
#define _OMC_LIT34 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT34)
#define _OMC_LIT35_data "failtrace"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT35,9,_OMC_LIT35_data);
#define _OMC_LIT35 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT35)
#define _OMC_LIT36_data "Sets whether to print a failtrace or not."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT36,41,_OMC_LIT36_data);
#define _OMC_LIT36 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT36)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT37,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT36}};
#define _OMC_LIT37 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT37)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT38,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),_OMC_LIT35,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT37}};
#define _OMC_LIT38 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT38)
#define _OMC_LIT39_data "NBAdjacency.Dependency.update failed because cref "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT39,50,_OMC_LIT39_data);
#define _OMC_LIT39 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT39)
#define _OMC_LIT40_data ":"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT40,1,_OMC_LIT40_data);
#define _OMC_LIT40 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT40)
#define _OMC_LIT41_data ""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT41,0,_OMC_LIT41_data);
#define _OMC_LIT41 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT41)
#define _OMC_LIT42_data "{"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT42,1,_OMC_LIT42_data);
#define _OMC_LIT42 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT42)
#define _OMC_LIT43_data ", "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT43,2,_OMC_LIT43_data);
#define _OMC_LIT43 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT43)
#define _OMC_LIT44_data "}"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT44,1,_OMC_LIT44_data);
#define _OMC_LIT44 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT44)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT45,1,5) {&NBEquation_Iterator_EMPTY__desc,}};
#define _OMC_LIT45 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT45)
#define _OMC_LIT46_data "NBAdjacency.Matrix.upgradeRow failed for:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT46,42,_OMC_LIT46_data);
#define _OMC_LIT46 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT46)
#define _OMC_LIT47_data "{1}"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT47,3,_OMC_LIT47_data);
#define _OMC_LIT47 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT47)
#define _OMC_LIT48_data "["
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT48,1,_OMC_LIT48_data);
#define _OMC_LIT48 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT48)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT49_6,1.758197185e9);
#define _OMC_LIT49_6 MMC_REFREALLIT(_OMC_LIT_STRUCT49_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT49,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1124)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1125)),MMC_IMMEDIATE(MMC_TAGFIXNUM(87)),_OMC_LIT49_6}};
#define _OMC_LIT49 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT49)
#define _OMC_LIT50_data "|"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT50,1,_OMC_LIT50_data);
#define _OMC_LIT50 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT50)
#define _OMC_LIT51_data "]"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT51,1,_OMC_LIT51_data);
#define _OMC_LIT51 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT51)
#define _OMC_LIT52_data "	("
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT52,2,_OMC_LIT52_data);
#define _OMC_LIT52 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT52)
#define _OMC_LIT53_data ")"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT53,1,_OMC_LIT53_data);
#define _OMC_LIT53 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT53)
#define _OMC_LIT54_data " "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT54,1,_OMC_LIT54_data);
#define _OMC_LIT54 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT54)
#define _OMC_LIT55_data "\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT55,1,_OMC_LIT55_data);
#define _OMC_LIT55 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT55)
#define _OMC_LIT56_data "NBAdjacency.Matrix.transposeScalar failed for variable index "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT56,61,_OMC_LIT56_data);
#define _OMC_LIT56 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT56)
#define _OMC_LIT57_data ".\n              The variables have to be dense (without empty spaces) for this to work!"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT57,87,_OMC_LIT57_data);
#define _OMC_LIT57 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT57)
#define _OMC_LIT58_data "NBAdjacency.Matrix.nonZeroCount failed because of unknown matrix type."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT58,70,_OMC_LIT58_data);
#define _OMC_LIT58 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT58)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT59,2,1) {_OMC_LIT58,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT59 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT59)
#define _OMC_LIT60_data " Dependency Adjacency Matrix"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT60,28,_OMC_LIT60_data);
#define _OMC_LIT60 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT60)
#define _OMC_LIT61_data "[!]"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT61,3,_OMC_LIT61_data);
#define _OMC_LIT61 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT61)
#define _OMC_LIT62_data ","
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT62,1,_OMC_LIT62_data);
#define _OMC_LIT62 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT62)
#define _OMC_LIT63_data "[-]"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT63,3,_OMC_LIT63_data);
#define _OMC_LIT63 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT63)
#define _OMC_LIT64_data "[+]"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT64,3,_OMC_LIT64_data);
#define _OMC_LIT64 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT64)
#define _OMC_LIT65_data "[:]"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT65,3,_OMC_LIT65_data);
#define _OMC_LIT65 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT65)
#define _OMC_LIT66_data "[.]"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT66,3,_OMC_LIT66_data);
#define _OMC_LIT66 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT66)
#define _OMC_LIT67_data "[o]"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT67,3,_OMC_LIT67_data);
#define _OMC_LIT67 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT67)
#define _OMC_LIT68_data "."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT68,1,_OMC_LIT68_data);
#define _OMC_LIT68 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT68)
#define _OMC_LIT69_data " Solvability Adjacency Matrix"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT69,29,_OMC_LIT69_data);
#define _OMC_LIT69 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT69)
#define _OMC_LIT70_data "XX "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT70,3,_OMC_LIT70_data);
#define _OMC_LIT70 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT70)
#define _OMC_LIT71_data "II "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT71,3,_OMC_LIT71_data);
#define _OMC_LIT71 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT71)
#define _OMC_LIT72_data "N- "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT72,3,_OMC_LIT72_data);
#define _OMC_LIT72 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT72)
#define _OMC_LIT73_data "N+ "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT73,3,_OMC_LIT73_data);
#define _OMC_LIT73 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT73)
#define _OMC_LIT74_data "LV "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT74,3,_OMC_LIT74_data);
#define _OMC_LIT74 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT74)
#define _OMC_LIT75_data "LP "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT75,3,_OMC_LIT75_data);
#define _OMC_LIT75 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT75)
#define _OMC_LIT76_data "LC "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT76,3,_OMC_LIT76_data);
#define _OMC_LIT76 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT76)
#define _OMC_LIT77_data "|| "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT77,3,_OMC_LIT77_data);
#define _OMC_LIT77 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT77)
#define _OMC_LIT78_data "AdjacencyMatrix"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT78,15,_OMC_LIT78_data);
#define _OMC_LIT78 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT78)
#define _OMC_LIT79_data "0"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT79,1,_OMC_LIT79_data);
#define _OMC_LIT79 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT79)
#define _OMC_LIT80_data " | "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT80,3,_OMC_LIT80_data);
#define _OMC_LIT80 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT80)
#define _OMC_LIT81_data "Normal Adjacency Matrix (row = equation)"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT81,40,_OMC_LIT81_data);
#define _OMC_LIT81 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT81)
#define _OMC_LIT82_data "Transposed Adjacency Matrix (row = variable)"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT82,44,_OMC_LIT82_data);
#define _OMC_LIT82 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT82)
#define _OMC_LIT83_data "Empty Adjacency Matrix"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT83,22,_OMC_LIT83_data);
#define _OMC_LIT83 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT83)
#define _OMC_LIT84_data "NBAdjacency.Matrix.toString failed because of unknown adjacency matrix type."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT84,76,_OMC_LIT84_data);
#define _OMC_LIT84 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT84)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT85,2,1) {_OMC_LIT84,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT85 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT85)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT86,1,4) {&NFComponentRef_EMPTY__desc,}};
#define _OMC_LIT86 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT86)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT87_6,1.758197185e9);
#define _OMC_LIT87_6 MMC_REFREALLIT(_OMC_LIT_STRUCT87_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT87,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(819)),MMC_IMMEDIATE(MMC_TAGFIXNUM(13)),MMC_IMMEDIATE(MMC_TAGFIXNUM(819)),MMC_IMMEDIATE(MMC_TAGFIXNUM(78)),_OMC_LIT87_6}};
#define _OMC_LIT87 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT87)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT88_6,1.758197185e9);
#define _OMC_LIT88_6 MMC_REFREALLIT(_OMC_LIT_STRUCT88_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT88,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(820)),MMC_IMMEDIATE(MMC_TAGFIXNUM(13)),MMC_IMMEDIATE(MMC_TAGFIXNUM(820)),MMC_IMMEDIATE(MMC_TAGFIXNUM(77)),_OMC_LIT88_6}};
#define _OMC_LIT88 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT88)
#define _OMC_LIT89_data "NBAdjacency.Matrix.compress sizes (old: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT89,40,_OMC_LIT89_data);
#define _OMC_LIT89 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT89)
#define _OMC_LIT90_data ", new: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT90,7,_OMC_LIT90_data);
#define _OMC_LIT90 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT90)
#define _OMC_LIT91_data " do not mach for equation:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT91,27,_OMC_LIT91_data);
#define _OMC_LIT91 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT91)
#define _OMC_LIT92_data "NBAdjacency.Matrix.compress expected types final and full, got types "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT92,69,_OMC_LIT92_data);
#define _OMC_LIT92 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT92)
#define _OMC_LIT93_data " and "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT93,5,_OMC_LIT93_data);
#define _OMC_LIT93 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT93)
#define _OMC_LIT94_data "Compressed Final"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT94,16,_OMC_LIT94_data);
#define _OMC_LIT94 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT94)
#define _OMC_LIT95_data "Compressed Full"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT95,15,_OMC_LIT95_data);
#define _OMC_LIT95 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT95)
#define _OMC_LIT96_data "bltmatrixdump"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT96,13,_OMC_LIT96_data);
#define _OMC_LIT96 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT96)
#define _OMC_LIT97_data "Dumps the blt matrix in html file. IE seems to be very good in displaying large matrices."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT97,89,_OMC_LIT97_data);
#define _OMC_LIT97 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT97)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT98,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT97}};
#define _OMC_LIT98 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT98)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT99,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(153)),_OMC_LIT96,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT98}};
#define _OMC_LIT99 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT99)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT100_6,1.758197185e9);
#define _OMC_LIT100_6 MMC_REFREALLIT(_OMC_LIT_STRUCT100_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT100,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(735)),MMC_IMMEDIATE(MMC_TAGFIXNUM(17)),MMC_IMMEDIATE(MMC_TAGFIXNUM(735)),MMC_IMMEDIATE(MMC_TAGFIXNUM(92)),_OMC_LIT100_6}};
#define _OMC_LIT100 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT100)
#define _OMC_LIT101_data "NBAdjacency.Matrix.refine"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT101,25,_OMC_LIT101_data);
#define _OMC_LIT101 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT101)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT102_6,1.758197185e9);
#define _OMC_LIT102_6 MMC_REFREALLIT(_OMC_LIT_STRUCT102_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT102,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(760)),MMC_IMMEDIATE(MMC_TAGFIXNUM(23)),MMC_IMMEDIATE(MMC_TAGFIXNUM(760)),MMC_IMMEDIATE(MMC_TAGFIXNUM(153)),_OMC_LIT102_6}};
#define _OMC_LIT102 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT102)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT103_6,1.758197185e9);
#define _OMC_LIT103_6 MMC_REFREALLIT(_OMC_LIT_STRUCT103_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT103,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(761)),MMC_IMMEDIATE(MMC_TAGFIXNUM(23)),MMC_IMMEDIATE(MMC_TAGFIXNUM(761)),MMC_IMMEDIATE(MMC_TAGFIXNUM(167)),_OMC_LIT103_6}};
#define _OMC_LIT103 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT103)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT104_6,1.758197185e9);
#define _OMC_LIT104_6 MMC_REFREALLIT(_OMC_LIT_STRUCT104_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT104,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(738)),MMC_IMMEDIATE(MMC_TAGFIXNUM(19)),MMC_IMMEDIATE(MMC_TAGFIXNUM(766)),MMC_IMMEDIATE(MMC_TAGFIXNUM(25)),_OMC_LIT104_6}};
#define _OMC_LIT104 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT104)
#define _OMC_LIT105_data "NBAdjacency.Matrix.refine expected type full, got type "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT105,55,_OMC_LIT105_data);
#define _OMC_LIT105 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT105)
#define _OMC_LIT106_data "Refined Full"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT106,12,_OMC_LIT106_data);
#define _OMC_LIT106 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT106)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT107_6,1.758197185e9);
#define _OMC_LIT107_6 MMC_REFREALLIT(_OMC_LIT_STRUCT107_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT107,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(673)),MMC_IMMEDIATE(MMC_TAGFIXNUM(15)),MMC_IMMEDIATE(MMC_TAGFIXNUM(673)),MMC_IMMEDIATE(MMC_TAGFIXNUM(100)),_OMC_LIT107_6}};
#define _OMC_LIT107 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT107)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT108_6,1.758197185e9);
#define _OMC_LIT108_6 MMC_REFREALLIT(_OMC_LIT_STRUCT108_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT108,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(683)),MMC_IMMEDIATE(MMC_TAGFIXNUM(15)),MMC_IMMEDIATE(MMC_TAGFIXNUM(683)),MMC_IMMEDIATE(MMC_TAGFIXNUM(100)),_OMC_LIT108_6}};
#define _OMC_LIT108 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT108)
#define _OMC_LIT109_data "NBAdjacency.Matrix.expandFull expected type full, got type "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT109,59,_OMC_LIT109_data);
#define _OMC_LIT109 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT109)
#define _OMC_LIT110_data "Expanded Full"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT110,13,_OMC_LIT110_data);
#define _OMC_LIT110 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT110)
#define _OMC_LIT111_data "Expanding from size [vars: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT111,27,_OMC_LIT111_data);
#define _OMC_LIT111 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT111)
#define _OMC_LIT112_data "| eqns: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT112,8,_OMC_LIT112_data);
#define _OMC_LIT112 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT112)
#define _OMC_LIT113_data "] to [vars: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT113,12,_OMC_LIT113_data);
#define _OMC_LIT113 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT113)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT114_6,1.758197185e9);
#define _OMC_LIT114_6 MMC_REFREALLIT(_OMC_LIT_STRUCT114_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT114,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(595)),MMC_IMMEDIATE(MMC_TAGFIXNUM(13)),MMC_IMMEDIATE(MMC_TAGFIXNUM(595)),MMC_IMMEDIATE(MMC_TAGFIXNUM(57)),_OMC_LIT114_6}};
#define _OMC_LIT114 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT114)
#define _OMC_LIT115_data "NBAdjacency.Matrix.expand failed because the full matrix expected to contain all information is instead of type "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT115,112,_OMC_LIT115_data);
#define _OMC_LIT115 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT115)
#define _OMC_LIT116_data "NBAdjacency.Matrix.expand failed because the matrix to be expanded of type "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT116,75,_OMC_LIT116_data);
#define _OMC_LIT116 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT116)
#define _OMC_LIT117_data " should be of type final."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT117,25,_OMC_LIT117_data);
#define _OMC_LIT117 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT117)
#define _OMC_LIT118_data "NBAdjacency.Matrix.expand expected types final and full, got types "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT118,67,_OMC_LIT118_data);
#define _OMC_LIT118 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT118)
#define _OMC_LIT119_data "Expanded Final"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT119,14,_OMC_LIT119_data);
#define _OMC_LIT119 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT119)
#define _OMC_LIT120_data "Upgrading from ["
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT120,16,_OMC_LIT120_data);
#define _OMC_LIT120 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT120)
#define _OMC_LIT121_data "] to ["
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT121,6,_OMC_LIT121_data);
#define _OMC_LIT121 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT121)
#define _OMC_LIT122_data "Invalid matrix upgrade request. Cannot upgrade matrix of type "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT122,62,_OMC_LIT122_data);
#define _OMC_LIT122 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT122)
#define _OMC_LIT123_data " to type "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT123,9,_OMC_LIT123_data);
#define _OMC_LIT123 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT123)
#define _OMC_LIT124_data ". The new matrix will be\n                    created from using only the full adjacency matrix."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT124,95,_OMC_LIT124_data);
#define _OMC_LIT124 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT124)
#define _OMC_LIT125_data "NBAdjacency.Matrix.upgrade failed for because of wrong matrix type for the 1st input.\n                Expected: final or empty, Got :"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT125,133,_OMC_LIT125_data);
#define _OMC_LIT125 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT125)
#define _OMC_LIT126_data "NBAdjacency.Matrix.upgrade failed for because of wrong matrix type for the 2nd input.\n            Expected: full, Got :"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT126,119,_OMC_LIT126_data);
#define _OMC_LIT126 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT126)
#define _OMC_LIT127_data "Final"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT127,5,_OMC_LIT127_data);
#define _OMC_LIT127 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT127)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT128,2,3) {&NBAdjacency_Matrix_EMPTY__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(4))}};
#define _OMC_LIT128 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT128)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT129_6,1.758197185e9);
#define _OMC_LIT129_6 MMC_REFREALLIT(_OMC_LIT_STRUCT129_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT129,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(420)),MMC_IMMEDIATE(MMC_TAGFIXNUM(11)),MMC_IMMEDIATE(MMC_TAGFIXNUM(420)),MMC_IMMEDIATE(MMC_TAGFIXNUM(96)),_OMC_LIT129_6}};
#define _OMC_LIT129 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT129)
#define _OMC_LIT130_data "Creating Adjacency Matrices"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT130,27,_OMC_LIT130_data);
#define _OMC_LIT130 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT130)
#define _OMC_LIT131_data "Full"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT131,4,_OMC_LIT131_data);
#define _OMC_LIT131 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT131)
#define _OMC_LIT132_data "[eqn: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT132,6,_OMC_LIT132_data);
#define _OMC_LIT132 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT132)
#define _OMC_LIT133_data ", crefs: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT133,9,_OMC_LIT133_data);
#define _OMC_LIT133 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT133)
#define _OMC_LIT134_data ", scal: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT134,8,_OMC_LIT134_data);
#define _OMC_LIT134 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT134)
#define _OMC_LIT135_data "true"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT135,4,_OMC_LIT135_data);
#define _OMC_LIT135 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT135)
#define _OMC_LIT136_data "false"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT136,5,_OMC_LIT136_data);
#define _OMC_LIT136 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT136)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT137,2,0) {MMC_IMMEDIATE(MMC_TAGFIXNUM(-1)),MMC_IMMEDIATE(MMC_TAGFIXNUM(-1))}};
#define _OMC_LIT137 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT137)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT138,2,0) {MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT138 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT138)
#define _OMC_LIT139_data "Equation Index Mapping (ARR) -> START | SIZE"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT139,44,_OMC_LIT139_data);
#define _OMC_LIT139 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT139)
#define _OMC_LIT140_data "("
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT140,1,_OMC_LIT140_data);
#define _OMC_LIT140 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT140)
#define _OMC_LIT141_data ")	"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT141,2,_OMC_LIT141_data);
#define _OMC_LIT141 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT141)
#define _OMC_LIT142_data "Variable Index Mapping (ARR) -> START | SIZE"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT142,44,_OMC_LIT142_data);
#define _OMC_LIT142 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT142)
#define _OMC_LIT143_data "linear"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT143,6,_OMC_LIT143_data);
#define _OMC_LIT143 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT143)
#define _OMC_LIT144_data "matching"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT144,8,_OMC_LIT144_data);
#define _OMC_LIT144 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT144)
#define _OMC_LIT145_data "sorting"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT145,7,_OMC_LIT145_data);
#define _OMC_LIT145 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT145)
#define _OMC_LIT146_data "full"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT146,4,_OMC_LIT146_data);
#define _OMC_LIT146 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT146)
#define _OMC_LIT147_data "unknown"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT147,7,_OMC_LIT147_data);
#define _OMC_LIT147 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT147)
#include "util/modelica.h"

#include "NBAdjacency_includes.h"


/* default, do not make protected functions static */
#if !defined(PROTECTED_FUNCTION_STATIC)
#define PROTECTED_FUNCTION_STATIC
#endif
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBAdjacency_Dependency_update_makeNewKinds(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fkinds, modelica_integer _num);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBAdjacency_Dependency_update_makeNewKinds(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fkinds, modelica_metatype _num);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBAdjacency_Dependency_update_makeNewKinds,2,0) {(void*) boxptr_NBAdjacency_Dependency_update_makeNewKinds,0}};
#define boxvar_NBAdjacency_Dependency_update_makeNewKinds MMC_REFSTRUCTLIT(boxvar_lit_NBAdjacency_Dependency_update_makeNewKinds)
PROTECTED_FUNCTION_STATIC modelica_string omc_NBAdjacency_Dependency_toString_kindString(threadData_t *threadData, modelica_integer _kind);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBAdjacency_Dependency_toString_kindString(threadData_t *threadData, modelica_metatype _kind);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBAdjacency_Dependency_toString_kindString,2,0) {(void*) boxptr_NBAdjacency_Dependency_toString_kindString,0}};
#define boxvar_NBAdjacency_Dependency_toString_kindString MMC_REFSTRUCTLIT(boxvar_lit_NBAdjacency_Dependency_toString_kindString)
PROTECTED_FUNCTION_STATIC void omc_NBAdjacency_Matrix_updateIntegerRow(threadData_t *threadData, modelica_metatype _m, modelica_integer _idx, modelica_metatype _row);
PROTECTED_FUNCTION_STATIC void boxptr_NBAdjacency_Matrix_updateIntegerRow(threadData_t *threadData, modelica_metatype _m, modelica_metatype _idx, modelica_metatype _row);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBAdjacency_Matrix_updateIntegerRow,2,0) {(void*) boxptr_NBAdjacency_Matrix_updateIntegerRow,0}};
#define boxvar_NBAdjacency_Matrix_updateIntegerRow MMC_REFSTRUCTLIT(boxvar_lit_NBAdjacency_Matrix_updateIntegerRow)
PROTECTED_FUNCTION_STATIC void omc_NBAdjacency_Matrix_upgradeRow(threadData_t *threadData, modelica_metatype _eqn_ptr, modelica_integer _eqn_arr_idx, modelica_metatype _dependencies, modelica_metatype _dep, modelica_metatype _rep, modelica_metatype _map, modelica_metatype _fullmap, modelica_metatype _m, modelica_metatype _mapping, modelica_metatype _modes, modelica_metatype _iter_);
PROTECTED_FUNCTION_STATIC void boxptr_NBAdjacency_Matrix_upgradeRow(threadData_t *threadData, modelica_metatype _eqn_ptr, modelica_metatype _eqn_arr_idx, modelica_metatype _dependencies, modelica_metatype _dep, modelica_metatype _rep, modelica_metatype _map, modelica_metatype _fullmap, modelica_metatype _m, modelica_metatype _mapping, modelica_metatype _modes, modelica_metatype _iter_);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBAdjacency_Matrix_upgradeRow,2,0) {(void*) boxptr_NBAdjacency_Matrix_upgradeRow,0}};
#define boxvar_NBAdjacency_Matrix_upgradeRow MMC_REFSTRUCTLIT(boxvar_lit_NBAdjacency_Matrix_upgradeRow)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBAdjacency_Matrix_initialize(threadData_t *threadData, modelica_metatype _mapping, modelica_integer _st);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBAdjacency_Matrix_initialize(threadData_t *threadData, modelica_metatype _mapping, modelica_metatype _st);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBAdjacency_Matrix_initialize,2,0) {(void*) boxptr_NBAdjacency_Matrix_initialize,0}};
#define boxvar_NBAdjacency_Matrix_initialize MMC_REFSTRUCTLIT(boxvar_lit_NBAdjacency_Matrix_initialize)
PROTECTED_FUNCTION_STATIC modelica_string omc_NBAdjacency_Matrix_dimsString(threadData_t *threadData, modelica_metatype _dims);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBAdjacency_Matrix_dimsString,2,0) {(void*) boxptr_NBAdjacency_Matrix_dimsString,0}};
#define boxvar_NBAdjacency_Matrix_dimsString MMC_REFSTRUCTLIT(boxvar_lit_NBAdjacency_Matrix_dimsString)
PROTECTED_FUNCTION_STATIC modelica_string omc_NBAdjacency_Matrix_fullString(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _dep_map, modelica_metatype _sol_map, modelica_metatype _rep_set);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBAdjacency_Matrix_fullString,2,0) {(void*) boxptr_NBAdjacency_Matrix_fullString,0}};
#define boxvar_NBAdjacency_Matrix_fullString MMC_REFSTRUCTLIT(boxvar_lit_NBAdjacency_Matrix_fullString)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBAdjacency_Mapping_fill__(threadData_t *threadData, modelica_metatype __omcQ_24in_5Feqn_5FStA, modelica_metatype __omcQ_24in_5Fvar_5FStA, modelica_metatype __omcQ_24in_5Feqn_5FAtS, modelica_metatype __omcQ_24in_5Fvar_5FAtS, modelica_metatype _eqn_lst, modelica_metatype _var_lst, modelica_integer _eqn_idx_scal_start, modelica_integer _eqn_idx_arr_start, modelica_integer _var_idx_scal_start, modelica_integer _var_idx_arr_start, modelica_metatype *out_var_StA, modelica_metatype *out_eqn_AtS, modelica_metatype *out_var_AtS);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBAdjacency_Mapping_fill__(threadData_t *threadData, modelica_metatype __omcQ_24in_5Feqn_5FStA, modelica_metatype __omcQ_24in_5Fvar_5FStA, modelica_metatype __omcQ_24in_5Feqn_5FAtS, modelica_metatype __omcQ_24in_5Fvar_5FAtS, modelica_metatype _eqn_lst, modelica_metatype _var_lst, modelica_metatype _eqn_idx_scal_start, modelica_metatype _eqn_idx_arr_start, modelica_metatype _var_idx_scal_start, modelica_metatype _var_idx_arr_start, modelica_metatype *out_var_StA, modelica_metatype *out_eqn_AtS, modelica_metatype *out_var_AtS);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBAdjacency_Mapping_fill__,2,0) {(void*) boxptr_NBAdjacency_Mapping_fill__,0}};
#define boxvar_NBAdjacency_Mapping_fill__ MMC_REFSTRUCTLIT(boxvar_lit_NBAdjacency_Mapping_fill__)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBAdjacency_Mapping_getVarScalIndices_subscriptedIndices(threadData_t *threadData, modelica_integer _start, modelica_integer _length, modelica_metatype _slice);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBAdjacency_Mapping_getVarScalIndices_subscriptedIndices(threadData_t *threadData, modelica_metatype _start, modelica_metatype _length, modelica_metatype _slice);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBAdjacency_Mapping_getVarScalIndices_subscriptedIndices,2,0) {(void*) boxptr_NBAdjacency_Mapping_getVarScalIndices_subscriptedIndices,0}};
#define boxvar_NBAdjacency_Mapping_getVarScalIndices_subscriptedIndices MMC_REFSTRUCTLIT(boxvar_lit_NBAdjacency_Mapping_getVarScalIndices_subscriptedIndices)

DLLDirection
void omc_NBAdjacency_updateConditionCrefs(threadData_t *threadData, modelica_metatype _crefs, modelica_metatype _dep_map, modelica_metatype _sol_map)
{
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  omc_NBAdjacency_Dependency_removeSkipsList(threadData, _crefs, _dep_map);

  omc_NBAdjacency_Dependency_updateList(threadData, _crefs, ((modelica_integer) -1), 0 /* false */, _dep_map);

  omc_NBAdjacency_Solvability_updateList(threadData, _crefs, _OMC_LIT0, _sol_map);
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
modelica_metatype omc_NBAdjacency_collectDependenciesStmt(threadData_t *threadData, modelica_metatype _stmt, modelica_metatype _map, modelica_metatype _dep_map, modelica_metatype _sol_map, modelica_metatype _rep_set)
{
  modelica_metatype _set_tpl = NULL;
  modelica_metatype _set1 = NULL;
  modelica_metatype _set2 = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _set_tpl has no default value.
  // _set1 has no default value.
  // _set2 has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _stmt;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          _set1 = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_stmt), 2))), ((modelica_integer) 0), _map, _dep_map, _sol_map, _rep_set);

          _set2 = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_stmt), 3))), ((modelica_integer) 0), _map, _dep_map, _sol_map, _rep_set);
          tmpMeta5 = mmc_mk_box2(0, _set1, _set2);
          tmpMeta1 = tmpMeta5;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          _set1 = omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13));

          _set2 = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_stmt), 3))), ((modelica_integer) 0), _map, _dep_map, _sol_map, _rep_set);
          tmpMeta6 = mmc_mk_box2(0, _set1, _set2);
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta7;
          
          /* Pattern matching succeeded */
          _set1 = omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13));

          _set2 = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_stmt), 2))), ((modelica_integer) 0), _map, _dep_map, _sol_map, _rep_set);

          omc_NBAdjacency_updateConditionCrefs(threadData, omc_UnorderedSet_toList(threadData, _set2), _dep_map, _sol_map);
          tmpMeta7 = mmc_mk_box2(0, _set1, _set2);
          tmpMeta1 = tmpMeta7;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          modelica_metatype tmpMeta8;
          
          /* Pattern matching succeeded */
          _set1 = omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13));

          _set2 = omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13));
          tmpMeta8 = mmc_mk_box2(0, _set1, _set2);
          tmpMeta1 = tmpMeta8;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _set_tpl = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _set_tpl;
}

DLLDirection
modelica_metatype omc_NBAdjacency_collectDependenciesWhen(threadData_t *threadData, modelica_metatype _body, modelica_metatype _map, modelica_metatype _dep_map, modelica_metatype _sol_map, modelica_metatype _rep_set)
{
  modelica_metatype _set = NULL;
  modelica_metatype _set1 = NULL;
  modelica_metatype _set2 = NULL;
  modelica_metatype _diff = NULL;
  modelica_metatype _lst = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _lst1 = NULL;
  modelica_metatype _lst2 = NULL;
  modelica_metatype _tpl_lst = NULL;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _set has no default value.
  // _set1 has no default value.
  // _set2 has no default value.
  // _diff has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _lst = tmpMeta1;
  // _lst1 has no default value.
  // _lst2 has no default value.
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _tpl_lst = tmpMeta2;
  _set = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 2))), ((modelica_integer) 0), _map, _dep_map, _sol_map, _rep_set);

  omc_NBAdjacency_updateConditionCrefs(threadData, omc_UnorderedSet_toList(threadData, _set), _dep_map, _sol_map);

  {
    modelica_integer __omcQ_24tmpVar1;
    modelica_integer __omcQ_24tmpVar0;
    modelica_integer tmp4;
    modelica_metatype _stmt_loopVar = 0;
    modelica_metatype _stmt;
    _stmt_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 3)));
    __omcQ_24tmpVar1 = ((modelica_integer) 0); /* defaultValue */
    while(1) {
      tmp4 = 1;
      if (!listEmpty(_stmt_loopVar)) {
        _stmt = MMC_CAR(_stmt_loopVar);
        _stmt_loopVar = MMC_CDR(_stmt_loopVar);
        tmp4--;
      }
      if (tmp4 == 0) {
        __omcQ_24tmpVar0 = omc_NBEquation_WhenStatement_size(threadData, _stmt, 1 /* true */);
        __omcQ_24tmpVar1 = __omcQ_24tmpVar1 + __omcQ_24tmpVar0;
      } else if (tmp4 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    tmp3 = __omcQ_24tmpVar1;
  }
  if((tmp3 > ((modelica_integer) 1)))
  {
    omc_NBAdjacency_addRepetitions(threadData, _set, _rep_set);
  }

  {
    modelica_metatype _stmt;
    for (tmpMeta5 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 3))); !listEmpty(tmpMeta5); tmpMeta5=MMC_CDR(tmpMeta5))
    {
      _stmt = MMC_CAR(tmpMeta5);
      tmpMeta6 = mmc_mk_cons(omc_NBAdjacency_collectDependenciesStmt(threadData, _stmt, _map, _dep_map, _sol_map, _rep_set), _tpl_lst);
      _tpl_lst = tmpMeta6;
    }
  }

  _lst1 = omc_List_unzip(threadData, _tpl_lst ,&_lst2);

  _set1 = omc_UnorderedSet_union__list(threadData, _lst1, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual);

  _set2 = omc_UnorderedSet_union__list(threadData, _lst2, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual);

  _diff = omc_UnorderedSet_difference(threadData, _set2, _set1);

  omc_NBAdjacency_Solvability_updateList(threadData, omc_UnorderedSet_toList(threadData, _diff), _OMC_LIT0, _sol_map);

  if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4)))))
  {
    tmpMeta8 = mmc_mk_cons(omc_NBAdjacency_collectDependenciesWhen(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4)))), _map, _dep_map, _sol_map, _rep_set), _lst);
    _lst = tmpMeta8;
  }

  tmpMeta11 = mmc_mk_cons(_set2, _lst);
  tmpMeta10 = mmc_mk_cons(_set1, tmpMeta11);
  tmpMeta9 = mmc_mk_cons(_set, tmpMeta10);
  _set = omc_UnorderedSet_union__list(threadData, tmpMeta9, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual);
  _return: OMC_LABEL_UNUSED
  return _set;
}

DLLDirection
modelica_metatype omc_NBAdjacency_collectDependenciesIf(threadData_t *threadData, modelica_metatype _body, modelica_metatype _map, modelica_metatype _dep_map, modelica_metatype _sol_map, modelica_metatype _rep_set)
{
  modelica_metatype _set = NULL;
  modelica_metatype _sets1 = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _set1 = NULL;
  modelica_metatype _set2 = NULL;
  modelica_metatype _diff = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _set has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _sets1 = tmpMeta1;
  // _set1 has no default value.
  // _set2 has no default value.
  // _diff has no default value.
  _set = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 2))), ((modelica_integer) 0), _map, _dep_map, _sol_map, _rep_set);

  omc_NBAdjacency_addRepetitions(threadData, _set, _rep_set);

  omc_NBAdjacency_updateConditionCrefs(threadData, omc_UnorderedSet_toList(threadData, _set), _dep_map, _sol_map);

  {
    modelica_metatype _eqn;
    for (tmpMeta2 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 3))); !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
    {
      _eqn = MMC_CAR(tmpMeta2);
      tmpMeta3 = mmc_mk_cons(omc_NBAdjacency_collectDependenciesEquation(threadData, omc_Pointer_access(threadData, _eqn), _map, _dep_map, _sol_map, _rep_set), _sets1);
      _sets1 = tmpMeta3;
    }
  }

  if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4)))))
  {
    _set1 = omc_UnorderedSet_union__list(threadData, _sets1, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual);

    _set2 = omc_NBAdjacency_collectDependenciesIf(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4)))), _map, _dep_map, _sol_map, _rep_set);

    _diff = omc_UnorderedSet_sym__difference(threadData, _set1, _set2);

    omc_NBAdjacency_Solvability_updateList(threadData, omc_UnorderedSet_toList(threadData, _diff), _OMC_LIT1, _sol_map);

    tmpMeta5 = mmc_mk_cons(_set, mmc_mk_cons(_set1, mmc_mk_cons(_set2, MMC_REFSTRUCTLIT(mmc_nil))));
    _set = omc_UnorderedSet_union__list(threadData, tmpMeta5, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual);
  }
  else
  {
    tmpMeta6 = mmc_mk_cons(_set, _sets1);
    _set = omc_UnorderedSet_union__list(threadData, tmpMeta6, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual);
  }
  _return: OMC_LABEL_UNUSED
  return _set;
}

DLLDirection
void omc_NBAdjacency_addRepetitions(threadData_t *threadData, modelica_metatype _occ, modelica_metatype _rep_set)
{
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  {
    modelica_metatype _cref;
    for (tmpMeta1 = omc_UnorderedSet_toList(threadData, _occ); !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _cref = MMC_CAR(tmpMeta1);
      omc_UnorderedSet_add(threadData, _cref, _rep_set);
    }
  }
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
void omc_NBAdjacency_addRepetitionsCond(threadData_t *threadData, modelica_metatype _occ, modelica_metatype _exp, modelica_boolean _isRep, modelica_metatype _rep_set)
{
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  if((_isRep && (omc_NFType_sizeOf(threadData, omc_NFExpression_typeOf(threadData, _exp), 0 /* false */) == ((modelica_integer) 1))))
  {
    omc_NBAdjacency_addRepetitions(threadData, _occ, _rep_set);
  }
  _return: OMC_LABEL_UNUSED
  return;
}
void boxptr_NBAdjacency_addRepetitionsCond(threadData_t *threadData, modelica_metatype _occ, modelica_metatype _exp, modelica_metatype _isRep, modelica_metatype _rep_set)
{
  modelica_integer tmp1;
  tmp1 = mmc_unbox_integer(_isRep);
  omc_NBAdjacency_addRepetitionsCond(threadData, _occ, _exp, tmp1, _rep_set);
  return;
}

DLLDirection
modelica_metatype omc_NBAdjacency_collectDependenciesCref(threadData_t *threadData, modelica_metatype _cref, modelica_integer _depth, modelica_metatype _map, modelica_metatype _dep_map, modelica_metatype _sol_map)
{
  modelica_metatype _crefs = NULL;
  modelica_metatype _var = NULL;
  modelica_integer _sk;
  modelica_metatype _subs = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  modelica_metatype tmpMeta16;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _crefs has no default value.
  // _var has no default value.
  _sk = ((modelica_integer) 1);
  // _subs has no default value.
  if(omc_UnorderedMap_contains(threadData, _cref, _map))
  {
    if((!omc_UnorderedMap_contains(threadData, _cref, _dep_map)))
    {
      omc_UnorderedMap_add(threadData, _cref, omc_NBAdjacency_Dependency_create(threadData, omc_NFComponentRef_getSubscriptedType(threadData, _cref, 0 /* false */), _depth), _dep_map);
    }

    omc_NBAdjacency_Solvability_update(threadData, _cref, _OMC_LIT4, _sol_map);

    tmpMeta1 = mmc_mk_cons(_cref, MMC_REFSTRUCTLIT(mmc_nil));
    _crefs = tmpMeta1;
  }
  else
  {
    _var = omc_NBVariable_getVarPointer(threadData, _cref, _OMC_LIT3);

    if(omc_NBVariable_isRecord(threadData, _var))
    {
      _subs = omc_NFComponentRef_subscriptsAllFlat(threadData, _cref);

      {
        modelica_metatype __omcQ_24tmpVar3;
        modelica_metatype* tmp3;
        modelica_metatype tmpMeta4;
        modelica_metatype __omcQ_24tmpVar2;
        modelica_integer tmp5;
        modelica_metatype _child_loopVar = 0;
        modelica_metatype _child;
        _child_loopVar = omc_NBVariable_getRecordChildren(threadData, _var);
        tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
        __omcQ_24tmpVar3 = tmpMeta4; /* defaultValue */
        tmp3 = &__omcQ_24tmpVar3;
        while(1) {
          tmp5 = 1;
          if (!listEmpty(_child_loopVar)) {
            _child = MMC_CAR(_child_loopVar);
            _child_loopVar = MMC_CDR(_child_loopVar);
            tmp5--;
          }
          if (tmp5 == 0) {
            __omcQ_24tmpVar2 = omc_NBVariable_getVarName(threadData, _child);
            *tmp3 = mmc_mk_cons(__omcQ_24tmpVar2,0);
            tmp3 = &MMC_CDR(*tmp3);
          } else if (tmp5 == 1) {
            break;
          } else {
            MMC_THROW_INTERNAL();
          }
        }
        *tmp3 = mmc_mk_nil();
        tmpMeta2 = __omcQ_24tmpVar3;
      }
      _crefs = tmpMeta2;

      {
        modelica_metatype __omcQ_24tmpVar5;
        modelica_metatype* tmp7;
        modelica_metatype tmpMeta8;
        modelica_metatype __omcQ_24tmpVar4;
        modelica_integer tmp9;
        modelica_metatype _child_loopVar = 0;
        modelica_metatype _child;
        _child_loopVar = _crefs;
        tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
        __omcQ_24tmpVar5 = tmpMeta8; /* defaultValue */
        tmp7 = &__omcQ_24tmpVar5;
        while(1) {
          tmp9 = 1;
          if (!listEmpty(_child_loopVar)) {
            _child = MMC_CAR(_child_loopVar);
            _child_loopVar = MMC_CDR(_child_loopVar);
            tmp9--;
          }
          if (tmp9 == 0) {
            __omcQ_24tmpVar4 = omc_NFComponentRef_mergeSubscripts(threadData, _subs, _child, 0 /* false */, 0 /* false */);
            *tmp7 = mmc_mk_cons(__omcQ_24tmpVar4,0);
            tmp7 = &MMC_CDR(*tmp7);
          } else if (tmp9 == 1) {
            break;
          } else {
            MMC_THROW_INTERNAL();
          }
        }
        *tmp7 = mmc_mk_nil();
        tmpMeta6 = __omcQ_24tmpVar5;
      }
      _crefs = tmpMeta6;

      {
        modelica_metatype __omcQ_24tmpVar7;
        modelica_metatype* tmp11;
        modelica_metatype tmpMeta12;
        modelica_metatype __omcQ_24tmpVar6;
        modelica_integer tmp13;
        modelica_metatype _child_loopVar = 0;
        modelica_metatype _child;
        _child_loopVar = _crefs;
        tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
        __omcQ_24tmpVar7 = tmpMeta12; /* defaultValue */
        tmp11 = &__omcQ_24tmpVar7;
        while(1) {
          tmp13 = 1;
          if (!listEmpty(_child_loopVar)) {
            _child = MMC_CAR(_child_loopVar);
            _child_loopVar = MMC_CDR(_child_loopVar);
            tmp13--;
          }
          if (tmp13 == 0) {
            __omcQ_24tmpVar6 = omc_NBAdjacency_collectDependenciesCref(threadData, _child, ((modelica_integer) 1) + _depth, _map, _dep_map, _sol_map);
            *tmp11 = mmc_mk_cons(__omcQ_24tmpVar6,0);
            tmp11 = &MMC_CDR(*tmp11);
          } else if (tmp13 == 1) {
            break;
          } else {
            MMC_THROW_INTERNAL();
          }
        }
        *tmp11 = mmc_mk_nil();
        tmpMeta10 = __omcQ_24tmpVar7;
      }
      _crefs = omc_List_flatten(threadData, tmpMeta10);

      {
        modelica_metatype _cref;
        for (tmpMeta14 = _crefs; !listEmpty(tmpMeta14); tmpMeta14=MMC_CDR(tmpMeta14))
        {
          _cref = MMC_CAR(tmpMeta14);
          omc_NBAdjacency_Dependency_skip(threadData, _cref, ((modelica_integer) 1) + _depth, _sk, _dep_map);

          _sk = ((modelica_integer) 1) + _sk;
        }
      }
    }
    else
    {
      tmpMeta16 = MMC_REFSTRUCTLIT(mmc_nil);
      _crefs = tmpMeta16;
    }
  }
  _return: OMC_LABEL_UNUSED
  return _crefs;
}
modelica_metatype boxptr_NBAdjacency_collectDependenciesCref(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _depth, modelica_metatype _map, modelica_metatype _dep_map, modelica_metatype _sol_map)
{
  modelica_integer tmp1;
  modelica_metatype _crefs = NULL;
  tmp1 = mmc_unbox_integer(_depth);
  _crefs = omc_NBAdjacency_collectDependenciesCref(threadData, _cref, tmp1, _map, _dep_map, _sol_map);
  /* skip box _crefs; list<NFComponentRef> */
  return _crefs;
}

DLLDirection
modelica_metatype omc_NBAdjacency_collectDependencies(threadData_t *threadData, modelica_metatype _exp, modelica_integer _depth, modelica_metatype _map, modelica_metatype _dep_map, modelica_metatype _sol_map, modelica_metatype _rep_set)
{
  modelica_metatype _set = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _set has no default value.
  { /* match expression */
    modelica_metatype tmp5_1;
    tmp5_1 = _exp;
    {
      modelica_metatype _set1 = NULL;
      modelica_metatype _set2 = NULL;
      modelica_metatype _diff = NULL;
      modelica_metatype _sets = NULL;
      modelica_metatype tmpMeta3;
      modelica_metatype _call_exp = NULL;
      modelica_metatype _call = NULL;
      modelica_boolean _repeatLeft;
      modelica_boolean _repeatRight;
      modelica_boolean _reduce;
      modelica_integer _ind;
      modelica_integer _new_depth;
      modelica_boolean _isTuple;
      volatile mmc_switch_type tmp5;
      int tmp6;
      // _set1 has no default value.
      // _set2 has no default value.
      // _diff has no default value.
      tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
      _sets = tmpMeta3;
      // _call_exp has no default value.
      // _call has no default value.
      // _repeatLeft has no default value.
      // _repeatRight has no default value.
      // _reduce has no default value.
      // _ind has no default value.
      // _new_depth has no default value.
      // _isTuple has no default value.
      tmp5 = 0;
      for (; tmp5 < 24; tmp5++) {
        switch (MMC_SWITCH_CAST(tmp5)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,6,2) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_UnorderedSet_fromList(threadData, omc_NBAdjacency_collectDependenciesCref(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _depth, _map, _dep_map, _sol_map), boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual);
          goto tmp4_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          modelica_integer tmp8;
          modelica_metatype tmpMeta9;
          modelica_integer tmp10;
          modelica_integer tmp11;
          modelica_integer tmp12;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,8,3) == 0) goto tmp4_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 4));
          tmp8 = mmc_unbox_integer(tmpMeta7);
          if (0 /* false */ != tmp8) goto tmp4_end;
          /* Pattern matching succeeded */
          tmp10 = ((modelica_integer) 1); tmp11 = 1; tmp12 = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          if(!(((tmp11 > 0) && (tmp10 > tmp12)) || ((tmp11 < 0) && (tmp10 < tmp12))))
          {
            modelica_integer _i;
            for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp10, tmp12); _i += tmp11)
            {
              _set1 = omc_NBAdjacency_collectDependencies(threadData, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))),_i) /* DAE.ASUB */, ((modelica_integer) 1) + _depth, _map, _dep_map, _sol_map, _rep_set);

              omc_NBAdjacency_Dependency_skipList(threadData, omc_UnorderedSet_toList(threadData, _set1), ((modelica_integer) 1) + _depth, _i, _dep_map);

              tmpMeta9 = mmc_mk_cons(_set1, _sets);
              _sets = tmpMeta9;
            }
          }
          tmpMeta1 = omc_UnorderedSet_union__list(threadData, _sets, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual);
          goto tmp4_done;
        }
        case 2: {
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,11,2) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          _ind = ((modelica_integer) 1);

          {
            modelica_metatype _elem;
            for (tmpMeta13 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))); !listEmpty(tmpMeta13); tmpMeta13=MMC_CDR(tmpMeta13))
            {
              _elem = MMC_CAR(tmpMeta13);
              _set1 = omc_NBAdjacency_collectDependencies(threadData, _elem, ((modelica_integer) 1) + _depth, _map, _dep_map, _sol_map, _rep_set);

              omc_NBAdjacency_Dependency_skipList(threadData, omc_UnorderedSet_toList(threadData, _set1), ((modelica_integer) 1) + _depth, _ind, _dep_map);

              tmpMeta14 = mmc_mk_cons(_set1, _sets);
              _sets = tmpMeta14;

              _ind = ((modelica_integer) 1) + _ind;
            }
          }
          tmpMeta1 = omc_UnorderedSet_union__list(threadData, _sets, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual);
          goto tmp4_done;
        }
        case 3: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,26,4) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          _set = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _depth, _map, _dep_map, _sol_map, _rep_set);

          omc_NBAdjacency_Dependency_updateList(threadData, omc_UnorderedSet_toList(threadData, _set), listLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), 1 /* true */, _dep_map);
          tmpMeta1 = _set;
          goto tmp4_done;
        }
        case 4: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,27,3) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp4_done;
        }
        case 5: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,28,4) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp4_done;
        }
        case 6: {
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_integer tmp18;
          modelica_metatype tmpMeta19;
          modelica_integer tmp20;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,16,3) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          _set1 = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _depth, _map, _dep_map, _sol_map, _rep_set);

          _set2 = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _depth, _map, _dep_map, _sol_map, _rep_set);

          /* Pattern-matching assignment */
          tmpMeta16 = omc_NFOperator_repetition(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 1));
          tmp18 = mmc_unbox_integer(tmpMeta17);
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
          tmp20 = mmc_unbox_integer(tmpMeta19);
          _repeatLeft = tmp18  /* pattern as ty=Boolean */;
          _repeatRight = tmp20  /* pattern as ty=Boolean */;

          if(_repeatLeft)
          {
            omc_NBAdjacency_addRepetitions(threadData, _set1, _rep_set);
          }

          if(_repeatRight)
          {
            omc_NBAdjacency_addRepetitions(threadData, _set2, _rep_set);
          }

          _reduce = omc_NFOperator_reduction(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));

          if(_reduce)
          {
            omc_NBAdjacency_Dependency_updateList(threadData, omc_UnorderedSet_toList(threadData, _set1), ((modelica_integer) 1), 1 /* true */, _dep_map);

            omc_NBAdjacency_Dependency_updateList(threadData, omc_UnorderedSet_toList(threadData, _set2), ((modelica_integer) 1), 0 /* false */, _dep_map);
          }
          tmpMeta1 = omc_UnorderedSet_union(threadData, _set1, _set2);
          goto tmp4_done;
        }
        case 7: {
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_integer tmp23;
          modelica_metatype tmpMeta24;
          modelica_integer tmp25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,21,3) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta21 = omc_NFOperator_repetition(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 1));
          tmp23 = mmc_unbox_integer(tmpMeta22);
          tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 2));
          tmp25 = mmc_unbox_integer(tmpMeta24);
          _repeatLeft = tmp23  /* pattern as ty=Boolean */;
          _repeatRight = tmp25  /* pattern as ty=Boolean */;

          _repeatLeft = (_repeatLeft || _repeatRight);

          {
            modelica_metatype _arg;
            for (tmpMeta26 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))); !listEmpty(tmpMeta26); tmpMeta26=MMC_CDR(tmpMeta26))
            {
              _arg = MMC_CAR(tmpMeta26);
              _set1 = omc_NBAdjacency_collectDependencies(threadData, _arg, _depth, _map, _dep_map, _sol_map, _rep_set);

              omc_NBAdjacency_addRepetitionsCond(threadData, _set1, _arg, _repeatLeft, _rep_set);

              tmpMeta27 = mmc_mk_cons(_set1, _sets);
              _sets = tmpMeta27;
            }
          }

          {
            modelica_metatype _arg;
            for (tmpMeta29 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))); !listEmpty(tmpMeta29); tmpMeta29=MMC_CDR(tmpMeta29))
            {
              _arg = MMC_CAR(tmpMeta29);
              _set2 = omc_NBAdjacency_collectDependencies(threadData, _arg, _depth, _map, _dep_map, _sol_map, _rep_set);

              omc_NBAdjacency_addRepetitionsCond(threadData, _set2, _arg, _repeatLeft, _rep_set);

              tmpMeta30 = mmc_mk_cons(_set2, _sets);
              _sets = tmpMeta30;
            }
          }
          tmpMeta1 = omc_UnorderedSet_union__list(threadData, _sets, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual);
          goto tmp4_done;
        }
        case 8: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,18,3) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          _set1 = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _depth, _map, _dep_map, _sol_map, _rep_set);

          _set2 = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _depth, _map, _dep_map, _sol_map, _rep_set);

          _set = omc_UnorderedSet_union(threadData, _set1, _set2);

          omc_NBAdjacency_Solvability_updateList(threadData, omc_UnorderedSet_toList(threadData, _set), _OMC_LIT0, _sol_map);
          tmpMeta1 = _set;
          goto tmp4_done;
        }
        case 9: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,20,4) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          _set1 = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _depth, _map, _dep_map, _sol_map, _rep_set);

          _set2 = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _depth, _map, _dep_map, _sol_map, _rep_set);

          _set = omc_UnorderedSet_union(threadData, _set1, _set2);

          omc_NBAdjacency_Solvability_updateList(threadData, omc_UnorderedSet_toList(threadData, _set), _OMC_LIT0, _sol_map);
          tmpMeta1 = _set;
          goto tmp4_done;
        }
        case 10: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,23,2) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp4_done;
        }
        case 11: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,24,1) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp4_done;
        }
        case 12: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,25,2) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp4_done;
        }
        case 13: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,17,2) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp4_done;
        }
        case 14: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,19,2) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp4_done;
        }
        case 15: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,29,1) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp4_done;
        }
        case 16: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,14,2) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          _set = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _depth, _map, _dep_map, _sol_map, _rep_set);

          if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))))
          {
            _set2 = omc_NBAdjacency_collectDependencies(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), _depth, _map, _dep_map, _sol_map, _rep_set);

            _set = omc_UnorderedSet_union(threadData, _set, _set2);
          }

          omc_NBAdjacency_Solvability_updateList(threadData, omc_UnorderedSet_toList(threadData, _set), _OMC_LIT0, _sol_map);
          tmpMeta1 = _set;
          goto tmp4_done;
        }
        case 17: {
          modelica_metatype tmpMeta32;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,22,4) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          _set1 = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _depth, _map, _dep_map, _sol_map, _rep_set);

          _set2 = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _depth, _map, _dep_map, _sol_map, _rep_set);

          _diff = omc_UnorderedSet_sym__difference(threadData, _set1, _set2);

          omc_NBAdjacency_Solvability_updateList(threadData, omc_UnorderedSet_toList(threadData, _diff), _OMC_LIT1, _sol_map);

          _set = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _depth, _map, _dep_map, _sol_map, _rep_set);

          omc_NBAdjacency_addRepetitions(threadData, _set, _rep_set);

          omc_NBAdjacency_updateConditionCrefs(threadData, omc_UnorderedSet_toList(threadData, _set), _dep_map, _sol_map);
          tmpMeta32 = mmc_mk_cons(_set, mmc_mk_cons(_set1, mmc_mk_cons(_set2, MMC_REFSTRUCTLIT(mmc_nil))));
          tmpMeta1 = omc_UnorderedSet_union__list(threadData, tmpMeta32, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual);
          goto tmp4_done;
        }
        case 18: {
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,13,1) == 0) goto tmp4_end;
          tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta33,4,5) == 0) goto tmp4_end;
          tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta33), 5));
          
          _call = tmpMeta33;
          _call_exp = tmpMeta34;
          /* Pattern matching succeeded */
          {
            modelica_metatype _iter;
            for (tmpMeta35 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_call), 6))); !listEmpty(tmpMeta35); tmpMeta35=MMC_CDR(tmpMeta35))
            {
              _iter = MMC_CAR(tmpMeta35);
              _call_exp = omc_NFExpression_replaceIterator(threadData, _call_exp, omc_Util_tuple21(threadData, _iter), omc_Util_tuple22(threadData, _iter));
            }
          }

          _set = omc_NBAdjacency_collectDependencies(threadData, _call_exp, _depth, _map, _dep_map, _sol_map, _rep_set);

          omc_NBAdjacency_Solvability_updateList(threadData, omc_UnorderedSet_toList(threadData, _set), _OMC_LIT1, _sol_map);
          tmpMeta1 = _set;
          goto tmp4_done;
        }
        case 19: {
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,13,1) == 0) goto tmp4_end;
          tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta37,6,8) == 0) goto tmp4_end;
          tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 6));
          
          _call = tmpMeta37;
          _call_exp = tmpMeta38;
          /* Pattern matching succeeded */
          {
            modelica_metatype _iter;
            for (tmpMeta39 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_call), 7))); !listEmpty(tmpMeta39); tmpMeta39=MMC_CDR(tmpMeta39))
            {
              _iter = MMC_CAR(tmpMeta39);
              _call_exp = omc_NFExpression_replaceIterator(threadData, _call_exp, omc_Util_tuple21(threadData, _iter), omc_Util_tuple22(threadData, _iter));
            }
          }

          _set = omc_NBAdjacency_collectDependencies(threadData, _call_exp, _depth, _map, _dep_map, _sol_map, _rep_set);

          omc_NBAdjacency_Dependency_updateList(threadData, omc_UnorderedSet_toList(threadData, _set), ((modelica_integer) -1), 0 /* false */, _dep_map);
          tmpMeta1 = _set;
          goto tmp4_done;
        }
        case 20: {
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          modelica_metatype tmpMeta44;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,13,1) == 0) goto tmp4_end;
          tmpMeta41 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta41,2,6) == 0) goto tmp4_end;
          
          _call = tmpMeta41;
          /* Pattern matching succeeded */
          _isTuple = omc_NFType_isTuple(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_call), 3))));

          _new_depth = (_isTuple?((modelica_integer) 1) + _depth:_depth);

          {
            modelica_metatype _arg;
            for (tmpMeta42 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_call), 6))); !listEmpty(tmpMeta42); tmpMeta42=MMC_CDR(tmpMeta42))
            {
              _arg = MMC_CAR(tmpMeta42);
              tmpMeta43 = mmc_mk_cons(omc_NBAdjacency_collectDependencies(threadData, _arg, _new_depth, _map, _dep_map, _sol_map, _rep_set), _sets);
              _sets = tmpMeta43;
            }
          }

          _set = omc_UnorderedSet_union__list(threadData, _sets, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual);

          omc_NBAdjacency_Dependency_updateList(threadData, omc_UnorderedSet_toList(threadData, _set), ((modelica_integer) -1), 0 /* false */, _dep_map);

          omc_NBAdjacency_Solvability_updateList(threadData, omc_UnorderedSet_toList(threadData, _set), _OMC_LIT1, _sol_map);

          omc_NBAdjacency_addRepetitions(threadData, _set, _rep_set);

          if(_isTuple)
          {
            omc_NBAdjacency_Dependency_skipList(threadData, omc_UnorderedSet_toList(threadData, _set), ((modelica_integer) 1) + _depth, ((modelica_integer) 0), _dep_map);
          }
          tmpMeta1 = _set;
          goto tmp4_done;
        }
        case 21: {
          modelica_metatype tmpMeta45;
          modelica_metatype tmpMeta46;
          modelica_metatype tmpMeta47;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,12,3) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _arg;
            for (tmpMeta45 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))); !listEmpty(tmpMeta45); tmpMeta45=MMC_CDR(tmpMeta45))
            {
              _arg = MMC_CAR(tmpMeta45);
              tmpMeta46 = mmc_mk_cons(omc_NBAdjacency_collectDependencies(threadData, _arg, _depth, _map, _dep_map, _sol_map, _rep_set), _sets);
              _sets = tmpMeta46;
            }
          }

          _set = omc_UnorderedSet_union__list(threadData, _sets, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual);

          omc_NBAdjacency_Dependency_updateList(threadData, omc_UnorderedSet_toList(threadData, _set), ((modelica_integer) -1), 0 /* false */, _dep_map);

          omc_NBAdjacency_Solvability_updateList(threadData, omc_UnorderedSet_toList(threadData, _set), _OMC_LIT1, _sol_map);

          omc_NBAdjacency_addRepetitions(threadData, _set, _rep_set);
          tmpMeta1 = _set;
          goto tmp4_done;
        }
        case 22: {
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta49;
          modelica_metatype tmpMeta50;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,10,4) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          tmpMeta48 = mmc_mk_cons(omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _depth, _map, _dep_map, _sol_map, _rep_set), _sets);
          _sets = tmpMeta48;

          if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))))
          {
            tmpMeta49 = mmc_mk_cons(omc_NBAdjacency_collectDependencies(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))), _depth, _map, _dep_map, _sol_map, _rep_set), _sets);
            _sets = tmpMeta49;
          }

          tmpMeta50 = mmc_mk_cons(omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _depth, _map, _dep_map, _sol_map, _rep_set), _sets);
          _sets = tmpMeta50;

          _set = omc_UnorderedSet_union__list(threadData, _sets, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual);

          omc_NBAdjacency_Solvability_updateList(threadData, omc_UnorderedSet_toList(threadData, _set), _OMC_LIT0, _sol_map);
          tmpMeta1 = _set;
          goto tmp4_done;
        }
        case 23: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13));
          goto tmp4_done;
        }
        }
        goto tmp4_end;
        tmp4_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp4_done;
      tmp4_done:;
    }
  }
  _set = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _set;
}
modelica_metatype boxptr_NBAdjacency_collectDependencies(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _depth, modelica_metatype _map, modelica_metatype _dep_map, modelica_metatype _sol_map, modelica_metatype _rep_set)
{
  modelica_integer tmp1;
  modelica_metatype _set = NULL;
  tmp1 = mmc_unbox_integer(_depth);
  _set = omc_NBAdjacency_collectDependencies(threadData, _exp, tmp1, _map, _dep_map, _sol_map, _rep_set);
  /* skip box _set; UnorderedSet<NFComponentRef> */
  return _set;
}

static modelica_metatype closure0_NBSlice_getDependentCref(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_cref, modelica_metatype acc)
{
  modelica_metatype map = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype pseudo = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NBSlice_getDependentCref(thData, $in_cref, acc, map, pseudo);
}static modelica_metatype closure1_NBSlice_filterExp(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_fnptr filter = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype acc = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NBSlice_filterExp(thData, $in_exp, filter, acc);
}static modelica_metatype closure2_filter(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_cref)
{
  modelica_metatype acc = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_fnptr _filter = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  if (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_filter),2))) {
    return  ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_filter), 1)))) (thData, MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_filter),2)), $in_cref, acc);
  } else { /* No closure in the called variable */
    return  ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_filter), 1)))) (thData, $in_cref, acc);
  }
}
DLLDirection
modelica_metatype omc_NBAdjacency_collectDependenciesEquation(threadData_t *threadData, modelica_metatype _eqn, modelica_metatype _map, modelica_metatype _dep_map, modelica_metatype _sol_map, modelica_metatype _rep_set)
{
  modelica_metatype _occurences = NULL;
  modelica_metatype _inputs = NULL;
  modelica_metatype _outputs = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _occurences has no default value.
  // _inputs has no default value.
  // _outputs has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _eqn;
    {
      modelica_metatype _occ1 = NULL;
      modelica_metatype _occ2 = NULL;
      modelica_metatype _body = NULL;
      modelica_fnptr _filter;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _occ1 has no default value.
      // _occ2 has no default value.
      // _body has no default value.
      tmp4 = 0;
      for (; tmp4 < 8; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _occ1 = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqn), 3))), ((modelica_integer) 0), _map, _dep_map, _sol_map, _rep_set);

          _occ2 = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqn), 4))), ((modelica_integer) 0), _map, _dep_map, _sol_map, _rep_set);
          tmpMeta1 = omc_UnorderedSet_union(threadData, _occ1, _occ2);
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,6) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _occ1 = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqn), 3))), ((modelica_integer) 0), _map, _dep_map, _sol_map, _rep_set);

          _occ2 = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqn), 4))), ((modelica_integer) 0), _map, _dep_map, _sol_map, _rep_set);
          tmpMeta1 = omc_UnorderedSet_union(threadData, _occ1, _occ2);
          goto tmp3_done;
        }
        case 2: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,6) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _occ1 = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqn), 3))), ((modelica_integer) 0), _map, _dep_map, _sol_map, _rep_set);

          _occ2 = omc_NBAdjacency_collectDependencies(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqn), 4))), ((modelica_integer) 0), _map, _dep_map, _sol_map, _rep_set);
          tmpMeta1 = omc_UnorderedSet_union(threadData, _occ1, _occ2);
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,5) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar9;
            modelica_metatype* tmp7;
            modelica_metatype tmpMeta8;
            modelica_metatype __omcQ_24tmpVar8;
            modelica_integer tmp9;
            modelica_metatype _c_loopVar = 0;
            modelica_metatype _c;
            _c_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqn), 3)))), 3)));
            tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar9 = tmpMeta8; /* defaultValue */
            tmp7 = &__omcQ_24tmpVar9;
            while(1) {
              tmp9 = 1;
              if (!listEmpty(_c_loopVar)) {
                _c = MMC_CAR(_c_loopVar);
                _c_loopVar = MMC_CDR(_c_loopVar);
                tmp9--;
              }
              if (tmp9 == 0) {
                __omcQ_24tmpVar8 = omc_NBAdjacency_collectDependenciesCref(threadData, _c, ((modelica_integer) 0), _map, _dep_map, _sol_map);
                *tmp7 = mmc_mk_cons(__omcQ_24tmpVar8,0);
                tmp7 = &MMC_CDR(*tmp7);
              } else if (tmp9 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp7 = mmc_mk_nil();
            tmpMeta6 = __omcQ_24tmpVar9;
          }
          _inputs = omc_List_flatten(threadData, tmpMeta6);

          {
            modelica_metatype __omcQ_24tmpVar11;
            modelica_metatype* tmp11;
            modelica_metatype tmpMeta12;
            modelica_metatype __omcQ_24tmpVar10;
            modelica_integer tmp13;
            modelica_metatype _c_loopVar = 0;
            modelica_metatype _c;
            _c_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqn), 3)))), 4)));
            tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar11 = tmpMeta12; /* defaultValue */
            tmp11 = &__omcQ_24tmpVar11;
            while(1) {
              tmp13 = 1;
              if (!listEmpty(_c_loopVar)) {
                _c = MMC_CAR(_c_loopVar);
                _c_loopVar = MMC_CDR(_c_loopVar);
                tmp13--;
              }
              if (tmp13 == 0) {
                __omcQ_24tmpVar10 = omc_NBAdjacency_collectDependenciesCref(threadData, _c, ((modelica_integer) 0), _map, _dep_map, _sol_map);
                *tmp11 = mmc_mk_cons(__omcQ_24tmpVar10,0);
                tmp11 = &MMC_CDR(*tmp11);
              } else if (tmp13 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp11 = mmc_mk_nil();
            tmpMeta10 = __omcQ_24tmpVar11;
          }
          _outputs = omc_List_flatten(threadData, tmpMeta10);

          omc_NBAdjacency_Dependency_addListFull(threadData, _inputs, ((modelica_integer) 0), _dep_map, _rep_set);

          omc_NBAdjacency_Dependency_addListFull(threadData, _outputs, ((modelica_integer) 0), _dep_map, _rep_set);

          omc_NBAdjacency_Solvability_updateList(threadData, _inputs, _OMC_LIT1, _sol_map);

          omc_NBAdjacency_Solvability_updateList(threadData, _outputs, _OMC_LIT4, _sol_map);
          tmpMeta1 = omc_UnorderedSet_fromList(threadData, listAppend(_inputs, _outputs), boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual);
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,5) == 0) goto tmp3_end;
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          if (listEmpty(tmpMeta14)) goto tmp3_end;
          tmpMeta15 = MMC_CAR(tmpMeta14);
          tmpMeta16 = MMC_CDR(tmpMeta14);
          if (!listEmpty(tmpMeta16)) goto tmp3_end;
          
          _body = tmpMeta15;
          /* Pattern matching succeeded */
          _occ1 = omc_NBAdjacency_collectDependenciesEquation(threadData, _body, _map, _dep_map, _sol_map, _rep_set);

          _occ2 = omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13));

          tmpMeta17 = mmc_mk_box2(0, _map, mmc_mk_boolean(1 /* true */));
          _filter = (modelica_fnptr) (modelica_fnptr) mmc_mk_box2(0,closure0_NBSlice_getDependentCref,tmpMeta17);

          tmpMeta18 = mmc_mk_box2(0, ((modelica_fnptr) _filter), _occ2);
          tmpMeta19 = mmc_mk_box2(0, _occ2, _filter);
          omc_NBEquation_Iterator_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqn), 3))), (modelica_fnptr) mmc_mk_box2(0,closure1_NBSlice_filterExp,tmpMeta18), mmc_mk_some((modelica_fnptr) mmc_mk_box2(0,closure2_filter,tmpMeta19)), boxvar_NFExpression_mapShallow);

          omc_NBAdjacency_Solvability_updateList(threadData, omc_UnorderedSet_toList(threadData, _occ2), _OMC_LIT0, _sol_map);
          tmpMeta1 = omc_UnorderedSet_union(threadData, _occ1, _occ2);
          goto tmp3_done;
        }
        case 5: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NBAdjacency_collectDependenciesIf(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqn), 3))), _map, _dep_map, _sol_map, _rep_set);
          goto tmp3_done;
        }
        case 6: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NBAdjacency_collectDependenciesWhen(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqn), 3))), _map, _dep_map, _sol_map, _rep_set);
          goto tmp3_done;
        }
        case 7: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _occurences = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _occurences;
}

DLLDirection
modelica_boolean omc_NBAdjacency_Solvability_isNonlinearOrImplicit(threadData_t *threadData, modelica_metatype _sol)
{
  modelica_boolean _b;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _b has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _sol;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 6: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _b = tmp1;
  _return: OMC_LABEL_UNUSED
  return _b;
}
modelica_metatype boxptr_NBAdjacency_Solvability_isNonlinearOrImplicit(threadData_t *threadData, modelica_metatype _sol)
{
  modelica_boolean _b;
  modelica_metatype out_b;
  _b = omc_NBAdjacency_Solvability_isNonlinearOrImplicit(threadData, _sol);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Solvability_fromStrictness(threadData_t *threadData, modelica_integer _st)
{
  modelica_metatype _sol = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _sol has no default value.
  { /* match expression */
    modelica_integer tmp4_1;
    tmp4_1 = (modelica_integer)_st;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 4; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (1 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta6 = mmc_mk_box3(7, &NBAdjacency_Solvability_EXPLICIT__LINEAR__desc, mmc_mk_none(), mmc_mk_some(omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13))));
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 1: {
          if (2 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT1;
          goto tmp3_done;
        }
        case 2: {
          if (3 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT0;
          goto tmp3_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT5;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _sol = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _sol;
}
modelica_metatype boxptr_NBAdjacency_Solvability_fromStrictness(threadData_t *threadData, modelica_metatype _st)
{
  modelica_integer tmp1;
  modelica_metatype _sol = NULL;
  tmp1 = mmc_unbox_integer(_st);
  _sol = omc_NBAdjacency_Solvability_fromStrictness(threadData, tmp1);
  /* skip box _sol; NBAdjacency.Solvability */
  return _sol;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Solvability_filter(threadData_t *threadData, modelica_metatype _all_occ, modelica_metatype _map, modelica_metatype _rel, modelica_integer _min, modelica_integer _max)
{
  modelica_metatype _occ = NULL;
  modelica_metatype tmpMeta1;
  modelica_integer _r;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _occ = tmpMeta1;
  // _r has no default value.
  {
    modelica_metatype _cref;
    for (tmpMeta2 = _all_occ; !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
    {
      _cref = MMC_CAR(tmpMeta2);
      if(omc_UnorderedMap_contains(threadData, _cref, _rel))
      {
        _r = omc_NBAdjacency_Solvability_rank(threadData, omc_UnorderedMap_getSafe(threadData, _cref, _map, _OMC_LIT6));

        if(((_r >= _min) && (_r <= _max)))
        {
          tmpMeta3 = mmc_mk_cons(_cref, _occ);
          _occ = tmpMeta3;
        }
      }
    }
  }
  _return: OMC_LABEL_UNUSED
  return _occ;
}
modelica_metatype boxptr_NBAdjacency_Solvability_filter(threadData_t *threadData, modelica_metatype _all_occ, modelica_metatype _map, modelica_metatype _rel, modelica_metatype _min, modelica_metatype _max)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _occ = NULL;
  modelica_metatype tmpMeta3;
  tmp1 = mmc_unbox_integer(_min);
  tmp2 = mmc_unbox_integer(_max);
  _occ = omc_NBAdjacency_Solvability_filter(threadData, _all_occ, _map, _rel, tmp1, tmp2);
  /* skip box _occ; list<NFComponentRef> */
  return _occ;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Solvability_categorize(threadData_t *threadData, modelica_metatype _crefs, modelica_metatype _map, modelica_metatype *out_II, modelica_metatype *out_NM, modelica_metatype *out_NP, modelica_metatype *out_LV, modelica_metatype *out_LP, modelica_metatype *out_LC, modelica_metatype *out_QQ)
{
  modelica_metatype _XX = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _II = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype _NM = NULL;
  modelica_metatype tmpMeta3;
  modelica_metatype _NP = NULL;
  modelica_metatype tmpMeta4;
  modelica_metatype _LV = NULL;
  modelica_metatype tmpMeta5;
  modelica_metatype _LP = NULL;
  modelica_metatype tmpMeta6;
  modelica_metatype _LC = NULL;
  modelica_metatype tmpMeta7;
  modelica_metatype _QQ = NULL;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta28;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _XX = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _II = tmpMeta2;
  tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
  _NM = tmpMeta3;
  tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
  _NP = tmpMeta4;
  tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
  _LV = tmpMeta5;
  tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
  _LP = tmpMeta6;
  tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
  _LC = tmpMeta7;
  tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
  _QQ = tmpMeta8;
  {
    modelica_metatype _cref;
    for (tmpMeta9 = _crefs; !listEmpty(tmpMeta9); tmpMeta9=MMC_CDR(tmpMeta9))
    {
      _cref = MMC_CAR(tmpMeta9);
      { /* match expression */
        modelica_metatype tmp12_1;
        tmp12_1 = omc_UnorderedMap_getSafe(threadData, _cref, _map, _OMC_LIT7);
        {
          volatile mmc_switch_type tmp12;
          int tmp13;
          tmp12 = 0;
          for (; tmp12 < 8; tmp12++) {
            switch (MMC_SWITCH_CAST(tmp12)) {
            case 0: {
              modelica_metatype tmpMeta14;
              if (mmc__uniontype__metarecord__typedef__equal(tmp12_1,1,0) == 0) goto tmp11_end;
              /* Pattern matching succeeded */
              tmpMeta14 = mmc_mk_cons(_cref, _XX);
              _XX = tmpMeta14;
              goto tmp11_done;
            }
            case 1: {
              modelica_metatype tmpMeta15;
              if (mmc__uniontype__metarecord__typedef__equal(tmp12_1,2,0) == 0) goto tmp11_end;
              /* Pattern matching succeeded */
              tmpMeta15 = mmc_mk_cons(_cref, _II);
              _II = tmpMeta15;
              goto tmp11_done;
            }
            case 2: {
              modelica_metatype tmpMeta16;
              modelica_integer tmp17;
              modelica_metatype tmpMeta18;
              if (mmc__uniontype__metarecord__typedef__equal(tmp12_1,3,1) == 0) goto tmp11_end;
              tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp12_1), 2));
              tmp17 = mmc_unbox_integer(tmpMeta16);
              if (0 /* false */ != tmp17) goto tmp11_end;
              /* Pattern matching succeeded */
              tmpMeta18 = mmc_mk_cons(_cref, _NM);
              _NM = tmpMeta18;
              goto tmp11_done;
            }
            case 3: {
              modelica_metatype tmpMeta19;
              if (mmc__uniontype__metarecord__typedef__equal(tmp12_1,3,1) == 0) goto tmp11_end;
              
              /* Pattern matching succeeded */
              tmpMeta19 = mmc_mk_cons(_cref, _NP);
              _NP = tmpMeta19;
              goto tmp11_done;
            }
            case 4: {
              modelica_metatype tmpMeta20;
              modelica_metatype tmpMeta21;
              modelica_metatype tmpMeta22;
              if (mmc__uniontype__metarecord__typedef__equal(tmp12_1,4,2) == 0) goto tmp11_end;
              tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp12_1), 3));
              if (optionNone(tmpMeta20)) goto tmp11_end;
              tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 1));
              /* Pattern matching succeeded */
              tmpMeta22 = mmc_mk_cons(_cref, _LV);
              _LV = tmpMeta22;
              goto tmp11_done;
            }
            case 5: {
              modelica_metatype tmpMeta23;
              modelica_metatype tmpMeta24;
              modelica_metatype tmpMeta25;
              if (mmc__uniontype__metarecord__typedef__equal(tmp12_1,4,2) == 0) goto tmp11_end;
              tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp12_1), 2));
              if (optionNone(tmpMeta23)) goto tmp11_end;
              tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 1));
              
              /* Pattern matching succeeded */
              tmpMeta25 = mmc_mk_cons(_cref, _LP);
              _LP = tmpMeta25;
              goto tmp11_done;
            }
            case 6: {
              modelica_metatype tmpMeta26;
              if (mmc__uniontype__metarecord__typedef__equal(tmp12_1,4,2) == 0) goto tmp11_end;
              
              /* Pattern matching succeeded */
              tmpMeta26 = mmc_mk_cons(_cref, _LC);
              _LC = tmpMeta26;
              goto tmp11_done;
            }
            case 7: {
              modelica_metatype tmpMeta27;
              
              /* Pattern matching succeeded */
              tmpMeta27 = mmc_mk_cons(_cref, _QQ);
              _QQ = tmpMeta27;
              goto tmp11_done;
            }
            }
            goto tmp11_end;
            tmp11_end: ;
          }
          goto goto_10;
          goto_10:;
          MMC_THROW_INTERNAL();
          goto tmp11_done;
          tmp11_done:;
        }
      }
      ;
    }
  }
  _return: OMC_LABEL_UNUSED
  if (out_II) { *out_II = _II; }
  if (out_NM) { *out_NM = _NM; }
  if (out_NP) { *out_NP = _NP; }
  if (out_LV) { *out_LV = _LV; }
  if (out_LP) { *out_LP = _LP; }
  if (out_LC) { *out_LC = _LC; }
  if (out_QQ) { *out_QQ = _QQ; }
  return _XX;
}

DLLDirection
void omc_NBAdjacency_Solvability_updateList(threadData_t *threadData, modelica_metatype _lst, modelica_metatype _sol, modelica_metatype _map)
{
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  {
    modelica_metatype _cref;
    for (tmpMeta1 = _lst; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _cref = MMC_CAR(tmpMeta1);
      omc_NBAdjacency_Solvability_update(threadData, _cref, _sol, _map);
    }
  }
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
void omc_NBAdjacency_Solvability_update(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _sol, modelica_metatype _map)
{
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  if((omc_NBAdjacency_Solvability_rank(threadData, _sol) > omc_NBAdjacency_Solvability_rank(threadData, omc_Util_getOptionOrDefault(threadData, omc_UnorderedMap_get(threadData, _cref, _map), _OMC_LIT5))))
  {
    omc_UnorderedMap_add(threadData, _cref, _sol, _map);
  }
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
modelica_integer omc_NBAdjacency_Solvability_rank(threadData_t *threadData, modelica_metatype _sol)
{
  modelica_integer _r;
  modelica_integer tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _r has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _sol;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 9; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 7);
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 6);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmp7 = mmc_unbox_integer(tmpMeta6);
          if (0 /* false */ != tmp7) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 5);
          goto tmp3_done;
        }
        case 3: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 4);
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,2) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (optionNone(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 3);
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,2) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (optionNone(tmpMeta10)) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 1));
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 2);
          goto tmp3_done;
        }
        case 6: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 1);
          goto tmp3_done;
        }
        case 7: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 0);
          goto tmp3_done;
        }
        case 8: {
          
          /* Pattern matching succeeded */
          omc_Error_addMessage(threadData, _OMC_LIT12, _OMC_LIT14);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _r = tmp1;
  _return: OMC_LABEL_UNUSED
  return _r;
}
modelica_metatype boxptr_NBAdjacency_Solvability_rank(threadData_t *threadData, modelica_metatype _sol)
{
  modelica_integer _r;
  modelica_metatype out_r;
  _r = omc_NBAdjacency_Solvability_rank(threadData, _sol);
  out_r = mmc_mk_icon(_r);
  return out_r;
}

DLLDirection
modelica_string omc_NBAdjacency_Solvability_toString(threadData_t *threadData, modelica_metatype _sol)
{
  modelica_string _str = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _str has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _sol;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT15;
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT16;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          tmpMeta5 = stringAppend(_OMC_LIT17,(mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sol), 2))))?_OMC_LIT18:_OMC_LIT19));
          tmp1 = tmpMeta5;
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          tmpMeta6 = stringAppend(_OMC_LIT20,(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sol), 3))))?_OMC_LIT21:(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sol), 2))))?_OMC_LIT22:_OMC_LIT23)));
          tmp1 = tmpMeta6;
          goto tmp3_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT24;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          omc_Error_addMessage(threadData, _OMC_LIT12, _OMC_LIT26);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _str = tmp1;
  _return: OMC_LABEL_UNUSED
  return _str;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Dependency_categorize(threadData_t *threadData, modelica_metatype _crefs, modelica_metatype _map, modelica_metatype _rep_set, modelica_metatype *out_R, modelica_metatype *out_E, modelica_metatype *out_A, modelica_metatype *out_S, modelica_metatype *out_K)
{
  modelica_metatype _F = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _R = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype _E = NULL;
  modelica_metatype tmpMeta3;
  modelica_metatype _A = NULL;
  modelica_metatype tmpMeta4;
  modelica_metatype _S = NULL;
  modelica_metatype tmpMeta5;
  modelica_metatype _K = NULL;
  modelica_metatype tmpMeta6;
  modelica_boolean _repeats;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta22;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _F = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _R = tmpMeta2;
  tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
  _E = tmpMeta3;
  tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
  _A = tmpMeta4;
  tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
  _S = tmpMeta5;
  tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
  _K = tmpMeta6;
  // _repeats has no default value.
  {
    modelica_metatype _cref;
    for (tmpMeta7 = _crefs; !listEmpty(tmpMeta7); tmpMeta7=MMC_CDR(tmpMeta7))
    {
      _cref = MMC_CAR(tmpMeta7);
      _repeats = omc_UnorderedSet_contains(threadData, _cref, _rep_set);

      { /* match expression */
        modelica_metatype tmp10_1;
        tmp10_1 = omc_UnorderedMap_getSafe(threadData, _cref, _map, _OMC_LIT27);
        {
          modelica_metatype _skips = NULL;
          modelica_metatype _kinds = NULL;
          volatile mmc_switch_type tmp10;
          int tmp11;
          // _skips has no default value.
          // _kinds has no default value.
          tmp10 = 0;
          for (; tmp10 < 5; tmp10++) {
            switch (MMC_SWITCH_CAST(tmp10)) {
            case 0: {
              modelica_metatype tmpMeta12;
              modelica_metatype tmpMeta13;
              if (mmc__uniontype__metarecord__typedef__equal(tmp10_1,0,2) == 0) goto tmp9_end;
              tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp10_1), 2));
              
              _skips = tmpMeta12;
              /* Pattern matching succeeded */
              /* Check guard condition after assignments */
              if (!(!listEmpty(omc_List_flatten(threadData, arrayList(_skips))))) goto tmp9_end;
              tmpMeta13 = mmc_mk_cons(_cref, _K);
              _K = tmpMeta13;
              goto tmp9_done;
            }
            case 1: {
              modelica_metatype tmpMeta14;
              modelica_metatype tmpMeta15;
              if (mmc__uniontype__metarecord__typedef__equal(tmp10_1,0,2) == 0) goto tmp9_end;
              tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp10_1), 3));
              if (!listEmpty(tmpMeta14)) goto tmp9_end;
              /* Pattern matching succeeded */
              /* Check guard condition after assignments */
              if (!_repeats) goto tmp9_end;
              tmpMeta15 = mmc_mk_cons(_cref, _E);
              _E = tmpMeta15;
              goto tmp9_done;
            }
            case 2: {
              modelica_metatype tmpMeta16;
              modelica_metatype tmpMeta17;
              if (mmc__uniontype__metarecord__typedef__equal(tmp10_1,0,2) == 0) goto tmp9_end;
              tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp10_1), 3));
              if (!listEmpty(tmpMeta16)) goto tmp9_end;
              /* Pattern matching succeeded */
              tmpMeta17 = mmc_mk_cons(_cref, _S);
              _S = tmpMeta17;
              goto tmp9_done;
            }
            case 3: {
              modelica_metatype tmpMeta18;
              modelica_metatype tmpMeta19;
              modelica_metatype tmpMeta20;
              modelica_metatype tmpMeta21;
              if (mmc__uniontype__metarecord__typedef__equal(tmp10_1,0,2) == 0) goto tmp9_end;
              tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp10_1), 3));
              _kinds = tmpMeta18;
              /* Pattern matching succeeded */
              if(omc_List_any(threadData, _kinds, boxvar_NBAdjacency_Dependency_isReductionKind))
              {
                if(_repeats)
                {
                  tmpMeta19 = mmc_mk_cons(_cref, _F);
                  _F = tmpMeta19;
                }
                else
                {
                  tmpMeta20 = mmc_mk_cons(_cref, _R);
                  _R = tmpMeta20;
                }
              }
              else
              {
                tmpMeta21 = mmc_mk_cons(_cref, _A);
                _A = tmpMeta21;
              }
              goto tmp9_done;
            }
            case 4: {
              
              /* Pattern matching succeeded */
              goto tmp9_done;
            }
            }
            goto tmp9_end;
            tmp9_end: ;
          }
          goto goto_8;
          goto_8:;
          MMC_THROW_INTERNAL();
          goto tmp9_done;
          tmp9_done:;
        }
      }
      ;
    }
  }
  _return: OMC_LABEL_UNUSED
  if (out_R) { *out_R = _R; }
  if (out_E) { *out_E = _E; }
  if (out_A) { *out_A = _A; }
  if (out_S) { *out_S = _S; }
  if (out_K) { *out_K = _K; }
  return _F;
}

DLLDirection
modelica_boolean omc_NBAdjacency_Dependency_isReductionKind(threadData_t *threadData, modelica_integer _kind)
{
  modelica_boolean _b;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _b = ((modelica_integer)_kind == 2);
  _return: OMC_LABEL_UNUSED
  return _b;
}
modelica_metatype boxptr_NBAdjacency_Dependency_isReductionKind(threadData_t *threadData, modelica_metatype _kind)
{
  modelica_integer tmp1;
  modelica_boolean _b;
  modelica_metatype out_b;
  tmp1 = mmc_unbox_integer(_kind);
  _b = omc_NBAdjacency_Dependency_isReductionKind(threadData, tmp1);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

DLLDirection
void omc_NBAdjacency_Dependency_addListFull(threadData_t *threadData, modelica_metatype _lst, modelica_integer _depth, modelica_metatype _map, modelica_metatype _rep)
{
  modelica_metatype _dep = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _dep has no default value.
  {
    modelica_metatype _cref;
    for (tmpMeta1 = _lst; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _cref = MMC_CAR(tmpMeta1);
      omc_UnorderedMap_add(threadData, _cref, omc_NBAdjacency_Dependency_create(threadData, omc_NFComponentRef_getSubscriptedType(threadData, _cref, 0 /* false */), _depth), _map);

      omc_UnorderedSet_add(threadData, _cref, _rep);
    }
  }

  omc_NBAdjacency_Dependency_updateList(threadData, _lst, ((modelica_integer) -1), 0 /* false */, _map);
  _return: OMC_LABEL_UNUSED
  return;
}
void boxptr_NBAdjacency_Dependency_addListFull(threadData_t *threadData, modelica_metatype _lst, modelica_metatype _depth, modelica_metatype _map, modelica_metatype _rep)
{
  modelica_integer tmp1;
  tmp1 = mmc_unbox_integer(_depth);
  omc_NBAdjacency_Dependency_addListFull(threadData, _lst, tmp1, _map, _rep);
  return;
}

DLLDirection
void omc_NBAdjacency_Dependency_removeSkipsList(threadData_t *threadData, modelica_metatype _lst, modelica_metatype _map)
{
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  {
    modelica_metatype _cref;
    for (tmpMeta1 = _lst; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _cref = MMC_CAR(tmpMeta1);
      omc_NBAdjacency_Dependency_removeSkips(threadData, _cref, _map);
    }
  }
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
void omc_NBAdjacency_Dependency_skipList(threadData_t *threadData, modelica_metatype _lst, modelica_integer _depth, modelica_integer _sk, modelica_metatype _map)
{
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  {
    modelica_metatype _cref;
    for (tmpMeta1 = _lst; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _cref = MMC_CAR(tmpMeta1);
      omc_NBAdjacency_Dependency_skip(threadData, _cref, _depth, _sk, _map);
    }
  }
  _return: OMC_LABEL_UNUSED
  return;
}
void boxptr_NBAdjacency_Dependency_skipList(threadData_t *threadData, modelica_metatype _lst, modelica_metatype _depth, modelica_metatype _sk, modelica_metatype _map)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  tmp1 = mmc_unbox_integer(_depth);
  tmp2 = mmc_unbox_integer(_sk);
  omc_NBAdjacency_Dependency_skipList(threadData, _lst, tmp1, tmp2, _map);
  return;
}

DLLDirection
void omc_NBAdjacency_Dependency_updateList(threadData_t *threadData, modelica_metatype _lst, modelica_integer _num, modelica_boolean _reverse, modelica_metatype _map)
{
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  {
    modelica_metatype _cref;
    for (tmpMeta1 = _lst; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _cref = MMC_CAR(tmpMeta1);
      omc_NBAdjacency_Dependency_update(threadData, _cref, _num, _reverse, _map);
    }
  }
  _return: OMC_LABEL_UNUSED
  return;
}
void boxptr_NBAdjacency_Dependency_updateList(threadData_t *threadData, modelica_metatype _lst, modelica_metatype _num, modelica_metatype _reverse, modelica_metatype _map)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  tmp1 = mmc_unbox_integer(_num);
  tmp2 = mmc_unbox_integer(_reverse);
  omc_NBAdjacency_Dependency_updateList(threadData, _lst, tmp1, tmp2, _map);
  return;
}

DLLDirection
void omc_NBAdjacency_Dependency_removeSkips(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _map)
{
  modelica_metatype _opt_dep = NULL;
  modelica_metatype _dep = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_integer tmp4;
  modelica_integer tmp5;
  modelica_integer tmp6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _opt_dep = omc_UnorderedMap_get(threadData, _cref, _map);
  // _dep has no default value.
  if(isSome(_opt_dep))
  {
    /* Pattern-matching assignment */
    tmpMeta1 = _opt_dep;
    if (optionNone(tmpMeta1)) MMC_THROW_INTERNAL();
    tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
    _dep = tmpMeta2;

    tmp4 = ((modelica_integer) 1); tmp5 = 1; tmp6 = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dep), 2))));
    if(!(((tmp5 > 0) && (tmp4 > tmp6)) || ((tmp5 < 0) && (tmp4 < tmp6))))
    {
      modelica_integer _i;
      for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp4, tmp6); _i += tmp5)
      {
        tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
        arrayUpdate((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dep), 2))), _i, tmpMeta3);
      }
    }

    omc_UnorderedMap_add(threadData, _cref, _dep, _map);
  }
  else
  {
    tmpMeta8 = stringAppend(_OMC_LIT28,omc_NFComponentRef_toString(threadData, _cref));
    tmpMeta9 = stringAppend(tmpMeta8,_OMC_LIT29);
    tmpMeta7 = mmc_mk_cons(tmpMeta9, MMC_REFSTRUCTLIT(mmc_nil));
    omc_Error_addMessage(threadData, _OMC_LIT12, tmpMeta7);

    MMC_THROW_INTERNAL();
  }
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
void omc_NBAdjacency_Dependency_skip(threadData_t *threadData, modelica_metatype _cref, modelica_integer _depth, modelica_integer _sk, modelica_metatype _map)
{
  modelica_metatype _opt_dep = NULL;
  modelica_metatype _dep = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _opt_dep = omc_UnorderedMap_get(threadData, _cref, _map);
  // _dep has no default value.
  if(isSome(_opt_dep))
  {
    /* Pattern-matching assignment */
    tmpMeta1 = _opt_dep;
    if (optionNone(tmpMeta1)) MMC_THROW_INTERNAL();
    tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
    _dep = tmpMeta2;

    if((arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dep), 2)))) >= _depth))
    {
      tmpMeta3 = mmc_mk_cons(mmc_mk_integer(_sk), arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dep), 2))),_depth) /* DAE.ASUB */);
      arrayUpdate((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dep), 2))), _depth, omc_UnorderedSet_unique__list(threadData, tmpMeta3, boxvar_Util_id, boxvar_intEq));
    }
    else
    {
      if(omc_Flags_isSet(threadData, _OMC_LIT38))
      {
        tmpMeta4 = stringAppend(_OMC_LIT31,omc_NFComponentRef_toString(threadData, _cref));
        tmpMeta5 = stringAppend(tmpMeta4,_OMC_LIT32);
        tmpMeta6 = stringAppend(tmpMeta5,intString(arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dep), 2))))));
        tmpMeta7 = stringAppend(tmpMeta6,_OMC_LIT33);
        tmpMeta8 = stringAppend(tmpMeta7,intString(_depth));
        tmpMeta9 = stringAppend(tmpMeta8,_OMC_LIT34);
        omc_Error_addCompilerWarning(threadData, tmpMeta9);
      }
    }

    omc_UnorderedMap_add(threadData, _cref, _dep, _map);
  }
  else
  {
    tmpMeta11 = stringAppend(_OMC_LIT30,omc_NFComponentRef_toString(threadData, _cref));
    tmpMeta12 = stringAppend(tmpMeta11,_OMC_LIT29);
    tmpMeta10 = mmc_mk_cons(tmpMeta12, MMC_REFSTRUCTLIT(mmc_nil));
    omc_Error_addMessage(threadData, _OMC_LIT12, tmpMeta10);

    MMC_THROW_INTERNAL();
  }
  _return: OMC_LABEL_UNUSED
  return;
}
void boxptr_NBAdjacency_Dependency_skip(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _depth, modelica_metatype _sk, modelica_metatype _map)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  tmp1 = mmc_unbox_integer(_depth);
  tmp2 = mmc_unbox_integer(_sk);
  omc_NBAdjacency_Dependency_skip(threadData, _cref, tmp1, tmp2, _map);
  return;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBAdjacency_Dependency_update_makeNewKinds(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fkinds, modelica_integer _num)
{
  modelica_metatype _kinds = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _kinds = __omcQ_24in_5Fkinds;
  { /* match expression */
    modelica_metatype tmp4_1;modelica_integer tmp4_2;
    tmp4_1 = _kinds;
    tmp4_2 = _num;
    {
      modelica_metatype _rest = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _rest has no default value.
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (0 != tmp4_2) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = _kinds;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          
          _rest = tmpMeta7;
          /* Pattern matching succeeded */
          tmpMeta8 = mmc_mk_cons(mmc_mk_integer(2), omc_NBAdjacency_Dependency_update_makeNewKinds(threadData, _rest, ((modelica_integer) -1) + _num));
          tmpMeta1 = tmpMeta8;
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _kinds;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _kinds = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _kinds;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBAdjacency_Dependency_update_makeNewKinds(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fkinds, modelica_metatype _num)
{
  modelica_integer tmp1;
  modelica_metatype _kinds = NULL;
  tmp1 = mmc_unbox_integer(_num);
  _kinds = omc_NBAdjacency_Dependency_update_makeNewKinds(threadData, __omcQ_24in_5Fkinds, tmp1);
  /* skip box _kinds; list<#enumeration(REGULAR, REDUCTION)> */
  return _kinds;
}

DLLDirection
void omc_NBAdjacency_Dependency_update(threadData_t *threadData, modelica_metatype _cref, modelica_integer _num, modelica_boolean _reverse, modelica_metatype _map)
{
  modelica_metatype _opt_dep = NULL;
  modelica_metatype _dep = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _opt_dep = omc_UnorderedMap_get(threadData, _cref, _map);
  // _dep has no default value.
  if(isSome(_opt_dep))
  {
    /* Pattern-matching assignment */
    tmpMeta1 = _opt_dep;
    if (optionNone(tmpMeta1)) MMC_THROW_INTERNAL();
    tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
    _dep = tmpMeta2;

    if(_reverse)
    {
      tmpMeta3 = MMC_TAGPTR(mmc_alloc_words(4));
      memcpy(MMC_UNTAGPTR(tmpMeta3), MMC_UNTAGPTR(_dep), 4*sizeof(modelica_metatype));
      ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta3))[3] = listReverse(omc_NBAdjacency_Dependency_update_makeNewKinds(threadData, listReverse((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dep), 3)))), _num));
      _dep = tmpMeta3;
    }
    else
    {
      tmpMeta4 = MMC_TAGPTR(mmc_alloc_words(4));
      memcpy(MMC_UNTAGPTR(tmpMeta4), MMC_UNTAGPTR(_dep), 4*sizeof(modelica_metatype));
      ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta4))[3] = omc_NBAdjacency_Dependency_update_makeNewKinds(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dep), 3))), _num);
      _dep = tmpMeta4;
    }

    omc_UnorderedMap_add(threadData, _cref, _dep, _map);
  }
  else
  {
    tmpMeta6 = stringAppend(_OMC_LIT39,omc_NFComponentRef_toString(threadData, _cref));
    tmpMeta7 = stringAppend(tmpMeta6,_OMC_LIT29);
    tmpMeta5 = mmc_mk_cons(tmpMeta7, MMC_REFSTRUCTLIT(mmc_nil));
    omc_Error_addMessage(threadData, _OMC_LIT12, tmpMeta5);

    MMC_THROW_INTERNAL();
  }
  _return: OMC_LABEL_UNUSED
  return;
}
void boxptr_NBAdjacency_Dependency_update(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _num, modelica_metatype _reverse, modelica_metatype _map)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  tmp1 = mmc_unbox_integer(_num);
  tmp2 = mmc_unbox_integer(_reverse);
  omc_NBAdjacency_Dependency_update(threadData, _cref, tmp1, tmp2, _map);
  return;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Dependency_create(threadData_t *threadData, modelica_metatype _sub_ty, modelica_integer _depth)
{
  modelica_metatype _dep = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _dep has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  {
    modelica_metatype __omcQ_24tmpVar13;
    modelica_metatype* tmp3;
    modelica_metatype tmpMeta4;
    modelica_metatype __omcQ_24tmpVar12;
    modelica_integer tmp5;
    modelica_metatype _dim_loopVar = 0;
    modelica_metatype _dim;
    _dim_loopVar = omc_NFType_arrayDims(threadData, _sub_ty);
    tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar13 = tmpMeta4; /* defaultValue */
    tmp3 = &__omcQ_24tmpVar13;
    while(1) {
      tmp5 = 1;
      while (!listEmpty(_dim_loopVar)) {
        _dim = MMC_CAR(_dim_loopVar);
        _dim_loopVar = MMC_CDR(_dim_loopVar);
        if ((!omc_NFDimension_isOne(threadData, _dim))) {
          tmp5--;
          break;
        }
      }
      if (tmp5 == 0) {
        __omcQ_24tmpVar12 = mmc_mk_integer(1);
        *tmp3 = mmc_mk_cons(__omcQ_24tmpVar12,0);
        tmp3 = &MMC_CDR(*tmp3);
      } else if (tmp5 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp3 = mmc_mk_nil();
    tmpMeta2 = __omcQ_24tmpVar13;
  }
  tmpMeta6 = mmc_mk_box3(3, &NBAdjacency_Dependency_DEPENDENCY__desc, arrayCreate(_depth, tmpMeta1), tmpMeta2);
  _dep = tmpMeta6;
  _return: OMC_LABEL_UNUSED
  return _dep;
}
modelica_metatype boxptr_NBAdjacency_Dependency_create(threadData_t *threadData, modelica_metatype _sub_ty, modelica_metatype _depth)
{
  modelica_integer tmp1;
  modelica_metatype _dep = NULL;
  tmp1 = mmc_unbox_integer(_depth);
  _dep = omc_NBAdjacency_Dependency_create(threadData, _sub_ty, tmp1);
  /* skip box _dep; NBAdjacency.Dependency */
  return _dep;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Dependency_toBoolean(threadData_t *threadData, modelica_metatype _dep)
{
  modelica_metatype _b = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  {
    modelica_metatype __omcQ_24tmpVar15;
    modelica_metatype* tmp2;
    modelica_metatype tmpMeta3;
    modelica_metatype __omcQ_24tmpVar14;
    modelica_integer tmp4;
    modelica_metatype _k_loopVar = 0;
    modelica_metatype _k;
    _k_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dep), 3)));
    tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar15 = tmpMeta3; /* defaultValue */
    tmp2 = &__omcQ_24tmpVar15;
    while(1) {
      tmp4 = 1;
      if (!listEmpty(_k_loopVar)) {
        _k = MMC_CAR(_k_loopVar);
        _k_loopVar = MMC_CDR(_k_loopVar);
        tmp4--;
      }
      if (tmp4 == 0) {
        __omcQ_24tmpVar14 = mmc_mk_boolean((!omc_NBAdjacency_Dependency_isReductionKind(threadData, mmc_unbox_integer(_k))));
        *tmp2 = mmc_mk_cons(__omcQ_24tmpVar14,0);
        tmp2 = &MMC_CDR(*tmp2);
      } else if (tmp4 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp2 = mmc_mk_nil();
    tmpMeta1 = __omcQ_24tmpVar15;
  }
  _b = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _b;
}

PROTECTED_FUNCTION_STATIC modelica_string omc_NBAdjacency_Dependency_toString_kindString(threadData_t *threadData, modelica_integer _kind)
{
  modelica_string _str = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _str has no default value.
  { /* match expression */
    modelica_integer tmp4_1;
    tmp4_1 = (modelica_integer)_kind;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (1 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT40;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT19;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _str = tmp1;
  _return: OMC_LABEL_UNUSED
  return _str;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBAdjacency_Dependency_toString_kindString(threadData_t *threadData, modelica_metatype _kind)
{
  modelica_integer tmp1;
  modelica_string _str = NULL;
  tmp1 = mmc_unbox_integer(_kind);
  _str = omc_NBAdjacency_Dependency_toString_kindString(threadData, tmp1);
  /* skip box _str; String */
  return _str;
}

static modelica_metatype closure3_List_toString(threadData_t *thData, modelica_metatype closure, modelica_metatype inList)
{
  modelica_fnptr inPrintFunc = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_string inNameStr = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  modelica_string inBeginStr = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),3));
  modelica_string inDelimitStr = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),4));
  modelica_string inEndStr = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),5));
  modelica_metatype inPrintEmpty = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),6));
  modelica_metatype maxLength = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),7));
  return boxptr_List_toString(thData, inList, inPrintFunc, inNameStr, inBeginStr, inDelimitStr, inEndStr, inPrintEmpty, maxLength);
}
DLLDirection
modelica_string omc_NBAdjacency_Dependency_toString(threadData_t *threadData, modelica_metatype _dep)
{
  modelica_string _str = NULL;
  modelica_string _str1 = NULL;
  modelica_string _str2 = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_boolean tmp5;
  modelica_string tmp6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _str has no default value.
  // _str1 has no default value.
  // _str2 has no default value.
  tmpMeta1 = mmc_mk_box7(0, boxvar_intString, _OMC_LIT41, _OMC_LIT42, _OMC_LIT43, _OMC_LIT44, mmc_mk_boolean(0 /* false */), mmc_mk_integer(((modelica_integer) 0)));
  _str1 = omc_Array_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dep), 2))), (modelica_fnptr) mmc_mk_box2(0,closure3_List_toString,tmpMeta1), _OMC_LIT41, _OMC_LIT41, _OMC_LIT43, _OMC_LIT41, 1 /* true */, ((modelica_integer) 0));

  _str2 = omc_List_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dep), 3))), boxvar_NBAdjacency_Dependency_toString_kindString, _OMC_LIT41, _OMC_LIT41, _OMC_LIT43, _OMC_LIT41, 1 /* true */, ((modelica_integer) 0));

  tmp5 = (modelica_boolean)((stringEqual(_str1, _OMC_LIT41)) || (stringEqual(_str2, _OMC_LIT41)));
  if(tmp5)
  {
    tmpMeta2 = stringAppend(_str1,_str2);
    tmp6 = tmpMeta2;
  }
  else
  {
    tmpMeta3 = stringAppend(_str1,_OMC_LIT43);
    tmpMeta4 = stringAppend(tmpMeta3,_str2);
    tmp6 = tmpMeta4;
  }
  _str = tmp6;

  tmpMeta7 = stringAppend(_OMC_LIT42,_str);
  tmpMeta8 = stringAppend(tmpMeta7,_OMC_LIT44);
  _str = tmpMeta8;
  _return: OMC_LABEL_UNUSED
  return _str;
}

PROTECTED_FUNCTION_STATIC void omc_NBAdjacency_Matrix_updateIntegerRow(threadData_t *threadData, modelica_metatype _m, modelica_integer _idx, modelica_metatype _row)
{
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  arrayUpdate(_m, _idx, listAppend(_row, arrayGet(_m,_idx) /* DAE.ASUB */));
  _return: OMC_LABEL_UNUSED
  return;
}
PROTECTED_FUNCTION_STATIC void boxptr_NBAdjacency_Matrix_updateIntegerRow(threadData_t *threadData, modelica_metatype _m, modelica_metatype _idx, modelica_metatype _row)
{
  modelica_integer tmp1;
  tmp1 = mmc_unbox_integer(_idx);
  omc_NBAdjacency_Matrix_updateIntegerRow(threadData, _m, tmp1, _row);
  return;
}

PROTECTED_FUNCTION_STATIC void omc_NBAdjacency_Matrix_upgradeRow(threadData_t *threadData, modelica_metatype _eqn_ptr, modelica_integer _eqn_arr_idx, modelica_metatype _dependencies, modelica_metatype _dep, modelica_metatype _rep, modelica_metatype _map, modelica_metatype _fullmap, modelica_metatype _m, modelica_metatype _mapping, modelica_metatype _modes, modelica_metatype _iter_)
{
  modelica_integer _eqn_scal_idx;
  modelica_integer _eqn_size;
  modelica_metatype _row = NULL;
  modelica_metatype _eqn = NULL;
  modelica_metatype _iter = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _names = NULL;
  modelica_metatype _ranges = NULL;
  modelica_metatype _maps = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _eqn_scal_idx has no default value.
  // _eqn_size has no default value.
  // _row has no default value.
  _eqn = omc_Pointer_access(threadData, _eqn_ptr);
  _iter = omc_NBEquation_Equation_getForIterator(threadData, _eqn);
  _ty = omc_NBEquation_Equation_getType(threadData, _eqn, 1 /* true */);
  // _names has no default value.
  // _ranges has no default value.
  // _maps has no default value.
  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp2_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          modelica_metatype tmpMeta8;
          modelica_integer tmp9;
          modelica_integer tmp10;
          modelica_integer tmp11;
          modelica_integer tmp12;
          /* Pattern matching succeeded */
          if((omc_NBEquation_Equation_isAlgorithm(threadData, _eqn_ptr) || omc_NBEquation_Equation_isIfEquation(threadData, _eqn_ptr)))
          {
            /* Pattern-matching assignment */
            tmpMeta5 = arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapping), 4))),_eqn_arr_idx) /* DAE.ASUB */;
            tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 1));
            tmp7 = mmc_unbox_integer(tmpMeta6);
            tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 2));
            tmp9 = mmc_unbox_integer(tmpMeta8);
            _eqn_scal_idx = tmp7  /* pattern as ty=Integer */;
            _eqn_size = tmp9  /* pattern as ty=Integer */;

            _row = omc_NBSlice_upgradeRowFull(threadData, _dependencies, _map, _mapping);

            tmp10 = ((modelica_integer) 0); tmp11 = 1; tmp12 = ((modelica_integer) -1) + _eqn_size;
            if(!(((tmp11 > 0) && (tmp10 > tmp12)) || ((tmp11 < 0) && (tmp10 < tmp12))))
            {
              modelica_integer _i;
              for(_i = ((modelica_integer) 0); in_range_integer(_i, tmp10, tmp12); _i += tmp11)
              {
                omc_NBAdjacency_Matrix_updateIntegerRow(threadData, _m, _eqn_scal_idx + _i, _row);
              }
            }
          }
          else
          {
            if((!omc_NBEquation_Iterator_isEmpty(threadData, _iter_)))
            {
              _names = omc_NBEquation_Iterator_getFrames(threadData, _iter_ ,&_ranges ,&_maps);

              _iter = omc_NBEquation_Iterator_addFrames(threadData, _iter, omc_List_zip3(threadData, _names, _ranges, _maps));
            }

            omc_NBSlice_upgradeRow(threadData, omc_NBEquation_Equation_getEqnName(threadData, _eqn_ptr), _eqn_arr_idx, _iter, _ty, _dependencies, _dep, _rep, _map, _fullmap, _m, _mapping, _modes);
          }
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          /* Pattern matching succeeded */
          tmpMeta14 = stringAppend(_OMC_LIT46,omc_NBEquation_Equation_pointerToString(threadData, _eqn_ptr, _OMC_LIT41));
          tmpMeta13 = mmc_mk_cons(tmpMeta14, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT12, tmpMeta13);

          goto goto_1;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      tmp2_done:
      (void)tmp3;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp2_done2;
      goto_1:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp3 < 2) {
        goto tmp2_top;
      }
      MMC_THROW_INTERNAL();
      tmp2_done2:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return;
}
PROTECTED_FUNCTION_STATIC void boxptr_NBAdjacency_Matrix_upgradeRow(threadData_t *threadData, modelica_metatype _eqn_ptr, modelica_metatype _eqn_arr_idx, modelica_metatype _dependencies, modelica_metatype _dep, modelica_metatype _rep, modelica_metatype _map, modelica_metatype _fullmap, modelica_metatype _m, modelica_metatype _mapping, modelica_metatype _modes, modelica_metatype _iter_)
{
  modelica_integer tmp1;
  tmp1 = mmc_unbox_integer(_eqn_arr_idx);
  omc_NBAdjacency_Matrix_upgradeRow(threadData, _eqn_ptr, tmp1, _dependencies, _dep, _rep, _map, _fullmap, _m, _mapping, _modes, _iter_);
  return;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBAdjacency_Matrix_initialize(threadData_t *threadData, modelica_metatype _mapping, modelica_integer _st)
{
  modelica_metatype _adj = NULL;
  modelica_metatype _m = NULL;
  modelica_metatype _mT = NULL;
  modelica_integer _eqn_scalar_size;
  modelica_integer _var_scalar_size;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _adj has no default value.
  // _m has no default value.
  // _mT has no default value.
  // _eqn_scalar_size has no default value.
  // _var_scalar_size has no default value.
  _eqn_scalar_size = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapping), 2))));

  _var_scalar_size = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapping), 3))));

  if(((_eqn_scalar_size > ((modelica_integer) 0)) || (_var_scalar_size > ((modelica_integer) 0))))
  {
    tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
    _m = arrayCreate(_eqn_scalar_size, tmpMeta1);

    _mT = omc_NBAdjacency_Matrix_transposeScalar(threadData, _m, _var_scalar_size);

    tmpMeta2 = mmc_mk_box6(5, &NBAdjacency_Matrix_FINAL__desc, _m, _mT, _mapping, omc_UnorderedMap_new(threadData, boxvar_NBAdjacency_Mode_keyHash, boxvar_NBAdjacency_Mode_keyEqual, ((modelica_integer) 1)), mmc_mk_integer((modelica_integer)_st));
    _adj = tmpMeta2;
  }
  else
  {
    tmpMeta3 = mmc_mk_box2(3, &NBAdjacency_Matrix_EMPTY__desc, mmc_mk_integer((modelica_integer)_st));
    _adj = tmpMeta3;
  }
  _return: OMC_LABEL_UNUSED
  return _adj;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBAdjacency_Matrix_initialize(threadData_t *threadData, modelica_metatype _mapping, modelica_metatype _st)
{
  modelica_integer tmp1;
  modelica_metatype _adj = NULL;
  tmp1 = mmc_unbox_integer(_st);
  _adj = omc_NBAdjacency_Matrix_initialize(threadData, _mapping, tmp1);
  /* skip box _adj; NBAdjacency.Matrix */
  return _adj;
}

PROTECTED_FUNCTION_STATIC modelica_string omc_NBAdjacency_Matrix_dimsString(threadData_t *threadData, modelica_metatype _dims)
{
  modelica_string _str = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _str has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _dims;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT47;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar17;
            modelica_metatype* tmp7;
            modelica_metatype tmpMeta8;
            modelica_metatype __omcQ_24tmpVar16;
            modelica_integer tmp9;
            modelica_metatype _d_loopVar = 0;
            modelica_metatype _d;
            _d_loopVar = _dims;
            tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar17 = tmpMeta8; /* defaultValue */
            tmp7 = &__omcQ_24tmpVar17;
            while(1) {
              tmp9 = 1;
              if (!listEmpty(_d_loopVar)) {
                _d = MMC_CAR(_d_loopVar);
                _d_loopVar = MMC_CDR(_d_loopVar);
                tmp9--;
              }
              if (tmp9 == 0) {
                __omcQ_24tmpVar16 = mmc_mk_integer(omc_NFDimension_size(threadData, _d, 1 /* true */));
                *tmp7 = mmc_mk_cons(__omcQ_24tmpVar16,0);
                tmp7 = &MMC_CDR(*tmp7);
              } else if (tmp9 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp7 = mmc_mk_nil();
            tmpMeta6 = __omcQ_24tmpVar17;
          }
          tmp1 = omc_List_toString(threadData, tmpMeta6, boxvar_intString, _OMC_LIT41, _OMC_LIT42, _OMC_LIT43, _OMC_LIT44, 1 /* true */, ((modelica_integer) 0));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _str = tmp1;
  _return: OMC_LABEL_UNUSED
  return _str;
}

PROTECTED_FUNCTION_STATIC modelica_string omc_NBAdjacency_Matrix_fullString(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _dep_map, modelica_metatype _sol_map, modelica_metatype _rep_set)
{
  modelica_string _str = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = stringAppend(omc_NFComponentRef_toString(threadData, _cref),_OMC_LIT48);
  _str = tmpMeta1;
  tmpMeta2 = stringAppend(_str,omc_NBAdjacency_Solvability_toString(threadData, omc_UnorderedMap_getSafe(threadData, _cref, _sol_map, _OMC_LIT49)));
  tmpMeta3 = stringAppend(tmpMeta2,_OMC_LIT50);
  tmpMeta4 = stringAppend(tmpMeta3,omc_NBAdjacency_Dependency_toString(threadData, omc_UnorderedMap_getSafe(threadData, _cref, _dep_map, _OMC_LIT49)));
  _str = tmpMeta4;

  if(omc_UnorderedSet_contains(threadData, _cref, _rep_set))
  {
    tmpMeta5 = stringAppend(_str,_OMC_LIT18);
    _str = tmpMeta5;
  }

  tmpMeta6 = stringAppend(_str,_OMC_LIT51);
  _str = tmpMeta6;
  _return: OMC_LABEL_UNUSED
  return _str;
}

DLLDirection
modelica_string omc_NBAdjacency_Matrix_toStringSingle(threadData_t *threadData, modelica_metatype _m)
{
  modelica_string _str = NULL;
  modelica_integer _skip;
  modelica_string _tmp = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_integer tmp7;
  modelica_integer tmp8;
  modelica_integer tmp9;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _str = _OMC_LIT41;
  _skip = ((modelica_integer) 1) + stringLength(intString(arrayLength(_m)));
  // _tmp has no default value.
  tmp7 = ((modelica_integer) 1); tmp8 = 1; tmp9 = arrayLength(_m);
  if(!(((tmp8 > 0) && (tmp7 > tmp9)) || ((tmp8 < 0) && (tmp7 < tmp9))))
  {
    modelica_integer _row;
    for(_row = ((modelica_integer) 1); in_range_integer(_row, tmp7, tmp9); _row += tmp8)
    {
      _tmp = intString(_row);

      tmpMeta1 = stringAppend(_str,_OMC_LIT52);
      tmpMeta2 = stringAppend(tmpMeta1,_tmp);
      tmpMeta3 = stringAppend(tmpMeta2,_OMC_LIT53);
      tmpMeta4 = stringAppend(tmpMeta3,omc_StringUtil_repeat(threadData, _OMC_LIT54, _skip - stringLength(_tmp)));
      tmpMeta5 = stringAppend(tmpMeta4,omc_List_toString(threadData, arrayGet(_m,_row) /* DAE.ASUB */, boxvar_intString, _OMC_LIT41, _OMC_LIT42, _OMC_LIT43, _OMC_LIT44, 1 /* true */, ((modelica_integer) 0)));
      tmpMeta6 = stringAppend(tmpMeta5,_OMC_LIT55);
      _str = tmpMeta6;
    }
  }
  _return: OMC_LABEL_UNUSED
  return _str;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Matrix_transposeScalar(threadData_t *threadData, modelica_metatype _m, modelica_integer _size)
{
  modelica_metatype _mT = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta12;
  modelica_integer tmp13;
  modelica_integer tmp14;
  modelica_integer tmp15;
  modelica_integer tmp16;
  modelica_integer tmp17;
  modelica_integer tmp18;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _mT has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _mT = arrayCreate(_size, tmpMeta1);

  tmp13 = ((modelica_integer) 1); tmp14 = 1; tmp15 = arrayLength(_m);
  if(!(((tmp14 > 0) && (tmp13 > tmp15)) || ((tmp14 < 0) && (tmp13 < tmp15))))
  {
    modelica_integer _row;
    for(_row = ((modelica_integer) 1); in_range_integer(_row, tmp13, tmp15); _row += tmp14)
    {
      {
        modelica_metatype _idx;
        for (tmpMeta2 = arrayGet(_m,_row) /* DAE.ASUB */; !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
        {
          _idx = MMC_CAR(tmpMeta2);
          { /* matchcontinue expression */
            {
              volatile mmc_switch_type tmp5;
              int tmp6;
              tmp5 = 0;
              MMC_TRY_INTERNAL(mmc_jumper)
              tmp4_top:
              threadData->mmc_jumper = &new_mmc_jumper;
              for (; tmp5 < 2; tmp5++) {
                switch (MMC_SWITCH_CAST(tmp5)) {
                case 0: {
                  modelica_metatype tmpMeta7;
                  modelica_metatype tmpMeta8;
                  /* Pattern matching succeeded */
                  if((mmc_unbox_integer(_idx) > ((modelica_integer) 0)))
                  {
                    tmpMeta7 = mmc_mk_cons(mmc_mk_integer(_row), arrayGet(_mT,mmc_unbox_integer(_idx)) /* DAE.ASUB */);
                    arrayUpdate(_mT,mmc_unbox_integer(_idx),tmpMeta7);
                  }
                  else
                  {
                    tmpMeta8 = mmc_mk_cons(mmc_mk_integer((-_row)), arrayGet(_mT,labs(mmc_unbox_integer(_idx))) /* DAE.ASUB */);
                    arrayUpdate(_mT,labs(mmc_unbox_integer(_idx)),tmpMeta8);
                  }
                  goto tmp4_done;
                }
                case 1: {
                  modelica_metatype tmpMeta9;
                  modelica_metatype tmpMeta10;
                  modelica_metatype tmpMeta11;
                  /* Pattern matching succeeded */
                  tmpMeta10 = stringAppend(_OMC_LIT56,intString(mmc_unbox_integer(_idx)));
                  tmpMeta11 = stringAppend(tmpMeta10,_OMC_LIT57);
                  tmpMeta9 = mmc_mk_cons(tmpMeta11, MMC_REFSTRUCTLIT(mmc_nil));
                  omc_Error_addMessage(threadData, _OMC_LIT12, tmpMeta9);
                  goto tmp4_done;
                }
                }
                goto tmp4_end;
                tmp4_end: ;
              }
              goto goto_3;
              tmp4_done:
              (void)tmp5;
              MMC_RESTORE_INTERNAL(mmc_jumper);
              goto tmp4_done2;
              goto_3:;
              MMC_CATCH_INTERNAL(mmc_jumper);
              if (++tmp5 < 2) {
                goto tmp4_top;
              }
              MMC_THROW_INTERNAL();
              tmp4_done2:;
            }
          }
          ;
        }
      }
    }
  }

  tmp16 = ((modelica_integer) 1); tmp17 = 1; tmp18 = arrayLength(_mT);
  if(!(((tmp17 > 0) && (tmp16 > tmp18)) || ((tmp17 < 0) && (tmp16 < tmp18))))
  {
    modelica_integer _row;
    for(_row = ((modelica_integer) 1); in_range_integer(_row, tmp16, tmp18); _row += tmp17)
    {
      arrayUpdate(_mT,_row,omc_List_sort(threadData, arrayGet(_mT,_row) /* DAE.ASUB */, boxvar_intLt));
    }
  }
  _return: OMC_LABEL_UNUSED
  return _mT;
}
modelica_metatype boxptr_NBAdjacency_Matrix_transposeScalar(threadData_t *threadData, modelica_metatype _m, modelica_metatype _size)
{
  modelica_integer tmp1;
  modelica_metatype _mT = NULL;
  tmp1 = mmc_unbox_integer(_size);
  _mT = omc_NBAdjacency_Matrix_transposeScalar(threadData, _m, tmp1);
  /* skip box _mT; array<list<#Integer>> */
  return _mT;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Matrix_expandMatrix(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fm, modelica_integer _shift)
{
  modelica_metatype _m = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _m = __omcQ_24in_5Fm;
  if((_shift > ((modelica_integer) 0)))
  {
    tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
    _m = omc_Array_expandToSize(threadData, arrayLength(_m) + _shift, _m, tmpMeta1);
  }
  _return: OMC_LABEL_UNUSED
  return _m;
}
modelica_metatype boxptr_NBAdjacency_Matrix_expandMatrix(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fm, modelica_metatype _shift)
{
  modelica_integer tmp1;
  modelica_metatype _m = NULL;
  tmp1 = mmc_unbox_integer(_shift);
  _m = omc_NBAdjacency_Matrix_expandMatrix(threadData, __omcQ_24in_5Fm, tmp1);
  /* skip box _m; array<list<#Integer>> */
  return _m;
}

DLLDirection
modelica_integer omc_NBAdjacency_Matrix_nonZeroCount(threadData_t *threadData, modelica_metatype _adj)
{
  modelica_integer _count;
  modelica_integer tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _count has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _adj;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 5: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NBBackendUtil_countElem(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 2))));
          goto tmp3_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 0);
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          omc_Error_addMessage(threadData, _OMC_LIT12, _OMC_LIT59);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _count = tmp1;
  _return: OMC_LABEL_UNUSED
  return _count;
}
modelica_metatype boxptr_NBAdjacency_Matrix_nonZeroCount(threadData_t *threadData, modelica_metatype _adj)
{
  modelica_integer _count;
  modelica_metatype out_count;
  _count = omc_NBAdjacency_Matrix_nonZeroCount(threadData, _adj);
  out_count = mmc_mk_icon(_count);
  return out_count;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Matrix_getMappingOpt(threadData_t *threadData, modelica_metatype _adj)
{
  modelica_metatype _mapping = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _mapping has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _adj;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = mmc_mk_some((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 7))));
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = mmc_mk_some((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 4))));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta1 = mmc_mk_none();
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _mapping = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _mapping;
}

DLLDirection
modelica_boolean omc_NBAdjacency_Matrix_isEmpty(threadData_t *threadData, modelica_metatype _adj)
{
  modelica_boolean _b;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _b has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _adj;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _b = tmp1;
  _return: OMC_LABEL_UNUSED
  return _b;
}
modelica_metatype boxptr_NBAdjacency_Matrix_isEmpty(threadData_t *threadData, modelica_metatype _adj)
{
  modelica_boolean _b;
  modelica_metatype out_b;
  _b = omc_NBAdjacency_Matrix_isEmpty(threadData, _adj);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

DLLDirection
modelica_integer omc_NBAdjacency_Matrix_getStrictness(threadData_t *threadData, modelica_metatype _adj)
{
  modelica_integer _st;
  modelica_integer tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _st has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _adj;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = 4;
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 6))));
          goto tmp3_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 2))));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _st = tmp1;
  _return: OMC_LABEL_UNUSED
  return _st;
}
modelica_metatype boxptr_NBAdjacency_Matrix_getStrictness(threadData_t *threadData, modelica_metatype _adj)
{
  modelica_integer _st;
  modelica_metatype out_st;
  _st = omc_NBAdjacency_Matrix_getStrictness(threadData, _adj);
  out_st = mmc_mk_icon(_st);
  return out_st;
}

DLLDirection
modelica_string omc_NBAdjacency_Matrix_dependencyString(threadData_t *threadData, modelica_metatype _adj, modelica_string __omcQ_24in_5Fstr)
{
  modelica_string _str = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _str = __omcQ_24in_5Fstr;
  { /* match expression */
    modelica_metatype tmp10_1;
    tmp10_1 = _adj;
    {
      modelica_metatype _F = NULL;
      modelica_metatype _R = NULL;
      modelica_metatype _E = NULL;
      modelica_metatype _A = NULL;
      modelica_metatype _S = NULL;
      modelica_metatype _K = NULL;
      modelica_metatype _f = NULL;
      modelica_metatype tmpMeta3;
      modelica_metatype _r = NULL;
      modelica_metatype tmpMeta4;
      modelica_metatype _e = NULL;
      modelica_metatype tmpMeta5;
      modelica_metatype _a = NULL;
      modelica_metatype tmpMeta6;
      modelica_metatype _s = NULL;
      modelica_metatype tmpMeta7;
      modelica_metatype _k = NULL;
      modelica_metatype tmpMeta8;
      modelica_metatype _names = NULL;
      modelica_metatype _types = NULL;
      modelica_metatype _F_ = NULL;
      modelica_metatype _R_ = NULL;
      modelica_metatype _E_ = NULL;
      modelica_metatype _A_ = NULL;
      modelica_metatype _S_ = NULL;
      modelica_metatype _K_ = NULL;
      modelica_integer _length1;
      modelica_integer _length2;
      modelica_integer _lengthf;
      modelica_integer _lengthr;
      modelica_integer _lengthe;
      modelica_integer _lengtha;
      modelica_integer _lengths;
      modelica_integer _lengthk;
      volatile mmc_switch_type tmp10;
      int tmp11;
      // _F has no default value.
      // _R has no default value.
      // _E has no default value.
      // _A has no default value.
      // _S has no default value.
      // _K has no default value.
      tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
      _f = tmpMeta3;
      tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
      _r = tmpMeta4;
      tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
      _e = tmpMeta5;
      tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
      _a = tmpMeta6;
      tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
      _s = tmpMeta7;
      tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
      _k = tmpMeta8;
      // _names has no default value.
      // _types has no default value.
      // _F_ has no default value.
      // _R_ has no default value.
      // _E_ has no default value.
      // _A_ has no default value.
      // _S_ has no default value.
      // _K_ has no default value.
      // _length1 has no default value.
      // _length2 has no default value.
      // _lengthf has no default value.
      // _lengthr has no default value.
      // _lengthe has no default value.
      // _lengtha has no default value.
      // _lengths has no default value.
      // _lengthk has no default value.
      tmp10 = 0;
      for (; tmp10 < 2; tmp10++) {
        switch (MMC_SWITCH_CAST(tmp10)) {
        case 0: {
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_integer tmp30;
          modelica_integer tmp31;
          modelica_integer tmp32;
          modelica_integer tmp33;
          modelica_integer tmp36;
          modelica_integer tmp39;
          modelica_integer tmp42;
          modelica_integer tmp45;
          modelica_integer tmp48;
          modelica_integer tmp51;
          modelica_integer tmp54;
          modelica_metatype tmpMeta57;
          modelica_metatype tmpMeta58;
          modelica_metatype tmpMeta59;
          modelica_metatype tmpMeta60;
          modelica_metatype tmpMeta61;
          modelica_metatype tmpMeta62;
          modelica_metatype tmpMeta63;
          modelica_metatype tmpMeta64;
          modelica_metatype tmpMeta65;
          modelica_metatype tmpMeta66;
          modelica_metatype tmpMeta67;
          modelica_metatype tmpMeta68;
          modelica_metatype tmpMeta69;
          modelica_metatype tmpMeta70;
          modelica_metatype tmpMeta71;
          modelica_metatype tmpMeta72;
          modelica_metatype tmpMeta73;
          modelica_metatype tmpMeta74;
          modelica_metatype tmpMeta75;
          modelica_metatype tmpMeta76;
          modelica_metatype tmpMeta77;
          modelica_metatype tmpMeta78;
          modelica_metatype tmpMeta79;
          modelica_metatype tmpMeta80;
          modelica_metatype tmpMeta81;
          modelica_metatype tmpMeta82;
          modelica_integer tmp83;
          modelica_integer tmp84;
          modelica_integer tmp85;
          if (mmc__uniontype__metarecord__typedef__equal(tmp10_1,1,6) == 0) goto tmp9_end;
          
          /* Pattern matching succeeded */
          tmpMeta12 = stringAppend(_str,_OMC_LIT60);
          tmpMeta13 = stringAppend(omc_StringUtil_headline__2(threadData, tmpMeta12),_OMC_LIT55);
          _str = tmpMeta13;

          {
            modelica_metatype __omcQ_24tmpVar19;
            modelica_metatype* tmp15;
            modelica_metatype tmpMeta16;
            modelica_string __omcQ_24tmpVar18;
            modelica_integer tmp17;
            modelica_metatype _name_loopVar = 0;
            modelica_integer tmp18;
            modelica_metatype _name;
            _name_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 2)));
            tmp18 = 1;
            tmpMeta16 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar19 = tmpMeta16; /* defaultValue */
            tmp15 = &__omcQ_24tmpVar19;
            while(1) {
              tmp17 = 1;
              if (tmp18 <= arrayLength(_name_loopVar)) {
                _name = arrayGet(_name_loopVar, tmp18++);
                tmp17--;
              }
              if (tmp17 == 0) {
                __omcQ_24tmpVar18 = intString(omc_NFType_sizeOf(threadData, omc_NFComponentRef_getSubscriptedType(threadData, _name, 0 /* false */), 1 /* true */));
                *tmp15 = mmc_mk_cons(__omcQ_24tmpVar18,0);
                tmp15 = &MMC_CDR(*tmp15);
              } else if (tmp17 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp15 = mmc_mk_nil();
            tmpMeta14 = __omcQ_24tmpVar19;
          }
          _types = listArray(tmpMeta14);

          {
            modelica_metatype __omcQ_24tmpVar21;
            modelica_metatype* tmp20;
            modelica_metatype tmpMeta21;
            modelica_string __omcQ_24tmpVar20;
            modelica_integer tmp22;
            modelica_metatype _name_loopVar = 0;
            modelica_integer tmp23;
            modelica_metatype _name;
            _name_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 2)));
            tmp23 = 1;
            tmpMeta21 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar21 = tmpMeta21; /* defaultValue */
            tmp20 = &__omcQ_24tmpVar21;
            while(1) {
              tmp22 = 1;
              if (tmp23 <= arrayLength(_name_loopVar)) {
                _name = arrayGet(_name_loopVar, tmp23++);
                tmp22--;
              }
              if (tmp22 == 0) {
                __omcQ_24tmpVar20 = omc_NFComponentRef_toString(threadData, _name);
                *tmp20 = mmc_mk_cons(__omcQ_24tmpVar20,0);
                tmp20 = &MMC_CDR(*tmp20);
              } else if (tmp22 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp20 = mmc_mk_nil();
            tmpMeta19 = __omcQ_24tmpVar21;
          }
          _names = listArray(tmpMeta19);

          tmp30 = arrayLength(_names); tmp31 = ((modelica_integer) -1); tmp32 = ((modelica_integer) 1);
          if(!(((tmp31 > 0) && (tmp30 > tmp32)) || ((tmp31 < 0) && (tmp30 < tmp32))))
          {
            modelica_integer _i;
            for(_i = arrayLength(_names); in_range_integer(_i, tmp30, tmp32); _i += tmp31)
            {
              _F = omc_NBAdjacency_Dependency_categorize(threadData, omc_UnorderedSet_toList(threadData, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 3))),_i) /* DAE.ASUB */), arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 4))),_i) /* DAE.ASUB */, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 6))),_i) /* DAE.ASUB */ ,&_R ,&_E ,&_A ,&_S ,&_K);

              tmpMeta24 = mmc_mk_cons(omc_List_toString(threadData, _F, boxvar_NFComponentRef_toString, _OMC_LIT61, _OMC_LIT42, _OMC_LIT62, _OMC_LIT44, 0 /* false */, ((modelica_integer) 0)), _f);
              _f = tmpMeta24;

              tmpMeta25 = mmc_mk_cons(omc_List_toString(threadData, _R, boxvar_NFComponentRef_toString, _OMC_LIT63, _OMC_LIT42, _OMC_LIT62, _OMC_LIT44, 0 /* false */, ((modelica_integer) 0)), _r);
              _r = tmpMeta25;

              tmpMeta26 = mmc_mk_cons(omc_List_toString(threadData, _E, boxvar_NFComponentRef_toString, _OMC_LIT64, _OMC_LIT42, _OMC_LIT62, _OMC_LIT44, 0 /* false */, ((modelica_integer) 0)), _e);
              _e = tmpMeta26;

              tmpMeta27 = mmc_mk_cons(omc_List_toString(threadData, _A, boxvar_NFComponentRef_toString, _OMC_LIT65, _OMC_LIT42, _OMC_LIT62, _OMC_LIT44, 0 /* false */, ((modelica_integer) 0)), _a);
              _a = tmpMeta27;

              tmpMeta28 = mmc_mk_cons(omc_List_toString(threadData, _S, boxvar_NFComponentRef_toString, _OMC_LIT66, _OMC_LIT42, _OMC_LIT62, _OMC_LIT44, 0 /* false */, ((modelica_integer) 0)), _s);
              _s = tmpMeta28;

              tmpMeta29 = mmc_mk_cons(omc_List_toString(threadData, _K, boxvar_NFComponentRef_toString, _OMC_LIT67, _OMC_LIT42, _OMC_LIT62, _OMC_LIT44, 0 /* false */, ((modelica_integer) 0)), _k);
              _k = tmpMeta29;
            }
          }

          _F_ = listArray(_f);

          _R_ = listArray(_r);

          _E_ = listArray(_e);

          _A_ = listArray(_a);

          _S_ = listArray(_s);

          _K_ = listArray(_k);

          {
            modelica_integer __omcQ_24tmpVar23;
            modelica_integer __omcQ_24tmpVar22;
            modelica_integer tmp34;
            modelica_metatype _ty_loopVar = 0;
            modelica_integer tmp35;
            modelica_metatype _ty;
            _ty_loopVar = _types;
            tmp35 = 1;
            __omcQ_24tmpVar23 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp34 = 1;
              if (tmp35 <= arrayLength(_ty_loopVar)) {
                _ty = arrayGet(_ty_loopVar, tmp35++);
                tmp34--;
              }
              if (tmp34 == 0) {
                __omcQ_24tmpVar22 = stringLength(_ty);
                __omcQ_24tmpVar23 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar22),(modelica_integer)(__omcQ_24tmpVar23));
              } else if (tmp34 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            tmp33 = __omcQ_24tmpVar23;
          }
          _length1 = ((modelica_integer) 1) + tmp33;

          {
            modelica_integer __omcQ_24tmpVar25;
            modelica_integer __omcQ_24tmpVar24;
            modelica_integer tmp37;
            modelica_metatype _name_loopVar = 0;
            modelica_integer tmp38;
            modelica_metatype _name;
            _name_loopVar = _names;
            tmp38 = 1;
            __omcQ_24tmpVar25 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp37 = 1;
              if (tmp38 <= arrayLength(_name_loopVar)) {
                _name = arrayGet(_name_loopVar, tmp38++);
                tmp37--;
              }
              if (tmp37 == 0) {
                __omcQ_24tmpVar24 = stringLength(_name);
                __omcQ_24tmpVar25 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar24),(modelica_integer)(__omcQ_24tmpVar25));
              } else if (tmp37 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            tmp36 = __omcQ_24tmpVar25;
          }
          _length2 = ((modelica_integer) 3) + tmp36;

          {
            modelica_integer __omcQ_24tmpVar27;
            modelica_integer __omcQ_24tmpVar26;
            modelica_integer tmp40;
            modelica_metatype _st_loopVar = 0;
            modelica_integer tmp41;
            modelica_metatype _st;
            _st_loopVar = _F_;
            tmp41 = 1;
            __omcQ_24tmpVar27 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp40 = 1;
              if (tmp41 <= arrayLength(_st_loopVar)) {
                _st = arrayGet(_st_loopVar, tmp41++);
                tmp40--;
              }
              if (tmp40 == 0) {
                __omcQ_24tmpVar26 = stringLength(_st);
                __omcQ_24tmpVar27 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar26),(modelica_integer)(__omcQ_24tmpVar27));
              } else if (tmp40 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            tmp39 = __omcQ_24tmpVar27;
          }
          _lengthf = tmp39;

          {
            modelica_integer __omcQ_24tmpVar29;
            modelica_integer __omcQ_24tmpVar28;
            modelica_integer tmp43;
            modelica_metatype _st_loopVar = 0;
            modelica_integer tmp44;
            modelica_metatype _st;
            _st_loopVar = _R_;
            tmp44 = 1;
            __omcQ_24tmpVar29 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp43 = 1;
              if (tmp44 <= arrayLength(_st_loopVar)) {
                _st = arrayGet(_st_loopVar, tmp44++);
                tmp43--;
              }
              if (tmp43 == 0) {
                __omcQ_24tmpVar28 = stringLength(_st);
                __omcQ_24tmpVar29 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar28),(modelica_integer)(__omcQ_24tmpVar29));
              } else if (tmp43 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            tmp42 = __omcQ_24tmpVar29;
          }
          _lengthr = tmp42;

          {
            modelica_integer __omcQ_24tmpVar31;
            modelica_integer __omcQ_24tmpVar30;
            modelica_integer tmp46;
            modelica_metatype _st_loopVar = 0;
            modelica_integer tmp47;
            modelica_metatype _st;
            _st_loopVar = _E_;
            tmp47 = 1;
            __omcQ_24tmpVar31 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp46 = 1;
              if (tmp47 <= arrayLength(_st_loopVar)) {
                _st = arrayGet(_st_loopVar, tmp47++);
                tmp46--;
              }
              if (tmp46 == 0) {
                __omcQ_24tmpVar30 = stringLength(_st);
                __omcQ_24tmpVar31 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar30),(modelica_integer)(__omcQ_24tmpVar31));
              } else if (tmp46 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            tmp45 = __omcQ_24tmpVar31;
          }
          _lengthe = tmp45;

          {
            modelica_integer __omcQ_24tmpVar33;
            modelica_integer __omcQ_24tmpVar32;
            modelica_integer tmp49;
            modelica_metatype _st_loopVar = 0;
            modelica_integer tmp50;
            modelica_metatype _st;
            _st_loopVar = _A_;
            tmp50 = 1;
            __omcQ_24tmpVar33 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp49 = 1;
              if (tmp50 <= arrayLength(_st_loopVar)) {
                _st = arrayGet(_st_loopVar, tmp50++);
                tmp49--;
              }
              if (tmp49 == 0) {
                __omcQ_24tmpVar32 = stringLength(_st);
                __omcQ_24tmpVar33 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar32),(modelica_integer)(__omcQ_24tmpVar33));
              } else if (tmp49 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            tmp48 = __omcQ_24tmpVar33;
          }
          _lengtha = tmp48;

          {
            modelica_integer __omcQ_24tmpVar35;
            modelica_integer __omcQ_24tmpVar34;
            modelica_integer tmp52;
            modelica_metatype _st_loopVar = 0;
            modelica_integer tmp53;
            modelica_metatype _st;
            _st_loopVar = _S_;
            tmp53 = 1;
            __omcQ_24tmpVar35 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp52 = 1;
              if (tmp53 <= arrayLength(_st_loopVar)) {
                _st = arrayGet(_st_loopVar, tmp53++);
                tmp52--;
              }
              if (tmp52 == 0) {
                __omcQ_24tmpVar34 = stringLength(_st);
                __omcQ_24tmpVar35 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar34),(modelica_integer)(__omcQ_24tmpVar35));
              } else if (tmp52 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            tmp51 = __omcQ_24tmpVar35;
          }
          _lengths = tmp51;

          {
            modelica_integer __omcQ_24tmpVar37;
            modelica_integer __omcQ_24tmpVar36;
            modelica_integer tmp55;
            modelica_metatype _st_loopVar = 0;
            modelica_integer tmp56;
            modelica_metatype _st;
            _st_loopVar = _K_;
            tmp56 = 1;
            __omcQ_24tmpVar37 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp55 = 1;
              if (tmp56 <= arrayLength(_st_loopVar)) {
                _st = arrayGet(_st_loopVar, tmp56++);
                tmp55--;
              }
              if (tmp55 == 0) {
                __omcQ_24tmpVar36 = stringLength(_st);
                __omcQ_24tmpVar37 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar36),(modelica_integer)(__omcQ_24tmpVar37));
              } else if (tmp55 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            tmp54 = __omcQ_24tmpVar37;
          }
          _lengthk = tmp54;

          tmp83 = ((modelica_integer) 1); tmp84 = 1; tmp85 = arrayLength(_names);
          if(!(((tmp84 > 0) && (tmp83 > tmp85)) || ((tmp84 < 0) && (tmp83 < tmp85))))
          {
            modelica_integer _i;
            for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp83, tmp85); _i += tmp84)
            {
              tmpMeta57 = stringAppend(_str,arrayGet(_types, _i));
              tmpMeta58 = stringAppend(tmpMeta57,_OMC_LIT54);
              tmpMeta59 = stringAppend(tmpMeta58,omc_StringUtil_repeat(threadData, _OMC_LIT68, _length1 - stringLength(arrayGet(_types, _i))));
              tmpMeta60 = stringAppend(tmpMeta59,_OMC_LIT54);
              tmpMeta61 = stringAppend(tmpMeta60,arrayGet(_names, _i));
              tmpMeta62 = stringAppend(tmpMeta61,_OMC_LIT54);
              tmpMeta63 = stringAppend(tmpMeta62,omc_StringUtil_repeat(threadData, _OMC_LIT68, _length2 - stringLength(arrayGet(_names, _i))));
              tmpMeta64 = stringAppend(tmpMeta63,arrayGet(_K_, _i));
              tmpMeta65 = stringAppend(tmpMeta64,_OMC_LIT54);
              tmpMeta66 = stringAppend(tmpMeta65,omc_StringUtil_repeat(threadData, _OMC_LIT68, _lengthk - stringLength(arrayGet(_K_, _i))));
              tmpMeta67 = stringAppend(tmpMeta66,arrayGet(_S_, _i));
              tmpMeta68 = stringAppend(tmpMeta67,_OMC_LIT54);
              tmpMeta69 = stringAppend(tmpMeta68,omc_StringUtil_repeat(threadData, _OMC_LIT68, _lengths - stringLength(arrayGet(_S_, _i))));
              tmpMeta70 = stringAppend(tmpMeta69,arrayGet(_A_, _i));
              tmpMeta71 = stringAppend(tmpMeta70,_OMC_LIT54);
              tmpMeta72 = stringAppend(tmpMeta71,omc_StringUtil_repeat(threadData, _OMC_LIT68, _lengtha - stringLength(arrayGet(_A_, _i))));
              tmpMeta73 = stringAppend(tmpMeta72,arrayGet(_E_, _i));
              tmpMeta74 = stringAppend(tmpMeta73,_OMC_LIT54);
              tmpMeta75 = stringAppend(tmpMeta74,omc_StringUtil_repeat(threadData, _OMC_LIT68, _lengthe - stringLength(arrayGet(_E_, _i))));
              tmpMeta76 = stringAppend(tmpMeta75,arrayGet(_R_, _i));
              tmpMeta77 = stringAppend(tmpMeta76,_OMC_LIT54);
              tmpMeta78 = stringAppend(tmpMeta77,omc_StringUtil_repeat(threadData, _OMC_LIT68, _lengthr - stringLength(arrayGet(_R_, _i))));
              tmpMeta79 = stringAppend(tmpMeta78,arrayGet(_F_, _i));
              tmpMeta80 = stringAppend(tmpMeta79,_OMC_LIT54);
              tmpMeta81 = stringAppend(tmpMeta80,omc_StringUtil_repeat(threadData, _OMC_LIT68, _lengthf - stringLength(arrayGet(_F_, _i))));
              tmpMeta82 = stringAppend(tmpMeta81,_OMC_LIT55);
              _str = tmpMeta82;
            }
          }
          tmp1 = _str;
          goto tmp9_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NBAdjacency_Matrix_toString(threadData, _adj, _str);
          goto tmp9_done;
        }
        }
        goto tmp9_end;
        tmp9_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp9_done;
      tmp9_done:;
    }
  }
  _str = tmp1;
  _return: OMC_LABEL_UNUSED
  return _str;
}

DLLDirection
modelica_string omc_NBAdjacency_Matrix_solvabilityString(threadData_t *threadData, modelica_metatype _adj, modelica_string __omcQ_24in_5Fstr)
{
  modelica_string _str = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _str = __omcQ_24in_5Fstr;
  { /* match expression */
    modelica_metatype tmp12_1;
    tmp12_1 = _adj;
    {
      modelica_metatype _XX = NULL;
      modelica_metatype _II = NULL;
      modelica_metatype _NM = NULL;
      modelica_metatype _NP = NULL;
      modelica_metatype _LV = NULL;
      modelica_metatype _LP = NULL;
      modelica_metatype _LC = NULL;
      modelica_metatype _QQ = NULL;
      modelica_metatype _xx = NULL;
      modelica_metatype tmpMeta3;
      modelica_metatype _ii = NULL;
      modelica_metatype tmpMeta4;
      modelica_metatype _nm = NULL;
      modelica_metatype tmpMeta5;
      modelica_metatype _np = NULL;
      modelica_metatype tmpMeta6;
      modelica_metatype _lv = NULL;
      modelica_metatype tmpMeta7;
      modelica_metatype _lp = NULL;
      modelica_metatype tmpMeta8;
      modelica_metatype _lc = NULL;
      modelica_metatype tmpMeta9;
      modelica_metatype _qq = NULL;
      modelica_metatype tmpMeta10;
      modelica_metatype _names = NULL;
      modelica_metatype _types = NULL;
      modelica_metatype _XX_ = NULL;
      modelica_metatype _II_ = NULL;
      modelica_metatype _NM_ = NULL;
      modelica_metatype _NP_ = NULL;
      modelica_metatype _LV_ = NULL;
      modelica_metatype _LP_ = NULL;
      modelica_metatype _LC_ = NULL;
      modelica_metatype _QQ_ = NULL;
      modelica_integer _length1;
      modelica_integer _length2;
      modelica_integer _length_xx;
      modelica_integer _length_ii;
      modelica_integer _length_nm;
      modelica_integer _length_np;
      modelica_integer _length_lv;
      modelica_integer _length_lp;
      modelica_integer _length_lc;
      modelica_integer _length_qq;
      volatile mmc_switch_type tmp12;
      int tmp13;
      // _XX has no default value.
      // _II has no default value.
      // _NM has no default value.
      // _NP has no default value.
      // _LV has no default value.
      // _LP has no default value.
      // _LC has no default value.
      // _QQ has no default value.
      tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
      _xx = tmpMeta3;
      tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
      _ii = tmpMeta4;
      tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
      _nm = tmpMeta5;
      tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
      _np = tmpMeta6;
      tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
      _lv = tmpMeta7;
      tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
      _lp = tmpMeta8;
      tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
      _lc = tmpMeta9;
      tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
      _qq = tmpMeta10;
      // _names has no default value.
      // _types has no default value.
      // _XX_ has no default value.
      // _II_ has no default value.
      // _NM_ has no default value.
      // _NP_ has no default value.
      // _LV_ has no default value.
      // _LP_ has no default value.
      // _LC_ has no default value.
      // _QQ_ has no default value.
      // _length1 has no default value.
      // _length2 has no default value.
      // _length_xx has no default value.
      // _length_ii has no default value.
      // _length_nm has no default value.
      // _length_np has no default value.
      // _length_lv has no default value.
      // _length_lp has no default value.
      // _length_lc has no default value.
      // _length_qq has no default value.
      tmp12 = 0;
      for (; tmp12 < 2; tmp12++) {
        switch (MMC_SWITCH_CAST(tmp12)) {
        case 0: {
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_integer tmp34;
          modelica_integer tmp35;
          modelica_integer tmp36;
          modelica_integer tmp37;
          modelica_integer tmp40;
          modelica_integer tmp43;
          modelica_integer tmp46;
          modelica_integer tmp49;
          modelica_integer tmp52;
          modelica_integer tmp55;
          modelica_integer tmp58;
          modelica_integer tmp61;
          modelica_integer tmp64;
          modelica_metatype tmpMeta67;
          modelica_metatype tmpMeta68;
          modelica_metatype tmpMeta69;
          modelica_metatype tmpMeta70;
          modelica_metatype tmpMeta71;
          modelica_metatype tmpMeta72;
          modelica_metatype tmpMeta73;
          modelica_metatype tmpMeta74;
          modelica_metatype tmpMeta75;
          modelica_metatype tmpMeta76;
          modelica_metatype tmpMeta77;
          modelica_metatype tmpMeta78;
          modelica_metatype tmpMeta79;
          modelica_metatype tmpMeta80;
          modelica_metatype tmpMeta81;
          modelica_metatype tmpMeta82;
          modelica_metatype tmpMeta83;
          modelica_metatype tmpMeta84;
          modelica_metatype tmpMeta85;
          modelica_metatype tmpMeta86;
          modelica_metatype tmpMeta87;
          modelica_metatype tmpMeta88;
          modelica_metatype tmpMeta89;
          modelica_metatype tmpMeta90;
          modelica_metatype tmpMeta91;
          modelica_metatype tmpMeta92;
          modelica_metatype tmpMeta93;
          modelica_metatype tmpMeta94;
          modelica_metatype tmpMeta95;
          modelica_metatype tmpMeta96;
          modelica_metatype tmpMeta97;
          modelica_metatype tmpMeta98;
          modelica_integer tmp99;
          modelica_integer tmp100;
          modelica_integer tmp101;
          if (mmc__uniontype__metarecord__typedef__equal(tmp12_1,1,6) == 0) goto tmp11_end;
          
          /* Pattern matching succeeded */
          tmpMeta14 = stringAppend(_str,_OMC_LIT69);
          tmpMeta15 = stringAppend(omc_StringUtil_headline__2(threadData, tmpMeta14),_OMC_LIT55);
          _str = tmpMeta15;

          {
            modelica_metatype __omcQ_24tmpVar39;
            modelica_metatype* tmp17;
            modelica_metatype tmpMeta18;
            modelica_string __omcQ_24tmpVar38;
            modelica_integer tmp19;
            modelica_metatype _name_loopVar = 0;
            modelica_integer tmp20;
            modelica_metatype _name;
            _name_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 2)));
            tmp20 = 1;
            tmpMeta18 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar39 = tmpMeta18; /* defaultValue */
            tmp17 = &__omcQ_24tmpVar39;
            while(1) {
              tmp19 = 1;
              if (tmp20 <= arrayLength(_name_loopVar)) {
                _name = arrayGet(_name_loopVar, tmp20++);
                tmp19--;
              }
              if (tmp19 == 0) {
                __omcQ_24tmpVar38 = intString(omc_NFType_sizeOf(threadData, omc_NFComponentRef_getSubscriptedType(threadData, _name, 0 /* false */), 1 /* true */));
                *tmp17 = mmc_mk_cons(__omcQ_24tmpVar38,0);
                tmp17 = &MMC_CDR(*tmp17);
              } else if (tmp19 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp17 = mmc_mk_nil();
            tmpMeta16 = __omcQ_24tmpVar39;
          }
          _types = listArray(tmpMeta16);

          {
            modelica_metatype __omcQ_24tmpVar41;
            modelica_metatype* tmp22;
            modelica_metatype tmpMeta23;
            modelica_string __omcQ_24tmpVar40;
            modelica_integer tmp24;
            modelica_metatype _name_loopVar = 0;
            modelica_integer tmp25;
            modelica_metatype _name;
            _name_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 2)));
            tmp25 = 1;
            tmpMeta23 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar41 = tmpMeta23; /* defaultValue */
            tmp22 = &__omcQ_24tmpVar41;
            while(1) {
              tmp24 = 1;
              if (tmp25 <= arrayLength(_name_loopVar)) {
                _name = arrayGet(_name_loopVar, tmp25++);
                tmp24--;
              }
              if (tmp24 == 0) {
                __omcQ_24tmpVar40 = omc_NFComponentRef_toString(threadData, _name);
                *tmp22 = mmc_mk_cons(__omcQ_24tmpVar40,0);
                tmp22 = &MMC_CDR(*tmp22);
              } else if (tmp24 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp22 = mmc_mk_nil();
            tmpMeta21 = __omcQ_24tmpVar41;
          }
          _names = listArray(tmpMeta21);

          tmp34 = arrayLength(_names); tmp35 = ((modelica_integer) -1); tmp36 = ((modelica_integer) 1);
          if(!(((tmp35 > 0) && (tmp34 > tmp36)) || ((tmp35 < 0) && (tmp34 < tmp36))))
          {
            modelica_integer _i;
            for(_i = arrayLength(_names); in_range_integer(_i, tmp34, tmp36); _i += tmp35)
            {
              _XX = omc_NBAdjacency_Solvability_categorize(threadData, omc_UnorderedSet_toList(threadData, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 3))),_i) /* DAE.ASUB */), arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 5))),_i) /* DAE.ASUB */ ,&_II ,&_NM ,&_NP ,&_LV ,&_LP ,&_LC ,&_QQ);

              tmpMeta26 = mmc_mk_cons(omc_List_toString(threadData, _XX, boxvar_NFComponentRef_toString, _OMC_LIT70, _OMC_LIT42, _OMC_LIT62, _OMC_LIT44, 0 /* false */, ((modelica_integer) 0)), _xx);
              _xx = tmpMeta26;

              tmpMeta27 = mmc_mk_cons(omc_List_toString(threadData, _II, boxvar_NFComponentRef_toString, _OMC_LIT71, _OMC_LIT42, _OMC_LIT62, _OMC_LIT44, 0 /* false */, ((modelica_integer) 0)), _ii);
              _ii = tmpMeta27;

              tmpMeta28 = mmc_mk_cons(omc_List_toString(threadData, _NM, boxvar_NFComponentRef_toString, _OMC_LIT72, _OMC_LIT42, _OMC_LIT62, _OMC_LIT44, 0 /* false */, ((modelica_integer) 0)), _nm);
              _nm = tmpMeta28;

              tmpMeta29 = mmc_mk_cons(omc_List_toString(threadData, _NP, boxvar_NFComponentRef_toString, _OMC_LIT73, _OMC_LIT42, _OMC_LIT62, _OMC_LIT44, 0 /* false */, ((modelica_integer) 0)), _np);
              _np = tmpMeta29;

              tmpMeta30 = mmc_mk_cons(omc_List_toString(threadData, _LV, boxvar_NFComponentRef_toString, _OMC_LIT74, _OMC_LIT42, _OMC_LIT62, _OMC_LIT44, 0 /* false */, ((modelica_integer) 0)), _lv);
              _lv = tmpMeta30;

              tmpMeta31 = mmc_mk_cons(omc_List_toString(threadData, _LP, boxvar_NFComponentRef_toString, _OMC_LIT75, _OMC_LIT42, _OMC_LIT62, _OMC_LIT44, 0 /* false */, ((modelica_integer) 0)), _lp);
              _lp = tmpMeta31;

              tmpMeta32 = mmc_mk_cons(omc_List_toString(threadData, _LC, boxvar_NFComponentRef_toString, _OMC_LIT76, _OMC_LIT42, _OMC_LIT62, _OMC_LIT44, 0 /* false */, ((modelica_integer) 0)), _lc);
              _lc = tmpMeta32;

              tmpMeta33 = mmc_mk_cons(omc_List_toString(threadData, _QQ, boxvar_NFComponentRef_toString, _OMC_LIT77, _OMC_LIT42, _OMC_LIT62, _OMC_LIT44, 0 /* false */, ((modelica_integer) 0)), _qq);
              _qq = tmpMeta33;
            }
          }

          _XX_ = listArray(_xx);

          _II_ = listArray(_ii);

          _NM_ = listArray(_nm);

          _NP_ = listArray(_np);

          _LV_ = listArray(_lv);

          _LP_ = listArray(_lp);

          _LC_ = listArray(_lc);

          _QQ_ = listArray(_qq);

          {
            modelica_integer __omcQ_24tmpVar43;
            modelica_integer __omcQ_24tmpVar42;
            modelica_integer tmp38;
            modelica_metatype _ty_loopVar = 0;
            modelica_integer tmp39;
            modelica_metatype _ty;
            _ty_loopVar = _types;
            tmp39 = 1;
            __omcQ_24tmpVar43 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp38 = 1;
              if (tmp39 <= arrayLength(_ty_loopVar)) {
                _ty = arrayGet(_ty_loopVar, tmp39++);
                tmp38--;
              }
              if (tmp38 == 0) {
                __omcQ_24tmpVar42 = stringLength(_ty);
                __omcQ_24tmpVar43 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar42),(modelica_integer)(__omcQ_24tmpVar43));
              } else if (tmp38 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            tmp37 = __omcQ_24tmpVar43;
          }
          _length1 = ((modelica_integer) 1) + tmp37;

          {
            modelica_integer __omcQ_24tmpVar45;
            modelica_integer __omcQ_24tmpVar44;
            modelica_integer tmp41;
            modelica_metatype _name_loopVar = 0;
            modelica_integer tmp42;
            modelica_metatype _name;
            _name_loopVar = _names;
            tmp42 = 1;
            __omcQ_24tmpVar45 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp41 = 1;
              if (tmp42 <= arrayLength(_name_loopVar)) {
                _name = arrayGet(_name_loopVar, tmp42++);
                tmp41--;
              }
              if (tmp41 == 0) {
                __omcQ_24tmpVar44 = stringLength(_name);
                __omcQ_24tmpVar45 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar44),(modelica_integer)(__omcQ_24tmpVar45));
              } else if (tmp41 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            tmp40 = __omcQ_24tmpVar45;
          }
          _length2 = ((modelica_integer) 3) + tmp40;

          {
            modelica_integer __omcQ_24tmpVar47;
            modelica_integer __omcQ_24tmpVar46;
            modelica_integer tmp44;
            modelica_metatype _s_loopVar = 0;
            modelica_integer tmp45;
            modelica_metatype _s;
            _s_loopVar = _XX_;
            tmp45 = 1;
            __omcQ_24tmpVar47 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp44 = 1;
              if (tmp45 <= arrayLength(_s_loopVar)) {
                _s = arrayGet(_s_loopVar, tmp45++);
                tmp44--;
              }
              if (tmp44 == 0) {
                __omcQ_24tmpVar46 = stringLength(_s);
                __omcQ_24tmpVar47 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar46),(modelica_integer)(__omcQ_24tmpVar47));
              } else if (tmp44 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            tmp43 = __omcQ_24tmpVar47;
          }
          _length_xx = tmp43;

          {
            modelica_integer __omcQ_24tmpVar49;
            modelica_integer __omcQ_24tmpVar48;
            modelica_integer tmp47;
            modelica_metatype _s_loopVar = 0;
            modelica_integer tmp48;
            modelica_metatype _s;
            _s_loopVar = _II_;
            tmp48 = 1;
            __omcQ_24tmpVar49 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp47 = 1;
              if (tmp48 <= arrayLength(_s_loopVar)) {
                _s = arrayGet(_s_loopVar, tmp48++);
                tmp47--;
              }
              if (tmp47 == 0) {
                __omcQ_24tmpVar48 = stringLength(_s);
                __omcQ_24tmpVar49 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar48),(modelica_integer)(__omcQ_24tmpVar49));
              } else if (tmp47 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            tmp46 = __omcQ_24tmpVar49;
          }
          _length_ii = tmp46;

          {
            modelica_integer __omcQ_24tmpVar51;
            modelica_integer __omcQ_24tmpVar50;
            modelica_integer tmp50;
            modelica_metatype _s_loopVar = 0;
            modelica_integer tmp51;
            modelica_metatype _s;
            _s_loopVar = _NM_;
            tmp51 = 1;
            __omcQ_24tmpVar51 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp50 = 1;
              if (tmp51 <= arrayLength(_s_loopVar)) {
                _s = arrayGet(_s_loopVar, tmp51++);
                tmp50--;
              }
              if (tmp50 == 0) {
                __omcQ_24tmpVar50 = stringLength(_s);
                __omcQ_24tmpVar51 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar50),(modelica_integer)(__omcQ_24tmpVar51));
              } else if (tmp50 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            tmp49 = __omcQ_24tmpVar51;
          }
          _length_nm = tmp49;

          {
            modelica_integer __omcQ_24tmpVar53;
            modelica_integer __omcQ_24tmpVar52;
            modelica_integer tmp53;
            modelica_metatype _s_loopVar = 0;
            modelica_integer tmp54;
            modelica_metatype _s;
            _s_loopVar = _NP_;
            tmp54 = 1;
            __omcQ_24tmpVar53 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp53 = 1;
              if (tmp54 <= arrayLength(_s_loopVar)) {
                _s = arrayGet(_s_loopVar, tmp54++);
                tmp53--;
              }
              if (tmp53 == 0) {
                __omcQ_24tmpVar52 = stringLength(_s);
                __omcQ_24tmpVar53 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar52),(modelica_integer)(__omcQ_24tmpVar53));
              } else if (tmp53 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            tmp52 = __omcQ_24tmpVar53;
          }
          _length_np = tmp52;

          {
            modelica_integer __omcQ_24tmpVar55;
            modelica_integer __omcQ_24tmpVar54;
            modelica_integer tmp56;
            modelica_metatype _s_loopVar = 0;
            modelica_integer tmp57;
            modelica_metatype _s;
            _s_loopVar = _LV_;
            tmp57 = 1;
            __omcQ_24tmpVar55 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp56 = 1;
              if (tmp57 <= arrayLength(_s_loopVar)) {
                _s = arrayGet(_s_loopVar, tmp57++);
                tmp56--;
              }
              if (tmp56 == 0) {
                __omcQ_24tmpVar54 = stringLength(_s);
                __omcQ_24tmpVar55 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar54),(modelica_integer)(__omcQ_24tmpVar55));
              } else if (tmp56 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            tmp55 = __omcQ_24tmpVar55;
          }
          _length_lv = tmp55;

          {
            modelica_integer __omcQ_24tmpVar57;
            modelica_integer __omcQ_24tmpVar56;
            modelica_integer tmp59;
            modelica_metatype _s_loopVar = 0;
            modelica_integer tmp60;
            modelica_metatype _s;
            _s_loopVar = _LP_;
            tmp60 = 1;
            __omcQ_24tmpVar57 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp59 = 1;
              if (tmp60 <= arrayLength(_s_loopVar)) {
                _s = arrayGet(_s_loopVar, tmp60++);
                tmp59--;
              }
              if (tmp59 == 0) {
                __omcQ_24tmpVar56 = stringLength(_s);
                __omcQ_24tmpVar57 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar56),(modelica_integer)(__omcQ_24tmpVar57));
              } else if (tmp59 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            tmp58 = __omcQ_24tmpVar57;
          }
          _length_lp = tmp58;

          {
            modelica_integer __omcQ_24tmpVar59;
            modelica_integer __omcQ_24tmpVar58;
            modelica_integer tmp62;
            modelica_metatype _s_loopVar = 0;
            modelica_integer tmp63;
            modelica_metatype _s;
            _s_loopVar = _LC_;
            tmp63 = 1;
            __omcQ_24tmpVar59 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp62 = 1;
              if (tmp63 <= arrayLength(_s_loopVar)) {
                _s = arrayGet(_s_loopVar, tmp63++);
                tmp62--;
              }
              if (tmp62 == 0) {
                __omcQ_24tmpVar58 = stringLength(_s);
                __omcQ_24tmpVar59 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar58),(modelica_integer)(__omcQ_24tmpVar59));
              } else if (tmp62 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            tmp61 = __omcQ_24tmpVar59;
          }
          _length_lc = tmp61;

          {
            modelica_integer __omcQ_24tmpVar61;
            modelica_integer __omcQ_24tmpVar60;
            modelica_integer tmp65;
            modelica_metatype _s_loopVar = 0;
            modelica_integer tmp66;
            modelica_metatype _s;
            _s_loopVar = _QQ_;
            tmp66 = 1;
            __omcQ_24tmpVar61 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp65 = 1;
              if (tmp66 <= arrayLength(_s_loopVar)) {
                _s = arrayGet(_s_loopVar, tmp66++);
                tmp65--;
              }
              if (tmp65 == 0) {
                __omcQ_24tmpVar60 = stringLength(_s);
                __omcQ_24tmpVar61 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar60),(modelica_integer)(__omcQ_24tmpVar61));
              } else if (tmp65 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            tmp64 = __omcQ_24tmpVar61;
          }
          _length_qq = tmp64;

          tmp99 = ((modelica_integer) 1); tmp100 = 1; tmp101 = arrayLength(_names);
          if(!(((tmp100 > 0) && (tmp99 > tmp101)) || ((tmp100 < 0) && (tmp99 < tmp101))))
          {
            modelica_integer _i;
            for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp99, tmp101); _i += tmp100)
            {
              tmpMeta67 = stringAppend(_str,arrayGet(_types, _i));
              tmpMeta68 = stringAppend(tmpMeta67,_OMC_LIT54);
              tmpMeta69 = stringAppend(tmpMeta68,omc_StringUtil_repeat(threadData, _OMC_LIT68, _length1 - stringLength(arrayGet(_types, _i))));
              tmpMeta70 = stringAppend(tmpMeta69,_OMC_LIT54);
              tmpMeta71 = stringAppend(tmpMeta70,arrayGet(_names, _i));
              tmpMeta72 = stringAppend(tmpMeta71,_OMC_LIT54);
              tmpMeta73 = stringAppend(tmpMeta72,omc_StringUtil_repeat(threadData, _OMC_LIT68, _length2 - stringLength(arrayGet(_names, _i))));
              tmpMeta74 = stringAppend(tmpMeta73,arrayGet(_LC_, _i));
              tmpMeta75 = stringAppend(tmpMeta74,_OMC_LIT54);
              tmpMeta76 = stringAppend(tmpMeta75,omc_StringUtil_repeat(threadData, _OMC_LIT68, _length_lc - stringLength(arrayGet(_LC_, _i))));
              tmpMeta77 = stringAppend(tmpMeta76,arrayGet(_LP_, _i));
              tmpMeta78 = stringAppend(tmpMeta77,_OMC_LIT54);
              tmpMeta79 = stringAppend(tmpMeta78,omc_StringUtil_repeat(threadData, _OMC_LIT68, _length_lp - stringLength(arrayGet(_LP_, _i))));
              tmpMeta80 = stringAppend(tmpMeta79,arrayGet(_LV_, _i));
              tmpMeta81 = stringAppend(tmpMeta80,_OMC_LIT54);
              tmpMeta82 = stringAppend(tmpMeta81,omc_StringUtil_repeat(threadData, _OMC_LIT68, _length_lv - stringLength(arrayGet(_LV_, _i))));
              tmpMeta83 = stringAppend(tmpMeta82,arrayGet(_NP_, _i));
              tmpMeta84 = stringAppend(tmpMeta83,_OMC_LIT54);
              tmpMeta85 = stringAppend(tmpMeta84,omc_StringUtil_repeat(threadData, _OMC_LIT68, _length_np - stringLength(arrayGet(_NP_, _i))));
              tmpMeta86 = stringAppend(tmpMeta85,arrayGet(_NM_, _i));
              tmpMeta87 = stringAppend(tmpMeta86,_OMC_LIT54);
              tmpMeta88 = stringAppend(tmpMeta87,omc_StringUtil_repeat(threadData, _OMC_LIT68, _length_nm - stringLength(arrayGet(_NM_, _i))));
              tmpMeta89 = stringAppend(tmpMeta88,arrayGet(_II_, _i));
              tmpMeta90 = stringAppend(tmpMeta89,_OMC_LIT54);
              tmpMeta91 = stringAppend(tmpMeta90,omc_StringUtil_repeat(threadData, _OMC_LIT68, _length_ii - stringLength(arrayGet(_II_, _i))));
              tmpMeta92 = stringAppend(tmpMeta91,arrayGet(_XX_, _i));
              tmpMeta93 = stringAppend(tmpMeta92,_OMC_LIT54);
              tmpMeta94 = stringAppend(tmpMeta93,omc_StringUtil_repeat(threadData, _OMC_LIT68, _length_xx - stringLength(arrayGet(_XX_, _i))));
              tmpMeta95 = stringAppend(tmpMeta94,arrayGet(_QQ_, _i));
              tmpMeta96 = stringAppend(tmpMeta95,_OMC_LIT54);
              tmpMeta97 = stringAppend(tmpMeta96,omc_StringUtil_repeat(threadData, _OMC_LIT68, _length_qq - stringLength(arrayGet(_QQ_, _i))));
              tmpMeta98 = stringAppend(tmpMeta97,_OMC_LIT55);
              _str = tmpMeta98;
            }
          }
          tmp1 = _str;
          goto tmp11_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NBAdjacency_Matrix_toString(threadData, _adj, _str);
          goto tmp11_done;
        }
        }
        goto tmp11_end;
        tmp11_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp11_done;
      tmp11_done:;
    }
  }
  _str = tmp1;
  _return: OMC_LABEL_UNUSED
  return _str;
}

static modelica_metatype closure4_NBAdjacency_Matrix_fullString(threadData_t *thData, modelica_metatype closure, modelica_metatype cref)
{
  modelica_metatype dep_map = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype sol_map = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  modelica_metatype rep_set = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),3));
  return boxptr_NBAdjacency_Matrix_fullString(thData, cref, dep_map, sol_map, rep_set);
}
DLLDirection
modelica_string omc_NBAdjacency_Matrix_toString(threadData_t *threadData, modelica_metatype _adj, modelica_string __omcQ_24in_5Fstr)
{
  modelica_string _str = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_string tmp3 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _str = __omcQ_24in_5Fstr;
  tmpMeta1 = stringAppend(_str,_OMC_LIT78);
  tmpMeta2 = stringAppend(omc_StringUtil_headline__2(threadData, tmpMeta1),_OMC_LIT55);
  _str = tmpMeta2;

  { /* match expression */
    modelica_metatype tmp6_1;
    tmp6_1 = _adj;
    {
      modelica_metatype _types = NULL;
      modelica_metatype _names = NULL;
      modelica_metatype _types_str = NULL;
      modelica_metatype _complex_sizes = NULL;
      modelica_integer _length0;
      modelica_integer _length1;
      modelica_integer _length2;
      int tmp6;
      // _types has no default value.
      // _names has no default value.
      // _types_str has no default value.
      // _complex_sizes has no default value.
      // _length0 has no default value.
      // _length1 has no default value.
      // _length2 has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp6_1))) {
        case 4: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta20;
          modelica_integer tmp25;
          modelica_integer tmp28;
          modelica_integer tmp31;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          modelica_metatype tmpMeta44;
          modelica_metatype tmpMeta45;
          modelica_metatype tmpMeta46;
          modelica_metatype tmpMeta47;
          modelica_integer tmp48;
          modelica_integer tmp49;
          modelica_integer tmp50;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar63;
            modelica_metatype* tmp8;
            modelica_metatype tmpMeta9;
            modelica_metatype __omcQ_24tmpVar62;
            modelica_integer tmp10;
            modelica_metatype _name_loopVar = 0;
            modelica_integer tmp11;
            modelica_metatype _name;
            _name_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 2)));
            tmp11 = 1;
            tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar63 = tmpMeta9; /* defaultValue */
            tmp8 = &__omcQ_24tmpVar63;
            while(1) {
              tmp10 = 1;
              if (tmp11 <= arrayLength(_name_loopVar)) {
                _name = arrayGet(_name_loopVar, tmp11++);
                tmp10--;
              }
              if (tmp10 == 0) {
                __omcQ_24tmpVar62 = omc_NFComponentRef_getSubscriptedType(threadData, _name, 0 /* false */);
                *tmp8 = mmc_mk_cons(__omcQ_24tmpVar62,0);
                tmp8 = &MMC_CDR(*tmp8);
              } else if (tmp10 == 1) {
                break;
              } else {
                goto goto_4;
              }
            }
            *tmp8 = mmc_mk_nil();
            tmpMeta7 = __omcQ_24tmpVar63;
          }
          _types = tmpMeta7;

          {
            modelica_metatype __omcQ_24tmpVar65;
            modelica_metatype* tmp13;
            modelica_metatype tmpMeta14;
            modelica_string __omcQ_24tmpVar64;
            modelica_integer tmp15;
            modelica_metatype _ty_loopVar = 0;
            modelica_metatype _ty;
            _ty_loopVar = _types;
            tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar65 = tmpMeta14; /* defaultValue */
            tmp13 = &__omcQ_24tmpVar65;
            while(1) {
              tmp15 = 1;
              if (!listEmpty(_ty_loopVar)) {
                _ty = MMC_CAR(_ty_loopVar);
                _ty_loopVar = MMC_CDR(_ty_loopVar);
                tmp15--;
              }
              if (tmp15 == 0) {
                __omcQ_24tmpVar64 = omc_Util_applyOptionOrDefault(threadData, omc_NFType_complexSize(threadData, _ty, 1 /* true */), boxvar_intString, _OMC_LIT79);
                *tmp13 = mmc_mk_cons(__omcQ_24tmpVar64,0);
                tmp13 = &MMC_CDR(*tmp13);
              } else if (tmp15 == 1) {
                break;
              } else {
                goto goto_4;
              }
            }
            *tmp13 = mmc_mk_nil();
            tmpMeta12 = __omcQ_24tmpVar65;
          }
          _complex_sizes = listArray(tmpMeta12);

          {
            modelica_metatype __omcQ_24tmpVar67;
            modelica_metatype* tmp17;
            modelica_metatype tmpMeta18;
            modelica_string __omcQ_24tmpVar66;
            modelica_integer tmp19;
            modelica_metatype _ty_loopVar = 0;
            modelica_metatype _ty;
            _ty_loopVar = _types;
            tmpMeta18 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar67 = tmpMeta18; /* defaultValue */
            tmp17 = &__omcQ_24tmpVar67;
            while(1) {
              tmp19 = 1;
              if (!listEmpty(_ty_loopVar)) {
                _ty = MMC_CAR(_ty_loopVar);
                _ty_loopVar = MMC_CDR(_ty_loopVar);
                tmp19--;
              }
              if (tmp19 == 0) {
                __omcQ_24tmpVar66 = omc_NBAdjacency_Matrix_dimsString(threadData, omc_NFType_arrayDims(threadData, _ty));
                *tmp17 = mmc_mk_cons(__omcQ_24tmpVar66,0);
                tmp17 = &MMC_CDR(*tmp17);
              } else if (tmp19 == 1) {
                break;
              } else {
                goto goto_4;
              }
            }
            *tmp17 = mmc_mk_nil();
            tmpMeta16 = __omcQ_24tmpVar67;
          }
          _types_str = listArray(tmpMeta16);

          {
            modelica_metatype __omcQ_24tmpVar69;
            modelica_metatype* tmp21;
            modelica_metatype tmpMeta22;
            modelica_string __omcQ_24tmpVar68;
            modelica_integer tmp23;
            modelica_metatype _name_loopVar = 0;
            modelica_integer tmp24;
            modelica_metatype _name;
            _name_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 2)));
            tmp24 = 1;
            tmpMeta22 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar69 = tmpMeta22; /* defaultValue */
            tmp21 = &__omcQ_24tmpVar69;
            while(1) {
              tmp23 = 1;
              if (tmp24 <= arrayLength(_name_loopVar)) {
                _name = arrayGet(_name_loopVar, tmp24++);
                tmp23--;
              }
              if (tmp23 == 0) {
                __omcQ_24tmpVar68 = omc_NFComponentRef_toString(threadData, _name);
                *tmp21 = mmc_mk_cons(__omcQ_24tmpVar68,0);
                tmp21 = &MMC_CDR(*tmp21);
              } else if (tmp23 == 1) {
                break;
              } else {
                goto goto_4;
              }
            }
            *tmp21 = mmc_mk_nil();
            tmpMeta20 = __omcQ_24tmpVar69;
          }
          _names = listArray(tmpMeta20);

          {
            modelica_integer __omcQ_24tmpVar71;
            modelica_integer __omcQ_24tmpVar70;
            modelica_integer tmp26;
            modelica_metatype _sz_loopVar = 0;
            modelica_integer tmp27;
            modelica_metatype _sz;
            _sz_loopVar = _complex_sizes;
            tmp27 = 1;
            __omcQ_24tmpVar71 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp26 = 1;
              if (tmp27 <= arrayLength(_sz_loopVar)) {
                _sz = arrayGet(_sz_loopVar, tmp27++);
                tmp26--;
              }
              if (tmp26 == 0) {
                __omcQ_24tmpVar70 = stringLength(_sz);
                __omcQ_24tmpVar71 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar70),(modelica_integer)(__omcQ_24tmpVar71));
              } else if (tmp26 == 1) {
                break;
              } else {
                goto goto_4;
              }
            }
            tmp25 = __omcQ_24tmpVar71;
          }
          _length0 = tmp25;

          {
            modelica_integer __omcQ_24tmpVar73;
            modelica_integer __omcQ_24tmpVar72;
            modelica_integer tmp29;
            modelica_metatype _ty_loopVar = 0;
            modelica_integer tmp30;
            modelica_metatype _ty;
            _ty_loopVar = _types_str;
            tmp30 = 1;
            __omcQ_24tmpVar73 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp29 = 1;
              if (tmp30 <= arrayLength(_ty_loopVar)) {
                _ty = arrayGet(_ty_loopVar, tmp30++);
                tmp29--;
              }
              if (tmp29 == 0) {
                __omcQ_24tmpVar72 = stringLength(_ty);
                __omcQ_24tmpVar73 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar72),(modelica_integer)(__omcQ_24tmpVar73));
              } else if (tmp29 == 1) {
                break;
              } else {
                goto goto_4;
              }
            }
            tmp28 = __omcQ_24tmpVar73;
          }
          _length1 = ((modelica_integer) 1) + tmp28;

          {
            modelica_integer __omcQ_24tmpVar75;
            modelica_integer __omcQ_24tmpVar74;
            modelica_integer tmp32;
            modelica_metatype _name_loopVar = 0;
            modelica_integer tmp33;
            modelica_metatype _name;
            _name_loopVar = _names;
            tmp33 = 1;
            __omcQ_24tmpVar75 = ((modelica_integer) -4611686018427387903); /* defaultValue */
            while(1) {
              tmp32 = 1;
              if (tmp33 <= arrayLength(_name_loopVar)) {
                _name = arrayGet(_name_loopVar, tmp33++);
                tmp32--;
              }
              if (tmp32 == 0) {
                __omcQ_24tmpVar74 = stringLength(_name);
                __omcQ_24tmpVar75 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar74),(modelica_integer)(__omcQ_24tmpVar75));
              } else if (tmp32 == 1) {
                break;
              } else {
                goto goto_4;
              }
            }
            tmp31 = __omcQ_24tmpVar75;
          }
          _length2 = ((modelica_integer) 3) + tmp31;

          tmp48 = ((modelica_integer) 1); tmp49 = 1; tmp50 = arrayLength(_names);
          if(!(((tmp49 > 0) && (tmp48 > tmp50)) || ((tmp49 < 0) && (tmp48 < tmp50))))
          {
            modelica_integer _i;
            for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp48, tmp50); _i += tmp49)
            {
              tmpMeta34 = stringAppend(_str,arrayGet(_complex_sizes, _i));
              tmpMeta35 = stringAppend(tmpMeta34,_OMC_LIT54);
              tmpMeta36 = stringAppend(tmpMeta35,omc_StringUtil_repeat(threadData, _OMC_LIT54, _length0 - stringLength(arrayGet(_complex_sizes, _i))));
              tmpMeta37 = stringAppend(tmpMeta36,_OMC_LIT80);
              tmpMeta38 = stringAppend(tmpMeta37,arrayGet(_types_str, _i));
              tmpMeta39 = stringAppend(tmpMeta38,_OMC_LIT54);
              tmpMeta40 = stringAppend(tmpMeta39,omc_StringUtil_repeat(threadData, _OMC_LIT68, _length1 - stringLength(arrayGet(_types_str, _i))));
              tmpMeta41 = stringAppend(tmpMeta40,arrayGet(_names, _i));
              tmpMeta42 = stringAppend(tmpMeta41,_OMC_LIT54);
              tmpMeta43 = stringAppend(tmpMeta42,omc_StringUtil_repeat(threadData, _OMC_LIT68, _length2 - stringLength(arrayGet(_names, _i))));
              tmpMeta44 = stringAppend(tmpMeta43,_OMC_LIT54);
              tmpMeta45 = mmc_mk_box3(0, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 4))),_i) /* DAE.ASUB */, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 5))),_i) /* DAE.ASUB */, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 6))),_i) /* DAE.ASUB */);
              tmpMeta46 = stringAppend(tmpMeta44,omc_List_toString(threadData, omc_UnorderedSet_toList(threadData, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 3))),_i) /* DAE.ASUB */), (modelica_fnptr) mmc_mk_box2(0,closure4_NBAdjacency_Matrix_fullString,tmpMeta45), _OMC_LIT41, _OMC_LIT42, _OMC_LIT43, _OMC_LIT44, 1 /* true */, ((modelica_integer) 0)));
              tmpMeta47 = stringAppend(tmpMeta46,_OMC_LIT55);
              _str = tmpMeta47;
            }
          }
          tmp3 = _str;
          goto tmp5_done;
        }
        case 5: {
          modelica_metatype tmpMeta51;
          modelica_metatype tmpMeta52;
          modelica_metatype tmpMeta53;
          modelica_metatype tmpMeta54;
          modelica_metatype tmpMeta55;
          modelica_metatype tmpMeta56;
          modelica_metatype tmpMeta57;
          
          /* Pattern matching succeeded */
          if((arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 2)))) > ((modelica_integer) 0)))
          {
            tmpMeta51 = stringAppend(_str,omc_StringUtil_headline__4(threadData, _OMC_LIT81));
            _str = tmpMeta51;

            tmpMeta52 = stringAppend(_str,omc_NBAdjacency_Matrix_toStringSingle(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 2)))));
            _str = tmpMeta52;
          }

          tmpMeta53 = stringAppend(_str,_OMC_LIT55);
          _str = tmpMeta53;

          if((arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 3)))) > ((modelica_integer) 0)))
          {
            tmpMeta54 = stringAppend(_str,omc_StringUtil_headline__4(threadData, _OMC_LIT82));
            _str = tmpMeta54;

            tmpMeta55 = stringAppend(_str,omc_NBAdjacency_Matrix_toStringSingle(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 3)))));
            _str = tmpMeta55;
          }
          tmpMeta56 = stringAppend(_str,_OMC_LIT55);
          tmpMeta57 = stringAppend(tmpMeta56,omc_NBAdjacency_Mapping_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 4)))));
          tmp3 = tmpMeta57;
          goto tmp5_done;
        }
        case 3: {
          modelica_metatype tmpMeta58;
          modelica_metatype tmpMeta59;
          
          /* Pattern matching succeeded */
          tmpMeta58 = stringAppend(_str,omc_StringUtil_headline__4(threadData, _OMC_LIT83));
          tmpMeta59 = stringAppend(tmpMeta58,_OMC_LIT55);
          tmp3 = tmpMeta59;
          goto tmp5_done;
        }
        default:
        tmp5_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          omc_Error_addMessage(threadData, _OMC_LIT12, _OMC_LIT85);
          goto goto_4;
          goto tmp5_done;
        }
        }
        goto tmp5_end;
        tmp5_end: ;
      }
      goto goto_4;
      goto_4:;
      MMC_THROW_INTERNAL();
      goto tmp5_done;
      tmp5_done:;
    }
  }
  _str = tmp3;
  _return: OMC_LABEL_UNUSED
  return _str;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Matrix_compress(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fadj, modelica_metatype __omcQ_24in_5Ffull, modelica_metatype _eqns, modelica_metatype _vars, modelica_metatype _old_map, modelica_metatype *out_full)
{
  modelica_metatype _adj = NULL;
  modelica_metatype _full = NULL;
  modelica_integer _index_old;
  modelica_integer _index_new;
  modelica_integer _size;
  modelica_metatype _name = NULL;
  modelica_metatype _equation_names = NULL;
  modelica_metatype _occurences = NULL;
  modelica_metatype _dependencies = NULL;
  modelica_metatype _solvabilities = NULL;
  modelica_metatype _repetitions = NULL;
  modelica_metatype _mapping = NULL;
  modelica_metatype _m = NULL;
  modelica_integer _old_start;
  modelica_integer _old_size;
  modelica_integer _new_start;
  modelica_integer _new_size;
  modelica_metatype tmpMeta35;
  modelica_metatype tmpMeta36;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _adj = __omcQ_24in_5Fadj;
  _full = __omcQ_24in_5Ffull;
  // _index_old has no default value.
  // _index_new has no default value.
  _size = omc_NBEquation_EquationPointers_size(threadData, _eqns);
  // _name has no default value.
  // _equation_names has no default value.
  // _occurences has no default value.
  // _dependencies has no default value.
  // _solvabilities has no default value.
  // _repetitions has no default value.
  // _mapping has no default value.
  // _m has no default value.
  // _old_start has no default value.
  // _old_size has no default value.
  // _new_start has no default value.
  // _new_size has no default value.
  
  
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _adj;
    tmp4_2 = _full;
    {
      modelica_metatype _new_adj = NULL;
      modelica_metatype _new_full = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _new_adj has no default value.
      // _new_full has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_integer tmp10;
          modelica_metatype tmpMeta11;
          modelica_integer tmp12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_integer tmp15;
          modelica_metatype tmpMeta16;
          modelica_integer tmp17;
          modelica_integer tmp18;
          modelica_integer tmp19;
          modelica_integer tmp20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,5) == 0) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,6) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _mapping = omc_NBAdjacency_Mapping_create(threadData, _eqns, _vars);

          tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
          _m = arrayCreate(arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapping), 2)))), tmpMeta6);

          _equation_names = arrayCreate(_size, _OMC_LIT86);

          _occurences = arrayCreate(_size, omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13)));

          _dependencies = arrayCreate(_size, omc_UnorderedMap_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 1)));

          _solvabilities = arrayCreate(_size, omc_UnorderedMap_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 1)));

          _repetitions = arrayCreate(_size, omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13)));

          {
            modelica_metatype _eqn_ptr;
            for (tmpMeta7 = omc_NBEquation_EquationPointers_toList(threadData, _eqns); !listEmpty(tmpMeta7); tmpMeta7=MMC_CDR(tmpMeta7))
            {
              _eqn_ptr = MMC_CAR(tmpMeta7);
              _name = omc_NBEquation_Equation_getEqnName(threadData, _eqn_ptr);

              _index_new = mmc_unbox_integer(omc_UnorderedMap_getSafe(threadData, _name, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqns), 2))), _OMC_LIT87));

              _index_old = mmc_unbox_integer(omc_UnorderedMap_getSafe(threadData, _name, _old_map, _OMC_LIT88));

              /* Pattern-matching assignment */
              tmpMeta8 = arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 4)))), 4))),_index_old) /* DAE.ASUB */;
              tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
              tmp10 = mmc_unbox_integer(tmpMeta9);
              tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
              tmp12 = mmc_unbox_integer(tmpMeta11);
              _old_start = tmp10  /* pattern as ty=Integer */;
              _old_size = tmp12  /* pattern as ty=Integer */;

              /* Pattern-matching assignment */
              tmpMeta13 = arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapping), 4))),_index_new) /* DAE.ASUB */;
              tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 1));
              tmp15 = mmc_unbox_integer(tmpMeta14);
              tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
              tmp17 = mmc_unbox_integer(tmpMeta16);
              _new_start = tmp15  /* pattern as ty=Integer */;
              _new_size = tmp17  /* pattern as ty=Integer */;

              if((_old_size == _new_size))
              {
                tmp18 = ((modelica_integer) 0); tmp19 = 1; tmp20 = ((modelica_integer) -1) + _old_size;
                if(!(((tmp19 > 0) && (tmp18 > tmp20)) || ((tmp19 < 0) && (tmp18 < tmp20))))
                {
                  modelica_integer _i;
                  for(_i = ((modelica_integer) 0); in_range_integer(_i, tmp18, tmp20); _i += tmp19)
                  {
                    arrayUpdate(_m,_new_start + _i,arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 2))),_old_start + _i) /* DAE.ASUB */);
                  }
                }
              }
              else
              {
                tmpMeta22 = stringAppend(_OMC_LIT89,intString(_old_size));
                tmpMeta23 = stringAppend(tmpMeta22,_OMC_LIT90);
                tmpMeta24 = stringAppend(tmpMeta23,intString(_new_size));
                tmpMeta25 = stringAppend(tmpMeta24,_OMC_LIT91);
                tmpMeta26 = stringAppend(tmpMeta25,omc_NBEquation_Equation_pointerToString(threadData, _eqn_ptr, _OMC_LIT41));
                tmpMeta21 = mmc_mk_cons(tmpMeta26, MMC_REFSTRUCTLIT(mmc_nil));
                omc_Error_addMessage(threadData, _OMC_LIT12, tmpMeta21);

                goto goto_2;
              }

              arrayUpdate(_equation_names,_index_new,_name);

              arrayUpdate(_occurences,_index_new,arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 3))),_index_old) /* DAE.ASUB */);

              arrayUpdate(_dependencies,_index_new,arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 4))),_index_old) /* DAE.ASUB */);

              arrayUpdate(_solvabilities,_index_new,arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 5))),_index_old) /* DAE.ASUB */);

              arrayUpdate(_repetitions,_index_new,arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 6))),_index_old) /* DAE.ASUB */);
            }
          }

          tmpMeta28 = mmc_mk_box6(5, &NBAdjacency_Matrix_FINAL__desc, _m, omc_NBAdjacency_Matrix_transposeScalar(threadData, _m, omc_NBVariable_VariablePointers_scalarSize(threadData, _vars, 1 /* true */)), _mapping, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 5))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 6))));
          _new_adj = tmpMeta28;

          tmpMeta29 = mmc_mk_box7(4, &NBAdjacency_Matrix_FULL__desc, _equation_names, _occurences, _dependencies, _solvabilities, _repetitions, _mapping);
          _new_full = tmpMeta29;
          tmpMeta[0+0] = _new_adj;
          tmpMeta[0+1] = _new_full;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          
          /* Pattern matching succeeded */
          tmpMeta31 = stringAppend(_OMC_LIT92,omc_NBAdjacency_strictnessString(threadData, omc_NBAdjacency_Matrix_getStrictness(threadData, _adj)));
          tmpMeta32 = stringAppend(tmpMeta31,_OMC_LIT93);
          tmpMeta33 = stringAppend(tmpMeta32,omc_NBAdjacency_strictnessString(threadData, omc_NBAdjacency_Matrix_getStrictness(threadData, _full)));
          tmpMeta34 = stringAppend(tmpMeta33,_OMC_LIT68);
          tmpMeta30 = mmc_mk_cons(tmpMeta34, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT12, tmpMeta30);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _adj = tmpMeta[0+0];
  _full = tmpMeta[0+1];

  if(omc_Flags_isSet(threadData, _OMC_LIT99))
  {
    tmpMeta35 = stringAppend(omc_NBAdjacency_Matrix_toString(threadData, _adj, _OMC_LIT94),_OMC_LIT55);
    fputs(MMC_STRINGDATA(tmpMeta35),stdout);

    tmpMeta36 = stringAppend(omc_NBAdjacency_Matrix_toString(threadData, _full, _OMC_LIT95),_OMC_LIT55);
    fputs(MMC_STRINGDATA(tmpMeta36),stdout);
  }
  _return: OMC_LABEL_UNUSED
  if (out_full) { *out_full = _full; }
  return _adj;
}

static modelica_metatype closure5_NBVariable_isContinuous(threadData_t *thData, modelica_metatype closure, modelica_metatype var_ptr)
{
  modelica_metatype init = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NBVariable_isContinuous(thData, var_ptr, init);
}static modelica_metatype closure6_NBVariable_checkCref(threadData_t *thData, modelica_metatype closure, modelica_metatype cref)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype info = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NBVariable_checkCref(thData, cref, func, info);
}static modelica_metatype closure7_NBVariable_checkCref(threadData_t *thData, modelica_metatype closure, modelica_metatype cref)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype info = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NBVariable_checkCref(thData, cref, func, info);
}
DLLDirection
modelica_metatype omc_NBAdjacency_Matrix_refine(threadData_t *threadData, modelica_metatype __omcQ_24in_5Ffull, modelica_metatype __omcQ_24in_5FfuncTree, modelica_metatype _v, modelica_metatype _e, modelica_metatype _vars, modelica_metatype _eqns, modelica_metatype _vars_set, modelica_boolean _init, modelica_metatype *out_funcTree)
{
  modelica_metatype _full = NULL;
  modelica_metatype _funcTree = NULL;
  modelica_metatype tmpMeta23;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _full = __omcQ_24in_5Ffull;
  _funcTree = __omcQ_24in_5FfuncTree;
  
  
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _full;
    {
      modelica_metatype _diffArgs = NULL;
      modelica_metatype _eqn_ptr = NULL;
      modelica_metatype _residual = NULL;
      modelica_metatype _exp = NULL;
      modelica_integer _status;
      modelica_metatype _sol = NULL;
      modelica_metatype _linear_set = NULL;
      modelica_metatype _param_set = NULL;
      modelica_metatype _var_set = NULL;
      modelica_boolean _eqnIsDiscrete;
      modelica_boolean _eqnIsIf;
      volatile mmc_switch_type tmp4;
      int tmp5;
      _diffArgs = omc_NBDifferentiate_DifferentiationArguments_default(threadData, 2, _funcTree);
      // _eqn_ptr has no default value.
      // _residual has no default value.
      // _exp has no default value.
      // _status has no default value.
      // _sol has no default value.
      // _linear_set has no default value.
      // _param_set has no default value.
      // _var_set has no default value.
      // _eqnIsDiscrete has no default value.
      // _eqnIsIf has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_integer tmp15;
          modelica_integer tmp16;
          modelica_metatype tmpMeta17;
          modelica_integer tmp18;
          modelica_integer tmp19;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,6) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _eqn_idx;
            for (tmpMeta6 = omc_UnorderedMap_valueArray(threadData, _e), tmp19 = arrayLength(tmpMeta6), tmp18 = 1; tmp18 <= tmp19; tmp18++)
            {
              _eqn_idx = arrayGet(tmpMeta6,tmp18);
              _eqn_ptr = omc_NBEquation_EquationPointers_getEqnAt(threadData, _eqns, mmc_unbox_integer(_eqn_idx));

              _eqnIsDiscrete = (omc_NBEquation_Equation_isDiscrete(threadData, _eqn_ptr) || omc_NBEquation_Equation_isWhenEquation(threadData, _eqn_ptr));

              _eqnIsIf = omc_NBEquation_Equation_isIfEquation(threadData, _eqn_ptr);

              if((!(_eqnIsDiscrete || _eqnIsIf)))
              {
                _residual = omc_NBEquation_Equation_getResidualExp(threadData, omc_Pointer_access(threadData, _eqn_ptr));
              }

              {
                modelica_metatype _var;
                for (tmpMeta7 = omc_UnorderedSet_toArray(threadData, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 3))),mmc_unbox_integer(_eqn_idx)) /* DAE.ASUB */), tmp16 = arrayLength(tmpMeta7), tmp15 = 1; tmp15 <= tmp16; tmp15++)
                {
                  _var = arrayGet(tmpMeta7,tmp15);
                  if(omc_UnorderedMap_contains(threadData, _var, _v))
                  {
                    _sol = omc_UnorderedMap_getSafe(threadData, _var, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 5))),mmc_unbox_integer(_eqn_idx)) /* DAE.ASUB */, _OMC_LIT100);

                    if((omc_NBAdjacency_Solvability_rank(threadData, _sol) < omc_NBAdjacency_Solvability_rank(threadData, _OMC_LIT1)))
                    {
                      tmpMeta8 = mmc_mk_box1(0, mmc_mk_boolean(_init));
                      if((_eqnIsDiscrete || (!omc_NBVariable_checkCref(threadData, _var, (modelica_fnptr) mmc_mk_box2(0,closure5_NBVariable_isContinuous,tmpMeta8), _OMC_LIT104))))
                      {
                        omc_NBSolve_solveSimple(threadData, omc_Pointer_access(threadData, _eqn_ptr), _var ,&_status ,NULL);

                        _sol = (((modelica_integer)_status == 2)?_OMC_LIT4:_OMC_LIT0);
                      }
                      else
                      {
                        if(_eqnIsIf)
                        {
                          _sol = _OMC_LIT1;
                        }
                        else
                        {
                          tmpMeta9 = MMC_TAGPTR(mmc_alloc_words(8));
                          memcpy(MMC_UNTAGPTR(tmpMeta9), MMC_UNTAGPTR(_diffArgs), 8*sizeof(modelica_metatype));
                          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta9))[2] = _var;
                          _diffArgs = tmpMeta9;

                          _exp = omc_NBDifferentiate_differentiateExpressionDump(threadData, _residual, _diffArgs, _OMC_LIT101, _OMC_LIT41 ,&_diffArgs);

                          _exp = omc_NFSimplifyExp_simplifyDump(threadData, _exp, 1 /* true */, _OMC_LIT101, _OMC_LIT41);

                          if(omc_NFExpression_isZero(threadData, _exp))
                          {
                            _sol = _OMC_LIT0;
                          }
                          else
                          {
                            if(omc_NFExpression_containsCrefSet(threadData, _exp, _vars_set))
                            {
                              tmpMeta10 = mmc_mk_box2(6, &NBAdjacency_Solvability_EXPLICIT__NONLINEAR__desc, mmc_mk_boolean(omc_NFExpression_containsCref(threadData, _exp, _var)));
                              _sol = tmpMeta10;
                            }
                            else
                            {
                              _linear_set = omc_NFExpression_extractCrefs(threadData, _exp);

                              tmpMeta11 = mmc_mk_box2(0, boxvar_NBVariable_isConst, _OMC_LIT102);
                              _linear_set = omc_UnorderedSet_filterOnFalse(threadData, _linear_set, (modelica_fnptr) mmc_mk_box2(0,closure6_NBVariable_checkCref,tmpMeta11));

                              tmpMeta12 = mmc_mk_box2(0, boxvar_NBVariable_isParamOrConst, _OMC_LIT103);
                              _param_set = omc_UnorderedSet_splitOnTrue(threadData, _linear_set, (modelica_fnptr) mmc_mk_box2(0,closure7_NBVariable_checkCref,tmpMeta12) ,&_var_set);

                              tmpMeta13 = mmc_mk_box3(7, &NBAdjacency_Solvability_EXPLICIT__LINEAR__desc, (omc_UnorderedSet_isEmpty(threadData, _param_set)?mmc_mk_none():mmc_mk_some(_param_set)), (omc_UnorderedSet_isEmpty(threadData, _var_set)?mmc_mk_none():mmc_mk_some(_var_set)));
                              _sol = tmpMeta13;
                            }
                          }
                        }
                      }

                      omc_UnorderedMap_add(threadData, _var, _sol, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 5))),mmc_unbox_integer(_eqn_idx)) /* DAE.ASUB */);
                    }
                  }
                }
              }
            }
          }
          tmpMeta[0+0] = _full;
          tmpMeta[0+1] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_diffArgs), 6)));
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          
          /* Pattern matching succeeded */
          tmpMeta21 = stringAppend(_OMC_LIT105,omc_NBAdjacency_strictnessString(threadData, omc_NBAdjacency_Matrix_getStrictness(threadData, _full)));
          tmpMeta22 = stringAppend(tmpMeta21,_OMC_LIT68);
          tmpMeta20 = mmc_mk_cons(tmpMeta22, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT12, tmpMeta20);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _full = tmpMeta[0+0];
  _funcTree = tmpMeta[0+1];

  if(omc_Flags_isSet(threadData, _OMC_LIT99))
  {
    tmpMeta23 = stringAppend(omc_NBAdjacency_Matrix_toString(threadData, _full, _OMC_LIT106),_OMC_LIT55);
    fputs(MMC_STRINGDATA(tmpMeta23),stdout);
  }
  _return: OMC_LABEL_UNUSED
  if (out_funcTree) { *out_funcTree = _funcTree; }
  return _full;
}
modelica_metatype boxptr_NBAdjacency_Matrix_refine(threadData_t *threadData, modelica_metatype __omcQ_24in_5Ffull, modelica_metatype __omcQ_24in_5FfuncTree, modelica_metatype _v, modelica_metatype _e, modelica_metatype _vars, modelica_metatype _eqns, modelica_metatype _vars_set, modelica_metatype _init, modelica_metatype *out_funcTree)
{
  modelica_integer tmp1;
  modelica_metatype _full = NULL;
  tmp1 = mmc_unbox_integer(_init);
  _full = omc_NBAdjacency_Matrix_refine(threadData, __omcQ_24in_5Ffull, __omcQ_24in_5FfuncTree, _v, _e, _vars, _eqns, _vars_set, tmp1, out_funcTree);
  /* skip box _full; NBAdjacency.Matrix */
  /* skip box _funcTree; NFFlatten.FunctionTreeImpl.Tree */
  return _full;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Matrix_expandFull(threadData_t *threadData, modelica_metatype __omcQ_24in_5Ffull, modelica_metatype _vo, modelica_metatype _vn, modelica_metatype _eo, modelica_metatype _en, modelica_metatype _vars, modelica_metatype _eqns)
{
  modelica_metatype _full = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta22;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _full = __omcQ_24in_5Ffull;
  { /* match expression */
    modelica_metatype tmp12_1;
    tmp12_1 = _full;
    {
      modelica_metatype _new_vars = NULL;
      modelica_metatype tmpMeta3;
      modelica_metatype _new_eqns = NULL;
      modelica_metatype tmpMeta7;
      modelica_integer _index;
      modelica_integer _size;
      modelica_metatype _eqn_ptr = NULL;
      modelica_metatype _occ_set = NULL;
      volatile mmc_switch_type tmp12;
      int tmp13;
      {
        modelica_metatype __omcQ_24tmpVar77;
        modelica_metatype* tmp4;
        modelica_metatype tmpMeta5;
        modelica_metatype __omcQ_24tmpVar76;
        modelica_integer tmp6;
        modelica_metatype _idx_loopVar = 0;
        modelica_metatype _idx;
        _idx_loopVar = omc_UnorderedMap_valueList(threadData, _vn);
        tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
        __omcQ_24tmpVar77 = tmpMeta5; /* defaultValue */
        tmp4 = &__omcQ_24tmpVar77;
        while(1) {
          tmp6 = 1;
          if (!listEmpty(_idx_loopVar)) {
            _idx = MMC_CAR(_idx_loopVar);
            _idx_loopVar = MMC_CDR(_idx_loopVar);
            tmp6--;
          }
          if (tmp6 == 0) {
            __omcQ_24tmpVar76 = omc_NBVariable_VariablePointers_getVarAt(threadData, _vars, mmc_unbox_integer(_idx));
            *tmp4 = mmc_mk_cons(__omcQ_24tmpVar76,0);
            tmp4 = &MMC_CDR(*tmp4);
          } else if (tmp6 == 1) {
            break;
          } else {
            goto goto_2;
          }
        }
        *tmp4 = mmc_mk_nil();
        tmpMeta3 = __omcQ_24tmpVar77;
      }
      _new_vars = tmpMeta3;
      {
        modelica_metatype __omcQ_24tmpVar79;
        modelica_metatype* tmp8;
        modelica_metatype tmpMeta9;
        modelica_metatype __omcQ_24tmpVar78;
        modelica_integer tmp10;
        modelica_metatype _idx_loopVar = 0;
        modelica_metatype _idx;
        _idx_loopVar = omc_UnorderedMap_valueList(threadData, _en);
        tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
        __omcQ_24tmpVar79 = tmpMeta9; /* defaultValue */
        tmp8 = &__omcQ_24tmpVar79;
        while(1) {
          tmp10 = 1;
          if (!listEmpty(_idx_loopVar)) {
            _idx = MMC_CAR(_idx_loopVar);
            _idx_loopVar = MMC_CDR(_idx_loopVar);
            tmp10--;
          }
          if (tmp10 == 0) {
            __omcQ_24tmpVar78 = omc_NBEquation_EquationPointers_getEqnAt(threadData, _eqns, mmc_unbox_integer(_idx));
            *tmp8 = mmc_mk_cons(__omcQ_24tmpVar78,0);
            tmp8 = &MMC_CDR(*tmp8);
          } else if (tmp10 == 1) {
            break;
          } else {
            goto goto_2;
          }
        }
        *tmp8 = mmc_mk_nil();
        tmpMeta7 = __omcQ_24tmpVar79;
      }
      _new_eqns = tmpMeta7;
      // _index has no default value.
      _size = omc_NBEquation_EquationPointers_size(threadData, _eqns);
      // _eqn_ptr has no default value.
      // _occ_set has no default value.
      tmp12 = 0;
      for (; tmp12 < 2; tmp12++) {
        switch (MMC_SWITCH_CAST(tmp12)) {
        case 0: {
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          if (mmc__uniontype__metarecord__typedef__equal(tmp12_1,1,6) == 0) goto tmp11_end;
          
          /* Pattern matching succeeded */
          tmpMeta14 = mmc_mk_box7(4, &NBAdjacency_Matrix_FULL__desc, omc_Array_expandToSize(threadData, _size, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 2))), _OMC_LIT86), omc_Array_expandToSize(threadData, _size, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 3))), omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13))), omc_Array_expandToSize(threadData, _size, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 4))), omc_UnorderedMap_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 1))), omc_Array_expandToSize(threadData, _size, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 5))), omc_UnorderedMap_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 1))), omc_Array_expandToSize(threadData, _size, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 6))), omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13))), omc_NBAdjacency_Mapping_expand(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 7))), _new_eqns, _new_vars));
          _full = tmpMeta14;

          if((!omc_UnorderedMap_isEmpty(threadData, _vn)))
          {
            {
              modelica_metatype _e;
              for (tmpMeta15 = omc_UnorderedMap_valueList(threadData, _eo); !listEmpty(tmpMeta15); tmpMeta15=MMC_CDR(tmpMeta15))
              {
                _e = MMC_CAR(tmpMeta15);
                _eqn_ptr = omc_NBEquation_EquationPointers_getEqnAt(threadData, _eqns, mmc_unbox_integer(_e));

                _index = mmc_unbox_integer(omc_UnorderedMap_getSafe(threadData, omc_NBEquation_Equation_getEqnName(threadData, _eqn_ptr), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqns), 2))), _OMC_LIT107));

                _occ_set = omc_NBAdjacency_collectDependenciesEquation(threadData, omc_Pointer_access(threadData, _eqn_ptr), _vn, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 4))),_index) /* DAE.ASUB */, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 5))),_index) /* DAE.ASUB */, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 6))),_index) /* DAE.ASUB */);

                arrayUpdate((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 3))),_index,omc_UnorderedSet_union(threadData, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 3))),_index) /* DAE.ASUB */, _occ_set));
              }
            }
          }

          if((!omc_UnorderedMap_isEmpty(threadData, _en)))
          {
            {
              modelica_metatype _e;
              for (tmpMeta17 = omc_UnorderedMap_valueList(threadData, _en); !listEmpty(tmpMeta17); tmpMeta17=MMC_CDR(tmpMeta17))
              {
                _e = MMC_CAR(tmpMeta17);
                _eqn_ptr = omc_NBEquation_EquationPointers_getEqnAt(threadData, _eqns, mmc_unbox_integer(_e));

                _index = mmc_unbox_integer(omc_UnorderedMap_getSafe(threadData, omc_NBEquation_Equation_getEqnName(threadData, _eqn_ptr), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqns), 2))), _OMC_LIT108));

                _occ_set = omc_NBAdjacency_collectDependenciesEquation(threadData, omc_Pointer_access(threadData, _eqn_ptr), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_vars), 2))), arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 4))),_index) /* DAE.ASUB */, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 5))),_index) /* DAE.ASUB */, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 6))),_index) /* DAE.ASUB */);

                arrayUpdate((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 2))),_index,omc_NBEquation_Equation_getEqnName(threadData, _eqn_ptr));

                arrayUpdate((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 3))),_index,_occ_set);
              }
            }
          }
          tmpMeta1 = _full;
          goto tmp11_done;
        }
        case 1: {
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          
          /* Pattern matching succeeded */
          tmpMeta20 = stringAppend(_OMC_LIT109,omc_NBAdjacency_strictnessString(threadData, omc_NBAdjacency_Matrix_getStrictness(threadData, _full)));
          tmpMeta21 = stringAppend(tmpMeta20,_OMC_LIT68);
          tmpMeta19 = mmc_mk_cons(tmpMeta21, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT12, tmpMeta19);
          goto goto_2;
          goto tmp11_done;
        }
        }
        goto tmp11_end;
        tmp11_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp11_done;
      tmp11_done:;
    }
  }
  _full = tmpMeta1;

  if(omc_Flags_isSet(threadData, _OMC_LIT99))
  {
    tmpMeta22 = stringAppend(omc_NBAdjacency_Matrix_toString(threadData, _full, _OMC_LIT110),_OMC_LIT55);
    fputs(MMC_STRINGDATA(tmpMeta22),stdout);
  }
  _return: OMC_LABEL_UNUSED
  return _full;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Matrix_expand(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fadj, modelica_metatype __omcQ_24in_5Ffull, modelica_metatype _vo, modelica_metatype _vn, modelica_metatype _eo, modelica_metatype _en, modelica_metatype _vars, modelica_metatype _eqns, modelica_metatype *out_full)
{
  modelica_metatype _adj = NULL;
  modelica_metatype _full = NULL;
  modelica_integer _size_vo;
  modelica_integer _size_vn;
  modelica_integer _size_eo;
  modelica_integer _size_en;
  modelica_integer tmp1;
  modelica_integer tmp3;
  modelica_integer tmp5;
  modelica_integer tmp7;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  modelica_metatype tmpMeta16;
  modelica_metatype tmpMeta17;
  modelica_metatype tmpMeta18;
  modelica_metatype tmpMeta23;
  modelica_metatype tmpMeta50;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _adj = __omcQ_24in_5Fadj;
  _full = __omcQ_24in_5Ffull;
  // _size_vo has no default value.
  // _size_vn has no default value.
  // _size_eo has no default value.
  // _size_en has no default value.
  if(omc_Flags_isSet(threadData, _OMC_LIT99))
  {
    {
      modelica_integer __omcQ_24tmpVar81;
      modelica_integer __omcQ_24tmpVar80;
      modelica_integer tmp2;
      modelica_metatype _var_loopVar = 0;
      modelica_metatype _var;
      _var_loopVar = omc_UnorderedMap_keyList(threadData, _vo);
      __omcQ_24tmpVar81 = ((modelica_integer) 0); /* defaultValue */
      while(1) {
        tmp2 = 1;
        if (!listEmpty(_var_loopVar)) {
          _var = MMC_CAR(_var_loopVar);
          _var_loopVar = MMC_CDR(_var_loopVar);
          tmp2--;
        }
        if (tmp2 == 0) {
          __omcQ_24tmpVar80 = omc_NFComponentRef_size(threadData, _var, 1 /* true */, 0 /* false */);
          __omcQ_24tmpVar81 = __omcQ_24tmpVar81 + __omcQ_24tmpVar80;
        } else if (tmp2 == 1) {
          break;
        } else {
          MMC_THROW_INTERNAL();
        }
      }
      tmp1 = __omcQ_24tmpVar81;
    }
    _size_vo = tmp1;

    {
      modelica_integer __omcQ_24tmpVar83;
      modelica_integer __omcQ_24tmpVar82;
      modelica_integer tmp4;
      modelica_metatype _var_loopVar = 0;
      modelica_metatype _var;
      _var_loopVar = omc_UnorderedMap_keyList(threadData, _vn);
      __omcQ_24tmpVar83 = ((modelica_integer) 0); /* defaultValue */
      while(1) {
        tmp4 = 1;
        if (!listEmpty(_var_loopVar)) {
          _var = MMC_CAR(_var_loopVar);
          _var_loopVar = MMC_CDR(_var_loopVar);
          tmp4--;
        }
        if (tmp4 == 0) {
          __omcQ_24tmpVar82 = omc_NFComponentRef_size(threadData, _var, 1 /* true */, 0 /* false */);
          __omcQ_24tmpVar83 = __omcQ_24tmpVar83 + __omcQ_24tmpVar82;
        } else if (tmp4 == 1) {
          break;
        } else {
          MMC_THROW_INTERNAL();
        }
      }
      tmp3 = __omcQ_24tmpVar83;
    }
    _size_vn = tmp3 + _size_vo;

    {
      modelica_integer __omcQ_24tmpVar85;
      modelica_integer __omcQ_24tmpVar84;
      modelica_integer tmp6;
      modelica_metatype _eqn_loopVar = 0;
      modelica_metatype _eqn;
      _eqn_loopVar = omc_UnorderedMap_keyList(threadData, _eo);
      __omcQ_24tmpVar85 = ((modelica_integer) 0); /* defaultValue */
      while(1) {
        tmp6 = 1;
        if (!listEmpty(_eqn_loopVar)) {
          _eqn = MMC_CAR(_eqn_loopVar);
          _eqn_loopVar = MMC_CDR(_eqn_loopVar);
          tmp6--;
        }
        if (tmp6 == 0) {
          __omcQ_24tmpVar84 = omc_NFComponentRef_size(threadData, _eqn, 1 /* true */, 0 /* false */);
          __omcQ_24tmpVar85 = __omcQ_24tmpVar85 + __omcQ_24tmpVar84;
        } else if (tmp6 == 1) {
          break;
        } else {
          MMC_THROW_INTERNAL();
        }
      }
      tmp5 = __omcQ_24tmpVar85;
    }
    _size_eo = tmp5;

    {
      modelica_integer __omcQ_24tmpVar87;
      modelica_integer __omcQ_24tmpVar86;
      modelica_integer tmp8;
      modelica_metatype _eqn_loopVar = 0;
      modelica_metatype _eqn;
      _eqn_loopVar = omc_UnorderedMap_keyList(threadData, _en);
      __omcQ_24tmpVar87 = ((modelica_integer) 0); /* defaultValue */
      while(1) {
        tmp8 = 1;
        if (!listEmpty(_eqn_loopVar)) {
          _eqn = MMC_CAR(_eqn_loopVar);
          _eqn_loopVar = MMC_CDR(_eqn_loopVar);
          tmp8--;
        }
        if (tmp8 == 0) {
          __omcQ_24tmpVar86 = omc_NFComponentRef_size(threadData, _eqn, 1 /* true */, 0 /* false */);
          __omcQ_24tmpVar87 = __omcQ_24tmpVar87 + __omcQ_24tmpVar86;
        } else if (tmp8 == 1) {
          break;
        } else {
          MMC_THROW_INTERNAL();
        }
      }
      tmp7 = __omcQ_24tmpVar87;
    }
    _size_en = tmp7 + _size_eo;

    tmpMeta9 = stringAppend(_OMC_LIT111,intString(_size_vo));
    tmpMeta10 = stringAppend(tmpMeta9,_OMC_LIT112);
    tmpMeta11 = stringAppend(tmpMeta10,intString(_size_eo));
    tmpMeta12 = stringAppend(tmpMeta11,_OMC_LIT113);
    tmpMeta13 = stringAppend(tmpMeta12,intString(_size_vn));
    tmpMeta14 = stringAppend(tmpMeta13,_OMC_LIT112);
    tmpMeta15 = stringAppend(tmpMeta14,intString(_size_en));
    tmpMeta16 = stringAppend(tmpMeta15,_OMC_LIT51);
    tmpMeta17 = stringAppend(omc_StringUtil_headline__1(threadData, tmpMeta16),_OMC_LIT55);
    fputs(MMC_STRINGDATA(tmpMeta17),stdout);
  }

  { /* match expression */
    modelica_metatype tmp21_1;
    tmp21_1 = _full;
    {
      volatile mmc_switch_type tmp21;
      int tmp22;
      tmp21 = 0;
      for (; tmp21 < 2; tmp21++) {
        switch (MMC_SWITCH_CAST(tmp21)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp21_1,1,6) == 0) goto tmp20_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(omc_NBEquation_EquationPointers_size(threadData, _eqns) > arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 2)))))) goto tmp20_end;
          tmpMeta18 = omc_NBAdjacency_Matrix_expandFull(threadData, _full, _vo, _vn, _eo, _en, _vars, _eqns);
          goto tmp20_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta18 = _full;
          goto tmp20_done;
        }
        }
        goto tmp20_end;
        tmp20_end: ;
      }
      goto goto_19;
      goto_19:;
      MMC_THROW_INTERNAL();
      goto tmp20_done;
      tmp20_done:;
    }
  }
  _full = tmpMeta18;

  { /* match expression */
    modelica_metatype tmp26_1;modelica_metatype tmp26_2;
    tmp26_1 = _adj;
    tmp26_2 = _full;
    {
      modelica_metatype _new = NULL;
      modelica_integer _rank;
      modelica_metatype _filtered = NULL;
      modelica_metatype _v = NULL;
      volatile mmc_switch_type tmp26;
      int tmp27;
      // _new has no default value.
      // _rank has no default value.
      // _filtered has no default value.
      _v = _vo;
      tmp26 = 0;
      for (; tmp26 < 5; tmp26++) {
        switch (MMC_SWITCH_CAST(tmp26)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp26_1,0,1) == 0) goto tmp25_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp26_2,1,6) == 0) goto tmp25_end;
          
          /* Pattern matching succeeded */
          _new = omc_NBAdjacency_Matrix_initialize(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 7))), mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 2)))));

          if((!omc_NBAdjacency_Matrix_isEmpty(threadData, _new)))
          {
            _new = omc_NBAdjacency_Matrix_expand(threadData, _new, _full, _vo, _vn, _eo, _en, _vars, _eqns, NULL);
          }
          tmpMeta23 = _new;
          goto tmp25_done;
        }
        case 1: {
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_integer tmp34;
          modelica_integer tmp36;
          modelica_metatype tmpMeta38;
          if (mmc__uniontype__metarecord__typedef__equal(tmp26_1,2,5) == 0) goto tmp25_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp26_2,1,6) == 0) goto tmp25_end;
          
          /* Pattern matching succeeded */
          tmpMeta28 = MMC_TAGPTR(mmc_alloc_words(7));
          memcpy(MMC_UNTAGPTR(tmpMeta28), MMC_UNTAGPTR(_adj), 7*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta28))[2] = omc_NBAdjacency_Matrix_expandMatrix(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 2))), omc_NBEquation_EquationPointers_scalarSize(threadData, _eqns, 1 /* true */) - arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 2)))));
          _adj = tmpMeta28;

          tmpMeta29 = MMC_TAGPTR(mmc_alloc_words(7));
          memcpy(MMC_UNTAGPTR(tmpMeta29), MMC_UNTAGPTR(_adj), 7*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta29))[4] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 7)));
          _adj = tmpMeta29;

          _rank = omc_NBAdjacency_Solvability_rank(threadData, omc_NBAdjacency_Solvability_fromStrictness(threadData, omc_NBAdjacency_Matrix_getStrictness(threadData, _adj)));

          if(((!omc_UnorderedMap_isEmpty(threadData, _vn)) && (!omc_UnorderedMap_isEmpty(threadData, _en))))
          {
            _v = omc_UnorderedMap_merge(threadData, _v, _vn, _OMC_LIT114);
          }

          if((!omc_UnorderedMap_isEmpty(threadData, _vn)))
          {
            {
              modelica_metatype _e;
              for (tmpMeta30 = omc_UnorderedMap_valueList(threadData, _eo); !listEmpty(tmpMeta30); tmpMeta30=MMC_CDR(tmpMeta30))
              {
                _e = MMC_CAR(tmpMeta30);
                _filtered = omc_NBAdjacency_Solvability_filter(threadData, omc_UnorderedSet_toList(threadData, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 3))),mmc_unbox_integer(_e)) /* DAE.ASUB */), arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 5))),mmc_unbox_integer(_e)) /* DAE.ASUB */, _vn, ((modelica_integer) 0), _rank);

                omc_NBAdjacency_Matrix_upgradeRow(threadData, omc_NBEquation_EquationPointers_getEqnAt(threadData, _eqns, mmc_unbox_integer(_e)), mmc_unbox_integer(_e), _filtered, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 4))),mmc_unbox_integer(_e)) /* DAE.ASUB */, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 6))),mmc_unbox_integer(_e)) /* DAE.ASUB */, _vn, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_vars), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 5))), _OMC_LIT45);
              }
            }
          }

          if((!omc_UnorderedMap_isEmpty(threadData, _en)))
          {
            {
              modelica_metatype _e;
              for (tmpMeta32 = omc_UnorderedMap_valueList(threadData, _en); !listEmpty(tmpMeta32); tmpMeta32=MMC_CDR(tmpMeta32))
              {
                _e = MMC_CAR(tmpMeta32);
                _filtered = omc_NBAdjacency_Solvability_filter(threadData, omc_UnorderedSet_toList(threadData, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 3))),mmc_unbox_integer(_e)) /* DAE.ASUB */), arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 5))),mmc_unbox_integer(_e)) /* DAE.ASUB */, _v, ((modelica_integer) 0), _rank);

                omc_NBAdjacency_Matrix_upgradeRow(threadData, omc_NBEquation_EquationPointers_getEqnAt(threadData, _eqns, mmc_unbox_integer(_e)), mmc_unbox_integer(_e), _filtered, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 4))),mmc_unbox_integer(_e)) /* DAE.ASUB */, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 6))),mmc_unbox_integer(_e)) /* DAE.ASUB */, _v, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_vars), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 5))), _OMC_LIT45);
              }
            }
          }

          if((omc_UnorderedMap_isEmpty(threadData, _vo) && omc_UnorderedMap_isEmpty(threadData, _vn)))
          {
          }
          else
          {
            {
              modelica_integer __omcQ_24tmpVar89;
              modelica_integer __omcQ_24tmpVar88;
              modelica_integer tmp35;
              modelica_metatype _i_loopVar = 0;
              modelica_metatype _i;
              _i_loopVar = omc_UnorderedMap_valueList(threadData, _vo);
              __omcQ_24tmpVar89 = ((modelica_integer) -4611686018427387903); /* defaultValue */
              while(1) {
                tmp35 = 1;
                if (!listEmpty(_i_loopVar)) {
                  _i = MMC_CAR(_i_loopVar);
                  _i_loopVar = MMC_CDR(_i_loopVar);
                  tmp35--;
                }
                if (tmp35 == 0) {
                  __omcQ_24tmpVar88 = mmc_unbox_integer(_i);
                  __omcQ_24tmpVar89 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar88),(modelica_integer)(__omcQ_24tmpVar89));
                } else if (tmp35 == 1) {
                  break;
                } else {
                  goto goto_24;
                }
              }
              tmp34 = __omcQ_24tmpVar89;
            }
            {
              modelica_integer __omcQ_24tmpVar91;
              modelica_integer __omcQ_24tmpVar90;
              modelica_integer tmp37;
              modelica_metatype _i_loopVar = 0;
              modelica_metatype _i;
              _i_loopVar = omc_UnorderedMap_valueList(threadData, _vn);
              __omcQ_24tmpVar91 = ((modelica_integer) -4611686018427387903); /* defaultValue */
              while(1) {
                tmp37 = 1;
                if (!listEmpty(_i_loopVar)) {
                  _i = MMC_CAR(_i_loopVar);
                  _i_loopVar = MMC_CDR(_i_loopVar);
                  tmp37--;
                }
                if (tmp37 == 0) {
                  __omcQ_24tmpVar90 = mmc_unbox_integer(_i);
                  __omcQ_24tmpVar91 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar90),(modelica_integer)(__omcQ_24tmpVar91));
                } else if (tmp37 == 1) {
                  break;
                } else {
                  goto goto_24;
                }
              }
              tmp36 = __omcQ_24tmpVar91;
            }
            modelica_integer_max((modelica_integer)(tmp34),(modelica_integer)(tmp36));
          }

          tmpMeta38 = MMC_TAGPTR(mmc_alloc_words(7));
          memcpy(MMC_UNTAGPTR(tmpMeta38), MMC_UNTAGPTR(_adj), 7*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta38))[3] = omc_NBAdjacency_Matrix_transposeScalar(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 2))), omc_NBVariable_VariablePointers_scalarSize(threadData, _vars, 1 /* true */));
          _adj = tmpMeta38;
          tmpMeta23 = _adj;
          goto tmp25_done;
        }
        case 2: {
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          modelica_metatype tmpMeta41;
          if (mmc__uniontype__metarecord__typedef__equal(tmp26_1,2,5) == 0) goto tmp25_end;
          
          /* Pattern matching succeeded */
          tmpMeta40 = stringAppend(_OMC_LIT115,omc_NBAdjacency_strictnessString(threadData, omc_NBAdjacency_Matrix_getStrictness(threadData, _full)));
          tmpMeta41 = stringAppend(tmpMeta40,_OMC_LIT68);
          tmpMeta39 = mmc_mk_cons(tmpMeta41, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT12, tmpMeta39);
          goto goto_24;
          goto tmp25_done;
        }
        case 3: {
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          modelica_metatype tmpMeta44;
          if (mmc__uniontype__metarecord__typedef__equal(tmp26_2,1,6) == 0) goto tmp25_end;
          
          /* Pattern matching succeeded */
          tmpMeta43 = stringAppend(_OMC_LIT116,omc_NBAdjacency_strictnessString(threadData, omc_NBAdjacency_Matrix_getStrictness(threadData, _adj)));
          tmpMeta44 = stringAppend(tmpMeta43,_OMC_LIT117);
          tmpMeta42 = mmc_mk_cons(tmpMeta44, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT12, tmpMeta42);
          goto goto_24;
          goto tmp25_done;
        }
        case 4: {
          modelica_metatype tmpMeta45;
          modelica_metatype tmpMeta46;
          modelica_metatype tmpMeta47;
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta49;
          
          /* Pattern matching succeeded */
          tmpMeta46 = stringAppend(_OMC_LIT118,omc_NBAdjacency_strictnessString(threadData, omc_NBAdjacency_Matrix_getStrictness(threadData, _adj)));
          tmpMeta47 = stringAppend(tmpMeta46,_OMC_LIT93);
          tmpMeta48 = stringAppend(tmpMeta47,omc_NBAdjacency_strictnessString(threadData, omc_NBAdjacency_Matrix_getStrictness(threadData, _full)));
          tmpMeta49 = stringAppend(tmpMeta48,_OMC_LIT68);
          tmpMeta45 = mmc_mk_cons(tmpMeta49, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT12, tmpMeta45);
          goto goto_24;
          goto tmp25_done;
        }
        }
        goto tmp25_end;
        tmp25_end: ;
      }
      goto goto_24;
      goto_24:;
      MMC_THROW_INTERNAL();
      goto tmp25_done;
      tmp25_done:;
    }
  }
  _adj = tmpMeta23;

  if(omc_Flags_isSet(threadData, _OMC_LIT99))
  {
    tmpMeta50 = stringAppend(omc_NBAdjacency_Matrix_toString(threadData, _adj, _OMC_LIT119),_OMC_LIT55);
    fputs(MMC_STRINGDATA(tmpMeta50),stdout);
  }
  _return: OMC_LABEL_UNUSED
  if (out_full) { *out_full = _full; }
  return _adj;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Matrix_upgrade(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fadj, modelica_metatype _full, modelica_metatype _vars_map, modelica_metatype _eqns_map, modelica_metatype _eqns, modelica_integer _st, modelica_metatype _iter)
{
  modelica_metatype _adj = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta34;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _adj = __omcQ_24in_5Fadj;
  if(omc_Flags_isSet(threadData, _OMC_LIT99))
  {
    tmpMeta1 = stringAppend(_OMC_LIT120,omc_NBAdjacency_strictnessString(threadData, omc_NBAdjacency_Matrix_getStrictness(threadData, _adj)));
    tmpMeta2 = stringAppend(tmpMeta1,_OMC_LIT121);
    tmpMeta3 = stringAppend(tmpMeta2,omc_NBAdjacency_strictnessString(threadData, (modelica_integer)_st));
    tmpMeta4 = stringAppend(tmpMeta3,_OMC_LIT51);
    tmpMeta5 = stringAppend(omc_StringUtil_headline__1(threadData, tmpMeta4),_OMC_LIT55);
    fputs(MMC_STRINGDATA(tmpMeta5),stdout);
  }

  { /* match expression */
    modelica_metatype tmp9_1;
    tmp9_1 = _full;
    {
      modelica_integer _min;
      modelica_integer _max;
      int tmp9;
      // _min has no default value.
      // _max has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp9_1))) {
        case 3: {
          modelica_metatype tmpMeta10;
          
          /* Pattern matching succeeded */
          tmpMeta10 = mmc_mk_box2(3, &NBAdjacency_Matrix_EMPTY__desc, mmc_mk_integer((modelica_integer)_st));
          tmpMeta6 = tmpMeta10;
          goto tmp8_done;
        }
        case 4: {
          modelica_metatype tmpMeta11;
          
          /* Pattern matching succeeded */
          if(omc_NBAdjacency_Matrix_isEmpty(threadData, _adj))
          {
            _min = ((modelica_integer) 0);

            _adj = omc_NBAdjacency_Matrix_initialize(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 7))), (modelica_integer)_st);
          }
          else
          {
            _min = omc_NBAdjacency_Solvability_rank(threadData, omc_NBAdjacency_Solvability_fromStrictness(threadData, omc_NBAdjacency_Matrix_getStrictness(threadData, _adj)));
          }

          _max = omc_NBAdjacency_Solvability_rank(threadData, omc_NBAdjacency_Solvability_fromStrictness(threadData, (modelica_integer)_st));
          { /* match expression */
            modelica_metatype tmp14_1;
            tmp14_1 = _adj;
            {
              modelica_metatype _result = NULL;
              modelica_metatype _filtered = NULL;
              modelica_metatype _occ = NULL;
              modelica_metatype _dep = NULL;
              modelica_metatype _sol = NULL;
              modelica_metatype _rep = NULL;
              int tmp14;
              // _result has no default value.
              // _filtered has no default value.
              // _occ has no default value.
              // _dep has no default value.
              // _sol has no default value.
              // _rep has no default value.
              {
                switch (MMC_SWITCH_CAST(valueConstructor(tmp14_1))) {
                case 5: {
                  modelica_metatype tmpMeta15;
                  modelica_metatype tmpMeta16;
                  modelica_metatype tmpMeta17;
                  modelica_metatype tmpMeta18;
                  modelica_metatype tmpMeta19;
                  modelica_metatype tmpMeta20;
                  modelica_metatype tmpMeta21;
                  modelica_metatype tmpMeta22;
                  modelica_metatype tmpMeta23;
                  modelica_metatype tmpMeta24;
                  modelica_metatype tmpMeta25;
                  modelica_metatype tmpMeta26;
                  modelica_metatype tmpMeta27;
                  
                  /* Pattern matching succeeded */
                  if((_max == _min))
                  {
                    _result = _adj;
                  }
                  else
                  {
                    if((_max > _min))
                    {
                      /* Pattern-matching assignment */
                      tmpMeta15 = mmc_mk_box4(0, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 5))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_full), 6))));
                      tmpMeta16 = tmpMeta15;
                      tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 1));
                      tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
                      tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 3));
                      tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 4));
                      _occ = tmpMeta17;
                      _dep = tmpMeta18;
                      _sol = tmpMeta19;
                      _rep = tmpMeta20;

                      {
                        modelica_metatype _index;
                        for (tmpMeta21 = omc_UnorderedMap_valueList(threadData, _eqns_map); !listEmpty(tmpMeta21); tmpMeta21=MMC_CDR(tmpMeta21))
                        {
                          _index = MMC_CAR(tmpMeta21);
                          _filtered = omc_NBAdjacency_Solvability_filter(threadData, omc_UnorderedSet_toList(threadData, arrayGet(_occ,mmc_unbox_integer(_index)) /* DAE.ASUB */), arrayGet(_sol,mmc_unbox_integer(_index)) /* DAE.ASUB */, _vars_map, _min, _max);

                          omc_NBAdjacency_Matrix_upgradeRow(threadData, omc_NBEquation_EquationPointers_getEqnAt(threadData, _eqns, mmc_unbox_integer(_index)), mmc_unbox_integer(_index), _filtered, arrayGet(_dep,mmc_unbox_integer(_index)) /* DAE.ASUB */, arrayGet(_rep,mmc_unbox_integer(_index)) /* DAE.ASUB */, _vars_map, _vars_map, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 5))), _iter);
                        }
                      }

                      tmpMeta23 = MMC_TAGPTR(mmc_alloc_words(7));
                      memcpy(MMC_UNTAGPTR(tmpMeta23), MMC_UNTAGPTR(_adj), 7*sizeof(modelica_metatype));
                      ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta23))[3] = omc_NBAdjacency_Matrix_transposeScalar(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 2))), arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_adj), 4)))), 3)))));
                      _adj = tmpMeta23;

                      _result = _adj;
                    }
                    else
                    {
                      if(omc_Flags_isSet(threadData, _OMC_LIT38))
                      {
                        tmpMeta24 = stringAppend(_OMC_LIT122,omc_NBAdjacency_Solvability_toString(threadData, omc_NBAdjacency_Solvability_fromStrictness(threadData, omc_NBAdjacency_Matrix_getStrictness(threadData, _adj))));
                        tmpMeta25 = stringAppend(tmpMeta24,_OMC_LIT123);
                        tmpMeta26 = stringAppend(tmpMeta25,omc_NBAdjacency_Solvability_toString(threadData, omc_NBAdjacency_Solvability_fromStrictness(threadData, (modelica_integer)_st)));
                        tmpMeta27 = stringAppend(tmpMeta26,_OMC_LIT124);
                        omc_Error_addCompilerWarning(threadData, tmpMeta27);
                      }

                      _result = omc_NBAdjacency_Matrix_fromFull(threadData, _full, _vars_map, _eqns_map, _eqns, (modelica_integer)_st, _iter);
                    }
                  }
                  tmpMeta11 = _result;
                  goto tmp13_done;
                }
                case 3: {
                  
                  /* Pattern matching succeeded */
                  tmpMeta11 = _adj;
                  goto tmp13_done;
                }
                case 4: {
                  modelica_metatype tmpMeta28;
                  modelica_metatype tmpMeta29;
                  modelica_metatype tmpMeta30;
                  
                  /* Pattern matching succeeded */
                  tmpMeta29 = stringAppend(_OMC_LIT125,omc_NBAdjacency_strictnessString(threadData, omc_NBAdjacency_Matrix_getStrictness(threadData, _adj)));
                  tmpMeta30 = stringAppend(tmpMeta29,_OMC_LIT68);
                  tmpMeta28 = mmc_mk_cons(tmpMeta30, MMC_REFSTRUCTLIT(mmc_nil));
                  omc_Error_addMessage(threadData, _OMC_LIT12, tmpMeta28);
                  goto goto_12;
                  goto tmp13_done;
                }
                }
                goto tmp13_end;
                tmp13_end: ;
              }
              goto goto_12;
              goto_12:;
              goto goto_7;
              goto tmp13_done;
              tmp13_done:;
            }
          }tmpMeta6 = tmpMeta11;
          goto tmp8_done;
        }
        default:
        tmp8_default: OMC_LABEL_UNUSED; {
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          
          /* Pattern matching succeeded */
          tmpMeta32 = stringAppend(_OMC_LIT126,omc_NBAdjacency_strictnessString(threadData, omc_NBAdjacency_Matrix_getStrictness(threadData, _full)));
          tmpMeta33 = stringAppend(tmpMeta32,_OMC_LIT68);
          tmpMeta31 = mmc_mk_cons(tmpMeta33, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT12, tmpMeta31);
          goto goto_7;
          goto tmp8_done;
        }
        }
        goto tmp8_end;
        tmp8_end: ;
      }
      goto goto_7;
      goto_7:;
      MMC_THROW_INTERNAL();
      goto tmp8_done;
      tmp8_done:;
    }
  }
  _adj = tmpMeta6;

  if(omc_Flags_isSet(threadData, _OMC_LIT99))
  {
    tmpMeta34 = stringAppend(omc_NBAdjacency_Matrix_toString(threadData, _adj, _OMC_LIT127),_OMC_LIT55);
    fputs(MMC_STRINGDATA(tmpMeta34),stdout);
  }
  _return: OMC_LABEL_UNUSED
  return _adj;
}
modelica_metatype boxptr_NBAdjacency_Matrix_upgrade(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fadj, modelica_metatype _full, modelica_metatype _vars_map, modelica_metatype _eqns_map, modelica_metatype _eqns, modelica_metatype _st, modelica_metatype _iter)
{
  modelica_integer tmp1;
  modelica_metatype _adj = NULL;
  tmp1 = mmc_unbox_integer(_st);
  _adj = omc_NBAdjacency_Matrix_upgrade(threadData, __omcQ_24in_5Fadj, _full, _vars_map, _eqns_map, _eqns, tmp1, _iter);
  /* skip box _adj; NBAdjacency.Matrix */
  return _adj;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Matrix_fromFull(threadData_t *threadData, modelica_metatype _full, modelica_metatype _vars_map, modelica_metatype _eqns_map, modelica_metatype _eqns, modelica_integer _st, modelica_metatype _iter)
{
  modelica_metatype _adj = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _adj = omc_NBAdjacency_Matrix_upgrade(threadData, _OMC_LIT128, _full, _vars_map, _eqns_map, _eqns, (modelica_integer)_st, _iter);
  _return: OMC_LABEL_UNUSED
  return _adj;
}
modelica_metatype boxptr_NBAdjacency_Matrix_fromFull(threadData_t *threadData, modelica_metatype _full, modelica_metatype _vars_map, modelica_metatype _eqns_map, modelica_metatype _eqns, modelica_metatype _st, modelica_metatype _iter)
{
  modelica_integer tmp1;
  modelica_metatype _adj = NULL;
  tmp1 = mmc_unbox_integer(_st);
  _adj = omc_NBAdjacency_Matrix_fromFull(threadData, _full, _vars_map, _eqns_map, _eqns, tmp1, _iter);
  /* skip box _adj; NBAdjacency.Matrix */
  return _adj;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Matrix_createFull(threadData_t *threadData, modelica_metatype _vars, modelica_metatype _eqns)
{
  modelica_metatype _adj = NULL;
  modelica_integer _index;
  modelica_integer _size;
  modelica_metatype _equation_names = NULL;
  modelica_metatype _occurences = NULL;
  modelica_metatype _dependencies = NULL;
  modelica_metatype _solvabilities = NULL;
  modelica_metatype _repetitions = NULL;
  modelica_metatype _occ_set = NULL;
  modelica_metatype _rep_set = NULL;
  modelica_metatype _dep_map = NULL;
  modelica_metatype _sol_map = NULL;
  modelica_metatype _mapping = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _adj has no default value.
  // _index has no default value.
  _size = omc_NBEquation_EquationPointers_size(threadData, _eqns);
  // _equation_names has no default value.
  // _occurences has no default value.
  // _dependencies has no default value.
  // _solvabilities has no default value.
  // _repetitions has no default value.
  // _occ_set has no default value.
  // _rep_set has no default value.
  // _dep_map has no default value.
  // _sol_map has no default value.
  // _mapping has no default value.
  if(((omc_ExpandableArray_getNumberOfElements(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_vars), 3)))) > ((modelica_integer) 0)) || (omc_ExpandableArray_getNumberOfElements(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqns), 3)))) > ((modelica_integer) 0))))
  {
    _equation_names = arrayCreate(_size, _OMC_LIT86);

    _occurences = arrayCreate(_size, omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13)));

    _dependencies = arrayCreate(_size, omc_UnorderedMap_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 1)));

    _solvabilities = arrayCreate(_size, omc_UnorderedMap_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 1)));

    _repetitions = arrayCreate(_size, omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13)));

    {
      modelica_metatype _eqn_ptr;
      for (tmpMeta1 = omc_NBEquation_EquationPointers_toList(threadData, _eqns); !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
      {
        _eqn_ptr = MMC_CAR(tmpMeta1);
        _index = mmc_unbox_integer(omc_UnorderedMap_getSafe(threadData, omc_NBEquation_Equation_getEqnName(threadData, _eqn_ptr), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqns), 2))), _OMC_LIT129));

        _dep_map = omc_UnorderedMap_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 1));

        _sol_map = omc_UnorderedMap_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 1));

        _rep_set = omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13));

        _occ_set = omc_NBAdjacency_collectDependenciesEquation(threadData, omc_Pointer_access(threadData, _eqn_ptr), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_vars), 2))), _dep_map, _sol_map, _rep_set);

        arrayUpdate(_equation_names,_index,omc_NBEquation_Equation_getEqnName(threadData, _eqn_ptr));

        arrayUpdate(_occurences,_index,_occ_set);

        arrayUpdate(_dependencies,_index,_dep_map);

        arrayUpdate(_solvabilities,_index,_sol_map);

        arrayUpdate(_repetitions,_index,_rep_set);
      }
    }

    _mapping = omc_NBAdjacency_Mapping_create(threadData, _eqns, _vars);

    tmpMeta3 = mmc_mk_box7(4, &NBAdjacency_Matrix_FULL__desc, _equation_names, _occurences, _dependencies, _solvabilities, _repetitions, _mapping);
    _adj = tmpMeta3;
  }
  else
  {
    _adj = _OMC_LIT128;
  }

  if(omc_Flags_isSet(threadData, _OMC_LIT99))
  {
    tmpMeta4 = stringAppend(omc_StringUtil_headline__1(threadData, _OMC_LIT130),_OMC_LIT55);
    fputs(MMC_STRINGDATA(tmpMeta4),stdout);

    tmpMeta5 = stringAppend(omc_NBEquation_EquationPointers_toString(threadData, _eqns, _OMC_LIT41, mmc_mk_none(), 1 /* true */, mmc_mk_none()),_OMC_LIT55);
    fputs(MMC_STRINGDATA(tmpMeta5),stdout);

    tmpMeta6 = stringAppend(omc_NBVariable_VariablePointers_toString(threadData, _vars, _OMC_LIT41, mmc_mk_none(), 1 /* true */),_OMC_LIT55);
    fputs(MMC_STRINGDATA(tmpMeta6),stdout);

    tmpMeta7 = stringAppend(omc_NBAdjacency_Matrix_toString(threadData, _adj, _OMC_LIT131),_OMC_LIT55);
    fputs(MMC_STRINGDATA(tmpMeta7),stdout);

    tmpMeta8 = stringAppend(omc_NBAdjacency_Matrix_solvabilityString(threadData, _adj, _OMC_LIT131),_OMC_LIT55);
    fputs(MMC_STRINGDATA(tmpMeta8),stdout);

    tmpMeta9 = stringAppend(omc_NBAdjacency_Matrix_dependencyString(threadData, _adj, _OMC_LIT131),_OMC_LIT55);
    fputs(MMC_STRINGDATA(tmpMeta9),stdout);
  }
  _return: OMC_LABEL_UNUSED
  return _adj;
}

DLLDirection
modelica_boolean omc_NBAdjacency_Mode_keyEqual(threadData_t *threadData, modelica_metatype _key1, modelica_metatype _key2)
{
  modelica_boolean _b;
  modelica_integer _e1;
  modelica_integer _e2;
  modelica_integer _v1;
  modelica_integer _v2;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_metatype tmpMeta4;
  modelica_integer tmp5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_integer tmp8;
  modelica_metatype tmpMeta9;
  modelica_integer tmp10;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _b has no default value.
  // _e1 has no default value.
  // _e2 has no default value.
  // _v1 has no default value.
  // _v2 has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _key1;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
  tmp3 = mmc_unbox_integer(tmpMeta2);
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmp5 = mmc_unbox_integer(tmpMeta4);
  _e1 = tmp3  /* pattern as ty=Integer */;
  _v1 = tmp5  /* pattern as ty=Integer */;

  /* Pattern-matching assignment */
  tmpMeta6 = _key2;
  tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
  tmp8 = mmc_unbox_integer(tmpMeta7);
  tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
  tmp10 = mmc_unbox_integer(tmpMeta9);
  _e2 = tmp8  /* pattern as ty=Integer */;
  _v2 = tmp10  /* pattern as ty=Integer */;

  _b = ((_e1 == _e2) && (_v1 == _v2));
  _return: OMC_LABEL_UNUSED
  return _b;
}
modelica_metatype boxptr_NBAdjacency_Mode_keyEqual(threadData_t *threadData, modelica_metatype _key1, modelica_metatype _key2)
{
  modelica_boolean _b;
  modelica_metatype out_b;
  _b = omc_NBAdjacency_Mode_keyEqual(threadData, _key1, _key2);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

DLLDirection
modelica_integer omc_NBAdjacency_Mode_keyHash(threadData_t *threadData, modelica_metatype _key)
{
  modelica_integer _hash;
  modelica_integer _e;
  modelica_integer _v;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_metatype tmpMeta4;
  modelica_integer tmp5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _hash has no default value.
  // _e has no default value.
  // _v has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _key;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
  tmp3 = mmc_unbox_integer(tmpMeta2);
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmp5 = mmc_unbox_integer(tmpMeta4);
  _e = tmp3  /* pattern as ty=Integer */;
  _v = tmp5  /* pattern as ty=Integer */;

  _hash = (((modelica_integer) 31)) * (_e) + _v;
  _return: OMC_LABEL_UNUSED
  return _hash;
}
modelica_metatype boxptr_NBAdjacency_Mode_keyHash(threadData_t *threadData, modelica_metatype _key)
{
  modelica_integer _hash;
  modelica_metatype out_hash;
  _hash = omc_NBAdjacency_Mode_keyHash(threadData, _key);
  out_hash = mmc_mk_icon(_hash);
  return out_hash;
}

DLLDirection
modelica_string omc_NBAdjacency_Mode_keyString(threadData_t *threadData, modelica_metatype _key)
{
  modelica_string _str = NULL;
  modelica_integer _e;
  modelica_integer _v;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_metatype tmpMeta4;
  modelica_integer tmp5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _str has no default value.
  // _e has no default value.
  // _v has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _key;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
  tmp3 = mmc_unbox_integer(tmpMeta2);
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmp5 = mmc_unbox_integer(tmpMeta4);
  _e = tmp3  /* pattern as ty=Integer */;
  _v = tmp5  /* pattern as ty=Integer */;

  tmpMeta6 = stringAppend(intString(_e),_OMC_LIT62);
  tmpMeta7 = stringAppend(tmpMeta6,intString(_v));
  _str = tmpMeta7;
  _return: OMC_LABEL_UNUSED
  return _str;
}

static modelica_metatype closure8_NBAdjacency_Mode_merge(threadData_t *thData, modelica_metatype closure, modelica_metatype mode2)
{
  modelica_metatype mode1 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NBAdjacency_Mode_merge(thData, mode1, mode2);
}
DLLDirection
modelica_metatype omc_NBAdjacency_Mode_mergeCreate(threadData_t *threadData, modelica_metatype _omode, modelica_metatype __omcQ_24in_5Fmode)
{
  modelica_metatype _mode = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _mode = __omcQ_24in_5Fmode;
  tmpMeta1 = mmc_mk_box1(0, _mode);
  _mode = omc_Util_applyOptionOrDefault(threadData, _omode, (modelica_fnptr) mmc_mk_box2(0,closure8_NBAdjacency_Mode_merge,tmpMeta1), _mode);
  _return: OMC_LABEL_UNUSED
  return _mode;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Mode_merge(threadData_t *threadData, modelica_metatype _mode1, modelica_metatype _mode2)
{
  modelica_metatype _oMode = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = mmc_mk_box4(3, &NBAdjacency_Mode_MODE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mode1), 2))), listAppend((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mode1), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mode2), 3)))), mmc_mk_boolean((mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mode1), 4)))) || mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mode2), 4)))))));
  _oMode = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _oMode;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Mode_create(threadData_t *threadData, modelica_metatype _eqn_name, modelica_metatype _crefs, modelica_boolean _scalarize)
{
  modelica_metatype _mode = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  {
    modelica_metatype __omcQ_24tmpVar93;
    modelica_metatype* tmp2;
    modelica_metatype tmpMeta3;
    modelica_metatype __omcQ_24tmpVar92;
    modelica_integer tmp4;
    modelica_metatype _cref_loopVar = 0;
    modelica_metatype _cref;
    _cref_loopVar = _crefs;
    tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar93 = tmpMeta3; /* defaultValue */
    tmp2 = &__omcQ_24tmpVar93;
    while(1) {
      tmp4 = 1;
      if (!listEmpty(_cref_loopVar)) {
        _cref = MMC_CAR(_cref_loopVar);
        _cref_loopVar = MMC_CDR(_cref_loopVar);
        tmp4--;
      }
      if (tmp4 == 0) {
        __omcQ_24tmpVar92 = omc_NFComponentRef_simplifySubscripts(threadData, _cref, 0 /* false */);
        *tmp2 = mmc_mk_cons(__omcQ_24tmpVar92,0);
        tmp2 = &MMC_CDR(*tmp2);
      } else if (tmp4 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp2 = mmc_mk_nil();
    tmpMeta1 = __omcQ_24tmpVar93;
  }
  tmpMeta5 = mmc_mk_box4(3, &NBAdjacency_Mode_MODE__desc, _eqn_name, tmpMeta1, mmc_mk_boolean(_scalarize));
  _mode = tmpMeta5;
  _return: OMC_LABEL_UNUSED
  return _mode;
}
modelica_metatype boxptr_NBAdjacency_Mode_create(threadData_t *threadData, modelica_metatype _eqn_name, modelica_metatype _crefs, modelica_metatype _scalarize)
{
  modelica_integer tmp1;
  modelica_metatype _mode = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta6;
  tmp1 = mmc_unbox_integer(_scalarize);
  _mode = omc_NBAdjacency_Mode_create(threadData, _eqn_name, _crefs, tmp1);
  /* skip box _mode; NBAdjacency.Mode */
  return _mode;
}

DLLDirection
modelica_boolean omc_NBAdjacency_Mode_isEqual(threadData_t *threadData, modelica_metatype _mode1, modelica_metatype _mode2)
{
  modelica_boolean _b;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _b = ((omc_NFComponentRef_isEqual(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mode1), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mode2), 2)))) && (!mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mode1), 4)))) == !mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mode2), 4)))))) && omc_List_isEqualOnTrue(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mode1), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mode2), 3))), boxvar_NFComponentRef_isEqual));
  _return: OMC_LABEL_UNUSED
  return _b;
}
modelica_metatype boxptr_NBAdjacency_Mode_isEqual(threadData_t *threadData, modelica_metatype _mode1, modelica_metatype _mode2)
{
  modelica_boolean _b;
  modelica_metatype out_b;
  _b = omc_NBAdjacency_Mode_isEqual(threadData, _mode1, _mode2);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

DLLDirection
modelica_integer omc_NBAdjacency_Mode_hash(threadData_t *threadData, modelica_metatype _mode)
{
  modelica_integer _hash;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _hash = omc_NFComponentRef_hash(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mode), 2))));
  _return: OMC_LABEL_UNUSED
  return _hash;
}
modelica_metatype boxptr_NBAdjacency_Mode_hash(threadData_t *threadData, modelica_metatype _mode)
{
  modelica_integer _hash;
  modelica_metatype out_hash;
  _hash = omc_NBAdjacency_Mode_hash(threadData, _mode);
  out_hash = mmc_mk_icon(_hash);
  return out_hash;
}

DLLDirection
modelica_string omc_NBAdjacency_Mode_toString(threadData_t *threadData, modelica_metatype _mode)
{
  modelica_string _str = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = stringAppend(_OMC_LIT132,omc_NFComponentRef_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mode), 2)))));
  tmpMeta2 = stringAppend(tmpMeta1,_OMC_LIT133);
  tmpMeta3 = stringAppend(tmpMeta2,omc_List_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mode), 3))), boxvar_NFComponentRef_toString, _OMC_LIT41, _OMC_LIT42, _OMC_LIT43, _OMC_LIT44, 1 /* true */, ((modelica_integer) 0)));
  tmpMeta4 = stringAppend(tmpMeta3,_OMC_LIT134);
  tmpMeta5 = stringAppend(tmpMeta4,(mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mode), 4))))?_OMC_LIT135:_OMC_LIT136));
  tmpMeta6 = stringAppend(tmpMeta5,_OMC_LIT51);
  _str = tmpMeta6;
  _return: OMC_LABEL_UNUSED
  return _str;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBAdjacency_Mapping_fill__(threadData_t *threadData, modelica_metatype __omcQ_24in_5Feqn_5FStA, modelica_metatype __omcQ_24in_5Fvar_5FStA, modelica_metatype __omcQ_24in_5Feqn_5FAtS, modelica_metatype __omcQ_24in_5Fvar_5FAtS, modelica_metatype _eqn_lst, modelica_metatype _var_lst, modelica_integer _eqn_idx_scal_start, modelica_integer _eqn_idx_arr_start, modelica_integer _var_idx_scal_start, modelica_integer _var_idx_arr_start, modelica_metatype *out_var_StA, modelica_metatype *out_eqn_AtS, modelica_metatype *out_var_AtS)
{
  modelica_metatype _eqn_StA = NULL;
  modelica_metatype _var_StA = NULL;
  modelica_metatype _eqn_AtS = NULL;
  modelica_metatype _var_AtS = NULL;
  modelica_integer _size;
  modelica_integer _eqn_idx_scal;
  modelica_integer _eqn_idx_arr;
  modelica_integer _var_idx_scal;
  modelica_integer _var_idx_arr;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_integer tmp4;
  modelica_integer tmp5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_integer tmp9;
  modelica_integer tmp10;
  modelica_integer tmp11;
  modelica_metatype tmpMeta12;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _eqn_StA = __omcQ_24in_5Feqn_5FStA;
  _var_StA = __omcQ_24in_5Fvar_5FStA;
  _eqn_AtS = __omcQ_24in_5Feqn_5FAtS;
  _var_AtS = __omcQ_24in_5Fvar_5FAtS;
  // _size has no default value.
  _eqn_idx_scal = _eqn_idx_scal_start;
  _eqn_idx_arr = _eqn_idx_arr_start;
  _var_idx_scal = _var_idx_scal_start;
  _var_idx_arr = _var_idx_arr_start;
  {
    modelica_metatype _eqn_ptr;
    for (tmpMeta1 = _eqn_lst; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _eqn_ptr = MMC_CAR(tmpMeta1);
      _size = omc_NBEquation_Equation_size(threadData, _eqn_ptr, 1 /* true */);

      tmpMeta2 = mmc_mk_box2(0, mmc_mk_integer(_eqn_idx_scal), mmc_mk_integer(_size));
      arrayUpdate(_eqn_AtS,_eqn_idx_arr,tmpMeta2);

      tmp3 = _eqn_idx_scal; tmp4 = 1; tmp5 = ((modelica_integer) -1) + _eqn_idx_scal + _size;
      if(!(((tmp4 > 0) && (tmp3 > tmp5)) || ((tmp4 < 0) && (tmp3 < tmp5))))
      {
        modelica_integer _i;
        for(_i = _eqn_idx_scal; in_range_integer(_i, tmp3, tmp5); _i += tmp4)
        {
          arrayUpdate(_eqn_StA,_i,mmc_mk_integer(_eqn_idx_arr));
        }
      }

      _eqn_idx_scal = _eqn_idx_scal + _size;

      _eqn_idx_arr = ((modelica_integer) 1) + _eqn_idx_arr;
    }
  }

  {
    modelica_metatype _var_ptr;
    for (tmpMeta7 = _var_lst; !listEmpty(tmpMeta7); tmpMeta7=MMC_CDR(tmpMeta7))
    {
      _var_ptr = MMC_CAR(tmpMeta7);
      _size = omc_NBVariable_size(threadData, _var_ptr, 1 /* true */);

      tmpMeta8 = mmc_mk_box2(0, mmc_mk_integer(_var_idx_scal), mmc_mk_integer(_size));
      arrayUpdate(_var_AtS,_var_idx_arr,tmpMeta8);

      tmp9 = _var_idx_scal; tmp10 = 1; tmp11 = ((modelica_integer) -1) + _var_idx_scal + _size;
      if(!(((tmp10 > 0) && (tmp9 > tmp11)) || ((tmp10 < 0) && (tmp9 < tmp11))))
      {
        modelica_integer _i;
        for(_i = _var_idx_scal; in_range_integer(_i, tmp9, tmp11); _i += tmp10)
        {
          arrayUpdate(_var_StA,_i,mmc_mk_integer(_var_idx_arr));
        }
      }

      _var_idx_scal = _var_idx_scal + _size;

      _var_idx_arr = ((modelica_integer) 1) + _var_idx_arr;
    }
  }
  _return: OMC_LABEL_UNUSED
  if (out_var_StA) { *out_var_StA = _var_StA; }
  if (out_eqn_AtS) { *out_eqn_AtS = _eqn_AtS; }
  if (out_var_AtS) { *out_var_AtS = _var_AtS; }
  return _eqn_StA;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBAdjacency_Mapping_fill__(threadData_t *threadData, modelica_metatype __omcQ_24in_5Feqn_5FStA, modelica_metatype __omcQ_24in_5Fvar_5FStA, modelica_metatype __omcQ_24in_5Feqn_5FAtS, modelica_metatype __omcQ_24in_5Fvar_5FAtS, modelica_metatype _eqn_lst, modelica_metatype _var_lst, modelica_metatype _eqn_idx_scal_start, modelica_metatype _eqn_idx_arr_start, modelica_metatype _var_idx_scal_start, modelica_metatype _var_idx_arr_start, modelica_metatype *out_var_StA, modelica_metatype *out_eqn_AtS, modelica_metatype *out_var_AtS)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer tmp3;
  modelica_integer tmp4;
  modelica_metatype _eqn_StA = NULL;
  tmp1 = mmc_unbox_integer(_eqn_idx_scal_start);
  tmp2 = mmc_unbox_integer(_eqn_idx_arr_start);
  tmp3 = mmc_unbox_integer(_var_idx_scal_start);
  tmp4 = mmc_unbox_integer(_var_idx_arr_start);
  _eqn_StA = omc_NBAdjacency_Mapping_fill__(threadData, __omcQ_24in_5Feqn_5FStA, __omcQ_24in_5Fvar_5FStA, __omcQ_24in_5Feqn_5FAtS, __omcQ_24in_5Fvar_5FAtS, _eqn_lst, _var_lst, tmp1, tmp2, tmp3, tmp4, out_var_StA, out_eqn_AtS, out_var_AtS);
  /* skip box _eqn_StA; array<#Integer> */
  /* skip box _var_StA; array<#Integer> */
  /* skip box _eqn_AtS; array<tuple<#Integer, #Integer>> */
  /* skip box _var_AtS; array<tuple<#Integer, #Integer>> */
  return _eqn_StA;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBAdjacency_Mapping_getVarScalIndices_subscriptedIndices(threadData_t *threadData, modelica_integer _start, modelica_integer _length, modelica_metatype _slice)
{
  modelica_metatype _scal_indices = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _scal_indices has no default value.
  _scal_indices = omc_List_intRange2(threadData, _start, ((modelica_integer) -1) + _start + _length);

  if((!listEmpty(_slice)))
  {
    _scal_indices = omc_List_keepPositions(threadData, _scal_indices, _slice);
  }
  _return: OMC_LABEL_UNUSED
  return _scal_indices;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBAdjacency_Mapping_getVarScalIndices_subscriptedIndices(threadData_t *threadData, modelica_metatype _start, modelica_metatype _length, modelica_metatype _slice)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _scal_indices = NULL;
  tmp1 = mmc_unbox_integer(_start);
  tmp2 = mmc_unbox_integer(_length);
  _scal_indices = omc_NBAdjacency_Mapping_getVarScalIndices_subscriptedIndices(threadData, tmp1, tmp2, _slice);
  /* skip box _scal_indices; list<#Integer> */
  return _scal_indices;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Mapping_getVarScalIndices(threadData_t *threadData, modelica_integer _arr_idx, modelica_metatype _mapping, modelica_metatype _subs, modelica_metatype _dims, modelica_boolean _reverse)
{
  modelica_metatype _scal_indices = NULL;
  modelica_integer _start;
  modelica_integer _length;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_metatype tmpMeta4;
  modelica_integer tmp5;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _scal_indices has no default value.
  // _start has no default value.
  // _length has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapping), 5))),_arr_idx) /* DAE.ASUB */;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
  tmp3 = mmc_unbox_integer(tmpMeta2);
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmp5 = mmc_unbox_integer(tmpMeta4);
  _start = tmp3  /* pattern as ty=Integer */;
  _length = tmp5  /* pattern as ty=Integer */;

  { /* match expression */
    modelica_metatype tmp10_1;
    tmp10_1 = _subs;
    {
      modelica_metatype _sub = NULL;
      modelica_metatype _subs_lst = NULL;
      modelica_metatype _slice = NULL;
      modelica_metatype tmpMeta8;
      modelica_metatype _dim_sizes = NULL;
      modelica_metatype _values = NULL;
      volatile mmc_switch_type tmp10;
      int tmp11;
      // _sub has no default value.
      // _subs_lst has no default value.
      tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
      _slice = tmpMeta8;
      // _dim_sizes has no default value.
      // _values has no default value.
      tmp10 = 0;
      for (; tmp10 < 4; tmp10++) {
        switch (MMC_SWITCH_CAST(tmp10)) {
        case 0: {
          modelica_metatype tmpMeta12;
          if (!listEmpty(tmp10_1)) goto tmp9_end;
          /* Pattern matching succeeded */
          tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta6 = omc_NBAdjacency_Mapping_getVarScalIndices_subscriptedIndices(threadData, _start, _length, tmpMeta12);
          goto tmp9_done;
        }
        case 1: {
          modelica_metatype tmpMeta13;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_List_all(threadData, _subs, boxvar_NFSubscript_isWhole)) goto tmp9_end;
          tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta6 = omc_NBAdjacency_Mapping_getVarScalIndices_subscriptedIndices(threadData, _start, _length, tmpMeta13);
          goto tmp9_done;
        }
        case 2: {
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          if (listEmpty(tmp10_1)) goto tmp9_end;
          tmpMeta14 = MMC_CAR(tmp10_1);
          tmpMeta15 = MMC_CDR(tmp10_1);
          if (!listEmpty(tmpMeta15)) goto tmp9_end;
          _sub = tmpMeta14;
          /* Pattern matching succeeded */
          _slice = omc_NFSubscript_toIndexList(threadData, _sub, _length, 1 /* true */);
          tmpMeta6 = omc_NBAdjacency_Mapping_getVarScalIndices_subscriptedIndices(threadData, _start, _length, _slice);
          goto tmp9_done;
        }
        case 3: {
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          
          /* Pattern matching succeeded */
          _subs_lst = omc_NFSubscript_scalarizeList(threadData, _subs, _dims, 1 /* true */);

          _subs_lst = omc_List_combination(threadData, _subs_lst);

          {
            modelica_metatype __omcQ_24tmpVar95;
            modelica_metatype* tmp17;
            modelica_metatype tmpMeta18;
            modelica_metatype __omcQ_24tmpVar94;
            modelica_integer tmp19;
            modelica_metatype _dim_loopVar = 0;
            modelica_metatype _dim;
            _dim_loopVar = _dims;
            tmpMeta18 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar95 = tmpMeta18; /* defaultValue */
            tmp17 = &__omcQ_24tmpVar95;
            while(1) {
              tmp19 = 1;
              if (!listEmpty(_dim_loopVar)) {
                _dim = MMC_CAR(_dim_loopVar);
                _dim_loopVar = MMC_CDR(_dim_loopVar);
                tmp19--;
              }
              if (tmp19 == 0) {
                __omcQ_24tmpVar94 = mmc_mk_integer(omc_NFDimension_size(threadData, _dim, 0 /* false */));
                *tmp17 = mmc_mk_cons(__omcQ_24tmpVar94,0);
                tmp17 = &MMC_CDR(*tmp17);
              } else if (tmp19 == 1) {
                break;
              } else {
                goto goto_7;
              }
            }
            *tmp17 = mmc_mk_nil();
            tmpMeta16 = __omcQ_24tmpVar95;
          }
          _dim_sizes = tmpMeta16;

          {
            modelica_metatype _sub_lst;
            for (tmpMeta20 = listReverse(_subs_lst); !listEmpty(tmpMeta20); tmpMeta20=MMC_CDR(tmpMeta20))
            {
              _sub_lst = MMC_CAR(tmpMeta20);
              {
                modelica_metatype __omcQ_24tmpVar97;
                modelica_metatype* tmp22;
                modelica_metatype tmpMeta23;
                modelica_metatype __omcQ_24tmpVar96;
                modelica_integer tmp24;
                modelica_metatype _s_loopVar = 0;
                modelica_metatype _s;
                _s_loopVar = _sub_lst;
                tmpMeta23 = MMC_REFSTRUCTLIT(mmc_nil);
                __omcQ_24tmpVar97 = tmpMeta23; /* defaultValue */
                tmp22 = &__omcQ_24tmpVar97;
                while(1) {
                  tmp24 = 1;
                  if (!listEmpty(_s_loopVar)) {
                    _s = MMC_CAR(_s_loopVar);
                    _s_loopVar = MMC_CDR(_s_loopVar);
                    tmp24--;
                  }
                  if (tmp24 == 0) {
                    __omcQ_24tmpVar96 = mmc_mk_integer(omc_NFSubscript_toInteger(threadData, _s));
                    *tmp22 = mmc_mk_cons(__omcQ_24tmpVar96,0);
                    tmp22 = &MMC_CDR(*tmp22);
                  } else if (tmp24 == 1) {
                    break;
                  } else {
                    goto goto_7;
                  }
                }
                *tmp22 = mmc_mk_nil();
                tmpMeta21 = __omcQ_24tmpVar97;
              }
              _values = tmpMeta21;

              tmpMeta25 = mmc_mk_cons(mmc_mk_integer(omc_NBSlice_locationToIndex(threadData, _dim_sizes, _values, _start)), _slice);
              _slice = tmpMeta25;
            }
          }
          tmpMeta6 = _slice;
          goto tmp9_done;
        }
        }
        goto tmp9_end;
        tmp9_end: ;
      }
      goto goto_7;
      goto_7:;
      MMC_THROW_INTERNAL();
      goto tmp9_done;
      tmp9_done:;
    }
  }
  _scal_indices = tmpMeta6;

  if(_reverse)
  {
    _scal_indices = listReverse(_scal_indices);
  }
  _return: OMC_LABEL_UNUSED
  return _scal_indices;
}
modelica_metatype boxptr_NBAdjacency_Mapping_getVarScalIndices(threadData_t *threadData, modelica_metatype _arr_idx, modelica_metatype _mapping, modelica_metatype _subs, modelica_metatype _dims, modelica_metatype _reverse)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _scal_indices = NULL;
  tmp1 = mmc_unbox_integer(_arr_idx);
  tmp2 = mmc_unbox_integer(_reverse);
  _scal_indices = omc_NBAdjacency_Mapping_getVarScalIndices(threadData, tmp1, _mapping, _subs, _dims, tmp2);
  /* skip box _scal_indices; list<#Integer> */
  return _scal_indices;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Mapping_getEqnScalIndices(threadData_t *threadData, modelica_integer _arr_idx, modelica_metatype _mapping, modelica_boolean _reverse)
{
  modelica_metatype _scal_indices = NULL;
  modelica_integer _start;
  modelica_integer _length;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_metatype tmpMeta4;
  modelica_integer tmp5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _scal_indices has no default value.
  // _start has no default value.
  // _length has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapping), 4))),_arr_idx) /* DAE.ASUB */;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
  tmp3 = mmc_unbox_integer(tmpMeta2);
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmp5 = mmc_unbox_integer(tmpMeta4);
  _start = tmp3  /* pattern as ty=Integer */;
  _length = tmp5  /* pattern as ty=Integer */;

  _scal_indices = (_reverse?omc_List_intRange2(threadData, ((modelica_integer) -1) + _start + _length, _start):omc_List_intRange2(threadData, _start, ((modelica_integer) -1) + _start + _length));
  _return: OMC_LABEL_UNUSED
  return _scal_indices;
}
modelica_metatype boxptr_NBAdjacency_Mapping_getEqnScalIndices(threadData_t *threadData, modelica_metatype _arr_idx, modelica_metatype _mapping, modelica_metatype _reverse)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _scal_indices = NULL;
  tmp1 = mmc_unbox_integer(_arr_idx);
  tmp2 = mmc_unbox_integer(_reverse);
  _scal_indices = omc_NBAdjacency_Mapping_getEqnScalIndices(threadData, tmp1, _mapping, tmp2);
  /* skip box _scal_indices; list<#Integer> */
  return _scal_indices;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Mapping_expand(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fmapping, modelica_metatype _eqn_lst, modelica_metatype _var_lst)
{
  modelica_metatype _mapping = NULL;
  modelica_metatype _eqn_StA = NULL;
  modelica_metatype _var_StA = NULL;
  modelica_metatype _eqn_AtS = NULL;
  modelica_metatype _var_AtS = NULL;
  modelica_integer _eqn_scalar_size;
  modelica_integer _var_scalar_size;
  modelica_integer _neqn_scal;
  modelica_integer tmp1;
  modelica_integer _nvar_scal;
  modelica_integer tmp3;
  modelica_integer _neqn_arr;
  modelica_integer _nvar_arr;
  modelica_integer _eqn_idx_scal;
  modelica_integer _eqn_idx_arr;
  modelica_integer _var_idx_scal;
  modelica_integer _var_idx_arr;
  modelica_metatype tmpMeta5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _mapping = __omcQ_24in_5Fmapping;
  // _eqn_StA has no default value.
  // _var_StA has no default value.
  // _eqn_AtS has no default value.
  // _var_AtS has no default value.
  // _eqn_scalar_size has no default value.
  // _var_scalar_size has no default value.
  {
    modelica_integer __omcQ_24tmpVar99;
    modelica_integer __omcQ_24tmpVar98;
    modelica_integer tmp2;
    modelica_metatype _eqn_loopVar = 0;
    modelica_metatype _eqn;
    _eqn_loopVar = _eqn_lst;
    __omcQ_24tmpVar99 = ((modelica_integer) 0); /* defaultValue */
    while(1) {
      tmp2 = 1;
      if (!listEmpty(_eqn_loopVar)) {
        _eqn = MMC_CAR(_eqn_loopVar);
        _eqn_loopVar = MMC_CDR(_eqn_loopVar);
        tmp2--;
      }
      if (tmp2 == 0) {
        __omcQ_24tmpVar98 = omc_NBEquation_Equation_size(threadData, _eqn, 1 /* true */);
        __omcQ_24tmpVar99 = __omcQ_24tmpVar99 + __omcQ_24tmpVar98;
      } else if (tmp2 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    tmp1 = __omcQ_24tmpVar99;
  }
  _neqn_scal = tmp1;
  {
    modelica_integer __omcQ_24tmpVar101;
    modelica_integer __omcQ_24tmpVar100;
    modelica_integer tmp4;
    modelica_metatype _var_loopVar = 0;
    modelica_metatype _var;
    _var_loopVar = _var_lst;
    __omcQ_24tmpVar101 = ((modelica_integer) 0); /* defaultValue */
    while(1) {
      tmp4 = 1;
      if (!listEmpty(_var_loopVar)) {
        _var = MMC_CAR(_var_loopVar);
        _var_loopVar = MMC_CDR(_var_loopVar);
        tmp4--;
      }
      if (tmp4 == 0) {
        __omcQ_24tmpVar100 = omc_NBVariable_size(threadData, _var, 1 /* true */);
        __omcQ_24tmpVar101 = __omcQ_24tmpVar101 + __omcQ_24tmpVar100;
      } else if (tmp4 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    tmp3 = __omcQ_24tmpVar101;
  }
  _nvar_scal = tmp3;
  _neqn_arr = listLength(_eqn_lst);
  _nvar_arr = listLength(_var_lst);
  _eqn_idx_scal = ((modelica_integer) 1) + arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapping), 2))));
  _eqn_idx_arr = ((modelica_integer) 1) + arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapping), 4))));
  _var_idx_scal = ((modelica_integer) 1) + arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapping), 3))));
  _var_idx_arr = ((modelica_integer) 1) + arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapping), 5))));
  _eqn_StA = omc_Array_expandToSize(threadData, ((modelica_integer) -1) + _eqn_idx_scal + _neqn_scal, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapping), 2))), mmc_mk_integer(((modelica_integer) -1)));

  _var_StA = omc_Array_expandToSize(threadData, ((modelica_integer) -1) + _var_idx_scal + _nvar_scal, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapping), 3))), mmc_mk_integer(((modelica_integer) -1)));

  _eqn_AtS = omc_Array_expandToSize(threadData, ((modelica_integer) -1) + _eqn_idx_arr + _neqn_arr, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapping), 4))), _OMC_LIT137);

  _var_AtS = omc_Array_expandToSize(threadData, ((modelica_integer) -1) + _var_idx_arr + _nvar_arr, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapping), 5))), _OMC_LIT137);

  _eqn_StA = omc_NBAdjacency_Mapping_fill__(threadData, _eqn_StA, _var_StA, _eqn_AtS, _var_AtS, _eqn_lst, _var_lst, _eqn_idx_scal, _eqn_idx_arr, _var_idx_scal, _var_idx_arr ,&_var_StA ,&_eqn_AtS ,&_var_AtS);

  tmpMeta5 = mmc_mk_box5(3, &NBAdjacency_Mapping_MAPPING__desc, _eqn_StA, _var_StA, _eqn_AtS, _var_AtS);
  _mapping = tmpMeta5;
  _return: OMC_LABEL_UNUSED
  return _mapping;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Mapping_create(threadData_t *threadData, modelica_metatype _eqns, modelica_metatype _vars)
{
  modelica_metatype _mapping = NULL;
  modelica_metatype _eqn_lst = NULL;
  modelica_metatype _var_lst = NULL;
  modelica_metatype _eqn_StA = NULL;
  modelica_metatype _var_StA = NULL;
  modelica_metatype _eqn_AtS = NULL;
  modelica_metatype _var_AtS = NULL;
  modelica_integer _eqn_scalar_size;
  modelica_integer _var_scalar_size;
  modelica_integer _eqn_idx_scal;
  modelica_integer _eqn_idx_arr;
  modelica_integer _var_idx_scal;
  modelica_integer _var_idx_arr;
  modelica_integer tmp1;
  modelica_integer tmp3;
  modelica_metatype tmpMeta5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _mapping has no default value.
  _eqn_lst = omc_NBEquation_EquationPointers_toList(threadData, _eqns);
  _var_lst = omc_NBVariable_VariablePointers_toList(threadData, _vars);
  // _eqn_StA has no default value.
  // _var_StA has no default value.
  // _eqn_AtS has no default value.
  // _var_AtS has no default value.
  // _eqn_scalar_size has no default value.
  // _var_scalar_size has no default value.
  _eqn_idx_scal = ((modelica_integer) 1);
  _eqn_idx_arr = ((modelica_integer) 1);
  _var_idx_scal = ((modelica_integer) 1);
  _var_idx_arr = ((modelica_integer) 1);
  {
    modelica_integer __omcQ_24tmpVar103;
    modelica_integer __omcQ_24tmpVar102;
    modelica_integer tmp2;
    modelica_metatype _eqn_loopVar = 0;
    modelica_metatype _eqn;
    _eqn_loopVar = _eqn_lst;
    __omcQ_24tmpVar103 = ((modelica_integer) 0); /* defaultValue */
    while(1) {
      tmp2 = 1;
      if (!listEmpty(_eqn_loopVar)) {
        _eqn = MMC_CAR(_eqn_loopVar);
        _eqn_loopVar = MMC_CDR(_eqn_loopVar);
        tmp2--;
      }
      if (tmp2 == 0) {
        __omcQ_24tmpVar102 = omc_NBEquation_Equation_size(threadData, _eqn, 1 /* true */);
        __omcQ_24tmpVar103 = __omcQ_24tmpVar103 + __omcQ_24tmpVar102;
      } else if (tmp2 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    tmp1 = __omcQ_24tmpVar103;
  }
  _eqn_scalar_size = tmp1;

  {
    modelica_integer __omcQ_24tmpVar105;
    modelica_integer __omcQ_24tmpVar104;
    modelica_integer tmp4;
    modelica_metatype _var_loopVar = 0;
    modelica_metatype _var;
    _var_loopVar = _var_lst;
    __omcQ_24tmpVar105 = ((modelica_integer) 0); /* defaultValue */
    while(1) {
      tmp4 = 1;
      if (!listEmpty(_var_loopVar)) {
        _var = MMC_CAR(_var_loopVar);
        _var_loopVar = MMC_CDR(_var_loopVar);
        tmp4--;
      }
      if (tmp4 == 0) {
        __omcQ_24tmpVar104 = omc_NBVariable_size(threadData, _var, 1 /* true */);
        __omcQ_24tmpVar105 = __omcQ_24tmpVar105 + __omcQ_24tmpVar104;
      } else if (tmp4 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    tmp3 = __omcQ_24tmpVar105;
  }
  _var_scalar_size = tmp3;

  _eqn_StA = arrayCreate(_eqn_scalar_size, mmc_mk_integer(((modelica_integer) -1)));

  _var_StA = arrayCreate(_var_scalar_size, mmc_mk_integer(((modelica_integer) -1)));

  _eqn_AtS = arrayCreate(omc_NBEquation_EquationPointers_size(threadData, _eqns), _OMC_LIT137);

  _var_AtS = arrayCreate(omc_NBVariable_VariablePointers_size(threadData, _vars), _OMC_LIT137);

  _eqn_StA = omc_NBAdjacency_Mapping_fill__(threadData, _eqn_StA, _var_StA, _eqn_AtS, _var_AtS, _eqn_lst, _var_lst, _eqn_idx_scal, _eqn_idx_arr, _var_idx_scal, _var_idx_arr ,&_var_StA ,&_eqn_AtS ,&_var_AtS);

  tmpMeta5 = mmc_mk_box5(3, &NBAdjacency_Mapping_MAPPING__desc, _eqn_StA, _var_StA, _eqn_AtS, _var_AtS);
  _mapping = tmpMeta5;
  _return: OMC_LABEL_UNUSED
  return _mapping;
}

DLLDirection
modelica_metatype omc_NBAdjacency_Mapping_empty(threadData_t *threadData)
{
  modelica_metatype _mapping = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = mmc_mk_box5(3, &NBAdjacency_Mapping_MAPPING__desc, arrayCreate(((modelica_integer) 0), mmc_mk_integer(((modelica_integer) 0))), arrayCreate(((modelica_integer) 0), mmc_mk_integer(((modelica_integer) 0))), arrayCreate(((modelica_integer) 0), _OMC_LIT138), arrayCreate(((modelica_integer) 0), _OMC_LIT138));
  _mapping = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _mapping;
}

DLLDirection
modelica_string omc_NBAdjacency_Mapping_toString(threadData_t *threadData, modelica_metatype _mapping)
{
  modelica_string _str = NULL;
  modelica_integer _start;
  modelica_integer _size;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_metatype tmpMeta4;
  modelica_integer tmp5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_integer tmp13;
  modelica_integer tmp14;
  modelica_integer tmp15;
  modelica_metatype tmpMeta16;
  modelica_metatype tmpMeta17;
  modelica_metatype tmpMeta18;
  modelica_integer tmp19;
  modelica_metatype tmpMeta20;
  modelica_integer tmp21;
  modelica_metatype tmpMeta22;
  modelica_metatype tmpMeta23;
  modelica_metatype tmpMeta24;
  modelica_metatype tmpMeta25;
  modelica_metatype tmpMeta26;
  modelica_metatype tmpMeta27;
  modelica_metatype tmpMeta28;
  modelica_integer tmp29;
  modelica_integer tmp30;
  modelica_integer tmp31;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _str has no default value.
  // _start has no default value.
  // _size has no default value.
  _str = omc_StringUtil_headline__4(threadData, _OMC_LIT139);

  tmp13 = ((modelica_integer) 1); tmp14 = 1; tmp15 = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapping), 4))));
  if(!(((tmp14 > 0) && (tmp13 > tmp15)) || ((tmp14 < 0) && (tmp13 < tmp15))))
  {
    modelica_integer _i;
    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp13, tmp15); _i += tmp14)
    {
      /* Pattern-matching assignment */
      tmpMeta1 = arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapping), 4))),_i) /* DAE.ASUB */;
      tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
      tmp3 = mmc_unbox_integer(tmpMeta2);
      tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
      tmp5 = mmc_unbox_integer(tmpMeta4);
      _start = tmp3  /* pattern as ty=Integer */;
      _size = tmp5  /* pattern as ty=Integer */;

      tmpMeta6 = stringAppend(_str,_OMC_LIT140);
      tmpMeta7 = stringAppend(tmpMeta6,intString(_i));
      tmpMeta8 = stringAppend(tmpMeta7,_OMC_LIT141);
      tmpMeta9 = stringAppend(tmpMeta8,intString(_start));
      tmpMeta10 = stringAppend(tmpMeta9,_OMC_LIT80);
      tmpMeta11 = stringAppend(tmpMeta10,intString(_size));
      tmpMeta12 = stringAppend(tmpMeta11,_OMC_LIT55);
      _str = tmpMeta12;
    }
  }

  tmpMeta16 = stringAppend(_str,omc_StringUtil_headline__4(threadData, _OMC_LIT142));
  _str = tmpMeta16;

  tmp29 = ((modelica_integer) 1); tmp30 = 1; tmp31 = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapping), 5))));
  if(!(((tmp30 > 0) && (tmp29 > tmp31)) || ((tmp30 < 0) && (tmp29 < tmp31))))
  {
    modelica_integer _i;
    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp29, tmp31); _i += tmp30)
    {
      /* Pattern-matching assignment */
      tmpMeta17 = arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapping), 5))),_i) /* DAE.ASUB */;
      tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 1));
      tmp19 = mmc_unbox_integer(tmpMeta18);
      tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 2));
      tmp21 = mmc_unbox_integer(tmpMeta20);
      _start = tmp19  /* pattern as ty=Integer */;
      _size = tmp21  /* pattern as ty=Integer */;

      tmpMeta22 = stringAppend(_str,_OMC_LIT140);
      tmpMeta23 = stringAppend(tmpMeta22,intString(_i));
      tmpMeta24 = stringAppend(tmpMeta23,_OMC_LIT141);
      tmpMeta25 = stringAppend(tmpMeta24,intString(_start));
      tmpMeta26 = stringAppend(tmpMeta25,_OMC_LIT80);
      tmpMeta27 = stringAppend(tmpMeta26,intString(_size));
      tmpMeta28 = stringAppend(tmpMeta27,_OMC_LIT55);
      _str = tmpMeta28;
    }
  }
  _return: OMC_LABEL_UNUSED
  return _str;
}

DLLDirection
modelica_string omc_NBAdjacency_strictnessString(threadData_t *threadData, modelica_integer _s)
{
  modelica_string _str = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _str has no default value.
  { /* match expression */
    modelica_integer tmp4_1;
    tmp4_1 = (modelica_integer)_s;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 5; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (1 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT143;
          goto tmp3_done;
        }
        case 1: {
          if (2 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT144;
          goto tmp3_done;
        }
        case 2: {
          if (3 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT145;
          goto tmp3_done;
        }
        case 3: {
          if (4 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT146;
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT147;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _str = tmp1;
  _return: OMC_LABEL_UNUSED
  return _str;
}
modelica_metatype boxptr_NBAdjacency_strictnessString(threadData_t *threadData, modelica_metatype _s)
{
  modelica_integer tmp1;
  modelica_string _str = NULL;
  tmp1 = mmc_unbox_integer(_s);
  _str = omc_NBAdjacency_strictnessString(threadData, tmp1);
  /* skip box _str; String */
  return _str;
}

