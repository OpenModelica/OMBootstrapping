#include "omc_simulation_settings.h"
#include "NFSCodeEnv.h"
#define _OMC_LIT0_data "\n		"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT0,3,_OMC_LIT0_data);
#define _OMC_LIT0 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT0)
#define _OMC_LIT1_data "		"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT1,2,_OMC_LIT1_data);
#define _OMC_LIT1 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT1)
#define _OMC_LIT2_data "ALIAS("
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT2,6,_OMC_LIT2_data);
#define _OMC_LIT2 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT2)
#define _OMC_LIT3_data "."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT3,1,_OMC_LIT3_data);
#define _OMC_LIT3 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT3)
#define _OMC_LIT4_data ")"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT4,1,_OMC_LIT4_data);
#define _OMC_LIT4 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT4)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT5,10,3) {&SCodeDump_SCodeDumpOptions_OPTIONS__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */))}};
#define _OMC_LIT5 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT5)
#define _OMC_LIT6_data "\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT6,1,_OMC_LIT6_data);
#define _OMC_LIT6 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT6)
#define _OMC_LIT7_data "("
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT7,1,_OMC_LIT7_data);
#define _OMC_LIT7 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT7)
#define _OMC_LIT8_data "\n		Redeclare elements:\n			"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT8,26,_OMC_LIT8_data);
#define _OMC_LIT8 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT8)
#define _OMC_LIT9_data "\n			"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT9,4,_OMC_LIT9_data);
#define _OMC_LIT9 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT9)
#define _OMC_LIT10_data "\n		Class extends:\n			"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT10,21,_OMC_LIT10_data);
#define _OMC_LIT10 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT10)
#define _OMC_LIT11_data ""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT11,0,_OMC_LIT11_data);
#define _OMC_LIT11 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT11)
#define _OMC_LIT12_data "Normal"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT12,6,_OMC_LIT12_data);
#define _OMC_LIT12 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT12)
#define _OMC_LIT13_data "Encapsulated"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT13,12,_OMC_LIT13_data);
#define _OMC_LIT13 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT13)
#define _OMC_LIT14_data "Implicit"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT14,8,_OMC_LIT14_data);
#define _OMC_LIT14 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT14)
#define _OMC_LIT15_data "global"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT15,6,_OMC_LIT15_data);
#define _OMC_LIT15 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT15)
#define _OMC_LIT16_data "<<<"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT16,3,_OMC_LIT16_data);
#define _OMC_LIT16 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT16)
#define _OMC_LIT17_data " frame "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT17,7,_OMC_LIT17_data);
#define _OMC_LIT17 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT17)
#define _OMC_LIT18_data ">>>\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT18,4,_OMC_LIT18_data);
#define _OMC_LIT18 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT18)
#define _OMC_LIT19_data "	Imports:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT19,10,_OMC_LIT19_data);
#define _OMC_LIT19 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT19)
#define _OMC_LIT20_data "\n	Extends:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT20,11,_OMC_LIT20_data);
#define _OMC_LIT20 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT20)
#define _OMC_LIT21_data "\n	Components:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT21,14,_OMC_LIT21_data);
#define _OMC_LIT21 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT21)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT22,1,3) {&SCode_Visibility_PUBLIC__desc,}};
#define _OMC_LIT22 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT22)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT23,1,4) {&SCode_Redeclare_NOT__REDECLARE__desc,}};
#define _OMC_LIT23 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT23)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT24,1,4) {&SCode_Final_NOT__FINAL__desc,}};
#define _OMC_LIT24 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT24)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT25,1,6) {&Absyn_InnerOuter_NOT__INNER__OUTER__desc,}};
#define _OMC_LIT25 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT25)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT26,1,4) {&SCode_Replaceable_NOT__REPLACEABLE__desc,}};
#define _OMC_LIT26 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT26)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT27,6,3) {&SCode_Prefixes_PREFIXES__desc,_OMC_LIT22,_OMC_LIT23,_OMC_LIT24,_OMC_LIT25,_OMC_LIT26}};
#define _OMC_LIT27 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT27)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT28,1,4) {&SCode_Encapsulated_NOT__ENCAPSULATED__desc,}};
#define _OMC_LIT28 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT28)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT29,1,4) {&SCode_Partial_NOT__PARTIAL__desc,}};
#define _OMC_LIT29 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT29)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT30,1,3) {&SCode_Restriction_R__CLASS__desc,}};
#define _OMC_LIT30 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT30)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT31,9,3) {&SCode_ClassDef_PARTS__desc,MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT31 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT31)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT32,3,3) {&SCode_Comment_COMMENT__desc,MMC_REFSTRUCTLIT(mmc_none),MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT32 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT32)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT33,0.0);
#define _OMC_LIT33 MMC_REFREALLIT(_OMC_LIT_STRUCT33)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT34,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT11,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT33}};
#define _OMC_LIT34 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT34)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT35,1,4) {&NFSCodeEnv_ClassType_BUILTIN__desc,}};
#define _OMC_LIT35 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT35)
#define _OMC_LIT36_data "String"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT36,6,_OMC_LIT36_data);
#define _OMC_LIT36 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT36)
#define _OMC_LIT37_data "Integer"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT37,7,_OMC_LIT37_data);
#define _OMC_LIT37 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT37)
#define _OMC_LIT38_data "spliceFunction"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT38,14,_OMC_LIT38_data);
#define _OMC_LIT38 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT38)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT39,1,3) {&NFSCodeEnv_FrameType_NORMAL__SCOPE__desc,}};
#define _OMC_LIT39 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT39)
#define _OMC_LIT40_data "Derived paths are not the same: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT40,32,_OMC_LIT40_data);
#define _OMC_LIT40 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT40)
#define _OMC_LIT41_data " != "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT41,4,_OMC_LIT41_data);
#define _OMC_LIT41 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT41)
#define _OMC_LIT42_data "NO ENV FOR ITEM: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT42,17,_OMC_LIT42_data);
#define _OMC_LIT42 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT42)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT43,1,4) {&NFSCodeEnv_FrameType_ENCAPSULATED__SCOPE__desc,}};
#define _OMC_LIT43 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT43)
#define _OMC_LIT44_data "alias "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT44,6,_OMC_LIT44_data);
#define _OMC_LIT44 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT44)
#define _OMC_LIT45_data " -> ("
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT45,5,_OMC_LIT45_data);
#define _OMC_LIT45 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT45)
#define _OMC_LIT46_data " -> ()"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT46,6,_OMC_LIT46_data);
#define _OMC_LIT46 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT46)
#define _OMC_LIT47_data "redeclared "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT47,11,_OMC_LIT47_data);
#define _OMC_LIT47 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT47)
#define _OMC_LIT48_data "UNHANDLED ITEM"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT48,14,_OMC_LIT48_data);
#define _OMC_LIT48 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT48)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT49,1,4) {&SCode_Visibility_PROTECTED__desc,}};
#define _OMC_LIT49 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT49)
#define _OMC_LIT50_data "$match$"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT50,7,_OMC_LIT50_data);
#define _OMC_LIT50 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT50)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT51,1,1) {_OMC_LIT50}};
#define _OMC_LIT51 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT51)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT52,1,3) {&SCode_ConnectorType_POTENTIAL__desc,}};
#define _OMC_LIT52 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT52)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT53,1,5) {&SCode_Parallelism_NON__PARALLEL__desc,}};
#define _OMC_LIT53 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT53)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT54,1,6) {&SCode_Variability_CONST__desc,}};
#define _OMC_LIT54 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT54)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT55,1,5) {&Absyn_Direction_BIDIR__desc,}};
#define _OMC_LIT55 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT55)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT56,1,3) {&Absyn_IsField_NONFIELD__desc,}};
#define _OMC_LIT56 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT56)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT57,7,3) {&SCode_Attributes_ATTR__desc,MMC_REFSTRUCTLIT(mmc_nil),_OMC_LIT52,_OMC_LIT53,_OMC_LIT54,_OMC_LIT55,_OMC_LIT56}};
#define _OMC_LIT57 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT57)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT58,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT11}};
#define _OMC_LIT58 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT58)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT59,3,3) {&Absyn_TypeSpec_TPATH__desc,_OMC_LIT58,MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT59 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT59)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT60,1,5) {&SCode_Mod_NOMOD__desc,}};
#define _OMC_LIT60 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT60)
#define _OMC_LIT61_data "$for$"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT61,5,_OMC_LIT61_data);
#define _OMC_LIT61 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT61)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT62,1,1) {_OMC_LIT61}};
#define _OMC_LIT62 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT62)
#define _OMC_LIT63_data "$EnumType"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT63,9,_OMC_LIT63_data);
#define _OMC_LIT63 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT63)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT64,1,5) {&ErrorTypes_MessageType_TRANSLATION__desc,}};
#define _OMC_LIT64 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT64)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT65,1,4) {&ErrorTypes_Severity_ERROR__desc,}};
#define _OMC_LIT65 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT65)
#define _OMC_LIT66_data "Qualified import name %s already exists in this scope."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT66,54,_OMC_LIT66_data);
#define _OMC_LIT66 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT66)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT67,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT66}};
#define _OMC_LIT67 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT67)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT68,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(163)),_OMC_LIT64,_OMC_LIT65,_OMC_LIT67}};
#define _OMC_LIT68 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT68)
#define _OMC_LIT69_data "$base"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT69,5,_OMC_LIT69_data);
#define _OMC_LIT69 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT69)
#define _OMC_LIT70_data "BUILTIN"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT70,7,_OMC_LIT70_data);
#define _OMC_LIT70 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT70)
#define _OMC_LIT71_data "CLASS_EXTENDS"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT71,13,_OMC_LIT71_data);
#define _OMC_LIT71 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT71)
#define _OMC_LIT72_data "USERDEFINED"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT72,11,_OMC_LIT72_data);
#define _OMC_LIT72 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT72)
#define _OMC_LIT73_data "BASIC_TYPE"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT73,10,_OMC_LIT73_data);
#define _OMC_LIT73 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT73)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT74,1,3) {&NFSCodeEnv_ClassType_USERDEFINED__desc,}};
#define _OMC_LIT74 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT74)
#define _OMC_LIT75_data "builtin"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT75,7,_OMC_LIT75_data);
#define _OMC_LIT75 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT75)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT76,4,3) {&NFSCodeEnv_ExtendsTable_EXTENDS__TABLE__desc,MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT76 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT76)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT77,4,3) {&NFSCodeEnv_ImportTable_IMPORT__TABLE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT77 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT77)
#define _OMC_LIT78_data "Failed to enterScope: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT78,22,_OMC_LIT78_data);
#define _OMC_LIT78 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT78)
#define _OMC_LIT79_data " in env: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT79,9,_OMC_LIT79_data);
#define _OMC_LIT79 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT79)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT80,1,5) {&NFSCodeEnv_EnvTree_Tree_EMPTY__desc,}};
#define _OMC_LIT80 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT80)
#define _OMC_LIT81_data ", "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT81,2,_OMC_LIT81_data);
#define _OMC_LIT81 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT81)
#define _OMC_LIT82_data "EMPTY()"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT82,7,_OMC_LIT82_data);
#define _OMC_LIT82 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT82)
#define _OMC_LIT83_data "     "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT83,5,_OMC_LIT83_data);
#define _OMC_LIT83 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT83)
#define _OMC_LIT84_data " │   "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT84,7,_OMC_LIT84_data);
#define _OMC_LIT84 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT84)
#define _OMC_LIT85_data " ┌"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT85,4,_OMC_LIT85_data);
#define _OMC_LIT85 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT85)
#define _OMC_LIT86_data " └"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT86,4,_OMC_LIT86_data);
#define _OMC_LIT86 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT86)
#define _OMC_LIT87_data "────"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT87,12,_OMC_LIT87_data);
#define _OMC_LIT87 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT87)
#define _OMC_LIT88_data "$item"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT88,5,_OMC_LIT88_data);
#define _OMC_LIT88 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT88)
#include "util/modelica.h"

#include "NFSCodeEnv_includes.h"


/* default, do not make protected functions static */
#if !defined(PROTECTED_FUNCTION_STATIC)
#define PROTECTED_FUNCTION_STATIC
#endif
PROTECTED_FUNCTION_STATIC modelica_string omc_NFSCodeEnv_printImportTableStr(threadData_t *threadData, modelica_metatype _inImports);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_printImportTableStr,2,0) {(void*) boxptr_NFSCodeEnv_printImportTableStr,0}};
#define boxvar_NFSCodeEnv_printImportTableStr MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_printImportTableStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_NFSCodeEnv_printFrameTypeStr(threadData_t *threadData, modelica_metatype _inFrame);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_printFrameTypeStr,2,0) {(void*) boxptr_NFSCodeEnv_printFrameTypeStr,0}};
#define boxvar_NFSCodeEnv_printFrameTypeStr MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_printFrameTypeStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_NFSCodeEnv_printFrameNameStr(threadData_t *threadData, modelica_metatype _inFrame);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_printFrameNameStr,2,0) {(void*) boxptr_NFSCodeEnv_printFrameNameStr,0}};
#define boxvar_NFSCodeEnv_printFrameNameStr MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_printFrameNameStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_NFSCodeEnv_printFrameStr(threadData_t *threadData, modelica_metatype _inFrame);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_printFrameStr,2,0) {(void*) boxptr_NFSCodeEnv_printFrameStr,0}};
#define boxvar_NFSCodeEnv_printFrameStr MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_printFrameStr)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_addDummyClassToTree(threadData_t *threadData, modelica_string _inName, modelica_metatype _inTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_addDummyClassToTree,2,0) {(void*) boxptr_NFSCodeEnv_addDummyClassToTree,0}};
#define boxvar_NFSCodeEnv_addDummyClassToTree MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_addDummyClassToTree)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_extendEnvWithElementItem(threadData_t *threadData, modelica_metatype _inElementItem, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_extendEnvWithElementItem,2,0) {(void*) boxptr_NFSCodeEnv_extendEnvWithElementItem,0}};
#define boxvar_NFSCodeEnv_extendEnvWithElementItem MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_extendEnvWithElementItem)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_extendEnvWithIterator(threadData_t *threadData, modelica_metatype _inIterator, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_extendEnvWithIterator,2,0) {(void*) boxptr_NFSCodeEnv_extendEnvWithIterator,0}};
#define boxvar_NFSCodeEnv_extendEnvWithIterator MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_extendEnvWithIterator)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_extendEnvWithEnum(threadData_t *threadData, modelica_metatype _inEnum, modelica_metatype _inEnumPath, modelica_integer _inValue, modelica_metatype _inEnv, modelica_metatype _inInfo);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFSCodeEnv_extendEnvWithEnum(threadData_t *threadData, modelica_metatype _inEnum, modelica_metatype _inEnumPath, modelica_metatype _inValue, modelica_metatype _inEnv, modelica_metatype _inInfo);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_extendEnvWithEnum,2,0) {(void*) boxptr_NFSCodeEnv_extendEnvWithEnum,0}};
#define boxvar_NFSCodeEnv_extendEnvWithEnum MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_extendEnvWithEnum)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_extendEnvWithEnumLiterals(threadData_t *threadData, modelica_metatype _inEnum, modelica_metatype _inEnumPath, modelica_integer _inNextValue, modelica_metatype _inEnv, modelica_metatype _inInfo);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFSCodeEnv_extendEnvWithEnumLiterals(threadData_t *threadData, modelica_metatype _inEnum, modelica_metatype _inEnumPath, modelica_metatype _inNextValue, modelica_metatype _inEnv, modelica_metatype _inInfo);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_extendEnvWithEnumLiterals,2,0) {(void*) boxptr_NFSCodeEnv_extendEnvWithEnumLiterals,0}};
#define boxvar_NFSCodeEnv_extendEnvWithEnumLiterals MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_extendEnvWithEnumLiterals)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_NFSCodeEnv_compareQualifiedImportNames(threadData_t *threadData, modelica_metatype _inImport1, modelica_metatype _inImport2);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFSCodeEnv_compareQualifiedImportNames(threadData_t *threadData, modelica_metatype _inImport1, modelica_metatype _inImport2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_compareQualifiedImportNames,2,0) {(void*) boxptr_NFSCodeEnv_compareQualifiedImportNames,0}};
#define boxvar_NFSCodeEnv_compareQualifiedImportNames MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_compareQualifiedImportNames)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_extendEnvWithElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_extendEnvWithElement,2,0) {(void*) boxptr_NFSCodeEnv_extendEnvWithElement,0}};
#define boxvar_NFSCodeEnv_extendEnvWithElement MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_extendEnvWithElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_extendEnvWithClassComponents(threadData_t *threadData, modelica_string _inClassName, modelica_metatype _inClassDef, modelica_metatype _inEnv, modelica_metatype _inEnclosingScope, modelica_metatype _inInfo);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_extendEnvWithClassComponents,2,0) {(void*) boxptr_NFSCodeEnv_extendEnvWithClassComponents,0}};
#define boxvar_NFSCodeEnv_extendEnvWithClassComponents MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_extendEnvWithClassComponents)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_addElementRedeclarationToEnvExtendsTable(threadData_t *threadData, modelica_metatype _inRedeclare, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_addElementRedeclarationToEnvExtendsTable,2,0) {(void*) boxptr_NFSCodeEnv_addElementRedeclarationToEnvExtendsTable,0}};
#define boxvar_NFSCodeEnv_addElementRedeclarationToEnvExtendsTable MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_addElementRedeclarationToEnvExtendsTable)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_addExtendsToEnvExtendsTable(threadData_t *threadData, modelica_metatype _inExtends, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_addExtendsToEnvExtendsTable,2,0) {(void*) boxptr_NFSCodeEnv_addExtendsToEnvExtendsTable,0}};
#define boxvar_NFSCodeEnv_addExtendsToEnvExtendsTable MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_addExtendsToEnvExtendsTable)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_translateQualifiedImportToNamed(threadData_t *threadData, modelica_metatype _inImport);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_translateQualifiedImportToNamed,2,0) {(void*) boxptr_NFSCodeEnv_translateQualifiedImportToNamed,0}};
#define boxvar_NFSCodeEnv_translateQualifiedImportToNamed MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_translateQualifiedImportToNamed)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_extendEnvWithImport(threadData_t *threadData, modelica_metatype _inImport, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_extendEnvWithImport,2,0) {(void*) boxptr_NFSCodeEnv_extendEnvWithImport,0}};
#define boxvar_NFSCodeEnv_extendEnvWithImport MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_extendEnvWithImport)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_extendEnvWithVar(threadData_t *threadData, modelica_metatype _inVar, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_extendEnvWithVar,2,0) {(void*) boxptr_NFSCodeEnv_extendEnvWithVar,0}};
#define boxvar_NFSCodeEnv_extendEnvWithVar MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_extendEnvWithVar)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_extendEnvWithClassDef(threadData_t *threadData, modelica_metatype _inClassDefElement, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_extendEnvWithClassDef,2,0) {(void*) boxptr_NFSCodeEnv_extendEnvWithClassDef,0}};
#define boxvar_NFSCodeEnv_extendEnvWithClassDef MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_extendEnvWithClassDef)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_removeRedeclaresFromExtend(threadData_t *threadData, modelica_metatype _inExtend);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_removeRedeclaresFromExtend,2,0) {(void*) boxptr_NFSCodeEnv_removeRedeclaresFromExtend,0}};
#define boxvar_NFSCodeEnv_removeRedeclaresFromExtend MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_removeRedeclaresFromExtend)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_NFSCodeEnv_isExtendNamed(threadData_t *threadData, modelica_metatype _inName, modelica_metatype _inExtends);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFSCodeEnv_isExtendNamed(threadData_t *threadData, modelica_metatype _inName, modelica_metatype _inExtends);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_isExtendNamed,2,0) {(void*) boxptr_NFSCodeEnv_isExtendNamed,0}};
#define boxvar_NFSCodeEnv_isExtendNamed MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_isExtendNamed)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_extendEnvWithClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_extendEnvWithClass,2,0) {(void*) boxptr_NFSCodeEnv_extendEnvWithClass,0}};
#define boxvar_NFSCodeEnv_extendEnvWithClass MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_extendEnvWithClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_newExtendsTable(threadData_t *threadData);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_newExtendsTable,2,0) {(void*) boxptr_NFSCodeEnv_newExtendsTable,0}};
#define boxvar_NFSCodeEnv_newExtendsTable MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_newExtendsTable)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_newImportTable(threadData_t *threadData);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_newImportTable,2,0) {(void*) boxptr_NFSCodeEnv_newImportTable,0}};
#define boxvar_NFSCodeEnv_newImportTable MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_newImportTable)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_newFrame(threadData_t *threadData, modelica_metatype _inName, modelica_metatype _inType);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_newFrame,2,0) {(void*) boxptr_NFSCodeEnv_newFrame,0}};
#define boxvar_NFSCodeEnv_newFrame MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_newFrame)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_getFrameType(threadData_t *threadData, modelica_metatype _encapsulatedPrefix);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_getFrameType,2,0) {(void*) boxptr_NFSCodeEnv_getFrameType,0}};
#define boxvar_NFSCodeEnv_getFrameType MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_getFrameType)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_openScope(threadData_t *threadData, modelica_metatype _inEnv, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_openScope,2,0) {(void*) boxptr_NFSCodeEnv_openScope,0}};
#define boxvar_NFSCodeEnv_openScope MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_openScope)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_EnvTree_balance(threadData_t *threadData, modelica_metatype _inTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_EnvTree_balance,2,0) {(void*) boxptr_NFSCodeEnv_EnvTree_balance,0}};
#define boxvar_NFSCodeEnv_EnvTree_balance MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_EnvTree_balance)
PROTECTED_FUNCTION_STATIC modelica_integer omc_NFSCodeEnv_EnvTree_calculateBalance(threadData_t *threadData, modelica_metatype _inNode);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFSCodeEnv_EnvTree_calculateBalance(threadData_t *threadData, modelica_metatype _inNode);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_EnvTree_calculateBalance,2,0) {(void*) boxptr_NFSCodeEnv_EnvTree_calculateBalance,0}};
#define boxvar_NFSCodeEnv_EnvTree_calculateBalance MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_EnvTree_calculateBalance)
PROTECTED_FUNCTION_STATIC modelica_integer omc_NFSCodeEnv_EnvTree_height(threadData_t *threadData, modelica_metatype _inNode);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFSCodeEnv_EnvTree_height(threadData_t *threadData, modelica_metatype _inNode);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_EnvTree_height,2,0) {(void*) boxptr_NFSCodeEnv_EnvTree_height,0}};
#define boxvar_NFSCodeEnv_EnvTree_height MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_EnvTree_height)
PROTECTED_FUNCTION_STATIC modelica_string omc_NFSCodeEnv_EnvTree_printTreeStr2(threadData_t *threadData, modelica_metatype _inTree, modelica_boolean _isLeft, modelica_string _inIndent);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFSCodeEnv_EnvTree_printTreeStr2(threadData_t *threadData, modelica_metatype _inTree, modelica_metatype _isLeft, modelica_metatype _inIndent);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_EnvTree_printTreeStr2,2,0) {(void*) boxptr_NFSCodeEnv_EnvTree_printTreeStr2,0}};
#define boxvar_NFSCodeEnv_EnvTree_printTreeStr2 MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_EnvTree_printTreeStr2)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_NFSCodeEnv_EnvTree_referenceEqOrEmpty(threadData_t *threadData, modelica_metatype _t1, modelica_metatype _t2);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFSCodeEnv_EnvTree_referenceEqOrEmpty(threadData_t *threadData, modelica_metatype _t1, modelica_metatype _t2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_EnvTree_referenceEqOrEmpty,2,0) {(void*) boxptr_NFSCodeEnv_EnvTree_referenceEqOrEmpty,0}};
#define boxvar_NFSCodeEnv_EnvTree_referenceEqOrEmpty MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_EnvTree_referenceEqOrEmpty)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_EnvTree_rotateLeft(threadData_t *threadData, modelica_metatype _inNode);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_EnvTree_rotateLeft,2,0) {(void*) boxptr_NFSCodeEnv_EnvTree_rotateLeft,0}};
#define boxvar_NFSCodeEnv_EnvTree_rotateLeft MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_EnvTree_rotateLeft)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_EnvTree_rotateRight(threadData_t *threadData, modelica_metatype _inNode);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFSCodeEnv_EnvTree_rotateRight,2,0) {(void*) boxptr_NFSCodeEnv_EnvTree_rotateRight,0}};
#define boxvar_NFSCodeEnv_EnvTree_rotateRight MMC_REFSTRUCTLIT(boxvar_lit_NFSCodeEnv_EnvTree_rotateRight)

PROTECTED_FUNCTION_STATIC modelica_string omc_NFSCodeEnv_printImportTableStr(threadData_t *threadData, modelica_metatype _inImports)
{
  modelica_string _outString = NULL;
  modelica_metatype _qual_imps = NULL;
  modelica_metatype _unqual_imps = NULL;
  modelica_string _qual_str = NULL;
  modelica_string _unqual_str = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outString has no default value.
  // _qual_imps has no default value.
  // _unqual_imps has no default value.
  // _qual_str has no default value.
  // _unqual_str has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inImports;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 4));
  _qual_imps = tmpMeta2;
  _unqual_imps = tmpMeta3;

  _qual_str = stringDelimitList(omc_List_map(threadData, _qual_imps, boxvar_AbsynUtil_printImportString), _OMC_LIT0);

  _unqual_str = stringDelimitList(omc_List_map(threadData, _unqual_imps, boxvar_AbsynUtil_printImportString), _OMC_LIT0);

  tmpMeta4 = stringAppend(_OMC_LIT1,_qual_str);
  tmpMeta5 = stringAppend(tmpMeta4,_unqual_str);
  _outString = tmpMeta5;
  _return: OMC_LABEL_UNUSED
  return _outString;
}

DLLDirection
modelica_string omc_NFSCodeEnv_printRedeclarationStr(threadData_t *threadData, modelica_metatype _inRedeclare)
{
  modelica_string _outString = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outString has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _inRedeclare;
    {
      modelica_string _name = NULL;
      modelica_metatype _p = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _name has no default value.
      // _p has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,2,3) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
          if (optionNone(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
          
          _name = tmpMeta7;
          _p = tmpMeta9;
          /* Pattern matching succeeded */
          tmpMeta10 = stringAppend(_OMC_LIT2,omc_AbsynUtil_pathString(threadData, _p, _OMC_LIT3, 1 /* true */, 0 /* false */));
          tmpMeta11 = stringAppend(tmpMeta10,_OMC_LIT3);
          tmpMeta12 = stringAppend(tmpMeta11,_name);
          tmpMeta13 = stringAppend(tmpMeta12,_OMC_LIT4);
          tmp1 = tmpMeta13;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,2,3) == 0) goto tmp3_end;
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
          
          _name = tmpMeta15;
          /* Pattern matching succeeded */
          tmpMeta16 = stringAppend(_OMC_LIT2,_name);
          tmpMeta17 = stringAppend(tmpMeta16,_OMC_LIT4);
          tmp1 = tmpMeta17;
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_SCodeDump_unparseElementStr(threadData, omc_NFSCodeEnv_getRedeclarationElement(threadData, _inRedeclare), _OMC_LIT5);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outString = tmp1;
  _return: OMC_LABEL_UNUSED
  return _outString;
}

DLLDirection
modelica_string omc_NFSCodeEnv_printExtendsStr(threadData_t *threadData, modelica_metatype _inExtends)
{
  modelica_string _outString = NULL;
  modelica_metatype _bc = NULL;
  modelica_metatype _mods = NULL;
  modelica_string _mods_str = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outString has no default value.
  // _bc has no default value.
  // _mods has no default value.
  // _mods_str has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inExtends;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  _bc = tmpMeta2;
  _mods = tmpMeta3;

  _mods_str = stringDelimitList(omc_List_map(threadData, _mods, boxvar_NFSCodeEnv_printRedeclarationStr), _OMC_LIT6);

  tmpMeta4 = stringAppend(_OMC_LIT1,omc_AbsynUtil_pathString(threadData, _bc, _OMC_LIT3, 1 /* true */, 0 /* false */));
  tmpMeta5 = stringAppend(tmpMeta4,_OMC_LIT7);
  tmpMeta6 = stringAppend(tmpMeta5,_mods_str);
  tmpMeta7 = stringAppend(tmpMeta6,_OMC_LIT4);
  _outString = tmpMeta7;
  _return: OMC_LABEL_UNUSED
  return _outString;
}

static modelica_metatype closure0_SCodeDump_unparseElementStr(threadData_t *thData, modelica_metatype closure, modelica_metatype inElement)
{
  modelica_metatype options = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_SCodeDump_unparseElementStr(thData, inElement, options);
}
DLLDirection
modelica_string omc_NFSCodeEnv_printExtendsTableStr(threadData_t *threadData, modelica_metatype _inExtendsTable)
{
  modelica_string _outString = NULL;
  modelica_metatype _bcl = NULL;
  modelica_metatype _re = NULL;
  modelica_metatype _cei = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outString has no default value.
  // _bcl has no default value.
  // _re has no default value.
  // _cei has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inExtendsTable;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 4));
  _bcl = tmpMeta2;
  _re = tmpMeta3;
  _cei = tmpMeta4;

  tmpMeta5 = stringAppend(stringDelimitList(omc_List_map(threadData, _bcl, boxvar_NFSCodeEnv_printExtendsStr), _OMC_LIT6),_OMC_LIT8);
  tmpMeta6 = stringAppend(tmpMeta5,stringDelimitList(omc_List_map1(threadData, _re, boxvar_SCodeDump_unparseElementStr, _OMC_LIT5), _OMC_LIT9));
  tmpMeta7 = stringAppend(tmpMeta6,_OMC_LIT10);
  tmpMeta8 = mmc_mk_box1(0, _OMC_LIT5);
  tmpMeta9 = stringAppend(tmpMeta7,omc_Util_applyOptionOrDefault(threadData, _cei, (modelica_fnptr) mmc_mk_box2(0,closure0_SCodeDump_unparseElementStr,tmpMeta8), _OMC_LIT11));
  _outString = tmpMeta9;
  _return: OMC_LABEL_UNUSED
  return _outString;
}

PROTECTED_FUNCTION_STATIC modelica_string omc_NFSCodeEnv_printFrameTypeStr(threadData_t *threadData, modelica_metatype _inFrame)
{
  modelica_string _outString = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outString has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inFrame;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT12;
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT13;
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT14;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outString = tmp1;
  _return: OMC_LABEL_UNUSED
  return _outString;
}

PROTECTED_FUNCTION_STATIC modelica_string omc_NFSCodeEnv_printFrameNameStr(threadData_t *threadData, modelica_metatype _inFrame)
{
  modelica_string _outString = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outString has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inFrame;
    {
      modelica_string _name = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _name has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!optionNone(tmp4_1)) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT15;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          if (optionNone(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
          _name = tmpMeta6;
          /* Pattern matching succeeded */
          tmp1 = _name;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outString = tmp1;
  _return: OMC_LABEL_UNUSED
  return _outString;
}

PROTECTED_FUNCTION_STATIC modelica_string omc_NFSCodeEnv_printFrameStr(threadData_t *threadData, modelica_metatype _inFrame)
{
  modelica_string _outString = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outString has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inFrame;
    {
      modelica_metatype _name = NULL;
      modelica_metatype _ty = NULL;
      modelica_metatype _tree = NULL;
      modelica_metatype _exts = NULL;
      modelica_metatype _imps = NULL;
      modelica_string _name_str = NULL;
      modelica_string _ty_str = NULL;
      modelica_string _tree_str = NULL;
      modelica_string _ext_str = NULL;
      modelica_string _imp_str = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _name has no default value.
      // _ty has no default value.
      // _tree has no default value.
      // _exts has no default value.
      // _imps has no default value.
      // _name_str has no default value.
      // _ty_str has no default value.
      // _tree_str has no default value.
      // _ext_str has no default value.
      // _imp_str has no default value.
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
          
          _name = tmpMeta6;
          _ty = tmpMeta7;
          _tree = tmpMeta8;
          _exts = tmpMeta9;
          _imps = tmpMeta10;
          /* Pattern matching succeeded */
          _name_str = omc_NFSCodeEnv_printFrameNameStr(threadData, _name);

          _ty_str = omc_NFSCodeEnv_printFrameTypeStr(threadData, _ty);

          _tree_str = omc_NFSCodeEnv_EnvTree_printTreeStr(threadData, _tree);

          _ext_str = omc_NFSCodeEnv_printExtendsTableStr(threadData, _exts);

          _imp_str = omc_NFSCodeEnv_printImportTableStr(threadData, _imps);

          tmpMeta11 = stringAppend(_OMC_LIT16,_ty_str);
          tmpMeta12 = stringAppend(tmpMeta11,_OMC_LIT17);
          tmpMeta13 = stringAppend(tmpMeta12,_name_str);
          tmpMeta14 = stringAppend(tmpMeta13,_OMC_LIT18);
          _name_str = tmpMeta14;
          tmpMeta15 = stringAppend(_name_str,_OMC_LIT19);
          tmpMeta16 = stringAppend(tmpMeta15,_imp_str);
          tmpMeta17 = stringAppend(tmpMeta16,_OMC_LIT20);
          tmpMeta18 = stringAppend(tmpMeta17,_ext_str);
          tmpMeta19 = stringAppend(tmpMeta18,_OMC_LIT21);
          tmpMeta20 = stringAppend(tmpMeta19,_tree_str);
          tmpMeta21 = stringAppend(tmpMeta20,_OMC_LIT6);
          tmp1 = tmpMeta21;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outString = tmp1;
  _return: OMC_LABEL_UNUSED
  return _outString;
}

DLLDirection
modelica_string omc_NFSCodeEnv_printEnvStr(threadData_t *threadData, modelica_metatype _inEnv)
{
  modelica_string _outString = NULL;
  modelica_metatype _env = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outString has no default value.
  // _env has no default value.
  _env = listReverse(_inEnv);

  _outString = stringDelimitList(omc_List_map(threadData, _env, boxvar_NFSCodeEnv_printFrameStr), _OMC_LIT6);
  _return: OMC_LABEL_UNUSED
  return _outString;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_addDummyClassToTree(threadData_t *threadData, modelica_string _inName, modelica_metatype _inTree)
{
  modelica_metatype _outTree = NULL;
  modelica_metatype _cls = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outTree has no default value.
  // _cls has no default value.
  tmpMeta1 = mmc_mk_box9(5, &SCode_Element_CLASS__desc, _inName, _OMC_LIT27, _OMC_LIT28, _OMC_LIT29, _OMC_LIT30, _OMC_LIT31, _OMC_LIT32, _OMC_LIT34);
  _cls = tmpMeta1;

  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta3 = mmc_mk_box4(4, &NFSCodeEnv_Item_CLASS__desc, _cls, tmpMeta2, _OMC_LIT35);
  _outTree = omc_NFSCodeEnv_EnvTree_add(threadData, _inTree, _inName, tmpMeta3, boxvar_NFSCodeEnv_EnvTree_addConflictDefault);
  _return: OMC_LABEL_UNUSED
  return _outTree;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_buildInitialEnv(threadData_t *threadData)
{
  modelica_metatype _outInitialEnv = NULL;
  modelica_metatype _tree = NULL;
  modelica_metatype _exts = NULL;
  modelica_metatype _imps = NULL;
  modelica_metatype _is_used = NULL;
  modelica_metatype _p = NULL;
  modelica_metatype _initialClasses = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outInitialEnv has no default value.
  // _tree has no default value.
  // _exts has no default value.
  // _imps has no default value.
  // _is_used has no default value.
  // _p has no default value.
  // _initialClasses has no default value.
  _tree = omc_NFSCodeEnv_EnvTree_new(threadData);

  _exts = omc_NFSCodeEnv_newExtendsTable(threadData);

  _imps = omc_NFSCodeEnv_newImportTable(threadData);

  _is_used = omc_Mutable_create(threadData, mmc_mk_boolean(0 /* false */));

  _tree = omc_NFSCodeEnv_addDummyClassToTree(threadData, _OMC_LIT36, _tree);

  _tree = omc_NFSCodeEnv_addDummyClassToTree(threadData, _OMC_LIT37, _tree);

  _tree = omc_NFSCodeEnv_addDummyClassToTree(threadData, _OMC_LIT38, _tree);

  tmpMeta2 = mmc_mk_box7(3, &NFSCodeEnv_Frame_FRAME__desc, mmc_mk_none(), _OMC_LIT39, _tree, _exts, _imps, mmc_mk_some(_is_used));
  tmpMeta1 = mmc_mk_cons(tmpMeta2, MMC_REFSTRUCTLIT(mmc_nil));
  _outInitialEnv = tmpMeta1;

  omc_FBuiltin_getInitialFunctions(threadData ,&_p);

  _outInitialEnv = omc_NFSCodeEnv_extendEnvWithClasses(threadData, _p, _outInitialEnv);
  _return: OMC_LABEL_UNUSED
  return _outInitialEnv;
}

DLLDirection
modelica_string omc_NFSCodeEnv_getRedeclarationNameInfo(threadData_t *threadData, modelica_metatype _inRedeclare, modelica_metatype *out_outInfo)
{
  modelica_string _outName = NULL;
  modelica_metatype _outInfo = NULL;
  modelica_string tmp1_c0 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outName has no default value.
  // _outInfo has no default value.
  
  
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inRedeclare;
    {
      modelica_metatype _el = NULL;
      modelica_string _name = NULL;
      modelica_metatype _info = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _el has no default value.
      // _name has no default value.
      // _info has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,2,3) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
          _name = tmpMeta7;
          _info = tmpMeta8;
          /* Pattern matching succeeded */
          tmp1_c0 = _name;
          tmpMeta[0+1] = _info;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          _el = omc_NFSCodeEnv_getRedeclarationElement(threadData, _inRedeclare);
          tmp1_c0 = omc_SCodeUtil_elementNameInfo(threadData, _el, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outName = tmp1_c0;
  _outInfo = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outInfo) { *out_outInfo = _outInfo; }
  return _outName;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_getRedeclarationElement(threadData_t *threadData, modelica_metatype _inRedeclare)
{
  modelica_metatype _outElement = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outElement has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inRedeclare;
    {
      modelica_metatype _e = NULL;
      modelica_metatype _item = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e has no default value.
      // _item has no default value.
      tmp4 = 0;
      for (; tmp4 < 4; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          _e = tmpMeta6;
          /* Pattern matching succeeded */
          tmpMeta1 = _e;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,3) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
          
          _e = tmpMeta8;
          /* Pattern matching succeeded */
          tmpMeta1 = _e;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,2) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
          
          _e = tmpMeta10;
          /* Pattern matching succeeded */
          tmpMeta1 = _e;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,3,2) == 0) goto tmp3_end;
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
          
          _item = tmpMeta12;
          /* Pattern matching succeeded */
          tmpMeta13 = mmc_mk_box2(4, &NFSCodeEnv_Redeclaration_PROCESSED__MODIFIER__desc, _item);
          /* Tail recursive call */
          _inRedeclare = tmpMeta13;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outElement = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outElement;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_prefixIdentWithEnv(threadData_t *threadData, modelica_string _inIdent, modelica_metatype _inEnv)
{
  modelica_metatype _outPath = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outPath has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inEnv;
    {
      modelica_metatype _path = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _path has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (!optionNone(tmpMeta8)) goto tmp3_end;
          if (!listEmpty(tmpMeta7)) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta9 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _inIdent);
          tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          _path = omc_NFSCodeEnv_getEnvPath(threadData, _inEnv);
          tmpMeta1 = omc_AbsynUtil_suffixPath(threadData, _path, _inIdent);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outPath = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outPath;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_mergeTypeSpecWithEnvPath(threadData_t *threadData, modelica_metatype _inTS, modelica_metatype _inEnv)
{
  modelica_metatype _outTS = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outTS has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _inTS;
    {
      modelica_metatype _path = NULL;
      modelica_string _id = NULL;
      modelica_metatype _ad = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _path has no default value.
      // _id has no default value.
      // _ad has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          _path = tmpMeta6;
          _ad = tmpMeta7;
          /* Pattern matching succeeded */
          _id = omc_AbsynUtil_pathLastIdent(threadData, _path);

          tmpMeta8 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
          _path = omc_AbsynUtil_joinPaths(threadData, omc_NFSCodeEnv_getEnvPath(threadData, _inEnv), tmpMeta8);
          tmpMeta9 = mmc_mk_box3(3, &Absyn_TypeSpec_TPATH__desc, _path, _ad);
          tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _inTS;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outTS = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outTS;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_mergePathWithEnvPath(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inEnv)
{
  modelica_metatype _outPath = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outPath has no default value.
  { /* matchcontinue expression */
    {
      modelica_metatype _env_path = NULL;
      modelica_string _id = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _env_path has no default value.
      // _id has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          /* Pattern matching succeeded */
          _env_path = omc_NFSCodeEnv_getEnvPath(threadData, _inEnv);

          _id = omc_AbsynUtil_pathLastIdent(threadData, _inPath);
          tmpMeta6 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
          tmpMeta1 = omc_AbsynUtil_joinPaths(threadData, _env_path, tmpMeta6);
          goto tmp3_done;
        }
        case 1: {
          /* Pattern matching succeeded */
          tmpMeta1 = _inPath;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outPath = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outPath;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_setEnvClsAndVars(threadData_t *threadData, modelica_metatype _inTree, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype _name = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _ext = NULL;
  modelica_metatype _imps = NULL;
  modelica_metatype _is_used = NULL;
  modelica_metatype _rest_env = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  // _name has no default value.
  // _ty has no default value.
  // _ext has no default value.
  // _imps has no default value.
  // _is_used has no default value.
  // _rest_env has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inEnv;
  if (listEmpty(tmpMeta1)) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_CAR(tmpMeta1);
  tmpMeta3 = MMC_CDR(tmpMeta1);
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 3));
  tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 5));
  tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 6));
  tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 7));
  _name = tmpMeta4;
  _ty = tmpMeta5;
  _ext = tmpMeta6;
  _imps = tmpMeta7;
  _is_used = tmpMeta8;
  _rest_env = tmpMeta3;

  tmpMeta10 = mmc_mk_box7(3, &NFSCodeEnv_Frame_FRAME__desc, _name, _ty, _inTree, _ext, _imps, _is_used);
  tmpMeta9 = mmc_mk_cons(tmpMeta10, _rest_env);
  _outEnv = tmpMeta9;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_setEnvExtendsTable(threadData_t *threadData, modelica_metatype _inExtendsTable, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype _name = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _tree = NULL;
  modelica_metatype _imps = NULL;
  modelica_metatype _is_used = NULL;
  modelica_metatype _rest_env = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  // _name has no default value.
  // _ty has no default value.
  // _tree has no default value.
  // _imps has no default value.
  // _is_used has no default value.
  // _rest_env has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inEnv;
  if (listEmpty(tmpMeta1)) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_CAR(tmpMeta1);
  tmpMeta3 = MMC_CDR(tmpMeta1);
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 3));
  tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 4));
  tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 6));
  tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 7));
  _name = tmpMeta4;
  _ty = tmpMeta5;
  _tree = tmpMeta6;
  _imps = tmpMeta7;
  _is_used = tmpMeta8;
  _rest_env = tmpMeta3;

  tmpMeta10 = mmc_mk_box7(3, &NFSCodeEnv_Frame_FRAME__desc, _name, _ty, _tree, _inExtendsTable, _imps, _is_used);
  tmpMeta9 = mmc_mk_cons(tmpMeta10, _rest_env);
  _outEnv = tmpMeta9;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_getDerivedClassRedeclares(threadData_t *threadData, modelica_string _inDerivedName, modelica_metatype _inTypeSpec, modelica_metatype _inEnv)
{
  modelica_metatype _outRedeclarations = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outRedeclarations has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _inTypeSpec;
    {
      modelica_metatype _bc = NULL;
      modelica_metatype _path = NULL;
      modelica_metatype _rm = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _bc has no default value.
      // _path has no default value.
      // _rm has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_boolean tmp12;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _path = tmpMeta6;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta7 = omc_NFSCodeEnv_getEnvExtendsFromTable(threadData, _inEnv);
          if (listEmpty(tmpMeta7)) goto goto_2;
          tmpMeta8 = MMC_CAR(tmpMeta7);
          tmpMeta9 = MMC_CDR(tmpMeta7);
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
          if (!listEmpty(tmpMeta9)) goto goto_2;
          _bc = tmpMeta10;
          _rm = tmpMeta11;

          /* Pattern-matching assignment */
          tmp12 = omc_AbsynUtil_pathSuffixOf(threadData, _path, _bc);
          if (1 /* true */ != tmp12) goto goto_2;
          tmpMeta1 = _rm;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_boolean tmp19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _path = tmpMeta13;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta14 = omc_NFSCodeEnv_getEnvExtendsFromTable(threadData, _inEnv);
          if (listEmpty(tmpMeta14)) goto goto_2;
          tmpMeta15 = MMC_CAR(tmpMeta14);
          tmpMeta16 = MMC_CDR(tmpMeta14);
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 3));
          if (!listEmpty(tmpMeta16)) goto goto_2;
          _bc = tmpMeta17;
          _rm = tmpMeta18;

          /* Pattern-matching assignment */
          tmp19 = omc_AbsynUtil_pathSuffixOf(threadData, _path, _bc);
          if (0 /* false */ != tmp19) goto goto_2;

          tmpMeta20 = stringAppend(_OMC_LIT40,omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT3, 1 /* true */, 0 /* false */));
          tmpMeta21 = stringAppend(tmpMeta20,_OMC_LIT41);
          tmpMeta22 = stringAppend(tmpMeta21,omc_AbsynUtil_pathString(threadData, _bc, _OMC_LIT3, 1 /* true */, 0 /* false */));
          tmpMeta23 = stringAppend(tmpMeta22,_OMC_LIT6);
          fputs(MMC_STRINGDATA(tmpMeta23),stdout);
          tmpMeta1 = _rm;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta24;
          
          /* Pattern matching succeeded */
          tmpMeta24 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta1 = tmpMeta24;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outRedeclarations = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outRedeclarations;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_getEnvExtendsFromTable(threadData_t *threadData, modelica_metatype _inEnv)
{
  modelica_metatype _outExtends = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExtends has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = omc_NFSCodeEnv_getEnvExtendsTable(threadData, _inEnv);
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  _outExtends = tmpMeta2;
  _return: OMC_LABEL_UNUSED
  return _outExtends;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_getEnvExtendsTable(threadData_t *threadData, modelica_metatype _inEnv)
{
  modelica_metatype _outExtendsTable = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExtendsTable has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inEnv;
  if (listEmpty(tmpMeta1)) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_CAR(tmpMeta1);
  tmpMeta3 = MMC_CDR(tmpMeta1);
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 5));
  _outExtendsTable = tmpMeta4;
  _return: OMC_LABEL_UNUSED
  return _outExtendsTable;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_resolveRedeclaredItem(threadData_t *threadData, modelica_metatype _inItem, modelica_metatype _inEnv, modelica_metatype *out_outEnv, modelica_metatype *out_outPreviousItem)
{
  modelica_metatype _outItem = NULL;
  modelica_metatype _outEnv = NULL;
  modelica_metatype _outPreviousItem = NULL;
  modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outItem has no default value.
  // _outEnv has no default value.
  // _outPreviousItem has no default value.
  
  
  
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inItem;
    {
      modelica_metatype _item = NULL;
      modelica_metatype _env = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _item has no default value.
      // _env has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          _item = tmpMeta6;
          _env = tmpMeta7;
          /* Pattern matching succeeded */
          tmpMeta9 = mmc_mk_box2(0, _inItem, _inEnv);
          tmpMeta8 = mmc_mk_cons(tmpMeta9, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta[0+0] = _item;
          tmpMeta[0+1] = _env;
          tmpMeta[0+2] = tmpMeta8;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta10;
          
          /* Pattern matching succeeded */
          tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta[0+0] = _inItem;
          tmpMeta[0+1] = _inEnv;
          tmpMeta[0+2] = tmpMeta10;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outItem = tmpMeta[0+0];
  _outEnv = tmpMeta[0+1];
  _outPreviousItem = tmpMeta[0+2];
  _return: OMC_LABEL_UNUSED
  if (out_outEnv) { *out_outEnv = _outEnv; }
  if (out_outPreviousItem) { *out_outPreviousItem = _outPreviousItem; }
  return _outItem;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_getItemPrefixes(threadData_t *threadData, modelica_metatype _inItem)
{
  modelica_metatype _outPrefixes = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outPrefixes has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inItem;
    {
      modelica_metatype _pf = NULL;
      modelica_metatype _item = NULL;
      int tmp4;
      // _pf has no default value.
      // _item has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 4: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta5,2,8) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 3));
          
          _pf = tmpMeta6;
          /* Pattern matching succeeded */
          tmpMeta1 = _pf;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,3,8) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
          
          _pf = tmpMeta8;
          /* Pattern matching succeeded */
          tmpMeta1 = _pf;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _item = tmpMeta9;
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _inItem = _item;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outPrefixes = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outPrefixes;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_unmergeItemEnv(threadData_t *threadData, modelica_metatype _inItem, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inEnv;
    {
      modelica_metatype _env = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _env has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          _env = tmpMeta7;
          /* Pattern matching succeeded */
          tmpMeta1 = _env;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _inEnv;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outEnv = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_mergeItemEnv(threadData_t *threadData, modelica_metatype _inItem, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inItem;
    {
      modelica_metatype _cls_env = NULL;
      modelica_metatype _item = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _cls_env has no default value.
      // _item has no default value.
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta6)) goto tmp3_end;
          tmpMeta7 = MMC_CAR(tmpMeta6);
          tmpMeta8 = MMC_CDR(tmpMeta6);
          if (!listEmpty(tmpMeta8)) goto tmp3_end;
          
          _cls_env = tmpMeta7;
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFSCodeEnv_enterFrame(threadData, _cls_env, _inEnv);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _item = tmpMeta9;
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _inItem = _item;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _inEnv;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outEnv = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_setItemEnv(threadData_t *threadData, modelica_metatype _inItem, modelica_metatype _inNewEnv)
{
  modelica_metatype _outItem = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outItem has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inItem;
    {
      modelica_metatype _item = NULL;
      modelica_metatype _cls = NULL;
      modelica_metatype _ct = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _item has no default value.
      // _cls has no default value.
      // _ct has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _cls = tmpMeta6;
          _ct = tmpMeta7;
          /* Pattern matching succeeded */
          tmpMeta8 = mmc_mk_box4(4, &NFSCodeEnv_Item_CLASS__desc, _cls, _inNewEnv, _ct);
          tmpMeta1 = tmpMeta8;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _item = tmpMeta9;
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _inItem = _item;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outItem = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outItem;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_getItemEnvNoFail(threadData_t *threadData, modelica_metatype _inItem)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _inItem;
    {
      modelica_metatype _env = NULL;
      modelica_metatype _item = NULL;
      modelica_string _str = NULL;
      modelica_metatype _f = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _env has no default value.
      // _item has no default value.
      // _str has no default value.
      // _f has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _env = tmpMeta6;
          tmp4 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta1 = _env;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _item = tmpMeta7;
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFSCodeEnv_getItemEnvNoFail(threadData, _item);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          
          /* Pattern matching succeeded */
          tmpMeta8 = stringAppend(_OMC_LIT42,omc_NFSCodeEnv_getItemName(threadData, _inItem));
          _str = tmpMeta8;

          _f = omc_NFSCodeEnv_newFrame(threadData, mmc_mk_some(_str), _OMC_LIT43);
          tmpMeta9 = mmc_mk_cons(_f, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outEnv = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_getItemEnv(threadData_t *threadData, modelica_metatype _inItem)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inItem;
    {
      modelica_metatype _env = NULL;
      modelica_metatype _item = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _env has no default value.
      // _item has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _env = tmpMeta6;
          /* Pattern matching succeeded */
          tmpMeta1 = _env;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _item = tmpMeta7;
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _inItem = _item;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outEnv = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_string omc_NFSCodeEnv_getItemName(threadData_t *threadData, modelica_metatype _inItem)
{
  modelica_string _outName = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outName has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inItem;
    {
      modelica_string _name = NULL;
      modelica_metatype _item = NULL;
      int tmp4;
      // _name has no default value.
      // _item has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta5,3,8) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 2));
          
          _name = tmpMeta6;
          /* Pattern matching succeeded */
          tmp1 = _name;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,2,8) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
          
          _name = tmpMeta8;
          /* Pattern matching succeeded */
          tmp1 = _name;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,3) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _name = tmpMeta9;
          /* Pattern matching succeeded */
          tmp1 = _name;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _item = tmpMeta10;
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _inItem = _item;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outName = tmp1;
  _return: OMC_LABEL_UNUSED
  return _outName;
}

DLLDirection
modelica_string omc_NFSCodeEnv_itemStr(threadData_t *threadData, modelica_metatype _inItem)
{
  modelica_string _outName = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outName has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _inItem;
    {
      modelica_string _name = NULL;
      modelica_string _alias_str = NULL;
      modelica_metatype _el = NULL;
      modelica_metatype _path = NULL;
      modelica_metatype _item = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _name has no default value.
      // _alias_str has no default value.
      // _el has no default value.
      // _path has no default value.
      // _item has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 6; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _el = tmpMeta6;
          tmp4 += 4; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmp1 = omc_SCodeDump_unparseElementStr(threadData, _el, _OMC_LIT5);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _el = tmpMeta7;
          tmp4 += 3; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmp1 = omc_SCodeDump_unparseElementStr(threadData, _el, _OMC_LIT5);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,3) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (optionNone(tmpMeta9)) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 1));
          
          _name = tmpMeta8;
          _path = tmpMeta10;
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          _alias_str = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT3, 1 /* true */, 0 /* false */);
          tmpMeta11 = stringAppend(_OMC_LIT44,_name);
          tmpMeta12 = stringAppend(tmpMeta11,_OMC_LIT45);
          tmpMeta13 = stringAppend(tmpMeta12,_alias_str);
          tmpMeta14 = stringAppend(tmpMeta13,_OMC_LIT3);
          tmpMeta15 = stringAppend(tmpMeta14,_name);
          tmpMeta16 = stringAppend(tmpMeta15,_OMC_LIT4);
          tmp1 = tmpMeta16;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,3) == 0) goto tmp3_end;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (!optionNone(tmpMeta18)) goto tmp3_end;
          
          _name = tmpMeta17;
          tmp4 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta19 = stringAppend(_OMC_LIT44,_name);
          tmpMeta20 = stringAppend(tmpMeta19,_OMC_LIT46);
          tmp1 = tmpMeta20;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
          tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _item = tmpMeta21;
          /* Pattern matching succeeded */
          _name = omc_NFSCodeEnv_itemStr(threadData, _item);
          tmpMeta22 = stringAppend(_OMC_LIT47,_name);
          tmp1 = tmpMeta22;
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT48;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 6) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outName = tmp1;
  _return: OMC_LABEL_UNUSED
  return _outName;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_getItemInfo(threadData_t *threadData, modelica_metatype _inItem)
{
  modelica_metatype _outInfo = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outInfo has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inItem;
    {
      modelica_metatype _info = NULL;
      modelica_metatype _item = NULL;
      int tmp4;
      // _info has no default value.
      // _item has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta5,3,8) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 9));
          
          _info = tmpMeta6;
          /* Pattern matching succeeded */
          tmpMeta1 = _info;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,2,8) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 9));
          
          _info = tmpMeta8;
          /* Pattern matching succeeded */
          tmpMeta1 = _info;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,3) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _info = tmpMeta9;
          /* Pattern matching succeeded */
          tmpMeta1 = _info;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _item = tmpMeta10;
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _inItem = _item;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outInfo = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outInfo;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_envEqualPrefix2(threadData_t *threadData, modelica_metatype _inEnv1, modelica_metatype _inEnv2, modelica_metatype _inAccumEnv)
{
  modelica_metatype _outPrefix = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outPrefix has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inEnv1;
    tmp4_2 = _inEnv2;
    {
      modelica_string _name1 = NULL;
      modelica_string _name2 = NULL;
      modelica_metatype _rest_env1 = NULL;
      modelica_metatype _rest_env2 = NULL;
      modelica_metatype _frame = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _name1 has no default value.
      // _name2 has no default value.
      // _rest_env1 has no default value.
      // _rest_env2 has no default value.
      // _frame has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_boolean tmp14;
          modelica_metatype tmpMeta15;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (optionNone(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta10 = MMC_CAR(tmp4_2);
          tmpMeta11 = MMC_CDR(tmp4_2);
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
          if (optionNone(tmpMeta12)) goto tmp3_end;
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 1));
          
          _frame = tmpMeta6;
          _name1 = tmpMeta9;
          _rest_env1 = tmpMeta7;
          _name2 = tmpMeta13;
          _rest_env2 = tmpMeta11;
          tmp4 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
          /* Pattern-matching assignment */
          tmp14 = (stringEqual(_name1, _name2));
          if (1 /* true */ != tmp14) goto goto_2;
          tmpMeta15 = mmc_mk_cons(_frame, _inAccumEnv);
          tmpMeta1 = omc_NFSCodeEnv_envEqualPrefix2(threadData, _rest_env1, _rest_env2, tmpMeta15);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta16 = MMC_CAR(tmp4_1);
          tmpMeta17 = MMC_CDR(tmp4_1);
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
          if (!optionNone(tmpMeta18)) goto tmp3_end;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta19 = MMC_CAR(tmp4_2);
          tmpMeta20 = MMC_CDR(tmp4_2);
          tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 2));
          if (!optionNone(tmpMeta21)) goto tmp3_end;
          
          _rest_env1 = tmpMeta17;
          _rest_env2 = tmpMeta20;
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFSCodeEnv_envEqualPrefix2(threadData, _rest_env1, _rest_env2, _inAccumEnv);
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _inAccumEnv;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outPrefix = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outPrefix;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_envEqualPrefix(threadData_t *threadData, modelica_metatype _inEnv1, modelica_metatype _inEnv2)
{
  modelica_metatype _outPrefix = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outPrefix has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _outPrefix = omc_NFSCodeEnv_envEqualPrefix2(threadData, listReverse(_inEnv1), listReverse(_inEnv2), tmpMeta1);
  _return: OMC_LABEL_UNUSED
  return _outPrefix;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_envScopeNames2(threadData_t *threadData, modelica_metatype _inEnv, modelica_metatype _inAccumNames)
{
  modelica_metatype _outNames = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outNames has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inEnv;
    {
      modelica_string _name = NULL;
      modelica_metatype _rest_env = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _name has no default value.
      // _rest_env has no default value.
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (optionNone(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
          
          _name = tmpMeta9;
          _rest_env = tmpMeta7;
          /* Pattern matching succeeded */
          tmpMeta10 = mmc_mk_cons(_name, _inAccumNames);
          /* Tail recursive call */
          _inEnv = _rest_env;
          _inAccumNames = tmpMeta10;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta11 = MMC_CAR(tmp4_1);
          tmpMeta12 = MMC_CDR(tmp4_1);
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
          if (!optionNone(tmpMeta13)) goto tmp3_end;
          
          _rest_env = tmpMeta12;
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _inEnv = _rest_env;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 2: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta1 = _inAccumNames;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outNames = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outNames;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_envScopeNames(threadData_t *threadData, modelica_metatype _inEnv)
{
  modelica_metatype _outNames = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outNames has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _outNames = omc_NFSCodeEnv_envScopeNames2(threadData, _inEnv, tmpMeta1);
  _return: OMC_LABEL_UNUSED
  return _outNames;
}

DLLDirection
modelica_boolean omc_NFSCodeEnv_envPrefixOf2(threadData_t *threadData, modelica_metatype _inPrefixEnv, modelica_metatype _inEnv)
{
  modelica_boolean _outIsPrefix;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outIsPrefix has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inPrefixEnv;
    tmp4_2 = _inEnv;
    {
      modelica_string _n1 = NULL;
      modelica_string _n2 = NULL;
      modelica_metatype _rest1 = NULL;
      modelica_metatype _rest2 = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _n1 has no default value.
      // _n2 has no default value.
      // _rest1 has no default value.
      // _rest2 has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 4; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (!optionNone(tmpMeta8)) goto tmp3_end;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta9 = MMC_CAR(tmp4_2);
          tmpMeta10 = MMC_CDR(tmp4_2);
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
          if (!optionNone(tmpMeta11)) goto tmp3_end;
          
          _rest1 = tmpMeta7;
          _rest2 = tmpMeta10;
          tmp4 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmp1 = omc_NFSCodeEnv_envPrefixOf2(threadData, _rest1, _rest2);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_boolean tmp20;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta12 = MMC_CAR(tmp4_1);
          tmpMeta13 = MMC_CDR(tmp4_1);
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
          if (optionNone(tmpMeta14)) goto tmp3_end;
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 1));
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta16 = MMC_CAR(tmp4_2);
          tmpMeta17 = MMC_CDR(tmp4_2);
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
          if (optionNone(tmpMeta18)) goto tmp3_end;
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 1));
          
          _n1 = tmpMeta15;
          _rest1 = tmpMeta13;
          _n2 = tmpMeta19;
          _rest2 = tmpMeta17;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp20 = (stringEqual(_n1, _n2));
          if (1 /* true */ != tmp20) goto goto_2;
          tmp1 = omc_NFSCodeEnv_envPrefixOf2(threadData, _rest1, _rest2);
          goto tmp3_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 4) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outIsPrefix = tmp1;
  _return: OMC_LABEL_UNUSED
  return _outIsPrefix;
}
modelica_metatype boxptr_NFSCodeEnv_envPrefixOf2(threadData_t *threadData, modelica_metatype _inPrefixEnv, modelica_metatype _inEnv)
{
  modelica_boolean _outIsPrefix;
  modelica_metatype out_outIsPrefix;
  _outIsPrefix = omc_NFSCodeEnv_envPrefixOf2(threadData, _inPrefixEnv, _inEnv);
  out_outIsPrefix = mmc_mk_icon(_outIsPrefix);
  return out_outIsPrefix;
}

DLLDirection
modelica_boolean omc_NFSCodeEnv_envPrefixOf(threadData_t *threadData, modelica_metatype _inPrefixEnv, modelica_metatype _inEnv)
{
  modelica_boolean _outIsPrefix;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outIsPrefix has no default value.
  _outIsPrefix = omc_NFSCodeEnv_envPrefixOf2(threadData, listReverse(_inPrefixEnv), listReverse(_inEnv));
  _return: OMC_LABEL_UNUSED
  return _outIsPrefix;
}
modelica_metatype boxptr_NFSCodeEnv_envPrefixOf(threadData_t *threadData, modelica_metatype _inPrefixEnv, modelica_metatype _inEnv)
{
  modelica_boolean _outIsPrefix;
  modelica_metatype out_outIsPrefix;
  _outIsPrefix = omc_NFSCodeEnv_envPrefixOf(threadData, _inPrefixEnv, _inEnv);
  out_outIsPrefix = mmc_mk_icon(_outIsPrefix);
  return out_outIsPrefix;
}

DLLDirection
modelica_string omc_NFSCodeEnv_getScopeName(threadData_t *threadData, modelica_metatype _inEnv)
{
  modelica_string _outString = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outString has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inEnv;
    {
      modelica_string _name = NULL;
      modelica_metatype _rest = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _name has no default value.
      // _rest has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (optionNone(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
          
          _name = tmpMeta9;
          /* Pattern matching succeeded */
          tmp1 = _name;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta10 = MMC_CAR(tmp4_1);
          tmpMeta11 = MMC_CDR(tmp4_1);
          _rest = tmpMeta11;
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _inEnv = _rest;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outString = tmp1;
  _return: OMC_LABEL_UNUSED
  return _outString;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_getEnvPath(threadData_t *threadData, modelica_metatype _inEnv)
{
  modelica_metatype _outPath = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outPath has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inEnv;
    {
      modelica_string _name = NULL;
      modelica_metatype _path = NULL;
      modelica_metatype _rest = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _name has no default value.
      // _path has no default value.
      // _rest has no default value.
      tmp4 = 0;
      for (; tmp4 < 4; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,2,1) == 0) goto tmp3_end;
          
          _rest = tmpMeta7;
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _inEnv = _rest;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta9 = MMC_CAR(tmp4_1);
          tmpMeta10 = MMC_CDR(tmp4_1);
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
          if (optionNone(tmpMeta11)) goto tmp3_end;
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 1));
          if (!listEmpty(tmpMeta10)) goto tmp3_end;
          _name = tmpMeta12;
          /* Pattern matching succeeded */
          tmpMeta13 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
          tmpMeta1 = tmpMeta13;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta14 = MMC_CAR(tmp4_1);
          tmpMeta15 = MMC_CDR(tmp4_1);
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
          if (optionNone(tmpMeta16)) goto tmp3_end;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 1));
          if (listEmpty(tmpMeta15)) goto tmp3_end;
          tmpMeta18 = MMC_CAR(tmpMeta15);
          tmpMeta19 = MMC_CDR(tmpMeta15);
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
          if (!optionNone(tmpMeta20)) goto tmp3_end;
          if (!listEmpty(tmpMeta19)) goto tmp3_end;
          _name = tmpMeta17;
          /* Pattern matching succeeded */
          tmpMeta21 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
          tmpMeta1 = tmpMeta21;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta22 = MMC_CAR(tmp4_1);
          tmpMeta23 = MMC_CDR(tmp4_1);
          tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 2));
          if (optionNone(tmpMeta24)) goto tmp3_end;
          tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 1));
          
          _name = tmpMeta25;
          _rest = tmpMeta23;
          /* Pattern matching succeeded */
          _path = omc_NFSCodeEnv_getEnvPath(threadData, _rest);
          tmpMeta26 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
          tmpMeta1 = omc_AbsynUtil_joinPaths(threadData, _path, tmpMeta26);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outPath = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outPath;
}

DLLDirection
modelica_string omc_NFSCodeEnv_getEnvName(threadData_t *threadData, modelica_metatype _inEnv)
{
  modelica_string _outString = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outString has no default value.
  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          /* Pattern matching succeeded */
          tmp1 = omc_AbsynUtil_pathString(threadData, omc_NFSCodeEnv_getEnvPath(threadData, _inEnv), _OMC_LIT3, 1 /* true */, 0 /* false */);
          goto tmp3_done;
        }
        case 1: {
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT11;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outString = tmp1;
  _return: OMC_LABEL_UNUSED
  return _outString;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_extendEnvWithElementItem(threadData_t *threadData, modelica_metatype _inElementItem, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inElementItem;
    {
      modelica_metatype _element = NULL;
      modelica_metatype _el = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _element has no default value.
      // _el has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          _element = tmpMeta6;
          /* Pattern matching succeeded */
          _el = omc_AbsynToSCode_translateElement(threadData, _element, _OMC_LIT49);
          tmpMeta1 = omc_List_fold(threadData, _el, boxvar_NFSCodeEnv_extendEnvWithElement, _inEnv);
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _inEnv;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outEnv = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_extendEnvWithMatch(threadData_t *threadData, modelica_metatype _inMatchExp, modelica_integer _iterIndex, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype _frame = NULL;
  modelica_metatype _local_decls = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  // _frame has no default value.
  // _local_decls has no default value.
  tmpMeta1 = mmc_mk_box2(5, &NFSCodeEnv_FrameType_IMPLICIT__SCOPE__desc, mmc_mk_integer(_iterIndex));
  _frame = omc_NFSCodeEnv_newFrame(threadData, _OMC_LIT51, tmpMeta1);

  /* Pattern-matching assignment */
  tmpMeta2 = _inMatchExp;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta2,21,5) == 0) MMC_THROW_INTERNAL();
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 4));
  _local_decls = tmpMeta3;

  tmpMeta4 = mmc_mk_cons(_frame, _inEnv);
  _outEnv = omc_List_fold(threadData, _local_decls, boxvar_NFSCodeEnv_extendEnvWithElementItem, tmpMeta4);
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}
modelica_metatype boxptr_NFSCodeEnv_extendEnvWithMatch(threadData_t *threadData, modelica_metatype _inMatchExp, modelica_metatype _iterIndex, modelica_metatype _inEnv)
{
  modelica_integer tmp1;
  modelica_metatype _outEnv = NULL;
  tmp1 = mmc_unbox_integer(_iterIndex);
  _outEnv = omc_NFSCodeEnv_extendEnvWithMatch(threadData, _inMatchExp, tmp1, _inEnv);
  /* skip box _outEnv; list<NFSCodeEnv.Frame> */
  return _outEnv;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_extendEnvWithIterator(threadData_t *threadData, modelica_metatype _inIterator, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  modelica_string _iter_name = NULL;
  modelica_metatype _iter = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  // _iter_name has no default value.
  // _iter has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inIterator;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  _iter_name = tmpMeta2;

  tmpMeta3 = mmc_mk_box9(6, &SCode_Element_COMPONENT__desc, _iter_name, _OMC_LIT27, _OMC_LIT57, _OMC_LIT59, _OMC_LIT60, _OMC_LIT32, mmc_mk_none(), _OMC_LIT34);
  _iter = tmpMeta3;

  _outEnv = omc_NFSCodeEnv_extendEnvWithElement(threadData, _iter, _inEnv);
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_extendEnvWithIterators(threadData_t *threadData, modelica_metatype _inIterators, modelica_integer _iterIndex, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype _frame = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  // _frame has no default value.
  tmpMeta1 = mmc_mk_box2(5, &NFSCodeEnv_FrameType_IMPLICIT__SCOPE__desc, mmc_mk_integer(_iterIndex));
  _frame = omc_NFSCodeEnv_newFrame(threadData, _OMC_LIT62, tmpMeta1);

  tmpMeta2 = mmc_mk_cons(_frame, _inEnv);
  _outEnv = omc_List_fold(threadData, _inIterators, boxvar_NFSCodeEnv_extendEnvWithIterator, tmpMeta2);
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}
modelica_metatype boxptr_NFSCodeEnv_extendEnvWithIterators(threadData_t *threadData, modelica_metatype _inIterators, modelica_metatype _iterIndex, modelica_metatype _inEnv)
{
  modelica_integer tmp1;
  modelica_metatype _outEnv = NULL;
  tmp1 = mmc_unbox_integer(_iterIndex);
  _outEnv = omc_NFSCodeEnv_extendEnvWithIterators(threadData, _inIterators, tmp1, _inEnv);
  /* skip box _outEnv; list<NFSCodeEnv.Frame> */
  return _outEnv;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_extendEnvWithEnum(threadData_t *threadData, modelica_metatype _inEnum, modelica_metatype _inEnumPath, modelica_integer _inValue, modelica_metatype _inEnv, modelica_metatype _inInfo)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype _enum_lit = NULL;
  modelica_string _lit_name = NULL;
  modelica_metatype _ty = NULL;
  modelica_string _index = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  // _enum_lit has no default value.
  // _lit_name has no default value.
  // _ty has no default value.
  // _index has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inEnum;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  _lit_name = tmpMeta2;

  _index = intString(_inValue);

  tmpMeta3 = mmc_mk_box3(3, &Absyn_Path_QUALIFIED__desc, _index, _inEnumPath);
  tmpMeta4 = mmc_mk_box3(3, &Absyn_Path_QUALIFIED__desc, _OMC_LIT63, tmpMeta3);
  tmpMeta5 = mmc_mk_box3(3, &Absyn_TypeSpec_TPATH__desc, tmpMeta4, mmc_mk_none());
  _ty = tmpMeta5;

  tmpMeta6 = mmc_mk_box9(6, &SCode_Element_COMPONENT__desc, _lit_name, _OMC_LIT27, _OMC_LIT57, _ty, _OMC_LIT60, _OMC_LIT32, mmc_mk_none(), _inInfo);
  _enum_lit = tmpMeta6;

  _outEnv = omc_NFSCodeEnv_extendEnvWithElement(threadData, _enum_lit, _inEnv);
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFSCodeEnv_extendEnvWithEnum(threadData_t *threadData, modelica_metatype _inEnum, modelica_metatype _inEnumPath, modelica_metatype _inValue, modelica_metatype _inEnv, modelica_metatype _inInfo)
{
  modelica_integer tmp1;
  modelica_metatype _outEnv = NULL;
  tmp1 = mmc_unbox_integer(_inValue);
  _outEnv = omc_NFSCodeEnv_extendEnvWithEnum(threadData, _inEnum, _inEnumPath, tmp1, _inEnv, _inInfo);
  /* skip box _outEnv; list<NFSCodeEnv.Frame> */
  return _outEnv;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_extendEnvWithEnumLiterals(threadData_t *threadData, modelica_metatype _inEnum, modelica_metatype _inEnumPath, modelica_integer _inNextValue, modelica_metatype _inEnv, modelica_metatype _inInfo)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inEnum;
    {
      modelica_metatype _lit = NULL;
      modelica_metatype _rest_lits = NULL;
      modelica_metatype _env = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _lit has no default value.
      // _rest_lits has no default value.
      // _env has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          _lit = tmpMeta6;
          _rest_lits = tmpMeta7;
          /* Pattern matching succeeded */
          _env = omc_NFSCodeEnv_extendEnvWithEnum(threadData, _lit, _inEnumPath, _inNextValue, _inEnv, _inInfo);
          /* Tail recursive call */
          _inEnum = _rest_lits;
          _inNextValue = ((modelica_integer) 1) + _inNextValue;
          _inEnv = _env;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 1: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta1 = _inEnv;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outEnv = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFSCodeEnv_extendEnvWithEnumLiterals(threadData_t *threadData, modelica_metatype _inEnum, modelica_metatype _inEnumPath, modelica_metatype _inNextValue, modelica_metatype _inEnv, modelica_metatype _inInfo)
{
  modelica_integer tmp1;
  modelica_metatype _outEnv = NULL;
  tmp1 = mmc_unbox_integer(_inNextValue);
  _outEnv = omc_NFSCodeEnv_extendEnvWithEnumLiterals(threadData, _inEnum, _inEnumPath, tmp1, _inEnv, _inInfo);
  /* skip box _outEnv; list<NFSCodeEnv.Frame> */
  return _outEnv;
}

PROTECTED_FUNCTION_STATIC modelica_boolean omc_NFSCodeEnv_compareQualifiedImportNames(threadData_t *threadData, modelica_metatype _inImport1, modelica_metatype _inImport2)
{
  modelica_boolean _outEqual;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEqual has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _inImport1;
    tmp4_2 = _inImport2;
    {
      modelica_string _name1 = NULL;
      modelica_string _name2 = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _name1 has no default value.
      // _name2 has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          
          _name1 = tmpMeta6;
          _name2 = tmpMeta7;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(stringEqual(_name1, _name2))) goto tmp3_end;
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outEqual = tmp1;
  _return: OMC_LABEL_UNUSED
  return _outEqual;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFSCodeEnv_compareQualifiedImportNames(threadData_t *threadData, modelica_metatype _inImport1, modelica_metatype _inImport2)
{
  modelica_boolean _outEqual;
  modelica_metatype out_outEqual;
  _outEqual = omc_NFSCodeEnv_compareQualifiedImportNames(threadData, _inImport1, _inImport2);
  out_outEqual = mmc_mk_icon(_outEqual);
  return out_outEqual;
}

DLLDirection
void omc_NFSCodeEnv_checkUniqueQualifiedImport(threadData_t *threadData, modelica_metatype _inImport, modelica_metatype _inImports, modelica_metatype _inInfo)
{
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  { /* matchcontinue expression */
    volatile modelica_metatype tmp3_1;
    tmp3_1 = _inImport;
    {
      modelica_string _name = NULL;
      volatile mmc_switch_type tmp3;
      int tmp4;
      // _name has no default value.
      tmp3 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp2_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_boolean tmp5;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp5 = omc_List_isMemberOnTrue(threadData, _inImport, _inImports, boxvar_NFSCodeEnv_compareQualifiedImportNames);
          if (0 /* false */ != tmp5) goto goto_1;
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
          
          _name = tmpMeta6;
          /* Pattern matching succeeded */
          tmpMeta7 = mmc_mk_cons(_name, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addSourceMessage(threadData, _OMC_LIT68, tmpMeta7, _inInfo);
          goto goto_1;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      tmp2_done:
      (void)tmp3;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp2_done2;
      goto_1:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp3 < 2) {
        goto tmp2_top;
      }
      MMC_THROW_INTERNAL();
      tmp2_done2:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_extendEnvWithElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _inElement;
    {
      modelica_metatype _env = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _env has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 7; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,8) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,0) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _env = omc_NFSCodeEnv_addElementRedeclarationToEnvExtendsTable(threadData, _inElement, _inEnv);
          tmpMeta1 = omc_NFSCodeEnv_extendEnvWithVar(threadData, _inElement, _env);
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,8) == 0) goto tmp3_end;
          
          tmp4 += 5; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta1 = omc_NFSCodeEnv_extendEnvWithVar(threadData, _inElement, _inEnv);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,8) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,0) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _env = omc_NFSCodeEnv_addElementRedeclarationToEnvExtendsTable(threadData, _inElement, _inEnv);
          tmpMeta1 = omc_NFSCodeEnv_extendEnvWithClassDef(threadData, _inElement, _env);
          goto tmp3_done;
        }
        case 3: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,8) == 0) goto tmp3_end;
          
          tmp4 += 3; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta1 = omc_NFSCodeEnv_extendEnvWithClassDef(threadData, _inElement, _inEnv);
          goto tmp3_done;
        }
        case 4: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,5) == 0) goto tmp3_end;
          
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta1 = omc_NFSCodeEnv_extendEnvWithExtends(threadData, _inElement, _inEnv);
          goto tmp3_done;
        }
        case 5: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,3) == 0) goto tmp3_end;
          
          tmp4 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta1 = omc_NFSCodeEnv_extendEnvWithImport(threadData, _inElement, _inEnv);
          goto tmp3_done;
        }
        case 6: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,5) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = _inEnv;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 7) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outEnv = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_extendEnvWithClassComponents(threadData_t *threadData, modelica_string _inClassName, modelica_metatype _inClassDef, modelica_metatype _inEnv, modelica_metatype _inEnclosingScope, modelica_metatype _inInfo)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inClassDef;
    {
      modelica_metatype _el = NULL;
      modelica_metatype _enums = NULL;
      modelica_metatype _ty = NULL;
      modelica_metatype _mods = NULL;
      modelica_metatype _path = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _el has no default value.
      // _enums has no default value.
      // _ty has no default value.
      // _mods has no default value.
      // _path has no default value.
      tmp4 = 0;
      for (; tmp4 < 4; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,8) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _el = tmpMeta6;
          /* Pattern matching succeeded */
          tmpMeta1 = omc_List_fold(threadData, _el, boxvar_NFSCodeEnv_extendEnvWithElement, _inEnv);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,3) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,2) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _ty = tmpMeta7;
          _path = tmpMeta8;
          _mods = tmpMeta9;
          /* Pattern matching succeeded */
          omc_NFSCodeCheck_checkRecursiveShortDefinition(threadData, _ty, _inClassName, _inEnclosingScope, _inInfo);
          tmpMeta10 = mmc_mk_box6(4, &SCode_Element_EXTENDS__desc, _path, _OMC_LIT22, _mods, mmc_mk_none(), _inInfo);
          tmpMeta1 = omc_NFSCodeEnv_extendEnvWithExtends(threadData, tmpMeta10, _inEnv);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          _enums = tmpMeta11;
          /* Pattern matching succeeded */
          tmpMeta12 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _inClassName);
          _path = tmpMeta12;
          tmpMeta1 = omc_NFSCodeEnv_extendEnvWithEnumLiterals(threadData, _enums, _path, ((modelica_integer) 1), _inEnv, _inInfo);
          goto tmp3_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _inEnv;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outEnv = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_addElementRedeclarationToEnvExtendsTable(threadData_t *threadData, modelica_metatype _inRedeclare, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype _exts = NULL;
  modelica_metatype _re = NULL;
  modelica_metatype _cei = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  // _exts has no default value.
  // _re has no default value.
  // _cei has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = omc_NFSCodeEnv_getEnvExtendsTable(threadData, _inEnv);
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 4));
  _exts = tmpMeta2;
  _re = tmpMeta3;
  _cei = tmpMeta4;

  tmpMeta5 = mmc_mk_cons(_inRedeclare, _re);
  _re = tmpMeta5;

  tmpMeta6 = mmc_mk_box4(3, &NFSCodeEnv_ExtendsTable_EXTENDS__TABLE__desc, _exts, _re, _cei);
  _outEnv = omc_NFSCodeEnv_setEnvExtendsTable(threadData, tmpMeta6, _inEnv);
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_addExtendsToEnvExtendsTable(threadData_t *threadData, modelica_metatype _inExtends, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype _exts = NULL;
  modelica_metatype _re = NULL;
  modelica_metatype _cei = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  // _exts has no default value.
  // _re has no default value.
  // _cei has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = omc_NFSCodeEnv_getEnvExtendsTable(threadData, _inEnv);
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 4));
  _exts = tmpMeta2;
  _re = tmpMeta3;
  _cei = tmpMeta4;

  tmpMeta5 = mmc_mk_cons(_inExtends, _exts);
  _exts = tmpMeta5;

  tmpMeta6 = mmc_mk_box4(3, &NFSCodeEnv_ExtendsTable_EXTENDS__TABLE__desc, _exts, _re, _cei);
  _outEnv = omc_NFSCodeEnv_setEnvExtendsTable(threadData, tmpMeta6, _inEnv);
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_extendEnvWithExtends(threadData_t *threadData, modelica_metatype _inExtends, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype _bc = NULL;
  modelica_metatype _mods = NULL;
  modelica_metatype _redecls = NULL;
  modelica_metatype _info = NULL;
  modelica_metatype _env = NULL;
  modelica_integer _index;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  // _bc has no default value.
  // _mods has no default value.
  // _redecls has no default value.
  // _info has no default value.
  // _env has no default value.
  // _index has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inExtends;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,1,5) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 4));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 6));
  _bc = tmpMeta2;
  _mods = tmpMeta3;
  _info = tmpMeta4;

  _redecls = omc_NFSCodeFlattenRedeclare_extractRedeclaresFromModifier(threadData, _mods);

  _index = omc_System_tmpTickIndex(threadData, ((modelica_integer) 3));

  tmpMeta5 = mmc_mk_box5(3, &NFSCodeEnv_Extends_EXTENDS__desc, _bc, _redecls, mmc_mk_integer(_index), _info);
  _outEnv = omc_NFSCodeEnv_addExtendsToEnvExtendsTable(threadData, tmpMeta5, _inEnv);
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_translateQualifiedImportToNamed(threadData_t *threadData, modelica_metatype _inImport)
{
  modelica_metatype _outImport = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outImport has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inImport;
    {
      modelica_string _name = NULL;
      modelica_metatype _path = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _name has no default value.
      // _path has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = _inImport;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          _path = tmpMeta6;
          /* Pattern matching succeeded */
          _name = omc_AbsynUtil_pathLastIdent(threadData, _path);
          tmpMeta7 = mmc_mk_box3(3, &Absyn_Import_NAMED__IMPORT__desc, _name, _path);
          tmpMeta1 = tmpMeta7;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outImport = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outImport;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_extendEnvWithImport(threadData_t *threadData, modelica_metatype _inImport, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _inImport;
    tmp4_2 = _inEnv;
    {
      modelica_metatype _imp = NULL;
      modelica_metatype _name = NULL;
      modelica_metatype _tree = NULL;
      modelica_metatype _exts = NULL;
      modelica_metatype _qual_imps = NULL;
      modelica_metatype _unqual_imps = NULL;
      modelica_metatype _ty = NULL;
      modelica_metatype _rest = NULL;
      modelica_boolean _hidden;
      modelica_metatype _is_used = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _imp has no default value.
      // _name has no default value.
      // _tree has no default value.
      // _exts has no default value.
      // _qual_imps has no default value.
      // _unqual_imps has no default value.
      // _ty has no default value.
      // _rest has no default value.
      // _hidden has no default value.
      // _is_used has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_integer tmp14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_2);
          tmpMeta7 = MMC_CDR(tmp4_2);
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 5));
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 6));
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
          tmp14 = mmc_unbox_integer(tmpMeta13);
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 3));
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 4));
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 7));
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,3) == 0) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta18,2,1) == 0) goto tmp3_end;
          
          _name = tmpMeta8;
          _ty = tmpMeta9;
          _tree = tmpMeta10;
          _exts = tmpMeta11;
          _hidden = tmp14  /* pattern as ty=Boolean */;
          _qual_imps = tmpMeta15;
          _unqual_imps = tmpMeta16;
          _is_used = tmpMeta17;
          _rest = tmpMeta7;
          _imp = tmpMeta18;
          /* Pattern matching succeeded */
          tmpMeta19 = mmc_mk_cons(_imp, _unqual_imps);
          _unqual_imps = tmpMeta19;
          tmpMeta21 = mmc_mk_box4(3, &NFSCodeEnv_ImportTable_IMPORT__TABLE__desc, mmc_mk_boolean(_hidden), _qual_imps, _unqual_imps);
          tmpMeta22 = mmc_mk_box7(3, &NFSCodeEnv_Frame_FRAME__desc, _name, _ty, _tree, _exts, tmpMeta21, _is_used);
          tmpMeta20 = mmc_mk_cons(tmpMeta22, _rest);
          tmpMeta1 = tmpMeta20;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_integer tmp32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,3) == 0) goto tmp3_end;
          tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta24 = MMC_CAR(tmp4_2);
          tmpMeta25 = MMC_CDR(tmp4_2);
          tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 2));
          tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 3));
          tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 4));
          tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 5));
          tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 6));
          tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta30), 2));
          tmp32 = mmc_unbox_integer(tmpMeta31);
          tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta30), 3));
          tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta30), 4));
          tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 7));
          _imp = tmpMeta23;
          _name = tmpMeta26;
          _ty = tmpMeta27;
          _tree = tmpMeta28;
          _exts = tmpMeta29;
          _hidden = tmp32  /* pattern as ty=Boolean */;
          _qual_imps = tmpMeta33;
          _unqual_imps = tmpMeta34;
          _is_used = tmpMeta35;
          _rest = tmpMeta25;
          /* Pattern matching succeeded */
          _imp = omc_NFSCodeEnv_translateQualifiedImportToNamed(threadData, _imp);

          tmpMeta36 = mmc_mk_cons(_imp, _qual_imps);
          _qual_imps = tmpMeta36;
          tmpMeta38 = mmc_mk_box4(3, &NFSCodeEnv_ImportTable_IMPORT__TABLE__desc, mmc_mk_boolean(_hidden), _qual_imps, _unqual_imps);
          tmpMeta39 = mmc_mk_box7(3, &NFSCodeEnv_Frame_FRAME__desc, _name, _ty, _tree, _exts, tmpMeta38, _is_used);
          tmpMeta37 = mmc_mk_cons(tmpMeta39, _rest);
          tmpMeta1 = tmpMeta37;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outEnv = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_updateItemInEnv(threadData_t *threadData, modelica_metatype _inItem, modelica_metatype _inEnv, modelica_string _inItemName)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype _name = NULL;
  modelica_metatype _tree = NULL;
  modelica_metatype _exts = NULL;
  modelica_metatype _imps = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _rest = NULL;
  modelica_metatype _is_used = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  // _name has no default value.
  // _tree has no default value.
  // _exts has no default value.
  // _imps has no default value.
  // _ty has no default value.
  // _rest has no default value.
  // _is_used has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inEnv;
  if (listEmpty(tmpMeta1)) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_CAR(tmpMeta1);
  tmpMeta3 = MMC_CDR(tmpMeta1);
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 3));
  tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 4));
  tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 5));
  tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 6));
  tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 7));
  _name = tmpMeta4;
  _ty = tmpMeta5;
  _tree = tmpMeta6;
  _exts = tmpMeta7;
  _imps = tmpMeta8;
  _is_used = tmpMeta9;
  _rest = tmpMeta3;

  _tree = omc_NFSCodeEnv_EnvTree_add(threadData, _tree, _inItemName, _inItem, boxvar_NFSCodeEnv_EnvTree_addConflictDefault);

  tmpMeta11 = mmc_mk_box7(3, &NFSCodeEnv_Frame_FRAME__desc, _name, _ty, _tree, _exts, _imps, _is_used);
  tmpMeta10 = mmc_mk_cons(tmpMeta11, _rest);
  _outEnv = tmpMeta10;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_extendEnvWithItemConflict(threadData_t *threadData, modelica_metatype _newItem, modelica_metatype _oldItem, modelica_string _name)
{
  modelica_metatype _item = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _item has no default value.
  _item = omc_NFSCodeEnv_linkItemUsage(threadData, _oldItem, _newItem);
  _return: OMC_LABEL_UNUSED
  return _item;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_extendEnvWithItem(threadData_t *threadData, modelica_metatype _inItem, modelica_metatype _inEnv, modelica_string _inItemName)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype _name = NULL;
  modelica_metatype _tree = NULL;
  modelica_metatype _exts = NULL;
  modelica_metatype _imps = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _rest = NULL;
  modelica_metatype _is_used = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  // _name has no default value.
  // _tree has no default value.
  // _exts has no default value.
  // _imps has no default value.
  // _ty has no default value.
  // _rest has no default value.
  // _is_used has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inEnv;
  if (listEmpty(tmpMeta1)) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_CAR(tmpMeta1);
  tmpMeta3 = MMC_CDR(tmpMeta1);
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 3));
  tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 4));
  tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 5));
  tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 6));
  tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 7));
  _name = tmpMeta4;
  _ty = tmpMeta5;
  _tree = tmpMeta6;
  _exts = tmpMeta7;
  _imps = tmpMeta8;
  _is_used = tmpMeta9;
  _rest = tmpMeta3;

  _tree = omc_NFSCodeEnv_EnvTree_add(threadData, _tree, _inItemName, _inItem, boxvar_NFSCodeEnv_extendEnvWithItemConflict);

  tmpMeta11 = mmc_mk_box7(3, &NFSCodeEnv_Frame_FRAME__desc, _name, _ty, _tree, _exts, _imps, _is_used);
  tmpMeta10 = mmc_mk_cons(tmpMeta11, _rest);
  _outEnv = tmpMeta10;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_extendEnvWithVar(threadData_t *threadData, modelica_metatype _inVar, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  modelica_string _var_name = NULL;
  modelica_metatype _is_used = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _info = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  // _var_name has no default value.
  // _is_used has no default value.
  // _ty has no default value.
  // _info has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inVar;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,3,8) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 5));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 9));
  _var_name = tmpMeta2;
  _ty = tmpMeta3;
  _info = tmpMeta4;

  _is_used = omc_Mutable_create(threadData, mmc_mk_boolean(0 /* false */));

  tmpMeta5 = mmc_mk_box3(3, &NFSCodeEnv_Item_VAR__desc, _inVar, mmc_mk_some(_is_used));
  _outEnv = omc_NFSCodeEnv_extendEnvWithItem(threadData, tmpMeta5, _inEnv, _var_name);
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_makeClassEnvironment(threadData_t *threadData, modelica_metatype _inClassDefElement, modelica_boolean _inInModifierScope)
{
  modelica_metatype _outClassEnv = NULL;
  modelica_metatype _cdef = NULL;
  modelica_metatype _cls = NULL;
  modelica_string _cls_name = NULL;
  modelica_metatype _env = NULL;
  modelica_metatype _enclosing_env = NULL;
  modelica_metatype _info = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_boolean tmp7;
  modelica_metatype tmpMeta8;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outClassEnv has no default value.
  // _cdef has no default value.
  // _cls has no default value.
  // _cls_name has no default value.
  // _env has no default value.
  // _enclosing_env has no default value.
  // _info has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inClassDefElement;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,2,8) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 7));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 9));
  _cls_name = tmpMeta2;
  _cdef = tmpMeta3;
  _info = tmpMeta4;

  tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
  _env = omc_NFSCodeEnv_openScope(threadData, tmpMeta5, _inClassDefElement);

  tmp7 = (modelica_boolean)_inInModifierScope;
  if(tmp7)
  {
    tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
    tmpMeta8 = tmpMeta6;
  }
  else
  {
    tmpMeta8 = _env;
  }
  _enclosing_env = tmpMeta8;

  _outClassEnv = omc_NFSCodeEnv_extendEnvWithClassComponents(threadData, _cls_name, _cdef, _env, _enclosing_env, _info);
  _return: OMC_LABEL_UNUSED
  return _outClassEnv;
}
modelica_metatype boxptr_NFSCodeEnv_makeClassEnvironment(threadData_t *threadData, modelica_metatype _inClassDefElement, modelica_metatype _inInModifierScope)
{
  modelica_integer tmp1;
  modelica_metatype _outClassEnv = NULL;
  tmp1 = mmc_unbox_integer(_inInModifierScope);
  _outClassEnv = omc_NFSCodeEnv_makeClassEnvironment(threadData, _inClassDefElement, tmp1);
  /* skip box _outClassEnv; list<NFSCodeEnv.Frame> */
  return _outClassEnv;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_extendEnvWithClassDef(threadData_t *threadData, modelica_metatype _inClassDefElement, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inClassDefElement;
    {
      modelica_string _cls_name = NULL;
      modelica_string _alias_name = NULL;
      modelica_metatype _class_env = NULL;
      modelica_metatype _env = NULL;
      modelica_metatype _cdef = NULL;
      modelica_metatype _cls_type = NULL;
      modelica_metatype _info = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _cls_name has no default value.
      // _alias_name has no default value.
      // _class_env has no default value.
      // _env has no default value.
      // _cdef has no default value.
      // _cls_type has no default value.
      // _info has no default value.
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,8) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFEnvExtends_extendEnvWithClassExtends(threadData, _inClassDefElement, _inEnv);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,8) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 6));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,1) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 9));
          _cls_name = tmpMeta7;
          _cdef = tmpMeta10;
          _info = tmpMeta11;
          /* Pattern matching succeeded */
          _class_env = omc_NFSCodeEnv_makeClassEnvironment(threadData, _inClassDefElement, 0 /* false */);

          _cls_type = omc_NFSCodeEnv_getClassType(threadData, _cdef);

          tmpMeta12 = stringAppend(_cls_name,_OMC_LIT69);
          _alias_name = tmpMeta12;

          _env = omc_NFSCodeEnv_extendEnvWithItem(threadData, omc_NFSCodeEnv_newClassItem(threadData, _inClassDefElement, _class_env, _cls_type), _inEnv, _alias_name);
          tmpMeta13 = mmc_mk_box4(5, &NFSCodeEnv_Item_ALIAS__desc, _alias_name, mmc_mk_none(), _info);
          tmpMeta1 = omc_NFSCodeEnv_extendEnvWithItem(threadData, tmpMeta13, _env, _cls_name);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,8) == 0) goto tmp3_end;
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
          
          _cls_name = tmpMeta14;
          _cdef = tmpMeta15;
          /* Pattern matching succeeded */
          _class_env = omc_NFSCodeEnv_makeClassEnvironment(threadData, _inClassDefElement, 0 /* false */);

          _cls_type = omc_NFSCodeEnv_getClassType(threadData, _cdef);
          tmpMeta1 = omc_NFSCodeEnv_extendEnvWithItem(threadData, omc_NFSCodeEnv_newClassItem(threadData, _inClassDefElement, _class_env, _cls_type), _inEnv, _cls_name);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outEnv = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_boolean omc_NFSCodeEnv_isClassExtendsItem(threadData_t *threadData, modelica_metatype _inItem)
{
  modelica_boolean _outIsClassExtends;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outIsClassExtends has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inItem;
    {
      modelica_metatype _item = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _item has no default value.
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,2,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _item = tmpMeta7;
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _inItem = _item;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outIsClassExtends = tmp1;
  _return: OMC_LABEL_UNUSED
  return _outIsClassExtends;
}
modelica_metatype boxptr_NFSCodeEnv_isClassExtendsItem(threadData_t *threadData, modelica_metatype _inItem)
{
  modelica_boolean _outIsClassExtends;
  modelica_metatype out_outIsClassExtends;
  _outIsClassExtends = omc_NFSCodeEnv_isClassExtendsItem(threadData, _inItem);
  out_outIsClassExtends = mmc_mk_icon(_outIsClassExtends);
  return out_outIsClassExtends;
}

DLLDirection
modelica_boolean omc_NFSCodeEnv_isVarItem(threadData_t *threadData, modelica_metatype _inItem)
{
  modelica_boolean _outIsVar;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outIsVar has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inItem;
    {
      modelica_metatype _item = NULL;
      int tmp4;
      // _item has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta5;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _item = tmpMeta5;
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _inItem = _item;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outIsVar = tmp1;
  _return: OMC_LABEL_UNUSED
  return _outIsVar;
}
modelica_metatype boxptr_NFSCodeEnv_isVarItem(threadData_t *threadData, modelica_metatype _inItem)
{
  modelica_boolean _outIsVar;
  modelica_metatype out_outIsVar;
  _outIsVar = omc_NFSCodeEnv_isVarItem(threadData, _inItem);
  out_outIsVar = mmc_mk_icon(_outIsVar);
  return out_outIsVar;
}

DLLDirection
modelica_boolean omc_NFSCodeEnv_isClassItem(threadData_t *threadData, modelica_metatype _inItem)
{
  modelica_boolean _outIsClass;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outIsClass has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inItem;
    {
      modelica_metatype _item = NULL;
      int tmp4;
      // _item has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta5;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _item = tmpMeta5;
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _inItem = _item;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outIsClass = tmp1;
  _return: OMC_LABEL_UNUSED
  return _outIsClass;
}
modelica_metatype boxptr_NFSCodeEnv_isClassItem(threadData_t *threadData, modelica_metatype _inItem)
{
  modelica_boolean _outIsClass;
  modelica_metatype out_outIsClass;
  _outIsClass = omc_NFSCodeEnv_isClassItem(threadData, _inItem);
  out_outIsClass = mmc_mk_icon(_outIsClass);
  return out_outIsClass;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_linkItemUsage(threadData_t *threadData, modelica_metatype _inSrcItem, modelica_metatype _inDestItem)
{
  modelica_metatype _outDestItem = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDestItem has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _inSrcItem;
    tmp4_2 = _inDestItem;
    {
      modelica_metatype _is_used = NULL;
      modelica_metatype _elem = NULL;
      modelica_metatype _cls_ty = NULL;
      modelica_metatype _name = NULL;
      modelica_metatype _ft = NULL;
      modelica_metatype _cv = NULL;
      modelica_metatype _exts = NULL;
      modelica_metatype _imps = NULL;
      modelica_metatype _item = NULL;
      modelica_metatype _env = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _is_used has no default value.
      // _elem has no default value.
      // _cls_ty has no default value.
      // _name has no default value.
      // _ft has no default value.
      // _cv has no default value.
      // _exts has no default value.
      // _imps has no default value.
      // _item has no default value.
      // _env has no default value.
      tmp4 = 0;
      for (; tmp4 < 4; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          
          _is_used = tmpMeta6;
          _elem = tmpMeta7;
          /* Pattern matching succeeded */
          tmpMeta8 = mmc_mk_box3(3, &NFSCodeEnv_Item_VAR__desc, _elem, _is_used);
          tmpMeta1 = tmpMeta8;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta9)) goto tmp3_end;
          tmpMeta10 = MMC_CAR(tmpMeta9);
          tmpMeta11 = MMC_CDR(tmpMeta9);
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 7));
          if (!listEmpty(tmpMeta11)) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,3) == 0) goto tmp3_end;
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          if (listEmpty(tmpMeta14)) goto tmp3_end;
          tmpMeta15 = MMC_CAR(tmpMeta14);
          tmpMeta16 = MMC_CDR(tmpMeta14);
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 3));
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 4));
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 5));
          tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 6));
          if (!listEmpty(tmpMeta16)) goto tmp3_end;
          tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          _is_used = tmpMeta12;
          _elem = tmpMeta13;
          _name = tmpMeta17;
          _ft = tmpMeta18;
          _cv = tmpMeta19;
          _exts = tmpMeta20;
          _imps = tmpMeta21;
          _cls_ty = tmpMeta22;
          /* Pattern matching succeeded */
          tmpMeta24 = mmc_mk_box7(3, &NFSCodeEnv_Frame_FRAME__desc, _name, _ft, _cv, _exts, _imps, _is_used);
          tmpMeta23 = mmc_mk_cons(tmpMeta24, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta25 = mmc_mk_box4(4, &NFSCodeEnv_Item_CLASS__desc, _elem, tmpMeta23, _cls_ty);
          tmpMeta1 = tmpMeta25;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,3,2) == 0) goto tmp3_end;
          tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          
          _item = tmpMeta26;
          _env = tmpMeta27;
          /* Pattern matching succeeded */
          _item = omc_NFSCodeEnv_linkItemUsage(threadData, _inSrcItem, _item);
          tmpMeta28 = mmc_mk_box3(6, &NFSCodeEnv_Item_REDECLARED__ITEM__desc, _item, _env);
          tmpMeta1 = tmpMeta28;
          goto tmp3_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _inDestItem;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outDestItem = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outDestItem;
}

DLLDirection
modelica_boolean omc_NFSCodeEnv_isItemUsed(threadData_t *threadData, modelica_metatype _inItem)
{
  modelica_boolean _isUsed;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isUsed has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inItem;
    {
      modelica_metatype _is_used = NULL;
      modelica_metatype _item = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _is_used has no default value.
      // _item has no default value.
      tmp4 = 0;
      for (; tmp4 < 5; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta6)) goto tmp3_end;
          tmpMeta7 = MMC_CAR(tmpMeta6);
          tmpMeta8 = MMC_CDR(tmpMeta6);
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 7));
          if (optionNone(tmpMeta9)) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 1));
          if (!listEmpty(tmpMeta8)) goto tmp3_end;
          
          _is_used = tmpMeta10;
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_boolean(omc_Mutable_access(threadData, _is_used));
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (optionNone(tmpMeta11)) goto tmp3_end;
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 1));
          _is_used = tmpMeta12;
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_boolean(omc_Mutable_access(threadData, _is_used));
          goto tmp3_done;
        }
        case 2: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta13;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _item = tmpMeta13;
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _inItem = _item;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isUsed = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isUsed;
}
modelica_metatype boxptr_NFSCodeEnv_isItemUsed(threadData_t *threadData, modelica_metatype _inItem)
{
  modelica_boolean _isUsed;
  modelica_metatype out_isUsed;
  _isUsed = omc_NFSCodeEnv_isItemUsed(threadData, _inItem);
  out_isUsed = mmc_mk_icon(_isUsed);
  return out_isUsed;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_setImportsInItemHidden(threadData_t *threadData, modelica_metatype _inItem, modelica_boolean _inHidden)
{
  modelica_metatype _outItem = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outItem has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inItem;
    {
      modelica_metatype _cls = NULL;
      modelica_metatype _env = NULL;
      modelica_metatype _cls_ty = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _cls has no default value.
      // _env has no default value.
      // _cls_ty has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _cls = tmpMeta6;
          _env = tmpMeta7;
          _cls_ty = tmpMeta8;
          /* Pattern matching succeeded */
          _env = omc_NFSCodeEnv_setImportTableHidden(threadData, _env, _inHidden);
          tmpMeta9 = mmc_mk_box4(4, &NFSCodeEnv_Item_CLASS__desc, _cls, _env, _cls_ty);
          tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _inItem;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outItem = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outItem;
}
modelica_metatype boxptr_NFSCodeEnv_setImportsInItemHidden(threadData_t *threadData, modelica_metatype _inItem, modelica_metatype _inHidden)
{
  modelica_integer tmp1;
  modelica_metatype _outItem = NULL;
  tmp1 = mmc_unbox_integer(_inHidden);
  _outItem = omc_NFSCodeEnv_setImportsInItemHidden(threadData, _inItem, tmp1);
  /* skip box _outItem; NFSCodeEnv.Item */
  return _outItem;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_setImportTableHidden(threadData_t *threadData, modelica_metatype _inEnv, modelica_boolean _inHidden)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype _name = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _tree = NULL;
  modelica_metatype _imps = NULL;
  modelica_metatype _exts = NULL;
  modelica_metatype _rest = NULL;
  modelica_metatype _qi = NULL;
  modelica_metatype _uqi = NULL;
  modelica_metatype _is_used = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  // _name has no default value.
  // _ty has no default value.
  // _tree has no default value.
  // _imps has no default value.
  // _exts has no default value.
  // _rest has no default value.
  // _qi has no default value.
  // _uqi has no default value.
  // _is_used has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inEnv;
  if (listEmpty(tmpMeta1)) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_CAR(tmpMeta1);
  tmpMeta3 = MMC_CDR(tmpMeta1);
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 3));
  tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 4));
  tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 5));
  tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 6));
  tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
  tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 4));
  tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 7));
  _name = tmpMeta4;
  _ty = tmpMeta5;
  _tree = tmpMeta6;
  _exts = tmpMeta7;
  _qi = tmpMeta9;
  _uqi = tmpMeta10;
  _is_used = tmpMeta11;
  _rest = tmpMeta3;

  tmpMeta13 = mmc_mk_box4(3, &NFSCodeEnv_ImportTable_IMPORT__TABLE__desc, mmc_mk_boolean(_inHidden), _qi, _uqi);
  tmpMeta14 = mmc_mk_box7(3, &NFSCodeEnv_Frame_FRAME__desc, _name, _ty, _tree, _exts, tmpMeta13, _is_used);
  tmpMeta12 = mmc_mk_cons(tmpMeta14, _rest);
  _outEnv = tmpMeta12;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}
modelica_metatype boxptr_NFSCodeEnv_setImportTableHidden(threadData_t *threadData, modelica_metatype _inEnv, modelica_metatype _inHidden)
{
  modelica_integer tmp1;
  modelica_metatype _outEnv = NULL;
  tmp1 = mmc_unbox_integer(_inHidden);
  _outEnv = omc_NFSCodeEnv_setImportTableHidden(threadData, _inEnv, tmp1);
  /* skip box _outEnv; list<NFSCodeEnv.Frame> */
  return _outEnv;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_removeClsAndVarsFromFrame(threadData_t *threadData, modelica_metatype _inFrame, modelica_metatype *out_outClsAndVars)
{
  modelica_metatype _outFrame = NULL;
  modelica_metatype _outClsAndVars = NULL;
  modelica_metatype _name = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _tree = NULL;
  modelica_metatype _imps = NULL;
  modelica_metatype _exts = NULL;
  modelica_metatype _is_used = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outFrame has no default value.
  // _outClsAndVars has no default value.
  // _name has no default value.
  // _ty has no default value.
  // _tree has no default value.
  // _imps has no default value.
  // _exts has no default value.
  // _is_used has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inFrame;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 4));
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 5));
  tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 6));
  tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 7));
  _name = tmpMeta2;
  _ty = tmpMeta3;
  _outClsAndVars = tmpMeta4;
  _exts = tmpMeta5;
  _imps = tmpMeta6;
  _is_used = tmpMeta7;

  _tree = omc_NFSCodeEnv_EnvTree_new(threadData);

  tmpMeta8 = mmc_mk_box7(3, &NFSCodeEnv_Frame_FRAME__desc, _name, _ty, _tree, _exts, _imps, _is_used);
  _outFrame = tmpMeta8;
  _return: OMC_LABEL_UNUSED
  if (out_outClsAndVars) { *out_outClsAndVars = _outClsAndVars; }
  return _outFrame;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_removeRedeclaresFromExtend(threadData_t *threadData, modelica_metatype _inExtend)
{
  modelica_metatype _outExtend = NULL;
  modelica_metatype _bc = NULL;
  modelica_integer _index;
  modelica_metatype _info = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_integer tmp4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExtend has no default value.
  // _bc has no default value.
  // _index has no default value.
  // _info has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inExtend;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 4));
  tmp4 = mmc_unbox_integer(tmpMeta3);
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 5));
  _bc = tmpMeta2;
  _index = tmp4  /* pattern as ty=Integer */;
  _info = tmpMeta5;

  tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta7 = mmc_mk_box5(3, &NFSCodeEnv_Extends_EXTENDS__desc, _bc, tmpMeta6, mmc_mk_integer(_index), _info);
  _outExtend = tmpMeta7;
  _return: OMC_LABEL_UNUSED
  return _outExtend;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_removeRedeclaresFromLocalScope(threadData_t *threadData, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype _name = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _tree = NULL;
  modelica_metatype _imps = NULL;
  modelica_metatype _exts = NULL;
  modelica_metatype _rest = NULL;
  modelica_metatype _is_used = NULL;
  modelica_metatype _bc = NULL;
  modelica_metatype _cei = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  // _name has no default value.
  // _ty has no default value.
  // _tree has no default value.
  // _imps has no default value.
  // _exts has no default value.
  // _rest has no default value.
  // _is_used has no default value.
  // _bc has no default value.
  // _cei has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inEnv;
  if (listEmpty(tmpMeta1)) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_CAR(tmpMeta1);
  tmpMeta3 = MMC_CDR(tmpMeta1);
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 3));
  tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 4));
  tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 5));
  tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
  tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
  tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 6));
  tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 7));
  _name = tmpMeta4;
  _ty = tmpMeta5;
  _tree = tmpMeta6;
  _bc = tmpMeta8;
  _cei = tmpMeta9;
  _imps = tmpMeta10;
  _is_used = tmpMeta11;
  _rest = tmpMeta3;

  _bc = omc_List_map(threadData, _bc, boxvar_NFSCodeEnv_removeRedeclaresFromExtend);

  tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta13 = mmc_mk_box4(3, &NFSCodeEnv_ExtendsTable_EXTENDS__TABLE__desc, _bc, tmpMeta12, _cei);
  _exts = tmpMeta13;

  tmpMeta15 = mmc_mk_box7(3, &NFSCodeEnv_Frame_FRAME__desc, _name, _ty, _tree, _exts, _imps, _is_used);
  tmpMeta14 = mmc_mk_cons(tmpMeta15, _rest);
  _outEnv = tmpMeta14;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

PROTECTED_FUNCTION_STATIC modelica_boolean omc_NFSCodeEnv_isExtendNamed(threadData_t *threadData, modelica_metatype _inName, modelica_metatype _inExtends)
{
  modelica_boolean _outIsNamed;
  modelica_metatype _bc = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outIsNamed has no default value.
  // _bc has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inExtends;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  _bc = tmpMeta2;

  _outIsNamed = omc_AbsynUtil_pathEqual(threadData, _inName, _bc);
  _return: OMC_LABEL_UNUSED
  return _outIsNamed;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFSCodeEnv_isExtendNamed(threadData_t *threadData, modelica_metatype _inName, modelica_metatype _inExtends)
{
  modelica_boolean _outIsNamed;
  modelica_metatype out_outIsNamed;
  _outIsNamed = omc_NFSCodeEnv_isExtendNamed(threadData, _inName, _inExtends);
  out_outIsNamed = mmc_mk_icon(_outIsNamed);
  return out_outIsNamed;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_removeExtendFromLocalScope(threadData_t *threadData, modelica_metatype _inExtend, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype _name = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _tree = NULL;
  modelica_metatype _imps = NULL;
  modelica_metatype _rest = NULL;
  modelica_metatype _iu = NULL;
  modelica_metatype _bcl = NULL;
  modelica_metatype _re = NULL;
  modelica_metatype _cei = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  // _name has no default value.
  // _ty has no default value.
  // _tree has no default value.
  // _imps has no default value.
  // _rest has no default value.
  // _iu has no default value.
  // _bcl has no default value.
  // _re has no default value.
  // _cei has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inEnv;
  if (listEmpty(tmpMeta1)) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_CAR(tmpMeta1);
  tmpMeta3 = MMC_CDR(tmpMeta1);
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 3));
  tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 4));
  tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 5));
  tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
  tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
  tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
  tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 6));
  tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 7));
  _name = tmpMeta4;
  _ty = tmpMeta5;
  _tree = tmpMeta6;
  _bcl = tmpMeta8;
  _re = tmpMeta9;
  _cei = tmpMeta10;
  _imps = tmpMeta11;
  _iu = tmpMeta12;
  _rest = tmpMeta3;

  _bcl = omc_List_deleteMemberOnTrue(threadData, _inExtend, _bcl, boxvar_NFSCodeEnv_isExtendNamed, NULL);

  tmpMeta14 = mmc_mk_box4(3, &NFSCodeEnv_ExtendsTable_EXTENDS__TABLE__desc, _bcl, _re, _cei);
  tmpMeta15 = mmc_mk_box7(3, &NFSCodeEnv_Frame_FRAME__desc, _name, _ty, _tree, tmpMeta14, _imps, _iu);
  tmpMeta13 = mmc_mk_cons(tmpMeta15, _rest);
  _outEnv = tmpMeta13;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_removeExtendsFromLocalScope(threadData_t *threadData, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype _name = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _tree = NULL;
  modelica_metatype _imps = NULL;
  modelica_metatype _exts = NULL;
  modelica_metatype _rest = NULL;
  modelica_metatype _is_used = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  // _name has no default value.
  // _ty has no default value.
  // _tree has no default value.
  // _imps has no default value.
  // _exts has no default value.
  // _rest has no default value.
  // _is_used has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inEnv;
  if (listEmpty(tmpMeta1)) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_CAR(tmpMeta1);
  tmpMeta3 = MMC_CDR(tmpMeta1);
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 3));
  tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 4));
  tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 6));
  tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 7));
  _name = tmpMeta4;
  _ty = tmpMeta5;
  _tree = tmpMeta6;
  _imps = tmpMeta7;
  _is_used = tmpMeta8;
  _rest = tmpMeta3;

  _exts = omc_NFSCodeEnv_newExtendsTable(threadData);

  tmpMeta10 = mmc_mk_box7(3, &NFSCodeEnv_Frame_FRAME__desc, _name, _ty, _tree, _exts, _imps, _is_used);
  tmpMeta9 = mmc_mk_cons(tmpMeta10, _rest);
  _outEnv = tmpMeta9;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_string omc_NFSCodeEnv_printClassType(threadData_t *threadData, modelica_metatype _inClassType)
{
  modelica_string _outString = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outString has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inClassType;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT70;
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT71;
          goto tmp3_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT72;
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT73;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outString = tmp1;
  _return: OMC_LABEL_UNUSED
  return _outString;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_getClassType(threadData_t *threadData, modelica_metatype _inClassDef)
{
  modelica_metatype _outType = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outType has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inClassDef;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,8) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 9));
          if (optionNone(tmpMeta6)) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
          if (optionNone(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
          if (7 != MMC_STRLEN(tmpMeta9) || strcmp(MMC_STRINGDATA(_OMC_LIT75), MMC_STRINGDATA(tmpMeta9)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT35;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT74;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outType = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outType;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_extendEnvWithClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  _outEnv = omc_NFSCodeEnv_extendEnvWithClassDef(threadData, _inClass, _inEnv);
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_extendEnvWithClasses(threadData_t *threadData, modelica_metatype _inClasses, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  _outEnv = omc_List_fold(threadData, _inClasses, boxvar_NFSCodeEnv_extendEnvWithClass, _inEnv);
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_newVarItem(threadData_t *threadData, modelica_metatype _inVar, modelica_boolean _inIsUsed)
{
  modelica_metatype _outVarItem = NULL;
  modelica_metatype _is_used = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outVarItem has no default value.
  // _is_used has no default value.
  _is_used = omc_Mutable_create(threadData, mmc_mk_boolean(_inIsUsed));

  tmpMeta1 = mmc_mk_box3(3, &NFSCodeEnv_Item_VAR__desc, _inVar, mmc_mk_some(_is_used));
  _outVarItem = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outVarItem;
}
modelica_metatype boxptr_NFSCodeEnv_newVarItem(threadData_t *threadData, modelica_metatype _inVar, modelica_metatype _inIsUsed)
{
  modelica_integer tmp1;
  modelica_metatype _outVarItem = NULL;
  tmp1 = mmc_unbox_integer(_inIsUsed);
  _outVarItem = omc_NFSCodeEnv_newVarItem(threadData, _inVar, tmp1);
  /* skip box _outVarItem; NFSCodeEnv.Item */
  return _outVarItem;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_newClassItem(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inEnv, modelica_metatype _inClassType)
{
  modelica_metatype _outClassItem = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outClassItem has no default value.
  tmpMeta1 = mmc_mk_box4(4, &NFSCodeEnv_Item_CLASS__desc, _inClass, _inEnv, _inClassType);
  _outClassItem = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outClassItem;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_newItem(threadData_t *threadData, modelica_metatype _inElement)
{
  modelica_metatype _outItem = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outItem has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inElement;
    {
      modelica_metatype _class_env = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _class_env has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,8) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _class_env = omc_NFSCodeEnv_makeClassEnvironment(threadData, _inElement, 1 /* true */);
          tmpMeta1 = omc_NFSCodeEnv_newClassItem(threadData, _inElement, _class_env, _OMC_LIT74);
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,8) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFSCodeEnv_newVarItem(threadData, _inElement, 0 /* false */);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outItem = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outItem;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_newExtendsTable(threadData_t *threadData)
{
  modelica_metatype _outExtends = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExtends has no default value.
  _outExtends = _OMC_LIT76;
  _return: OMC_LABEL_UNUSED
  return _outExtends;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_newImportTable(threadData_t *threadData)
{
  modelica_metatype _outImports = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outImports has no default value.
  _outImports = _OMC_LIT77;
  _return: OMC_LABEL_UNUSED
  return _outImports;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_newFrame(threadData_t *threadData, modelica_metatype _inName, modelica_metatype _inType)
{
  modelica_metatype _outFrame = NULL;
  modelica_metatype _tree = NULL;
  modelica_metatype _exts = NULL;
  modelica_metatype _imps = NULL;
  modelica_metatype _is_used = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outFrame has no default value.
  // _tree has no default value.
  // _exts has no default value.
  // _imps has no default value.
  // _is_used has no default value.
  _tree = omc_NFSCodeEnv_EnvTree_new(threadData);

  _exts = omc_NFSCodeEnv_newExtendsTable(threadData);

  _imps = omc_NFSCodeEnv_newImportTable(threadData);

  _is_used = omc_Mutable_create(threadData, mmc_mk_boolean(0 /* false */));

  tmpMeta1 = mmc_mk_box7(3, &NFSCodeEnv_Frame_FRAME__desc, _inName, _inType, _tree, _exts, _imps, mmc_mk_some(_is_used));
  _outFrame = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outFrame;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_getFrameType(threadData_t *threadData, modelica_metatype _encapsulatedPrefix)
{
  modelica_metatype _outType = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outType has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _encapsulatedPrefix;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT43;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT39;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outType = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outType;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_getEnvTopScope(threadData_t *threadData, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype _top_scope = NULL;
  modelica_metatype _env = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  // _top_scope has no default value.
  // _env has no default value.
  _env = listReverse(_inEnv);

  /* Pattern-matching assignment */
  tmpMeta1 = _env;
  if (listEmpty(tmpMeta1)) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_CAR(tmpMeta1);
  tmpMeta3 = MMC_CDR(tmpMeta1);
  _top_scope = tmpMeta2;

  tmpMeta4 = mmc_mk_cons(_top_scope, MMC_REFSTRUCTLIT(mmc_nil));
  _outEnv = tmpMeta4;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_enterFrame(threadData_t *threadData, modelica_metatype _inFrame, modelica_metatype _inEnv)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  tmpMeta1 = mmc_mk_cons(_inFrame, _inEnv);
  _outEnv = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_enterScopePath(threadData_t *threadData, modelica_metatype _inEnv, modelica_metatype _inPath)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inPath;
    {
      modelica_string _name = NULL;
      modelica_metatype _path = NULL;
      modelica_metatype _env = NULL;
      int tmp4;
      // _name has no default value.
      // _path has no default value.
      // _env has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          _name = tmpMeta5;
          _path = tmpMeta6;
          /* Pattern matching succeeded */
          _env = omc_NFSCodeEnv_enterScope(threadData, _inEnv, _name);
          /* Tail recursive call */
          _inEnv = _env;
          _inPath = _path;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          _name = tmpMeta7;
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFSCodeEnv_enterScope(threadData, _inEnv, _name);
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          _path = tmpMeta8;
          /* Pattern matching succeeded */
          _env = omc_NFSCodeEnv_getEnvTopScope(threadData, _inEnv);
          /* Tail recursive call */
          _inEnv = _env;
          _inPath = _path;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outEnv = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_enterScope(threadData_t *threadData, modelica_metatype _inEnv, modelica_string _inName)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  { /* matchcontinue expression */
    {
      modelica_metatype _cls_env = NULL;
      modelica_metatype _item = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _cls_env has no default value.
      // _item has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          /* Pattern matching succeeded */
          _item = omc_NFSCodeLookup_lookupInClass(threadData, _inName, _inEnv, NULL);

          /* Pattern-matching assignment */
          tmpMeta6 = omc_NFSCodeEnv_getItemEnv(threadData, _item);
          if (listEmpty(tmpMeta6)) goto goto_2;
          tmpMeta7 = MMC_CAR(tmpMeta6);
          tmpMeta8 = MMC_CDR(tmpMeta6);
          if (!listEmpty(tmpMeta8)) goto goto_2;
          _cls_env = tmpMeta7;
          tmpMeta1 = omc_NFSCodeEnv_enterFrame(threadData, _cls_env, _inEnv);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          /* Pattern matching succeeded */
          tmpMeta9 = stringAppend(_OMC_LIT78,_inName);
          tmpMeta10 = stringAppend(tmpMeta9,_OMC_LIT79);
          tmpMeta11 = stringAppend(tmpMeta10,omc_NFSCodeEnv_printEnvStr(threadData, _inEnv));
          tmpMeta12 = stringAppend(tmpMeta11,_OMC_LIT6);
          fputs(MMC_STRINGDATA(tmpMeta12),stdout);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outEnv = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_openScope(threadData_t *threadData, modelica_metatype _inEnv, modelica_metatype _inClass)
{
  modelica_metatype _outEnv = NULL;
  modelica_string _name = NULL;
  modelica_metatype _encapsulatedPrefix = NULL;
  modelica_metatype _new_frame = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  // _name has no default value.
  // _encapsulatedPrefix has no default value.
  // _new_frame has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inClass;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,2,8) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 4));
  _name = tmpMeta2;
  _encapsulatedPrefix = tmpMeta3;

  _new_frame = omc_NFSCodeEnv_newFrame(threadData, mmc_mk_some(_name), omc_NFSCodeEnv_getFrameType(threadData, _encapsulatedPrefix));

  tmpMeta4 = mmc_mk_cons(_new_frame, _inEnv);
  _outEnv = tmpMeta4;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_newEnvironment(threadData_t *threadData, modelica_metatype _inName)
{
  modelica_metatype _outEnv = NULL;
  modelica_metatype _new_frame = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEnv has no default value.
  // _new_frame has no default value.
  _new_frame = omc_NFSCodeEnv_newFrame(threadData, _inName, _OMC_LIT39);

  tmpMeta1 = mmc_mk_cons(_new_frame, MMC_REFSTRUCTLIT(mmc_nil));
  _outEnv = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outEnv;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_add(threadData_t *threadData, modelica_metatype _inTree, modelica_string _inKey, modelica_metatype _inValue, modelica_fnptr _conflictFunc)
{
  modelica_metatype _tree = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = _inTree;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      modelica_string _key = NULL;
      modelica_metatype _value = NULL;
      modelica_integer _key_comp;
      modelica_metatype _outTree = NULL;
      int tmp4;
      // _key has no default value.
      // _value has no default value.
      // _key_comp has no default value.
      // _outTree has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 5: {
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          tmpMeta5 = mmc_mk_box3(4, &NFSCodeEnv_EnvTree_Tree_LEAF__desc, _inKey, _inValue);
          tmpMeta1 = tmpMeta5;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _key = tmpMeta6;
          /* Pattern matching succeeded */
          _key_comp = omc_NFSCodeEnv_EnvTree_keyCompare(threadData, _inKey, _key);

          if((_key_comp == ((modelica_integer) -1)))
          {
            tmpMeta7 = MMC_TAGPTR(mmc_alloc_words(7));
            memcpy(MMC_UNTAGPTR(tmpMeta7), MMC_UNTAGPTR(_tree), 7*sizeof(modelica_metatype));
            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta7))[5] = omc_NFSCodeEnv_EnvTree_add(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 5))), _inKey, _inValue, ((modelica_fnptr) _conflictFunc));
            _tree = tmpMeta7;
          }
          else
          {
            if((_key_comp == ((modelica_integer) 1)))
            {
              tmpMeta8 = MMC_TAGPTR(mmc_alloc_words(7));
              memcpy(MMC_UNTAGPTR(tmpMeta8), MMC_UNTAGPTR(_tree), 7*sizeof(modelica_metatype));
              ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta8))[6] = omc_NFSCodeEnv_EnvTree_add(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 6))), _inKey, _inValue, ((modelica_fnptr) _conflictFunc));
              _tree = tmpMeta8;
            }
            else
            {
              _value = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_conflictFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_string)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_conflictFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_conflictFunc), 2))), _inValue, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), _key) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_string)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_conflictFunc), 1)))) (threadData, _inValue, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), _key);

              if((!referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), _value)))
              {
                tmpMeta9 = MMC_TAGPTR(mmc_alloc_words(7));
                memcpy(MMC_UNTAGPTR(tmpMeta9), MMC_UNTAGPTR(_tree), 7*sizeof(modelica_metatype));
                ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta9))[3] = _value;
                _tree = tmpMeta9;
              }
            }
          }
          tmpMeta1 = ((_key_comp == ((modelica_integer) 0))?_tree:omc_NFSCodeEnv_EnvTree_balance(threadData, _tree));
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _key = tmpMeta10;
          /* Pattern matching succeeded */
          _key_comp = omc_NFSCodeEnv_EnvTree_keyCompare(threadData, _inKey, _key);

          if((_key_comp == ((modelica_integer) -1)))
          {
            tmpMeta11 = mmc_mk_box3(4, &NFSCodeEnv_EnvTree_Tree_LEAF__desc, _inKey, _inValue);
            tmpMeta12 = mmc_mk_box6(3, &NFSCodeEnv_EnvTree_Tree_NODE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), mmc_mk_integer(((modelica_integer) 2)), tmpMeta11, _OMC_LIT80);
            _outTree = tmpMeta12;
          }
          else
          {
            if((_key_comp == ((modelica_integer) 1)))
            {
              tmpMeta13 = mmc_mk_box3(4, &NFSCodeEnv_EnvTree_Tree_LEAF__desc, _inKey, _inValue);
              tmpMeta14 = mmc_mk_box6(3, &NFSCodeEnv_EnvTree_Tree_NODE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), mmc_mk_integer(((modelica_integer) 2)), _OMC_LIT80, tmpMeta13);
              _outTree = tmpMeta14;
            }
            else
            {
              _value = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_conflictFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_string)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_conflictFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_conflictFunc), 2))), _inValue, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), _key) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_string)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_conflictFunc), 1)))) (threadData, _inValue, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), _key);

              if((!referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), _value)))
              {
                tmpMeta15 = MMC_TAGPTR(mmc_alloc_words(4));
                memcpy(MMC_UNTAGPTR(tmpMeta15), MMC_UNTAGPTR(_tree), 4*sizeof(modelica_metatype));
                ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta15))[3] = _value;
                _tree = tmpMeta15;
              }

              _outTree = _tree;
            }
          }
          tmpMeta1 = ((_key_comp == ((modelica_integer) 0))?_outTree:omc_NFSCodeEnv_EnvTree_balance(threadData, _outTree));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _tree = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _tree;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_addConflictDefault(threadData_t *threadData, modelica_metatype _newValue, modelica_metatype _oldValue, modelica_string _key)
{
  modelica_metatype _value = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _value = _newValue;
  _return: OMC_LABEL_UNUSED
  return _value;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_addConflictFail(threadData_t *threadData, modelica_metatype _newValue, modelica_metatype _oldValue, modelica_string _key)
{
  modelica_metatype _value = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _value has no default value.
  MMC_THROW_INTERNAL();
  _return: OMC_LABEL_UNUSED
  return _value;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_addConflictKeep(threadData_t *threadData, modelica_metatype _newValue, modelica_metatype _oldValue, modelica_string _key)
{
  modelica_metatype _value = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _value = _oldValue;
  _return: OMC_LABEL_UNUSED
  return _value;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_addConflictReplace(threadData_t *threadData, modelica_metatype _newValue, modelica_metatype _oldValue, modelica_string _key)
{
  modelica_metatype _value = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _value = _newValue;
  _return: OMC_LABEL_UNUSED
  return _value;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_addList(threadData_t *threadData, modelica_metatype __omcQ_24in_5Ftree, modelica_metatype _inValues, modelica_fnptr _conflictFunc)
{
  modelica_metatype _tree = NULL;
  modelica_string _key = NULL;
  modelica_metatype _value = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = __omcQ_24in_5Ftree;
  // _key has no default value.
  // _value has no default value.
  {
    modelica_metatype _t;
    for (tmpMeta1 = _inValues; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _t = MMC_CAR(tmpMeta1);
      /* Pattern-matching assignment */
      tmpMeta2 = _t;
      tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 1));
      tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
      _key = tmpMeta3;
      _value = tmpMeta4;

      _tree = omc_NFSCodeEnv_EnvTree_add(threadData, _tree, _key, _value, ((modelica_fnptr) _conflictFunc));
    }
  }
  _return: OMC_LABEL_UNUSED
  return _tree;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_EnvTree_balance(threadData_t *threadData, modelica_metatype _inTree)
{
  modelica_metatype _outTree = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outTree = _inTree;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _outTree;
    {
      modelica_integer _lh;
      modelica_integer _rh;
      modelica_integer _diff;
      modelica_metatype _balanced_tree = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _lh has no default value.
      // _rh has no default value.
      // _diff has no default value.
      // _balanced_tree has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = _inTree;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _lh = omc_NFSCodeEnv_EnvTree_height(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outTree), 5))));

          _rh = omc_NFSCodeEnv_EnvTree_height(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outTree), 6))));

          _diff = _lh - _rh;

          if((_diff < ((modelica_integer) -1)))
          {
            _balanced_tree = ((omc_NFSCodeEnv_EnvTree_calculateBalance(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outTree), 6)))) > ((modelica_integer) 0))?omc_NFSCodeEnv_EnvTree_rotateLeft(threadData, omc_NFSCodeEnv_EnvTree_setTreeLeftRight(threadData, _outTree, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outTree), 5))), omc_NFSCodeEnv_EnvTree_rotateRight(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outTree), 6)))))):omc_NFSCodeEnv_EnvTree_rotateLeft(threadData, _outTree));
          }
          else
          {
            if((_diff > ((modelica_integer) 1)))
            {
              _balanced_tree = ((omc_NFSCodeEnv_EnvTree_calculateBalance(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outTree), 5)))) < ((modelica_integer) 0))?omc_NFSCodeEnv_EnvTree_rotateRight(threadData, omc_NFSCodeEnv_EnvTree_setTreeLeftRight(threadData, _outTree, omc_NFSCodeEnv_EnvTree_rotateLeft(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outTree), 5)))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outTree), 6))))):omc_NFSCodeEnv_EnvTree_rotateRight(threadData, _outTree));
            }
            else
            {
              if((mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outTree), 4)))) != ((modelica_integer) 1) + modelica_integer_max((modelica_integer)(_lh),(modelica_integer)(_rh))))
              {
                tmpMeta6 = MMC_TAGPTR(mmc_alloc_words(7));
                memcpy(MMC_UNTAGPTR(tmpMeta6), MMC_UNTAGPTR(_outTree), 7*sizeof(modelica_metatype));
                ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta6))[4] = mmc_mk_integer(((modelica_integer) 1) + modelica_integer_max((modelica_integer)(_lh),(modelica_integer)(_rh)));
                _outTree = tmpMeta6;

                _balanced_tree = _outTree;
              }
              else
              {
                _balanced_tree = _outTree;
              }
            }
          }
          tmpMeta1 = _balanced_tree;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outTree = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outTree;
}

PROTECTED_FUNCTION_STATIC modelica_integer omc_NFSCodeEnv_EnvTree_calculateBalance(threadData_t *threadData, modelica_metatype _inNode)
{
  modelica_integer _outBalance;
  modelica_integer tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outBalance has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inNode;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFSCodeEnv_EnvTree_height(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inNode), 5)))) - omc_NFSCodeEnv_EnvTree_height(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inNode), 6))));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 0);
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 0);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outBalance = tmp1;
  _return: OMC_LABEL_UNUSED
  return _outBalance;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFSCodeEnv_EnvTree_calculateBalance(threadData_t *threadData, modelica_metatype _inNode)
{
  modelica_integer _outBalance;
  modelica_metatype out_outBalance;
  _outBalance = omc_NFSCodeEnv_EnvTree_calculateBalance(threadData, _inNode);
  out_outBalance = mmc_mk_icon(_outBalance);
  return out_outBalance;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_fold(threadData_t *threadData, modelica_metatype _inTree, modelica_fnptr _inFunc, modelica_metatype _inStartValue)
{
  modelica_metatype _outResult = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outResult = _inStartValue;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inTree;
    {
      modelica_string _key = NULL;
      modelica_metatype _value = NULL;
      int tmp4;
      // _key has no default value.
      // _value has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _key = tmpMeta5;
          _value = tmpMeta6;
          /* Pattern matching succeeded */
          _outResult = omc_NFSCodeEnv_EnvTree_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inTree), 5))), ((modelica_fnptr) _inFunc), _outResult);

          _outResult = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_string, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _key, _value, _outResult) : ((modelica_metatype(*)(threadData_t*, modelica_string, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _key, _value, _outResult);
          /* Tail recursive call */
          _inTree = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inTree), 6)));
          _inStartValue = _outResult;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          _key = tmpMeta7;
          _value = tmpMeta8;
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_string, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _key, _value, _outResult) : ((modelica_metatype(*)(threadData_t*, modelica_string, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _key, _value, _outResult);
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _outResult;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outResult = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outResult;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_foldCond(threadData_t *threadData, modelica_metatype _tree, modelica_fnptr _foldFunc, modelica_metatype __omcQ_24in_5Fvalue)
{
  modelica_metatype _value = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _value = __omcQ_24in_5Fvalue;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      modelica_boolean _c;
      int tmp4;
      // _c has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          modelica_metatype tmpMeta5;
          modelica_integer tmp6;
          modelica_metatype tmpMeta7;
          
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta7 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_foldFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_foldFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_foldFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), _value, &tmpMeta5) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_foldFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), _value, &tmpMeta5);
          _value = tmpMeta7;
          tmp6 = mmc_unbox_integer(tmpMeta5);
          _c = tmp6  /* pattern as ty=Boolean */;

          if(_c)
          {
            _value = omc_NFSCodeEnv_EnvTree_foldCond(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 5))), ((modelica_fnptr) _foldFunc), _value);

            _value = omc_NFSCodeEnv_EnvTree_foldCond(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 6))), ((modelica_fnptr) _foldFunc), _value);
          }
          tmpMeta1 = _value;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta8;
          
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta8 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_foldFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_foldFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_foldFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), _value, NULL) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_foldFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), _value, NULL);
          _value = tmpMeta8;
          tmpMeta1 = _value;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _value;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _value = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _value;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_fold__2(threadData_t *threadData, modelica_metatype _tree, modelica_fnptr _foldFunc, modelica_metatype __omcQ_24in_5FfoldArg1, modelica_metatype __omcQ_24in_5FfoldArg2, modelica_metatype *out_foldArg2)
{
  modelica_metatype _foldArg1 = NULL;
  modelica_metatype _foldArg2 = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _foldArg1 = __omcQ_24in_5FfoldArg1;
  _foldArg2 = __omcQ_24in_5FfoldArg2;
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _tree;
    {
      int tmp3;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          _foldArg1 = omc_NFSCodeEnv_EnvTree_fold__2(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 5))), ((modelica_fnptr) _foldFunc), _foldArg1, _foldArg2 ,&_foldArg2);

          _foldArg1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_foldFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_foldFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_foldFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), _foldArg1, _foldArg2 ,&_foldArg2) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_foldFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), _foldArg1, _foldArg2 ,&_foldArg2);

          _foldArg1 = omc_NFSCodeEnv_EnvTree_fold__2(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 6))), ((modelica_fnptr) _foldFunc), _foldArg1, _foldArg2 ,&_foldArg2);
          goto tmp2_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          _foldArg1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_foldFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_foldFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_foldFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), _foldArg1, _foldArg2 ,&_foldArg2) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_foldFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), _foldArg1, _foldArg2 ,&_foldArg2);
          goto tmp2_done;
        }
        default:
        tmp2_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  if (out_foldArg2) { *out_foldArg2 = _foldArg2; }
  return _foldArg1;
}

DLLDirection
void omc_NFSCodeEnv_EnvTree_forEach(threadData_t *threadData, modelica_metatype _tree, modelica_fnptr _func)
{
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _tree;
    {
      int tmp3;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          omc_NFSCodeEnv_EnvTree_forEach(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 5))), ((modelica_fnptr) _func));

          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3)))) : ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))));

          /* Tail recursive call */
          _tree = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 6)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          ;
          goto tmp2_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3)))) : ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))));
          goto tmp2_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_fromList(threadData_t *threadData, modelica_metatype _inValues, modelica_fnptr _conflictFunc)
{
  modelica_metatype _tree = NULL;
  modelica_string _key = NULL;
  modelica_metatype _value = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = _OMC_LIT80;
  // _key has no default value.
  // _value has no default value.
  {
    modelica_metatype _t;
    for (tmpMeta1 = _inValues; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _t = MMC_CAR(tmpMeta1);
      /* Pattern-matching assignment */
      tmpMeta2 = _t;
      tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 1));
      tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
      _key = tmpMeta3;
      _value = tmpMeta4;

      _tree = omc_NFSCodeEnv_EnvTree_add(threadData, _tree, _key, _value, ((modelica_fnptr) _conflictFunc));
    }
  }
  _return: OMC_LABEL_UNUSED
  return _tree;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_get(threadData_t *threadData, modelica_metatype _tree, modelica_string _key)
{
  modelica_metatype _value = NULL;
  modelica_string _k = NULL;
  modelica_string tmp1 = 0;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _value has no default value.
  // _k has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2)));
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2)));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _k = tmp1;

  { /* match expression */
    modelica_integer tmp9_1;modelica_metatype tmp9_2;
    tmp9_1 = omc_NFSCodeEnv_EnvTree_keyCompare(threadData, _key, _k);
    tmp9_2 = _tree;
    {
      volatile mmc_switch_type tmp9;
      int tmp10;
      tmp9 = 0;
      for (; tmp9 < 4; tmp9++) {
        switch (MMC_SWITCH_CAST(tmp9)) {
        case 0: {
          if (0 != tmp9_1) goto tmp8_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp9_2,1,2) == 0) goto tmp8_end;
          
          /* Pattern matching succeeded */
          tmpMeta6 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3)));
          goto tmp8_done;
        }
        case 1: {
          if (0 != tmp9_1) goto tmp8_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp9_2,0,5) == 0) goto tmp8_end;
          
          /* Pattern matching succeeded */
          tmpMeta6 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3)));
          goto tmp8_done;
        }
        case 2: {
          if (1 != tmp9_1) goto tmp8_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp9_2,0,5) == 0) goto tmp8_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _tree = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 6)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp8_done;
        }
        case 3: {
          if (-1 != tmp9_1) goto tmp8_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp9_2,0,5) == 0) goto tmp8_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _tree = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 5)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp8_done;
        }
        }
        goto tmp8_end;
        tmp8_end: ;
      }
      goto goto_7;
      goto_7:;
      MMC_THROW_INTERNAL();
      goto tmp8_done;
      tmp8_done:;
    }
  }
  _value = tmpMeta6;
  _return: OMC_LABEL_UNUSED
  return _value;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_getOpt(threadData_t *threadData, modelica_metatype _tree, modelica_string _key)
{
  modelica_metatype _value = NULL;
  modelica_string _k = NULL;
  modelica_string tmp1 = 0;
  modelica_metatype tmpMeta5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _value has no default value.
  // _k has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2)));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2)));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = _key;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _k = tmp1;

  { /* match expression */
    modelica_integer tmp8_1;modelica_metatype tmp8_2;
    tmp8_1 = omc_NFSCodeEnv_EnvTree_keyCompare(threadData, _key, _k);
    tmp8_2 = _tree;
    {
      volatile mmc_switch_type tmp8;
      int tmp9;
      tmp8 = 0;
      for (; tmp8 < 5; tmp8++) {
        switch (MMC_SWITCH_CAST(tmp8)) {
        case 0: {
          if (0 != tmp8_1) goto tmp7_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp8_2,1,2) == 0) goto tmp7_end;
          
          /* Pattern matching succeeded */
          tmpMeta5 = mmc_mk_some((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))));
          goto tmp7_done;
        }
        case 1: {
          if (0 != tmp8_1) goto tmp7_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp8_2,0,5) == 0) goto tmp7_end;
          
          /* Pattern matching succeeded */
          tmpMeta5 = mmc_mk_some((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))));
          goto tmp7_done;
        }
        case 2: {
          if (1 != tmp8_1) goto tmp7_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp8_2,0,5) == 0) goto tmp7_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _tree = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 6)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp7_done;
        }
        case 3: {
          if (-1 != tmp8_1) goto tmp7_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp8_2,0,5) == 0) goto tmp7_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _tree = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 5)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp7_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta5 = mmc_mk_none();
          goto tmp7_done;
        }
        }
        goto tmp7_end;
        tmp7_end: ;
      }
      goto goto_6;
      goto_6:;
      MMC_THROW_INTERNAL();
      goto tmp7_done;
      tmp7_done:;
    }
  }
  _value = tmpMeta5;
  _return: OMC_LABEL_UNUSED
  return _value;
}

DLLDirection
modelica_boolean omc_NFSCodeEnv_EnvTree_hasKey(threadData_t *threadData, modelica_metatype _inTree, modelica_string _inKey)
{
  modelica_boolean _comp;
  modelica_string _key = NULL;
  modelica_integer _key_comp;
  modelica_metatype _tree = NULL;
  modelica_string tmp1 = 0;
  modelica_boolean tmp5 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _comp = 0 /* false */;
  // _key has no default value.
  // _key_comp has no default value.
  // _tree has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inTree;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inTree), 2)));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inTree), 2)));
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          goto _return;
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _key = tmp1;

  _key_comp = omc_NFSCodeEnv_EnvTree_keyCompare(threadData, _inKey, _key);

  { /* match expression */
    modelica_integer tmp8_1;modelica_metatype tmp8_2;
    tmp8_1 = _key_comp;
    tmp8_2 = _inTree;
    {
      volatile mmc_switch_type tmp8;
      int tmp9;
      tmp8 = 0;
      for (; tmp8 < 4; tmp8++) {
        switch (MMC_SWITCH_CAST(tmp8)) {
        case 0: {
          if (0 != tmp8_1) goto tmp7_end;
          
          /* Pattern matching succeeded */
          tmp5 = 1 /* true */;
          goto tmp7_done;
        }
        case 1: {
          modelica_metatype tmpMeta10;
          if (1 != tmp8_1) goto tmp7_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp8_2,0,5) == 0) goto tmp7_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_2), 6));
          _tree = tmpMeta10;
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _inTree = _tree;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp7_done;
        }
        case 2: {
          modelica_metatype tmpMeta11;
          if (-1 != tmp8_1) goto tmp7_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp8_2,0,5) == 0) goto tmp7_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_2), 5));
          
          _tree = tmpMeta11;
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _inTree = _tree;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp7_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          tmp5 = 0 /* false */;
          goto tmp7_done;
        }
        }
        goto tmp7_end;
        tmp7_end: ;
      }
      goto goto_6;
      goto_6:;
      MMC_THROW_INTERNAL();
      goto tmp7_done;
      tmp7_done:;
    }
  }
  _comp = tmp5;
  _return: OMC_LABEL_UNUSED
  return _comp;
}
modelica_metatype boxptr_NFSCodeEnv_EnvTree_hasKey(threadData_t *threadData, modelica_metatype _inTree, modelica_metatype _inKey)
{
  modelica_boolean _comp;
  modelica_metatype out_comp;
  _comp = omc_NFSCodeEnv_EnvTree_hasKey(threadData, _inTree, _inKey);
  out_comp = mmc_mk_icon(_comp);
  return out_comp;
}

PROTECTED_FUNCTION_STATIC modelica_integer omc_NFSCodeEnv_EnvTree_height(threadData_t *threadData, modelica_metatype _inNode)
{
  modelica_integer _outHeight;
  modelica_integer tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outHeight has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inNode;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inNode), 4))));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 1);
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 0);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outHeight = tmp1;
  _return: OMC_LABEL_UNUSED
  return _outHeight;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFSCodeEnv_EnvTree_height(threadData_t *threadData, modelica_metatype _inNode)
{
  modelica_integer _outHeight;
  modelica_metatype out_outHeight;
  _outHeight = omc_NFSCodeEnv_EnvTree_height(threadData, _inNode);
  out_outHeight = mmc_mk_icon(_outHeight);
  return out_outHeight;
}

DLLDirection
void omc_NFSCodeEnv_EnvTree_intersection(threadData_t *threadData)
{
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  MMC_THROW_INTERNAL();
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
modelica_boolean omc_NFSCodeEnv_EnvTree_isEmpty(threadData_t *threadData, modelica_metatype _tree)
{
  modelica_boolean _isEmpty;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isEmpty has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isEmpty = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isEmpty;
}
modelica_metatype boxptr_NFSCodeEnv_EnvTree_isEmpty(threadData_t *threadData, modelica_metatype _tree)
{
  modelica_boolean _isEmpty;
  modelica_metatype out_isEmpty;
  _isEmpty = omc_NFSCodeEnv_EnvTree_isEmpty(threadData, _tree);
  out_isEmpty = mmc_mk_icon(_isEmpty);
  return out_isEmpty;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_join(threadData_t *threadData, modelica_metatype __omcQ_24in_5Ftree, modelica_metatype _treeToJoin, modelica_fnptr _conflictFunc)
{
  modelica_metatype _tree = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = __omcQ_24in_5Ftree;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _treeToJoin;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _tree;
          goto tmp3_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          _tree = omc_NFSCodeEnv_EnvTree_add(threadData, _tree, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_treeToJoin), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_treeToJoin), 3))), ((modelica_fnptr) _conflictFunc));

          _tree = omc_NFSCodeEnv_EnvTree_join(threadData, _tree, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_treeToJoin), 5))), ((modelica_fnptr) _conflictFunc));
          /* Tail recursive call */
          __omcQ_24in_5Ftree = _tree;
          _treeToJoin = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_treeToJoin), 6)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFSCodeEnv_EnvTree_add(threadData, _tree, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_treeToJoin), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_treeToJoin), 3))), ((modelica_fnptr) _conflictFunc));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _tree = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _tree;
}

DLLDirection
modelica_integer omc_NFSCodeEnv_EnvTree_keyCompare(threadData_t *threadData, modelica_string _inKey1, modelica_string _inKey2)
{
  modelica_integer _outResult;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outResult has no default value.
  _outResult = stringCompare(_inKey1, _inKey2);
  _return: OMC_LABEL_UNUSED
  return _outResult;
}
modelica_metatype boxptr_NFSCodeEnv_EnvTree_keyCompare(threadData_t *threadData, modelica_metatype _inKey1, modelica_metatype _inKey2)
{
  modelica_integer _outResult;
  modelica_metatype out_outResult;
  _outResult = omc_NFSCodeEnv_EnvTree_keyCompare(threadData, _inKey1, _inKey2);
  out_outResult = mmc_mk_icon(_outResult);
  return out_outResult;
}

DLLDirection
modelica_string omc_NFSCodeEnv_EnvTree_keyStr(threadData_t *threadData, modelica_string _inKey)
{
  modelica_string _outString = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outString has no default value.
  _outString = _inKey;
  _return: OMC_LABEL_UNUSED
  return _outString;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_listKeys(threadData_t *threadData, modelica_metatype _inTree, modelica_metatype __omcQ_24in_5Flst)
{
  modelica_metatype _lst = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _lst = __omcQ_24in_5Flst;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inTree;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 4: {
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          tmpMeta5 = mmc_mk_cons((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inTree), 2))), _lst);
          tmpMeta1 = tmpMeta5;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          _lst = omc_NFSCodeEnv_EnvTree_listKeys(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inTree), 6))), _lst);

          tmpMeta6 = mmc_mk_cons((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inTree), 2))), _lst);
          _lst = tmpMeta6;
          /* Tail recursive call */
          _inTree = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inTree), 5)));
          __omcQ_24in_5Flst = _lst;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _lst;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _lst = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _lst;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_listKeysReverse(threadData_t *threadData, modelica_metatype _inTree, modelica_metatype __omcQ_24in_5Flst)
{
  modelica_metatype _lst = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _lst = __omcQ_24in_5Flst;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inTree;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 4: {
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          tmpMeta5 = mmc_mk_cons((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inTree), 2))), _lst);
          tmpMeta1 = tmpMeta5;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          _lst = omc_NFSCodeEnv_EnvTree_listKeysReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inTree), 5))), _lst);

          tmpMeta6 = mmc_mk_cons((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inTree), 2))), _lst);
          _lst = tmpMeta6;
          /* Tail recursive call */
          _inTree = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inTree), 6)));
          __omcQ_24in_5Flst = _lst;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _lst;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _lst = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _lst;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_listValues(threadData_t *threadData, modelica_metatype _tree, modelica_metatype __omcQ_24in_5Flst)
{
  modelica_metatype _lst = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _lst = __omcQ_24in_5Flst;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      modelica_metatype _value = NULL;
      int tmp4;
      // _value has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _value = tmpMeta5;
          /* Pattern matching succeeded */
          _lst = omc_NFSCodeEnv_EnvTree_listValues(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 6))), _lst);

          tmpMeta6 = mmc_mk_cons(_value, _lst);
          _lst = tmpMeta6;
          /* Tail recursive call */
          _tree = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 5)));
          __omcQ_24in_5Flst = _lst;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          _value = tmpMeta7;
          /* Pattern matching succeeded */
          tmpMeta8 = mmc_mk_cons(_value, _lst);
          tmpMeta1 = tmpMeta8;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _lst;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _lst = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _lst;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_map(threadData_t *threadData, modelica_metatype _inTree, modelica_fnptr _inFunc)
{
  modelica_metatype _outTree = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outTree = _inTree;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _outTree;
    {
      modelica_string _key = NULL;
      modelica_metatype _value = NULL;
      modelica_metatype _new_value = NULL;
      modelica_metatype _new_left = NULL;
      modelica_metatype _new_right = NULL;
      int tmp4;
      // _key has no default value.
      // _value has no default value.
      // _new_value has no default value.
      // _new_left has no default value.
      // _new_right has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _key = tmpMeta5;
          _value = tmpMeta6;
          /* Pattern matching succeeded */
          _new_left = omc_NFSCodeEnv_EnvTree_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outTree), 5))), ((modelica_fnptr) _inFunc));

          _new_value = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_string, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _key, _value) : ((modelica_metatype(*)(threadData_t*, modelica_string, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _key, _value);

          _new_right = omc_NFSCodeEnv_EnvTree_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outTree), 6))), ((modelica_fnptr) _inFunc));

          if((((!referenceEq(_new_left, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outTree), 5))))) || (!referenceEq(_value, _new_value))) || (!referenceEq(_new_right, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outTree), 6)))))))
          {
            tmpMeta7 = mmc_mk_box6(3, &NFSCodeEnv_EnvTree_Tree_NODE__desc, _key, _new_value, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outTree), 4))), _new_left, _new_right);
            _outTree = tmpMeta7;
          }
          tmpMeta1 = _outTree;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          _key = tmpMeta8;
          _value = tmpMeta9;
          /* Pattern matching succeeded */
          _new_value = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_string, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _key, _value) : ((modelica_metatype(*)(threadData_t*, modelica_string, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _key, _value);

          if((!referenceEq(_value, _new_value)))
          {
            tmpMeta10 = MMC_TAGPTR(mmc_alloc_words(4));
            memcpy(MMC_UNTAGPTR(tmpMeta10), MMC_UNTAGPTR(_outTree), 4*sizeof(modelica_metatype));
            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta10))[3] = _new_value;
            _outTree = tmpMeta10;
          }
          tmpMeta1 = _outTree;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _inTree;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outTree = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outTree;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_mapFold(threadData_t *threadData, modelica_metatype _inTree, modelica_fnptr _inFunc, modelica_metatype _inStartValue, modelica_metatype *out_outResult)
{
  modelica_metatype _outTree = NULL;
  modelica_metatype _outResult = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outTree = _inTree;
  _outResult = _inStartValue;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _outTree;
    {
      modelica_string _key = NULL;
      modelica_metatype _value = NULL;
      modelica_metatype _new_value = NULL;
      modelica_metatype _new_left = NULL;
      modelica_metatype _new_right = NULL;
      int tmp4;
      // _key has no default value.
      // _value has no default value.
      // _new_value has no default value.
      // _new_left has no default value.
      // _new_right has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _key = tmpMeta5;
          _value = tmpMeta6;
          /* Pattern matching succeeded */
          _new_left = omc_NFSCodeEnv_EnvTree_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outTree), 5))), ((modelica_fnptr) _inFunc), _outResult ,&_outResult);

          _new_value = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_string, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _key, _value, _outResult ,&_outResult) : ((modelica_metatype(*)(threadData_t*, modelica_string, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _key, _value, _outResult ,&_outResult);

          _new_right = omc_NFSCodeEnv_EnvTree_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outTree), 6))), ((modelica_fnptr) _inFunc), _outResult ,&_outResult);

          if((((!referenceEq(_new_left, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outTree), 5))))) || (!referenceEq(_value, _new_value))) || (!referenceEq(_new_right, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outTree), 6)))))))
          {
            tmpMeta7 = mmc_mk_box6(3, &NFSCodeEnv_EnvTree_Tree_NODE__desc, _key, _new_value, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outTree), 4))), _new_left, _new_right);
            _outTree = tmpMeta7;
          }
          tmpMeta1 = _outTree;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          _key = tmpMeta8;
          _value = tmpMeta9;
          /* Pattern matching succeeded */
          _new_value = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_string, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _key, _value, _outResult ,&_outResult) : ((modelica_metatype(*)(threadData_t*, modelica_string, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _key, _value, _outResult ,&_outResult);

          if((!referenceEq(_value, _new_value)))
          {
            tmpMeta10 = MMC_TAGPTR(mmc_alloc_words(4));
            memcpy(MMC_UNTAGPTR(tmpMeta10), MMC_UNTAGPTR(_outTree), 4*sizeof(modelica_metatype));
            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta10))[3] = _new_value;
            _outTree = tmpMeta10;
          }
          tmpMeta1 = _outTree;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _inTree;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outTree = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  if (out_outResult) { *out_outResult = _outResult; }
  return _outTree;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_new(threadData_t *threadData)
{
  modelica_metatype _outTree = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outTree = _OMC_LIT80;
  _return: OMC_LABEL_UNUSED
  return _outTree;
}

DLLDirection
modelica_string omc_NFSCodeEnv_EnvTree_printNodeStr(threadData_t *threadData, modelica_metatype _inNode)
{
  modelica_string _outString = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outString has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inNode;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta6 = stringAppend(_OMC_LIT7,omc_NFSCodeEnv_EnvTree_keyStr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inNode), 2)))));
          tmpMeta7 = stringAppend(tmpMeta6,_OMC_LIT81);
          tmpMeta8 = stringAppend(tmpMeta7,omc_NFSCodeEnv_EnvTree_valueStr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inNode), 3)))));
          tmpMeta9 = stringAppend(tmpMeta8,_OMC_LIT4);
          tmp1 = tmpMeta9;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta10 = stringAppend(_OMC_LIT7,omc_NFSCodeEnv_EnvTree_keyStr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inNode), 2)))));
          tmpMeta11 = stringAppend(tmpMeta10,_OMC_LIT81);
          tmpMeta12 = stringAppend(tmpMeta11,omc_NFSCodeEnv_EnvTree_valueStr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inNode), 3)))));
          tmpMeta13 = stringAppend(tmpMeta12,_OMC_LIT4);
          tmp1 = tmpMeta13;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outString = tmp1;
  _return: OMC_LABEL_UNUSED
  return _outString;
}

DLLDirection
modelica_string omc_NFSCodeEnv_EnvTree_printTreeStr(threadData_t *threadData, modelica_metatype _inTree)
{
  modelica_string _outString = NULL;
  modelica_metatype _left = NULL;
  modelica_metatype _right = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outString has no default value.
  // _left has no default value.
  // _right has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inTree;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 5: {
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT82;
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFSCodeEnv_EnvTree_printNodeStr(threadData, _inTree);
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
          _left = tmpMeta5;
          _right = tmpMeta6;
          /* Pattern matching succeeded */
          tmpMeta7 = stringAppend(omc_NFSCodeEnv_EnvTree_printTreeStr2(threadData, _left, 1 /* true */, _OMC_LIT11),omc_NFSCodeEnv_EnvTree_printNodeStr(threadData, _inTree));
          tmpMeta8 = stringAppend(tmpMeta7,_OMC_LIT6);
          tmpMeta9 = stringAppend(tmpMeta8,omc_NFSCodeEnv_EnvTree_printTreeStr2(threadData, _right, 0 /* false */, _OMC_LIT11));
          tmp1 = tmpMeta9;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outString = tmp1;
  _return: OMC_LABEL_UNUSED
  return _outString;
}

PROTECTED_FUNCTION_STATIC modelica_string omc_NFSCodeEnv_EnvTree_printTreeStr2(threadData_t *threadData, modelica_metatype _inTree, modelica_boolean _isLeft, modelica_string _inIndent)
{
  modelica_string _outString = NULL;
  modelica_metatype _val_node = NULL;
  modelica_metatype _left = NULL;
  modelica_metatype _right = NULL;
  modelica_string _left_str = NULL;
  modelica_string _right_str = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outString has no default value.
  // _val_node has no default value.
  // _left has no default value.
  // _right has no default value.
  // _left_str has no default value.
  // _right_str has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inTree;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          
          /* Pattern matching succeeded */
          tmpMeta5 = stringAppend(_inIndent,(_isLeft?_OMC_LIT83:_OMC_LIT84));
          tmpMeta6 = stringAppend(omc_NFSCodeEnv_EnvTree_printTreeStr2(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inTree), 5))), 1 /* true */, tmpMeta5),_inIndent);
          tmpMeta7 = stringAppend(tmpMeta6,(_isLeft?_OMC_LIT85:_OMC_LIT86));
          tmpMeta8 = stringAppend(tmpMeta7,_OMC_LIT87);
          tmpMeta9 = stringAppend(tmpMeta8,omc_NFSCodeEnv_EnvTree_printNodeStr(threadData, _inTree));
          tmpMeta10 = stringAppend(tmpMeta9,_OMC_LIT6);
          tmpMeta11 = stringAppend(_inIndent,(_isLeft?_OMC_LIT84:_OMC_LIT83));
          tmpMeta12 = stringAppend(tmpMeta10,omc_NFSCodeEnv_EnvTree_printTreeStr2(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inTree), 6))), 0 /* false */, tmpMeta11));
          tmp1 = tmpMeta12;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          
          /* Pattern matching succeeded */
          tmpMeta13 = stringAppend(_inIndent,(_isLeft?_OMC_LIT85:_OMC_LIT86));
          tmpMeta14 = stringAppend(tmpMeta13,_OMC_LIT87);
          tmpMeta15 = stringAppend(tmpMeta14,omc_NFSCodeEnv_EnvTree_printNodeStr(threadData, _inTree));
          tmpMeta16 = stringAppend(tmpMeta15,_OMC_LIT6);
          tmp1 = tmpMeta16;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT11;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outString = tmp1;
  _return: OMC_LABEL_UNUSED
  return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFSCodeEnv_EnvTree_printTreeStr2(threadData_t *threadData, modelica_metatype _inTree, modelica_metatype _isLeft, modelica_metatype _inIndent)
{
  modelica_integer tmp1;
  modelica_string _outString = NULL;
  tmp1 = mmc_unbox_integer(_isLeft);
  _outString = omc_NFSCodeEnv_EnvTree_printTreeStr2(threadData, _inTree, tmp1, _inIndent);
  /* skip box _outString; String */
  return _outString;
}

PROTECTED_FUNCTION_STATIC modelica_boolean omc_NFSCodeEnv_EnvTree_referenceEqOrEmpty(threadData_t *threadData, modelica_metatype _t1, modelica_metatype _t2)
{
  modelica_boolean _b;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _b has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _t1;
    tmp4_2 = _t2;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,0) == 0) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = referenceEq(_t1, _t2);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _b = tmp1;
  _return: OMC_LABEL_UNUSED
  return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFSCodeEnv_EnvTree_referenceEqOrEmpty(threadData_t *threadData, modelica_metatype _t1, modelica_metatype _t2)
{
  modelica_boolean _b;
  modelica_metatype out_b;
  _b = omc_NFSCodeEnv_EnvTree_referenceEqOrEmpty(threadData, _t1, _t2);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_EnvTree_rotateLeft(threadData_t *threadData, modelica_metatype _inNode)
{
  modelica_metatype _outNode = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outNode = _inNode;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _outNode;
    {
      modelica_metatype _node = NULL;
      modelica_metatype _child = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _node has no default value.
      // _child has no default value.
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
          
          _child = tmpMeta6;
          /* Pattern matching succeeded */
          _node = omc_NFSCodeEnv_EnvTree_setTreeLeftRight(threadData, _outNode, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outNode), 5))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_child), 5))));
          tmpMeta1 = omc_NFSCodeEnv_EnvTree_setTreeLeftRight(threadData, _child, _node, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_child), 6))));
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,2) == 0) goto tmp3_end;
          
          _child = tmpMeta7;
          /* Pattern matching succeeded */
          _node = omc_NFSCodeEnv_EnvTree_setTreeLeftRight(threadData, _outNode, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outNode), 5))), _OMC_LIT80);
          tmpMeta1 = omc_NFSCodeEnv_EnvTree_setTreeLeftRight(threadData, _child, _node, _OMC_LIT80);
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _inNode;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outNode = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outNode;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFSCodeEnv_EnvTree_rotateRight(threadData_t *threadData, modelica_metatype _inNode)
{
  modelica_metatype _outNode = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outNode = _inNode;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _outNode;
    {
      modelica_metatype _node = NULL;
      modelica_metatype _child = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _node has no default value.
      // _child has no default value.
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
          
          _child = tmpMeta6;
          /* Pattern matching succeeded */
          _node = omc_NFSCodeEnv_EnvTree_setTreeLeftRight(threadData, _outNode, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_child), 6))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outNode), 6))));
          tmpMeta1 = omc_NFSCodeEnv_EnvTree_setTreeLeftRight(threadData, _child, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_child), 5))), _node);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,2) == 0) goto tmp3_end;
          
          _child = tmpMeta7;
          /* Pattern matching succeeded */
          _node = omc_NFSCodeEnv_EnvTree_setTreeLeftRight(threadData, _outNode, _OMC_LIT80, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outNode), 6))));
          tmpMeta1 = omc_NFSCodeEnv_EnvTree_setTreeLeftRight(threadData, _child, _OMC_LIT80, _node);
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _inNode;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outNode = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outNode;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_setTreeLeftRight(threadData_t *threadData, modelica_metatype _orig, modelica_metatype _left, modelica_metatype _right)
{
  modelica_metatype _res = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _res has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
    tmp4_1 = _orig;
    tmp4_2 = _left;
    tmp4_3 = _right;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 4; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,0) == 0) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,2,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta6 = mmc_mk_box3(4, &NFSCodeEnv_EnvTree_Tree_LEAF__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_orig), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_orig), 3))));
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,0) == 0) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,2,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta1 = _orig;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta7;
          modelica_boolean tmp8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp8 = (modelica_boolean)(omc_NFSCodeEnv_EnvTree_referenceEqOrEmpty(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_orig), 5))), _left) && omc_NFSCodeEnv_EnvTree_referenceEqOrEmpty(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_orig), 6))), _right));
          if(tmp8)
          {
            tmpMeta9 = _orig;
          }
          else
          {
            tmpMeta7 = mmc_mk_box6(3, &NFSCodeEnv_EnvTree_Tree_NODE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_orig), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_orig), 3))), mmc_mk_integer(((modelica_integer) 1) + modelica_integer_max((modelica_integer)(omc_NFSCodeEnv_EnvTree_height(threadData, _left)),(modelica_integer)(omc_NFSCodeEnv_EnvTree_height(threadData, _right)))), _left, _right);
            tmpMeta9 = tmpMeta7;
          }
          tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta10 = mmc_mk_box6(3, &NFSCodeEnv_EnvTree_Tree_NODE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_orig), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_orig), 3))), mmc_mk_integer(((modelica_integer) 1) + modelica_integer_max((modelica_integer)(omc_NFSCodeEnv_EnvTree_height(threadData, _left)),(modelica_integer)(omc_NFSCodeEnv_EnvTree_height(threadData, _right)))), _left, _right);
          tmpMeta1 = tmpMeta10;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _res = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _res;
}

DLLDirection
modelica_string omc_NFSCodeEnv_EnvTree_smallestKey(threadData_t *threadData, modelica_metatype _tree)
{
  modelica_string _key = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _key has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,2,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2)));
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _tree = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 6)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 2: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2)));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _key = tmp1;
  _return: OMC_LABEL_UNUSED
  return _key;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_toList(threadData_t *threadData, modelica_metatype _inTree, modelica_metatype __omcQ_24in_5Flst)
{
  modelica_metatype _lst = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _lst = __omcQ_24in_5Flst;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inTree;
    {
      modelica_string _key = NULL;
      modelica_metatype _value = NULL;
      int tmp4;
      // _key has no default value.
      // _value has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _key = tmpMeta5;
          _value = tmpMeta6;
          /* Pattern matching succeeded */
          _lst = omc_NFSCodeEnv_EnvTree_toList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inTree), 6))), _lst);

          tmpMeta8 = mmc_mk_box2(0, _key, _value);
          tmpMeta7 = mmc_mk_cons(tmpMeta8, _lst);
          _lst = tmpMeta7;
          /* Tail recursive call */
          _inTree = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inTree), 5)));
          __omcQ_24in_5Flst = _lst;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          _key = tmpMeta9;
          _value = tmpMeta10;
          /* Pattern matching succeeded */
          tmpMeta12 = mmc_mk_box2(0, _key, _value);
          tmpMeta11 = mmc_mk_cons(tmpMeta12, _lst);
          tmpMeta1 = tmpMeta11;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _lst;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _lst = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _lst;
}

DLLDirection
modelica_metatype omc_NFSCodeEnv_EnvTree_update(threadData_t *threadData, modelica_metatype _tree, modelica_string _key, modelica_metatype _value)
{
  modelica_metatype _outTree = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outTree = omc_NFSCodeEnv_EnvTree_add(threadData, _tree, _key, _value, boxvar_NFSCodeEnv_EnvTree_addConflictReplace);
  _return: OMC_LABEL_UNUSED
  return _outTree;
}

DLLDirection
modelica_string omc_NFSCodeEnv_EnvTree_valueStr(threadData_t *threadData, modelica_metatype _inValue)
{
  modelica_string _outString = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outString has no default value.
  _outString = _OMC_LIT88;
  _return: OMC_LABEL_UNUSED
  return _outString;
}

