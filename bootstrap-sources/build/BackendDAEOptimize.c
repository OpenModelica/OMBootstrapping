#include "omc_simulation_settings.h"
#include "BackendDAEOptimize.h"
#define _OMC_LIT0_data "__HOM_LAMBDA"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT0,12,_OMC_LIT0_data);
#define _OMC_LIT0 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT0)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT1,2,4) {&DAE_Type_T__REAL__desc,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT1 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT1)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT2,1,3) {&BackendDAE_VarKind_VARIABLE__desc,}};
#define _OMC_LIT2 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT2)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT3,1,5) {&DAE_VarDirection_BIDIR__desc,}};
#define _OMC_LIT3 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT3)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT4,1,5) {&DAE_VarParallelism_NON__PARALLEL__desc,}};
#define _OMC_LIT4 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT4)
#define _OMC_LIT5_data ""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT5,0,_OMC_LIT5_data);
#define _OMC_LIT5 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT5)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT6,0.0);
#define _OMC_LIT6 MMC_REFREALLIT(_OMC_LIT_STRUCT6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT7,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT5,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT6}};
#define _OMC_LIT7 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT7)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT8,1,4) {&DAE_ComponentPrefix_NOCOMPPRE__desc,}};
#define _OMC_LIT8 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT8)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT9,8,3) {&DAE_ElementSource_SOURCE__desc,_OMC_LIT7,MMC_REFSTRUCTLIT(mmc_nil),_OMC_LIT8,MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT9 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT9)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT10,1,6) {&DAE_ConnectorType_NON__CONNECTOR__desc,}};
#define _OMC_LIT10 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT10)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT11,1,6) {&DAE_VarInnerOuter_NOT__INNER__OUTER__desc,}};
#define _OMC_LIT11 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT11)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT12,1,5) {&BackendDAE_Jacobian_EMPTY__JACOBIAN__desc,}};
#define _OMC_LIT12 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT12)
#define _OMC_LIT13_data "InitOptModule generateHomotopyComponents is activated for an equidistant homotopy method and will therefore be ignored."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT13,119,_OMC_LIT13_data);
#define _OMC_LIT13 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT13)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT14,2,5) {&DAE_Operator_MUL__desc,_OMC_LIT1}};
#define _OMC_LIT14 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT14)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT15,1.0);
#define _OMC_LIT15 MMC_REFREALLIT(_OMC_LIT_STRUCT15)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT16,2,4) {&DAE_Exp_RCONST__desc,_OMC_LIT15}};
#define _OMC_LIT16 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT16)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT17,2,4) {&DAE_Operator_SUB__desc,_OMC_LIT1}};
#define _OMC_LIT17 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT17)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT18,2,3) {&DAE_Operator_ADD__desc,_OMC_LIT1}};
#define _OMC_LIT18 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT18)
#define _OMC_LIT19_data "homotopy"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT19,8,_OMC_LIT19_data);
#define _OMC_LIT19 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT19)
#define _OMC_LIT20_data "der"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT20,3,_OMC_LIT20_data);
#define _OMC_LIT20 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT20)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT21,1,3) {&BackendDAE_Matching_NO__MATCHING__desc,}};
#define _OMC_LIT21 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT21)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT22,1,4) {&BackendDAE_IndexType_NORMAL__desc,}};
#define _OMC_LIT22 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT22)
#define _OMC_LIT23_data "$DER_REM_"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT23,9,_OMC_LIT23_data);
#define _OMC_LIT23 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT23)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT24,1,5) {&BackendDAE_EquationKind_INITIAL__EQUATION__desc,}};
#define _OMC_LIT24 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT24)
#define _OMC_LIT25_data "$time"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT25,5,_OMC_LIT25_data);
#define _OMC_LIT25 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT25)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT26,4,4) {&DAE_ComponentRef_CREF__IDENT__desc,_OMC_LIT25,_OMC_LIT1,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT26 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT26)
#define _OMC_LIT27_data "time"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT27,4,_OMC_LIT27_data);
#define _OMC_LIT27 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT27)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT28,4,4) {&BackendDAE_VarKind_STATE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),MMC_REFSTRUCTLIT(mmc_none),MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */))}};
#define _OMC_LIT28 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT28)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT29,19,3) {&BackendDAE_Var_VAR__desc,_OMC_LIT26,_OMC_LIT28,_OMC_LIT3,_OMC_LIT4,_OMC_LIT1,MMC_REFSTRUCTLIT(mmc_none),MMC_REFSTRUCTLIT(mmc_none),MMC_REFSTRUCTLIT(mmc_nil),_OMC_LIT9,MMC_REFSTRUCTLIT(mmc_none),MMC_REFSTRUCTLIT(mmc_none),MMC_REFSTRUCTLIT(mmc_none),MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT10,_OMC_LIT11,MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */))}};
#define _OMC_LIT29 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT29)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT30,4,4) {&DAE_ComponentRef_CREF__IDENT__desc,_OMC_LIT27,_OMC_LIT1,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT30 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT30)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT31,3,9) {&DAE_Exp_CREF__desc,_OMC_LIT30,_OMC_LIT1}};
#define _OMC_LIT31 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT31)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT32,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT20}};
#define _OMC_LIT32 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT32)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT33,3,9) {&DAE_Exp_CREF__desc,_OMC_LIT26,_OMC_LIT1}};
#define _OMC_LIT33 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT33)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT34,2,1) {_OMC_LIT33,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT34 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT34)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT35,1,7) {&DAE_InlineType_NO__INLINE__desc,}};
#define _OMC_LIT35 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT35)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT36,1,3) {&DAE_TailCall_NO__TAIL__desc,}};
#define _OMC_LIT36 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT36)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT37,8,3) {&DAE_CallAttributes_CALL__ATTR__desc,_OMC_LIT1,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT35,_OMC_LIT36}};
#define _OMC_LIT37 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT37)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT38,4,16) {&DAE_Exp_CALL__desc,_OMC_LIT32,_OMC_LIT34,_OMC_LIT37}};
#define _OMC_LIT38 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT38)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT39,1,4) {&BackendDAE_EquationKind_DYNAMIC__EQUATION__desc,}};
#define _OMC_LIT39 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT39)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT40,5,3) {&BackendDAE_EvaluationStages_EVALUATION__STAGES__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */))}};
#define _OMC_LIT40 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT40)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT41,4,3) {&BackendDAE_EquationAttributes_EQUATION__ATTRIBUTES__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT39,_OMC_LIT40}};
#define _OMC_LIT41 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT41)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT42,5,3) {&BackendDAE_Equation_EQUATION__desc,_OMC_LIT38,_OMC_LIT16,_OMC_LIT9,_OMC_LIT41}};
#define _OMC_LIT42 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT42)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT43,1,5) {&BackendDAE_BaseClockPartitionKind_CONTINUOUS__TIME__PARTITION__desc,}};
#define _OMC_LIT43 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT43)
#define _OMC_LIT44_data "  "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT44,2,_OMC_LIT44_data);
#define _OMC_LIT44 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT44)
#define _OMC_LIT45_data "\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT45,1,_OMC_LIT45_data);
#define _OMC_LIT45 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT45)
#define _OMC_LIT46_data "Iteration variables of nonlinear equation system:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT46,50,_OMC_LIT46_data);
#define _OMC_LIT46 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT46)
#define _OMC_LIT47_data "Iteration variables of equation system with analytic Jacobian:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT47,63,_OMC_LIT47_data);
#define _OMC_LIT47 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT47)
#define _OMC_LIT48_data "Iteration variables of equation system without analytic Jacobian:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT48,66,_OMC_LIT48_data);
#define _OMC_LIT48 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT48)
#define _OMC_LIT49_data "Iteration variables of torn linear equation system:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT49,52,_OMC_LIT49_data);
#define _OMC_LIT49 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT49)
#define _OMC_LIT50_data "Iteration variables of torn nonlinear equation system:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT50,55,_OMC_LIT50_data);
#define _OMC_LIT50 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT50)
#define _OMC_LIT51_data "List of all iteration variables (DAE kind: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT51,43,_OMC_LIT51_data);
#define _OMC_LIT51 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT51)
#define _OMC_LIT52_data ")\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT52,2,_OMC_LIT52_data);
#define _OMC_LIT52 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT52)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT53,1,5) {&BackendDAE_VarKind_STATE__DER__desc,}};
#define _OMC_LIT53 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT53)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT54,1,5) {&ErrorTypes_MessageType_TRANSLATION__desc,}};
#define _OMC_LIT54 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT54)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT55,1,4) {&ErrorTypes_Severity_ERROR__desc,}};
#define _OMC_LIT55 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT55)
#define _OMC_LIT56_data "Internal error %s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT56,17,_OMC_LIT56_data);
#define _OMC_LIT56 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT56)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT57,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT56}};
#define _OMC_LIT57 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT57)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT58,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(63)),_OMC_LIT54,_OMC_LIT55,_OMC_LIT57}};
#define _OMC_LIT58 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT58)
#define _OMC_LIT59_data "BackendDAEOptimize.replaceDerCall failed for: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT59,46,_OMC_LIT59_data);
#define _OMC_LIT59 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT59)
#define _OMC_LIT60_data "BackendDAEOptimize.introduceDerAlias failed for: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT60,49,_OMC_LIT60_data);
#define _OMC_LIT60 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT60)
#define _OMC_LIT61_data "LOOP"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT61,4,_OMC_LIT61_data);
#define _OMC_LIT61 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT61)
#define _OMC_LIT62_data "T"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT62,1,_OMC_LIT62_data);
#define _OMC_LIT62 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT62)
#define _OMC_LIT63_data "F"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT63,1,_OMC_LIT63_data);
#define _OMC_LIT63 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT63)
#define _OMC_LIT64_data "LOOPF"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT64,5,_OMC_LIT64_data);
#define _OMC_LIT64 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT64)
#define _OMC_LIT65_data "simplifyLoops"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT65,13,_OMC_LIT65_data);
#define _OMC_LIT65 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT65)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT66,1,4) {&Flags_FlagVisibility_EXTERNAL__desc,}};
#define _OMC_LIT66 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT66)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT67,2,5) {&Flags_FlagData_INT__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT67 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT67)
#define _OMC_LIT68_data "0"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT68,1,_OMC_LIT68_data);
#define _OMC_LIT68 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT68)
#define _OMC_LIT69_data "do nothing"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT69,10,_OMC_LIT69_data);
#define _OMC_LIT69 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT69)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT70,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT69}};
#define _OMC_LIT70 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT70)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT71,2,0) {_OMC_LIT68,_OMC_LIT70}};
#define _OMC_LIT71 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT71)
#define _OMC_LIT72_data "1"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT72,1,_OMC_LIT72_data);
#define _OMC_LIT72 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT72)
#define _OMC_LIT73_data "special modification of residual expressions"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT73,44,_OMC_LIT73_data);
#define _OMC_LIT73 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT73)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT74,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT73}};
#define _OMC_LIT74 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT74)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT75,2,0) {_OMC_LIT72,_OMC_LIT74}};
#define _OMC_LIT75 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT75)
#define _OMC_LIT76_data "2"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT76,1,_OMC_LIT76_data);
#define _OMC_LIT76 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT76)
#define _OMC_LIT77_data "special modification of residual expressions with helper variables"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT77,66,_OMC_LIT77_data);
#define _OMC_LIT77 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT77)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT78,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT77}};
#define _OMC_LIT78 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT78)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT79,2,0) {_OMC_LIT76,_OMC_LIT78}};
#define _OMC_LIT79 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT79)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT80,2,1) {_OMC_LIT79,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT80 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT80)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT81,2,1) {_OMC_LIT75,_OMC_LIT80}};
#define _OMC_LIT81 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT81)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT82,2,1) {_OMC_LIT71,_OMC_LIT81}};
#define _OMC_LIT82 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT82)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT83,2,4) {&Flags_ValidOptions_STRING__DESC__OPTION__desc,_OMC_LIT82}};
#define _OMC_LIT83 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT83)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT84,1,1) {_OMC_LIT83}};
#define _OMC_LIT84 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT84)
#define _OMC_LIT85_data "Simplify algebraic loops."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT85,25,_OMC_LIT85_data);
#define _OMC_LIT85 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT85)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT86,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT85}};
#define _OMC_LIT86 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT86)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT87,8,3) {&Flags_ConfigFlag_CONFIG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(64)),_OMC_LIT65,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT66,_OMC_LIT67,_OMC_LIT84,_OMC_LIT86}};
#define _OMC_LIT87 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT87)
#define _OMC_LIT88_data "------ Tearing ------\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT88,22,_OMC_LIT88_data);
#define _OMC_LIT88 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT88)
#define _OMC_LIT89_data "dumpSimplifyLoops"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT89,17,_OMC_LIT89_data);
#define _OMC_LIT89 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT89)
#define _OMC_LIT90_data "Dump between steps of simplifyLoops"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT90,35,_OMC_LIT90_data);
#define _OMC_LIT90 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT90)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT91,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT90}};
#define _OMC_LIT91 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT91)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT92,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(127)),_OMC_LIT89,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT91}};
#define _OMC_LIT92 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT92)
#define _OMC_LIT93_data "------ EquationsSystem ------\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT93,30,_OMC_LIT93_data);
#define _OMC_LIT93 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT93)
#define _OMC_LIT94_data "------ loop-vars ------\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT94,24,_OMC_LIT94_data);
#define _OMC_LIT94 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT94)
#define _OMC_LIT95_data "------------\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT95,13,_OMC_LIT95_data);
#define _OMC_LIT95 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT95)
#define _OMC_LIT96_data "update eqn["
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT96,11,_OMC_LIT96_data);
#define _OMC_LIT96 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT96)
#define _OMC_LIT97_data "]\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT97,2,_OMC_LIT97_data);
#define _OMC_LIT97 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT97)
#define _OMC_LIT98_data "--old--\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT98,8,_OMC_LIT98_data);
#define _OMC_LIT98 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT98)
#define _OMC_LIT99_data "=> "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT99,3,_OMC_LIT99_data);
#define _OMC_LIT99 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT99)
#define _OMC_LIT100_data "--new--\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT100,8,_OMC_LIT100_data);
#define _OMC_LIT100 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT100)
#define _OMC_LIT101_data "START: simplifyLoops\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT101,21,_OMC_LIT101_data);
#define _OMC_LIT101 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT101)
#define _OMC_LIT102_data "\n***noSIM***\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT102,13,_OMC_LIT102_data);
#define _OMC_LIT102 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT102)
#define _OMC_LIT103_data "END: simplifyLoops\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT103,19,_OMC_LIT103_data);
#define _OMC_LIT103 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT103)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT104,1,3) {&DAE_InlineType_NORM__INLINE__desc,}};
#define _OMC_LIT104 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT104)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT105,1,8) {&DAE_InlineType_AFTER__INDEX__RED__INLINE__desc,}};
#define _OMC_LIT105 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT105)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT106,1,6) {&DAE_InlineType_DEFAULT__INLINE__desc,}};
#define _OMC_LIT106 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT106)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT107,2,1) {_OMC_LIT106,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT107 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT107)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT108,2,1) {_OMC_LIT105,_OMC_LIT107}};
#define _OMC_LIT108 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT108)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT109,2,1) {_OMC_LIT104,_OMC_LIT108}};
#define _OMC_LIT109 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT109)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT110,1,3) {&BackendDAE_BaseClockPartitionKind_UNKNOWN__PARTITION__desc,}};
#define _OMC_LIT110 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT110)
#define _OMC_LIT111_data "hets"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT111,4,_OMC_LIT111_data);
#define _OMC_LIT111 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT111)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT112,1,3) {&Flags_FlagVisibility_INTERNAL__desc,}};
#define _OMC_LIT112 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT112)
#define _OMC_LIT113_data "none"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT113,4,_OMC_LIT113_data);
#define _OMC_LIT113 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT113)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT114,2,8) {&Flags_FlagData_STRING__FLAG__desc,_OMC_LIT113}};
#define _OMC_LIT114 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT114)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT115,2,0) {_OMC_LIT113,_OMC_LIT70}};
#define _OMC_LIT115 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT115)
#define _OMC_LIT116_data "derCalls"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT116,8,_OMC_LIT116_data);
#define _OMC_LIT116 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT116)
#define _OMC_LIT117_data "sort terms based on der-calls"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT117,29,_OMC_LIT117_data);
#define _OMC_LIT117 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT117)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT118,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT117}};
#define _OMC_LIT118 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT118)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT119,2,0) {_OMC_LIT116,_OMC_LIT118}};
#define _OMC_LIT119 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT119)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT120,2,1) {_OMC_LIT119,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT120 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT120)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT121,2,1) {_OMC_LIT115,_OMC_LIT120}};
#define _OMC_LIT121 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT121)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT122,2,4) {&Flags_ValidOptions_STRING__DESC__OPTION__desc,_OMC_LIT121}};
#define _OMC_LIT122 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT122)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT123,1,1) {_OMC_LIT122}};
#define _OMC_LIT123 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT123)
#define _OMC_LIT124_data "Heuristic equation terms sort"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT124,29,_OMC_LIT124_data);
#define _OMC_LIT124 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT124)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT125,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT124}};
#define _OMC_LIT125 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT125)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT126,8,3) {&Flags_ConfigFlag_CONFIG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(80)),_OMC_LIT111,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT112,_OMC_LIT114,_OMC_LIT123,_OMC_LIT125}};
#define _OMC_LIT126 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT126)
#define _OMC_LIT127_data "$OMC$CF$sim"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT127,11,_OMC_LIT127_data);
#define _OMC_LIT127 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT127)
#define _OMC_LIT128_data "$OMC$CF$init"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT128,12,_OMC_LIT128_data);
#define _OMC_LIT128 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT128)
#define _OMC_LIT129_data "$OMC$CF$unknown"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT129,15,_OMC_LIT129_data);
#define _OMC_LIT129 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT129)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT130,1,4) {&BackendDAE_TearingSelect_AVOID__desc,}};
#define _OMC_LIT130 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT130)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT131,1,1) {_OMC_LIT130}};
#define _OMC_LIT131 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT131)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT132,1,3) {&BackendDAE_IndexType_ABSOLUTE__desc,}};
#define _OMC_LIT132 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT132)
#define _OMC_LIT133_data "dumpSortEqnsAndVars"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT133,19,_OMC_LIT133_data);
#define _OMC_LIT133 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT133)
#define _OMC_LIT134_data "Dumps debug output for the modules sortEqnsVars."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT134,48,_OMC_LIT134_data);
#define _OMC_LIT134 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT134)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT135,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT134}};
#define _OMC_LIT135 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT135)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT136,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(126)),_OMC_LIT133,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT135}};
#define _OMC_LIT136 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT136)
#define _OMC_LIT137_data "__OMC$scaled_input"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT137,18,_OMC_LIT137_data);
#define _OMC_LIT137 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT137)
#define _OMC_LIT138_data "__OMC$scaled_state"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT138,18,_OMC_LIT138_data);
#define _OMC_LIT138 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT138)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT139,2,4) {&DAE_Exp_RCONST__desc,_OMC_LIT6}};
#define _OMC_LIT139 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT139)
#define _OMC_LIT140_data "Argument '%s' of der is not differentiable."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT140,43,_OMC_LIT140_data);
#define _OMC_LIT140 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT140)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT141,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT140}};
#define _OMC_LIT141 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT141)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT142,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(369)),_OMC_LIT54,_OMC_LIT55,_OMC_LIT141}};
#define _OMC_LIT142 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT142)
#define _OMC_LIT143_data "The model includes derivatives of order > 1 for: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT143,49,_OMC_LIT143_data);
#define _OMC_LIT143 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT143)
#define _OMC_LIT144_data ". That is not supported. Adding 'Real d"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT144,39,_OMC_LIT144_data);
#define _OMC_LIT144 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT144)
#define _OMC_LIT145_data " = der("
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT145,7,_OMC_LIT145_data);
#define _OMC_LIT145 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT145)
#define _OMC_LIT146_data ");' *might* result in a solvable model"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT146,38,_OMC_LIT146_data);
#define _OMC_LIT146 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT146)
#define _OMC_LIT147_data "pre"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT147,3,_OMC_LIT147_data);
#define _OMC_LIT147 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT147)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT148,1,5) {&DAE_Const_C__VAR__desc,}};
#define _OMC_LIT148 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT148)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT149,1,5) {&SCode_Parallelism_NON__PARALLEL__desc,}};
#define _OMC_LIT149 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT149)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT150,1,3) {&SCode_Variability_VAR__desc,}};
#define _OMC_LIT150 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT150)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT151,1,5) {&Absyn_Direction_BIDIR__desc,}};
#define _OMC_LIT151 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT151)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT152,1,6) {&Absyn_InnerOuter_NOT__INNER__OUTER__desc,}};
#define _OMC_LIT152 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT152)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT153,1,3) {&SCode_Visibility_PUBLIC__desc,}};
#define _OMC_LIT153 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT153)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT154,7,3) {&DAE_Attributes_ATTR__desc,_OMC_LIT10,_OMC_LIT149,_OMC_LIT150,_OMC_LIT151,_OMC_LIT152,_OMC_LIT153}};
#define _OMC_LIT154 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT154)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT155,1,4) {&SCode_Initial_NON__INITIAL__desc,}};
#define _OMC_LIT155 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT155)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT156,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT147}};
#define _OMC_LIT156 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT156)
#define _OMC_LIT157_data "change"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT157,6,_OMC_LIT157_data);
#define _OMC_LIT157 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT157)
#define _OMC_LIT158_data "edge"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT158,4,_OMC_LIT158_data);
#define _OMC_LIT158 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT158)
#define _OMC_LIT159_data "dumpConstrepl"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT159,13,_OMC_LIT159_data);
#define _OMC_LIT159 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT159)
#define _OMC_LIT160_data "Dump the found replacements for constants."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT160,42,_OMC_LIT160_data);
#define _OMC_LIT160 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT160)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT161,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT160}};
#define _OMC_LIT161 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT161)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT162,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(80)),_OMC_LIT159,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT161}};
#define _OMC_LIT162 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT162)
#define _OMC_LIT163_data "Found semiLinear "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT163,17,_OMC_LIT163_data);
#define _OMC_LIT163 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT163)
#define _OMC_LIT164_data "semiLinear"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT164,10,_OMC_LIT164_data);
#define _OMC_LIT164 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT164)
#define _OMC_LIT165_data "Enables dumping of the optimization information when optimizing calls to semiLinear."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT165,84,_OMC_LIT165_data);
#define _OMC_LIT165 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT165)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT166,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT165}};
#define _OMC_LIT166 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT166)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT167,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(72)),_OMC_LIT164,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT166}};
#define _OMC_LIT167 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT167)
#define _OMC_LIT168_data "noEvent"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT168,7,_OMC_LIT168_data);
#define _OMC_LIT168 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT168)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT169,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT168}};
#define _OMC_LIT169 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT169)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT170,2,31) {&DAE_Operator_GREATEREQ__desc,_OMC_LIT1}};
#define _OMC_LIT170 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT170)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT171,2,6) {&DAE_Type_T__BOOL__desc,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT171 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT171)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT172,8,3) {&DAE_CallAttributes_CALL__ATTR__desc,_OMC_LIT171,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT35,_OMC_LIT36}};
#define _OMC_LIT172 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT172)
#define _OMC_LIT173_data "Replace with "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT173,13,_OMC_LIT173_data);
#define _OMC_LIT173 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT173)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT174,3,0) {MMC_REFSTRUCTLIT(mmc_nil),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */))}};
#define _OMC_LIT174 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT174)
#define _OMC_LIT175_data "- BackendDAEOptimize.makeEquationToResidualExp failed to transform equation: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT175,77,_OMC_LIT175_data);
#define _OMC_LIT175 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT175)
#define _OMC_LIT176_data " to residual form!"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT176,18,_OMC_LIT176_data);
#define _OMC_LIT176 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT176)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT177,1,6) {&ErrorTypes_MessageType_SYMBOLIC__desc,}};
#define _OMC_LIT177 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT177)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT178,1,5) {&ErrorTypes_Severity_WARNING__desc,}};
#define _OMC_LIT178 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT178)
#define _OMC_LIT179_data "If-equations are only partially supported. Ignoring %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT179,55,_OMC_LIT179_data);
#define _OMC_LIT179 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT179)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT180,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT179}};
#define _OMC_LIT180 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT180)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT181,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(131)),_OMC_LIT177,_OMC_LIT178,_OMC_LIT180}};
#define _OMC_LIT181 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT181)
#define _OMC_LIT182_data "Missing else-clause in if-equation with non-parameter conditions."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT182,65,_OMC_LIT182_data);
#define _OMC_LIT182 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT182)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT183,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT182}};
#define _OMC_LIT183 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT183)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT184,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(115)),_OMC_LIT54,_OMC_LIT55,_OMC_LIT183}};
#define _OMC_LIT184 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT184)
#define _OMC_LIT185_data ","
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT185,1,_OMC_LIT185_data);
#define _OMC_LIT185 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT185)
#define _OMC_LIT186_data "{"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT186,1,_OMC_LIT186_data);
#define _OMC_LIT186 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT186)
#define _OMC_LIT187_data "}"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT187,1,_OMC_LIT187_data);
#define _OMC_LIT187 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT187)
#define _OMC_LIT188_data "If-equation with conditions that are not parameter expressions must have the same number of equations in each branch, equation count is %s for each respective branch:\n%s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT188,169,_OMC_LIT188_data);
#define _OMC_LIT188 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT188)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT189,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT188}};
#define _OMC_LIT189 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT189)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT190,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(132)),_OMC_LIT177,_OMC_LIT55,_OMC_LIT189}};
#define _OMC_LIT190 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT190)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT191,2,6) {&DAE_Exp_BCONST__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */))}};
#define _OMC_LIT191 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT191)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT192,1,3) {&DAE_Else_NOELSE__desc,}};
#define _OMC_LIT192 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT192)
#define _OMC_LIT193_data "evaluateFinalParameters"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT193,23,_OMC_LIT193_data);
#define _OMC_LIT193 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT193)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT194,2,4) {&Flags_FlagData_BOOL__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */))}};
#define _OMC_LIT194 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT194)
#define _OMC_LIT195_data "Evaluates all the final parameters in addition to parameters with annotation(Evaluate=true)."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT195,92,_OMC_LIT195_data);
#define _OMC_LIT195 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT195)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT196,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT195}};
#define _OMC_LIT196 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT196)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT197,8,3) {&Flags_ConfigFlag_CONFIG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(99)),_OMC_LIT193,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT66,_OMC_LIT194,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT196}};
#define _OMC_LIT197 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT197)
#define _OMC_LIT198_data "evaluateProtectedParameters"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT198,27,_OMC_LIT198_data);
#define _OMC_LIT198 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT198)
#define _OMC_LIT199_data "Evaluates all the protected parameters in addition to parameters with annotation(Evaluate=true)."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT199,96,_OMC_LIT199_data);
#define _OMC_LIT199 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT199)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT200,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT199}};
#define _OMC_LIT200 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT200)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT201,8,3) {&Flags_ConfigFlag_CONFIG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(100)),_OMC_LIT198,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT66,_OMC_LIT194,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT200}};
#define _OMC_LIT201 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT201)
#define _OMC_LIT202_data "not supported operator\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT202,23,_OMC_LIT202_data);
#define _OMC_LIT202 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT202)
#define _OMC_LIT203_data "sin"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT203,3,_OMC_LIT203_data);
#define _OMC_LIT203 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT203)
#define _OMC_LIT204_data "cos"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT204,3,_OMC_LIT204_data);
#define _OMC_LIT204 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT204)
#define _OMC_LIT205_data "tan"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT205,3,_OMC_LIT205_data);
#define _OMC_LIT205 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT205)
#define _OMC_LIT206_data "exp"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT206,3,_OMC_LIT206_data);
#define _OMC_LIT206 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT206)
#define _OMC_LIT207_data "previous"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT207,8,_OMC_LIT207_data);
#define _OMC_LIT207 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT207)
#define _OMC_LIT208_data "another JAC\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT208,12,_OMC_LIT208_data);
#define _OMC_LIT208 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT208)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT209,8,0) {MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT209 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT209)
#define _OMC_LIT210_data "countOperations"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT210,15,_OMC_LIT210_data);
#define _OMC_LIT210 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT210)
#define _OMC_LIT211_data "Count operations."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT211,17,_OMC_LIT211_data);
#define _OMC_LIT211 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT211)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT212,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT211}};
#define _OMC_LIT212 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT212)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT213,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(60)),_OMC_LIT210,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT212}};
#define _OMC_LIT213 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT213)
#define _OMC_LIT214_data "not supported component: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT214,25,_OMC_LIT214_data);
#define _OMC_LIT214 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT214)
#define _OMC_LIT215_data "BackendDAEOptimize.partitionIndependentBlocks failed without good error message"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT215,79,_OMC_LIT215_data);
#define _OMC_LIT215 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT215)
#define _OMC_LIT216_data "BackendDAEOptimize.removeUnusedFunctionsSymJacs: Unexpected data reconciliation jacobian structure. "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT216,100,_OMC_LIT216_data);
#define _OMC_LIT216 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT216)
#define _OMC_LIT217_data "/home/adrpo33/OpenModelica/OMCompiler/Compiler/BackEnd/BackendDAEOptimize.mo"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT217,76,_OMC_LIT217_data);
#define _OMC_LIT217 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT217)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT218_6,1.758197185e9);
#define _OMC_LIT218_6 MMC_REFREALLIT(_OMC_LIT_STRUCT218_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT218,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT217,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1450)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1451)),MMC_IMMEDIATE(MMC_TAGFIXNUM(91)),_OMC_LIT218_6}};
#define _OMC_LIT218 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT218)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT219,1,5) {&DAE_AvlTreePathFunction_Tree_EMPTY__desc,}};
#define _OMC_LIT219 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT219)
#define _OMC_LIT220_data "BackendDAEOptimize.copyRecordConstructorAndExternalObjConstructorDestructor got unxpected record constructor structure for  "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT220,124,_OMC_LIT220_data);
#define _OMC_LIT220 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT220)
#define _OMC_LIT221_data "."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT221,1,_OMC_LIT221_data);
#define _OMC_LIT221 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT221)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT222_6,1.758197185e9);
#define _OMC_LIT222_6 MMC_REFREALLIT(_OMC_LIT_STRUCT222_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT222,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT217,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1378)),MMC_IMMEDIATE(MMC_TAGFIXNUM(11)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1380)),MMC_IMMEDIATE(MMC_TAGFIXNUM(28)),_OMC_LIT222_6}};
#define _OMC_LIT222 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT222)
#define _OMC_LIT223_data "constructor"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT223,11,_OMC_LIT223_data);
#define _OMC_LIT223 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT223)
#define _OMC_LIT224_data "destructor"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT224,10,_OMC_LIT224_data);
#define _OMC_LIT224 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT224)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT225,1,5) {&AvlSetInt_Tree_EMPTY__desc,}};
#define _OMC_LIT225 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT225)
#define _OMC_LIT226_data "dumpPPrepl"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT226,10,_OMC_LIT226_data);
#define _OMC_LIT226 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT226)
#define _OMC_LIT227_data "Dump the found replacements for protected parameters."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT227,53,_OMC_LIT227_data);
#define _OMC_LIT227 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT227)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT228,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT227}};
#define _OMC_LIT228 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT228)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT229,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(41)),_OMC_LIT226,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT228}};
#define _OMC_LIT229 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT229)
#define _OMC_LIT230_data "dumpParamrepl"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT230,13,_OMC_LIT230_data);
#define _OMC_LIT230 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT230)
#define _OMC_LIT231_data "Dump the found replacements for remove parameters."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT231,50,_OMC_LIT231_data);
#define _OMC_LIT231 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT231)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT232,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT231}};
#define _OMC_LIT232 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT232)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT233,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(40)),_OMC_LIT230,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT232}};
#define _OMC_LIT233 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT233)
#define _OMC_LIT234_data "sample"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT234,6,_OMC_LIT234_data);
#define _OMC_LIT234 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT234)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT235,2,6) {&DAE_Exp_BCONST__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */))}};
#define _OMC_LIT235 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT235)
#define _OMC_LIT236_data "max"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT236,3,_OMC_LIT236_data);
#define _OMC_LIT236 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT236)
#define _OMC_LIT237_data "$OMC$PositiveMax"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT237,16,_OMC_LIT237_data);
#define _OMC_LIT237 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT237)
#define _OMC_LIT238_data "$OMC$inStreamDiv"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT238,16,_OMC_LIT238_data);
#define _OMC_LIT238 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT238)
#include "util/modelica.h"

#include "BackendDAEOptimize_includes.h"


/* default, do not make protected functions static */
#if !defined(PROTECTED_FUNCTION_STATIC)
#define PROTECTED_FUNCTION_STATIC
#endif
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverseStrongComponentsAddLambda(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcomps, modelica_metatype __omcQ_24in_5Fsystem, modelica_metatype *out_system);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverseStrongComponentsAddLambda,2,0) {(void*) boxptr_BackendDAEOptimize_traverseStrongComponentsAddLambda,0}};
#define boxvar_BackendDAEOptimize_traverseStrongComponentsAddLambda MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverseStrongComponentsAddLambda)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_createOneHomotopyComponent(threadData_t *threadData, modelica_metatype _homotopyComponents, modelica_metatype _inSystem, modelica_integer _lambdaIdx);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_createOneHomotopyComponent(threadData_t *threadData, modelica_metatype _homotopyComponents, modelica_metatype _inSystem, modelica_metatype _lambdaIdx);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_createOneHomotopyComponent,2,0) {(void*) boxptr_BackendDAEOptimize_createOneHomotopyComponent,0}};
#define boxvar_BackendDAEOptimize_createOneHomotopyComponent MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_createOneHomotopyComponent)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_getHomotopyComponents(threadData_t *threadData, modelica_metatype _componentIndexes, modelica_metatype _components, modelica_integer _homotopyLoopBeginning, modelica_integer _homotopyLoopEnd, modelica_metatype __omcQ_24in_5FoutPreHomotopyComponents, modelica_metatype __omcQ_24in_5FoutHomotopyComponents, modelica_metatype __omcQ_24in_5FoutPostHomotopyComponents, modelica_metatype *out_outHomotopyComponents, modelica_metatype *out_outPostHomotopyComponents);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_getHomotopyComponents(threadData_t *threadData, modelica_metatype _componentIndexes, modelica_metatype _components, modelica_metatype _homotopyLoopBeginning, modelica_metatype _homotopyLoopEnd, modelica_metatype __omcQ_24in_5FoutPreHomotopyComponents, modelica_metatype __omcQ_24in_5FoutHomotopyComponents, modelica_metatype __omcQ_24in_5FoutPostHomotopyComponents, modelica_metatype *out_outHomotopyComponents, modelica_metatype *out_outPostHomotopyComponents);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_getHomotopyComponents,2,0) {(void*) boxptr_BackendDAEOptimize_getHomotopyComponents,0}};
#define boxvar_BackendDAEOptimize_getHomotopyComponents MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_getHomotopyComponents)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverseStrongComponentsForHomotopyLoop(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcomps, modelica_metatype __omcQ_24in_5Fsystem, modelica_metatype *out_system);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverseStrongComponentsForHomotopyLoop,2,0) {(void*) boxptr_BackendDAEOptimize_traverseStrongComponentsForHomotopyLoop,0}};
#define boxvar_BackendDAEOptimize_traverseStrongComponentsForHomotopyLoop MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverseStrongComponentsForHomotopyLoop)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_replaceHomotopyWithLambdaExpression(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inFoundHomotopy, modelica_boolean *out_cont, modelica_boolean *out_outFoundHomotopy);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_replaceHomotopyWithLambdaExpression(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inFoundHomotopy, modelica_metatype *out_cont, modelica_metatype *out_outFoundHomotopy);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_replaceHomotopyWithLambdaExpression,2,0) {(void*) boxptr_BackendDAEOptimize_replaceHomotopyWithLambdaExpression,0}};
#define boxvar_BackendDAEOptimize_replaceHomotopyWithLambdaExpression MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_replaceHomotopyWithLambdaExpression)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_inlineHomotopy3(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inFoundHomotopy, modelica_boolean *out_outFoundHomotopy);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_inlineHomotopy3(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inFoundHomotopy, modelica_metatype *out_outFoundHomotopy);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_inlineHomotopy3,2,0) {(void*) boxptr_BackendDAEOptimize_inlineHomotopy3,0}};
#define boxvar_BackendDAEOptimize_inlineHomotopy3 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_inlineHomotopy3)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_inlineHomotopy2(threadData_t *threadData, modelica_metatype _inEq, modelica_boolean _inFoundHomotopy, modelica_boolean *out_outFoundHomotopy);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_inlineHomotopy2(threadData_t *threadData, modelica_metatype _inEq, modelica_metatype _inFoundHomotopy, modelica_metatype *out_outFoundHomotopy);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_inlineHomotopy2,2,0) {(void*) boxptr_BackendDAEOptimize_inlineHomotopy2,0}};
#define boxvar_BackendDAEOptimize_inlineHomotopy2 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_inlineHomotopy2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_replaceDerCallOutputsOnly(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype __omcQ_24in_5Fder_5Freplacement, modelica_metatype *out_der_replacement);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_replaceDerCallOutputsOnly,2,0) {(void*) boxptr_BackendDAEOptimize_replaceDerCallOutputsOnly,0}};
#define boxvar_BackendDAEOptimize_replaceDerCallOutputsOnly MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_replaceDerCallOutputsOnly)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_BackendDAEOptimize_stateVarIsNotVisited(threadData_t *threadData, modelica_integer _idx, modelica_metatype _varArr);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_stateVarIsNotVisited(threadData_t *threadData, modelica_metatype _idx, modelica_metatype _varArr);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_stateVarIsNotVisited,2,0) {(void*) boxptr_BackendDAEOptimize_stateVarIsNotVisited,0}};
#define boxvar_BackendDAEOptimize_stateVarIsNotVisited MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_stateVarIsNotVisited)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_addTimeAsState4(threadData_t *threadData, modelica_metatype _inExp, modelica_integer _inTuple, modelica_boolean *out_cont, modelica_integer *out_outTuple);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_addTimeAsState4(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTuple, modelica_metatype *out_cont, modelica_metatype *out_outTuple);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_addTimeAsState4,2,0) {(void*) boxptr_BackendDAEOptimize_addTimeAsState4,0}};
#define boxvar_BackendDAEOptimize_addTimeAsState4 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_addTimeAsState4)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_addTimeAsState3(threadData_t *threadData, modelica_metatype _inExp, modelica_integer _inTuple, modelica_integer *out_outTuple);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_addTimeAsState3(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTuple, modelica_metatype *out_outTuple);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_addTimeAsState3,2,0) {(void*) boxptr_BackendDAEOptimize_addTimeAsState3,0}};
#define boxvar_BackendDAEOptimize_addTimeAsState3 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_addTimeAsState3)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_addTimeAsState2(threadData_t *threadData, modelica_metatype _inEq, modelica_integer _inFoo, modelica_integer *out_outFoo);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_addTimeAsState2(threadData_t *threadData, modelica_metatype _inEq, modelica_metatype _inFoo, modelica_metatype *out_outFoo);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_addTimeAsState2,2,0) {(void*) boxptr_BackendDAEOptimize_addTimeAsState2,0}};
#define boxvar_BackendDAEOptimize_addTimeAsState2 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_addTimeAsState2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_addTimeAsState1(threadData_t *threadData, modelica_metatype _inSystem, modelica_metatype _inShared, modelica_integer _inFoo, modelica_metatype *out_outShared, modelica_integer *out_outFoo);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_addTimeAsState1(threadData_t *threadData, modelica_metatype _inSystem, modelica_metatype _inShared, modelica_metatype _inFoo, modelica_metatype *out_outShared, modelica_metatype *out_outFoo);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_addTimeAsState1,2,0) {(void*) boxptr_BackendDAEOptimize_addTimeAsState1,0}};
#define boxvar_BackendDAEOptimize_addTimeAsState1 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_addTimeAsState1)
PROTECTED_FUNCTION_STATIC modelica_string omc_BackendDAEOptimize_warnAboutVars(threadData_t *threadData, modelica_metatype _vars);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_warnAboutVars,2,0) {(void*) boxptr_BackendDAEOptimize_warnAboutVars,0}};
#define boxvar_BackendDAEOptimize_warnAboutVars MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_warnAboutVars)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_listAllIterationVariables3(threadData_t *threadData, modelica_metatype _varIndices, modelica_metatype _allVars, modelica_string _message, modelica_metatype __omcQ_24in_5Fwarnings, modelica_metatype __omcQ_24in_5Fcrefs, modelica_metatype *out_crefs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_listAllIterationVariables3,2,0) {(void*) boxptr_BackendDAEOptimize_listAllIterationVariables3,0}};
#define boxvar_BackendDAEOptimize_listAllIterationVariables3 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_listAllIterationVariables3)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_listAllIterationVariables2(threadData_t *threadData, modelica_metatype _comps, modelica_metatype _vars, modelica_metatype *out_componentRefs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_listAllIterationVariables2,2,0) {(void*) boxptr_BackendDAEOptimize_listAllIterationVariables2,0}};
#define boxvar_BackendDAEOptimize_listAllIterationVariables2 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_listAllIterationVariables2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_listAllIterationVariables1(threadData_t *threadData, modelica_metatype _inEqSystem, modelica_metatype *out_outComponentRef);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_listAllIterationVariables1,2,0) {(void*) boxptr_BackendDAEOptimize_listAllIterationVariables1,0}};
#define boxvar_BackendDAEOptimize_listAllIterationVariables1 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_listAllIterationVariables1)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_applyRewriteRulesBackendShared(threadData_t *threadData, modelica_metatype _inDAE);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_applyRewriteRulesBackendShared,2,0) {(void*) boxptr_BackendDAEOptimize_applyRewriteRulesBackendShared,0}};
#define boxvar_BackendDAEOptimize_applyRewriteRulesBackendShared MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_applyRewriteRulesBackendShared)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserExpapplyRewriteRulesBackend(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inB, modelica_boolean *out_outB);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_traverserExpapplyRewriteRulesBackend(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inB, modelica_metatype *out_outB);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserExpapplyRewriteRulesBackend,2,0) {(void*) boxptr_BackendDAEOptimize_traverserExpapplyRewriteRulesBackend,0}};
#define boxvar_BackendDAEOptimize_traverserExpapplyRewriteRulesBackend MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserExpapplyRewriteRulesBackend)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserapplyRewriteRulesBackend(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inB, modelica_boolean *out_outB);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_traverserapplyRewriteRulesBackend(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inB, modelica_metatype *out_outB);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserapplyRewriteRulesBackend,2,0) {(void*) boxptr_BackendDAEOptimize_traverserapplyRewriteRulesBackend,0}};
#define boxvar_BackendDAEOptimize_traverserapplyRewriteRulesBackend MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserapplyRewriteRulesBackend)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_applyRewriteRulesBackend0(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _inShared, modelica_boolean _inChanged, modelica_metatype *out_outShared, modelica_boolean *out_outChanged);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_applyRewriteRulesBackend0(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _inShared, modelica_metatype _inChanged, modelica_metatype *out_outShared, modelica_metatype *out_outChanged);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_applyRewriteRulesBackend0,2,0) {(void*) boxptr_BackendDAEOptimize_applyRewriteRulesBackend0,0}};
#define boxvar_BackendDAEOptimize_applyRewriteRulesBackend0 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_applyRewriteRulesBackend0)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_moveStatesVariables(threadData_t *threadData, modelica_metatype _inVar, modelica_metatype _inTpl, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_moveStatesVariables,2,0) {(void*) boxptr_BackendDAEOptimize_moveStatesVariables,0}};
#define boxvar_BackendDAEOptimize_moveStatesVariables MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_moveStatesVariables)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_replaceDerCall(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _itpl, modelica_boolean *out_tpl);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_replaceDerCall(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _itpl, modelica_metatype *out_tpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_replaceDerCall,2,0) {(void*) boxptr_BackendDAEOptimize_replaceDerCall,0}};
#define boxvar_BackendDAEOptimize_replaceDerCall MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_replaceDerCall)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserreplaceDerCallExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _tpl, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserreplaceDerCallExp,2,0) {(void*) boxptr_BackendDAEOptimize_traverserreplaceDerCallExp,0}};
#define boxvar_BackendDAEOptimize_traverserreplaceDerCallExp MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserreplaceDerCallExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserreplaceDerCall(threadData_t *threadData, modelica_metatype _inEq, modelica_metatype _inVars, modelica_metatype *out_outVars);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserreplaceDerCall,2,0) {(void*) boxptr_BackendDAEOptimize_traverserreplaceDerCall,0}};
#define boxvar_BackendDAEOptimize_traverserreplaceDerCall MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserreplaceDerCall)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_replaceDerCallWork(threadData_t *threadData, modelica_metatype _inSyst, modelica_metatype _shared, modelica_metatype *out_oshared);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_replaceDerCallWork,2,0) {(void*) boxptr_BackendDAEOptimize_replaceDerCallWork,0}};
#define boxvar_BackendDAEOptimize_replaceDerCallWork MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_replaceDerCallWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_introDerAlias(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _itpl, modelica_metatype *out_tpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_introDerAlias,2,0) {(void*) boxptr_BackendDAEOptimize_introDerAlias,0}};
#define boxvar_BackendDAEOptimize_introDerAlias MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_introDerAlias)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserintroduceDerAliasExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _tpl, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserintroduceDerAliasExp,2,0) {(void*) boxptr_BackendDAEOptimize_traverserintroduceDerAliasExp,0}};
#define boxvar_BackendDAEOptimize_traverserintroduceDerAliasExp MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserintroduceDerAliasExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserintroduceDerAliasEquation(threadData_t *threadData, modelica_metatype _inEq, modelica_metatype _tpl, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserintroduceDerAliasEquation,2,0) {(void*) boxptr_BackendDAEOptimize_traverserintroduceDerAliasEquation,0}};
#define boxvar_BackendDAEOptimize_traverserintroduceDerAliasEquation MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserintroduceDerAliasEquation)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_introduceDerAliasWork(threadData_t *threadData, modelica_metatype _inSyst, modelica_metatype _shared, modelica_metatype *out_oshared);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_introduceDerAliasWork,2,0) {(void*) boxptr_BackendDAEOptimize_introduceDerAliasWork,0}};
#define boxvar_BackendDAEOptimize_introduceDerAliasWork MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_introduceDerAliasWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyLoops__SplitFactors(threadData_t *threadData, modelica_metatype _var_lst, modelica_metatype _inExp, modelica_metatype *out_noLoopTerms);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyLoops__SplitFactors,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyLoops__SplitFactors,0}};
#define boxvar_BackendDAEOptimize_simplifyLoops__SplitFactors MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyLoops__SplitFactors)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_BackendDAEOptimize_simplifyLoopExpHelper(threadData_t *threadData, modelica_boolean _update, modelica_boolean _update_, modelica_boolean _para, modelica_metatype _ass1_, modelica_metatype _ass2_, modelica_metatype _inVars, modelica_metatype _inEqns, modelica_integer _inIndex, modelica_integer _ii, modelica_metatype _inCompOrders, modelica_metatype *out_ass1, modelica_metatype *out_ass2, modelica_integer *out_outIndx, modelica_metatype *out_outCompOrder);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_simplifyLoopExpHelper(threadData_t *threadData, modelica_metatype _update, modelica_metatype _update_, modelica_metatype _para, modelica_metatype _ass1_, modelica_metatype _ass2_, modelica_metatype _inVars, modelica_metatype _inEqns, modelica_metatype _inIndex, modelica_metatype _ii, modelica_metatype _inCompOrders, modelica_metatype *out_ass1, modelica_metatype *out_ass2, modelica_metatype *out_outIndx, modelica_metatype *out_outCompOrder);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyLoopExpHelper,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyLoopExpHelper,0}};
#define boxvar_BackendDAEOptimize_simplifyLoopExpHelper MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyLoopExpHelper)
PROTECTED_FUNCTION_STATIC modelica_integer omc_BackendDAEOptimize_simplifyLoopEqn(threadData_t *threadData, modelica_integer _inIndx, modelica_metatype _inVars, modelica_metatype _inEqns, modelica_metatype _inShared, modelica_metatype _var_lst, modelica_metatype _inEqn, modelica_metatype _ass1_, modelica_metatype _ass2_, modelica_boolean _simDAE, modelica_integer _ii, modelica_metatype _inCompOrders, modelica_metatype *out_outVars, modelica_metatype *out_outEqns, modelica_metatype *out_outShared, modelica_boolean *out_outUpdate, modelica_metatype *out_outEqn, modelica_metatype *out_ass1, modelica_metatype *out_ass2, modelica_metatype *out_outCompOrder);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_simplifyLoopEqn(threadData_t *threadData, modelica_metatype _inIndx, modelica_metatype _inVars, modelica_metatype _inEqns, modelica_metatype _inShared, modelica_metatype _var_lst, modelica_metatype _inEqn, modelica_metatype _ass1_, modelica_metatype _ass2_, modelica_metatype _simDAE, modelica_metatype _ii, modelica_metatype _inCompOrders, modelica_metatype *out_outVars, modelica_metatype *out_outEqns, modelica_metatype *out_outShared, modelica_metatype *out_outUpdate, modelica_metatype *out_outEqn, modelica_metatype *out_ass1, modelica_metatype *out_ass2, modelica_metatype *out_outCompOrder);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyLoopEqn,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyLoopEqn,0}};
#define boxvar_BackendDAEOptimize_simplifyLoopEqn MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyLoopEqn)
PROTECTED_FUNCTION_STATIC modelica_integer omc_BackendDAEOptimize_simplifyLoopsWork(threadData_t *threadData, modelica_metatype _inComp, modelica_integer _inIndx, modelica_metatype _inVars, modelica_metatype _inEqns, modelica_metatype _inShared, modelica_boolean _inUpdate, modelica_metatype _ass1_, modelica_metatype _ass2_, modelica_boolean _simDAE, modelica_integer _ii, modelica_metatype _inCompOrders, modelica_metatype *out_outVars, modelica_metatype *out_outEqns, modelica_metatype *out_outShared, modelica_boolean *out_outUpdate, modelica_metatype *out_ass1, modelica_metatype *out_ass2, modelica_metatype *out_outCompOrders);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_simplifyLoopsWork(threadData_t *threadData, modelica_metatype _inComp, modelica_metatype _inIndx, modelica_metatype _inVars, modelica_metatype _inEqns, modelica_metatype _inShared, modelica_metatype _inUpdate, modelica_metatype _ass1_, modelica_metatype _ass2_, modelica_metatype _simDAE, modelica_metatype _ii, modelica_metatype _inCompOrders, modelica_metatype *out_outVars, modelica_metatype *out_outEqns, modelica_metatype *out_outShared, modelica_metatype *out_outUpdate, modelica_metatype *out_ass1, modelica_metatype *out_ass2, modelica_metatype *out_outCompOrders);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyLoopsWork,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyLoopsWork,0}};
#define boxvar_BackendDAEOptimize_simplifyLoopsWork MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyLoopsWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyLoopsUpdateComps(threadData_t *threadData, modelica_metatype _inComps, modelica_metatype _inAss1, modelica_metatype _inAss2, modelica_metatype _inCompOrders);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyLoopsUpdateComps,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyLoopsUpdateComps,0}};
#define boxvar_BackendDAEOptimize_simplifyLoopsUpdateComps MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyLoopsUpdateComps)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyLoopsUpdateAss(threadData_t *threadData, modelica_metatype _inAss, modelica_metatype _new_ass, modelica_integer _n);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_simplifyLoopsUpdateAss(threadData_t *threadData, modelica_metatype _inAss, modelica_metatype _new_ass, modelica_metatype _n);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyLoopsUpdateAss,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyLoopsUpdateAss,0}};
#define boxvar_BackendDAEOptimize_simplifyLoopsUpdateAss MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyLoopsUpdateAss)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyLoopsUpdateMatching(threadData_t *threadData, modelica_metatype _inVars, modelica_metatype _inEqns, modelica_metatype _inSyst, modelica_metatype _ass1_, modelica_metatype _ass2_, modelica_integer _nEqns, modelica_integer _nVars, modelica_metatype _functionTree, modelica_metatype _compOrders);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_simplifyLoopsUpdateMatching(threadData_t *threadData, modelica_metatype _inVars, modelica_metatype _inEqns, modelica_metatype _inSyst, modelica_metatype _ass1_, modelica_metatype _ass2_, modelica_metatype _nEqns, modelica_metatype _nVars, modelica_metatype _functionTree, modelica_metatype _compOrders);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyLoopsUpdateMatching,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyLoopsUpdateMatching,0}};
#define boxvar_BackendDAEOptimize_simplifyLoopsUpdateMatching MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyLoopsUpdateMatching)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyLoopsMain(threadData_t *threadData, modelica_metatype _inDAE);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyLoopsMain,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyLoopsMain,0}};
#define boxvar_BackendDAEOptimize_simplifyLoopsMain MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyLoopsMain)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_inlineFunctionInLoopsWork(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fsyst, modelica_metatype _functionTree, modelica_metatype __omcQ_24in_5Fshared, modelica_metatype *out_shared);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_inlineFunctionInLoopsWork,2,0) {(void*) boxptr_BackendDAEOptimize_inlineFunctionInLoopsWork,0}};
#define boxvar_BackendDAEOptimize_inlineFunctionInLoopsWork MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_inlineFunctionInLoopsWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_inlineFunctionInLoopsMain(threadData_t *threadData, modelica_metatype _inDAE);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_inlineFunctionInLoopsMain,2,0) {(void*) boxptr_BackendDAEOptimize_inlineFunctionInLoopsMain,0}};
#define boxvar_BackendDAEOptimize_inlineFunctionInLoopsMain MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_inlineFunctionInLoopsMain)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_hetsSplitExp(threadData_t *threadData, modelica_metatype _iExp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_hetsSplitExp,2,0) {(void*) boxptr_BackendDAEOptimize_hetsSplitExp,0}};
#define boxvar_BackendDAEOptimize_hetsSplitExp MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_hetsSplitExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_hetsSplitRhs(threadData_t *threadData, modelica_metatype _iEqn);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_hetsSplitRhs,2,0) {(void*) boxptr_BackendDAEOptimize_hetsSplitRhs,0}};
#define boxvar_BackendDAEOptimize_hetsSplitRhs MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_hetsSplitRhs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_hetsSplitRes(threadData_t *threadData, modelica_metatype _iEqn);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_hetsSplitRes,2,0) {(void*) boxptr_BackendDAEOptimize_hetsSplitRes,0}};
#define boxvar_BackendDAEOptimize_hetsSplitRes MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_hetsSplitRes)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_hetsWork(threadData_t *threadData, modelica_metatype _inDAE);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_hetsWork,2,0) {(void*) boxptr_BackendDAEOptimize_hetsWork,0}};
#define boxvar_BackendDAEOptimize_hetsWork MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_hetsWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_sortEqnsVarsWeights(threadData_t *threadData, modelica_metatype _inW, modelica_integer _n, modelica_metatype _m);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_sortEqnsVarsWeights(threadData_t *threadData, modelica_metatype _inW, modelica_metatype _n, modelica_metatype _m);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_sortEqnsVarsWeights,2,0) {(void*) boxptr_BackendDAEOptimize_sortEqnsVarsWeights,0}};
#define boxvar_BackendDAEOptimize_sortEqnsVarsWeights MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_sortEqnsVarsWeights)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_sortEqnsVarsWorkTpl(threadData_t *threadData, modelica_metatype _tplIndexWeight);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_sortEqnsVarsWorkTpl,2,0) {(void*) boxptr_BackendDAEOptimize_sortEqnsVarsWorkTpl,0}};
#define boxvar_BackendDAEOptimize_sortEqnsVarsWorkTpl MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_sortEqnsVarsWorkTpl)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_updateStatesVars(threadData_t *threadData, modelica_metatype _inVars, modelica_metatype _inNewStates, modelica_boolean _noStateFound);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_updateStatesVars(threadData_t *threadData, modelica_metatype _inVars, modelica_metatype _inNewStates, modelica_metatype _noStateFound);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_updateStatesVars,2,0) {(void*) boxptr_BackendDAEOptimize_updateStatesVars,0}};
#define boxvar_BackendDAEOptimize_updateStatesVars MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_updateStatesVars)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_updateStatesVar(threadData_t *threadData, modelica_metatype _inVars, modelica_metatype _var, modelica_metatype _iExp, modelica_metatype *out_oExp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_updateStatesVar,2,0) {(void*) boxptr_BackendDAEOptimize_updateStatesVar,0}};
#define boxvar_BackendDAEOptimize_updateStatesVar MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_updateStatesVar)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_derCrefsExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inVars, modelica_metatype *out_outVars);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_derCrefsExp,2,0) {(void*) boxptr_BackendDAEOptimize_derCrefsExp,0}};
#define boxvar_BackendDAEOptimize_derCrefsExp MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_derCrefsExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_expandDerExp(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype __omcQ_24in_5Fvars, modelica_metatype _inShared, modelica_metatype *out_vars);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_expandDerExp,2,0) {(void*) boxptr_BackendDAEOptimize_expandDerExp,0}};
#define boxvar_BackendDAEOptimize_expandDerExp MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_expandDerExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserexpandDerExp(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype __omcQ_24in_5Ftpl, modelica_metatype _shared, modelica_metatype *out_tpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserexpandDerExp,2,0) {(void*) boxptr_BackendDAEOptimize_traverserexpandDerExp,0}};
#define boxvar_BackendDAEOptimize_traverserexpandDerExp MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserexpandDerExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserexpandDerEquation(threadData_t *threadData, modelica_metatype __omcQ_24in_5Feq, modelica_metatype __omcQ_24in_5Fvars, modelica_metatype _shared, modelica_metatype *out_vars);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserexpandDerEquation,2,0) {(void*) boxptr_BackendDAEOptimize_traverserexpandDerEquation,0}};
#define boxvar_BackendDAEOptimize_traverserexpandDerEquation MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserexpandDerEquation)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_expandDerOperatorWork(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fsyst, modelica_metatype __omcQ_24in_5Fshared, modelica_metatype *out_shared);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_expandDerOperatorWork,2,0) {(void*) boxptr_BackendDAEOptimize_expandDerOperatorWork,0}};
#define boxvar_BackendDAEOptimize_expandDerOperatorWork MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_expandDerOperatorWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_eaddInitialStmtsToAlgorithms1Helper(threadData_t *threadData, modelica_metatype _inEq, modelica_metatype _inTpl, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_eaddInitialStmtsToAlgorithms1Helper,2,0) {(void*) boxptr_BackendDAEOptimize_eaddInitialStmtsToAlgorithms1Helper,0}};
#define boxvar_BackendDAEOptimize_eaddInitialStmtsToAlgorithms1Helper MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_eaddInitialStmtsToAlgorithms1Helper)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_addInitialStmtsToAlgorithms1(threadData_t *threadData, modelica_metatype _syst, modelica_boolean _isInitialSystem, modelica_metatype _shared, modelica_metatype *out_oshared);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_addInitialStmtsToAlgorithms1(threadData_t *threadData, modelica_metatype _syst, modelica_metatype _isInitialSystem, modelica_metatype _shared, modelica_metatype *out_oshared);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_addInitialStmtsToAlgorithms1,2,0) {(void*) boxptr_BackendDAEOptimize_addInitialStmtsToAlgorithms1,0}};
#define boxvar_BackendDAEOptimize_addInitialStmtsToAlgorithms1 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_addInitialStmtsToAlgorithms1)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_replaceEdgeChangeShared(threadData_t *threadData, modelica_metatype _inDAE);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_replaceEdgeChangeShared,2,0) {(void*) boxptr_BackendDAEOptimize_replaceEdgeChangeShared,0}};
#define boxvar_BackendDAEOptimize_replaceEdgeChangeShared MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_replaceEdgeChangeShared)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserExpreplaceEdgeChange(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inB, modelica_boolean *out_outB);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_traverserExpreplaceEdgeChange(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inB, modelica_metatype *out_outB);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserExpreplaceEdgeChange,2,0) {(void*) boxptr_BackendDAEOptimize_traverserExpreplaceEdgeChange,0}};
#define boxvar_BackendDAEOptimize_traverserExpreplaceEdgeChange MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserExpreplaceEdgeChange)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserreplaceEdgeChange(threadData_t *threadData, modelica_metatype _e, modelica_boolean _b, modelica_boolean *out_ob);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_traverserreplaceEdgeChange(threadData_t *threadData, modelica_metatype _e, modelica_metatype _b, modelica_metatype *out_ob);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserreplaceEdgeChange,2,0) {(void*) boxptr_BackendDAEOptimize_traverserreplaceEdgeChange,0}};
#define boxvar_BackendDAEOptimize_traverserreplaceEdgeChange MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserreplaceEdgeChange)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_replaceEdgeChange0(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _inShared, modelica_boolean _inChanged, modelica_metatype *out_outShared, modelica_boolean *out_outChanged);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_replaceEdgeChange0(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _inShared, modelica_metatype _inChanged, modelica_metatype *out_outShared, modelica_metatype *out_outChanged);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_replaceEdgeChange0,2,0) {(void*) boxptr_BackendDAEOptimize_replaceEdgeChange0,0}};
#define boxvar_BackendDAEOptimize_replaceEdgeChange0 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_replaceEdgeChange0)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_removeConstantsFinder(threadData_t *threadData, modelica_metatype _inVar, modelica_metatype _inRepl, modelica_metatype *out_outRepl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_removeConstantsFinder,2,0) {(void*) boxptr_BackendDAEOptimize_removeConstantsFinder,0}};
#define boxvar_BackendDAEOptimize_removeConstantsFinder MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_removeConstantsFinder)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_removeConstantsWork(threadData_t *threadData, modelica_metatype _inEqSystem, modelica_metatype _repl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_removeConstantsWork,2,0) {(void*) boxptr_BackendDAEOptimize_removeConstantsWork,0}};
#define boxvar_BackendDAEOptimize_removeConstantsWork MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_removeConstantsWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifysemiLinearFinder(threadData_t *threadData, modelica_metatype _inEq, modelica_metatype _inTpl, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifysemiLinearFinder,2,0) {(void*) boxptr_BackendDAEOptimize_simplifysemiLinearFinder,0}};
#define boxvar_BackendDAEOptimize_simplifysemiLinearFinder MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifysemiLinearFinder)
PROTECTED_FUNCTION_STATIC modelica_integer omc_BackendDAEOptimize_semiLinearSort2(threadData_t *threadData, modelica_metatype _eqnslst, modelica_metatype _iHt, modelica_integer _size, modelica_metatype _iEqnsarray, modelica_metatype *out_oEqnsarray);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_semiLinearSort2(threadData_t *threadData, modelica_metatype _eqnslst, modelica_metatype _iHt, modelica_metatype _size, modelica_metatype _iEqnsarray, modelica_metatype *out_oEqnsarray);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_semiLinearSort2,2,0) {(void*) boxptr_BackendDAEOptimize_semiLinearSort2,0}};
#define boxvar_BackendDAEOptimize_semiLinearSort2 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_semiLinearSort2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_semiLinearSort1(threadData_t *threadData, modelica_metatype _eqnslstlst, modelica_integer _size, modelica_metatype _iEqnsarray);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_semiLinearSort1(threadData_t *threadData, modelica_metatype _eqnslstlst, modelica_metatype _size, modelica_metatype _iEqnsarray);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_semiLinearSort1,2,0) {(void*) boxptr_BackendDAEOptimize_semiLinearSort1,0}};
#define boxvar_BackendDAEOptimize_semiLinearSort1 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_semiLinearSort1)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_semiLinearSort(threadData_t *threadData, modelica_metatype _eqnslst, modelica_metatype _iHt, modelica_integer _size, modelica_metatype _iEqnsarray);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_semiLinearSort(threadData_t *threadData, modelica_metatype _eqnslst, modelica_metatype _iHt, modelica_metatype _size, modelica_metatype _iEqnsarray);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_semiLinearSort,2,0) {(void*) boxptr_BackendDAEOptimize_semiLinearSort,0}};
#define boxvar_BackendDAEOptimize_semiLinearSort MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_semiLinearSort)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_semiLinearOptimize1(threadData_t *threadData, modelica_metatype _eqnslst, modelica_integer _i, modelica_metatype _iHt, modelica_metatype _iHt1, modelica_metatype *out_oHt1);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_semiLinearOptimize1(threadData_t *threadData, modelica_metatype _eqnslst, modelica_metatype _i, modelica_metatype _iHt, modelica_metatype _iHt1, modelica_metatype *out_oHt1);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_semiLinearOptimize1,2,0) {(void*) boxptr_BackendDAEOptimize_semiLinearOptimize1,0}};
#define boxvar_BackendDAEOptimize_semiLinearOptimize1 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_semiLinearOptimize1)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_semiLinearGetSA(threadData_t *threadData, modelica_metatype _key, modelica_metatype _iHt1, modelica_metatype _iAcc);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_semiLinearGetSA,2,0) {(void*) boxptr_BackendDAEOptimize_semiLinearGetSA,0}};
#define boxvar_BackendDAEOptimize_semiLinearGetSA MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_semiLinearGetSA)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_semiLinearOptimize3(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _isource, modelica_integer _iIndex, modelica_metatype _iHt, modelica_metatype _IEqnsarray, modelica_metatype _iAcc, modelica_metatype *out_osource, modelica_integer *out_oIndex, modelica_metatype *out_oAcc);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_semiLinearOptimize3(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _isource, modelica_metatype _iIndex, modelica_metatype _iHt, modelica_metatype _IEqnsarray, modelica_metatype _iAcc, modelica_metatype *out_osource, modelica_metatype *out_oIndex, modelica_metatype *out_oAcc);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_semiLinearOptimize3,2,0) {(void*) boxptr_BackendDAEOptimize_semiLinearOptimize3,0}};
#define boxvar_BackendDAEOptimize_semiLinearOptimize3 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_semiLinearOptimize3)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_semiLinearOptimize4(threadData_t *threadData, modelica_metatype _explst, modelica_metatype _iAcc, modelica_metatype _inEqAttr);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_semiLinearOptimize4,2,0) {(void*) boxptr_BackendDAEOptimize_semiLinearOptimize4,0}};
#define boxvar_BackendDAEOptimize_semiLinearOptimize4 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_semiLinearOptimize4)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_semiLinearOptimize2(threadData_t *threadData, modelica_metatype _saLst, modelica_metatype _iHt, modelica_metatype _IEqnsarray, modelica_metatype _iAcc);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_semiLinearOptimize2,2,0) {(void*) boxptr_BackendDAEOptimize_semiLinearOptimize2,0}};
#define boxvar_BackendDAEOptimize_semiLinearOptimize2 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_semiLinearOptimize2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_semiLinearOptimize(threadData_t *threadData, modelica_metatype _eqnslst, modelica_metatype _iAcc);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_semiLinearOptimize,2,0) {(void*) boxptr_BackendDAEOptimize_semiLinearOptimize,0}};
#define boxvar_BackendDAEOptimize_semiLinearOptimize MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_semiLinearOptimize)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_semiLinearReplaceEqns(threadData_t *threadData, modelica_metatype _iTpl, modelica_metatype _iEqns);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_semiLinearReplaceEqns,2,0) {(void*) boxptr_BackendDAEOptimize_semiLinearReplaceEqns,0}};
#define boxvar_BackendDAEOptimize_semiLinearReplaceEqns MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_semiLinearReplaceEqns)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifysemiLinearWork(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _ishared, modelica_metatype *out_oshared);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifysemiLinearWork,2,0) {(void*) boxptr_BackendDAEOptimize_simplifysemiLinearWork,0}};
#define boxvar_BackendDAEOptimize_simplifysemiLinearWork MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifysemiLinearWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_makeEquationsFromResiduals(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExpLst2, modelica_metatype _inExpLst3, modelica_metatype _inSource, modelica_metatype _inEqAttr);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_makeEquationsFromResiduals,2,0) {(void*) boxptr_BackendDAEOptimize_makeEquationsFromResiduals,0}};
#define boxvar_BackendDAEOptimize_makeEquationsFromResiduals MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_makeEquationsFromResiduals)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_makeResidualIfExpLst(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExpLst2, modelica_metatype _inExpLst3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_makeResidualIfExpLst,2,0) {(void*) boxptr_BackendDAEOptimize_makeResidualIfExpLst,0}};
#define boxvar_BackendDAEOptimize_makeResidualIfExpLst MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_makeResidualIfExpLst)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_makeEquationToResidualExpLst(threadData_t *threadData, modelica_metatype _eq);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_makeEquationToResidualExpLst,2,0) {(void*) boxptr_BackendDAEOptimize_makeEquationToResidualExpLst,0}};
#define boxvar_BackendDAEOptimize_makeEquationToResidualExpLst MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_makeEquationToResidualExpLst)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_makeEquationLstToResidualExpLst(threadData_t *threadData, modelica_metatype _eqLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_makeEquationLstToResidualExpLst,2,0) {(void*) boxptr_BackendDAEOptimize_makeEquationLstToResidualExpLst,0}};
#define boxvar_BackendDAEOptimize_makeEquationLstToResidualExpLst MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_makeEquationLstToResidualExpLst)
PROTECTED_FUNCTION_STATIC modelica_integer omc_BackendDAEOptimize_countEquationsInBranches(threadData_t *threadData, modelica_metatype _trueBranches, modelica_metatype _falseBranch, modelica_metatype _source);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_countEquationsInBranches(threadData_t *threadData, modelica_metatype _trueBranches, modelica_metatype _falseBranch, modelica_metatype _source);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_countEquationsInBranches,2,0) {(void*) boxptr_BackendDAEOptimize_countEquationsInBranches,0}};
#define boxvar_BackendDAEOptimize_countEquationsInBranches MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_countEquationsInBranches)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_makeIfExp(threadData_t *threadData, modelica_metatype _cond, modelica_metatype _else_);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_makeIfExp,2,0) {(void*) boxptr_BackendDAEOptimize_makeIfExp,0}};
#define boxvar_BackendDAEOptimize_makeIfExp MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_makeIfExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyIfEquationAsserts1(threadData_t *threadData, modelica_metatype _brancheqns, modelica_metatype _condition, modelica_metatype _conditions, modelica_metatype _brancheqns1, modelica_metatype _inEqns, modelica_metatype *out_outEqns);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyIfEquationAsserts1,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyIfEquationAsserts1,0}};
#define boxvar_BackendDAEOptimize_simplifyIfEquationAsserts1 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyIfEquationAsserts1)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyIfEquationAsserts(threadData_t *threadData, modelica_metatype _conditions, modelica_metatype _theneqns, modelica_metatype _elseenqs, modelica_metatype _conditions1, modelica_metatype _theneqns1, modelica_metatype _inEqns, modelica_metatype *out_oelseenqs, modelica_metatype *out_outEqns);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyIfEquationAsserts,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyIfEquationAsserts,0}};
#define boxvar_BackendDAEOptimize_simplifyIfEquationAsserts MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyIfEquationAsserts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifySolvedIfEqnsElse(threadData_t *threadData, modelica_metatype _elseenqs, modelica_metatype _iHt);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifySolvedIfEqnsElse,2,0) {(void*) boxptr_BackendDAEOptimize_simplifySolvedIfEqnsElse,0}};
#define boxvar_BackendDAEOptimize_simplifySolvedIfEqnsElse MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifySolvedIfEqnsElse)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifySolvedIfEqns1(threadData_t *threadData, modelica_metatype _condition, modelica_metatype _brancheqns, modelica_metatype _iHt, modelica_metatype _iHs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifySolvedIfEqns1,2,0) {(void*) boxptr_BackendDAEOptimize_simplifySolvedIfEqns1,0}};
#define boxvar_BackendDAEOptimize_simplifySolvedIfEqns1 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifySolvedIfEqns1)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifySolvedIfEqns(threadData_t *threadData, modelica_metatype _conditions, modelica_metatype _theneqns, modelica_metatype _iHt);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifySolvedIfEqns,2,0) {(void*) boxptr_BackendDAEOptimize_simplifySolvedIfEqns,0}};
#define boxvar_BackendDAEOptimize_simplifySolvedIfEqns MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifySolvedIfEqns)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifySolvedIfEqns2(threadData_t *threadData, modelica_metatype _crexplst, modelica_metatype _inEqns, modelica_metatype _inEqAttr);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifySolvedIfEqns2,2,0) {(void*) boxptr_BackendDAEOptimize_simplifySolvedIfEqns2,0}};
#define boxvar_BackendDAEOptimize_simplifySolvedIfEqns2 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifySolvedIfEqns2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyIfEquation1(threadData_t *threadData, modelica_metatype _conditions, modelica_metatype _theneqns, modelica_metatype _elseenqs, modelica_metatype _source, modelica_metatype _globalKnownVars, modelica_metatype _inEqns, modelica_metatype _inEqAttr);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyIfEquation1,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyIfEquation1,0}};
#define boxvar_BackendDAEOptimize_simplifyIfEquation1 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyIfEquation1)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyIfEquation(threadData_t *threadData, modelica_metatype _conditions, modelica_metatype _theneqns, modelica_metatype _elseenqs, modelica_metatype _conditions1, modelica_metatype _theneqns1, modelica_metatype _source, modelica_metatype _globalKnownVars, modelica_metatype _inEqns, modelica_metatype _inEqAttr, modelica_metatype *out_outAsserts);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyIfEquation,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyIfEquation,0}};
#define boxvar_BackendDAEOptimize_simplifyIfEquation MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyIfEquation)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyEvaluatedParamter(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _tpl1, modelica_metatype *out_tpl2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyEvaluatedParamter,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyEvaluatedParamter,0}};
#define boxvar_BackendDAEOptimize_simplifyEvaluatedParamter MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyEvaluatedParamter)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyIfExpevaluatedParamter(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _tpl1, modelica_metatype *out_tpl2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyIfExpevaluatedParamter,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyIfExpevaluatedParamter,0}};
#define boxvar_BackendDAEOptimize_simplifyIfExpevaluatedParamter MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyIfExpevaluatedParamter)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyIfEquationsFinder(threadData_t *threadData, modelica_metatype _inElem, modelica_metatype _inConstArg, modelica_metatype __omcQ_24in_5Facc, modelica_metatype __omcQ_24in_5Fasserts, modelica_boolean __omcQ_24in_5Fb, modelica_metatype *out_asserts, modelica_boolean *out_b);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_simplifyIfEquationsFinder(threadData_t *threadData, modelica_metatype _inElem, modelica_metatype _inConstArg, modelica_metatype __omcQ_24in_5Facc, modelica_metatype __omcQ_24in_5Fasserts, modelica_metatype __omcQ_24in_5Fb, modelica_metatype *out_asserts, modelica_metatype *out_b);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyIfEquationsFinder,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyIfEquationsFinder,0}};
#define boxvar_BackendDAEOptimize_simplifyIfEquationsFinder MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyIfEquationsFinder)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyIfEquationsWork(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _ishared, modelica_metatype *out_oshared);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyIfEquationsWork,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyIfEquationsWork,0}};
#define boxvar_BackendDAEOptimize_simplifyIfEquationsWork MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyIfEquationsWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_countOperator(threadData_t *threadData, modelica_metatype _op, modelica_metatype _inTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_countOperator,2,0) {(void*) boxptr_BackendDAEOptimize_countOperator,0}};
#define boxvar_BackendDAEOptimize_countOperator MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_countOperator)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_countOperationsInFunction(threadData_t *threadData, modelica_metatype _elemLst, modelica_metatype _shared, modelica_metatype _inTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_countOperationsInFunction,2,0) {(void*) boxptr_BackendDAEOptimize_countOperationsInFunction,0}};
#define boxvar_BackendDAEOptimize_countOperationsInFunction MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_countOperationsInFunction)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traversecountOperationsExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _shared, modelica_metatype _inTuple, modelica_metatype *out_outTuple);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traversecountOperationsExp,2,0) {(void*) boxptr_BackendDAEOptimize_traversecountOperationsExp,0}};
#define boxvar_BackendDAEOptimize_traversecountOperationsExp MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traversecountOperationsExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_countOperationsJac1(threadData_t *threadData, modelica_metatype _inJac, modelica_metatype _shared, modelica_metatype _inTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_countOperationsJac1,2,0) {(void*) boxptr_BackendDAEOptimize_countOperationsJac1,0}};
#define boxvar_BackendDAEOptimize_countOperationsJac1 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_countOperationsJac1)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_countOperationsJac(threadData_t *threadData, modelica_metatype _inJac, modelica_metatype _shared, modelica_metatype _compInfoIn);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_countOperationsJac,2,0) {(void*) boxptr_BackendDAEOptimize_countOperationsJac,0}};
#define boxvar_BackendDAEOptimize_countOperationsJac MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_countOperationsJac)
PROTECTED_FUNCTION_STATIC modelica_integer omc_BackendDAEOptimize_getNumJacEntries(threadData_t *threadData, modelica_metatype _inJac);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_getNumJacEntries(threadData_t *threadData, modelica_metatype _inJac);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_getNumJacEntries,2,0) {(void*) boxptr_BackendDAEOptimize_getNumJacEntries,0}};
#define boxvar_BackendDAEOptimize_getNumJacEntries MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_getNumJacEntries)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_countOperations0(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _inShared, modelica_boolean _inChanged, modelica_metatype *out_outShared, modelica_boolean *out_outChanged);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_countOperations0(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _inShared, modelica_metatype _inChanged, modelica_metatype *out_outShared, modelica_metatype *out_outChanged);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_countOperations0,2,0) {(void*) boxptr_BackendDAEOptimize_countOperations0,0}};
#define boxvar_BackendDAEOptimize_countOperations0 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_countOperations0)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_residualForm2(threadData_t *threadData, modelica_metatype _inEq, modelica_integer _ii, modelica_integer *out_oi);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_residualForm2(threadData_t *threadData, modelica_metatype _inEq, modelica_metatype _ii, modelica_metatype *out_oi);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_residualForm2,2,0) {(void*) boxptr_BackendDAEOptimize_residualForm2,0}};
#define boxvar_BackendDAEOptimize_residualForm2 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_residualForm2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_residualForm1(threadData_t *threadData, modelica_metatype _syst, modelica_integer _i, modelica_metatype _shared, modelica_metatype *out_oshared);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_residualForm1(threadData_t *threadData, modelica_metatype _syst, modelica_metatype _i, modelica_metatype _shared, modelica_metatype *out_oshared);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_residualForm1,2,0) {(void*) boxptr_BackendDAEOptimize_residualForm1,0}};
#define boxvar_BackendDAEOptimize_residualForm1 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_residualForm1)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_mergeIndependentBlocks(threadData_t *threadData, modelica_metatype _syst1, modelica_metatype _syst2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_mergeIndependentBlocks,2,0) {(void*) boxptr_BackendDAEOptimize_mergeIndependentBlocks,0}};
#define boxvar_BackendDAEOptimize_mergeIndependentBlocks MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_mergeIndependentBlocks)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_getFunctionAndBody(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _fns, modelica_metatype *out_outFnBody);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_getFunctionAndBody,2,0) {(void*) boxptr_BackendDAEOptimize_getFunctionAndBody,0}};
#define boxvar_BackendDAEOptimize_getFunctionAndBody MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_getFunctionAndBody)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_addUnusedFunction(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inFunctions, modelica_metatype _inUsedFunctions);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_addUnusedFunction,2,0) {(void*) boxptr_BackendDAEOptimize_addUnusedFunction,0}};
#define boxvar_BackendDAEOptimize_addUnusedFunction MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_addUnusedFunction)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_checkUnusedFunctionsExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inFunctions, modelica_metatype _inUsedFunctions, modelica_metatype *out_outUsedFunctions);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_checkUnusedFunctionsExp,2,0) {(void*) boxptr_BackendDAEOptimize_checkUnusedFunctionsExp,0}};
#define boxvar_BackendDAEOptimize_checkUnusedFunctionsExp MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_checkUnusedFunctionsExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_checkUnusedFunctions(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inFunctions, modelica_metatype _inUsedFunctions, modelica_metatype *out_outUsedFunctions);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_checkUnusedFunctions,2,0) {(void*) boxptr_BackendDAEOptimize_checkUnusedFunctions,0}};
#define boxvar_BackendDAEOptimize_checkUnusedFunctions MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_checkUnusedFunctions)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_removeUnusedFunctionsSymJacs(threadData_t *threadData, modelica_metatype _inShared, modelica_metatype _inFunctions, modelica_metatype _inUsedFunctions);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_removeUnusedFunctionsSymJacs,2,0) {(void*) boxptr_BackendDAEOptimize_removeUnusedFunctionsSymJacs,0}};
#define boxvar_BackendDAEOptimize_removeUnusedFunctionsSymJacs MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_removeUnusedFunctionsSymJacs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_checkUnusedVariablesExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTuple, modelica_metatype *out_outTuple);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_checkUnusedVariablesExp,2,0) {(void*) boxptr_BackendDAEOptimize_checkUnusedVariablesExp,0}};
#define boxvar_BackendDAEOptimize_checkUnusedVariablesExp MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_checkUnusedVariablesExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_checkUnusedVariables(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_checkUnusedVariables,2,0) {(void*) boxptr_BackendDAEOptimize_checkUnusedVariables,0}};
#define boxvar_BackendDAEOptimize_checkUnusedVariables MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_checkUnusedVariables)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_checkUnusedParameterExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTuple, modelica_metatype *out_outTuple);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_checkUnusedParameterExp,2,0) {(void*) boxptr_BackendDAEOptimize_checkUnusedParameterExp,0}};
#define boxvar_BackendDAEOptimize_checkUnusedParameterExp MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_checkUnusedParameterExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_checkUnusedParameter(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_checkUnusedParameter,2,0) {(void*) boxptr_BackendDAEOptimize_checkUnusedParameter,0}};
#define boxvar_BackendDAEOptimize_checkUnusedParameter MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_checkUnusedParameter)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_copyNonParamVariables(threadData_t *threadData, modelica_metatype _inVar, modelica_metatype _inVars, modelica_metatype *out_outVars);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_copyNonParamVariables,2,0) {(void*) boxptr_BackendDAEOptimize_copyNonParamVariables,0}};
#define boxvar_BackendDAEOptimize_copyNonParamVariables MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_copyNonParamVariables)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_replaceExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_replaceExp,2,0) {(void*) boxptr_BackendDAEOptimize_replaceExp,0}};
#define boxvar_BackendDAEOptimize_replaceExp MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_replaceExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_removeEqualFunctionCall(threadData_t *threadData, modelica_metatype _inEqsLst, modelica_metatype _inExp, modelica_metatype _inECr, modelica_metatype _inEqns, modelica_metatype _ichanged, modelica_metatype *out_outEqsLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_removeEqualFunctionCall,2,0) {(void*) boxptr_BackendDAEOptimize_removeEqualFunctionCall,0}};
#define boxvar_BackendDAEOptimize_removeEqualFunctionCall MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_removeEqualFunctionCall)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_getControlEqns(threadData_t *threadData, modelica_metatype _inVarsEqn, modelica_metatype _inVarsEqns);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_getControlEqns,2,0) {(void*) boxptr_BackendDAEOptimize_getControlEqns,0}};
#define boxvar_BackendDAEOptimize_getControlEqns MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_getControlEqns)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_varEqns(threadData_t *threadData, modelica_integer _v, modelica_integer _pos, modelica_metatype _mT);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_varEqns(threadData_t *threadData, modelica_metatype _v, modelica_metatype _pos, modelica_metatype _mT);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_varEqns,2,0) {(void*) boxptr_BackendDAEOptimize_varEqns,0}};
#define boxvar_BackendDAEOptimize_varEqns MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_varEqns)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_functionCallEqn(threadData_t *threadData, modelica_metatype _ie1, modelica_metatype _ie2, modelica_metatype _inVars, modelica_metatype *out_outExp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_functionCallEqn,2,0) {(void*) boxptr_BackendDAEOptimize_functionCallEqn,0}};
#define boxvar_BackendDAEOptimize_functionCallEqn MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_functionCallEqn)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_removeEqualFunctionCallFinder(threadData_t *threadData, modelica_metatype _elem, modelica_integer _pos, modelica_metatype _inTpl, modelica_metatype *out_outTpl);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_removeEqualFunctionCallFinder(threadData_t *threadData, modelica_metatype _elem, modelica_metatype _pos, modelica_metatype _inTpl, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_removeEqualFunctionCallFinder,2,0) {(void*) boxptr_BackendDAEOptimize_removeEqualFunctionCallFinder,0}};
#define boxvar_BackendDAEOptimize_removeEqualFunctionCallFinder MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_removeEqualFunctionCallFinder)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_removeEqualFunctionCallsWork(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _ishared, modelica_metatype *out_oshared);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_removeEqualFunctionCallsWork,2,0) {(void*) boxptr_BackendDAEOptimize_removeEqualFunctionCallsWork,0}};
#define boxvar_BackendDAEOptimize_removeEqualFunctionCallsWork MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_removeEqualFunctionCallsWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_protectedParametersFinder(threadData_t *threadData, modelica_metatype _inVar, modelica_metatype _inRepl, modelica_metatype *out_outRepl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_protectedParametersFinder,2,0) {(void*) boxptr_BackendDAEOptimize_protectedParametersFinder,0}};
#define boxvar_BackendDAEOptimize_protectedParametersFinder MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_protectedParametersFinder)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_removeProtectedParameterswork(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _repl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_removeProtectedParameterswork,2,0) {(void*) boxptr_BackendDAEOptimize_removeProtectedParameterswork,0}};
#define boxvar_BackendDAEOptimize_removeProtectedParameterswork MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_removeProtectedParameterswork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverseExpVisitorWrapper(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inRepl, modelica_metatype *out_repl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverseExpVisitorWrapper,2,0) {(void*) boxptr_BackendDAEOptimize_traverseExpVisitorWrapper,0}};
#define boxvar_BackendDAEOptimize_traverseExpVisitorWrapper MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverseExpVisitorWrapper)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_addConstExpReplacement(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _cr, modelica_metatype _inRepl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_addConstExpReplacement,2,0) {(void*) boxptr_BackendDAEOptimize_addConstExpReplacement,0}};
#define boxvar_BackendDAEOptimize_addConstExpReplacement MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_addConstExpReplacement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_replaceFinalVarTraverser(threadData_t *threadData, modelica_metatype _inVar, modelica_metatype _inTpl, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_replaceFinalVarTraverser,2,0) {(void*) boxptr_BackendDAEOptimize_replaceFinalVarTraverser,0}};
#define boxvar_BackendDAEOptimize_replaceFinalVarTraverser MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_replaceFinalVarTraverser)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_replaceFinalVars(threadData_t *threadData, modelica_integer _inNumRepl, modelica_metatype _inVars, modelica_metatype _inRepl, modelica_metatype *out_outRepl);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_replaceFinalVars(threadData_t *threadData, modelica_metatype _inNumRepl, modelica_metatype _inVars, modelica_metatype _inRepl, modelica_metatype *out_outRepl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_replaceFinalVars,2,0) {(void*) boxptr_BackendDAEOptimize_replaceFinalVars,0}};
#define boxvar_BackendDAEOptimize_replaceFinalVars MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_replaceFinalVars)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_removeParametersFinder(threadData_t *threadData, modelica_metatype _inVar, modelica_metatype _inTpl, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_removeParametersFinder,2,0) {(void*) boxptr_BackendDAEOptimize_removeParametersFinder,0}};
#define boxvar_BackendDAEOptimize_removeParametersFinder MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_removeParametersFinder)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_removeParameterswork(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _repl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_removeParameterswork,2,0) {(void*) boxptr_BackendDAEOptimize_removeParameterswork,0}};
#define boxvar_BackendDAEOptimize_removeParameterswork MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_removeParameterswork)
PROTECTED_FUNCTION_STATIC void omc_BackendDAEOptimize_countsimpleEquation(threadData_t *threadData, modelica_metatype _elem, modelica_integer _length, modelica_integer _pos, modelica_metatype _syst, modelica_metatype _shared);
PROTECTED_FUNCTION_STATIC void boxptr_BackendDAEOptimize_countsimpleEquation(threadData_t *threadData, modelica_metatype _elem, modelica_metatype _length, modelica_metatype _pos, modelica_metatype _syst, modelica_metatype _shared);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_countsimpleEquation,2,0) {(void*) boxptr_BackendDAEOptimize_countsimpleEquation,0}};
#define boxvar_BackendDAEOptimize_countsimpleEquation MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_countsimpleEquation)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_countSimpleEquationsFinder(threadData_t *threadData, modelica_metatype _elem, modelica_integer _pos, modelica_metatype _inTpl, modelica_metatype *out_outTpl);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_countSimpleEquationsFinder(threadData_t *threadData, modelica_metatype _elem, modelica_metatype _pos, modelica_metatype _inTpl, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_countSimpleEquationsFinder,2,0) {(void*) boxptr_BackendDAEOptimize_countSimpleEquationsFinder,0}};
#define boxvar_BackendDAEOptimize_countSimpleEquationsFinder MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_countSimpleEquationsFinder)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traversingTimeEqnsFinder(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_boolean *out_cont, modelica_metatype *out_outTpl);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_traversingTimeEqnsFinder(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_cont, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traversingTimeEqnsFinder,2,0) {(void*) boxptr_BackendDAEOptimize_traversingTimeEqnsFinder,0}};
#define boxvar_BackendDAEOptimize_traversingTimeEqnsFinder MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traversingTimeEqnsFinder)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_BackendDAEOptimize_toplevelInputOrUnfixed(threadData_t *threadData, modelica_metatype _inVar);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_toplevelInputOrUnfixed(threadData_t *threadData, modelica_metatype _inVar);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_toplevelInputOrUnfixed,2,0) {(void*) boxptr_BackendDAEOptimize_toplevelInputOrUnfixed,0}};
#define boxvar_BackendDAEOptimize_toplevelInputOrUnfixed MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_toplevelInputOrUnfixed)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverseZeroCrossingExps(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fzc, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Farg, modelica_metatype *out_arg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverseZeroCrossingExps,2,0) {(void*) boxptr_BackendDAEOptimize_traverseZeroCrossingExps,0}};
#define boxvar_BackendDAEOptimize_traverseZeroCrossingExps MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverseZeroCrossingExps)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverseEventInfoExps(threadData_t *threadData, modelica_metatype __omcQ_24in_5FeventInfo, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Farg, modelica_metatype *out_arg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverseEventInfoExps,2,0) {(void*) boxptr_BackendDAEOptimize_traverseEventInfoExps,0}};
#define boxvar_BackendDAEOptimize_traverseEventInfoExps MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverseEventInfoExps)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyTimeIndepFuncCallsShared(threadData_t *threadData, modelica_metatype _inDAE);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyTimeIndepFuncCallsShared,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyTimeIndepFuncCallsShared,0}};
#define boxvar_BackendDAEOptimize_simplifyTimeIndepFuncCallsShared MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyTimeIndepFuncCallsShared)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserExpsimplifyTimeIndepFuncCalls(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserExpsimplifyTimeIndepFuncCalls,2,0) {(void*) boxptr_BackendDAEOptimize_traverserExpsimplifyTimeIndepFuncCalls,0}};
#define boxvar_BackendDAEOptimize_traverserExpsimplifyTimeIndepFuncCalls MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_traverserExpsimplifyTimeIndepFuncCalls)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyTimeIndepFuncCalls0(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _inShared, modelica_boolean _inChanged, modelica_metatype *out_outShared, modelica_boolean *out_outChanged);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_simplifyTimeIndepFuncCalls0(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _inShared, modelica_metatype _inChanged, modelica_metatype *out_outShared, modelica_metatype *out_outChanged);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyTimeIndepFuncCalls0,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyTimeIndepFuncCalls0,0}};
#define boxvar_BackendDAEOptimize_simplifyTimeIndepFuncCalls0 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyTimeIndepFuncCalls0)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyInStreamGetMinMaxAttributes(threadData_t *threadData, modelica_metatype _cr, modelica_metatype _inVars, modelica_metatype *out_outMax);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyInStreamGetMinMaxAttributes,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyInStreamGetMinMaxAttributes,0}};
#define boxvar_BackendDAEOptimize_simplifyInStreamGetMinMaxAttributes MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyInStreamGetMinMaxAttributes)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyInStreamWork2(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inVars, modelica_metatype *out_outVars);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyInStreamWork2,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyInStreamWork2,0}};
#define boxvar_BackendDAEOptimize_simplifyInStreamWork2 MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyInStreamWork2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyInStreamWork(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inVars, modelica_metatype *out_outVars);
static const MMC_DEFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyInStreamWork,2,0) {(void*) boxptr_BackendDAEOptimize_simplifyInStreamWork,0}};
#define boxvar_BackendDAEOptimize_simplifyInStreamWork MMC_REFSTRUCTLIT(boxvar_lit_BackendDAEOptimize_simplifyInStreamWork)

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverseStrongComponentsAddLambda(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcomps, modelica_metatype __omcQ_24in_5Fsystem, modelica_metatype *out_system)
{
  modelica_metatype _comps = NULL;
  modelica_metatype _system = NULL;
  modelica_metatype _newComps = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _lambda = NULL;
  modelica_integer _lambdaIdx;
  modelica_boolean _hasAnyHomotopy;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta35;
  modelica_metatype tmpMeta36;
  modelica_metatype tmpMeta37;
  modelica_metatype tmpMeta38;
  modelica_metatype tmpMeta39;
  modelica_metatype tmpMeta40;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _comps = __omcQ_24in_5Fcomps;
  _system = __omcQ_24in_5Fsystem;
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _newComps = tmpMeta1;
  // _lambda has no default value.
  // _lambdaIdx has no default value.
  _hasAnyHomotopy = 0 /* false */;
  _lambdaIdx = ((modelica_integer) 1) + omc_BackendVariable_varsSize(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_system), 2))));

  {
    modelica_metatype _comp;
    for (tmpMeta2 = _comps; !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
    {
      _comp = MMC_CAR(tmpMeta2);
      { /* match expression */
        modelica_metatype tmp6_1;
        tmp6_1 = _comp;
        {
          modelica_metatype _eqnIndexes = NULL;
          modelica_metatype _varIndexes = NULL;
          modelica_metatype _resEqnIndexes = NULL;
          modelica_metatype _tVarIndexes = NULL;
          modelica_metatype _innerEqnIndexes = NULL;
          modelica_metatype _casualTearingSet = NULL;
          modelica_metatype _innerEquations = NULL;
          modelica_metatype _jac = NULL;
          modelica_metatype _jacType = NULL;
          modelica_metatype _eqnLst = NULL;
          modelica_boolean _linear;
          modelica_boolean _mixedSystem;
          modelica_boolean _hasHomotopy;
          volatile mmc_switch_type tmp6;
          int tmp7;
          // _eqnIndexes has no default value.
          // _varIndexes has no default value.
          // _resEqnIndexes has no default value.
          // _tVarIndexes has no default value.
          // _innerEqnIndexes has no default value.
          // _casualTearingSet has no default value.
          // _innerEquations has no default value.
          // _jac has no default value.
          // _jacType has no default value.
          // _eqnLst has no default value.
          // _linear has no default value.
          // _mixedSystem has no default value.
          // _hasHomotopy has no default value.
          tmp6 = 0;
          for (; tmp6 < 3; tmp6++) {
            switch (MMC_SWITCH_CAST(tmp6)) {
            case 0: {
              modelica_metatype tmpMeta8;
              modelica_metatype tmpMeta9;
              modelica_metatype tmpMeta10;
              modelica_metatype tmpMeta11;
              modelica_metatype tmpMeta12;
              modelica_integer tmp13;
              modelica_metatype tmpMeta14;
              modelica_integer tmp15;
              modelica_metatype tmpMeta16;
              modelica_metatype tmpMeta17;
              if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,1,5) == 0) goto tmp5_end;
              tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 2));
              tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 3));
              tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
              tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
              tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 6));
              tmp13 = mmc_unbox_integer(tmpMeta12);
              _eqnIndexes = tmpMeta8;
              _varIndexes = tmpMeta9;
              _jac = tmpMeta10;
              _jacType = tmpMeta11;
              _mixedSystem = tmp13  /* pattern as ty=Boolean */;
              /* Pattern matching succeeded */
              _eqnLst = omc_BackendEquation_getList(threadData, _eqnIndexes, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_system), 3))));

              /* Pattern-matching tuple assignment, wild first pattern */
              omc_BackendEquation_traverseExpsOfEquationList(threadData, _eqnLst, boxvar_BackendDAEUtil_containsHomotopyCall, mmc_mk_boolean(0 /* false */), &tmpMeta14);
              tmp15 = mmc_unbox_integer(tmpMeta14);
              _hasHomotopy = tmp15  /* pattern as ty=Boolean */;

              if(_hasHomotopy)
              {
                _hasAnyHomotopy = 1 /* true */;

                tmpMeta16 = mmc_mk_cons(mmc_mk_integer(_lambdaIdx), _varIndexes);
                tmpMeta17 = mmc_mk_box6(4, &BackendDAE_StrongComponent_EQUATIONSYSTEM__desc, _eqnIndexes, tmpMeta16, _jac, _jacType, mmc_mk_boolean(_mixedSystem));
                _comp = tmpMeta17;
              }
              tmpMeta3 = _comp;
              goto tmp5_done;
            }
            case 1: {
              modelica_metatype tmpMeta18;
              modelica_metatype tmpMeta19;
              modelica_metatype tmpMeta20;
              modelica_metatype tmpMeta21;
              modelica_metatype tmpMeta22;
              modelica_metatype tmpMeta23;
              modelica_metatype tmpMeta24;
              modelica_integer tmp25;
              modelica_metatype tmpMeta26;
              modelica_integer tmp27;
              modelica_metatype tmpMeta28;
              modelica_integer tmp29;
              modelica_metatype tmpMeta30;
              modelica_integer tmp31;
              modelica_metatype tmpMeta32;
              modelica_metatype tmpMeta33;
              modelica_metatype tmpMeta34;
              if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,7,4) == 0) goto tmp5_end;
              tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 2));
              tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
              tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 3));
              tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 4));
              tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 5));
              tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 3));
              tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
              tmp25 = mmc_unbox_integer(tmpMeta24);
              tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
              tmp27 = mmc_unbox_integer(tmpMeta26);
              _tVarIndexes = tmpMeta19;
              _resEqnIndexes = tmpMeta20;
              _innerEquations = tmpMeta21;
              _jac = tmpMeta22;
              _casualTearingSet = tmpMeta23;
              _linear = tmp25  /* pattern as ty=Boolean */;
              _mixedSystem = tmp27  /* pattern as ty=Boolean */;
              /* Pattern matching succeeded */
              _eqnLst = omc_BackendEquation_getList(threadData, _resEqnIndexes, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_system), 3))));

              /* Pattern-matching tuple assignment, wild first pattern */
              omc_BackendEquation_traverseExpsOfEquationList(threadData, _eqnLst, boxvar_BackendDAEUtil_containsHomotopyCall, mmc_mk_boolean(0 /* false */), &tmpMeta28);
              tmp29 = mmc_unbox_integer(tmpMeta28);
              _hasHomotopy = tmp29  /* pattern as ty=Boolean */;

              if((!_hasHomotopy))
              {
                _innerEqnIndexes = omc_List_map__3(threadData, _innerEquations, boxvar_BackendDAEUtil_getEqnAndVarsFromInnerEquation, NULL, NULL);

                _eqnLst = omc_BackendEquation_getList(threadData, _innerEqnIndexes, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_system), 3))));

                /* Pattern-matching tuple assignment, wild first pattern */
                omc_BackendEquation_traverseExpsOfEquationList(threadData, _eqnLst, boxvar_BackendDAEUtil_containsHomotopyCall, mmc_mk_boolean(0 /* false */), &tmpMeta30);
                tmp31 = mmc_unbox_integer(tmpMeta30);
                _hasHomotopy = tmp31  /* pattern as ty=Boolean */;
              }

              if(_hasHomotopy)
              {
                _hasAnyHomotopy = 1 /* true */;

                tmpMeta32 = mmc_mk_cons(mmc_mk_integer(_lambdaIdx), MMC_REFSTRUCTLIT(mmc_nil));
                tmpMeta33 = mmc_mk_box5(3, &BackendDAE_TearingSet_TEARINGSET__desc, listAppend(_tVarIndexes, tmpMeta32), _resEqnIndexes, _innerEquations, _jac);
                tmpMeta34 = mmc_mk_box5(10, &BackendDAE_StrongComponent_TORNSYSTEM__desc, tmpMeta33, _casualTearingSet, mmc_mk_boolean(_linear), mmc_mk_boolean(_mixedSystem));
                _comp = tmpMeta34;
              }
              tmpMeta3 = _comp;
              goto tmp5_done;
            }
            case 2: {
              
              /* Pattern matching succeeded */
              tmpMeta3 = _comp;
              goto tmp5_done;
            }
            }
            goto tmp5_end;
            tmp5_end: ;
          }
          goto goto_4;
          goto_4:;
          MMC_THROW_INTERNAL();
          goto tmp5_done;
          tmp5_done:;
        }
      }
      _comp = tmpMeta3;

      tmpMeta35 = mmc_mk_cons(_comp, _newComps);
      _newComps = tmpMeta35;
    }
  }

  if(_hasAnyHomotopy)
  {
    tmpMeta37 = MMC_REFSTRUCTLIT(mmc_nil);
    tmpMeta38 = MMC_REFSTRUCTLIT(mmc_nil);
    tmpMeta39 = mmc_mk_box19(3, &BackendDAE_Var_VAR__desc, omc_ComponentReference_makeCrefIdent(threadData, _OMC_LIT0, _OMC_LIT1, tmpMeta37), _OMC_LIT2, _OMC_LIT3, _OMC_LIT4, _OMC_LIT1, mmc_mk_none(), mmc_mk_none(), tmpMeta38, _OMC_LIT9, mmc_mk_none(), mmc_mk_none(), mmc_mk_none(), mmc_mk_none(), _OMC_LIT10, _OMC_LIT11, mmc_mk_boolean(1 /* true */), mmc_mk_boolean(0 /* false */), mmc_mk_boolean(0 /* false */));
    _lambda = tmpMeta39;

    tmpMeta40 = MMC_TAGPTR(mmc_alloc_words(11));
    memcpy(MMC_UNTAGPTR(tmpMeta40), MMC_UNTAGPTR(_system), 11*sizeof(modelica_metatype));
    ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta40))[2] = omc_BackendVariable_addVar(threadData, _lambda, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_system), 2))));
    _system = tmpMeta40;
  }

  _comps = listReverse(_newComps);
  _return: OMC_LABEL_UNUSED
  if (out_system) { *out_system = _system; }
  return _comps;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_createOneHomotopyComponent(threadData_t *threadData, modelica_metatype _homotopyComponents, modelica_metatype _inSystem, modelica_integer _lambdaIdx)
{
  modelica_metatype _outHomotopyComponent = NULL;
  modelica_metatype _newInnerEquations = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _newResEquations = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype _newIterationVars = NULL;
  modelica_metatype tmpMeta3;
  modelica_boolean _isMixed;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta54;
  modelica_metatype tmpMeta55;
  modelica_metatype tmpMeta56;
  modelica_metatype tmpMeta57;
  modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outHomotopyComponent has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _newInnerEquations = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _newResEquations = tmpMeta2;
  tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
  _newIterationVars = tmpMeta3;
  _isMixed = 0 /* false */;
  {
    modelica_metatype _comp;
    for (tmpMeta4 = _homotopyComponents; !listEmpty(tmpMeta4); tmpMeta4=MMC_CDR(tmpMeta4))
    {
      _comp = MMC_CAR(tmpMeta4);
      
      
      
      { /* match expression */
        modelica_metatype tmp8_1;
        tmp8_1 = _comp;
        {
          modelica_integer _eqnIndex;
          modelica_integer _varIndex;
          modelica_metatype _eqnIndexes = NULL;
          modelica_metatype _varIndexes = NULL;
          modelica_metatype _resEqnIndexes = NULL;
          modelica_metatype _tVarIndexes = NULL;
          modelica_metatype _innerEquations = NULL;
          modelica_metatype _newInnerEquation = NULL;
          modelica_boolean _mixedSystem;
          int tmp8;
          // _eqnIndex has no default value.
          // _varIndex has no default value.
          // _eqnIndexes has no default value.
          // _varIndexes has no default value.
          // _resEqnIndexes has no default value.
          // _tVarIndexes has no default value.
          // _innerEquations has no default value.
          // _newInnerEquation has no default value.
          // _mixedSystem has no default value.
          {
            switch (MMC_SWITCH_CAST(valueConstructor(tmp8_1))) {
            case 3: {
              modelica_metatype tmpMeta9;
              modelica_integer tmp10;
              modelica_metatype tmpMeta11;
              modelica_integer tmp12;
              modelica_metatype tmpMeta13;
              modelica_metatype tmpMeta14;
              modelica_metatype tmpMeta15;
              if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,0,2) == 0) goto tmp7_end;
              tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 2));
              tmp10 = mmc_unbox_integer(tmpMeta9);
              tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 3));
              tmp12 = mmc_unbox_integer(tmpMeta11);
              _eqnIndex = tmp10  /* pattern as ty=Integer */;
              _varIndex = tmp12  /* pattern as ty=Integer */;
              /* Pattern matching succeeded */
              tmpMeta13 = mmc_mk_cons(mmc_mk_integer(_varIndex), MMC_REFSTRUCTLIT(mmc_nil));
              tmpMeta14 = mmc_mk_box3(3, &BackendDAE_InnerEquation_INNEREQUATION__desc, mmc_mk_integer(_eqnIndex), tmpMeta13);
              _newInnerEquation = tmpMeta14;
              tmpMeta15 = mmc_mk_cons(_newInnerEquation, _newInnerEquations);
              tmpMeta[0+0] = tmpMeta15;
              tmpMeta[0+1] = _newResEquations;
              tmpMeta[0+2] = _newIterationVars;
              goto tmp7_done;
            }
            case 4: {
              modelica_metatype tmpMeta16;
              modelica_metatype tmpMeta17;
              modelica_metatype tmpMeta18;
              modelica_integer tmp19;
              if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,1,5) == 0) goto tmp7_end;
              tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 2));
              tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 3));
              tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 6));
              tmp19 = mmc_unbox_integer(tmpMeta18);
              _eqnIndexes = tmpMeta16;
              _varIndexes = tmpMeta17;
              _mixedSystem = tmp19  /* pattern as ty=Boolean */;
              /* Pattern matching succeeded */
              if(_mixedSystem)
              {
                _isMixed = 1 /* true */;
              }
              tmpMeta[0+0] = _newInnerEquations;
              tmpMeta[0+1] = listAppend(_newResEquations, _eqnIndexes);
              tmpMeta[0+2] = listAppend(_newIterationVars, _varIndexes);
              goto tmp7_done;
            }
            case 5: {
              modelica_metatype tmpMeta20;
              modelica_integer tmp21;
              modelica_metatype tmpMeta22;
              modelica_metatype tmpMeta23;
              modelica_metatype tmpMeta24;
              if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,2,2) == 0) goto tmp7_end;
              tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 2));
              tmp21 = mmc_unbox_integer(tmpMeta20);
              tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 3));
              _eqnIndex = tmp21  /* pattern as ty=Integer */;
              _varIndexes = tmpMeta22;
              /* Pattern matching succeeded */
              tmpMeta23 = mmc_mk_box3(3, &BackendDAE_InnerEquation_INNEREQUATION__desc, mmc_mk_integer(_eqnIndex), _varIndexes);
              _newInnerEquation = tmpMeta23;
              tmpMeta24 = mmc_mk_cons(_newInnerEquation, _newInnerEquations);
              tmpMeta[0+0] = tmpMeta24;
              tmpMeta[0+1] = _newResEquations;
              tmpMeta[0+2] = _newIterationVars;
              goto tmp7_done;
            }
            case 6: {
              modelica_metatype tmpMeta25;
              modelica_integer tmp26;
              modelica_metatype tmpMeta27;
              modelica_metatype tmpMeta28;
              modelica_metatype tmpMeta29;
              if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,3,2) == 0) goto tmp7_end;
              tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 2));
              tmp26 = mmc_unbox_integer(tmpMeta25);
              tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 3));
              _eqnIndex = tmp26  /* pattern as ty=Integer */;
              _varIndexes = tmpMeta27;
              /* Pattern matching succeeded */
              tmpMeta28 = mmc_mk_box3(3, &BackendDAE_InnerEquation_INNEREQUATION__desc, mmc_mk_integer(_eqnIndex), _varIndexes);
              _newInnerEquation = tmpMeta28;
              tmpMeta29 = mmc_mk_cons(_newInnerEquation, _newInnerEquations);
              tmpMeta[0+0] = tmpMeta29;
              tmpMeta[0+1] = _newResEquations;
              tmpMeta[0+2] = _newIterationVars;
              goto tmp7_done;
            }
            case 7: {
              modelica_metatype tmpMeta30;
              modelica_integer tmp31;
              modelica_metatype tmpMeta32;
              modelica_metatype tmpMeta33;
              modelica_metatype tmpMeta34;
              if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,4,2) == 0) goto tmp7_end;
              tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 2));
              tmp31 = mmc_unbox_integer(tmpMeta30);
              tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 3));
              _eqnIndex = tmp31  /* pattern as ty=Integer */;
              _varIndexes = tmpMeta32;
              /* Pattern matching succeeded */
              tmpMeta33 = mmc_mk_box3(3, &BackendDAE_InnerEquation_INNEREQUATION__desc, mmc_mk_integer(_eqnIndex), _varIndexes);
              _newInnerEquation = tmpMeta33;
              tmpMeta34 = mmc_mk_cons(_newInnerEquation, _newInnerEquations);
              tmpMeta[0+0] = tmpMeta34;
              tmpMeta[0+1] = _newResEquations;
              tmpMeta[0+2] = _newIterationVars;
              goto tmp7_done;
            }
            case 8: {
              modelica_metatype tmpMeta35;
              modelica_integer tmp36;
              modelica_metatype tmpMeta37;
              modelica_metatype tmpMeta38;
              modelica_metatype tmpMeta39;
              if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,5,2) == 0) goto tmp7_end;
              tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 2));
              tmp36 = mmc_unbox_integer(tmpMeta35);
              tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 3));
              _eqnIndex = tmp36  /* pattern as ty=Integer */;
              _varIndexes = tmpMeta37;
              /* Pattern matching succeeded */
              tmpMeta38 = mmc_mk_box3(3, &BackendDAE_InnerEquation_INNEREQUATION__desc, mmc_mk_integer(_eqnIndex), _varIndexes);
              _newInnerEquation = tmpMeta38;
              tmpMeta39 = mmc_mk_cons(_newInnerEquation, _newInnerEquations);
              tmpMeta[0+0] = tmpMeta39;
              tmpMeta[0+1] = _newResEquations;
              tmpMeta[0+2] = _newIterationVars;
              goto tmp7_done;
            }
            case 9: {
              modelica_metatype tmpMeta40;
              modelica_integer tmp41;
              modelica_metatype tmpMeta42;
              modelica_metatype tmpMeta43;
              modelica_metatype tmpMeta44;
              if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,6,2) == 0) goto tmp7_end;
              tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 2));
              tmp41 = mmc_unbox_integer(tmpMeta40);
              tmpMeta42 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 3));
              _eqnIndex = tmp41  /* pattern as ty=Integer */;
              _varIndexes = tmpMeta42;
              /* Pattern matching succeeded */
              tmpMeta43 = mmc_mk_box3(3, &BackendDAE_InnerEquation_INNEREQUATION__desc, mmc_mk_integer(_eqnIndex), _varIndexes);
              _newInnerEquation = tmpMeta43;
              tmpMeta44 = mmc_mk_cons(_newInnerEquation, _newInnerEquations);
              tmpMeta[0+0] = tmpMeta44;
              tmpMeta[0+1] = _newResEquations;
              tmpMeta[0+2] = _newIterationVars;
              goto tmp7_done;
            }
            case 10: {
              modelica_metatype tmpMeta45;
              modelica_metatype tmpMeta46;
              modelica_metatype tmpMeta47;
              modelica_metatype tmpMeta48;
              modelica_metatype tmpMeta49;
              modelica_integer tmp50;
              modelica_metatype tmpMeta51;
              modelica_metatype tmpMeta52;
              modelica_metatype tmpMeta53;
              if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,7,4) == 0) goto tmp7_end;
              tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 2));
              tmpMeta46 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta45), 2));
              tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta45), 3));
              tmpMeta48 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta45), 4));
              tmpMeta49 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 5));
              tmp50 = mmc_unbox_integer(tmpMeta49);
              _tVarIndexes = tmpMeta46;
              _resEqnIndexes = tmpMeta47;
              _innerEquations = tmpMeta48;
              _mixedSystem = tmp50  /* pattern as ty=Boolean */;
              /* Pattern matching succeeded */
              if(_mixedSystem)
              {
                _isMixed = 1 /* true */;
              }

              {
                modelica_metatype _innerEquation;
                for (tmpMeta51 = _innerEquations; !listEmpty(tmpMeta51); tmpMeta51=MMC_CDR(tmpMeta51))
                {
                  _innerEquation = MMC_CAR(tmpMeta51);
                  tmpMeta52 = mmc_mk_cons(_innerEquation, _newInnerEquations);
                  _newInnerEquations = tmpMeta52;
                }
              }
              tmpMeta[0+0] = _newInnerEquations;
              tmpMeta[0+1] = listAppend(_newResEquations, _resEqnIndexes);
              tmpMeta[0+2] = listAppend(_newIterationVars, _tVarIndexes);
              goto tmp7_done;
            }
            }
            goto tmp7_end;
            tmp7_end: ;
          }
          goto goto_6;
          goto_6:;
          MMC_THROW_INTERNAL();
          goto tmp7_done;
          tmp7_done:;
        }
      }
      _newInnerEquations = tmpMeta[0+0];
      _newResEquations = tmpMeta[0+1];
      _newIterationVars = tmpMeta[0+2];
    }
  }

  tmpMeta55 = mmc_mk_cons(mmc_mk_integer(_lambdaIdx), MMC_REFSTRUCTLIT(mmc_nil));
  tmpMeta56 = mmc_mk_box5(3, &BackendDAE_TearingSet_TEARINGSET__desc, listAppend(_newIterationVars, tmpMeta55), _newResEquations, listReverse(_newInnerEquations), _OMC_LIT12);
  tmpMeta57 = mmc_mk_box5(10, &BackendDAE_StrongComponent_TORNSYSTEM__desc, tmpMeta56, mmc_mk_none(), mmc_mk_boolean(0 /* false */), mmc_mk_boolean(_isMixed));
  _outHomotopyComponent = tmpMeta57;
  _return: OMC_LABEL_UNUSED
  return _outHomotopyComponent;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_createOneHomotopyComponent(threadData_t *threadData, modelica_metatype _homotopyComponents, modelica_metatype _inSystem, modelica_metatype _lambdaIdx)
{
  modelica_integer tmp1;
  modelica_metatype _outHomotopyComponent = NULL;
  tmp1 = mmc_unbox_integer(_lambdaIdx);
  _outHomotopyComponent = omc_BackendDAEOptimize_createOneHomotopyComponent(threadData, _homotopyComponents, _inSystem, tmp1);
  /* skip box _outHomotopyComponent; BackendDAE.StrongComponent */
  return _outHomotopyComponent;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_getHomotopyComponents(threadData_t *threadData, modelica_metatype _componentIndexes, modelica_metatype _components, modelica_integer _homotopyLoopBeginning, modelica_integer _homotopyLoopEnd, modelica_metatype __omcQ_24in_5FoutPreHomotopyComponents, modelica_metatype __omcQ_24in_5FoutHomotopyComponents, modelica_metatype __omcQ_24in_5FoutPostHomotopyComponents, modelica_metatype *out_outHomotopyComponents, modelica_metatype *out_outPostHomotopyComponents)
{
  modelica_metatype _outPreHomotopyComponents = NULL;
  modelica_metatype _outHomotopyComponents = NULL;
  modelica_metatype _outPostHomotopyComponents = NULL;
  modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outPreHomotopyComponents = __omcQ_24in_5FoutPreHomotopyComponents;
  _outHomotopyComponents = __omcQ_24in_5FoutHomotopyComponents;
  _outPostHomotopyComponents = __omcQ_24in_5FoutPostHomotopyComponents;
  
  
  
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _componentIndexes;
    tmp4_2 = _components;
    {
      modelica_integer _i;
      modelica_metatype _indexes = NULL;
      modelica_metatype _comp = NULL;
      modelica_metatype _comps = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _i has no default value.
      // _indexes has no default value.
      // _comp has no default value.
      // _comps has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_integer tmp8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          tmp8 = mmc_unbox_integer(tmpMeta6);
          if (!listEmpty(tmpMeta7)) goto tmp3_end;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta9 = MMC_CAR(tmp4_2);
          tmpMeta10 = MMC_CDR(tmp4_2);
          if (!listEmpty(tmpMeta10)) goto tmp3_end;
          _i = tmp8  /* pattern as ty=Integer */;
          _comp = tmpMeta9;
          /* Pattern matching succeeded */
          if((_i < _homotopyLoopBeginning))
          {
            tmpMeta11 = mmc_mk_cons(_comp, _outPreHomotopyComponents);
            _outPreHomotopyComponents = tmpMeta11;
          }
          else
          {
            if((_i > _homotopyLoopEnd))
            {
              tmpMeta12 = mmc_mk_cons(_comp, _outPostHomotopyComponents);
              _outPostHomotopyComponents = tmpMeta12;
            }
            else
            {
              tmpMeta13 = mmc_mk_cons(_comp, _outHomotopyComponents);
              _outHomotopyComponents = tmpMeta13;
            }
          }
          tmpMeta[0+0] = listReverse(_outPreHomotopyComponents);
          tmpMeta[0+1] = listReverse(_outHomotopyComponents);
          tmpMeta[0+2] = listReverse(_outPostHomotopyComponents);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_integer tmp16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta14 = MMC_CAR(tmp4_1);
          tmpMeta15 = MMC_CDR(tmp4_1);
          tmp16 = mmc_unbox_integer(tmpMeta14);
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta17 = MMC_CAR(tmp4_2);
          tmpMeta18 = MMC_CDR(tmp4_2);
          _i = tmp16  /* pattern as ty=Integer */;
          _indexes = tmpMeta15;
          _comp = tmpMeta17;
          _comps = tmpMeta18;
          /* Pattern matching succeeded */
          if((_i < _homotopyLoopBeginning))
          {
            tmpMeta19 = mmc_mk_cons(_comp, _outPreHomotopyComponents);
            _outPreHomotopyComponents = tmpMeta19;
          }
          else
          {
            if((_i > _homotopyLoopEnd))
            {
              tmpMeta20 = mmc_mk_cons(_comp, _outPostHomotopyComponents);
              _outPostHomotopyComponents = tmpMeta20;
            }
            else
            {
              tmpMeta21 = mmc_mk_cons(_comp, _outHomotopyComponents);
              _outHomotopyComponents = tmpMeta21;
            }
          }
          /* Tail recursive call */
          _componentIndexes = _indexes;
          _components = _comps;
          __omcQ_24in_5FoutPreHomotopyComponents = _outPreHomotopyComponents;
          __omcQ_24in_5FoutHomotopyComponents = _outHomotopyComponents;
          __omcQ_24in_5FoutPostHomotopyComponents = _outPostHomotopyComponents;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outPreHomotopyComponents = tmpMeta[0+0];
  _outHomotopyComponents = tmpMeta[0+1];
  _outPostHomotopyComponents = tmpMeta[0+2];
  _return: OMC_LABEL_UNUSED
  if (out_outHomotopyComponents) { *out_outHomotopyComponents = _outHomotopyComponents; }
  if (out_outPostHomotopyComponents) { *out_outPostHomotopyComponents = _outPostHomotopyComponents; }
  return _outPreHomotopyComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_getHomotopyComponents(threadData_t *threadData, modelica_metatype _componentIndexes, modelica_metatype _components, modelica_metatype _homotopyLoopBeginning, modelica_metatype _homotopyLoopEnd, modelica_metatype __omcQ_24in_5FoutPreHomotopyComponents, modelica_metatype __omcQ_24in_5FoutHomotopyComponents, modelica_metatype __omcQ_24in_5FoutPostHomotopyComponents, modelica_metatype *out_outHomotopyComponents, modelica_metatype *out_outPostHomotopyComponents)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _outPreHomotopyComponents = NULL;
  tmp1 = mmc_unbox_integer(_homotopyLoopBeginning);
  tmp2 = mmc_unbox_integer(_homotopyLoopEnd);
  _outPreHomotopyComponents = omc_BackendDAEOptimize_getHomotopyComponents(threadData, _componentIndexes, _components, tmp1, tmp2, __omcQ_24in_5FoutPreHomotopyComponents, __omcQ_24in_5FoutHomotopyComponents, __omcQ_24in_5FoutPostHomotopyComponents, out_outHomotopyComponents, out_outPostHomotopyComponents);
  /* skip box _outPreHomotopyComponents; list<BackendDAE.StrongComponent> */
  /* skip box _outHomotopyComponents; list<BackendDAE.StrongComponent> */
  /* skip box _outPostHomotopyComponents; list<BackendDAE.StrongComponent> */
  return _outPreHomotopyComponents;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverseStrongComponentsForHomotopyLoop(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcomps, modelica_metatype __omcQ_24in_5Fsystem, modelica_metatype *out_system)
{
  modelica_metatype _comps = NULL;
  modelica_metatype _system = NULL;
  modelica_integer _nComps;
  modelica_integer _compIndex;
  modelica_integer _homotopyLoopBeginning;
  modelica_integer _homotopyLoopEnd;
  modelica_metatype _preHomotopyComponents = NULL;
  modelica_metatype _homotopyComponents = NULL;
  modelica_metatype _postHomotopyComponents = NULL;
  modelica_metatype _homotopyComponent = NULL;
  modelica_metatype _lambda = NULL;
  modelica_integer _lambdaIdx;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta39;
  modelica_metatype tmpMeta40;
  modelica_metatype tmpMeta41;
  modelica_metatype tmpMeta42;
  modelica_metatype tmpMeta43;
  modelica_metatype tmpMeta44;
  modelica_metatype tmpMeta45;
  modelica_metatype tmpMeta46;
  modelica_metatype tmpMeta47;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _comps = __omcQ_24in_5Fcomps;
  _system = __omcQ_24in_5Fsystem;
  // _nComps has no default value.
  _compIndex = ((modelica_integer) 0);
  _homotopyLoopBeginning = ((modelica_integer) 0);
  _homotopyLoopEnd = ((modelica_integer) 0);
  // _preHomotopyComponents has no default value.
  // _homotopyComponents has no default value.
  // _postHomotopyComponents has no default value.
  // _homotopyComponent has no default value.
  // _lambda has no default value.
  // _lambdaIdx has no default value.
  _nComps = listLength(_comps);

  {
    modelica_metatype _comp;
    for (tmpMeta1 = _comps; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _comp = MMC_CAR(tmpMeta1);
      _compIndex = ((modelica_integer) 1) + _compIndex;

      { /* match expression */
        modelica_metatype tmp4_1;
        tmp4_1 = _comp;
        {
          modelica_integer _eqnIndex;
          modelica_metatype _eqnIndexes = NULL;
          modelica_metatype _resEqnIndexes = NULL;
          modelica_metatype _innerEqnIndexes = NULL;
          modelica_metatype _innerEquations = NULL;
          modelica_metatype _eqn = NULL;
          modelica_metatype _eqnLst = NULL;
          modelica_boolean _hasHomotopy;
          int tmp4;
          // _eqnIndex has no default value.
          // _eqnIndexes has no default value.
          // _resEqnIndexes has no default value.
          // _innerEqnIndexes has no default value.
          // _innerEquations has no default value.
          // _eqn has no default value.
          // _eqnLst has no default value.
          // _hasHomotopy has no default value.
          {
            switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
            case 3: {
              modelica_metatype tmpMeta5;
              modelica_integer tmp6;
              modelica_metatype tmpMeta7;
              modelica_integer tmp8;
              if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
              tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
              tmp6 = mmc_unbox_integer(tmpMeta5);
              
              _eqnIndex = tmp6  /* pattern as ty=Integer */;
              /* Pattern matching succeeded */
              _eqn = omc_BackendEquation_get(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_system), 3))), _eqnIndex);

              /* Pattern-matching tuple assignment, wild first pattern */
              omc_BackendEquation_traverseExpsOfEquation(threadData, _eqn, boxvar_BackendDAEUtil_containsHomotopyCall, mmc_mk_boolean(0 /* false */), &tmpMeta7);
              tmp8 = mmc_unbox_integer(tmpMeta7);
              _hasHomotopy = tmp8  /* pattern as ty=Boolean */;

              if(_hasHomotopy)
              {
                _homotopyLoopEnd = _compIndex;

                if((_homotopyLoopBeginning == ((modelica_integer) 0)))
                {
                  _homotopyLoopBeginning = _compIndex;
                }
              }
              goto tmp3_done;
            }
            case 4: {
              modelica_metatype tmpMeta9;
              modelica_metatype tmpMeta10;
              modelica_integer tmp11;
              if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,5) == 0) goto tmp3_end;
              tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
              
              _eqnIndexes = tmpMeta9;
              /* Pattern matching succeeded */
              if((_homotopyLoopBeginning == ((modelica_integer) 0)))
              {
                _eqnLst = omc_BackendEquation_getList(threadData, _eqnIndexes, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_system), 3))));

                /* Pattern-matching tuple assignment, wild first pattern */
                omc_BackendEquation_traverseExpsOfEquationList(threadData, _eqnLst, boxvar_BackendDAEUtil_containsHomotopyCall, mmc_mk_boolean(0 /* false */), &tmpMeta10);
                tmp11 = mmc_unbox_integer(tmpMeta10);
                _hasHomotopy = tmp11  /* pattern as ty=Boolean */;

                if(_hasHomotopy)
                {
                  _homotopyLoopBeginning = _compIndex;

                  _homotopyLoopEnd = _compIndex;
                }
              }
              else
              {
                _homotopyLoopEnd = _compIndex;
              }
              goto tmp3_done;
            }
            case 5: {
              modelica_metatype tmpMeta12;
              modelica_integer tmp13;
              modelica_metatype tmpMeta14;
              modelica_integer tmp15;
              if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
              tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
              tmp13 = mmc_unbox_integer(tmpMeta12);
              
              _eqnIndex = tmp13  /* pattern as ty=Integer */;
              /* Pattern matching succeeded */
              _eqn = omc_BackendEquation_get(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_system), 3))), _eqnIndex);

              /* Pattern-matching tuple assignment, wild first pattern */
              omc_BackendEquation_traverseExpsOfEquation(threadData, _eqn, boxvar_BackendDAEUtil_containsHomotopyCall, mmc_mk_boolean(0 /* false */), &tmpMeta14);
              tmp15 = mmc_unbox_integer(tmpMeta14);
              _hasHomotopy = tmp15  /* pattern as ty=Boolean */;

              if(_hasHomotopy)
              {
                _homotopyLoopEnd = _compIndex;

                if((_homotopyLoopBeginning == ((modelica_integer) 0)))
                {
                  _homotopyLoopBeginning = _compIndex;
                }
              }
              goto tmp3_done;
            }
            case 6: {
              modelica_metatype tmpMeta16;
              modelica_integer tmp17;
              modelica_metatype tmpMeta18;
              modelica_integer tmp19;
              if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
              tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
              tmp17 = mmc_unbox_integer(tmpMeta16);
              
              _eqnIndex = tmp17  /* pattern as ty=Integer */;
              /* Pattern matching succeeded */
              _eqn = omc_BackendEquation_get(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_system), 3))), _eqnIndex);

              /* Pattern-matching tuple assignment, wild first pattern */
              omc_BackendEquation_traverseExpsOfEquation(threadData, _eqn, boxvar_BackendDAEUtil_containsHomotopyCall, mmc_mk_boolean(0 /* false */), &tmpMeta18);
              tmp19 = mmc_unbox_integer(tmpMeta18);
              _hasHomotopy = tmp19  /* pattern as ty=Boolean */;

              if(_hasHomotopy)
              {
                _homotopyLoopEnd = _compIndex;

                if((_homotopyLoopBeginning == ((modelica_integer) 0)))
                {
                  _homotopyLoopBeginning = _compIndex;
                }
              }
              goto tmp3_done;
            }
            case 7: {
              modelica_metatype tmpMeta20;
              modelica_integer tmp21;
              modelica_metatype tmpMeta22;
              modelica_integer tmp23;
              if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,2) == 0) goto tmp3_end;
              tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
              tmp21 = mmc_unbox_integer(tmpMeta20);
              
              _eqnIndex = tmp21  /* pattern as ty=Integer */;
              /* Pattern matching succeeded */
              _eqn = omc_BackendEquation_get(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_system), 3))), _eqnIndex);

              /* Pattern-matching tuple assignment, wild first pattern */
              omc_BackendEquation_traverseExpsOfEquation(threadData, _eqn, boxvar_BackendDAEUtil_containsHomotopyCall, mmc_mk_boolean(0 /* false */), &tmpMeta22);
              tmp23 = mmc_unbox_integer(tmpMeta22);
              _hasHomotopy = tmp23  /* pattern as ty=Boolean */;

              if(_hasHomotopy)
              {
                _homotopyLoopEnd = _compIndex;

                if((_homotopyLoopBeginning == ((modelica_integer) 0)))
                {
                  _homotopyLoopBeginning = _compIndex;
                }
              }
              goto tmp3_done;
            }
            case 8: {
              modelica_metatype tmpMeta24;
              modelica_integer tmp25;
              modelica_metatype tmpMeta26;
              modelica_integer tmp27;
              if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,2) == 0) goto tmp3_end;
              tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
              tmp25 = mmc_unbox_integer(tmpMeta24);
              
              _eqnIndex = tmp25  /* pattern as ty=Integer */;
              /* Pattern matching succeeded */
              _eqn = omc_BackendEquation_get(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_system), 3))), _eqnIndex);

              /* Pattern-matching tuple assignment, wild first pattern */
              omc_BackendEquation_traverseExpsOfEquation(threadData, _eqn, boxvar_BackendDAEUtil_containsHomotopyCall, mmc_mk_boolean(0 /* false */), &tmpMeta26);
              tmp27 = mmc_unbox_integer(tmpMeta26);
              _hasHomotopy = tmp27  /* pattern as ty=Boolean */;

              if(_hasHomotopy)
              {
                _homotopyLoopEnd = _compIndex;

                if((_homotopyLoopBeginning == ((modelica_integer) 0)))
                {
                  _homotopyLoopBeginning = _compIndex;
                }
              }
              goto tmp3_done;
            }
            case 9: {
              modelica_metatype tmpMeta28;
              modelica_integer tmp29;
              modelica_metatype tmpMeta30;
              modelica_integer tmp31;
              if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
              tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
              tmp29 = mmc_unbox_integer(tmpMeta28);
              
              _eqnIndex = tmp29  /* pattern as ty=Integer */;
              /* Pattern matching succeeded */
              _eqn = omc_BackendEquation_get(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_system), 3))), _eqnIndex);

              /* Pattern-matching tuple assignment, wild first pattern */
              omc_BackendEquation_traverseExpsOfEquation(threadData, _eqn, boxvar_BackendDAEUtil_containsHomotopyCall, mmc_mk_boolean(0 /* false */), &tmpMeta30);
              tmp31 = mmc_unbox_integer(tmpMeta30);
              _hasHomotopy = tmp31  /* pattern as ty=Boolean */;

              if(_hasHomotopy)
              {
                _homotopyLoopEnd = _compIndex;

                if((_homotopyLoopBeginning == ((modelica_integer) 0)))
                {
                  _homotopyLoopBeginning = _compIndex;
                }
              }
              goto tmp3_done;
            }
            case 10: {
              modelica_metatype tmpMeta32;
              modelica_metatype tmpMeta33;
              modelica_metatype tmpMeta34;
              modelica_metatype tmpMeta35;
              modelica_integer tmp36;
              modelica_metatype tmpMeta37;
              modelica_integer tmp38;
              if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,4) == 0) goto tmp3_end;
              tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
              tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 3));
              tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 4));
              
              _resEqnIndexes = tmpMeta33;
              _innerEquations = tmpMeta34;
              /* Pattern matching succeeded */
              if((_homotopyLoopBeginning == ((modelica_integer) 0)))
              {
                _eqnLst = omc_BackendEquation_getList(threadData, _resEqnIndexes, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_system), 3))));

                /* Pattern-matching tuple assignment, wild first pattern */
                omc_BackendEquation_traverseExpsOfEquationList(threadData, _eqnLst, boxvar_BackendDAEUtil_containsHomotopyCall, mmc_mk_boolean(0 /* false */), &tmpMeta35);
                tmp36 = mmc_unbox_integer(tmpMeta35);
                _hasHomotopy = tmp36  /* pattern as ty=Boolean */;

                if((!_hasHomotopy))
                {
                  _innerEqnIndexes = omc_List_map__3(threadData, _innerEquations, boxvar_BackendDAEUtil_getEqnAndVarsFromInnerEquation, NULL, NULL);

                  _eqnLst = omc_BackendEquation_getList(threadData, _innerEqnIndexes, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_system), 3))));

                  /* Pattern-matching tuple assignment, wild first pattern */
                  omc_BackendEquation_traverseExpsOfEquationList(threadData, _eqnLst, boxvar_BackendDAEUtil_containsHomotopyCall, mmc_mk_boolean(0 /* false */), &tmpMeta37);
                  tmp38 = mmc_unbox_integer(tmpMeta37);
                  _hasHomotopy = tmp38  /* pattern as ty=Boolean */;
                }

                if(_hasHomotopy)
                {
                  _homotopyLoopBeginning = _compIndex;

                  _homotopyLoopEnd = _compIndex;
                }
              }
              else
              {
                _homotopyLoopEnd = _compIndex;
              }
              goto tmp3_done;
            }
            }
            goto tmp3_end;
            tmp3_end: ;
          }
          goto goto_2;
          goto_2:;
          MMC_THROW_INTERNAL();
          goto tmp3_done;
          tmp3_done:;
        }
      }
      ;
    }
  }

  if((_homotopyLoopBeginning > ((modelica_integer) 0)))
  {
    tmpMeta40 = MMC_REFSTRUCTLIT(mmc_nil);
    tmpMeta41 = MMC_REFSTRUCTLIT(mmc_nil);
    tmpMeta42 = mmc_mk_box19(3, &BackendDAE_Var_VAR__desc, omc_ComponentReference_makeCrefIdent(threadData, _OMC_LIT0, _OMC_LIT1, tmpMeta40), _OMC_LIT2, _OMC_LIT3, _OMC_LIT4, _OMC_LIT1, mmc_mk_none(), mmc_mk_none(), tmpMeta41, _OMC_LIT9, mmc_mk_none(), mmc_mk_none(), mmc_mk_none(), mmc_mk_none(), _OMC_LIT10, _OMC_LIT11, mmc_mk_boolean(1 /* true */), mmc_mk_boolean(0 /* false */), mmc_mk_boolean(0 /* false */));
    _lambda = tmpMeta42;

    tmpMeta43 = MMC_TAGPTR(mmc_alloc_words(11));
    memcpy(MMC_UNTAGPTR(tmpMeta43), MMC_UNTAGPTR(_system), 11*sizeof(modelica_metatype));
    ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta43))[2] = omc_BackendVariable_addVar(threadData, _lambda, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_system), 2))));
    _system = tmpMeta43;

    _lambdaIdx = omc_BackendVariable_varsSize(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_system), 2))));

    tmpMeta44 = MMC_REFSTRUCTLIT(mmc_nil);
    tmpMeta45 = MMC_REFSTRUCTLIT(mmc_nil);
    tmpMeta46 = MMC_REFSTRUCTLIT(mmc_nil);
    _preHomotopyComponents = omc_BackendDAEOptimize_getHomotopyComponents(threadData, omc_List_intRange(threadData, _nComps), _comps, _homotopyLoopBeginning, _homotopyLoopEnd, tmpMeta44, tmpMeta45, tmpMeta46 ,&_homotopyComponents ,&_postHomotopyComponents);

    _homotopyComponent = omc_BackendDAEOptimize_createOneHomotopyComponent(threadData, _homotopyComponents, _system, _lambdaIdx);

    tmpMeta47 = mmc_mk_cons(_homotopyComponent, _postHomotopyComponents);
    _comps = tmpMeta47;

    _comps = listAppend(_preHomotopyComponents, _comps);
  }
  _return: OMC_LABEL_UNUSED
  if (out_system) { *out_system = _system; }
  return _comps;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_generateHomotopyComponents(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  modelica_metatype _comps = NULL;
  modelica_metatype _newEqSystems = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _ass1 = NULL;
  modelica_metatype _ass2 = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outDAE = _inDAE;
  // _comps has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _newEqSystems = tmpMeta1;
  // _ass1 has no default value.
  // _ass2 has no default value.
  if(omc_Config_adaptiveHomotopy(threadData))
  {
    {
      modelica_metatype _syst;
      for (tmpMeta2 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outDAE), 2))); !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
      {
        _syst = MMC_CAR(tmpMeta2);
        /* Pattern-matching assignment */
        tmpMeta3 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_syst), 7)));
        if (mmc__uniontype__metarecord__typedef__equal(tmpMeta3,1,3) == 0) MMC_THROW_INTERNAL();
        tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 2));
        tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 3));
        tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 4));
        _ass1 = tmpMeta4;
        _ass2 = tmpMeta5;
        _comps = tmpMeta6;

        if(omc_Config_globalHomotopy(threadData))
        {
          _comps = omc_BackendDAEOptimize_traverseStrongComponentsForHomotopyLoop(threadData, _comps, _syst ,&_syst);
        }
        else
        {
          _comps = omc_BackendDAEOptimize_traverseStrongComponentsAddLambda(threadData, _comps, _syst ,&_syst);
        }

        tmpMeta8 = mmc_mk_box4(4, &BackendDAE_Matching_MATCHING__desc, _ass1, _ass2, _comps);
        tmpMeta7 = MMC_TAGPTR(mmc_alloc_words(11));
        memcpy(MMC_UNTAGPTR(tmpMeta7), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
        ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta7))[7] = tmpMeta8;
        _syst = tmpMeta7;

        tmpMeta9 = mmc_mk_cons(_syst, _newEqSystems);
        _newEqSystems = tmpMeta9;
      }
    }

    tmpMeta11 = MMC_TAGPTR(mmc_alloc_words(4));
    memcpy(MMC_UNTAGPTR(tmpMeta11), MMC_UNTAGPTR(_outDAE), 4*sizeof(modelica_metatype));
    ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta11))[2] = listReverse(_newEqSystems);
    _outDAE = tmpMeta11;
  }
  else
  {
    omc_Error_addCompilerWarning(threadData, _OMC_LIT13);
  }
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_replaceHomotopyWithLambdaExpression(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inFoundHomotopy, modelica_boolean *out_cont, modelica_boolean *out_outFoundHomotopy)
{
  modelica_metatype _outExp = NULL;
  modelica_boolean _cont;
  modelica_boolean _outFoundHomotopy;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outExp = _inExp;
  _cont = 1 /* true */;
  // _outFoundHomotopy has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inExp;
    {
      modelica_metatype _actual = NULL;
      modelica_metatype _simplified = NULL;
      modelica_metatype _lambda = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _actual has no default value.
      // _simplified has no default value.
      // _lambda has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,1) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (8 != MMC_STRLEN(tmpMeta7) || strcmp(MMC_STRINGDATA(_OMC_LIT19), MMC_STRINGDATA(tmpMeta7)) != 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_CAR(tmpMeta8);
          tmpMeta10 = MMC_CDR(tmpMeta8);
          if (listEmpty(tmpMeta10)) goto tmp3_end;
          tmpMeta11 = MMC_CAR(tmpMeta10);
          tmpMeta12 = MMC_CDR(tmpMeta10);
          if (!listEmpty(tmpMeta12)) goto tmp3_end;
          
          _actual = tmpMeta9;
          _simplified = tmpMeta11;
          /* Pattern matching succeeded */
          tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
          _lambda = omc_Expression_crefExp(threadData, omc_ComponentReference_makeCrefIdent(threadData, _OMC_LIT0, _OMC_LIT1, tmpMeta13));

          tmpMeta14 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _OMC_LIT16, _OMC_LIT17, _lambda);
          tmpMeta15 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _simplified, _OMC_LIT14, tmpMeta14);
          tmpMeta16 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _actual, _OMC_LIT14, _lambda);
          tmpMeta17 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta15, _OMC_LIT18, tmpMeta16);
          _outExp = tmpMeta17;
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = _inFoundHomotopy;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outFoundHomotopy = tmp1;
  _return: OMC_LABEL_UNUSED
  if (out_cont) { *out_cont = _cont; }
  if (out_outFoundHomotopy) { *out_outFoundHomotopy = _outFoundHomotopy; }
  return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_replaceHomotopyWithLambdaExpression(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inFoundHomotopy, modelica_metatype *out_cont, modelica_metatype *out_outFoundHomotopy)
{
  modelica_integer tmp1;
  modelica_boolean _cont;
  modelica_boolean _outFoundHomotopy;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_inFoundHomotopy);
  _outExp = omc_BackendDAEOptimize_replaceHomotopyWithLambdaExpression(threadData, _inExp, tmp1, &_cont, &_outFoundHomotopy);
  /* skip box _outExp; DAE.Exp */
  if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
  if (out_outFoundHomotopy) { *out_outFoundHomotopy = mmc_mk_icon(_outFoundHomotopy); }
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_inlineHomotopy3(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inFoundHomotopy, modelica_boolean *out_outFoundHomotopy)
{
  modelica_metatype _outExp = NULL;
  modelica_boolean _outFoundHomotopy;
  modelica_metatype tmpMeta1;
  modelica_integer tmp2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  _outFoundHomotopy = _inFoundHomotopy;
  /* Pattern-matching tuple assignment */
  tmpMeta3 = omc_Expression_traverseExpTopDown(threadData, _inExp, boxvar_BackendDAEOptimize_replaceHomotopyWithLambdaExpression, mmc_mk_boolean(_inFoundHomotopy), &tmpMeta1);
  _outExp = tmpMeta3;
  tmp2 = mmc_unbox_integer(tmpMeta1);
  _outFoundHomotopy = tmp2  /* pattern as ty=Boolean */;
  _return: OMC_LABEL_UNUSED
  if (out_outFoundHomotopy) { *out_outFoundHomotopy = _outFoundHomotopy; }
  return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_inlineHomotopy3(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inFoundHomotopy, modelica_metatype *out_outFoundHomotopy)
{
  modelica_integer tmp1;
  modelica_boolean _outFoundHomotopy;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_inFoundHomotopy);
  _outExp = omc_BackendDAEOptimize_inlineHomotopy3(threadData, _inExp, tmp1, &_outFoundHomotopy);
  /* skip box _outExp; DAE.Exp */
  if (out_outFoundHomotopy) { *out_outFoundHomotopy = mmc_mk_icon(_outFoundHomotopy); }
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_inlineHomotopy2(threadData_t *threadData, modelica_metatype _inEq, modelica_boolean _inFoundHomotopy, modelica_boolean *out_outFoundHomotopy)
{
  modelica_metatype _outEq = NULL;
  modelica_boolean _outFoundHomotopy;
  modelica_metatype tmpMeta1;
  modelica_integer tmp2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEq has no default value.
  _outFoundHomotopy = _inFoundHomotopy;
  /* Pattern-matching tuple assignment */
  tmpMeta3 = omc_BackendEquation_traverseExpsOfEquation(threadData, _inEq, boxvar_BackendDAEOptimize_inlineHomotopy3, mmc_mk_boolean(_inFoundHomotopy), &tmpMeta1);
  _outEq = tmpMeta3;
  tmp2 = mmc_unbox_integer(tmpMeta1);
  _outFoundHomotopy = tmp2  /* pattern as ty=Boolean */;
  _return: OMC_LABEL_UNUSED
  if (out_outFoundHomotopy) { *out_outFoundHomotopy = _outFoundHomotopy; }
  return _outEq;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_inlineHomotopy2(threadData_t *threadData, modelica_metatype _inEq, modelica_metatype _inFoundHomotopy, modelica_metatype *out_outFoundHomotopy)
{
  modelica_integer tmp1;
  modelica_boolean _outFoundHomotopy;
  modelica_metatype _outEq = NULL;
  tmp1 = mmc_unbox_integer(_inFoundHomotopy);
  _outEq = omc_BackendDAEOptimize_inlineHomotopy2(threadData, _inEq, tmp1, &_outFoundHomotopy);
  /* skip box _outEq; BackendDAE.Equation */
  if (out_outFoundHomotopy) { *out_outFoundHomotopy = mmc_mk_icon(_outFoundHomotopy); }
  return _outEq;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_inlineHomotopy(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  modelica_metatype _orderedEqs = NULL;
  modelica_metatype _orderedVars = NULL;
  modelica_boolean _foundHomotopy;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outDAE = _inDAE;
  // _orderedEqs has no default value.
  // _orderedVars has no default value.
  // _foundHomotopy has no default value.
  {
    modelica_metatype _syst;
    for (tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDAE), 2))); !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _syst = MMC_CAR(tmpMeta1);
      _orderedEqs = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_syst), 3)));

      /* Pattern-matching tuple assignment */
      tmpMeta4 = omc_BackendEquation_traverseEquationArray__WithUpdate(threadData, _orderedEqs, boxvar_BackendDAEOptimize_inlineHomotopy2, mmc_mk_boolean(0 /* false */), &tmpMeta2);
      _orderedEqs = tmpMeta4;
      tmp3 = mmc_unbox_integer(tmpMeta2);
      _foundHomotopy = tmp3  /* pattern as ty=Boolean */;

      tmpMeta5 = MMC_TAGPTR(mmc_alloc_words(11));
      memcpy(MMC_UNTAGPTR(tmpMeta5), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
      ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta5))[3] = _orderedEqs;
      _syst = tmpMeta5;
    }
  }
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_replaceDerCallOutputsOnly(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype __omcQ_24in_5Fder_5Freplacement, modelica_metatype *out_der_replacement)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _der_replacement = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  _der_replacement = __omcQ_24in_5Fder_5Freplacement;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _cr = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _cr has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,1) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (3 != MMC_STRLEN(tmpMeta7) || strcmp(MMC_STRINGDATA(_OMC_LIT20), MMC_STRINGDATA(tmpMeta7)) != 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_CAR(tmpMeta8);
          tmpMeta10 = MMC_CDR(tmpMeta8);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,6,2) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
          if (!listEmpty(tmpMeta10)) goto tmp3_end;
          
          _cr = tmpMeta11;
          /* Pattern matching succeeded */
          tmpMeta1 = omc_UnorderedMap_getOrDefault(threadData, _cr, _der_replacement, _exp);
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  if (out_der_replacement) { *out_der_replacement = _der_replacement; }
  return _exp;
}

PROTECTED_FUNCTION_STATIC modelica_boolean omc_BackendDAEOptimize_stateVarIsNotVisited(threadData_t *threadData, modelica_integer _idx, modelica_metatype _varArr)
{
  modelica_boolean _b;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _b has no default value.
  _b = (mmc_unbox_integer(arrayGet(_varArr, _idx)) < ((modelica_integer) 0));
  _return: OMC_LABEL_UNUSED
  return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_stateVarIsNotVisited(threadData_t *threadData, modelica_metatype _idx, modelica_metatype _varArr)
{
  modelica_integer tmp1;
  modelica_boolean _b;
  modelica_metatype out_b;
  tmp1 = mmc_unbox_integer(_idx);
  _b = omc_BackendDAEOptimize_stateVarIsNotVisited(threadData, tmp1, _varArr);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

static modelica_metatype closure0_BackendEquation_traverseExpsOfEquation(threadData_t *thData, modelica_metatype closure, modelica_metatype inEquation, modelica_metatype inTypeA, modelica_metatype tmp47)
{
  modelica_fnptr inFunc = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendEquation_traverseExpsOfEquation(thData, inEquation, inFunc, inTypeA, tmp47);
}
DLLDirection
modelica_metatype omc_BackendDAEOptimize_evaluateOutputsOnly(threadData_t *threadData, modelica_metatype _daeIn)
{
  modelica_metatype _daeOut = NULL;
  modelica_integer _size;
  modelica_integer _nVars;
  modelica_integer _nEqs;
  modelica_metatype _ass1 = NULL;
  modelica_metatype _ass2 = NULL;
  modelica_metatype _varVisited = NULL;
  modelica_metatype _outputVarIndxs = NULL;
  modelica_metatype _stateIndxs = NULL;
  modelica_metatype _stateTasks = NULL;
  modelica_metatype _stateTasks1 = NULL;
  modelica_metatype _outputTasks = NULL;
  modelica_metatype _predecessors = NULL;
  modelica_metatype _tasks = NULL;
  modelica_metatype _varIdcs = NULL;
  modelica_metatype _eqIdcs = NULL;
  modelica_metatype _stateDerIdcs = NULL;
  modelica_metatype _comps = NULL;
  modelica_metatype _compsNew = NULL;
  modelica_metatype _addComps = NULL;
  modelica_metatype _comp = NULL;
  modelica_metatype _syst = NULL;
  modelica_metatype _systs = NULL;
  modelica_metatype _systsNew = NULL;
  modelica_metatype _eq = NULL;
  modelica_metatype _eqs = NULL;
  modelica_metatype _m = NULL;
  modelica_metatype _mT = NULL;
  modelica_metatype _matching = NULL;
  modelica_metatype _shared = NULL;
  modelica_metatype _vars = NULL;
  modelica_metatype _funcTree = NULL;
  modelica_metatype _eqLst = NULL;
  modelica_metatype _eqLstNew = NULL;
  modelica_metatype _varLst = NULL;
  modelica_metatype _varLstNew = NULL;
  modelica_metatype _states = NULL;
  modelica_metatype _crefs = NULL;
  modelica_metatype _taskGraph = NULL;
  modelica_metatype _taskGraphT = NULL;
  modelica_metatype _taskGraphData = NULL;
  modelica_metatype _varCompMapping = NULL;
  modelica_metatype _eqCompMapping = NULL;
  modelica_metatype _mapEqnIncRow = NULL;
  modelica_metatype _mapIncRowEqn = NULL;
  modelica_integer _systemNumber;
  modelica_integer _numberOfSystems;
  modelica_metatype _eqIndLst = NULL;
  modelica_metatype _eqIndexLst = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _der_replacement = NULL;
  modelica_metatype _derVar = NULL;
  modelica_boolean _debug;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  modelica_metatype tmpMeta16;
  modelica_metatype tmpMeta17;
  modelica_metatype tmpMeta18;
  modelica_metatype tmpMeta19;
  modelica_metatype tmpMeta20;
  modelica_metatype tmpMeta21;
  modelica_metatype tmpMeta22;
  modelica_metatype tmpMeta23;
  modelica_metatype tmpMeta24;
  modelica_metatype tmpMeta25;
  modelica_metatype tmpMeta26;
  modelica_metatype tmpMeta27;
  modelica_metatype tmpMeta28;
  modelica_metatype tmpMeta29;
  modelica_metatype tmpMeta30;
  modelica_metatype tmpMeta31;
  modelica_metatype tmpMeta32;
  modelica_metatype tmpMeta33;
  modelica_metatype tmpMeta34;
  modelica_metatype tmpMeta35;
  modelica_metatype tmpMeta36;
  modelica_metatype tmpMeta37;
  modelica_metatype tmpMeta38;
  modelica_metatype tmpMeta39;
  modelica_metatype tmpMeta40;
  modelica_metatype tmpMeta41;
  modelica_metatype tmpMeta42;
  modelica_metatype tmpMeta43;
  modelica_metatype tmpMeta44;
  modelica_metatype tmpMeta45;
  modelica_metatype tmpMeta46;
  modelica_metatype tmpMeta48;
  modelica_metatype tmpMeta49;
  modelica_metatype tmpMeta50;
  modelica_metatype tmpMeta51;
  modelica_metatype tmpMeta52;
  modelica_metatype tmpMeta53;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _daeOut has no default value.
  // _size has no default value.
  // _nVars has no default value.
  // _nEqs has no default value.
  // _ass1 has no default value.
  // _ass2 has no default value.
  // _varVisited has no default value.
  // _outputVarIndxs has no default value.
  // _stateIndxs has no default value.
  // _stateTasks has no default value.
  // _stateTasks1 has no default value.
  // _outputTasks has no default value.
  // _predecessors has no default value.
  // _tasks has no default value.
  // _varIdcs has no default value.
  // _eqIdcs has no default value.
  // _stateDerIdcs has no default value.
  // _comps has no default value.
  // _compsNew has no default value.
  // _addComps has no default value.
  // _comp has no default value.
  // _syst has no default value.
  // _systs has no default value.
  // _systsNew has no default value.
  // _eq has no default value.
  // _eqs has no default value.
  // _m has no default value.
  // _mT has no default value.
  // _matching has no default value.
  // _shared has no default value.
  // _vars has no default value.
  // _funcTree has no default value.
  // _eqLst has no default value.
  // _eqLstNew has no default value.
  // _varLst has no default value.
  // _varLstNew has no default value.
  // _states has no default value.
  // _crefs has no default value.
  // _taskGraph has no default value.
  // _taskGraphT has no default value.
  // _taskGraphData has no default value.
  // _varCompMapping has no default value.
  // _eqCompMapping has no default value.
  // _mapEqnIncRow has no default value.
  // _mapIncRowEqn has no default value.
  _systemNumber = ((modelica_integer) 0);
  // _numberOfSystems has no default value.
  // _eqIndLst has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _eqIndexLst = tmpMeta1;
  // _der_replacement has no default value.
  // _derVar has no default value.
  _debug = 0 /* false */;
  _daeOut = _daeIn;

  /* Pattern-matching assignment */
  tmpMeta2 = _daeIn;
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 3));
  _systs = tmpMeta3;
  _shared = tmpMeta4;

  /* Pattern-matching assignment */
  tmpMeta5 = _shared;
  tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 12));
  _funcTree = tmpMeta6;

  tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
  _systsNew = tmpMeta7;

  _numberOfSystems = listLength(_systs);

  {
    modelica_metatype _syst;
    for (tmpMeta8 = _systs; !listEmpty(tmpMeta8); tmpMeta8=MMC_CDR(tmpMeta8))
    {
      _syst = MMC_CAR(tmpMeta8);
      _systemNumber = ((modelica_integer) 1) + _systemNumber;

      /* Pattern-matching assignment */
      tmpMeta9 = _syst;
      tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
      tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
      tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 7));
      _vars = tmpMeta10;
      _eqs = tmpMeta11;
      _matching = tmpMeta12;

      /* Pattern-matching assignment */
      tmpMeta13 = _matching;
      if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,1,3) == 0) MMC_THROW_INTERNAL();
      tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
      tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 3));
      tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 4));
      _ass1 = tmpMeta14;
      _ass2 = tmpMeta15;
      _comps = tmpMeta16;

      _taskGraph = omc_HpcOmTaskGraph_getEmptyTaskGraph(threadData, ((modelica_integer) 0), ((modelica_integer) 0), ((modelica_integer) 0) ,&_taskGraphData);

      /* Pattern-matching assignment */
      tmpMeta17 = mmc_mk_box3(0, _taskGraph, _taskGraphData, mmc_mk_integer(((modelica_integer) 1)));
      tmpMeta18 = omc_HpcOmTaskGraph_createTaskGraph0(threadData, _syst, _shared, 0 /* false */, tmpMeta17);
      tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 1));
      tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
      _taskGraph = tmpMeta19;
      _taskGraphData = tmpMeta20;

      /* Pattern-matching assignment */
      tmpMeta21 = _taskGraphData;
      tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 3));
      tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 4));
      _varCompMapping = tmpMeta22;
      _eqCompMapping = tmpMeta23;

      _size = arrayLength(_taskGraph);

      _taskGraphT = omc_AdjacencyMatrix_transposeAdjacencyMatrix(threadData, _taskGraph, _size);

      /* Pattern-matching assignment */
      tmpMeta24 = _syst;
      tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 2));
      _vars = tmpMeta25;

      _varLst = omc_BackendVariable_varList(threadData, _vars);

      _varLst = omc_List_filterOnTrue(threadData, _varLst, boxvar_BackendVariable_isVarOnTopLevelAndOutput);

      if((!listEmpty(_varLst)))
      {
        _outputVarIndxs = omc_BackendVariable_getVarIndexFromVars(threadData, _varLst, _vars);

        _outputTasks = omc_List_map(threadData, omc_List_map1(threadData, _outputVarIndxs, boxvar_Array_getIndexFirst, _varCompMapping), boxvar_Util_tuple31);

        _predecessors = omc_HpcOmTaskGraph_getAllSuccessors(threadData, _outputTasks, _taskGraphT);

        _predecessors = omc_List_sort(threadData, _predecessors, boxvar_intGt);

        _compsNew = omc_List_map1(threadData, listAppend(_outputTasks, _predecessors), boxvar_List_getIndexFirst, _comps);

        _eqLstNew = omc_BackendDAEUtil_getStrongComponentEquations(threadData, _compsNew, _eqs, _vars);

        tmpMeta26 = MMC_REFSTRUCTLIT(mmc_nil);
        _stateTasks = tmpMeta26;

        _varVisited = arrayCreate(omc_BackendVariable_varsSize(threadData, _vars), mmc_mk_integer(((modelica_integer) -1)));

        while(1)
        {
          if(!(!listEmpty(_eqLstNew))) break;
          /* Pattern-matching assignment */
          tmpMeta27 = _eqLstNew;
          if (listEmpty(tmpMeta27)) MMC_THROW_INTERNAL();
          tmpMeta28 = MMC_CAR(tmpMeta27);
          tmpMeta29 = MMC_CDR(tmpMeta27);
          _eq = tmpMeta28;
          _eqLstNew = tmpMeta29;

          _crefs = omc_BackendEquation_equationCrefs(threadData, _eq);

          _crefs = omc_List_filter1OnTrue(threadData, _crefs, boxvar_BackendVariable_isState, _vars);

          _states = omc_BackendVariable_getVarLst(threadData, _crefs, _vars ,&_stateIndxs);

          _stateIndxs = omc_List_filter1OnTrueSync(threadData, _stateIndxs, boxvar_BackendDAEOptimize_stateVarIsNotVisited, _varVisited, _states ,&_states);

          if((!listEmpty(_stateIndxs)))
          {
            omc_List_map2__0(threadData, _stateIndxs, boxvar_Array_updateIndexFirst, mmc_mk_integer(((modelica_integer) 1)), _varVisited);

            _stateTasks1 = omc_List_map(threadData, omc_List_map1(threadData, _stateIndxs, boxvar_Array_getIndexFirst, _varCompMapping), boxvar_Util_tuple31);

            _stateTasks = omc_List_append__reverse(threadData, _stateTasks1, _stateTasks);

            _predecessors = omc_HpcOmTaskGraph_getAllSuccessors(threadData, _stateTasks1, _taskGraphT);

            _addComps = omc_List_map1(threadData, listAppend(_stateTasks1, _predecessors), boxvar_List_getIndexFirst, _comps);

            _eqLstNew = listAppend(omc_BackendDAEUtil_getStrongComponentEquations(threadData, _addComps, _eqs, _vars), _eqLstNew);
          }
        }

        _stateTasks = listReverseInPlace(_stateTasks);

        _predecessors = omc_HpcOmTaskGraph_getAllSuccessors(threadData, listAppend(_outputTasks, _stateTasks), _taskGraphT);

        _tasks = omc_List_sort(threadData, listAppend(_predecessors, listAppend(_outputTasks, _stateTasks)), boxvar_intGt);

        _compsNew = omc_List_map1(threadData, _tasks, boxvar_List_getIndexFirst, _comps);

        _compsNew = omc_List_unique(threadData, _compsNew);

        tmpMeta30 = MMC_REFSTRUCTLIT(mmc_nil);
        _eqLstNew = tmpMeta30;

        tmpMeta31 = MMC_REFSTRUCTLIT(mmc_nil);
        _varLstNew = tmpMeta31;

        {
          modelica_metatype _comp;
          for (tmpMeta32 = _compsNew; !listEmpty(tmpMeta32); tmpMeta32=MMC_CDR(tmpMeta32))
          {
            _comp = MMC_CAR(tmpMeta32);
            _varLst = omc_BackendDAEUtil_getStrongComponentVarsAndEquations(threadData, _comp, _vars, _eqs ,NULL ,&_eqLst ,&_eqIndLst);

            _varLstNew = listAppend(_varLst, _varLstNew);

            _eqLstNew = listAppend(_eqLst, _eqLstNew);

            _eqIndexLst = listAppend(_eqIndLst, _eqIndexLst);
          }
        }

        tmpMeta34 = MMC_TAGPTR(mmc_alloc_words(11));
        memcpy(MMC_UNTAGPTR(tmpMeta34), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
        ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta34))[2] = omc_BackendVariable_listVar1(threadData, listReverse(_varLstNew));
        _syst = tmpMeta34;

        tmpMeta35 = MMC_TAGPTR(mmc_alloc_words(11));
        memcpy(MMC_UNTAGPTR(tmpMeta35), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
        ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta35))[3] = omc_BackendEquation_listEquation(threadData, listReverse(_eqLstNew));
        _syst = tmpMeta35;

        tmpMeta36 = MMC_TAGPTR(mmc_alloc_words(11));
        memcpy(MMC_UNTAGPTR(tmpMeta36), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
        ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta36))[4] = mmc_mk_none();
        _syst = tmpMeta36;

        tmpMeta37 = MMC_TAGPTR(mmc_alloc_words(11));
        memcpy(MMC_UNTAGPTR(tmpMeta37), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
        ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta37))[5] = mmc_mk_none();
        _syst = tmpMeta37;

        tmpMeta38 = MMC_TAGPTR(mmc_alloc_words(11));
        memcpy(MMC_UNTAGPTR(tmpMeta38), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
        ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta38))[7] = _OMC_LIT21;
        _syst = tmpMeta38;

        _m = omc_BackendDAEUtil_adjacencyMatrix(threadData, _syst, _OMC_LIT22, mmc_mk_none(), omc_BackendDAEUtil_isInitializationDAE(threadData, _shared) ,&_mT);

        tmpMeta39 = MMC_TAGPTR(mmc_alloc_words(11));
        memcpy(MMC_UNTAGPTR(tmpMeta39), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
        ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta39))[4] = mmc_mk_some(_m);
        _syst = tmpMeta39;

        tmpMeta40 = MMC_TAGPTR(mmc_alloc_words(11));
        memcpy(MMC_UNTAGPTR(tmpMeta40), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
        ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta40))[5] = mmc_mk_some(_mT);
        _syst = tmpMeta40;

        _nVars = listLength(_varLstNew);

        _nEqs = listLength(_eqLstNew);

        _ass1 = arrayCreate(_nVars, mmc_mk_integer(((modelica_integer) -1)));

        _ass2 = arrayCreate(_nEqs, mmc_mk_integer(((modelica_integer) -1)));

        omc_Matching_matchingExternalsetAdjacencyMatrix(threadData, _nVars, _nEqs, _m);

        omc_BackendDAEEXT_matching(threadData, _nVars, _nEqs, ((modelica_integer) 5), ((modelica_integer) -1), 0.0, ((modelica_integer) 1));

        omc_BackendDAEEXT_getAssignment(threadData, _ass2, _ass1);

        tmpMeta41 = mmc_mk_box4(4, &BackendDAE_Matching_MATCHING__desc, _ass1, _ass2, _compsNew);
        _matching = tmpMeta41;

        tmpMeta42 = MMC_TAGPTR(mmc_alloc_words(11));
        memcpy(MMC_UNTAGPTR(tmpMeta42), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
        ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta42))[7] = _matching;
        _syst = tmpMeta42;

        _syst = omc_BackendDAEUtil_getAdjacencyMatrixScalar(threadData, _syst, _OMC_LIT22, mmc_mk_some(_funcTree), omc_BackendDAEUtil_isInitializationDAE(threadData, _shared) ,NULL ,NULL ,&_mapEqnIncRow ,&_mapIncRowEqn);

        _syst = omc_BackendDAETransform_strongComponentsScalar(threadData, _syst, _shared, _mapEqnIncRow, _mapIncRowEqn, NULL);

        tmpMeta43 = MMC_TAGPTR(mmc_alloc_words(11));
        memcpy(MMC_UNTAGPTR(tmpMeta43), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
        ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta43))[10] = omc_BackendEquation_emptyEqns(threadData);
        _syst = tmpMeta43;

        tmpMeta44 = mmc_mk_cons(_syst, _systsNew);
        _systsNew = tmpMeta44;

        _vars = omc_BackendVariable_deleteVars(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_syst), 2))), _vars);

        _eqs = omc_BackendEquation_deleteList(threadData, _eqs, _eqIndexLst);
      }

      _der_replacement = omc_UnorderedMap_new(threadData, boxvar_ComponentReference_hashComponentRef, boxvar_ComponentReference_crefEqual, ((modelica_integer) 1));

      {
        modelica_metatype _state;
        for (tmpMeta45 = omc_BackendVariable_varList(threadData, _vars); !listEmpty(tmpMeta45); tmpMeta45=MMC_CDR(tmpMeta45))
        {
          _state = MMC_CAR(tmpMeta45);
          if(omc_BackendVariable_isStateVar(threadData, _state))
          {
            _derVar = omc_BackendVariable_makeVar(threadData, omc_ComponentReference_prependStringCref(threadData, _OMC_LIT23, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_state), 2)))));

            omc_UnorderedMap_add(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_state), 2))), omc_Expression_crefExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_derVar), 2)))), _der_replacement);

            _vars = omc_BackendVariable_addVar(threadData, _derVar, _vars);
          }
        }
      }

      tmpMeta48 = mmc_mk_box1(0, boxvar_BackendDAEOptimize_replaceDerCallOutputsOnly);
      _eqs = omc_BackendEquation_traverseEquationArray__WithUpdate(threadData, _eqs, (modelica_fnptr) mmc_mk_box2(0,closure0_BackendEquation_traverseExpsOfEquation,tmpMeta48), _der_replacement, NULL);

      _vars = omc_BackendVariable_traverseBackendDAEVarsWithUpdate(threadData, _vars, boxvar_BackendVariable_makeParamOutputsOnly, mmc_mk_boolean(0 /* false */), NULL);

      _eqs = omc_BackendEquation_traverseEquationArray__WithUpdate(threadData, _eqs, boxvar_BackendEquation_setEquationKind, _OMC_LIT24, NULL);

      tmpMeta49 = MMC_TAGPTR(mmc_alloc_words(22));
      memcpy(MMC_UNTAGPTR(tmpMeta49), MMC_UNTAGPTR(_shared), 22*sizeof(modelica_metatype));
      ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta49))[2] = omc_BackendVariable_addVariables(threadData, _vars, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 2))));
      _shared = tmpMeta49;

      tmpMeta50 = MMC_TAGPTR(mmc_alloc_words(22));
      memcpy(MMC_UNTAGPTR(tmpMeta50), MMC_UNTAGPTR(_shared), 22*sizeof(modelica_metatype));
      ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta50))[6] = omc_BackendEquation_addList(threadData, omc_BackendEquation_equationList(threadData, _eqs), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 6))));
      _shared = tmpMeta50;
    }
  }

  tmpMeta52 = MMC_TAGPTR(mmc_alloc_words(22));
  memcpy(MMC_UNTAGPTR(tmpMeta52), MMC_UNTAGPTR(_shared), 22*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta52))[5] = omc_BackendVariable_emptyVars(threadData, ((modelica_integer) 4013));
  _shared = tmpMeta52;

  tmpMeta53 = mmc_mk_box3(3, &BackendDAE_BackendDAE_DAE__desc, _systsNew, _shared);
  _daeOut = tmpMeta53;
  _return: OMC_LABEL_UNUSED
  return _daeOut;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_addTimeAsState4(threadData_t *threadData, modelica_metatype _inExp, modelica_integer _inTuple, modelica_boolean *out_cont, modelica_integer *out_outTuple)
{
  modelica_metatype _outExp = NULL;
  modelica_boolean _cont;
  modelica_integer _outTuple;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  _cont = 1 /* true */;
  _outTuple = _inTuple;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inExp;
    {
      modelica_metatype _ty = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _ty has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,3) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (4 != MMC_STRLEN(tmpMeta7) || strcmp(MMC_STRINGDATA(_OMC_LIT27), MMC_STRINGDATA(tmpMeta7)) != 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          _ty = tmpMeta8;
          /* Pattern matching succeeded */
          tmpMeta9 = mmc_mk_box3(9, &DAE_Exp_CREF__desc, _OMC_LIT26, _ty);
          tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _inExp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  if (out_cont) { *out_cont = _cont; }
  if (out_outTuple) { *out_outTuple = _outTuple; }
  return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_addTimeAsState4(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTuple, modelica_metatype *out_cont, modelica_metatype *out_outTuple)
{
  modelica_integer tmp1;
  modelica_boolean _cont;
  modelica_integer _outTuple;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_inTuple);
  _outExp = omc_BackendDAEOptimize_addTimeAsState4(threadData, _inExp, tmp1, &_cont, &_outTuple);
  /* skip box _outExp; DAE.Exp */
  if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
  if (out_outTuple) { *out_outTuple = mmc_mk_icon(_outTuple); }
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_addTimeAsState3(threadData_t *threadData, modelica_metatype _inExp, modelica_integer _inTuple, modelica_integer *out_outTuple)
{
  modelica_metatype _outExp = NULL;
  modelica_integer _outTuple;
  modelica_metatype tmpMeta1;
  modelica_integer tmp2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _outTuple has no default value.
  /* Pattern-matching tuple assignment */
  tmpMeta3 = omc_Expression_traverseExpTopDown(threadData, _inExp, boxvar_BackendDAEOptimize_addTimeAsState4, mmc_mk_integer(_inTuple), &tmpMeta1);
  _outExp = tmpMeta3;
  tmp2 = mmc_unbox_integer(tmpMeta1);
  _outTuple = tmp2  /* pattern as ty=Integer */;
  _return: OMC_LABEL_UNUSED
  if (out_outTuple) { *out_outTuple = _outTuple; }
  return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_addTimeAsState3(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTuple, modelica_metatype *out_outTuple)
{
  modelica_integer tmp1;
  modelica_integer _outTuple;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_inTuple);
  _outExp = omc_BackendDAEOptimize_addTimeAsState3(threadData, _inExp, tmp1, &_outTuple);
  /* skip box _outExp; DAE.Exp */
  if (out_outTuple) { *out_outTuple = mmc_mk_icon(_outTuple); }
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_addTimeAsState2(threadData_t *threadData, modelica_metatype _inEq, modelica_integer _inFoo, modelica_integer *out_outFoo)
{
  modelica_metatype _outEq = NULL;
  modelica_integer _outFoo;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEq has no default value.
  _outFoo = _inFoo;
  _outEq = omc_BackendEquation_traverseExpsOfEquation(threadData, _inEq, boxvar_BackendDAEOptimize_addTimeAsState3, mmc_mk_integer(_inFoo), NULL);
  _return: OMC_LABEL_UNUSED
  if (out_outFoo) { *out_outFoo = _outFoo; }
  return _outEq;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_addTimeAsState2(threadData_t *threadData, modelica_metatype _inEq, modelica_metatype _inFoo, modelica_metatype *out_outFoo)
{
  modelica_integer tmp1;
  modelica_integer _outFoo;
  modelica_metatype _outEq = NULL;
  tmp1 = mmc_unbox_integer(_inFoo);
  _outEq = omc_BackendDAEOptimize_addTimeAsState2(threadData, _inEq, tmp1, &_outFoo);
  /* skip box _outEq; BackendDAE.Equation */
  if (out_outFoo) { *out_outFoo = mmc_mk_icon(_outFoo); }
  return _outEq;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_addTimeAsState1(threadData_t *threadData, modelica_metatype _inSystem, modelica_metatype _inShared, modelica_integer _inFoo, modelica_metatype *out_outShared, modelica_integer *out_outFoo)
{
  modelica_metatype _outSystem = NULL;
  modelica_metatype _outShared = NULL;
  modelica_integer _outFoo;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outSystem has no default value.
  _outShared = _inShared;
  _outFoo = _inFoo;
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _inSystem;
    {
      modelica_metatype _orderedEqs = NULL;
      modelica_metatype _syst = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _orderedEqs has no default value.
      // _syst has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _syst = tmp4_1;
          _orderedEqs = tmpMeta6;
          /* Pattern matching succeeded */
          omc_BackendEquation_traverseEquationArray__WithUpdate(threadData, _orderedEqs, boxvar_BackendDAEOptimize_addTimeAsState2, mmc_mk_integer(_inFoo), NULL);
          tmpMeta1 = _syst;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _inSystem;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outSystem = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  if (out_outShared) { *out_outShared = _outShared; }
  if (out_outFoo) { *out_outFoo = _outFoo; }
  return _outSystem;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_addTimeAsState1(threadData_t *threadData, modelica_metatype _inSystem, modelica_metatype _inShared, modelica_metatype _inFoo, modelica_metatype *out_outShared, modelica_metatype *out_outFoo)
{
  modelica_integer tmp1;
  modelica_integer _outFoo;
  modelica_metatype _outSystem = NULL;
  tmp1 = mmc_unbox_integer(_inFoo);
  _outSystem = omc_BackendDAEOptimize_addTimeAsState1(threadData, _inSystem, _inShared, tmp1, out_outShared, &_outFoo);
  /* skip box _outSystem; BackendDAE.EqSystem */
  /* skip box _outShared; BackendDAE.Shared */
  if (out_outFoo) { *out_outFoo = mmc_mk_icon(_outFoo); }
  return _outSystem;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_addTimeAsState(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  modelica_metatype _eqs = NULL;
  modelica_metatype _eq = NULL;
  modelica_metatype _shared = NULL;
  modelica_metatype _orderedVars = NULL;
  modelica_metatype _orderedEqs = NULL;
  modelica_metatype _var = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outDAE = _inDAE;
  // _eqs has no default value.
  // _eq has no default value.
  // _shared has no default value.
  // _orderedVars has no default value.
  // _orderedEqs has no default value.
  // _var has no default value.
  /* Pattern-matching tuple assignment */
  tmpMeta1 = omc_BackendDAEUtil_mapEqSystemAndFold(threadData, _inDAE, boxvar_BackendDAEOptimize_addTimeAsState1, mmc_mk_integer(((modelica_integer) 0)), NULL);
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  _eqs = tmpMeta2;
  _shared = tmpMeta3;

  _orderedVars = omc_BackendVariable_emptyVars(threadData, ((modelica_integer) 4013));

  _var = _OMC_LIT29;

  _var = omc_BackendVariable_setVarFixed(threadData, _var, 1 /* true */);

  _var = omc_BackendVariable_setVarStartValue(threadData, _var, _OMC_LIT31);

  _orderedVars = omc_BackendVariable_addVar(threadData, _var, _orderedVars);

  _orderedEqs = omc_BackendEquation_emptyEqnsSized(threadData, ((modelica_integer) 1));

  _orderedEqs = omc_BackendEquation_add(threadData, _OMC_LIT42, _orderedEqs);

  tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
  _eq = omc_BackendDAEUtil_createEqSystem(threadData, _orderedVars, _orderedEqs, tmpMeta4, _OMC_LIT43, omc_BackendEquation_emptyEqns(threadData));

  tmpMeta5 = mmc_mk_cons(_eq, _eqs);
  tmpMeta6 = mmc_mk_box3(3, &BackendDAE_BackendDAE_DAE__desc, tmpMeta5, _shared);
  _outDAE = tmpMeta6;
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

PROTECTED_FUNCTION_STATIC modelica_string omc_BackendDAEOptimize_warnAboutVars(threadData_t *threadData, modelica_metatype _vars)
{
  modelica_string _str = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _str has no default value.
  {
    modelica_metatype __omcQ_24tmpVar1;
    modelica_metatype* tmp2;
    modelica_metatype tmpMeta3;
    modelica_metatype tmpMeta4;
    modelica_string __omcQ_24tmpVar0;
    modelica_integer tmp5;
    modelica_metatype _v_loopVar = 0;
    modelica_metatype _v;
    _v_loopVar = _vars;
    tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar1 = tmpMeta3; /* defaultValue */
    tmp2 = &__omcQ_24tmpVar1;
    while(1) {
      tmp5 = 1;
      if (!listEmpty(_v_loopVar)) {
        _v = MMC_CAR(_v_loopVar);
        _v_loopVar = MMC_CDR(_v_loopVar);
        tmp5--;
      }
      if (tmp5 == 0) {
        tmpMeta4 = stringAppend(_OMC_LIT44,omc_BackendDump_varString(threadData, _v));
        __omcQ_24tmpVar0 = tmpMeta4;
        *tmp2 = mmc_mk_cons(__omcQ_24tmpVar0,0);
        tmp2 = &MMC_CDR(*tmp2);
      } else if (tmp5 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp2 = mmc_mk_nil();
    tmpMeta1 = __omcQ_24tmpVar1;
  }
  _str = stringDelimitList(tmpMeta1, _OMC_LIT45);
  _return: OMC_LABEL_UNUSED
  return _str;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_listAllIterationVariables3(threadData_t *threadData, modelica_metatype _varIndices, modelica_metatype _allVars, modelica_string _message, modelica_metatype __omcQ_24in_5Fwarnings, modelica_metatype __omcQ_24in_5Fcrefs, modelica_metatype *out_crefs)
{
  modelica_metatype _warnings = NULL;
  modelica_metatype _crefs = NULL;
  modelica_metatype _vars = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _warnings = __omcQ_24in_5Fwarnings;
  _crefs = __omcQ_24in_5Fcrefs;
  // _vars has no default value.
  if((!listEmpty(_varIndices)))
  {
    {
      modelica_metatype __omcQ_24tmpVar3;
      modelica_metatype* tmp2;
      modelica_metatype tmpMeta3;
      modelica_metatype __omcQ_24tmpVar2;
      modelica_integer tmp4;
      modelica_metatype _v_loopVar = 0;
      modelica_metatype _v;
      _v_loopVar = _varIndices;
      tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
      __omcQ_24tmpVar3 = tmpMeta3; /* defaultValue */
      tmp2 = &__omcQ_24tmpVar3;
      while(1) {
        tmp4 = 1;
        if (!listEmpty(_v_loopVar)) {
          _v = MMC_CAR(_v_loopVar);
          _v_loopVar = MMC_CDR(_v_loopVar);
          tmp4--;
        }
        if (tmp4 == 0) {
          __omcQ_24tmpVar2 = omc_BackendVariable_getVarAt(threadData, _allVars, mmc_unbox_integer(_v));
          *tmp2 = mmc_mk_cons(__omcQ_24tmpVar2,0);
          tmp2 = &MMC_CDR(*tmp2);
        } else if (tmp4 == 1) {
          break;
        } else {
          MMC_THROW_INTERNAL();
        }
      }
      *tmp2 = mmc_mk_nil();
      tmpMeta1 = __omcQ_24tmpVar3;
    }
    _vars = tmpMeta1;

    {
      modelica_metatype __omcQ_24tmpVar5;
      modelica_metatype* tmp6;
      modelica_metatype tmpMeta7;
      modelica_metatype __omcQ_24tmpVar4;
      modelica_integer tmp8;
      modelica_metatype _v_loopVar = 0;
      modelica_metatype _v;
      _v_loopVar = _vars;
      tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
      __omcQ_24tmpVar5 = tmpMeta7; /* defaultValue */
      tmp6 = &__omcQ_24tmpVar5;
      while(1) {
        tmp8 = 1;
        if (!listEmpty(_v_loopVar)) {
          _v = MMC_CAR(_v_loopVar);
          _v_loopVar = MMC_CDR(_v_loopVar);
          tmp8--;
        }
        if (tmp8 == 0) {
          __omcQ_24tmpVar4 = omc_BackendVariable_varCref(threadData, _v);
          *tmp6 = mmc_mk_cons(__omcQ_24tmpVar4,0);
          tmp6 = &MMC_CDR(*tmp6);
        } else if (tmp8 == 1) {
          break;
        } else {
          MMC_THROW_INTERNAL();
        }
      }
      *tmp6 = mmc_mk_nil();
      tmpMeta5 = __omcQ_24tmpVar5;
    }
    _crefs = omc_List_append__reverse(threadData, tmpMeta5, _crefs);

    tmpMeta10 = stringAppend(_message,omc_BackendDAEOptimize_warnAboutVars(threadData, _vars));
    tmpMeta9 = mmc_mk_cons(tmpMeta10, _warnings);
    _warnings = tmpMeta9;
  }
  _return: OMC_LABEL_UNUSED
  if (out_crefs) { *out_crefs = _crefs; }
  return _warnings;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_listAllIterationVariables2(threadData_t *threadData, modelica_metatype _comps, modelica_metatype _vars, modelica_metatype *out_componentRefs)
{
  modelica_metatype _warnings = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _componentRefs = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype _var_idxs = NULL;
  modelica_metatype _var_idxs2 = NULL;
  modelica_string _NONLINEAR_SYSTEM = NULL;
  modelica_string _ANALYTIC_JACOBIAN = NULL;
  modelica_string _NO_ANALYTIC_JACOBIAN = NULL;
  modelica_string _TORN_LINEAR = NULL;
  modelica_string _TORN_NONLINEAR = NULL;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta20;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _warnings = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _componentRefs = tmpMeta2;
  // _var_idxs has no default value.
  // _var_idxs2 has no default value.
  _NONLINEAR_SYSTEM = _OMC_LIT46;
  _ANALYTIC_JACOBIAN = _OMC_LIT47;
  _NO_ANALYTIC_JACOBIAN = _OMC_LIT48;
  _TORN_LINEAR = _OMC_LIT49;
  _TORN_NONLINEAR = _OMC_LIT50;
  {
    modelica_metatype _comp;
    for (tmpMeta3 = listReverse(_comps); !listEmpty(tmpMeta3); tmpMeta3=MMC_CDR(tmpMeta3))
    {
      _comp = MMC_CAR(tmpMeta3);
      
      
      { /* match expression */
        modelica_metatype tmp7_1;
        tmp7_1 = _comp;
        {
          volatile mmc_switch_type tmp7;
          int tmp8;
          tmp7 = 0;
          for (; tmp7 < 6; tmp7++) {
            switch (MMC_SWITCH_CAST(tmp7)) {
            case 0: {
              modelica_metatype tmpMeta9;
              if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,1,5) == 0) goto tmp6_end;
              tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 5));
              if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,2,0) == 0) goto tmp6_end;
              
              /* Pattern matching succeeded */
              tmpMeta[0+0] = omc_BackendDAEOptimize_listAllIterationVariables3(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_comp), 3))), _vars, _OMC_LIT46, _warnings, _componentRefs, &tmpMeta[0+1]);
              goto tmp6_done;
            }
            case 1: {
              modelica_metatype tmpMeta10;
              if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,1,5) == 0) goto tmp6_end;
              tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 5));
              if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,3,0) == 0) goto tmp6_end;
              
              /* Pattern matching succeeded */
              tmpMeta[0+0] = omc_BackendDAEOptimize_listAllIterationVariables3(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_comp), 3))), _vars, _OMC_LIT47, _warnings, _componentRefs, &tmpMeta[0+1]);
              goto tmp6_done;
            }
            case 2: {
              modelica_metatype tmpMeta11;
              if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,1,5) == 0) goto tmp6_end;
              tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 5));
              if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,4,0) == 0) goto tmp6_end;
              
              /* Pattern matching succeeded */
              tmpMeta[0+0] = omc_BackendDAEOptimize_listAllIterationVariables3(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_comp), 3))), _vars, _OMC_LIT48, _warnings, _componentRefs, &tmpMeta[0+1]);
              goto tmp6_done;
            }
            case 3: {
              modelica_metatype tmpMeta12;
              modelica_metatype tmpMeta13;
              modelica_metatype tmpMeta14;
              if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,7,4) == 0) goto tmp6_end;
              tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 2));
              tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
              tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 3));
              if (!optionNone(tmpMeta14)) goto tmp6_end;
              
              _var_idxs = tmpMeta13;
              /* Pattern matching succeeded */
              tmpMeta[0+0] = omc_BackendDAEOptimize_listAllIterationVariables3(threadData, _var_idxs, _vars, (mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_comp), 4))))?_OMC_LIT49:_OMC_LIT50), _warnings, _componentRefs, &tmpMeta[0+1]);
              goto tmp6_done;
            }
            case 4: {
              modelica_metatype tmpMeta15;
              modelica_metatype tmpMeta16;
              modelica_metatype tmpMeta17;
              modelica_metatype tmpMeta18;
              modelica_metatype tmpMeta19;
              if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,7,4) == 0) goto tmp6_end;
              tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 2));
              tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
              tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 3));
              if (optionNone(tmpMeta17)) goto tmp6_end;
              tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 1));
              tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
              
              _var_idxs = tmpMeta16;
              _var_idxs2 = tmpMeta19;
              /* Pattern matching succeeded */
              tmpMeta[0+0] = omc_BackendDAEOptimize_listAllIterationVariables3(threadData, omc_List_union(threadData, _var_idxs, _var_idxs2), _vars, (mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_comp), 4))))?_OMC_LIT49:_OMC_LIT50), _warnings, _componentRefs, &tmpMeta[0+1]);
              goto tmp6_done;
            }
            case 5: {
              
              /* Pattern matching succeeded */
              tmpMeta[0+0] = _warnings;
              tmpMeta[0+1] = _componentRefs;
              goto tmp6_done;
            }
            }
            goto tmp6_end;
            tmp6_end: ;
          }
          goto goto_5;
          goto_5:;
          MMC_THROW_INTERNAL();
          goto tmp6_done;
          tmp6_done:;
        }
      }
      _warnings = tmpMeta[0+0];
      _componentRefs = tmpMeta[0+1];
    }
  }
  _return: OMC_LABEL_UNUSED
  if (out_componentRefs) { *out_componentRefs = _componentRefs; }
  return _warnings;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_listAllIterationVariables1(threadData_t *threadData, modelica_metatype _inEqSystem, modelica_metatype *out_outComponentRef)
{
  modelica_metatype _outWarning = NULL;
  modelica_metatype _outComponentRef = NULL;
  modelica_metatype _vars = NULL;
  modelica_metatype _comps = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outWarning has no default value.
  // _outComponentRef has no default value.
  // _vars has no default value.
  // _comps has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inEqSystem;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 7));
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta3,1,3) == 0) MMC_THROW_INTERNAL();
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 4));
  _vars = tmpMeta2;
  _comps = tmpMeta4;

  _outWarning = omc_BackendDAEOptimize_listAllIterationVariables2(threadData, _comps, _vars ,&_outComponentRef);
  _return: OMC_LABEL_UNUSED
  if (out_outComponentRef) { *out_outComponentRef = _outComponentRef; }
  return _outWarning;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_listAllIterationVariables0(threadData_t *threadData, modelica_metatype _inEqs, modelica_metatype *out_outComponentRef)
{
  modelica_metatype _outWarnings = NULL;
  modelica_metatype _outComponentRef = NULL;
  modelica_metatype _warnings = NULL;
  modelica_metatype _crefs = NULL;
  modelica_metatype _warnings_accum = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _crefs_accum = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outWarnings has no default value.
  // _outComponentRef has no default value.
  // _warnings has no default value.
  // _crefs has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _warnings_accum = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _crefs_accum = tmpMeta2;
  {
    modelica_metatype _eq;
    for (tmpMeta3 = _inEqs; !listEmpty(tmpMeta3); tmpMeta3=MMC_CDR(tmpMeta3))
    {
      _eq = MMC_CAR(tmpMeta3);
      _warnings = omc_BackendDAEOptimize_listAllIterationVariables1(threadData, _eq ,&_crefs);

      tmpMeta4 = mmc_mk_cons(_warnings, _warnings_accum);
      _warnings_accum = tmpMeta4;

      tmpMeta5 = mmc_mk_cons(_crefs, _crefs_accum);
      _crefs_accum = tmpMeta5;
    }
  }

  _outWarnings = omc_List_flattenReverse(threadData, _warnings_accum);

  _outComponentRef = omc_List_flattenReverse(threadData, _crefs_accum);
  _return: OMC_LABEL_UNUSED
  if (out_outComponentRef) { *out_outComponentRef = _outComponentRef; }
  return _outWarnings;
}

DLLDirection
void omc_BackendDAEOptimize_listAllIterationVariables(threadData_t *threadData, modelica_metatype _inBackendDAE)
{
  modelica_metatype _backendDAEType = NULL;
  modelica_metatype _warnings = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _backendDAEType has no default value.
  // _warnings has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inBackendDAE;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 15));
  _backendDAEType = tmpMeta3;

  _warnings = omc_BackendDAEOptimize_listAllIterationVariables0(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inBackendDAE), 2))), NULL);

  tmpMeta4 = stringAppend(_OMC_LIT51,omc_BackendDump_printBackendDAEType2String(threadData, _backendDAEType));
  tmpMeta5 = stringAppend(tmpMeta4,_OMC_LIT52);
  tmpMeta6 = stringAppend(tmpMeta5,stringDelimitList(_warnings, _OMC_LIT45));
  omc_Error_addCompilerNotification(threadData, tmpMeta6);
  _return: OMC_LABEL_UNUSED
  return;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_applyRewriteRulesBackendShared(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  modelica_metatype _shared = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  // _shared has no default value.
  _shared = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDAE), 3)));

  omc_BackendDAEUtil_traverseBackendDAEExpsVarsWithUpdate(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 2))), boxvar_BackendDAEOptimize_traverserapplyRewriteRulesBackend, mmc_mk_boolean(0 /* false */));

  omc_BackendDAEUtil_traverseBackendDAEExpsEqns(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 6))), boxvar_BackendDAEOptimize_traverserapplyRewriteRulesBackend, mmc_mk_boolean(0 /* false */));

  omc_BackendDAEUtil_traverseBackendDAEExpsEqns(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 7))), boxvar_BackendDAEOptimize_traverserapplyRewriteRulesBackend, mmc_mk_boolean(0 /* false */));

  tmpMeta1 = mmc_mk_box3(3, &BackendDAE_BackendDAE_DAE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDAE), 2))), _shared);
  _outDAE = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserExpapplyRewriteRulesBackend(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inB, modelica_boolean *out_outB)
{
  modelica_metatype _outExp = NULL;
  modelica_boolean _outB;
  modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _outB has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _inExp;
    {
      modelica_metatype _e = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_boolean tmp6;
          modelica_metatype tmpMeta7;
          
          _e = tmp4_1;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta7 = omc_RewriteRules_rewriteBackEnd(threadData, _e, &tmp6);
          _e = tmpMeta7;
          if (1 /* true */ != tmp6) goto goto_2;
          tmpMeta[0+0] = _e;
          tmp1_c1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmp1_c1 = _inB;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outExp = tmpMeta[0+0];
  _outB = tmp1_c1;
  _return: OMC_LABEL_UNUSED
  if (out_outB) { *out_outB = _outB; }
  return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_traverserExpapplyRewriteRulesBackend(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inB, modelica_metatype *out_outB)
{
  modelica_integer tmp1;
  modelica_boolean _outB;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_inB);
  _outExp = omc_BackendDAEOptimize_traverserExpapplyRewriteRulesBackend(threadData, _inExp, tmp1, &_outB);
  /* skip box _outExp; DAE.Exp */
  if (out_outB) { *out_outB = mmc_mk_icon(_outB); }
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserapplyRewriteRulesBackend(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inB, modelica_boolean *out_outB)
{
  modelica_metatype _outExp = NULL;
  modelica_boolean _outB;
  modelica_metatype tmpMeta1;
  modelica_integer tmp2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _outB has no default value.
  /* Pattern-matching tuple assignment */
  tmpMeta3 = omc_Expression_traverseExpBottomUp(threadData, _inExp, boxvar_BackendDAEOptimize_traverserExpapplyRewriteRulesBackend, mmc_mk_boolean(_inB), &tmpMeta1);
  _outExp = tmpMeta3;
  tmp2 = mmc_unbox_integer(tmpMeta1);
  _outB = tmp2  /* pattern as ty=Boolean */;
  _return: OMC_LABEL_UNUSED
  if (out_outB) { *out_outB = _outB; }
  return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_traverserapplyRewriteRulesBackend(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inB, modelica_metatype *out_outB)
{
  modelica_integer tmp1;
  modelica_boolean _outB;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_inB);
  _outExp = omc_BackendDAEOptimize_traverserapplyRewriteRulesBackend(threadData, _inExp, tmp1, &_outB);
  /* skip box _outExp; DAE.Exp */
  if (out_outB) { *out_outB = mmc_mk_icon(_outB); }
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_applyRewriteRulesBackend0(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _inShared, modelica_boolean _inChanged, modelica_metatype *out_outShared, modelica_boolean *out_outChanged)
{
  modelica_metatype _osyst = NULL;
  modelica_metatype _outShared = NULL;
  modelica_boolean _outChanged;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _osyst = _isyst;
  _outShared = _inShared;
  // _outChanged has no default value.
  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp2_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          /* Pattern matching succeeded */
          omc_BackendDAEUtil_traverseBackendDAEExpsVarsWithUpdate(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_isyst), 2))), boxvar_BackendDAEOptimize_traverserapplyRewriteRulesBackend, mmc_mk_boolean(0 /* false */));

          omc_BackendDAEUtil_traverseBackendDAEExpsEqns(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_isyst), 3))), boxvar_BackendDAEOptimize_traverserapplyRewriteRulesBackend, mmc_mk_boolean(0 /* false */));

          omc_BackendDAEUtil_traverseBackendDAEExpsEqns(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_isyst), 10))), boxvar_BackendDAEOptimize_traverserapplyRewriteRulesBackend, mmc_mk_boolean(0 /* false */));

          _outChanged = 1 /* true */;
          goto tmp2_done;
        }
        case 1: {
          /* Pattern matching succeeded */
          _outChanged = 0 /* false */;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      tmp2_done:
      (void)tmp3;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp2_done2;
      goto_1:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp3 < 2) {
        goto tmp2_top;
      }
      MMC_THROW_INTERNAL();
      tmp2_done2:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  if (out_outShared) { *out_outShared = _outShared; }
  if (out_outChanged) { *out_outChanged = _outChanged; }
  return _osyst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_applyRewriteRulesBackend0(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _inShared, modelica_metatype _inChanged, modelica_metatype *out_outShared, modelica_metatype *out_outChanged)
{
  modelica_integer tmp1;
  modelica_boolean _outChanged;
  modelica_metatype _osyst = NULL;
  tmp1 = mmc_unbox_integer(_inChanged);
  _osyst = omc_BackendDAEOptimize_applyRewriteRulesBackend0(threadData, _isyst, _inShared, tmp1, out_outShared, &_outChanged);
  /* skip box _osyst; BackendDAE.EqSystem */
  /* skip box _outShared; BackendDAE.Shared */
  if (out_outChanged) { *out_outChanged = mmc_mk_icon(_outChanged); }
  return _osyst;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_applyRewriteRulesBackend(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  _outDAE = omc_BackendDAEUtil_mapEqSystemAndFold(threadData, _inDAE, boxvar_BackendDAEOptimize_applyRewriteRulesBackend0, mmc_mk_boolean(0 /* false */), NULL);

  _outDAE = omc_BackendDAEOptimize_applyRewriteRulesBackendShared(threadData, _outDAE);
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_moveStatesVariables(threadData_t *threadData, modelica_metatype _inVar, modelica_metatype _inTpl, modelica_metatype *out_outTpl)
{
  modelica_metatype _outVar = NULL;
  modelica_metatype _outTpl = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outVar = _inVar;
  _outTpl = _inTpl;
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _inVar;
    {
      modelica_metatype _cref = NULL;
      modelica_metatype _newVar = NULL;
      modelica_metatype _localKnowns = NULL;
      modelica_metatype _newVars = NULL;
      volatile mmc_switch_type tmp3;
      int tmp4;
      // _cref has no default value.
      // _newVar has no default value.
      // _localKnowns has no default value.
      // _newVars has no default value.
      tmp3 = 0;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,3) == 0) goto tmp2_end;
          
          _cref = tmpMeta5;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta7 = _inTpl;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
          _localKnowns = tmpMeta8;
          _newVars = tmpMeta9;

          _newVars = omc_BackendVariable_deleteVar(threadData, _cref, _newVars);

          _localKnowns = omc_BackendVariable_addVar(threadData, _inVar, _localKnowns);

          _cref = omc_ComponentReference_crefPrefixDer(threadData, _cref);

          _newVar = omc_BackendVariable_copyVarNewName(threadData, _cref, _inVar);

          _newVar = omc_BackendVariable_setVarKind(threadData, _newVar, _OMC_LIT53);

          _newVars = omc_BackendVariable_addVar(threadData, _newVar, _newVars);

          tmpMeta10 = mmc_mk_box2(0, _localKnowns, _newVars);
          _outTpl = tmpMeta10;
          goto tmp2_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  if (out_outTpl) { *out_outTpl = _outTpl; }
  return _outVar;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_replaceDerCall(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _itpl, modelica_boolean *out_tpl)
{
  modelica_metatype _outExp = NULL;
  modelica_boolean _tpl;
  modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _tpl has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _inExp;
    {
      modelica_metatype _cr = NULL;
      modelica_metatype _cref = NULL;
      modelica_metatype _ty = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _cr has no default value.
      // _cref has no default value.
      // _ty has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,1) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (3 != MMC_STRLEN(tmpMeta7) || strcmp(MMC_STRINGDATA(_OMC_LIT20), MMC_STRINGDATA(tmpMeta7)) != 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_CAR(tmpMeta8);
          tmpMeta10 = MMC_CDR(tmpMeta8);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,6,2) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
          if (!listEmpty(tmpMeta10)) goto tmp3_end;
          
          _cr = tmpMeta11;
          _ty = tmpMeta12;
          /* Pattern matching succeeded */
          _cref = omc_ComponentReference_crefPrefixDer(threadData, _cr);

          tmpMeta13 = mmc_mk_box3(9, &DAE_Exp_CREF__desc, _cref, _ty);
          _outExp = tmpMeta13;
          tmpMeta[0+0] = _outExp;
          tmp1_c1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,1,1) == 0) goto tmp3_end;
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
          if (3 != MMC_STRLEN(tmpMeta15) || strcmp(MMC_STRINGDATA(_OMC_LIT20), MMC_STRINGDATA(tmpMeta15)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta17 = stringAppend(_OMC_LIT59,omc_ExpressionDump_printExpStr(threadData, _inExp));
          tmpMeta18 = stringAppend(tmpMeta17,_OMC_LIT45);
          tmpMeta16 = mmc_mk_cons(tmpMeta18, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT58, tmpMeta16);
          goto goto_2;
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmp1_c1 = _itpl;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outExp = tmpMeta[0+0];
  _tpl = tmp1_c1;
  _return: OMC_LABEL_UNUSED
  if (out_tpl) { *out_tpl = _tpl; }
  return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_replaceDerCall(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _itpl, modelica_metatype *out_tpl)
{
  modelica_integer tmp1;
  modelica_boolean _tpl;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_itpl);
  _outExp = omc_BackendDAEOptimize_replaceDerCall(threadData, _inExp, tmp1, &_tpl);
  /* skip box _outExp; DAE.Exp */
  if (out_tpl) { *out_tpl = mmc_mk_icon(_tpl); }
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserreplaceDerCallExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _tpl, modelica_metatype *out_outTpl)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _outTpl = NULL;
  modelica_metatype _e = NULL;
  modelica_metatype _e1 = NULL;
  modelica_boolean _b;
  modelica_metatype tmpMeta1;
  modelica_integer tmp2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _outTpl has no default value.
  // _e has no default value.
  // _e1 has no default value.
  // _b has no default value.
  _e = _inExp;

  /* Pattern-matching tuple assignment */
  tmpMeta3 = omc_Expression_traverseExpBottomUp(threadData, _e, boxvar_BackendDAEOptimize_replaceDerCall, mmc_mk_boolean(0 /* false */), &tmpMeta1);
  _e1 = tmpMeta3;
  tmp2 = mmc_unbox_integer(tmpMeta1);
  _b = tmp2  /* pattern as ty=Boolean */;

  tmpMeta4 = mmc_mk_cons(_e1, MMC_REFSTRUCTLIT(mmc_nil));
  tmpMeta5 = mmc_mk_box3(5, &DAE_SymbolicOperation_SUBSTITUTION__desc, tmpMeta4, _e);
  _outTpl = omc_List_consOnTrue(threadData, _b, tmpMeta5, _tpl);

  _outExp = _e1;
  _return: OMC_LABEL_UNUSED
  if (out_outTpl) { *out_outTpl = _outTpl; }
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserreplaceDerCall(threadData_t *threadData, modelica_metatype _inEq, modelica_metatype _inVars, modelica_metatype *out_outVars)
{
  modelica_metatype _outEq = NULL;
  modelica_metatype _outVars = NULL;
  modelica_metatype _e = NULL;
  modelica_metatype _ops = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEq has no default value.
  _outVars = _inVars;
  // _e has no default value.
  // _ops has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _e = omc_BackendEquation_traverseExpsOfEquation(threadData, _inEq, boxvar_BackendDAEOptimize_traverserreplaceDerCallExp, tmpMeta1 ,&_ops);

  _outEq = omc_List_foldr(threadData, _ops, boxvar_BackendEquation_addOperation, _e);
  _return: OMC_LABEL_UNUSED
  if (out_outVars) { *out_outVars = _outVars; }
  return _outEq;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_replaceDerCallWork(threadData_t *threadData, modelica_metatype _inSyst, modelica_metatype _shared, modelica_metatype *out_oshared)
{
  modelica_metatype _osyst = NULL;
  modelica_metatype _oshared = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _osyst has no default value.
  _oshared = _shared;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inSyst;
    {
      modelica_metatype _syst = NULL;
      modelica_metatype _localKnowns = NULL;
      modelica_metatype _vars = NULL;
      modelica_metatype _eqns = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _syst has no default value.
      // _localKnowns has no default value.
      // _vars has no default value.
      // _eqns has no default value.
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _syst = tmp4_1;
          _vars = tmpMeta6;
          _eqns = tmpMeta7;
          /* Pattern matching succeeded */
          _eqns = omc_BackendEquation_traverseEquationArray__WithUpdate(threadData, _eqns, boxvar_BackendDAEOptimize_traverserreplaceDerCall, _vars ,&_vars);

          /* Pattern-matching assignment */
          tmpMeta8 = mmc_mk_box2(0, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_oshared), 3))), _vars);
          tmpMeta9 = omc_BackendVariable_traverseBackendDAEVars(threadData, _vars, boxvar_BackendDAEOptimize_moveStatesVariables, tmpMeta8);
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 1));
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
          _localKnowns = tmpMeta10;
          _vars = tmpMeta11;

          tmpMeta12 = MMC_TAGPTR(mmc_alloc_words(22));
          memcpy(MMC_UNTAGPTR(tmpMeta12), MMC_UNTAGPTR(_oshared), 22*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta12))[3] = _localKnowns;
          _oshared = tmpMeta12;

          tmpMeta13 = MMC_TAGPTR(mmc_alloc_words(11));
          memcpy(MMC_UNTAGPTR(tmpMeta13), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta13))[3] = _eqns;
          _syst = tmpMeta13;

          tmpMeta14 = MMC_TAGPTR(mmc_alloc_words(11));
          memcpy(MMC_UNTAGPTR(tmpMeta14), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta14))[2] = _vars;
          _syst = tmpMeta14;
          tmpMeta1 = _syst;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _osyst = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  if (out_oshared) { *out_oshared = _oshared; }
  return _osyst;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_replaceDerCalls(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  _outDAE = omc_BackendDAEUtil_mapEqSystem(threadData, _inDAE, boxvar_BackendDAEOptimize_replaceDerCallWork);
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_introDerAlias(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _itpl, modelica_metatype *out_tpl)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _tpl = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _tpl has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inExp;
    tmp4_2 = _itpl;
    {
      modelica_metatype _vars = NULL;
      modelica_metatype _cr = NULL;
      modelica_metatype _cref = NULL;
      modelica_metatype _ty = NULL;
      modelica_string _str = NULL;
      modelica_metatype _shared = NULL;
      modelica_metatype _v = NULL;
      modelica_metatype _v1 = NULL;
      modelica_boolean _addVar;
      modelica_metatype _eqnLst = NULL;
      modelica_integer _numVars;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _vars has no default value.
      // _cr has no default value.
      // _cref has no default value.
      // _ty has no default value.
      // _str has no default value.
      // _shared has no default value.
      // _v has no default value.
      // _v1 has no default value.
      // _addVar has no default value.
      // _eqnLst has no default value.
      // _numVars has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_integer tmp17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_boolean tmp21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,1) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (3 != MMC_STRLEN(tmpMeta7) || strcmp(MMC_STRINGDATA(_OMC_LIT20), MMC_STRINGDATA(tmpMeta7)) != 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_CAR(tmpMeta8);
          tmpMeta10 = MMC_CDR(tmpMeta8);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,6,2) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
          if (!listEmpty(tmpMeta10)) goto tmp3_end;
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp17 = mmc_unbox_integer(tmpMeta16);
          
          _cr = tmpMeta11;
          _ty = tmpMeta12;
          _vars = tmpMeta13;
          _eqnLst = tmpMeta14;
          _shared = tmpMeta15;
          _addVar = tmp17  /* pattern as ty=Boolean */;
          /* Pattern matching succeeded */
          _v = omc_BackendVariable_getVarSingle(threadData, _cr, _vars, NULL);

          _cref = omc_BackendVariable_varCref(threadData, _v);

          _v1 = omc_BackendVariable_createAliasDerVar(threadData, _cref);

          _v1 = omc_BackendVariable_mergeNominalAttribute(threadData, _v, _v1, 0 /* false */);

          _cref = omc_BackendVariable_varCref(threadData, _v1);

          tmpMeta18 = mmc_mk_box3(9, &DAE_Exp_CREF__desc, _cref, _ty);
          _outExp = tmpMeta18;

          if(_addVar)
          {
            _numVars = omc_BackendVariable_varsSize(threadData, _vars);

            _vars = omc_BackendVariable_addVar(threadData, _v1, _vars);

            tmp21 = (modelica_boolean)(_numVars < omc_BackendVariable_varsSize(threadData, _vars));
            if(tmp21)
            {
              tmpMeta20 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _inExp, _outExp, _OMC_LIT9, _OMC_LIT41);
              tmpMeta19 = mmc_mk_cons(tmpMeta20, _eqnLst);
              tmpMeta22 = tmpMeta19;
            }
            else
            {
              tmpMeta22 = _eqnLst;
            }
            _eqnLst = tmpMeta22;
          }
          tmpMeta23 = mmc_mk_box5(0, _vars, _eqnLst, _shared, mmc_mk_boolean(_addVar), mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _outExp;
          tmpMeta[0+1] = tmpMeta23;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta24,1,1) == 0) goto tmp3_end;
          tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 2));
          if (3 != MMC_STRLEN(tmpMeta25) || strcmp(MMC_STRINGDATA(_OMC_LIT20), MMC_STRINGDATA(tmpMeta25)) != 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta26 = stringAppend(_OMC_LIT60,omc_ExpressionDump_printExpStr(threadData, _inExp));
          tmpMeta27 = stringAppend(tmpMeta26,_OMC_LIT45);
          _str = tmpMeta27;

          tmpMeta28 = mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT58, tmpMeta28);
          goto goto_2;
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _itpl;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outExp = tmpMeta[0+0];
  _tpl = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_tpl) { *out_tpl = _tpl; }
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserintroduceDerAliasExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _tpl, modelica_metatype *out_outTpl)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _outTpl = NULL;
  modelica_metatype _e = NULL;
  modelica_metatype _e1 = NULL;
  modelica_metatype _ext_arg = NULL;
  modelica_metatype _vars = NULL;
  modelica_metatype _ops = NULL;
  modelica_metatype _funcs = NULL;
  modelica_boolean _b;
  modelica_boolean _addVars;
  modelica_metatype _shared = NULL;
  modelica_metatype _eqnLst = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_integer tmp7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_integer tmp14;
  modelica_metatype tmpMeta15;
  modelica_metatype tmpMeta16;
  modelica_metatype tmpMeta17;
  modelica_metatype tmpMeta18;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _outTpl has no default value.
  // _e has no default value.
  // _e1 has no default value.
  // _ext_arg has no default value.
  // _vars has no default value.
  // _ops has no default value.
  // _funcs has no default value.
  // _b has no default value.
  // _addVars has no default value.
  // _shared has no default value.
  // _eqnLst has no default value.
  _e = _inExp;

  /* Pattern-matching assignment */
  tmpMeta1 = _tpl;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 4));
  tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 5));
  tmp7 = mmc_unbox_integer(tmpMeta6);
  _vars = tmpMeta2;
  _eqnLst = tmpMeta3;
  _shared = tmpMeta4;
  _ops = tmpMeta5;
  _addVars = tmp7  /* pattern as ty=Boolean */;

  tmpMeta8 = mmc_mk_box5(0, _vars, _eqnLst, _shared, mmc_mk_boolean(_addVars), mmc_mk_boolean(0 /* false */));
  _ext_arg = tmpMeta8;

  /* Pattern-matching tuple assignment */
  tmpMeta15 = omc_Expression_traverseExpBottomUp(threadData, _e, boxvar_BackendDAEOptimize_introDerAlias, _ext_arg, &tmpMeta9);
  _e1 = tmpMeta15;
  tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 1));
  tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
  tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
  tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 5));
  tmp14 = mmc_unbox_integer(tmpMeta13);
  _vars = tmpMeta10;
  _eqnLst = tmpMeta11;
  _shared = tmpMeta12;
  _b = tmp14  /* pattern as ty=Boolean */;

  tmpMeta16 = mmc_mk_cons(_e1, MMC_REFSTRUCTLIT(mmc_nil));
  tmpMeta17 = mmc_mk_box3(5, &DAE_SymbolicOperation_SUBSTITUTION__desc, tmpMeta16, _e);
  _ops = omc_List_consOnTrue(threadData, _b, tmpMeta17, _ops);

  _outExp = _e1;

  tmpMeta18 = mmc_mk_box5(0, _vars, _eqnLst, _shared, _ops, mmc_mk_boolean(_addVars));
  _outTpl = tmpMeta18;
  _return: OMC_LABEL_UNUSED
  if (out_outTpl) { *out_outTpl = _outTpl; }
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserintroduceDerAliasEquation(threadData_t *threadData, modelica_metatype _inEq, modelica_metatype _tpl, modelica_metatype *out_outTpl)
{
  modelica_metatype _outEq = NULL;
  modelica_metatype _outTpl = NULL;
  modelica_metatype _e = NULL;
  modelica_metatype _vars = NULL;
  modelica_boolean _b;
  modelica_metatype _ops = NULL;
  modelica_metatype _shared = NULL;
  modelica_metatype _eqnLst = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_integer tmp6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEq has no default value.
  // _outTpl has no default value.
  // _e has no default value.
  // _vars has no default value.
  // _b has no default value.
  // _ops has no default value.
  // _shared has no default value.
  // _eqnLst has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _tpl;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 4));
  tmp6 = mmc_unbox_integer(tmpMeta5);
  _vars = tmpMeta2;
  _eqnLst = tmpMeta3;
  _shared = tmpMeta4;
  _b = tmp6  /* pattern as ty=Boolean */;

  /* Pattern-matching tuple assignment */
  tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta13 = mmc_mk_box5(0, _vars, _eqnLst, _shared, tmpMeta12, mmc_mk_boolean(_b));
  tmpMeta14 = omc_BackendEquation_traverseExpsOfEquation(threadData, _inEq, boxvar_BackendDAEOptimize_traverserintroduceDerAliasExp, tmpMeta13, &tmpMeta7);
  _e = tmpMeta14;
  tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
  tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
  tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
  tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
  _vars = tmpMeta8;
  _eqnLst = tmpMeta9;
  _shared = tmpMeta10;
  _ops = tmpMeta11;

  _outEq = omc_List_foldr(threadData, _ops, boxvar_BackendEquation_addOperation, _e);

  tmpMeta15 = mmc_mk_box4(0, _vars, _eqnLst, _shared, mmc_mk_boolean(_b));
  _outTpl = tmpMeta15;
  _return: OMC_LABEL_UNUSED
  if (out_outTpl) { *out_outTpl = _outTpl; }
  return _outEq;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_introduceDerAliasWork(threadData_t *threadData, modelica_metatype _inSyst, modelica_metatype _shared, modelica_metatype *out_oshared)
{
  modelica_metatype _osyst = NULL;
  modelica_metatype _oshared = NULL;
  modelica_metatype _vars = NULL;
  modelica_metatype _eqns = NULL;
  modelica_metatype _eqnsList = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _osyst has no default value.
  _oshared = _shared;
  // _vars has no default value.
  // _eqns has no default value.
  // _eqnsList has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inSyst;
    {
      modelica_metatype _syst = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _syst has no default value.
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _syst = tmp4_1;
          _vars = tmpMeta6;
          _eqns = tmpMeta7;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta12 = mmc_mk_box4(0, _vars, tmpMeta11, _shared, mmc_mk_boolean(1 /* true */));
          tmpMeta13 = omc_BackendEquation_traverseEquationArray__WithUpdate(threadData, _eqns, boxvar_BackendDAEOptimize_traverserintroduceDerAliasEquation, tmpMeta12, &tmpMeta8);
          _eqns = tmpMeta13;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
          _vars = tmpMeta9;
          _eqnsList = tmpMeta10;

          _eqns = omc_BackendEquation_addList(threadData, _eqnsList, _eqns);

          tmpMeta14 = MMC_TAGPTR(mmc_alloc_words(11));
          memcpy(MMC_UNTAGPTR(tmpMeta14), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta14))[3] = _eqns;
          _syst = tmpMeta14;

          tmpMeta15 = MMC_TAGPTR(mmc_alloc_words(11));
          memcpy(MMC_UNTAGPTR(tmpMeta15), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta15))[2] = _vars;
          _syst = tmpMeta15;
          tmpMeta1 = _syst;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _osyst = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  if (out_oshared) { *out_oshared = _oshared; }
  return _osyst;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_introduceDerAlias(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  _outDAE = omc_BackendDAEUtil_mapEqSystem(threadData, _inDAE, boxvar_BackendDAEOptimize_introduceDerAliasWork);
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyLoops__SplitFactors(threadData_t *threadData, modelica_metatype _var_lst, modelica_metatype _inExp, modelica_metatype *out_noLoopTerms)
{
  modelica_metatype _loopTerms = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _noLoopTerms = NULL;
  modelica_metatype _tmp_loopTerms = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _loopTerms = tmpMeta1;
  // _noLoopTerms has no default value.
  // _tmp_loopTerms has no default value.
  _noLoopTerms = omc_Expression_factors(threadData, _inExp);

  {
    modelica_metatype _cr;
    for (tmpMeta2 = _var_lst; !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
    {
      _cr = MMC_CAR(tmpMeta2);
      if(listEmpty(_noLoopTerms))
      {
        break;
      }
      else
      {
        _tmp_loopTerms = omc_List_split1OnTrue(threadData, _noLoopTerms, boxvar_Expression_expHasCrefNoPreOrStart, _cr ,&_noLoopTerms);

        _loopTerms = listAppend(_tmp_loopTerms, _loopTerms);
      }
    }
  }
  _return: OMC_LABEL_UNUSED
  if (out_noLoopTerms) { *out_noLoopTerms = _noLoopTerms; }
  return _loopTerms;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_simplifyLoops__SplitTerms(threadData_t *threadData, modelica_metatype _var_lst, modelica_metatype _inExp, modelica_metatype *out_noLoopTerms)
{
  modelica_metatype _loopTerms = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _noLoopTerms = NULL;
  modelica_metatype _tmp_loopTerms = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _loopTerms = tmpMeta1;
  // _noLoopTerms has no default value.
  // _tmp_loopTerms has no default value.
  _noLoopTerms = omc_Expression_terms(threadData, _inExp);

  {
    modelica_metatype _cr;
    for (tmpMeta2 = _var_lst; !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
    {
      _cr = MMC_CAR(tmpMeta2);
      if(listEmpty(_noLoopTerms))
      {
        break;
      }
      else
      {
        _tmp_loopTerms = omc_List_split1OnTrue(threadData, _noLoopTerms, boxvar_Expression_expHasCrefNoPreOrStart, _cr ,&_noLoopTerms);

        _loopTerms = listAppend(_tmp_loopTerms, _loopTerms);
      }
    }
  }
  _return: OMC_LABEL_UNUSED
  if (out_noLoopTerms) { *out_noLoopTerms = _noLoopTerms; }
  return _loopTerms;
}

PROTECTED_FUNCTION_STATIC modelica_boolean omc_BackendDAEOptimize_simplifyLoopExpHelper(threadData_t *threadData, modelica_boolean _update, modelica_boolean _update_, modelica_boolean _para, modelica_metatype _ass1_, modelica_metatype _ass2_, modelica_metatype _inVars, modelica_metatype _inEqns, modelica_integer _inIndex, modelica_integer _ii, modelica_metatype _inCompOrders, modelica_metatype *out_ass1, modelica_metatype *out_ass2, modelica_integer *out_outIndx, modelica_metatype *out_outCompOrder)
{
  modelica_boolean _outUpdate;
  modelica_metatype _ass1 = NULL;
  modelica_metatype _ass2 = NULL;
  modelica_integer _outIndx;
  modelica_metatype _outCompOrder = NULL;
  modelica_integer _ne;
  modelica_integer _nv;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outUpdate = _update_;
  _ass1 = _ass1_;
  _ass2 = _ass2_;
  _outIndx = _inIndex;
  _outCompOrder = _inCompOrders;
  // _ne has no default value.
  // _nv has no default value.
  if(_update)
  {
    _outIndx = ((modelica_integer) 1) + _outIndx;

    _outUpdate = _update;

    if((!_para))
    {
      _ne = omc_ExpandableArray_getNumberOfElements(threadData, _inEqns);

      /* Pattern-matching assignment */
      tmpMeta1 = _inVars;
      tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 5));
      tmp3 = mmc_unbox_integer(tmpMeta2);
      _nv = tmp3  /* pattern as ty=Integer */;

      tmpMeta4 = mmc_mk_cons(mmc_mk_integer(_ne), _ass1);
      _ass1 = tmpMeta4;

      tmpMeta5 = mmc_mk_cons(mmc_mk_integer(_nv), _ass2);
      _ass2 = tmpMeta5;

      tmpMeta6 = mmc_mk_cons(mmc_mk_integer(_ii), _outCompOrder);
      _outCompOrder = tmpMeta6;
    }
  }
  _return: OMC_LABEL_UNUSED
  if (out_ass1) { *out_ass1 = _ass1; }
  if (out_ass2) { *out_ass2 = _ass2; }
  if (out_outIndx) { *out_outIndx = _outIndx; }
  if (out_outCompOrder) { *out_outCompOrder = _outCompOrder; }
  return _outUpdate;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_simplifyLoopExpHelper(threadData_t *threadData, modelica_metatype _update, modelica_metatype _update_, modelica_metatype _para, modelica_metatype _ass1_, modelica_metatype _ass2_, modelica_metatype _inVars, modelica_metatype _inEqns, modelica_metatype _inIndex, modelica_metatype _ii, modelica_metatype _inCompOrders, modelica_metatype *out_ass1, modelica_metatype *out_ass2, modelica_metatype *out_outIndx, modelica_metatype *out_outCompOrder)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer tmp3;
  modelica_integer tmp4;
  modelica_integer tmp5;
  modelica_integer _outIndx;
  modelica_boolean _outUpdate;
  modelica_metatype out_outUpdate;
  tmp1 = mmc_unbox_integer(_update);
  tmp2 = mmc_unbox_integer(_update_);
  tmp3 = mmc_unbox_integer(_para);
  tmp4 = mmc_unbox_integer(_inIndex);
  tmp5 = mmc_unbox_integer(_ii);
  _outUpdate = omc_BackendDAEOptimize_simplifyLoopExpHelper(threadData, tmp1, tmp2, tmp3, _ass1_, _ass2_, _inVars, _inEqns, tmp4, tmp5, _inCompOrders, out_ass1, out_ass2, &_outIndx, out_outCompOrder);
  out_outUpdate = mmc_mk_icon(_outUpdate);
  /* skip box _ass1; list<#Integer> */
  /* skip box _ass2; list<#Integer> */
  if (out_outIndx) { *out_outIndx = mmc_mk_icon(_outIndx); }
  /* skip box _outCompOrder; list<#Integer> */
  return out_outUpdate;
}

DLLDirection
modelica_integer omc_BackendDAEOptimize_simplifyLoopExp(threadData_t *threadData, modelica_integer _inIndx, modelica_metatype _inVars, modelica_metatype _inEqns, modelica_metatype _inShared, modelica_metatype _var_lst, modelica_metatype _inExp, modelica_metatype _ass1_, modelica_metatype _ass2_, modelica_boolean _simDAE, modelica_boolean _useTmpVars, modelica_integer _ii, modelica_metatype _inCompOrders, modelica_string _tmpVarName, modelica_boolean _noPara, modelica_metatype *out_outVars, modelica_metatype *out_outEqns, modelica_metatype *out_outShared, modelica_boolean *out_outUpdate, modelica_metatype *out_outExp, modelica_metatype *out_ass1, modelica_metatype *out_ass2, modelica_metatype *out_outCompOrder)
{
  modelica_integer _outIndx;
  modelica_metatype _outVars = NULL;
  modelica_metatype _outEqns = NULL;
  modelica_metatype _outShared = NULL;
  modelica_boolean _outUpdate;
  modelica_metatype _outExp = NULL;
  modelica_metatype _ass1 = NULL;
  modelica_metatype _ass2 = NULL;
  modelica_metatype _outCompOrder = NULL;
  modelica_metatype _loopTerms = NULL;
  modelica_metatype _noLoopTerms = NULL;
  modelica_metatype _loopFactors = NULL;
  modelica_metatype _noLoopFactors = NULL;
  modelica_metatype _loopTermsUpdatedFactors = NULL;
  modelica_metatype _loopTerms2 = NULL;
  modelica_metatype _noLoopTerms2 = NULL;
  modelica_metatype _loopFacotrsUpdatedTerms = NULL;
  modelica_metatype _res = NULL;
  modelica_metatype _noLoopTerm = NULL;
  modelica_metatype _loopTerm = NULL;
  modelica_metatype _noLoopFactor = NULL;
  modelica_metatype _noLoopTerm2 = NULL;
  modelica_metatype _loopTerm2 = NULL;
  modelica_metatype _e1 = NULL;
  modelica_metatype _e2 = NULL;
  modelica_metatype _con = NULL;
  modelica_boolean _update;
  modelica_metatype _op = NULL;
  modelica_boolean _para;
  modelica_integer _ne;
  modelica_integer _nv;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_boolean tmp4 = 0;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  modelica_metatype tmpMeta16;
  modelica_metatype tmpMeta17;
  modelica_metatype tmpMeta18;
  modelica_metatype tmpMeta19;
  modelica_metatype tmpMeta20;
  modelica_metatype tmpMeta21;
  modelica_metatype tmpMeta22;
  modelica_metatype tmpMeta23;
  modelica_metatype tmpMeta24;
  modelica_metatype tmpMeta25;
  modelica_metatype tmpMeta26;
  modelica_metatype tmpMeta27;
  modelica_metatype tmpMeta28;
  modelica_metatype tmpMeta29;
  modelica_metatype tmpMeta30;
  modelica_metatype tmpMeta31;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outIndx = _inIndx;
  _outVars = _inVars;
  _outEqns = _inEqns;
  _outShared = _inShared;
  _outUpdate = 0 /* false */;
  _outExp = _inExp;
  _ass1 = _ass1_;
  _ass2 = _ass2_;
  _outCompOrder = _inCompOrders;
  // _loopTerms has no default value.
  // _noLoopTerms has no default value.
  // _loopFactors has no default value.
  // _noLoopFactors has no default value.
  // _loopTermsUpdatedFactors has no default value.
  // _loopTerms2 has no default value.
  // _noLoopTerms2 has no default value.
  // _loopFacotrsUpdatedTerms has no default value.
  // _res has no default value.
  // _noLoopTerm has no default value.
  // _loopTerm has no default value.
  // _noLoopFactor has no default value.
  // _noLoopTerm2 has no default value.
  // _loopTerm2 has no default value.
  // _e1 has no default value.
  // _e2 has no default value.
  // _con has no default value.
  // _update has no default value.
  // _op has no default value.
  // _para has no default value.
  // _ne has no default value.
  // _nv has no default value.
  _loopTerms = omc_BackendDAEOptimize_simplifyLoops__SplitTerms(threadData, _var_lst, _outExp ,&_noLoopTerms);

  _noLoopTerm = omc_ExpressionSimplify_simplify1(threadData, omc_Expression_makeSum1(threadData, _noLoopTerms, 0 /* false */), NULL);

  if((_useTmpVars && _simDAE))
  {
    tmpMeta1 = stringAppend(_tmpVarName,_OMC_LIT62);
    _noLoopTerm = omc_BackendEquation_makeTmpEqnForExp(threadData, _noLoopTerm, tmpMeta1, omc_System_tmpTickIndex(threadData, ((modelica_integer) 4)), _outEqns, _outVars, _outShared, 0 /* false */ ,&_outEqns ,&_outVars ,&_outShared ,&_update ,&_para);

    _outUpdate = omc_BackendDAEOptimize_simplifyLoopExpHelper(threadData, _update, _outUpdate, _para, _ass1, _ass2, _outVars, _outEqns, _outIndx, _ii, _outCompOrder ,&_ass1 ,&_ass2 ,&_outIndx ,&_outCompOrder);
  }

  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _loopTermsUpdatedFactors = tmpMeta2;

  {
    modelica_metatype _factor;
    for (tmpMeta3 = _loopTerms; !listEmpty(tmpMeta3); tmpMeta3=MMC_CDR(tmpMeta3))
    {
      _factor = MMC_CAR(tmpMeta3);
      _loopFactors = omc_BackendDAEOptimize_simplifyLoops__SplitFactors(threadData, _var_lst, _factor ,&_noLoopFactors);

      _noLoopFactor = omc_ExpressionSimplify_simplify1(threadData, omc_Expression_makeProductLst(threadData, _noLoopFactors), NULL);

      if((_useTmpVars && _simDAE))
      {
        { /* match expression */
          modelica_metatype tmp7_1;
          tmp7_1 = _noLoopFactor;
          {
            volatile mmc_switch_type tmp7;
            int tmp8;
            tmp7 = 0;
            for (; tmp7 < 3; tmp7++) {
              switch (MMC_SWITCH_CAST(tmp7)) {
              case 0: {
                modelica_metatype tmpMeta9;
                if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,7,3) == 0) goto tmp6_end;
                tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 3));
                if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,3,1) == 0) goto tmp6_end;
                
                /* Pattern matching succeeded */
                tmp4 = 1 /* true */;
                goto tmp6_done;
              }
              case 1: {
                modelica_metatype tmpMeta10;
                if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,7,3) == 0) goto tmp6_end;
                tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 3));
                if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,4,1) == 0) goto tmp6_end;
                
                /* Pattern matching succeeded */
                tmp4 = 1 /* true */;
                goto tmp6_done;
              }
              case 2: {
                
                /* Pattern matching succeeded */
                tmp4 = 0 /* false */;
                goto tmp6_done;
              }
              }
              goto tmp6_end;
              tmp6_end: ;
            }
            goto goto_5;
            goto_5:;
            MMC_THROW_INTERNAL();
            goto tmp6_done;
            tmp6_done:;
          }
        }
        if(tmp4)
        {
          /* Pattern-matching assignment */
          tmpMeta11 = _noLoopFactor;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,7,3) == 0) MMC_THROW_INTERNAL();
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 3));
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 4));
          _e1 = tmpMeta12;
          _op = tmpMeta13;
          _e2 = tmpMeta14;

          _e1 = omc_BackendEquation_makeTmpEqnForExp(threadData, _e1, _OMC_LIT64, (_simDAE?_outIndx:(-_outIndx)), _outEqns, _outVars, _outShared, _noPara ,&_outEqns ,&_outVars ,&_outShared ,&_update ,&_para);

          _outUpdate = omc_BackendDAEOptimize_simplifyLoopExpHelper(threadData, _update, _outUpdate, _para, _ass1, _ass2, _outVars, _outEqns, _outIndx, _ii, _outCompOrder ,&_ass1 ,&_ass2 ,&_outIndx ,&_outCompOrder);

          _e2 = omc_BackendEquation_makeTmpEqnForExp(threadData, _e2, _OMC_LIT64, (_simDAE?_outIndx:(-_outIndx)), _outEqns, _outVars, _outShared, _noPara ,&_outEqns ,&_outVars ,&_outShared ,&_update ,&_para);

          _outUpdate = omc_BackendDAEOptimize_simplifyLoopExpHelper(threadData, _update, _outUpdate, _para, _ass1, _ass2, _outVars, _outEqns, _outIndx, _ii, _outCompOrder ,&_ass1 ,&_ass2 ,&_outIndx ,&_outCompOrder);

          tmpMeta15 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, _op, _e2);
          _noLoopFactor = tmpMeta15;
        }
        else
        {
          tmpMeta16 = stringAppend(_tmpVarName,_OMC_LIT63);
          _noLoopFactor = omc_BackendEquation_makeTmpEqnForExp(threadData, _noLoopFactor, tmpMeta16, (_simDAE?_outIndx:(-_outIndx)), _outEqns, _outVars, _outShared, 0 /* false */ ,&_outEqns ,&_outVars ,&_outShared ,&_update ,&_para);

          _outUpdate = omc_BackendDAEOptimize_simplifyLoopExpHelper(threadData, _update, _outUpdate, _para, _ass1, _ass2, _outVars, _outEqns, _outIndx, _ii, _outCompOrder ,&_ass1 ,&_ass2 ,&_outIndx ,&_outCompOrder);
        }
      }

      tmpMeta17 = MMC_REFSTRUCTLIT(mmc_nil);
      _loopFacotrsUpdatedTerms = tmpMeta17;

      {
        modelica_metatype _term;
        for (tmpMeta18 = _loopFactors; !listEmpty(tmpMeta18); tmpMeta18=MMC_CDR(tmpMeta18))
        {
          _term = MMC_CAR(tmpMeta18);
          _res = _term;

          if(omc_Expression_isBinary(threadData, _res))
          {
            /* Pattern-matching assignment */
            tmpMeta19 = _res;
            if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,7,3) == 0) MMC_THROW_INTERNAL();
            tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 3));
            _op = tmpMeta20;

            if(((omc_Expression_isAddOrSub(threadData, _op) || omc_Expression_isMulOrDiv(threadData, _op)) || omc_Expression_isPow(threadData, _op)))
            {
              if((!omc_Expression_expEqual(threadData, _res, _inExp)))
              {
                if((omc_Expression_isDiv(threadData, _op) || omc_Expression_isPow(threadData, _op)))
                {
                  /* Pattern-matching assignment */
                  tmpMeta21 = _res;
                  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta21,7,3) == 0) MMC_THROW_INTERNAL();
                  tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 2));
                  tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 3));
                  tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 4));
                  _e1 = tmpMeta22;
                  _op = tmpMeta23;
                  _e2 = tmpMeta24;

                  _outIndx = omc_BackendDAEOptimize_simplifyLoopExp(threadData, _outIndx, _outVars, _outEqns, _outShared, _var_lst, _e1, _ass1, _ass2, _simDAE, _useTmpVars, _ii, _outCompOrder, _OMC_LIT61, 0 /* false */ ,&_outVars ,&_outEqns ,&_outShared ,&_update ,&_e1 ,&_ass1 ,&_ass2 ,&_outCompOrder);

                  _outUpdate = (_update || _outUpdate);

                  _outIndx = omc_BackendDAEOptimize_simplifyLoopExp(threadData, _outIndx, _outVars, _outEqns, _outShared, _var_lst, _e2, _ass1, _ass2, _simDAE, _useTmpVars, _ii, _outCompOrder, _OMC_LIT61, 0 /* false */ ,&_outVars ,&_outEqns ,&_outShared ,&_update ,&_e2 ,&_ass1 ,&_ass2 ,&_outCompOrder);

                  _outUpdate = (_update || _outUpdate);

                  _e2 = omc_ExpressionSimplify_simplify1(threadData, _e2, NULL);

                  tmpMeta25 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, _op, _e2);
                  _res = tmpMeta25;
                }
                else
                {
                  _outIndx = omc_BackendDAEOptimize_simplifyLoopExp(threadData, _outIndx, _outVars, _outEqns, _outShared, _var_lst, _res, _ass1, _ass2, _simDAE, _useTmpVars, _ii, _outCompOrder, _OMC_LIT61, 0 /* false */ ,&_outVars ,&_outEqns ,&_outShared ,&_update ,&_res ,&_ass1 ,&_ass2 ,&_outCompOrder);

                  _outUpdate = (_update || _outUpdate);
                }
              }
            }
          }

          tmpMeta26 = mmc_mk_cons(_res, _loopFacotrsUpdatedTerms);
          _loopFacotrsUpdatedTerms = tmpMeta26;
        }
      }

      tmpMeta29 = mmc_mk_cons(_noLoopFactor, _loopFacotrsUpdatedTerms);
      tmpMeta28 = mmc_mk_cons(omc_Expression_makeProductLst(threadData, tmpMeta29), _loopTermsUpdatedFactors);
      _loopTermsUpdatedFactors = tmpMeta28;
    }
  }

  tmpMeta31 = mmc_mk_cons(_noLoopTerm, _loopTermsUpdatedFactors);
  _outExp = omc_ExpressionSimplify_simplify(threadData, omc_Expression_makeSum1(threadData, tmpMeta31, 1 /* true */), NULL);
  _return: OMC_LABEL_UNUSED
  if (out_outVars) { *out_outVars = _outVars; }
  if (out_outEqns) { *out_outEqns = _outEqns; }
  if (out_outShared) { *out_outShared = _outShared; }
  if (out_outUpdate) { *out_outUpdate = _outUpdate; }
  if (out_outExp) { *out_outExp = _outExp; }
  if (out_ass1) { *out_ass1 = _ass1; }
  if (out_ass2) { *out_ass2 = _ass2; }
  if (out_outCompOrder) { *out_outCompOrder = _outCompOrder; }
  return _outIndx;
}
modelica_metatype boxptr_BackendDAEOptimize_simplifyLoopExp(threadData_t *threadData, modelica_metatype _inIndx, modelica_metatype _inVars, modelica_metatype _inEqns, modelica_metatype _inShared, modelica_metatype _var_lst, modelica_metatype _inExp, modelica_metatype _ass1_, modelica_metatype _ass2_, modelica_metatype _simDAE, modelica_metatype _useTmpVars, modelica_metatype _ii, modelica_metatype _inCompOrders, modelica_metatype _tmpVarName, modelica_metatype _noPara, modelica_metatype *out_outVars, modelica_metatype *out_outEqns, modelica_metatype *out_outShared, modelica_metatype *out_outUpdate, modelica_metatype *out_outExp, modelica_metatype *out_ass1, modelica_metatype *out_ass2, modelica_metatype *out_outCompOrder)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer tmp3;
  modelica_integer tmp4;
  modelica_integer tmp5;
  modelica_boolean _outUpdate;
  modelica_integer _outIndx;
  modelica_metatype out_outIndx;
  tmp1 = mmc_unbox_integer(_inIndx);
  tmp2 = mmc_unbox_integer(_simDAE);
  tmp3 = mmc_unbox_integer(_useTmpVars);
  tmp4 = mmc_unbox_integer(_ii);
  tmp5 = mmc_unbox_integer(_noPara);
  _outIndx = omc_BackendDAEOptimize_simplifyLoopExp(threadData, tmp1, _inVars, _inEqns, _inShared, _var_lst, _inExp, _ass1_, _ass2_, tmp2, tmp3, tmp4, _inCompOrders, _tmpVarName, tmp5, out_outVars, out_outEqns, out_outShared, &_outUpdate, out_outExp, out_ass1, out_ass2, out_outCompOrder);
  out_outIndx = mmc_mk_icon(_outIndx);
  /* skip box _outVars; BackendDAE.Variables */
  /* skip box _outEqns; ExpandableArray<BackendDAE.Equation> */
  /* skip box _outShared; BackendDAE.Shared */
  if (out_outUpdate) { *out_outUpdate = mmc_mk_icon(_outUpdate); }
  /* skip box _outExp; DAE.Exp */
  /* skip box _ass1; list<#Integer> */
  /* skip box _ass2; list<#Integer> */
  /* skip box _outCompOrder; list<#Integer> */
  return out_outIndx;
}

PROTECTED_FUNCTION_STATIC modelica_integer omc_BackendDAEOptimize_simplifyLoopEqn(threadData_t *threadData, modelica_integer _inIndx, modelica_metatype _inVars, modelica_metatype _inEqns, modelica_metatype _inShared, modelica_metatype _var_lst, modelica_metatype _inEqn, modelica_metatype _ass1_, modelica_metatype _ass2_, modelica_boolean _simDAE, modelica_integer _ii, modelica_metatype _inCompOrders, modelica_metatype *out_outVars, modelica_metatype *out_outEqns, modelica_metatype *out_outShared, modelica_boolean *out_outUpdate, modelica_metatype *out_outEqn, modelica_metatype *out_ass1, modelica_metatype *out_ass2, modelica_metatype *out_outCompOrder)
{
  modelica_integer _outIndx;
  modelica_metatype _outVars = NULL;
  modelica_metatype _outEqns = NULL;
  modelica_metatype _outShared = NULL;
  modelica_boolean _outUpdate;
  modelica_metatype _outEqn = NULL;
  modelica_metatype _ass1 = NULL;
  modelica_metatype _ass2 = NULL;
  modelica_metatype _outCompOrder = NULL;
  modelica_metatype _rhs = NULL;
  modelica_metatype _lhs = NULL;
  modelica_metatype _e = NULL;
  modelica_boolean _update_lhs;
  modelica_boolean _update_rhs;
  modelica_metatype _loopTerms_lhs = NULL;
  modelica_metatype _noLoopTerms_lhs = NULL;
  modelica_metatype _loopTerms_rhs = NULL;
  modelica_metatype _noLoopTerms_rhs = NULL;
  modelica_boolean _useTmpVars;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outIndx = _inIndx;
  _outVars = _inVars;
  _outEqns = _inEqns;
  _outShared = _inShared;
  _outUpdate = 0 /* false */;
  _outEqn = _inEqn;
  _ass1 = _ass1_;
  _ass2 = _ass2_;
  _outCompOrder = _inCompOrders;
  // _rhs has no default value.
  // _lhs has no default value.
  // _e has no default value.
  // _update_lhs has no default value.
  // _update_rhs has no default value.
  // _loopTerms_lhs has no default value.
  // _noLoopTerms_lhs has no default value.
  // _loopTerms_rhs has no default value.
  // _noLoopTerms_rhs has no default value.
  _useTmpVars = (omc_Flags_getConfigInt(threadData, _OMC_LIT87) > ((modelica_integer) 1));
  if(omc_BackendEquation_isAlgorithm(threadData, _outEqn))
  {
    goto _return;
  }

  _lhs = omc_BackendEquation_getEquationLHS(threadData, _outEqn);

  if((!omc_Types_isIntegerOrRealOrSubTypeOfEither(threadData, omc_Expression_typeof(threadData, _lhs))))
  {
    goto _return;
  }

  _rhs = omc_BackendEquation_getEquationRHS(threadData, _outEqn);

  _loopTerms_lhs = omc_BackendDAEOptimize_simplifyLoops__SplitTerms(threadData, _var_lst, _lhs ,&_noLoopTerms_lhs);

  _loopTerms_rhs = omc_BackendDAEOptimize_simplifyLoops__SplitTerms(threadData, _var_lst, _rhs ,&_noLoopTerms_rhs);

  if((listLength(_loopTerms_lhs) > listLength(_loopTerms_rhs)))
  {
    _lhs = omc_Expression_expSub(threadData, omc_Expression_makeSum1(threadData, _loopTerms_lhs, 0 /* false */), omc_Expression_makeSum1(threadData, _loopTerms_rhs, 0 /* false */));

    _rhs = omc_Expression_expSub(threadData, omc_Expression_makeSum1(threadData, _noLoopTerms_rhs, 0 /* false */), omc_Expression_makeSum1(threadData, _noLoopTerms_lhs, 0 /* false */));
  }
  else
  {
    _lhs = omc_Expression_expSub(threadData, omc_Expression_makeSum1(threadData, _loopTerms_rhs, 0 /* false */), omc_Expression_makeSum1(threadData, _loopTerms_lhs, 0 /* false */));

    _rhs = omc_Expression_expSub(threadData, omc_Expression_makeSum1(threadData, _noLoopTerms_lhs, 0 /* false */), omc_Expression_makeSum1(threadData, _noLoopTerms_rhs, 0 /* false */));
  }

  _lhs = omc_Expression_createResidualExp3(threadData, _lhs, _rhs ,&_rhs ,NULL);

  _lhs = omc_Expression_makeFraction(threadData, _lhs ,&_e);

  _lhs = omc_ExpressionSimplify_simplify(threadData, _lhs, NULL);

  _e = omc_ExpressionSimplify_simplify(threadData, _e, NULL);

  tmpMeta1 = mmc_mk_box2(5, &DAE_Operator_MUL__desc, omc_Expression_typeof(threadData, _rhs));
  _rhs = omc_ExpressionSimplify_simplifySumOperatorExpression(threadData, _rhs, tmpMeta1, _e);

  _outIndx = omc_BackendDAEOptimize_simplifyLoopExp(threadData, _outIndx, _outVars, _outEqns, _outShared, _var_lst, _rhs, _ass1, _ass2, _simDAE, _useTmpVars, _ii, _outCompOrder, _OMC_LIT61, 0 /* false */ ,&_outVars ,&_outEqns ,&_outShared ,&_update_rhs ,&_rhs ,&_ass1 ,&_ass2 ,&_outCompOrder);

  _outIndx = omc_BackendDAEOptimize_simplifyLoopExp(threadData, _outIndx, _outVars, _outEqns, _outShared, _var_lst, _lhs, _ass1, _ass2, _simDAE, _useTmpVars, _ii, _outCompOrder, _OMC_LIT61, 0 /* false */ ,&_outVars ,&_outEqns ,&_outShared ,&_update_lhs ,&_lhs ,&_ass1 ,&_ass2 ,&_outCompOrder);

  _outEqn = omc_BackendEquation_setEquationLHS(threadData, _outEqn, _lhs);

  _outEqn = omc_BackendEquation_setEquationRHS(threadData, _outEqn, _rhs);

  _outUpdate = ((_outUpdate || _update_rhs) || _update_lhs);
  _return: OMC_LABEL_UNUSED
  if (out_outVars) { *out_outVars = _outVars; }
  if (out_outEqns) { *out_outEqns = _outEqns; }
  if (out_outShared) { *out_outShared = _outShared; }
  if (out_outUpdate) { *out_outUpdate = _outUpdate; }
  if (out_outEqn) { *out_outEqn = _outEqn; }
  if (out_ass1) { *out_ass1 = _ass1; }
  if (out_ass2) { *out_ass2 = _ass2; }
  if (out_outCompOrder) { *out_outCompOrder = _outCompOrder; }
  return _outIndx;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_simplifyLoopEqn(threadData_t *threadData, modelica_metatype _inIndx, modelica_metatype _inVars, modelica_metatype _inEqns, modelica_metatype _inShared, modelica_metatype _var_lst, modelica_metatype _inEqn, modelica_metatype _ass1_, modelica_metatype _ass2_, modelica_metatype _simDAE, modelica_metatype _ii, modelica_metatype _inCompOrders, modelica_metatype *out_outVars, modelica_metatype *out_outEqns, modelica_metatype *out_outShared, modelica_metatype *out_outUpdate, modelica_metatype *out_outEqn, modelica_metatype *out_ass1, modelica_metatype *out_ass2, modelica_metatype *out_outCompOrder)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer tmp3;
  modelica_boolean _outUpdate;
  modelica_integer _outIndx;
  modelica_metatype out_outIndx;
  tmp1 = mmc_unbox_integer(_inIndx);
  tmp2 = mmc_unbox_integer(_simDAE);
  tmp3 = mmc_unbox_integer(_ii);
  _outIndx = omc_BackendDAEOptimize_simplifyLoopEqn(threadData, tmp1, _inVars, _inEqns, _inShared, _var_lst, _inEqn, _ass1_, _ass2_, tmp2, tmp3, _inCompOrders, out_outVars, out_outEqns, out_outShared, &_outUpdate, out_outEqn, out_ass1, out_ass2, out_outCompOrder);
  out_outIndx = mmc_mk_icon(_outIndx);
  /* skip box _outVars; BackendDAE.Variables */
  /* skip box _outEqns; ExpandableArray<BackendDAE.Equation> */
  /* skip box _outShared; BackendDAE.Shared */
  if (out_outUpdate) { *out_outUpdate = mmc_mk_icon(_outUpdate); }
  /* skip box _outEqn; BackendDAE.Equation */
  /* skip box _ass1; list<#Integer> */
  /* skip box _ass2; list<#Integer> */
  /* skip box _outCompOrder; list<#Integer> */
  return out_outIndx;
}

PROTECTED_FUNCTION_STATIC modelica_integer omc_BackendDAEOptimize_simplifyLoopsWork(threadData_t *threadData, modelica_metatype _inComp, modelica_integer _inIndx, modelica_metatype _inVars, modelica_metatype _inEqns, modelica_metatype _inShared, modelica_boolean _inUpdate, modelica_metatype _ass1_, modelica_metatype _ass2_, modelica_boolean _simDAE, modelica_integer _ii, modelica_metatype _inCompOrders, modelica_metatype *out_outVars, modelica_metatype *out_outEqns, modelica_metatype *out_outShared, modelica_boolean *out_outUpdate, modelica_metatype *out_ass1, modelica_metatype *out_ass2, modelica_metatype *out_outCompOrders)
{
  jmp_buf *old_mmc_jumper = threadData->mmc_jumper;
  modelica_integer _outIndx;
  modelica_metatype _outVars = NULL;
  modelica_metatype _outEqns = NULL;
  modelica_metatype _outShared = NULL;
  modelica_boolean _outUpdate;
  modelica_metatype _ass1 = NULL;
  modelica_metatype _ass2 = NULL;
  modelica_metatype _outCompOrders = NULL;
  modelica_metatype _eqns = NULL;
  modelica_metatype _vv = NULL;
  modelica_metatype _vars = NULL;
  modelica_metatype _var_lst = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _cr = NULL;
  modelica_metatype _eqn = NULL;
  modelica_boolean _update;
  modelica_boolean _linear;
  modelica_integer _i;
  modelica_integer _k;
  modelica_metatype _innerEquations = NULL;
  modelica_metatype _innerEquation = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_integer tmp11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  modelica_metatype tmpMeta16;
  modelica_metatype tmpMeta17;
  modelica_metatype tmpMeta18;
  modelica_metatype tmpMeta19;
  modelica_metatype tmpMeta20;
  modelica_metatype tmpMeta21;
  modelica_metatype tmpMeta30;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outIndx = _inIndx;
  _outVars = _inVars;
  _outEqns = _inEqns;
  _outShared = _inShared;
  _outUpdate = _inUpdate;
  _ass1 = _ass1_;
  _ass2 = _ass2_;
  _outCompOrders = _inCompOrders;
  // _eqns has no default value.
  // _vv has no default value.
  // _vars has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _var_lst = tmpMeta1;
  // _cr has no default value.
  // _eqn has no default value.
  // _update has no default value.
  // _linear has no default value.
  // _i has no default value.
  // _k has no default value.
  // _innerEquations has no default value.
  // _innerEquation has no default value.
  if(omc_BackendEquation_isEquationsSystem(threadData, _inComp))
  {
    /* Pattern-matching assignment */
    tmpMeta2 = _inComp;
    if (mmc__uniontype__metarecord__typedef__equal(tmpMeta2,1,5) == 0) MMC_THROW_INTERNAL();
    tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
    tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 3));
    _eqns = tmpMeta3;
    _vars = tmpMeta4;

    if(omc_BackendDAEUtil_isLinearEqSystemComp(threadData, _inComp))
    {
      goto _return;
    }

    if(omc_Flags_isSet(threadData, _OMC_LIT92))
    {
      fputs(MMC_STRINGDATA(_OMC_LIT93),stdout);
    }
  }
  else
  {
    /* Pattern-matching assignment */
    tmpMeta5 = _inComp;
    if (mmc__uniontype__metarecord__typedef__equal(tmpMeta5,7,4) == 0) MMC_THROW_INTERNAL();
    tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 2));
    tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
    tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
    tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
    tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 4));
    tmp11 = mmc_unbox_integer(tmpMeta10);
    _vars = tmpMeta7;
    _eqns = tmpMeta8;
    _innerEquations = tmpMeta9;
    _linear = tmp11  /* pattern as ty=Boolean */;

    if(_linear)
    {
      goto _return;
    }

    if(omc_Flags_isSet(threadData, _OMC_LIT92))
    {
      fputs(MMC_STRINGDATA(_OMC_LIT88),stdout);
    }

    {
      modelica_metatype _innerEquation;
      for (tmpMeta12 = _innerEquations; !listEmpty(tmpMeta12); tmpMeta12=MMC_CDR(tmpMeta12))
      {
        _innerEquation = MMC_CAR(tmpMeta12);
        _k = omc_BackendDAEUtil_getEqnAndVarsFromInnerEquation(threadData, _innerEquation ,&_vv, NULL);

        tmpMeta13 = mmc_mk_cons(mmc_mk_integer(_k), _eqns);
        _eqns = tmpMeta13;

        _vars = listAppend(_vv, _vars);
      }
    }
  }

  if(omc_Flags_isSet(threadData, _OMC_LIT92))
  {
    fputs(MMC_STRINGDATA(_OMC_LIT94),stdout);
  }

  {
    modelica_metatype _i;
    for (tmpMeta15 = _vars; !listEmpty(tmpMeta15); tmpMeta15=MMC_CDR(tmpMeta15))
    {
      _i = MMC_CAR(tmpMeta15);
      /* Pattern-matching assignment */
      tmpMeta16 = omc_BackendVariable_getVarAt(threadData, _outVars, mmc_unbox_integer(_i));
      tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
      _cr = tmpMeta17;

      tmpMeta18 = mmc_mk_cons(_cr, _var_lst);
      _var_lst = tmpMeta18;

      if(omc_Flags_isSet(threadData, _OMC_LIT92))
      {
        tmpMeta19 = stringAppend(omc_ComponentReference_printComponentRefStr(threadData, _cr),_OMC_LIT45);
        fputs(MMC_STRINGDATA(tmpMeta19),stdout);
      }
    }
  }

  if(omc_Flags_isSet(threadData, _OMC_LIT92))
  {
    fputs(MMC_STRINGDATA(_OMC_LIT95),stdout);
  }

  {
    modelica_metatype _i;
    for (tmpMeta21 = _eqns; !listEmpty(tmpMeta21); tmpMeta21=MMC_CDR(tmpMeta21))
    {
      _i = MMC_CAR(tmpMeta21);
      { /* matchcontinue expression */
        {
          volatile mmc_switch_type tmp24;
          int tmp25;
          tmp24 = 0;
          MMC_TRY_INTERNAL(mmc_jumper)
          tmp23_top:
          threadData->mmc_jumper = &new_mmc_jumper;
          for (; tmp24 < 2; tmp24++) {
            switch (MMC_SWITCH_CAST(tmp24)) {
            case 0: {
              modelica_metatype tmpMeta26;
              modelica_metatype tmpMeta27;
              modelica_metatype tmpMeta28;
              modelica_metatype tmpMeta29;
              /* Pattern matching succeeded */
              _eqn = omc_BackendEquation_get(threadData, _outEqns, mmc_unbox_integer(_i));

              if(omc_Flags_isSet(threadData, _OMC_LIT92))
              {
                tmpMeta26 = stringAppend(_OMC_LIT96,intString(mmc_unbox_integer(_i)));
                tmpMeta27 = stringAppend(tmpMeta26,_OMC_LIT97);
                fputs(MMC_STRINGDATA(tmpMeta27),stdout);

                tmpMeta28 = stringAppend(omc_BackendDump_equationString(threadData, _eqn),_OMC_LIT98);
                fputs(MMC_STRINGDATA(tmpMeta28),stdout);
              }

              _outIndx = omc_BackendDAEOptimize_simplifyLoopEqn(threadData, _outIndx, _outVars, _outEqns, _outShared, _var_lst, _eqn, _ass1, _ass2, _simDAE, _ii, _outCompOrders ,&_outVars ,&_outEqns ,&_outShared ,&_update ,&_eqn ,&_ass1 ,&_ass2 ,&_outCompOrders);

              _outUpdate = (_outUpdate || _update);

              _outEqns = omc_BackendEquation_setAtIndex(threadData, _outEqns, mmc_unbox_integer(_i), _eqn);

              if(omc_Flags_isSet(threadData, _OMC_LIT92))
              {
                fputs(MMC_STRINGDATA(_OMC_LIT99),stdout);

                tmpMeta29 = stringAppend(omc_BackendDump_equationString(threadData, _eqn),_OMC_LIT100);
                fputs(MMC_STRINGDATA(tmpMeta29),stdout);
              }
              goto tmp23_done;
            }
            case 1: {
              /* Pattern matching succeeded */
              goto tmp23_done;
            }
            }
            goto tmp23_end;
            tmp23_end: ;
          }
          goto goto_22;
          tmp23_done:
          (void)tmp24;
          MMC_RESTORE_INTERNAL(mmc_jumper);
          goto tmp23_done2;
          goto_22:;
          MMC_CATCH_INTERNAL(mmc_jumper);
          if (++tmp24 < 2) {
            goto tmp23_top;
          }
          MMC_THROW_INTERNAL();
          tmp23_done2:;
        }
      }
      ;
    }
  }
  _return: OMC_LABEL_UNUSED
  if (out_outVars) { *out_outVars = _outVars; }
  if (out_outEqns) { *out_outEqns = _outEqns; }
  if (out_outShared) { *out_outShared = _outShared; }
  if (out_outUpdate) { *out_outUpdate = _outUpdate; }
  if (out_ass1) { *out_ass1 = _ass1; }
  if (out_ass2) { *out_ass2 = _ass2; }
  if (out_outCompOrders) { *out_outCompOrders = _outCompOrders; }
  threadData->mmc_jumper = old_mmc_jumper;
  return _outIndx;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_simplifyLoopsWork(threadData_t *threadData, modelica_metatype _inComp, modelica_metatype _inIndx, modelica_metatype _inVars, modelica_metatype _inEqns, modelica_metatype _inShared, modelica_metatype _inUpdate, modelica_metatype _ass1_, modelica_metatype _ass2_, modelica_metatype _simDAE, modelica_metatype _ii, modelica_metatype _inCompOrders, modelica_metatype *out_outVars, modelica_metatype *out_outEqns, modelica_metatype *out_outShared, modelica_metatype *out_outUpdate, modelica_metatype *out_ass1, modelica_metatype *out_ass2, modelica_metatype *out_outCompOrders)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer tmp3;
  modelica_integer tmp4;
  modelica_boolean _outUpdate;
  modelica_integer _outIndx;
  modelica_metatype out_outIndx;
  tmp1 = mmc_unbox_integer(_inIndx);
  tmp2 = mmc_unbox_integer(_inUpdate);
  tmp3 = mmc_unbox_integer(_simDAE);
  tmp4 = mmc_unbox_integer(_ii);
  _outIndx = omc_BackendDAEOptimize_simplifyLoopsWork(threadData, _inComp, tmp1, _inVars, _inEqns, _inShared, tmp2, _ass1_, _ass2_, tmp3, tmp4, _inCompOrders, out_outVars, out_outEqns, out_outShared, &_outUpdate, out_ass1, out_ass2, out_outCompOrders);
  out_outIndx = mmc_mk_icon(_outIndx);
  /* skip box _outVars; BackendDAE.Variables */
  /* skip box _outEqns; ExpandableArray<BackendDAE.Equation> */
  /* skip box _outShared; BackendDAE.Shared */
  if (out_outUpdate) { *out_outUpdate = mmc_mk_icon(_outUpdate); }
  /* skip box _ass1; list<#Integer> */
  /* skip box _ass2; list<#Integer> */
  /* skip box _outCompOrders; list<#Integer> */
  return out_outIndx;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyLoopsUpdateComps(threadData_t *threadData, modelica_metatype _inComps, modelica_metatype _inAss1, modelica_metatype _inAss2, modelica_metatype _inCompOrders)
{
  modelica_metatype _outComps = NULL;
  modelica_integer _a1;
  modelica_integer _a2;
  modelica_integer _shift;
  modelica_integer _o;
  modelica_metatype _comp = NULL;
  modelica_metatype _ass1 = NULL;
  modelica_metatype _ass2 = NULL;
  modelica_metatype _compOrders = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_integer tmp5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_integer tmp9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outComps = _inComps;
  // _a1 has no default value.
  // _a2 has no default value.
  _shift = ((modelica_integer) 0);
  // _o has no default value.
  // _comp has no default value.
  _ass1 = _inAss1;
  _ass2 = _inAss2;
  _compOrders = _inCompOrders;
  {
    modelica_metatype _a1;
    for (tmpMeta1 = _ass1; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _a1 = MMC_CAR(tmpMeta1);
      /* Pattern-matching assignment */
      tmpMeta2 = _compOrders;
      if (listEmpty(tmpMeta2)) MMC_THROW_INTERNAL();
      tmpMeta3 = MMC_CAR(tmpMeta2);
      tmpMeta4 = MMC_CDR(tmpMeta2);
      tmp5 = mmc_unbox_integer(tmpMeta3);
      _o = tmp5  /* pattern as ty=Integer */;
      _compOrders = tmpMeta4;

      /* Pattern-matching assignment */
      tmpMeta6 = _ass2;
      if (listEmpty(tmpMeta6)) MMC_THROW_INTERNAL();
      tmpMeta7 = MMC_CAR(tmpMeta6);
      tmpMeta8 = MMC_CDR(tmpMeta6);
      tmp9 = mmc_unbox_integer(tmpMeta7);
      _a2 = tmp9  /* pattern as ty=Integer */;
      _ass2 = tmpMeta8;

      tmpMeta10 = mmc_mk_box3(3, &BackendDAE_StrongComponent_SINGLEEQUATION__desc, _a1, mmc_mk_integer(_a2));
      _comp = tmpMeta10;

      _outComps = omc_List_insert(threadData, _outComps, _o + _shift, _comp);

      _shift = ((modelica_integer) 1) + _shift;
    }
  }
  _return: OMC_LABEL_UNUSED
  return _outComps;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyLoopsUpdateAss(threadData_t *threadData, modelica_metatype _inAss, modelica_metatype _new_ass, modelica_integer _n)
{
  modelica_metatype _outAss = NULL;
  modelica_integer _i;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outAss = _inAss;
  _i = ((modelica_integer) 1);
  {
    modelica_metatype _a;
    for (tmpMeta1 = _new_ass; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _a = MMC_CAR(tmpMeta1);
      arrayUpdate(_outAss,_i + _n,_a);

      _i = ((modelica_integer) 1) + _i;
    }
  }
  _return: OMC_LABEL_UNUSED
  return _outAss;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_simplifyLoopsUpdateAss(threadData_t *threadData, modelica_metatype _inAss, modelica_metatype _new_ass, modelica_metatype _n)
{
  modelica_integer tmp1;
  modelica_metatype _outAss = NULL;
  tmp1 = mmc_unbox_integer(_n);
  _outAss = omc_BackendDAEOptimize_simplifyLoopsUpdateAss(threadData, _inAss, _new_ass, tmp1);
  /* skip box _outAss; array<#Integer> */
  return _outAss;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyLoopsUpdateMatching(threadData_t *threadData, modelica_metatype _inVars, modelica_metatype _inEqns, modelica_metatype _inSyst, modelica_metatype _ass1_, modelica_metatype _ass2_, modelica_integer _nEqns, modelica_integer _nVars, modelica_metatype _functionTree, modelica_metatype _compOrders)
{
  modelica_metatype _outSyst = NULL;
  modelica_metatype _ass1 = NULL;
  modelica_metatype _ass2 = NULL;
  modelica_integer _n1;
  modelica_integer _n2;
  modelica_metatype _matching = NULL;
  modelica_metatype _comps = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outSyst = _inSyst;
  // _ass1 has no default value.
  // _ass2 has no default value.
  // _n1 has no default value.
  // _n2 has no default value.
  // _matching has no default value.
  // _comps has no default value.
  _matching = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inSyst), 7)));

  /* Pattern-matching assignment */
  tmpMeta1 = _matching;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,1,3) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 4));
  _ass1 = tmpMeta2;
  _ass2 = tmpMeta3;
  _comps = tmpMeta4;

  _n1 = listLength(_ass1_);

  _n2 = listLength(_ass2_);

  _ass1 = omc_Array_expand(threadData, _n1, _ass1, mmc_mk_integer(((modelica_integer) -1)));

  _ass2 = omc_Array_expand(threadData, _n2, _ass2, mmc_mk_integer(((modelica_integer) -1)));

  _ass1 = omc_BackendDAEOptimize_simplifyLoopsUpdateAss(threadData, _ass1, _ass1_, _nVars);

  _ass2 = omc_BackendDAEOptimize_simplifyLoopsUpdateAss(threadData, _ass2, _ass2_, _nEqns);

  _comps = omc_BackendDAEOptimize_simplifyLoopsUpdateComps(threadData, _comps, _ass1_, _ass2_, _compOrders);

  tmpMeta6 = mmc_mk_box4(4, &BackendDAE_Matching_MATCHING__desc, _ass1, _ass2, _comps);
  tmpMeta5 = MMC_TAGPTR(mmc_alloc_words(11));
  memcpy(MMC_UNTAGPTR(tmpMeta5), MMC_UNTAGPTR(_outSyst), 11*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta5))[7] = tmpMeta6;
  _outSyst = tmpMeta5;

  tmpMeta7 = MMC_TAGPTR(mmc_alloc_words(11));
  memcpy(MMC_UNTAGPTR(tmpMeta7), MMC_UNTAGPTR(_outSyst), 11*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta7))[3] = _inEqns;
  _outSyst = tmpMeta7;

  tmpMeta8 = MMC_TAGPTR(mmc_alloc_words(11));
  memcpy(MMC_UNTAGPTR(tmpMeta8), MMC_UNTAGPTR(_outSyst), 11*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta8))[2] = _inVars;
  _outSyst = tmpMeta8;

  _outSyst = omc_BackendDAEUtil_setEqSystMatrices(threadData, _outSyst, mmc_mk_none(), mmc_mk_none(), mmc_mk_none());
  _return: OMC_LABEL_UNUSED
  return _outSyst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_simplifyLoopsUpdateMatching(threadData_t *threadData, modelica_metatype _inVars, modelica_metatype _inEqns, modelica_metatype _inSyst, modelica_metatype _ass1_, modelica_metatype _ass2_, modelica_metatype _nEqns, modelica_metatype _nVars, modelica_metatype _functionTree, modelica_metatype _compOrders)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _outSyst = NULL;
  tmp1 = mmc_unbox_integer(_nEqns);
  tmp2 = mmc_unbox_integer(_nVars);
  _outSyst = omc_BackendDAEOptimize_simplifyLoopsUpdateMatching(threadData, _inVars, _inEqns, _inSyst, _ass1_, _ass2_, tmp1, tmp2, _functionTree, _compOrders);
  /* skip box _outSyst; BackendDAE.EqSystem */
  return _outSyst;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyLoopsMain(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  modelica_metatype _systlst = NULL;
  modelica_metatype _new_systlst = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _shared = NULL;
  modelica_metatype _vars = NULL;
  modelica_metatype _eqns = NULL;
  modelica_metatype _partitionKind = NULL;
  modelica_metatype _stateSets = NULL;
  modelica_metatype _comps = NULL;
  modelica_metatype _matching = NULL;
  modelica_metatype _functionTree = NULL;
  modelica_boolean _update;
  modelica_integer _index;
  modelica_integer _ii;
  modelica_metatype _nSyst = NULL;
  modelica_metatype _ass1 = NULL;
  modelica_metatype _ass2 = NULL;
  modelica_metatype _compOrders = NULL;
  modelica_integer _ne;
  modelica_integer _nv;
  modelica_boolean _simDAE;
  modelica_boolean tmp2 = 0;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  modelica_metatype tmpMeta16;
  modelica_metatype tmpMeta17;
  modelica_metatype tmpMeta18;
  modelica_metatype tmpMeta19;
  modelica_metatype tmpMeta20;
  modelica_metatype tmpMeta21;
  modelica_integer tmp22;
  modelica_metatype tmpMeta23;
  modelica_metatype tmpMeta24;
  modelica_metatype tmpMeta25;
  modelica_metatype tmpMeta26;
  modelica_metatype tmpMeta27;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outDAE = _inDAE;
  // _systlst has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _new_systlst = tmpMeta1;
  // _shared has no default value.
  // _vars has no default value.
  // _eqns has no default value.
  // _partitionKind has no default value.
  // _stateSets has no default value.
  // _comps has no default value.
  // _matching has no default value.
  // _functionTree has no default value.
  // _update has no default value.
  _index = ((modelica_integer) 1);
  // _ii has no default value.
  // _nSyst has no default value.
  // _ass1 has no default value.
  // _ass2 has no default value.
  // _compOrders has no default value.
  // _ne has no default value.
  // _nv has no default value.
  // _simDAE has no default value.
  _shared = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDAE), 3)));

  _functionTree = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 12)));

  { /* match expression */
    modelica_metatype tmp5_1;
    tmp5_1 = _shared;
    {
      volatile mmc_switch_type tmp5;
      int tmp6;
      tmp5 = 0;
      for (; tmp5 < 3; tmp5++) {
        switch (MMC_SWITCH_CAST(tmp5)) {
        case 0: {
          modelica_metatype tmpMeta7;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 15));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,0) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          tmp2 = 1 /* true */;
          goto tmp4_done;
        }
        case 1: {
          modelica_metatype tmpMeta8;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 15));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,5,0) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          tmp2 = 1 /* true */;
          goto tmp4_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmp2 = 0 /* false */;
          goto tmp4_done;
        }
        }
        goto tmp4_end;
        tmp4_end: ;
      }
      goto goto_3;
      goto_3:;
      MMC_THROW_INTERNAL();
      goto tmp4_done;
      tmp4_done:;
    }
  }
  _simDAE = tmp2;

  if(omc_Flags_isSet(threadData, _OMC_LIT92))
  {
    fputs(MMC_STRINGDATA(_OMC_LIT101),stdout);

    if((!_simDAE))
    {
      fputs(MMC_STRINGDATA(_OMC_LIT102),stdout);
    }
  }

  {
    modelica_metatype _syst;
    for (tmpMeta9 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDAE), 2))); !listEmpty(tmpMeta9); tmpMeta9=MMC_CDR(tmpMeta9))
    {
      _syst = MMC_CAR(tmpMeta9);
      _update = 0 /* false */;

      tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
      _ass1 = tmpMeta10;

      tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
      _ass2 = tmpMeta11;

      tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
      _compOrders = tmpMeta12;

      _ii = ((modelica_integer) 1);

      /* Pattern-matching assignment */
      tmpMeta13 = _syst;
      tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
      tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 3));
      tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 7));
      if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,1,3) == 0) MMC_THROW_INTERNAL();
      tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 4));
      tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 8));
      tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 9));
      _vars = tmpMeta14;
      _eqns = tmpMeta15;
      _matching = tmpMeta16;
      _comps = tmpMeta17;
      _stateSets = tmpMeta18;
      _partitionKind = tmpMeta19;

      _ne = omc_ExpandableArray_getNumberOfElements(threadData, _eqns);

      /* Pattern-matching assignment */
      tmpMeta20 = _vars;
      tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 5));
      tmp22 = mmc_unbox_integer(tmpMeta21);
      _nv = tmp22  /* pattern as ty=Integer */;

      {
        modelica_metatype _comp;
        for (tmpMeta23 = _comps; !listEmpty(tmpMeta23); tmpMeta23=MMC_CDR(tmpMeta23))
        {
          _comp = MMC_CAR(tmpMeta23);
          if((omc_BackendEquation_isEquationsSystem(threadData, _comp) || omc_BackendEquation_isTornSystem(threadData, _comp)))
          {
            _index = omc_BackendDAEOptimize_simplifyLoopsWork(threadData, _comp, _index, _vars, _eqns, _shared, _update, _ass1, _ass2, _simDAE, _ii, _compOrders ,&_vars ,&_eqns ,&_shared ,&_update ,&_ass1 ,&_ass2 ,&_compOrders);
          }

          _ii = ((modelica_integer) 1) + _ii;
        }
      }

      _nSyst = (_update?omc_BackendDAEOptimize_simplifyLoopsUpdateMatching(threadData, _vars, _eqns, _syst, listReverse(_ass1), listReverse(_ass2), _ne, _nv, _functionTree, listReverse(_compOrders)):_syst);

      tmpMeta25 = mmc_mk_cons(_nSyst, _new_systlst);
      _new_systlst = tmpMeta25;
    }
  }

  tmpMeta27 = mmc_mk_box3(3, &BackendDAE_BackendDAE_DAE__desc, _new_systlst, _shared);
  _outDAE = tmpMeta27;

  if(omc_Flags_isSet(threadData, _OMC_LIT92))
  {
    fputs(MMC_STRINGDATA(_OMC_LIT103),stdout);
  }
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_simplifyLoops(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  _outDAE = ((omc_Flags_getConfigInt(threadData, _OMC_LIT87) > ((modelica_integer) 0))?omc_BackendDAEOptimize_simplifyLoopsMain(threadData, _inDAE):_inDAE);
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_inlineFunctionInLoopsWork(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fsyst, modelica_metatype _functionTree, modelica_metatype __omcQ_24in_5Fshared, modelica_metatype *out_shared)
{
  modelica_metatype _syst = NULL;
  modelica_metatype _shared = NULL;
  modelica_metatype _vars = NULL;
  modelica_metatype _eqns = NULL;
  modelica_metatype _partitionKind = NULL;
  modelica_metatype _stateSets = NULL;
  modelica_metatype _comps = NULL;
  modelica_metatype _matching = NULL;
  modelica_metatype _fns = NULL;
  modelica_metatype tmpMeta1;
  modelica_boolean _inlined;
  modelica_metatype _eq = NULL;
  modelica_metatype _eqNew = NULL;
  modelica_metatype _tmpEqs = NULL;
  modelica_metatype _tmpEqs1 = NULL;
  modelica_metatype _idEqns = NULL;
  modelica_boolean _inlined1;
  modelica_integer _id;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_boolean tmp13 = 0;
  modelica_metatype tmpMeta18;
  modelica_metatype tmpMeta27;
  modelica_metatype tmpMeta28;
  modelica_metatype tmpMeta29;
  modelica_metatype tmpMeta30;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _syst = __omcQ_24in_5Fsyst;
  _shared = __omcQ_24in_5Fshared;
  // _vars has no default value.
  // _eqns has no default value.
  // _partitionKind has no default value.
  // _stateSets has no default value.
  // _comps has no default value.
  // _matching has no default value.
  tmpMeta1 = mmc_mk_box2(0, mmc_mk_some(_functionTree), _OMC_LIT109);
  _fns = tmpMeta1;
  // _inlined has no default value.
  // _eq has no default value.
  // _eqNew has no default value.
  // _tmpEqs has no default value.
  // _tmpEqs1 has no default value.
  // _idEqns has no default value.
  // _inlined1 has no default value.
  // _id has no default value.
  _inlined = 0 /* false */;

  _inlined1 = 0 /* false */;

  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
  _tmpEqs1 = omc_BackendDAEUtil_createEqSystem(threadData, omc_BackendVariable_listVar(threadData, tmpMeta2), omc_BackendEquation_listEquation(threadData, tmpMeta3), tmpMeta4, _OMC_LIT110, omc_BackendEquation_emptyEqns(threadData));

  /* Pattern-matching assignment */
  tmpMeta5 = _syst;
  tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 2));
  tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 3));
  tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 7));
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,1,3) == 0) MMC_THROW_INTERNAL();
  tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 4));
  tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 8));
  tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 9));
  _vars = tmpMeta6;
  _eqns = tmpMeta7;
  _matching = tmpMeta8;
  _comps = tmpMeta9;
  _stateSets = tmpMeta10;
  _partitionKind = tmpMeta11;

  {
    modelica_metatype _comp;
    for (tmpMeta12 = _comps; !listEmpty(tmpMeta12); tmpMeta12=MMC_CDR(tmpMeta12))
    {
      _comp = MMC_CAR(tmpMeta12);
      { /* match expression */
        modelica_metatype tmp16_1;
        tmp16_1 = _comp;
        {
          volatile mmc_switch_type tmp16;
          int tmp17;
          tmp16 = 0;
          for (; tmp16 < 2; tmp16++) {
            switch (MMC_SWITCH_CAST(tmp16)) {
            case 0: {
              if (mmc__uniontype__metarecord__typedef__equal(tmp16_1,4,2) == 0) goto tmp15_end;
              
              /* Pattern matching succeeded */
              tmp13 = 1 /* true */;
              goto tmp15_done;
            }
            case 1: {
              
              /* Pattern matching succeeded */
              tmp13 = 0 /* false */;
              goto tmp15_done;
            }
            }
            goto tmp15_end;
            tmp15_end: ;
          }
          goto goto_14;
          goto_14:;
          MMC_THROW_INTERNAL();
          goto tmp15_done;
          tmp15_done:;
        }
      }
      if(((omc_BackendEquation_isEquationsSystem(threadData, _comp) || omc_BackendEquation_isTornSystem(threadData, _comp)) || tmp13))
      {
        { /* match expression */
          modelica_metatype tmp21_1;
          tmp21_1 = _comp;
          {
            volatile mmc_switch_type tmp21;
            int tmp22;
            tmp21 = 0;
            for (; tmp21 < 2; tmp21++) {
              switch (MMC_SWITCH_CAST(tmp21)) {
              case 0: {
                modelica_metatype tmpMeta23;
                if (mmc__uniontype__metarecord__typedef__equal(tmp21_1,1,5) == 0) goto tmp20_end;
                tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp21_1), 2));
                
                _idEqns = tmpMeta23;
                /* Pattern matching succeeded */
                tmpMeta18 = _idEqns;
                goto tmp20_done;
              }
              case 1: {
                modelica_metatype tmpMeta24;
                modelica_integer tmp25;
                modelica_metatype tmpMeta26;
                if (mmc__uniontype__metarecord__typedef__equal(tmp21_1,4,2) == 0) goto tmp20_end;
                tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp21_1), 2));
                tmp25 = mmc_unbox_integer(tmpMeta24);
                
                _id = tmp25  /* pattern as ty=Integer */;
                /* Pattern matching succeeded */
                tmpMeta26 = mmc_mk_cons(mmc_mk_integer(_id), MMC_REFSTRUCTLIT(mmc_nil));
                tmpMeta18 = tmpMeta26;
                goto tmp20_done;
              }
              }
              goto tmp20_end;
              tmp20_end: ;
            }
            goto goto_19;
            goto_19:;
            MMC_THROW_INTERNAL();
            goto tmp20_done;
            tmp20_done:;
          }
        }
        _idEqns = tmpMeta18;

        {
          modelica_metatype _id;
          for (tmpMeta27 = _idEqns; !listEmpty(tmpMeta27); tmpMeta27=MMC_CDR(tmpMeta27))
          {
            _id = MMC_CAR(tmpMeta27);
            _eq = omc_BackendEquation_get(threadData, _eqns, mmc_unbox_integer(_id));

            _eqNew = omc_BackendInline_inlineEqAppend__debug(threadData, _eq, _fns, _shared ,&_tmpEqs ,&_inlined ,&_shared);

            if((_inlined || (!omc_BackendEquation_equationEqual(threadData, _eq, _eqNew))))
            {
              _tmpEqs1 = omc_BackendDAEUtil_mergeEqSystems(threadData, _tmpEqs, _tmpEqs1);

              _eqns = omc_BackendEquation_setAtIndexFirst(threadData, mmc_unbox_integer(_id), _eqNew, _eqns);

              _inlined1 = 1 /* true */;
            }
          }
        }
      }
    }
  }

  tmpMeta30 = MMC_TAGPTR(mmc_alloc_words(11));
  memcpy(MMC_UNTAGPTR(tmpMeta30), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta30))[3] = _eqns;
  _syst = tmpMeta30;

  if(_inlined1)
  {
    _syst = omc_BackendDAEUtil_clearEqSyst(threadData, _syst);

    _syst = omc_BackendDAEUtil_mergeEqSystems(threadData, _tmpEqs1, _syst);
  }
  _return: OMC_LABEL_UNUSED
  if (out_shared) { *out_shared = _shared; }
  return _syst;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_inlineFunctionInLoopsMain(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  modelica_metatype _shared = NULL;
  modelica_metatype _functionTree = NULL;
  modelica_metatype _eqs = NULL;
  modelica_metatype __syst = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  // _shared has no default value.
  // _functionTree has no default value.
  // _eqs has no default value.
  // __syst has no default value.
  _shared = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDAE), 3)));

  _functionTree = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 12)));

  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _eqs = tmpMeta1;

  {
    modelica_metatype _syst;
    for (tmpMeta2 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDAE), 2))); !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
    {
      _syst = MMC_CAR(tmpMeta2);
      __syst = omc_BackendDAEOptimize_inlineFunctionInLoopsWork(threadData, _syst, _functionTree, _shared ,&_shared);

      tmpMeta3 = mmc_mk_cons(__syst, _eqs);
      _eqs = tmpMeta3;
    }
  }

  tmpMeta5 = mmc_mk_box3(3, &BackendDAE_BackendDAE_DAE__desc, _eqs, _shared);
  _outDAE = tmpMeta5;
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_inlineFunctionInLoops(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fdae)
{
  modelica_metatype _dae = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _dae = __omcQ_24in_5Fdae;
  _dae = omc_BackendDAEOptimize_inlineFunctionInLoopsMain(threadData, _dae);
  _return: OMC_LABEL_UNUSED
  return _dae;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_hetsSplitExp(threadData_t *threadData, modelica_metatype _iExp)
{
  modelica_metatype _oExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _iExp;
    {
      modelica_metatype _e = NULL;
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _op = NULL;
      modelica_metatype _terms = NULL;
      modelica_metatype _termsDer = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e has no default value.
      // _e1 has no default value.
      // _e2 has no default value.
      // _op has no default value.
      // _terms has no default value.
      // _termsDer has no default value.
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e1 = tmpMeta6;
          _op = tmpMeta7;
          _e2 = tmpMeta8;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_Expression_isMulOrDiv(threadData, _op)) goto tmp3_end;
          _e1 = omc_BackendDAEOptimize_hetsSplitExp(threadData, _e1);

          _e2 = omc_BackendDAEOptimize_hetsSplitExp(threadData, _e2);
          tmpMeta9 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, _op, _e2);
          tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _e = tmp4_1;
          _op = tmpMeta10;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_Expression_isAddOrSub(threadData, _op)) goto tmp3_end;
          _terms = omc_Expression_terms(threadData, _e);

          {
            modelica_metatype __omcQ_24tmpVar7;
            modelica_metatype* tmp12;
            modelica_metatype tmpMeta13;
            modelica_metatype __omcQ_24tmpVar6;
            modelica_integer tmp14;
            modelica_metatype _t_loopVar = 0;
            modelica_metatype _t;
            _t_loopVar = _terms;
            tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar7 = tmpMeta13; /* defaultValue */
            tmp12 = &__omcQ_24tmpVar7;
            while(1) {
              tmp14 = 1;
              if (!listEmpty(_t_loopVar)) {
                _t = MMC_CAR(_t_loopVar);
                _t_loopVar = MMC_CDR(_t_loopVar);
                tmp14--;
              }
              if (tmp14 == 0) {
                __omcQ_24tmpVar6 = omc_BackendDAEOptimize_hetsSplitExp(threadData, _t);
                *tmp12 = mmc_mk_cons(__omcQ_24tmpVar6,0);
                tmp12 = &MMC_CDR(*tmp12);
              } else if (tmp14 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp12 = mmc_mk_nil();
            tmpMeta11 = __omcQ_24tmpVar7;
          }
          _terms = tmpMeta11;

          _termsDer = omc_List_splitOnTrue(threadData, _terms, boxvar_Expression_expHasDer ,&_terms);
          tmpMeta1 = omc_Expression_expAdd(threadData, omc_Expression_makeSum1(threadData, _terms, 0 /* false */), omc_Expression_makeSum1(threadData, _termsDer, 0 /* false */));
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _iExp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _oExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _oExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_hetsSplitRhs(threadData_t *threadData, modelica_metatype _iEqn)
{
  modelica_metatype _oEqn = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oEqn has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _iEqn;
    {
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _source = NULL;
      modelica_metatype _attr = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e1 has no default value.
      // _e2 has no default value.
      // _source has no default value.
      // _attr has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          _e1 = tmpMeta6;
          _e2 = tmpMeta7;
          _source = tmpMeta8;
          _attr = tmpMeta9;
          /* Pattern matching succeeded */
          _e2 = omc_BackendDAEOptimize_hetsSplitExp(threadData, _e2);
          tmpMeta10 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _e1, _e2, _source, _attr);
          tmpMeta1 = tmpMeta10;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _iEqn;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _oEqn = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _oEqn;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_hetsSplitRes(threadData_t *threadData, modelica_metatype _iEqn)
{
  modelica_metatype _oEqn = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oEqn has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _iEqn;
    {
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _e = NULL;
      modelica_metatype _source = NULL;
      modelica_metatype _attr = NULL;
      int tmp4;
      // _e1 has no default value.
      // _e2 has no default value.
      // _e has no default value.
      // _source has no default value.
      // _attr has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          _e1 = tmpMeta5;
          _e2 = tmpMeta6;
          _source = tmpMeta7;
          _attr = tmpMeta8;
          /* Pattern matching succeeded */
          _e = omc_Expression_createResidualExp(threadData, _e1, _e2);

          _e = omc_BackendDAEOptimize_hetsSplitExp(threadData, _e);
          tmpMeta9 = mmc_mk_box4(6, &BackendDAE_Equation_RESIDUAL__EQUATION__desc, _e, _source, _attr);
          tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,3) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _e = tmpMeta10;
          _source = tmpMeta11;
          _attr = tmpMeta12;
          /* Pattern matching succeeded */
          _e = omc_BackendDAEOptimize_hetsSplitExp(threadData, _e);
          tmpMeta13 = mmc_mk_box4(6, &BackendDAE_Equation_RESIDUAL__EQUATION__desc, _e, _source, _attr);
          tmpMeta1 = tmpMeta13;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _iEqn;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _oEqn = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _oEqn;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_hetsWork(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  modelica_metatype _eqns = NULL;
  modelica_metatype _vars = NULL;
  modelica_metatype _matching = NULL;
  modelica_metatype _stateSets = NULL;
  modelica_metatype _partitionKind = NULL;
  modelica_metatype _innerEquations = NULL;
  modelica_metatype _innerEquation = NULL;
  modelica_integer _i;
  modelica_integer _j;
  modelica_metatype _eqn = NULL;
  modelica_metatype _tvars = NULL;
  modelica_metatype _teqns = NULL;
  modelica_metatype _cr = NULL;
  modelica_metatype _comps = NULL;
  modelica_metatype _shared = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  modelica_metatype tmpMeta27;
  modelica_metatype tmpMeta28;
  modelica_metatype tmpMeta29;
  modelica_metatype tmpMeta30;
  modelica_metatype tmpMeta31;
  modelica_metatype tmpMeta32;
  modelica_metatype tmpMeta33;
  modelica_metatype tmpMeta34;
  modelica_metatype tmpMeta35;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outDAE = _inDAE;
  // _eqns has no default value.
  // _vars has no default value.
  // _matching has no default value.
  // _stateSets has no default value.
  // _partitionKind has no default value.
  // _innerEquations has no default value.
  // _innerEquation has no default value.
  // _i has no default value.
  // _j has no default value.
  // _eqn has no default value.
  // _tvars has no default value.
  // _teqns has no default value.
  // _cr has no default value.
  // _comps has no default value.
  // _shared has no default value.
  _shared = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outDAE), 3)));

  {
    modelica_metatype _syst;
    for (tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outDAE), 2))); !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _syst = MMC_CAR(tmpMeta1);
      /* Pattern-matching assignment */
      tmpMeta2 = _syst;
      tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
      tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 3));
      tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 7));
      if (mmc__uniontype__metarecord__typedef__equal(tmpMeta5,1,3) == 0) MMC_THROW_INTERNAL();
      tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 4));
      tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 8));
      tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 9));
      _vars = tmpMeta3;
      _eqns = tmpMeta4;
      _matching = tmpMeta5;
      _comps = tmpMeta6;
      _stateSets = tmpMeta7;
      _partitionKind = tmpMeta8;

      {
        modelica_metatype _comp;
        for (tmpMeta9 = _comps; !listEmpty(tmpMeta9); tmpMeta9=MMC_CDR(tmpMeta9))
        {
          _comp = MMC_CAR(tmpMeta9);
          if(omc_BackendEquation_isTornSystem(threadData, _comp))
          {
            /* Pattern-matching assignment */
            tmpMeta10 = _comp;
            if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,7,4) == 0) MMC_THROW_INTERNAL();
            tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
            tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
            tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 3));
            tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 4));
            _tvars = tmpMeta12;
            _teqns = tmpMeta13;
            _innerEquations = tmpMeta14;

            {
              modelica_metatype _innerEquation;
              for (tmpMeta15 = _innerEquations; !listEmpty(tmpMeta15); tmpMeta15=MMC_CDR(tmpMeta15))
              {
                _innerEquation = MMC_CAR(tmpMeta15);
                { /* matchcontinue expression */
                  {
                    volatile mmc_switch_type tmp18;
                    int tmp19;
                    tmp18 = 0;
                    MMC_TRY_INTERNAL(mmc_jumper)
                    tmp17_top:
                    threadData->mmc_jumper = &new_mmc_jumper;
                    for (; tmp18 < 2; tmp18++) {
                      switch (MMC_SWITCH_CAST(tmp18)) {
                      case 0: {
                        modelica_metatype tmpMeta20;
                        modelica_metatype tmpMeta21;
                        modelica_metatype tmpMeta22;
                        modelica_integer tmp23;
                        modelica_integer tmp24;
                        modelica_metatype tmpMeta25;
                        modelica_metatype tmpMeta26;
                        /* Pattern matching succeeded */
                        /* Pattern-matching tuple assignment */
                        tmp24 = omc_BackendDAEUtil_getEqnAndVarsFromInnerEquation(threadData, _innerEquation, &tmpMeta20, NULL);
                        _i = tmp24;
                        if (listEmpty(tmpMeta20)) goto goto_16;
                        tmpMeta21 = MMC_CAR(tmpMeta20);
                        tmpMeta22 = MMC_CDR(tmpMeta20);
                        tmp23 = mmc_unbox_integer(tmpMeta21);
                        if (!listEmpty(tmpMeta22)) goto goto_16;
                        _j = tmp23  /* pattern as ty=Integer */;

                        _eqn = omc_BackendEquation_get(threadData, _eqns, _i);

                        /* Pattern-matching assignment */
                        tmpMeta25 = omc_BackendVariable_getVarAt(threadData, _vars, _j);
                        tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 2));
                        _cr = tmpMeta26;

                        _eqn = omc_BackendEquation_solveEquation(threadData, _eqn, omc_Expression_crefExp(threadData, _cr), mmc_mk_some((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 12)))));

                        _eqn = omc_BackendDAEOptimize_hetsSplitRhs(threadData, _eqn);

                        _eqns = omc_BackendEquation_setAtIndex(threadData, _eqns, _i, _eqn);
                        goto tmp17_done;
                      }
                      case 1: {
                        /* Pattern matching succeeded */
                        goto tmp17_done;
                      }
                      }
                      goto tmp17_end;
                      tmp17_end: ;
                    }
                    goto goto_16;
                    tmp17_done:
                    (void)tmp18;
                    MMC_RESTORE_INTERNAL(mmc_jumper);
                    goto tmp17_done2;
                    goto_16:;
                    MMC_CATCH_INTERNAL(mmc_jumper);
                    if (++tmp18 < 2) {
                      goto tmp17_top;
                    }
                    MMC_THROW_INTERNAL();
                    tmp17_done2:;
                  }
                }
                ;
              }
            }

            {
              modelica_metatype _i;
              for (tmpMeta28 = _teqns; !listEmpty(tmpMeta28); tmpMeta28=MMC_CDR(tmpMeta28))
              {
                _i = MMC_CAR(tmpMeta28);
                _eqn = omc_BackendEquation_get(threadData, _eqns, mmc_unbox_integer(_i));

                _eqn = omc_BackendDAEOptimize_hetsSplitRes(threadData, _eqn);

                _eqns = omc_BackendEquation_setAtIndex(threadData, _eqns, mmc_unbox_integer(_i), _eqn);
              }
            }
          }
          else
          {
            if(omc_BackendEquation_isEquationsSystem(threadData, _comp))
            {
              /* Pattern-matching assignment */
              tmpMeta30 = _comp;
              if (mmc__uniontype__metarecord__typedef__equal(tmpMeta30,1,5) == 0) MMC_THROW_INTERNAL();
              tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta30), 2));
              _teqns = tmpMeta31;

              {
                modelica_metatype _i;
                for (tmpMeta32 = _teqns; !listEmpty(tmpMeta32); tmpMeta32=MMC_CDR(tmpMeta32))
                {
                  _i = MMC_CAR(tmpMeta32);
                  _eqn = omc_BackendEquation_get(threadData, _eqns, mmc_unbox_integer(_i));

                  _eqn = omc_BackendDAEOptimize_hetsSplitRes(threadData, _eqn);

                  _eqns = omc_BackendEquation_setAtIndex(threadData, _eqns, mmc_unbox_integer(_i), _eqn);
                }
              }
            }
          }
        }
      }
    }
  }
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_hets(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  if((!stringEqual(omc_Flags_getConfigString(threadData, _OMC_LIT126), _OMC_LIT113)))
  {
    _outDAE = omc_BackendDAEOptimize_hetsWork(threadData, _inDAE);
  }
  else
  {
    _outDAE = _inDAE;
  }
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_simplifyComplexFunction2(threadData_t *threadData, modelica_metatype _e1)
{
  modelica_metatype _out_lst_e1 = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _lst_e = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _out_lst_e1 = tmpMeta1;
  // _lst_e has no default value.
  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          /* Pattern matching succeeded */
          if((omc_Expression_isArray(threadData, _e1) || omc_Expression_isArrayType(threadData, omc_Expression_typeof(threadData, _e1))))
          {
            _lst_e = omc_Expression_getArrayOrRangeContents(threadData, _e1);

            {
              modelica_metatype _e;
              for (tmpMeta6 = _lst_e; !listEmpty(tmpMeta6); tmpMeta6=MMC_CDR(tmpMeta6))
              {
                _e = MMC_CAR(tmpMeta6);
                _out_lst_e1 = listAppend(omc_BackendDAEOptimize_simplifyComplexFunction2(threadData, _e), _out_lst_e1);
              }
            }
          }
          else
          {
            if(omc_Expression_isRecord(threadData, _e1))
            {
              _lst_e = omc_Expression_splitRecord(threadData, _e1, omc_Expression_typeof(threadData, _e1));

              {
                modelica_metatype _e;
                for (tmpMeta8 = _lst_e; !listEmpty(tmpMeta8); tmpMeta8=MMC_CDR(tmpMeta8))
                {
                  _e = MMC_CAR(tmpMeta8);
                  _out_lst_e1 = listAppend(omc_BackendDAEOptimize_simplifyComplexFunction2(threadData, _e), _out_lst_e1);
                }
              }

              tmpMeta10 = mmc_mk_cons(_e1, MMC_REFSTRUCTLIT(mmc_nil));
              _out_lst_e1 = tmpMeta10;
            }
            else
            {
              tmpMeta11 = mmc_mk_cons(_e1, MMC_REFSTRUCTLIT(mmc_nil));
              _out_lst_e1 = tmpMeta11;
            }
          }
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta12;
          /* Pattern matching succeeded */
          tmpMeta12 = mmc_mk_cons(_e1, MMC_REFSTRUCTLIT(mmc_nil));
          _out_lst_e1 = tmpMeta12;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _out_lst_e1;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_simplifyComplexFunction1(threadData_t *threadData, modelica_metatype _inDAE, modelica_boolean _withTmpVars)
{
  modelica_metatype _outDAE = NULL;
  modelica_metatype _systlst = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _shared = NULL;
  modelica_metatype _eqns = NULL;
  modelica_metatype _vars = NULL;
  modelica_integer _n;
  modelica_integer _size;
  modelica_integer _idx;
  modelica_integer _m;
  modelica_integer _j;
  modelica_metatype _eqn = NULL;
  modelica_metatype _eqn1 = NULL;
  modelica_metatype _left = NULL;
  modelica_metatype _right = NULL;
  modelica_metatype _e1 = NULL;
  modelica_metatype _e2 = NULL;
  modelica_metatype _e = NULL;
  modelica_metatype _e3 = NULL;
  modelica_metatype _e4 = NULL;
  modelica_metatype _left_lst = NULL;
  modelica_metatype _right_lst = NULL;
  modelica_metatype _indRemove = NULL;
  modelica_metatype _source = NULL;
  modelica_metatype _attr = NULL;
  modelica_boolean _update;
  modelica_boolean _sc;
  modelica_metatype _path = NULL;
  modelica_metatype _arrayLst = NULL;
  modelica_metatype _arrayLst2 = NULL;
  modelica_metatype _expLst = NULL;
  modelica_metatype _cattr = NULL;
  modelica_metatype _cr = NULL;
  modelica_metatype _tmpvar = NULL;
  modelica_string _tmpVarPrefix = NULL;
  modelica_string tmp2 = 0;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta18;
  modelica_metatype tmpMeta19;
  modelica_integer tmp20;
  modelica_metatype tmpMeta21;
  modelica_metatype tmpMeta22;
  modelica_metatype tmpMeta23;
  modelica_metatype tmpMeta24;
  modelica_metatype tmpMeta25;
  modelica_metatype tmpMeta26;
  modelica_metatype tmpMeta27;
  modelica_metatype tmpMeta28;
  modelica_metatype tmpMeta29;
  modelica_metatype tmpMeta30;
  modelica_metatype tmpMeta31;
  modelica_metatype tmpMeta32;
  modelica_metatype tmpMeta33;
  modelica_metatype tmpMeta34;
  modelica_metatype tmpMeta35;
  modelica_metatype tmpMeta36;
  modelica_metatype tmpMeta37;
  modelica_metatype tmpMeta38;
  modelica_metatype tmpMeta39;
  modelica_metatype tmpMeta40;
  modelica_metatype tmpMeta41;
  modelica_metatype tmpMeta42;
  modelica_metatype tmpMeta43;
  modelica_metatype tmpMeta44;
  modelica_metatype tmpMeta60;
  modelica_metatype tmpMeta61;
  modelica_metatype tmpMeta62;
  modelica_metatype tmpMeta63;
  modelica_metatype tmpMeta64;
  modelica_metatype tmpMeta65;
  modelica_metatype tmpMeta66;
  modelica_metatype tmpMeta67;
  modelica_metatype tmpMeta68;
  modelica_metatype tmpMeta69;
  modelica_metatype tmpMeta70;
  modelica_metatype tmpMeta71;
  modelica_metatype tmpMeta72;
  modelica_metatype tmpMeta73;
  modelica_metatype tmpMeta74;
  modelica_metatype tmpMeta75;
  modelica_metatype tmpMeta76;
  modelica_metatype tmpMeta77;
  modelica_integer tmp78;
  modelica_metatype tmpMeta79;
  modelica_metatype tmpMeta80;
  modelica_metatype tmpMeta81;
  modelica_metatype tmpMeta82;
  modelica_metatype tmpMeta83;
  modelica_metatype tmpMeta84;
  modelica_metatype tmpMeta85;
  modelica_metatype tmpMeta91;
  modelica_metatype tmpMeta92;
  modelica_metatype tmpMeta93;
  modelica_metatype tmpMeta94;
  modelica_metatype tmpMeta95;
  modelica_metatype tmpMeta96;
  modelica_metatype tmpMeta97;
  modelica_metatype tmpMeta98;
  modelica_metatype tmpMeta99;
  modelica_metatype tmpMeta100;
  modelica_metatype tmpMeta101;
  modelica_metatype tmpMeta102;
  modelica_metatype tmpMeta103;
  modelica_metatype tmpMeta104;
  modelica_integer tmp105;
  modelica_integer tmp106;
  modelica_integer tmp107;
  modelica_metatype tmpMeta108;
  modelica_metatype tmpMeta109;
  modelica_metatype tmpMeta110;
  modelica_metatype tmpMeta111;
  modelica_metatype tmpMeta112;
  modelica_metatype tmpMeta113;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outDAE = _inDAE;
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _systlst = tmpMeta1;
  // _shared has no default value.
  // _eqns has no default value.
  // _vars has no default value.
  // _n has no default value.
  // _size has no default value.
  _idx = ((modelica_integer) 1);
  // _m has no default value.
  // _j has no default value.
  // _eqn has no default value.
  // _eqn1 has no default value.
  // _left has no default value.
  // _right has no default value.
  // _e1 has no default value.
  // _e2 has no default value.
  // _e has no default value.
  // _e3 has no default value.
  // _e4 has no default value.
  // _left_lst has no default value.
  // _right_lst has no default value.
  // _indRemove has no default value.
  // _source has no default value.
  // _attr has no default value.
  // _update has no default value.
  // _sc has no default value.
  // _path has no default value.
  // _arrayLst has no default value.
  // _arrayLst2 has no default value.
  // _expLst has no default value.
  // _cattr has no default value.
  // _cr has no default value.
  // _tmpvar has no default value.
  // _tmpVarPrefix has no default value.
  _shared = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDAE), 3)));

  { /* match expression */
    modelica_metatype tmp5_1;
    tmp5_1 = _shared;
    {
      volatile mmc_switch_type tmp5;
      int tmp6;
      tmp5 = 0;
      for (; tmp5 < 3; tmp5++) {
        switch (MMC_SWITCH_CAST(tmp5)) {
        case 0: {
          modelica_metatype tmpMeta7;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 15));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,0) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          tmp2 = _OMC_LIT127;
          goto tmp4_done;
        }
        case 1: {
          modelica_metatype tmpMeta8;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 15));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,5,0) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          tmp2 = _OMC_LIT128;
          goto tmp4_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmp2 = _OMC_LIT129;
          goto tmp4_done;
        }
        }
        goto tmp4_end;
        tmp4_end: ;
      }
      goto goto_3;
      goto_3:;
      MMC_THROW_INTERNAL();
      goto tmp4_done;
      tmp4_done:;
    }
  }
  _tmpVarPrefix = tmp2;

  {
    modelica_metatype _syst;
    for (tmpMeta9 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDAE), 2))); !listEmpty(tmpMeta9); tmpMeta9=MMC_CDR(tmpMeta9))
    {
      _syst = MMC_CAR(tmpMeta9);
      /* Pattern-matching assignment */
      tmpMeta10 = _syst;
      tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
      tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 3));
      _vars = tmpMeta11;
      _eqns = tmpMeta12;

      _n = omc_ExpandableArray_getNumberOfElements(threadData, _eqns);

      _update = 0 /* false */;

      tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
      _indRemove = tmpMeta13;

      tmp105 = ((modelica_integer) 1); tmp106 = 1; tmp107 = _n;
      if(!(((tmp106 > 0) && (tmp105 > tmp107)) || ((tmp106 < 0) && (tmp105 < tmp107))))
      {
        modelica_integer _i;
        for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp105, tmp107); _i += tmp106)
        {
          { /* matchcontinue expression */
            {
              volatile mmc_switch_type tmp16;
              int tmp17;
              tmp16 = 0;
              MMC_TRY_INTERNAL(mmc_jumper)
              tmp15_top:
              threadData->mmc_jumper = &new_mmc_jumper;
              for (; tmp16 < 2; tmp16++) {
                switch (MMC_SWITCH_CAST(tmp16)) {
                case 0: {
                  /* Pattern matching succeeded */
                  _eqn = omc_BackendEquation_get(threadData, _eqns, _i);
                  goto tmp15_done;
                }
                case 1: {
                  /* Pattern matching succeeded */
                  continue;
                  goto tmp15_done;
                }
                }
                goto tmp15_end;
                tmp15_end: ;
              }
              goto goto_14;
              tmp15_done:
              (void)tmp16;
              MMC_RESTORE_INTERNAL(mmc_jumper);
              goto tmp15_done2;
              goto_14:;
              MMC_CATCH_INTERNAL(mmc_jumper);
              if (++tmp16 < 2) {
                goto tmp15_top;
              }
              MMC_THROW_INTERNAL();
              tmp15_done2:;
            }
          }
          ;

          if((omc_BackendEquation_isComplexEquation(threadData, _eqn) || omc_BackendEquation_isArrayEquation(threadData, _eqn)))
          {
            if(omc_BackendEquation_isComplexEquation(threadData, _eqn))
            {
              /* Pattern-matching assignment */
              tmpMeta18 = _eqn;
              if (mmc__uniontype__metarecord__typedef__equal(tmpMeta18,6,5) == 0) MMC_THROW_INTERNAL();
              tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
              tmp20 = mmc_unbox_integer(tmpMeta19);
              tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 3));
              tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 4));
              tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 5));
              tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 6));
              _size = tmp20  /* pattern as ty=Integer */;
              _left = tmpMeta21;
              _right = tmpMeta22;
              _source = tmpMeta23;
              _attr = tmpMeta24;
            }
            else
            {
              /* Pattern-matching assignment */
              tmpMeta25 = _eqn;
              if (mmc__uniontype__metarecord__typedef__equal(tmpMeta25,1,6) == 0) MMC_THROW_INTERNAL();
              tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 3));
              tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 4));
              tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 5));
              tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 6));
              _left = tmpMeta26;
              _right = tmpMeta27;
              _source = tmpMeta28;
              _attr = tmpMeta29;
            }

            if((omc_Expression_isTuple(threadData, _left) && omc_Expression_isTuple(threadData, _right)))
            {
              /* Pattern-matching assignment */
              tmpMeta30 = _left;
              if (mmc__uniontype__metarecord__typedef__equal(tmpMeta30,19,1) == 0) MMC_THROW_INTERNAL();
              tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta30), 2));
              _left_lst = tmpMeta31;

              /* Pattern-matching assignment */
              tmpMeta32 = _right;
              if (mmc__uniontype__metarecord__typedef__equal(tmpMeta32,19,1) == 0) MMC_THROW_INTERNAL();
              tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 2));
              _right_lst = tmpMeta33;

              _update = 1 /* true */;

              tmpMeta34 = mmc_mk_cons(mmc_mk_integer(_i), _indRemove);
              _indRemove = tmpMeta34;

              {
                modelica_metatype _e1;
                for (tmpMeta35 = _left_lst; !listEmpty(tmpMeta35); tmpMeta35=MMC_CDR(tmpMeta35))
                {
                  _e1 = MMC_CAR(tmpMeta35);
                  /* Pattern-matching assignment */
                  tmpMeta36 = _right_lst;
                  if (listEmpty(tmpMeta36)) MMC_THROW_INTERNAL();
                  tmpMeta37 = MMC_CAR(tmpMeta36);
                  tmpMeta38 = MMC_CDR(tmpMeta36);
                  _e2 = tmpMeta37;
                  _right_lst = tmpMeta38;

                  if((!omc_Expression_isWild(threadData, _e1)))
                  {
                    if(omc_Expression_isScalar(threadData, _e2))
                    {
                      _eqn1 = omc_BackendEquation_generateEquation(threadData, _e1, _e2, _source, _attr);

                      _eqns = omc_BackendEquation_add(threadData, _eqn1, _eqns);
                    }
                    else
                    {
                      _expLst = omc_BackendDAEOptimize_simplifyComplexFunction2(threadData, _e1);

                      _arrayLst = omc_BackendDAEOptimize_simplifyComplexFunction2(threadData, _e2);

                      {
                        modelica_metatype _e_asub;
                        for (tmpMeta39 = _arrayLst; !listEmpty(tmpMeta39); tmpMeta39=MMC_CDR(tmpMeta39))
                        {
                          _e_asub = MMC_CAR(tmpMeta39);
                          /* Pattern-matching assignment */
                          tmpMeta40 = _expLst;
                          if (listEmpty(tmpMeta40)) MMC_THROW_INTERNAL();
                          tmpMeta41 = MMC_CAR(tmpMeta40);
                          tmpMeta42 = MMC_CDR(tmpMeta40);
                          _e3 = tmpMeta41;
                          _expLst = tmpMeta42;

                          _eqn1 = omc_BackendEquation_generateEquation(threadData, _e_asub, _e3, _source, _attr);

                          _eqns = omc_BackendEquation_add(threadData, _eqn1, _eqns);
                        }
                      }
                    }
                  }
                }
              }
            }
            else
            {
              if((omc_Expression_isArray(threadData, _left) && omc_Expression_isArray(threadData, _right)))
              {
                { /* matchcontinue expression */
                  {
                    volatile mmc_switch_type tmp47;
                    int tmp48;
                    tmp47 = 0;
                    MMC_TRY_INTERNAL(mmc_jumper)
                    tmp46_top:
                    threadData->mmc_jumper = &new_mmc_jumper;
                    for (; tmp47 < 2; tmp47++) {
                      switch (MMC_SWITCH_CAST(tmp47)) {
                      case 0: {
                        modelica_metatype tmpMeta49;
                        modelica_metatype tmpMeta50;
                        modelica_metatype tmpMeta51;
                        modelica_metatype tmpMeta52;
                        modelica_metatype tmpMeta53;
                        modelica_metatype tmpMeta54;
                        modelica_metatype tmpMeta55;
                        modelica_metatype tmpMeta56;
                        modelica_metatype tmpMeta57;
                        modelica_metatype tmpMeta58;
                        modelica_metatype tmpMeta59;
                        /* Pattern matching succeeded */
                        _left_lst = omc_Expression_getArrayOrRangeContents(threadData, _left);

                        _right_lst = omc_Expression_getArrayOrRangeContents(threadData, _right);

                        _update = 1 /* true */;

                        tmpMeta49 = mmc_mk_cons(mmc_mk_integer(_i), _indRemove);
                        _indRemove = tmpMeta49;

                        {
                          modelica_metatype _e1;
                          for (tmpMeta50 = _left_lst; !listEmpty(tmpMeta50); tmpMeta50=MMC_CDR(tmpMeta50))
                          {
                            _e1 = MMC_CAR(tmpMeta50);
                            /* Pattern-matching assignment */
                            tmpMeta51 = _right_lst;
                            if (listEmpty(tmpMeta51)) goto goto_45;
                            tmpMeta52 = MMC_CAR(tmpMeta51);
                            tmpMeta53 = MMC_CDR(tmpMeta51);
                            _e2 = tmpMeta52;
                            _right_lst = tmpMeta53;

                            if((!omc_Expression_isWild(threadData, _e1)))
                            {
                              if(omc_Expression_isScalar(threadData, _e2))
                              {
                                _eqn1 = omc_BackendEquation_generateEquation(threadData, _e1, _e2, _source, _attr);

                                _eqns = omc_BackendEquation_add(threadData, _eqn1, _eqns);
                              }
                              else
                              {
                                _expLst = omc_BackendDAEOptimize_simplifyComplexFunction2(threadData, _e1);

                                _arrayLst = omc_BackendDAEOptimize_simplifyComplexFunction2(threadData, _e2);

                                {
                                  modelica_metatype _e_asub;
                                  for (tmpMeta54 = _arrayLst; !listEmpty(tmpMeta54); tmpMeta54=MMC_CDR(tmpMeta54))
                                  {
                                    _e_asub = MMC_CAR(tmpMeta54);
                                    /* Pattern-matching assignment */
                                    tmpMeta55 = _expLst;
                                    if (listEmpty(tmpMeta55)) goto goto_45;
                                    tmpMeta56 = MMC_CAR(tmpMeta55);
                                    tmpMeta57 = MMC_CDR(tmpMeta55);
                                    _e3 = tmpMeta56;
                                    _expLst = tmpMeta57;

                                    _eqn1 = omc_BackendEquation_generateEquation(threadData, _e_asub, _e3, _source, _attr);

                                    _eqns = omc_BackendEquation_add(threadData, _eqn1, _eqns);
                                  }
                                }
                              }
                            }
                          }
                        }
                        goto tmp46_done;
                      }
                      case 1: {
                        /* Pattern matching succeeded */
                        continue;
                        goto tmp46_done;
                      }
                      }
                      goto tmp46_end;
                      tmp46_end: ;
                    }
                    goto goto_45;
                    tmp46_done:
                    (void)tmp47;
                    MMC_RESTORE_INTERNAL(mmc_jumper);
                    goto tmp46_done2;
                    goto_45:;
                    MMC_CATCH_INTERNAL(mmc_jumper);
                    if (++tmp47 < 2) {
                      goto tmp46_top;
                    }
                    MMC_THROW_INTERNAL();
                    tmp46_done2:;
                  }
                }
                ;
              }
              else
              {
                if(((_withTmpVars && omc_Expression_isTuple(threadData, _left)) && omc_Expression_isCall(threadData, _right)))
                {
                  /* Pattern-matching assignment */
                  tmpMeta60 = _left;
                  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta60,19,1) == 0) MMC_THROW_INTERNAL();
                  tmpMeta61 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta60), 2));
                  _left_lst = tmpMeta61;

                  /* Pattern-matching assignment */
                  tmpMeta62 = _right;
                  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta62,13,3) == 0) MMC_THROW_INTERNAL();
                  tmpMeta63 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta62), 2));
                  tmpMeta64 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta62), 3));
                  tmpMeta65 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta62), 4));
                  _path = tmpMeta63;
                  _expLst = tmpMeta64;
                  _cattr = tmpMeta65;

                  tmpMeta66 = MMC_REFSTRUCTLIT(mmc_nil);
                  _expLst = tmpMeta66;

                  {
                    modelica_metatype _e1;
                    for (tmpMeta67 = _left_lst; !listEmpty(tmpMeta67); tmpMeta67=MMC_CDR(tmpMeta67))
                    {
                      _e1 = MMC_CAR(tmpMeta67);
                      if(omc_Expression_isCref(threadData, _e1))
                      {
                        /* Pattern-matching assignment */
                        tmpMeta68 = _e1;
                        if (mmc__uniontype__metarecord__typedef__equal(tmpMeta68,6,2) == 0) MMC_THROW_INTERNAL();
                        tmpMeta69 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta68), 2));
                        _cr = tmpMeta69;

                        if(omc_Expression_expHasCrefNoPreOrStart(threadData, _right, _cr))
                        {
                          _update = 1 /* true */;

                          tmpMeta70 = stringAppend(_tmpVarPrefix,intString(_idx));
                          tmpMeta71 = MMC_REFSTRUCTLIT(mmc_nil);
                          _cr = omc_ComponentReference_makeCrefIdent(threadData, tmpMeta70, omc_Expression_typeof(threadData, _e1), tmpMeta71);

                          _idx = ((modelica_integer) 1) + _idx;

                          _e = omc_Expression_crefExp(threadData, _cr);

                          _tmpvar = omc_BackendVariable_makeVar(threadData, _cr);

                          _tmpvar = omc_BackendVariable_setVarTS(threadData, _tmpvar, _OMC_LIT131);

                          _vars = omc_BackendVariable_addVar(threadData, _tmpvar, _vars);

                          tmpMeta72 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _e, _e1, _OMC_LIT9, _OMC_LIT41);
                          _eqn1 = tmpMeta72;

                          _eqns = omc_BackendEquation_add(threadData, _eqn1, _eqns);
                        }
                        else
                        {
                          _e = _e1;
                        }
                      }
                      else
                      {
                        if(omc_Expression_isUnaryCref(threadData, _e1))
                        {
                          _update = 1 /* true */;

                          tmpMeta73 = stringAppend(_tmpVarPrefix,intString(_idx));
                          tmpMeta74 = MMC_REFSTRUCTLIT(mmc_nil);
                          _cr = omc_ComponentReference_makeCrefIdent(threadData, tmpMeta73, omc_Expression_typeof(threadData, _e1), tmpMeta74);

                          _idx = ((modelica_integer) 1) + _idx;

                          _e = omc_Expression_crefExp(threadData, _cr);

                          _tmpvar = omc_BackendVariable_makeVar(threadData, _cr);

                          _tmpvar = omc_BackendVariable_setVarTS(threadData, _tmpvar, _OMC_LIT131);

                          _vars = omc_BackendVariable_addVar(threadData, _tmpvar, _vars);

                          tmpMeta75 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _e, _e1, _OMC_LIT9, _OMC_LIT41);
                          _eqn1 = tmpMeta75;

                          _eqns = omc_BackendEquation_add(threadData, _eqn1, _eqns);
                        }
                        else
                        {
                          if(omc_Expression_isArray(threadData, _e1))
                          {
                            _update = 1 /* true */;

                            /* Pattern-matching assignment */
                            tmpMeta76 = _e1;
                            if (mmc__uniontype__metarecord__typedef__equal(tmpMeta76,16,3) == 0) MMC_THROW_INTERNAL();
                            tmpMeta77 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta76), 3));
                            tmp78 = mmc_unbox_integer(tmpMeta77);
                            tmpMeta79 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta76), 4));
                            _sc = tmp78  /* pattern as ty=Boolean */;
                            _arrayLst = tmpMeta79;

                            _m = listLength(_arrayLst);

                            tmpMeta80 = stringAppend(_tmpVarPrefix,intString(_idx));
                            tmpMeta81 = MMC_REFSTRUCTLIT(mmc_nil);
                            _cr = omc_ComponentReference_makeCrefIdent(threadData, tmpMeta80, omc_Expression_typeof(threadData, _e1), tmpMeta81);

                            _idx = ((modelica_integer) 1) + _idx;

                            _e = omc_Expression_crefExp(threadData, _cr);

                            _tmpvar = omc_BackendVariable_makeVar(threadData, _cr);

                            _tmpvar = omc_BackendVariable_setVarTS(threadData, _tmpvar, _OMC_LIT131);

                            tmpMeta84 = mmc_mk_box2(3, &DAE_Dimension_DIM__INTEGER__desc, mmc_mk_integer(_m));
                            tmpMeta83 = mmc_mk_cons(tmpMeta84, MMC_REFSTRUCTLIT(mmc_nil));
                            tmpMeta82 = MMC_TAGPTR(mmc_alloc_words(20));
                            memcpy(MMC_UNTAGPTR(tmpMeta82), MMC_UNTAGPTR(_tmpvar), 20*sizeof(modelica_metatype));
                            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta82))[9] = tmpMeta83;
                            _tmpvar = tmpMeta82;

                            {
                              modelica_metatype __omcQ_24tmpVar9;
                              modelica_metatype* tmp86;
                              modelica_metatype tmpMeta87;
                              modelica_metatype __omcQ_24tmpVar8;
                              modelica_integer tmp88;
                              modelica_integer tmp89;
                              modelica_integer tmp90;
                              modelica_integer _k;
                              tmp89 = 1 /* Range step-value */;
                              tmp90 = _m /* Range stop-value */;
                              _k = ((modelica_integer) 1) /* Range start-value */;
                              _k = (((modelica_integer) 1) /* Range start-value */)-tmp89;
                              tmpMeta87 = MMC_REFSTRUCTLIT(mmc_nil);
                              __omcQ_24tmpVar9 = tmpMeta87; /* defaultValue */
                              tmp86 = &__omcQ_24tmpVar9;
                              while(1) {
                                tmp88 = 1;
                                if (tmp89 > 0 ? _k+tmp89 <= tmp90 : _k+tmp89 >= tmp90) {
                                  _k += tmp89;
                                  tmp88--;
                                }
                                if (tmp88 == 0) {
                                  __omcQ_24tmpVar8 = omc_Expression_makeAsubAddIndex(threadData, _e, _k);
                                  *tmp86 = mmc_mk_cons(__omcQ_24tmpVar8,0);
                                  tmp86 = &MMC_CDR(*tmp86);
                                } else if (tmp88 == 1) {
                                  break;
                                } else {
                                  MMC_THROW_INTERNAL();
                                }
                              }
                              *tmp86 = mmc_mk_nil();
                              tmpMeta85 = __omcQ_24tmpVar9;
                            }
                            _arrayLst2 = tmpMeta85;

                            _j = ((modelica_integer) 1);

                            {
                              modelica_metatype _e2;
                              for (tmpMeta91 = _arrayLst2; !listEmpty(tmpMeta91); tmpMeta91=MMC_CDR(tmpMeta91))
                              {
                                _e2 = MMC_CAR(tmpMeta91);
                                /* Pattern-matching assignment */
                                tmpMeta92 = _arrayLst;
                                if (listEmpty(tmpMeta92)) MMC_THROW_INTERNAL();
                                tmpMeta93 = MMC_CAR(tmpMeta92);
                                tmpMeta94 = MMC_CDR(tmpMeta92);
                                _e3 = tmpMeta93;
                                _arrayLst = tmpMeta94;

                                tmpMeta95 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _e2, _e3, _OMC_LIT9, _OMC_LIT41);
                                _eqn1 = tmpMeta95;

                                _eqns = omc_BackendEquation_add(threadData, _eqn1, _eqns);

                                tmpMeta96 = stringAppend(_tmpVarPrefix,intString(((modelica_integer) -1) + _idx));
                                tmpMeta98 = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_j));
                                tmpMeta99 = mmc_mk_box2(5, &DAE_Subscript_INDEX__desc, tmpMeta98);
                                tmpMeta97 = mmc_mk_cons(tmpMeta99, MMC_REFSTRUCTLIT(mmc_nil));
                                _cr = omc_ComponentReference_makeCrefIdent(threadData, tmpMeta96, omc_Expression_typeof(threadData, _e1), tmpMeta97);

                                _j = ((modelica_integer) 1) + _j;

                                tmpMeta100 = MMC_TAGPTR(mmc_alloc_words(20));
                                memcpy(MMC_UNTAGPTR(tmpMeta100), MMC_UNTAGPTR(_tmpvar), 20*sizeof(modelica_metatype));
                                ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta100))[2] = _cr;
                                _tmpvar = tmpMeta100;

                                _vars = omc_BackendVariable_addVar(threadData, _tmpvar, _vars);
                              }
                            }
                          }
                          else
                          {
                            _e = _e1;
                          }
                        }
                      }

                      tmpMeta102 = mmc_mk_cons(_e, _expLst);
                      _expLst = tmpMeta102;
                    }
                  }

                  tmpMeta104 = mmc_mk_box2(22, &DAE_Exp_TUPLE__desc, listReverseInPlace(_expLst));
                  _left = tmpMeta104;

                  _eqn = omc_BackendEquation_generateEquation(threadData, _left, _right, _source, _attr);

                  _eqns = omc_BackendEquation_setAtIndex(threadData, _eqns, _i, _eqn);
                }
              }
            }
          }
        }
      }

      if(_update)
      {
        {
          modelica_metatype _i;
          for (tmpMeta108 = listReverse(_indRemove); !listEmpty(tmpMeta108); tmpMeta108=MMC_CDR(tmpMeta108))
          {
            _i = MMC_CAR(tmpMeta108);
            _eqns = omc_BackendEquation_delete(threadData, mmc_unbox_integer(_i), _eqns);
          }
        }

        _eqns = omc_BackendEquation_listEquation(threadData, omc_BackendEquation_equationList(threadData, _eqns));

        tmpMeta110 = mmc_mk_cons(omc_BackendDAEUtil_createEqSystem(threadData, _vars, _eqns, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_syst), 8))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_syst), 9))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_syst), 10)))), _systlst);
        _systlst = tmpMeta110;
      }
      else
      {
        tmpMeta111 = mmc_mk_cons(_syst, _systlst);
        _systlst = tmpMeta111;
      }
    }
  }

  tmpMeta113 = MMC_TAGPTR(mmc_alloc_words(4));
  memcpy(MMC_UNTAGPTR(tmpMeta113), MMC_UNTAGPTR(_outDAE), 4*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta113))[2] = _systlst;
  _outDAE = tmpMeta113;
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}
modelica_metatype boxptr_BackendDAEOptimize_simplifyComplexFunction1(threadData_t *threadData, modelica_metatype _inDAE, modelica_metatype _withTmpVars)
{
  modelica_integer tmp1;
  modelica_metatype _outDAE = NULL;
  tmp1 = mmc_unbox_integer(_withTmpVars);
  _outDAE = omc_BackendDAEOptimize_simplifyComplexFunction1(threadData, _inDAE, tmp1);
  /* skip box _outDAE; BackendDAE.BackendDAE */
  return _outDAE;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_simplifyComplexFunction(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  _outDAE = omc_BackendDAEOptimize_simplifyComplexFunction1(threadData, _inDAE, 1 /* true */);
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_sortEqnsVarsWeights(threadData_t *threadData, modelica_metatype _inW, modelica_integer _n, modelica_metatype _m)
{
  modelica_metatype _outW = NULL;
  modelica_integer _i;
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer tmp3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outW = _inW;
  // _i has no default value.
  tmp1 = ((modelica_integer) 1); tmp2 = 1; tmp3 = _n;
  if(!(((tmp2 > 0) && (tmp1 > tmp3)) || ((tmp2 < 0) && (tmp1 < tmp3))))
  {
    modelica_integer _i;
    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp1, tmp3); _i += tmp2)
    {
      arrayUpdate(_outW,_i,mmc_mk_integer(listLength(arrayGet(_m,_i) /* DAE.ASUB */)));
    }
  }
  _return: OMC_LABEL_UNUSED
  return _outW;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_sortEqnsVarsWeights(threadData_t *threadData, modelica_metatype _inW, modelica_metatype _n, modelica_metatype _m)
{
  modelica_integer tmp1;
  modelica_metatype _outW = NULL;
  tmp1 = mmc_unbox_integer(_n);
  _outW = omc_BackendDAEOptimize_sortEqnsVarsWeights(threadData, _inW, tmp1, _m);
  /* skip box _outW; array<#Integer> */
  return _outW;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_sortEqnsVarsWorkTpl(threadData_t *threadData, modelica_metatype _tplIndexWeight)
{
  modelica_metatype _outIndexs = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outIndexs has no default value.
  {
    modelica_metatype __omcQ_24tmpVar11;
    modelica_metatype* tmp2;
    modelica_metatype tmpMeta3;
    modelica_metatype __omcQ_24tmpVar10;
    modelica_integer tmp4;
    modelica_metatype _elem_loopVar = 0;
    modelica_metatype _elem;
    _elem_loopVar = _tplIndexWeight;
    tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar11 = tmpMeta3; /* defaultValue */
    tmp2 = &__omcQ_24tmpVar11;
    while(1) {
      tmp4 = 1;
      if (!listEmpty(_elem_loopVar)) {
        _elem = MMC_CAR(_elem_loopVar);
        _elem_loopVar = MMC_CDR(_elem_loopVar);
        tmp4--;
      }
      if (tmp4 == 0) {
        __omcQ_24tmpVar10 = omc_Util_tuple21(threadData, _elem);
        *tmp2 = mmc_mk_cons(__omcQ_24tmpVar10,0);
        tmp2 = &MMC_CDR(*tmp2);
      } else if (tmp4 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp2 = mmc_mk_nil();
    tmpMeta1 = __omcQ_24tmpVar11;
  }
  _outIndexs = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outIndexs;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_sortEqnsVars(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  modelica_metatype _systlst = NULL;
  modelica_metatype _new_systlst = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _shared = NULL;
  modelica_metatype _vars = NULL;
  modelica_metatype _eqns = NULL;
  modelica_metatype _m = NULL;
  modelica_metatype _mT = NULL;
  modelica_integer _ne;
  modelica_integer _nv;
  modelica_metatype _w_vars = NULL;
  modelica_metatype _w_eqns = NULL;
  modelica_metatype _functionTree = NULL;
  modelica_metatype _tplIndexWeight = NULL;
  modelica_metatype _indexs = NULL;
  modelica_metatype _var_lst = NULL;
  modelica_metatype _eqn_lst = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta43;
  modelica_metatype tmpMeta44;
  modelica_metatype tmpMeta45;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outDAE = _inDAE;
  // _systlst has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _new_systlst = tmpMeta1;
  // _shared has no default value.
  // _vars has no default value.
  // _eqns has no default value.
  // _m has no default value.
  // _mT has no default value.
  // _ne has no default value.
  // _nv has no default value.
  // _w_vars has no default value.
  // _w_eqns has no default value.
  // _functionTree has no default value.
  // _tplIndexWeight has no default value.
  // _indexs has no default value.
  // _var_lst has no default value.
  // _eqn_lst has no default value.
  /* Pattern-matching assignment */
  tmpMeta2 = _inDAE;
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 3));
  _systlst = tmpMeta3;
  _shared = tmpMeta4;

  /* Pattern-matching assignment */
  tmpMeta5 = _shared;
  tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 12));
  _functionTree = tmpMeta6;

  {
    modelica_metatype _syst;
    for (tmpMeta7 = _systlst; !listEmpty(tmpMeta7); tmpMeta7=MMC_CDR(tmpMeta7))
    {
      _syst = MMC_CAR(tmpMeta7);
      { /* match expression */
        modelica_metatype tmp11_1;
        tmp11_1 = _syst;
        {
          modelica_metatype _syst1 = NULL;
          volatile mmc_switch_type tmp11;
          int tmp12;
          // _syst1 has no default value.
          tmp11 = 0;
          for (; tmp11 < 1; tmp11++) {
            switch (MMC_SWITCH_CAST(tmp11)) {
            case 0: {
              modelica_metatype tmpMeta13;
              modelica_metatype tmpMeta14;
              modelica_metatype tmpMeta15;
              modelica_metatype tmpMeta16;
              modelica_metatype tmpMeta17;
              modelica_integer tmp18;
              modelica_metatype tmpMeta19;
              modelica_metatype tmpMeta26;
              modelica_metatype tmpMeta30;
              modelica_metatype tmpMeta37;
              modelica_metatype tmpMeta41;
              modelica_metatype tmpMeta42;
              tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp11_1), 2));
              tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp11_1), 3));
              
              _syst1 = tmp11_1;
              _vars = tmpMeta13;
              _eqns = tmpMeta14;
              /* Pattern matching succeeded */
              omc_BackendDAEUtil_getAdjacencyMatrix(threadData, _syst, _OMC_LIT132, mmc_mk_some(_functionTree), omc_BackendDAEUtil_isInitializationDAE(threadData, _shared) ,&_m ,&_mT);

              if(omc_Flags_isSet(threadData, _OMC_LIT136))
              {
                omc_BackendDump_dumpAdjacencyMatrix(threadData, _m);

                omc_BackendDump_dumpAdjacencyMatrixT(threadData, _mT);
              }

              /* Pattern-matching assignment */
              tmpMeta15 = _vars;
              tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 3));
              tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
              tmp18 = mmc_unbox_integer(tmpMeta17);
              _nv = tmp18  /* pattern as ty=Integer */;

              _ne = omc_ExpandableArray_getNumberOfElements(threadData, _eqns);

              _w_vars = arrayCreate(_nv, mmc_mk_integer(((modelica_integer) -1)));

              _w_eqns = arrayCreate(_ne, mmc_mk_integer(((modelica_integer) -1)));

              omc_BackendDAEOptimize_sortEqnsVarsWeights(threadData, _w_vars, _nv, _mT);

              omc_BackendDAEOptimize_sortEqnsVarsWeights(threadData, _w_eqns, _ne, _m);

              {
                modelica_metatype __omcQ_24tmpVar13;
                modelica_metatype* tmp20;
                modelica_metatype tmpMeta21;
                modelica_metatype tmpMeta22;
                modelica_metatype __omcQ_24tmpVar12;
                modelica_integer tmp23;
                modelica_integer tmp24;
                modelica_integer tmp25;
                modelica_integer _i;
                tmp24 = 1 /* Range step-value */;
                tmp25 = _nv /* Range stop-value */;
                _i = ((modelica_integer) 1) /* Range start-value */;
                _i = (((modelica_integer) 1) /* Range start-value */)-tmp24;
                tmpMeta21 = MMC_REFSTRUCTLIT(mmc_nil);
                __omcQ_24tmpVar13 = tmpMeta21; /* defaultValue */
                tmp20 = &__omcQ_24tmpVar13;
                while(1) {
                  tmp23 = 1;
                  if (tmp24 > 0 ? _i+tmp24 <= tmp25 : _i+tmp24 >= tmp25) {
                    _i += tmp24;
                    tmp23--;
                  }
                  if (tmp23 == 0) {
                    tmpMeta22 = mmc_mk_box2(0, mmc_mk_integer(_i), arrayGet(_w_vars,_i) /* DAE.ASUB */);
                    __omcQ_24tmpVar12 = tmpMeta22;
                    *tmp20 = mmc_mk_cons(__omcQ_24tmpVar12,0);
                    tmp20 = &MMC_CDR(*tmp20);
                  } else if (tmp23 == 1) {
                    break;
                  } else {
                    goto goto_9;
                  }
                }
                *tmp20 = mmc_mk_nil();
                tmpMeta19 = __omcQ_24tmpVar13;
              }
              _tplIndexWeight = tmpMeta19;

              _tplIndexWeight = omc_List_sort(threadData, _tplIndexWeight, boxvar_Util_compareTuple2IntLt);

              _indexs = omc_BackendDAEOptimize_sortEqnsVarsWorkTpl(threadData, _tplIndexWeight);

              {
                modelica_metatype __omcQ_24tmpVar15;
                modelica_metatype* tmp27;
                modelica_metatype tmpMeta28;
                modelica_metatype __omcQ_24tmpVar14;
                modelica_integer tmp29;
                modelica_metatype _i_loopVar = 0;
                modelica_metatype _i;
                _i_loopVar = _indexs;
                tmpMeta28 = MMC_REFSTRUCTLIT(mmc_nil);
                __omcQ_24tmpVar15 = tmpMeta28; /* defaultValue */
                tmp27 = &__omcQ_24tmpVar15;
                while(1) {
                  tmp29 = 1;
                  if (!listEmpty(_i_loopVar)) {
                    _i = MMC_CAR(_i_loopVar);
                    _i_loopVar = MMC_CDR(_i_loopVar);
                    tmp29--;
                  }
                  if (tmp29 == 0) {
                    __omcQ_24tmpVar14 = omc_BackendVariable_getVarAt(threadData, _vars, mmc_unbox_integer(_i));
                    *tmp27 = mmc_mk_cons(__omcQ_24tmpVar14,0);
                    tmp27 = &MMC_CDR(*tmp27);
                  } else if (tmp29 == 1) {
                    break;
                  } else {
                    goto goto_9;
                  }
                }
                *tmp27 = mmc_mk_nil();
                tmpMeta26 = __omcQ_24tmpVar15;
              }
              _var_lst = tmpMeta26;

              _vars = omc_BackendVariable_listVar1(threadData, _var_lst);

              {
                modelica_metatype __omcQ_24tmpVar17;
                modelica_metatype* tmp31;
                modelica_metatype tmpMeta32;
                modelica_metatype tmpMeta33;
                modelica_metatype __omcQ_24tmpVar16;
                modelica_integer tmp34;
                modelica_integer tmp35;
                modelica_integer tmp36;
                modelica_integer _i;
                tmp35 = 1 /* Range step-value */;
                tmp36 = _ne /* Range stop-value */;
                _i = ((modelica_integer) 1) /* Range start-value */;
                _i = (((modelica_integer) 1) /* Range start-value */)-tmp35;
                tmpMeta32 = MMC_REFSTRUCTLIT(mmc_nil);
                __omcQ_24tmpVar17 = tmpMeta32; /* defaultValue */
                tmp31 = &__omcQ_24tmpVar17;
                while(1) {
                  tmp34 = 1;
                  if (tmp35 > 0 ? _i+tmp35 <= tmp36 : _i+tmp35 >= tmp36) {
                    _i += tmp35;
                    tmp34--;
                  }
                  if (tmp34 == 0) {
                    tmpMeta33 = mmc_mk_box2(0, mmc_mk_integer(_i), arrayGet(_w_eqns,_i) /* DAE.ASUB */);
                    __omcQ_24tmpVar16 = tmpMeta33;
                    *tmp31 = mmc_mk_cons(__omcQ_24tmpVar16,0);
                    tmp31 = &MMC_CDR(*tmp31);
                  } else if (tmp34 == 1) {
                    break;
                  } else {
                    goto goto_9;
                  }
                }
                *tmp31 = mmc_mk_nil();
                tmpMeta30 = __omcQ_24tmpVar17;
              }
              _tplIndexWeight = tmpMeta30;

              _tplIndexWeight = omc_List_sort(threadData, _tplIndexWeight, boxvar_Util_compareTuple2IntGt);

              _indexs = omc_BackendDAEOptimize_sortEqnsVarsWorkTpl(threadData, _tplIndexWeight);

              {
                modelica_metatype __omcQ_24tmpVar19;
                modelica_metatype* tmp38;
                modelica_metatype tmpMeta39;
                modelica_metatype __omcQ_24tmpVar18;
                modelica_integer tmp40;
                modelica_metatype _i_loopVar = 0;
                modelica_metatype _i;
                _i_loopVar = _indexs;
                tmpMeta39 = MMC_REFSTRUCTLIT(mmc_nil);
                __omcQ_24tmpVar19 = tmpMeta39; /* defaultValue */
                tmp38 = &__omcQ_24tmpVar19;
                while(1) {
                  tmp40 = 1;
                  if (!listEmpty(_i_loopVar)) {
                    _i = MMC_CAR(_i_loopVar);
                    _i_loopVar = MMC_CDR(_i_loopVar);
                    tmp40--;
                  }
                  if (tmp40 == 0) {
                    __omcQ_24tmpVar18 = omc_BackendEquation_get(threadData, _eqns, mmc_unbox_integer(_i));
                    *tmp38 = mmc_mk_cons(__omcQ_24tmpVar18,0);
                    tmp38 = &MMC_CDR(*tmp38);
                  } else if (tmp40 == 1) {
                    break;
                  } else {
                    goto goto_9;
                  }
                }
                *tmp38 = mmc_mk_nil();
                tmpMeta37 = __omcQ_24tmpVar19;
              }
              _eqn_lst = tmpMeta37;

              _eqns = omc_BackendEquation_listEquation(threadData, _eqn_lst);

              tmpMeta41 = MMC_TAGPTR(mmc_alloc_words(11));
              memcpy(MMC_UNTAGPTR(tmpMeta41), MMC_UNTAGPTR(_syst1), 11*sizeof(modelica_metatype));
              ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta41))[3] = _eqns;
              _syst1 = tmpMeta41;

              tmpMeta42 = MMC_TAGPTR(mmc_alloc_words(11));
              memcpy(MMC_UNTAGPTR(tmpMeta42), MMC_UNTAGPTR(_syst1), 11*sizeof(modelica_metatype));
              ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta42))[2] = _vars;
              _syst1 = tmpMeta42;

              if(omc_Flags_isSet(threadData, _OMC_LIT136))
              {
                omc_BackendDAEUtil_getAdjacencyMatrix(threadData, _syst1, _OMC_LIT132, mmc_mk_some(_functionTree), omc_BackendDAEUtil_isInitializationDAE(threadData, _shared) ,&_m ,&_mT);

                omc_BackendDump_dumpAdjacencyMatrix(threadData, _m);

                omc_BackendDump_dumpAdjacencyMatrixT(threadData, _mT);
              }

              omc_GCExt_free(threadData, _w_vars);

              omc_GCExt_free(threadData, _w_eqns);
              tmpMeta8 = omc_BackendDAEUtil_clearEqSyst(threadData, _syst1);
              goto tmp10_done;
            }
            }
            goto tmp10_end;
            tmp10_end: ;
          }
          goto goto_9;
          goto_9:;
          MMC_THROW_INTERNAL();
          goto tmp10_done;
          tmp10_done:;
        }
      }
      _syst = tmpMeta8;

      tmpMeta43 = mmc_mk_cons(_syst, _new_systlst);
      _new_systlst = tmpMeta43;
    }
  }

  tmpMeta45 = mmc_mk_box3(3, &BackendDAE_BackendDAE_DAE__desc, _new_systlst, _shared);
  _outDAE = tmpMeta45;
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_addedScaledVars__inputs(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  modelica_metatype _systlst = NULL;
  modelica_metatype _osystlst = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _vars = NULL;
  modelica_metatype _eqns = NULL;
  modelica_metatype _kvarlst = NULL;
  modelica_metatype _lst_inputs = NULL;
  modelica_metatype _tmpv = NULL;
  modelica_metatype _cref = NULL;
  modelica_metatype _norm = NULL;
  modelica_metatype _y_norm = NULL;
  modelica_metatype _y = NULL;
  modelica_metatype _lhs = NULL;
  modelica_metatype _eqn = NULL;
  modelica_metatype _oshared = NULL;
  modelica_metatype _syst = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta20;
  modelica_metatype tmpMeta21;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  // _systlst has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _osystlst = tmpMeta1;
  // _vars has no default value.
  // _eqns has no default value.
  // _kvarlst has no default value.
  // _lst_inputs has no default value.
  // _tmpv has no default value.
  // _cref has no default value.
  // _norm has no default value.
  // _y_norm has no default value.
  // _y has no default value.
  // _lhs has no default value.
  // _eqn has no default value.
  // _oshared has no default value.
  // _syst has no default value.
  /* Pattern-matching assignment */
  tmpMeta2 = _inDAE;
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 3));
  _systlst = tmpMeta3;
  _oshared = tmpMeta4;

  _kvarlst = omc_BackendVariable_varList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_oshared), 2))));

  _lst_inputs = omc_List_select(threadData, _kvarlst, boxvar_BackendVariable_isVarOnTopLevelAndInputNoDerInput);

  /* Pattern-matching assignment */
  tmpMeta5 = _systlst;
  if (listEmpty(tmpMeta5)) MMC_THROW_INTERNAL();
  tmpMeta6 = MMC_CAR(tmpMeta5);
  tmpMeta7 = MMC_CDR(tmpMeta5);
  _syst = tmpMeta6;
  _osystlst = tmpMeta7;

  { /* match expression */
    modelica_metatype tmp11_1;
    tmp11_1 = _syst;
    {
      modelica_metatype _syst1 = NULL;
      volatile mmc_switch_type tmp11;
      int tmp12;
      // _syst1 has no default value.
      tmp11 = 0;
      for (; tmp11 < 1; tmp11++) {
        switch (MMC_SWITCH_CAST(tmp11)) {
        case 0: {
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp11_1), 2));
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp11_1), 3));
          
          _syst1 = tmp11_1;
          _vars = tmpMeta13;
          _eqns = tmpMeta14;
          /* Pattern matching succeeded */
          {
            modelica_metatype _v;
            for (tmpMeta15 = _lst_inputs; !listEmpty(tmpMeta15); tmpMeta15=MMC_CDR(tmpMeta15))
            {
              _v = MMC_CAR(tmpMeta15);
              _cref = omc_BackendVariable_varCref(threadData, _v);

              _tmpv = omc_BackendVariable_createVar(threadData, _cref, _OMC_LIT137);

              _y = omc_Expression_crefExp(threadData, _cref);

              _norm = omc_BackendVariable_getVarNominalValue(threadData, _v);

              _y_norm = omc_Expression_expDiv(threadData, _y, _norm);

              _y_norm = omc_ExpressionSimplify_simplify(threadData, _y_norm, NULL);

              _cref = omc_BackendVariable_varCref(threadData, _tmpv);

              _lhs = omc_Expression_crefExp(threadData, _cref);

              tmpMeta16 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _lhs, _y_norm, _OMC_LIT9, _OMC_LIT41);
              _eqn = tmpMeta16;

              _eqns = omc_BackendEquation_add(threadData, _eqn, _eqns);

              _vars = omc_BackendVariable_addVar(threadData, _tmpv, _vars);
            }
          }

          tmpMeta18 = MMC_TAGPTR(mmc_alloc_words(11));
          memcpy(MMC_UNTAGPTR(tmpMeta18), MMC_UNTAGPTR(_syst1), 11*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta18))[3] = _eqns;
          _syst1 = tmpMeta18;

          tmpMeta19 = MMC_TAGPTR(mmc_alloc_words(11));
          memcpy(MMC_UNTAGPTR(tmpMeta19), MMC_UNTAGPTR(_syst1), 11*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta19))[2] = _vars;
          _syst1 = tmpMeta19;
          tmpMeta8 = omc_BackendDAEUtil_clearEqSyst(threadData, _syst1);
          goto tmp10_done;
        }
        }
        goto tmp10_end;
        tmp10_end: ;
      }
      goto goto_9;
      goto_9:;
      MMC_THROW_INTERNAL();
      goto tmp10_done;
      tmp10_done:;
    }
  }
  _syst = tmpMeta8;

  tmpMeta20 = mmc_mk_cons(_syst, _osystlst);
  _osystlst = tmpMeta20;

  tmpMeta21 = mmc_mk_box3(3, &BackendDAE_BackendDAE_DAE__desc, _osystlst, _oshared);
  _outDAE = tmpMeta21;
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_addedScaledVars__states(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  modelica_metatype _systlst = NULL;
  modelica_metatype _osystlst = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _vars = NULL;
  modelica_metatype _eqns = NULL;
  modelica_metatype _lst_states = NULL;
  modelica_metatype _tmpv = NULL;
  modelica_metatype _cref = NULL;
  modelica_metatype _norm = NULL;
  modelica_metatype _y_norm = NULL;
  modelica_metatype _y = NULL;
  modelica_metatype _lhs = NULL;
  modelica_metatype _eqn = NULL;
  modelica_metatype _oshared = NULL;
  modelica_metatype _syst = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta18;
  modelica_metatype tmpMeta19;
  modelica_metatype tmpMeta20;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  // _systlst has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _osystlst = tmpMeta1;
  // _vars has no default value.
  // _eqns has no default value.
  // _lst_states has no default value.
  // _tmpv has no default value.
  // _cref has no default value.
  // _norm has no default value.
  // _y_norm has no default value.
  // _y has no default value.
  // _lhs has no default value.
  // _eqn has no default value.
  // _oshared has no default value.
  // _syst has no default value.
  /* Pattern-matching assignment */
  tmpMeta2 = _inDAE;
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 3));
  _systlst = tmpMeta3;
  _oshared = tmpMeta4;

  {
    modelica_metatype _syst;
    for (tmpMeta5 = _systlst; !listEmpty(tmpMeta5); tmpMeta5=MMC_CDR(tmpMeta5))
    {
      _syst = MMC_CAR(tmpMeta5);
      { /* match expression */
        modelica_metatype tmp9_1;
        tmp9_1 = _syst;
        {
          modelica_metatype _syst1 = NULL;
          volatile mmc_switch_type tmp9;
          int tmp10;
          // _syst1 has no default value.
          tmp9 = 0;
          for (; tmp9 < 1; tmp9++) {
            switch (MMC_SWITCH_CAST(tmp9)) {
            case 0: {
              modelica_metatype tmpMeta11;
              modelica_metatype tmpMeta12;
              modelica_metatype tmpMeta13;
              modelica_metatype tmpMeta14;
              modelica_metatype tmpMeta15;
              modelica_metatype tmpMeta16;
              modelica_metatype tmpMeta17;
              tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp9_1), 2));
              tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp9_1), 3));
              
              _syst1 = tmp9_1;
              _vars = tmpMeta11;
              _eqns = tmpMeta12;
              /* Pattern matching succeeded */
              _lst_states = omc_List_select(threadData, omc_BackendVariable_varList(threadData, _vars), boxvar_BackendVariable_isStateVar);

              {
                modelica_metatype _v;
                for (tmpMeta13 = _lst_states; !listEmpty(tmpMeta13); tmpMeta13=MMC_CDR(tmpMeta13))
                {
                  _v = MMC_CAR(tmpMeta13);
                  _cref = omc_BackendVariable_varCref(threadData, _v);

                  _tmpv = omc_BackendVariable_createVar(threadData, _cref, _OMC_LIT138);

                  _y = omc_Expression_crefExp(threadData, _cref);

                  _norm = omc_BackendVariable_getVarNominalValue(threadData, _v);

                  _y_norm = omc_Expression_expDiv(threadData, _y, _norm);

                  _y_norm = omc_ExpressionSimplify_simplify(threadData, _y_norm, NULL);

                  _cref = omc_BackendVariable_varCref(threadData, _tmpv);

                  _lhs = omc_Expression_crefExp(threadData, _cref);

                  tmpMeta14 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _lhs, _y_norm, _OMC_LIT9, _OMC_LIT41);
                  _eqn = tmpMeta14;

                  _eqns = omc_BackendEquation_add(threadData, _eqn, _eqns);

                  _vars = omc_BackendVariable_addVar(threadData, _tmpv, _vars);
                }
              }

              tmpMeta16 = MMC_TAGPTR(mmc_alloc_words(11));
              memcpy(MMC_UNTAGPTR(tmpMeta16), MMC_UNTAGPTR(_syst1), 11*sizeof(modelica_metatype));
              ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta16))[2] = _vars;
              _syst1 = tmpMeta16;

              tmpMeta17 = MMC_TAGPTR(mmc_alloc_words(11));
              memcpy(MMC_UNTAGPTR(tmpMeta17), MMC_UNTAGPTR(_syst1), 11*sizeof(modelica_metatype));
              ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta17))[3] = _eqns;
              _syst1 = tmpMeta17;
              tmpMeta6 = omc_BackendDAEUtil_clearEqSyst(threadData, _syst1);
              goto tmp8_done;
            }
            }
            goto tmp8_end;
            tmp8_end: ;
          }
          goto goto_7;
          goto_7:;
          MMC_THROW_INTERNAL();
          goto tmp8_done;
          tmp8_done:;
        }
      }
      _syst = tmpMeta6;

      tmpMeta18 = mmc_mk_cons(_syst, _osystlst);
      _osystlst = tmpMeta18;
    }
  }

  tmpMeta20 = mmc_mk_box3(3, &BackendDAE_BackendDAE_DAE__desc, _osystlst, _oshared);
  _outDAE = tmpMeta20;
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_updateStatesVars(threadData_t *threadData, modelica_metatype _inVars, modelica_metatype _inNewStates, modelica_boolean _noStateFound)
{
  modelica_metatype _outVars = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outVars has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_boolean tmp4_2;
    tmp4_1 = _inNewStates;
    tmp4_2 = _noStateFound;
    {
      modelica_metatype _var = NULL;
      modelica_metatype _newStates = NULL;
      modelica_metatype _vars = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _var has no default value.
      // _newStates has no default value.
      // _vars has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (1 /* true */ != tmp4_2) goto tmp3_end;
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta1 = _inVars;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_boolean tmp8;
          modelica_boolean tmp9;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          
          _var = tmpMeta6;
          _newStates = tmpMeta7;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp8 = omc_BackendVariable_isVarDiscrete(threadData, _var);
          if (0 /* false */ != tmp8) goto goto_2;

          /* Pattern-matching assignment */
          tmp9 = omc_BackendVariable_isStateVar(threadData, _var);
          if (0 /* false */ != tmp9) goto goto_2;

          _var = omc_BackendVariable_setVarKind(threadData, _var, _OMC_LIT28);

          _vars = omc_BackendVariable_addVar(threadData, _var, _inVars);
          tmpMeta1 = omc_BackendDAEOptimize_updateStatesVars(threadData, _vars, _newStates, 1 /* true */);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta10 = MMC_CAR(tmp4_1);
          tmpMeta11 = MMC_CDR(tmp4_1);
          
          _newStates = tmpMeta11;
          /* Pattern matching succeeded */
          tmpMeta1 = omc_BackendDAEOptimize_updateStatesVars(threadData, _inVars, _newStates, _noStateFound);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outVars = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outVars;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_updateStatesVars(threadData_t *threadData, modelica_metatype _inVars, modelica_metatype _inNewStates, modelica_metatype _noStateFound)
{
  modelica_integer tmp1;
  modelica_metatype _outVars = NULL;
  tmp1 = mmc_unbox_integer(_noStateFound);
  _outVars = omc_BackendDAEOptimize_updateStatesVars(threadData, _inVars, _inNewStates, tmp1);
  /* skip box _outVars; BackendDAE.Variables */
  return _outVars;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_updateStatesVar(threadData_t *threadData, modelica_metatype _inVars, modelica_metatype _var, modelica_metatype _iExp, modelica_metatype *out_oExp)
{
  modelica_metatype _outVars = NULL;
  modelica_metatype _oExp = NULL;
  modelica_metatype _var1 = NULL;
  modelica_metatype _arg = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outVars = _inVars;
  _oExp = _iExp;
  // _var1 has no default value.
  // _arg has no default value.
  if(omc_BackendVariable_isVarNonDifferentiable(threadData, _var))
  {
    /* Pattern-matching assignment */
    tmpMeta1 = _iExp;
    if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,13,3) == 0) MMC_THROW_INTERNAL();
    tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
    if (listEmpty(tmpMeta2)) MMC_THROW_INTERNAL();
    tmpMeta3 = MMC_CAR(tmpMeta2);
    tmpMeta4 = MMC_CDR(tmpMeta2);
    if (!listEmpty(tmpMeta4)) MMC_THROW_INTERNAL();
    _arg = tmpMeta3;

    tmpMeta5 = mmc_mk_cons(omc_ExpressionDump_printExpStr(threadData, _arg), MMC_REFSTRUCTLIT(mmc_nil));
    omc_Error_addSourceMessageAndFail(threadData, _OMC_LIT142, tmpMeta5, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_var), 10)))), 2))));
  }
  else
  {
    if(omc_BackendVariable_isVarDiscrete(threadData, _var))
    {
      _oExp = _OMC_LIT139;
    }
    else
    {
      if(((!omc_BackendVariable_isStateVar(threadData, _var)) || omc_BackendVariable_varStateSelectForced(threadData, _var)))
      {
        _var1 = omc_BackendVariable_setVarKind(threadData, _var, _OMC_LIT28);

        _outVars = omc_BackendVariable_addVar(threadData, _var1, _inVars);

        _oExp = _iExp;
      }
    }
  }
  _return: OMC_LABEL_UNUSED
  if (out_oExp) { *out_oExp = _oExp; }
  return _outVars;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_derCrefsExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inVars, modelica_metatype *out_outVars)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _outVars = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _outVars has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inExp;
    tmp4_2 = _inVars;
    {
      modelica_metatype _cr = NULL;
      modelica_metatype _vars = NULL;
      modelica_metatype _varlst = NULL;
      modelica_metatype _v = NULL;
      modelica_metatype _e = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _cr has no default value.
      // _vars has no default value.
      // _varlst has no default value.
      // _v has no default value.
      // _e has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,1) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (3 != MMC_STRLEN(tmpMeta7) || strcmp(MMC_STRINGDATA(_OMC_LIT20), MMC_STRINGDATA(tmpMeta7)) != 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_CAR(tmpMeta8);
          tmpMeta10 = MMC_CDR(tmpMeta8);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,6,2) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
          if (!listEmpty(tmpMeta10)) goto tmp3_end;
          
          _e = tmp4_1;
          _cr = tmpMeta11;
          _vars = tmp4_2;
          /* Pattern matching succeeded */
          _v = omc_BackendVariable_getVarSingle(threadData, _cr, _vars, NULL);

          _vars = omc_BackendDAEOptimize_updateStatesVar(threadData, _vars, _v, _e ,&_e);
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _vars;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,1,1) == 0) goto tmp3_end;
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
          if (3 != MMC_STRLEN(tmpMeta13) || strcmp(MMC_STRINGDATA(_OMC_LIT20), MMC_STRINGDATA(tmpMeta13)) != 0) goto tmp3_end;
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta14)) goto tmp3_end;
          tmpMeta15 = MMC_CAR(tmpMeta14);
          tmpMeta16 = MMC_CDR(tmpMeta14);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,6,2) == 0) goto tmp3_end;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
          if (!listEmpty(tmpMeta16)) goto tmp3_end;
          
          _e = tmp4_1;
          _cr = tmpMeta17;
          _vars = tmp4_2;
          /* Pattern matching succeeded */
          _varlst = omc_BackendVariable_getVar(threadData, _cr, _vars, NULL);

          _vars = omc_BackendDAEOptimize_updateStatesVars(threadData, _vars, _varlst, 0 /* false */);
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _vars;
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _inVars;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outExp = tmpMeta[0+0];
  _outVars = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outVars) { *out_outVars = _outVars; }
  return _outExp;
}

static modelica_metatype closure1_BackendDAEOptimize_expandDerExp(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp, modelica_metatype $in_vars, modelica_metatype tmp27)
{
  modelica_metatype inShared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_expandDerExp(thData, $in_exp, $in_vars, inShared, tmp27);
}static modelica_metatype closure2_BackendDAEOptimize_expandDerExp(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp, modelica_metatype $in_vars, modelica_metatype tmp38)
{
  modelica_metatype inShared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_expandDerExp(thData, $in_exp, $in_vars, inShared, tmp38);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_expandDerExp(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype __omcQ_24in_5Fvars, modelica_metatype _inShared, modelica_metatype *out_vars)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _vars = NULL;
  modelica_boolean _failed;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  _vars = __omcQ_24in_5Fvars;
  _failed = 0 /* false */;
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _cr = NULL;
      modelica_string _str = NULL;
      modelica_metatype _varlst = NULL;
      modelica_metatype _v = NULL;
      modelica_metatype _shared = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e1 has no default value.
      // _e2 has no default value.
      // _cr has no default value.
      // _str has no default value.
      // _varlst has no default value.
      // _v has no default value.
      // _shared has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 7; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,1) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (3 != MMC_STRLEN(tmpMeta7) || strcmp(MMC_STRINGDATA(_OMC_LIT20), MMC_STRINGDATA(tmpMeta7)) != 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_CAR(tmpMeta8);
          tmpMeta10 = MMC_CDR(tmpMeta8);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,13,3) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,1,1) == 0) goto tmp3_end;
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
          if (3 != MMC_STRLEN(tmpMeta12) || strcmp(MMC_STRINGDATA(_OMC_LIT20), MMC_STRINGDATA(tmpMeta12)) != 0) goto tmp3_end;
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
          if (listEmpty(tmpMeta13)) goto tmp3_end;
          tmpMeta14 = MMC_CAR(tmpMeta13);
          tmpMeta15 = MMC_CDR(tmpMeta13);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,6,2) == 0) goto tmp3_end;
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
          if (!listEmpty(tmpMeta15)) goto tmp3_end;
          if (!listEmpty(tmpMeta10)) goto tmp3_end;
          
          _cr = tmpMeta16;
          tmp4 += 4; /* Pattern matching succeeded; we may skip some cases if we fail */
          _str = omc_ComponentReference_crefStr(threadData, _cr);

          tmpMeta17 = mmc_mk_cons(_OMC_LIT143, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT144, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT145, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT146, MMC_REFSTRUCTLIT(mmc_nil))))))));
          _str = stringAppendList(tmpMeta17);

          tmpMeta18 = mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT58, tmpMeta18);
          goto goto_2;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_boolean tmp25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta28;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,1,1) == 0) goto tmp3_end;
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 2));
          if (3 != MMC_STRLEN(tmpMeta20) || strcmp(MMC_STRINGDATA(_OMC_LIT20), MMC_STRINGDATA(tmpMeta20)) != 0) goto tmp3_end;
          tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta21)) goto tmp3_end;
          tmpMeta22 = MMC_CAR(tmpMeta21);
          tmpMeta23 = MMC_CDR(tmpMeta21);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta22,6,2) == 0) goto tmp3_end;
          tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta24,6,2) == 0) goto tmp3_end;
          if (!listEmpty(tmpMeta23)) goto tmp3_end;
          
          _e1 = tmp4_1;
          tmp4 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
          /* Pattern-matching tuple assignment */
          tmpMeta26 = omc_Expression_extendArrExp(threadData, _e1, 0 /* false */, &tmp25);
          _e2 = tmpMeta26;
          if (1 /* true */ != tmp25) goto goto_2;
          tmpMeta28 = mmc_mk_box1(0, _inShared);
          tmpMeta[0+0] = omc_Expression_traverseExpBottomUp(threadData, _e2, (modelica_fnptr) mmc_mk_box2(0,closure1_BackendDAEOptimize_expandDerExp,tmpMeta28), _vars, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          modelica_boolean tmp36;
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta39;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta29,1,1) == 0) goto tmp3_end;
          tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta29), 2));
          if (3 != MMC_STRLEN(tmpMeta30) || strcmp(MMC_STRINGDATA(_OMC_LIT20), MMC_STRINGDATA(tmpMeta30)) != 0) goto tmp3_end;
          tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta31)) goto tmp3_end;
          tmpMeta32 = MMC_CAR(tmpMeta31);
          tmpMeta33 = MMC_CDR(tmpMeta31);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta32,6,2) == 0) goto tmp3_end;
          tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta34,9,4) == 0) goto tmp3_end;
          tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta34), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta35,3,1) == 0) goto tmp3_end;
          if (!listEmpty(tmpMeta33)) goto tmp3_end;
          
          _e1 = tmp4_1;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta37 = omc_Expression_extendArrExp(threadData, _e1, 0 /* false */, &tmp36);
          _e2 = tmpMeta37;
          if (1 /* true */ != tmp36) goto goto_2;
          tmpMeta39 = mmc_mk_box1(0, _inShared);
          tmpMeta[0+0] = omc_Expression_traverseExpBottomUp(threadData, _e2, (modelica_fnptr) mmc_mk_box2(0,closure2_BackendDAEOptimize_expandDerExp,tmpMeta39), _vars, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta40;
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          modelica_metatype tmpMeta44;
          modelica_metatype tmpMeta45;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta40,1,1) == 0) goto tmp3_end;
          tmpMeta41 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta40), 2));
          if (3 != MMC_STRLEN(tmpMeta41) || strcmp(MMC_STRINGDATA(_OMC_LIT20), MMC_STRINGDATA(tmpMeta41)) != 0) goto tmp3_end;
          tmpMeta42 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta42)) goto tmp3_end;
          tmpMeta43 = MMC_CAR(tmpMeta42);
          tmpMeta44 = MMC_CDR(tmpMeta42);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta43,6,2) == 0) goto tmp3_end;
          tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta43), 2));
          if (!listEmpty(tmpMeta44)) goto tmp3_end;
          
          _e1 = tmp4_1;
          _cr = tmpMeta45;
          /* Pattern matching succeeded */
          _v = omc_BackendVariable_getVarSingle(threadData, _cr, _vars, NULL);

          { /* matchcontinue expression */
            {
              volatile mmc_switch_type tmp48;
              int tmp49;
              tmp48 = 0;
              MMC_TRY_INTERNAL(mmc_jumper)
              tmp47_top:
              threadData->mmc_jumper = &new_mmc_jumper;
              for (; tmp48 < 2; tmp48++) {
                switch (MMC_SWITCH_CAST(tmp48)) {
                case 0: {
                  /* Pattern matching succeeded */
                  _vars = omc_BackendDAEOptimize_updateStatesVar(threadData, _vars, _v, _e1 ,&_e1);
                  goto tmp47_done;
                }
                case 1: {
                  /* Pattern matching succeeded */
                  _failed = 1 /* true */;

                  goto goto_46;
                  goto tmp47_done;
                }
                }
                goto tmp47_end;
                tmp47_end: ;
              }
              goto goto_46;
              tmp47_done:
              (void)tmp48;
              MMC_RESTORE_INTERNAL(mmc_jumper);
              goto tmp47_done2;
              goto_46:;
              MMC_CATCH_INTERNAL(mmc_jumper);
              if (++tmp48 < 2) {
                goto tmp47_top;
              }
              goto goto_2;
              tmp47_done2:;
            }
          }
          ;
          tmpMeta[0+0] = _e1;
          tmpMeta[0+1] = _vars;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta50;
          modelica_metatype tmpMeta51;
          modelica_metatype tmpMeta52;
          modelica_metatype tmpMeta53;
          modelica_metatype tmpMeta54;
          modelica_metatype tmpMeta55;
          modelica_boolean tmp56;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta50 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta50,1,1) == 0) goto tmp3_end;
          tmpMeta51 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta50), 2));
          if (3 != MMC_STRLEN(tmpMeta51) || strcmp(MMC_STRINGDATA(_OMC_LIT20), MMC_STRINGDATA(tmpMeta51)) != 0) goto tmp3_end;
          tmpMeta52 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta52)) goto tmp3_end;
          tmpMeta53 = MMC_CAR(tmpMeta52);
          tmpMeta54 = MMC_CDR(tmpMeta52);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta53,6,2) == 0) goto tmp3_end;
          tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta53), 2));
          if (!listEmpty(tmpMeta54)) goto tmp3_end;
          
          _e1 = tmp4_1;
          _cr = tmpMeta55;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp56 = _failed;
          if (0 /* false */ != tmp56) goto goto_2;

          _varlst = omc_BackendVariable_getVar(threadData, _cr, _vars, NULL);

          _vars = omc_BackendDAEOptimize_updateStatesVars(threadData, _vars, _varlst, 0 /* false */);
          tmpMeta[0+0] = _e1;
          tmpMeta[0+1] = _vars;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta57;
          modelica_metatype tmpMeta58;
          modelica_metatype tmpMeta59;
          modelica_metatype tmpMeta60;
          modelica_metatype tmpMeta61;
          modelica_boolean tmp62;
          modelica_boolean tmp63;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta57 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta57,1,1) == 0) goto tmp3_end;
          tmpMeta58 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta57), 2));
          if (3 != MMC_STRLEN(tmpMeta58) || strcmp(MMC_STRINGDATA(_OMC_LIT20), MMC_STRINGDATA(tmpMeta58)) != 0) goto tmp3_end;
          tmpMeta59 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta59)) goto tmp3_end;
          tmpMeta60 = MMC_CAR(tmpMeta59);
          tmpMeta61 = MMC_CDR(tmpMeta59);
          if (!listEmpty(tmpMeta61)) goto tmp3_end;
          
          _e1 = tmpMeta60;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp62 = _failed;
          if (0 /* false */ != tmp62) goto goto_2;

          _e2 = omc_Differentiate_differentiateExpTime(threadData, _e1, _vars, omc_Mutable_access(threadData, _inShared) ,&_shared);

          /* Pattern-matching assignment */
          tmp63 = omc_Expression_isZero(threadData, _e2);
          if (0 /* false */ != tmp63) goto goto_2;

          omc_Mutable_update(threadData, _inShared, _shared);

          _e2 = omc_ExpressionSimplify_simplify(threadData, _e2, NULL);

          omc_Expression_traverseExpBottomUp(threadData, _e2, boxvar_BackendDAEOptimize_derCrefsExp, _vars ,&_vars);
          tmpMeta[0+0] = _e2;
          tmpMeta[0+1] = _vars;
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = _vars;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 7) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _exp = tmpMeta[0+0];
  _vars = tmpMeta[0+1];

  if(_failed)
  {
    MMC_THROW_INTERNAL();
  }
  _return: OMC_LABEL_UNUSED
  if (out_vars) { *out_vars = _vars; }
  return _exp;
}

static modelica_metatype closure3_BackendDAEOptimize_expandDerExp(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp, modelica_metatype $in_vars, modelica_metatype tmp4)
{
  modelica_metatype inShared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_expandDerExp(thData, $in_exp, $in_vars, inShared, tmp4);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserexpandDerExp(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype __omcQ_24in_5Ftpl, modelica_metatype _shared, modelica_metatype *out_tpl)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _tpl = NULL;
  modelica_metatype _exp_1 = NULL;
  modelica_metatype _ext_arg = NULL;
  modelica_metatype _vars1 = NULL;
  modelica_metatype _vars2 = NULL;
  modelica_metatype _ops = NULL;
  modelica_metatype _funcs = NULL;
  modelica_boolean _b;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  _tpl = __omcQ_24in_5Ftpl;
  // _exp_1 has no default value.
  // _ext_arg has no default value.
  // _vars1 has no default value.
  // _vars2 has no default value.
  // _ops has no default value.
  // _funcs has no default value.
  // _b has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _tpl;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  _vars1 = tmpMeta2;
  _ops = tmpMeta3;

  tmpMeta5 = mmc_mk_box1(0, _shared);
  _exp_1 = omc_Expression_traverseExpBottomUp(threadData, _exp, (modelica_fnptr) mmc_mk_box2(0,closure3_BackendDAEOptimize_expandDerExp,tmpMeta5), _vars1 ,&_vars2);

  if((!(referenceEq(_vars1, _vars2) && referenceEq(_exp, _exp_1))))
  {
    tmpMeta7 = mmc_mk_box4(8, &DAE_SymbolicOperation_OP__DIFFERENTIATE__desc, _OMC_LIT30, _exp, _exp_1);
    tmpMeta6 = mmc_mk_cons(tmpMeta7, _ops);
    _ops = tmpMeta6;

    _exp = _exp_1;

    tmpMeta8 = mmc_mk_box2(0, _vars2, _ops);
    _tpl = tmpMeta8;
  }
  _return: OMC_LABEL_UNUSED
  if (out_tpl) { *out_tpl = _tpl; }
  return _exp;
}

static modelica_metatype closure4_BackendDAEOptimize_traverserexpandDerExp(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp, modelica_metatype $in_tpl, modelica_metatype tmp4)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_traverserexpandDerExp(thData, $in_exp, $in_tpl, shared, tmp4);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserexpandDerEquation(threadData_t *threadData, modelica_metatype __omcQ_24in_5Feq, modelica_metatype __omcQ_24in_5Fvars, modelica_metatype _shared, modelica_metatype *out_vars)
{
  modelica_metatype _eq = NULL;
  modelica_metatype _vars = NULL;
  modelica_metatype _e = NULL;
  modelica_metatype _e1 = NULL;
  modelica_metatype _ext_arg = NULL;
  modelica_metatype _ext_art1 = NULL;
  modelica_metatype _funcs = NULL;
  modelica_boolean _b;
  modelica_metatype _ops = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _eq = __omcQ_24in_5Feq;
  _vars = __omcQ_24in_5Fvars;
  // _e has no default value.
  // _e1 has no default value.
  // _ext_arg has no default value.
  // _ext_art1 has no default value.
  // _funcs has no default value.
  // _b has no default value.
  // _ops has no default value.
  /* Pattern-matching tuple assignment */
  tmpMeta5 = mmc_mk_box1(0, _shared);
  tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta7 = mmc_mk_box2(0, _vars, tmpMeta6);
  tmpMeta8 = omc_BackendEquation_traverseExpsOfEquation(threadData, _eq, (modelica_fnptr) mmc_mk_box2(0,closure4_BackendDAEOptimize_traverserexpandDerExp,tmpMeta5), tmpMeta7, &tmpMeta1);
  _eq = tmpMeta8;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  _vars = tmpMeta2;
  _ops = tmpMeta3;

  _eq = omc_List_foldr(threadData, _ops, boxvar_BackendEquation_addOperation, _eq);
  _return: OMC_LABEL_UNUSED
  if (out_vars) { *out_vars = _vars; }
  return _eq;
}

static modelica_metatype closure5_BackendDAEOptimize_traverserexpandDerEquation(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_eq, modelica_metatype $in_vars, modelica_metatype tmp9)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_traverserexpandDerEquation(thData, $in_eq, $in_vars, shared, tmp9);
}static modelica_metatype closure6_BackendDAEOptimize_traverserexpandDerEquation(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_eq, modelica_metatype $in_vars, modelica_metatype tmp11)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_traverserexpandDerEquation(thData, $in_eq, $in_vars, shared, tmp11);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_expandDerOperatorWork(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fsyst, modelica_metatype __omcQ_24in_5Fshared, modelica_metatype *out_shared)
{
  modelica_metatype _syst = NULL;
  modelica_metatype _shared = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _syst = __omcQ_24in_5Fsyst;
  _shared = __omcQ_24in_5Fshared;
  
  
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _syst;
    tmp4_2 = _shared;
    {
      modelica_metatype _vars = NULL;
      modelica_metatype _eqns = NULL;
      modelica_metatype _inieqns = NULL;
      modelica_metatype _shared_arr = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _vars has no default value.
      // _eqns has no default value.
      // _inieqns has no default value.
      // _shared_arr has no default value.
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          
          _syst = tmp4_1;
          _vars = tmpMeta6;
          _eqns = tmpMeta7;
          _inieqns = tmpMeta8;
          /* Pattern matching succeeded */
          _shared_arr = omc_Mutable_create(threadData, _shared);

          tmpMeta10 = mmc_mk_box1(0, _shared_arr);
          omc_BackendEquation_traverseEquationArray__WithUpdate(threadData, _eqns, (modelica_fnptr) mmc_mk_box2(0,closure5_BackendDAEOptimize_traverserexpandDerEquation,tmpMeta10), _vars ,&_vars);

          tmpMeta12 = mmc_mk_box1(0, _shared_arr);
          omc_BackendEquation_traverseEquationArray__WithUpdate(threadData, _inieqns, (modelica_fnptr) mmc_mk_box2(0,closure6_BackendDAEOptimize_traverserexpandDerEquation,tmpMeta12), _vars ,&_vars);

          tmpMeta13 = MMC_TAGPTR(mmc_alloc_words(11));
          memcpy(MMC_UNTAGPTR(tmpMeta13), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta13))[2] = _vars;
          _syst = tmpMeta13;
          tmpMeta[0+0] = _syst;
          tmpMeta[0+1] = omc_Mutable_access(threadData, _shared_arr);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _syst = tmpMeta[0+0];
  _shared = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_shared) { *out_shared = _shared; }
  return _syst;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_expandDerOperator(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  _outDAE = omc_BackendDAEUtil_mapEqSystem(threadData, _inDAE, boxvar_BackendDAEOptimize_expandDerOperatorWork);
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_expandAlgorithmStmts(threadData_t *threadData, modelica_metatype _inAlg, modelica_metatype _inOutputs, modelica_metatype _inVars, modelica_boolean _isInitialEquation)
{
  modelica_metatype _outAlg = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outAlg has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _inAlg;
    tmp4_2 = _inOutputs;
    {
      modelica_metatype _out = NULL;
      modelica_metatype _initExp = NULL;
      modelica_metatype _rest = NULL;
      modelica_metatype _cref = NULL;
      modelica_metatype _vars = NULL;
      modelica_metatype _stmt = NULL;
      modelica_metatype _type_ = NULL;
      modelica_metatype _statements = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _out has no default value.
      // _initExp has no default value.
      // _rest has no default value.
      // _cref has no default value.
      // _vars has no default value.
      // _stmt has no default value.
      // _type_ has no default value.
      // _statements has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_2)) goto tmp3_end;
          
          _statements = tmp4_1;
          /* Pattern matching succeeded */
          tmpMeta1 = _statements;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_2);
          tmpMeta7 = MMC_CDR(tmp4_2);
          
          _out = tmpMeta6;
          _rest = tmpMeta7;
          _statements = tmp4_1;
          /* Pattern matching succeeded */
          _cref = omc_Expression_expCref(threadData, _out);

          _vars = omc_BackendVariable_getVar(threadData, _cref, _inVars, NULL);

          {
            modelica_metatype _v;
            for (tmpMeta8 = _vars; !listEmpty(tmpMeta8); tmpMeta8=MMC_CDR(tmpMeta8))
            {
              _v = MMC_CAR(tmpMeta8);
              _type_ = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_v), 6)));

              if((omc_BackendVariable_isVarDiscrete(threadData, _v) && (!_isInitialEquation)))
              {
                tmpMeta9 = mmc_mk_cons(omc_Expression_crefExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_v), 2)))), MMC_REFSTRUCTLIT(mmc_nil));
                _initExp = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT147, tmpMeta9, _type_);
              }
              else
              {
                _initExp = omc_Expression_crefExp(threadData, omc_ComponentReference_crefPrefixStart(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_v), 2)))));
              }

              tmpMeta10 = mmc_mk_box3(9, &DAE_Exp_CREF__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_v), 2))), _type_);
              tmpMeta11 = mmc_mk_box3(3, &DAE_Properties_PROP__desc, _type_, _OMC_LIT148);
              tmpMeta12 = mmc_mk_box3(3, &DAE_Properties_PROP__desc, _type_, _OMC_LIT148);
              _stmt = omc_Algorithm_makeAssignment(threadData, tmpMeta10, tmpMeta11, _initExp, tmpMeta12, _OMC_LIT154, _OMC_LIT155, _OMC_LIT9);

              tmpMeta13 = mmc_mk_cons(_stmt, _statements);
              _statements = tmpMeta13;
            }
          }
          /* Tail recursive call */
          _inAlg = _statements;
          _inOutputs = _rest;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outAlg = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outAlg;
}
modelica_metatype boxptr_BackendDAEOptimize_expandAlgorithmStmts(threadData_t *threadData, modelica_metatype _inAlg, modelica_metatype _inOutputs, modelica_metatype _inVars, modelica_metatype _isInitialEquation)
{
  modelica_integer tmp1;
  modelica_metatype _outAlg = NULL;
  tmp1 = mmc_unbox_integer(_isInitialEquation);
  _outAlg = omc_BackendDAEOptimize_expandAlgorithmStmts(threadData, _inAlg, _inOutputs, _inVars, tmp1);
  /* skip box _outAlg; list<DAE.Statement> */
  return _outAlg;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_eaddInitialStmtsToAlgorithms1Helper(threadData_t *threadData, modelica_metatype _inEq, modelica_metatype _inTpl, modelica_metatype *out_outTpl)
{
  modelica_metatype _outEq = NULL;
  modelica_metatype _outTpl = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEq has no default value.
  _outTpl = _inTpl;
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _inEq;
    tmp4_2 = _inTpl;
    {
      modelica_metatype _alg = NULL;
      modelica_metatype _statements = NULL;
      modelica_metatype _vars = NULL;
      modelica_integer _size;
      modelica_metatype _outputs = NULL;
      modelica_metatype _source = NULL;
      modelica_metatype _crlst = NULL;
      modelica_metatype _crExpand = NULL;
      modelica_metatype _attr = NULL;
      modelica_boolean _isInitialEquations;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _alg has no default value.
      // _statements has no default value.
      // _vars has no default value.
      // _size has no default value.
      // _outputs has no default value.
      // _source has no default value.
      // _crlst has no default value.
      // _crExpand has no default value.
      // _attr has no default value.
      // _isInitialEquations has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_integer tmp15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,5) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmp7 = mmc_unbox_integer(tmpMeta6);
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp15 = mmc_unbox_integer(tmpMeta14);
          _size = tmp7  /* pattern as ty=Integer */;
          _alg = tmpMeta8;
          _statements = tmpMeta9;
          _source = tmpMeta10;
          _crExpand = tmpMeta11;
          _attr = tmpMeta12;
          _vars = tmpMeta13;
          _isInitialEquations = tmp15  /* pattern as ty=Boolean */;
          /* Pattern matching succeeded */
          _crlst = omc_CheckModel_checkAndGetAlgorithmOutputs(threadData, _alg, _source, _crExpand);

          _outputs = omc_List_map(threadData, _crlst, boxvar_Expression_crefExp);

          _statements = omc_BackendDAEOptimize_expandAlgorithmStmts(threadData, _statements, _outputs, _vars, _isInitialEquations);
          tmpMeta16 = mmc_mk_box2(3, &DAE_Algorithm_ALGORITHM__STMTS__desc, _statements);
          tmpMeta17 = mmc_mk_box6(7, &BackendDAE_Equation_ALGORITHM__desc, mmc_mk_integer(_size), tmpMeta16, _source, _crExpand, _attr);
          tmpMeta1 = tmpMeta17;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _inEq;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outEq = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  if (out_outTpl) { *out_outTpl = _outTpl; }
  return _outEq;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_addInitialStmtsToAlgorithms1(threadData_t *threadData, modelica_metatype _syst, modelica_boolean _isInitialSystem, modelica_metatype _shared, modelica_metatype *out_oshared)
{
  modelica_metatype _osyst = NULL;
  modelica_metatype _oshared = NULL;
  modelica_metatype _ordvars = NULL;
  modelica_metatype _allVars = NULL;
  modelica_metatype _ordeqns = NULL;
  modelica_metatype _initEqns = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _osyst = _syst;
  _oshared = _shared;
  // _ordvars has no default value.
  // _allVars has no default value.
  // _ordeqns has no default value.
  // _initEqns has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _osyst;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  _ordvars = tmpMeta2;
  _ordeqns = tmpMeta3;

  tmpMeta4 = mmc_mk_box2(0, _ordvars, mmc_mk_boolean(_isInitialSystem));
  omc_BackendEquation_traverseEquationArray__WithUpdate(threadData, _ordeqns, boxvar_BackendDAEOptimize_eaddInitialStmtsToAlgorithms1Helper, tmpMeta4, NULL);
  _return: OMC_LABEL_UNUSED
  if (out_oshared) { *out_oshared = _oshared; }
  return _osyst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_addInitialStmtsToAlgorithms1(threadData_t *threadData, modelica_metatype _syst, modelica_metatype _isInitialSystem, modelica_metatype _shared, modelica_metatype *out_oshared)
{
  modelica_integer tmp1;
  modelica_metatype _osyst = NULL;
  tmp1 = mmc_unbox_integer(_isInitialSystem);
  _osyst = omc_BackendDAEOptimize_addInitialStmtsToAlgorithms1(threadData, _syst, tmp1, _shared, out_oshared);
  /* skip box _osyst; BackendDAE.EqSystem */
  /* skip box _oshared; BackendDAE.Shared */
  return _osyst;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_addInitialStmtsToAlgorithms(threadData_t *threadData, modelica_metatype _inDAE, modelica_boolean _isInitialSystem)
{
  modelica_metatype _outDAE = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  _outDAE = omc_BackendDAEUtil_mapEqSystem1(threadData, _inDAE, boxvar_BackendDAEOptimize_addInitialStmtsToAlgorithms1, mmc_mk_boolean(_isInitialSystem));
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}
modelica_metatype boxptr_BackendDAEOptimize_addInitialStmtsToAlgorithms(threadData_t *threadData, modelica_metatype _inDAE, modelica_metatype _isInitialSystem)
{
  modelica_integer tmp1;
  modelica_metatype _outDAE = NULL;
  tmp1 = mmc_unbox_integer(_isInitialSystem);
  _outDAE = omc_BackendDAEOptimize_addInitialStmtsToAlgorithms(threadData, _inDAE, tmp1);
  /* skip box _outDAE; BackendDAE.BackendDAE */
  return _outDAE;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_removeLocalKnownVars2(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fsyst, modelica_metatype __omcQ_24in_5Fshared, modelica_metatype *out_shared)
{
  modelica_metatype _syst = NULL;
  modelica_metatype _shared = NULL;
  modelica_metatype _m = NULL;
  modelica_metatype _potentialLocalKnownVar = NULL;
  modelica_metatype _potentialGlobalKnownEquation = NULL;
  modelica_metatype _orderedVars = NULL;
  modelica_metatype _orderedEqs = NULL;
  modelica_metatype _lhs = NULL;
  modelica_metatype _rhs = NULL;
  modelica_metatype _crefExp = NULL;
  modelica_metatype _binding = NULL;
  modelica_metatype _localKnownVars = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _localKnownEqns = NULL;
  modelica_metatype tmpMeta2;
  modelica_integer _eindex;
  modelica_integer _vindex;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_integer tmp7;
  modelica_metatype tmpMeta18;
  modelica_integer tmp19;
  modelica_integer tmp20;
  modelica_metatype tmpMeta21;
  modelica_metatype tmpMeta22;
  modelica_metatype tmpMeta23;
  modelica_metatype tmpMeta24;
  modelica_metatype tmpMeta25;
  modelica_metatype tmpMeta26;
  modelica_metatype tmpMeta27;
  modelica_metatype tmpMeta28;
  modelica_metatype tmpMeta29;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _syst = __omcQ_24in_5Fsyst;
  _shared = __omcQ_24in_5Fshared;
  // _m has no default value.
  // _potentialLocalKnownVar has no default value.
  // _potentialGlobalKnownEquation has no default value.
  _orderedVars = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_syst), 2)));
  _orderedEqs = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_syst), 3)));
  // _lhs has no default value.
  // _rhs has no default value.
  // _crefExp has no default value.
  // _binding has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _localKnownVars = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _localKnownEqns = tmpMeta2;
  _eindex = ((modelica_integer) 0);
  // _vindex has no default value.
  omc_BackendDAEUtil_getAdjacencyMatrixScalar(threadData, _syst, _OMC_LIT22, mmc_mk_none(), omc_BackendDAEUtil_isInitializationDAE(threadData, _shared) ,&_m ,NULL ,NULL ,NULL);

  _m = omc_Array_map(threadData, _m, boxvar_Tearing_deleteNegativeEntries);

  {
    modelica_metatype _row;
    for (tmpMeta3 = _m, tmp20 = arrayLength(tmpMeta3), tmp19 = 1; tmp19 <= tmp20; tmp19++)
    {
      _row = arrayGet(tmpMeta3,tmp19);
      _eindex = ((modelica_integer) 1) + _eindex;

      if((listLength(_row) == ((modelica_integer) 1)))
      {
        /* Pattern-matching assignment */
        tmpMeta4 = _row;
        if (listEmpty(tmpMeta4)) MMC_THROW_INTERNAL();
        tmpMeta5 = MMC_CAR(tmpMeta4);
        tmpMeta6 = MMC_CDR(tmpMeta4);
        tmp7 = mmc_unbox_integer(tmpMeta5);
        if (!listEmpty(tmpMeta6)) MMC_THROW_INTERNAL();
        _vindex = tmp7  /* pattern as ty=Integer */;

        _potentialLocalKnownVar = omc_BackendVariable_getVarAt(threadData, _orderedVars, _vindex);

        _potentialGlobalKnownEquation = omc_BackendEquation_get(threadData, _orderedEqs, _eindex);

        { /* matchcontinue expression */
          {
            volatile mmc_switch_type tmp10;
            int tmp11;
            tmp10 = 0;
            MMC_TRY_INTERNAL(mmc_jumper)
            tmp9_top:
            threadData->mmc_jumper = &new_mmc_jumper;
            for (; tmp10 < 2; tmp10++) {
              switch (MMC_SWITCH_CAST(tmp10)) {
              case 0: {
                modelica_metatype tmpMeta12;
                modelica_metatype tmpMeta13;
                modelica_metatype tmpMeta14;
                modelica_metatype tmpMeta15;
                modelica_metatype tmpMeta16;
                modelica_metatype tmpMeta17;
                /* Pattern matching succeeded */
                /* Pattern-matching assignment */
                tmpMeta12 = _potentialGlobalKnownEquation;
                if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,0,4) == 0) goto goto_8;
                tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
                tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 3));
                _lhs = tmpMeta13;
                _rhs = tmpMeta14;

                _crefExp = omc_BackendVariable_varExp(threadData, _potentialLocalKnownVar);

                _binding = omc_ExpressionSolve_solve(threadData, _lhs, _rhs, _crefExp, mmc_mk_none(), NULL);

                _potentialLocalKnownVar = omc_BackendVariable_setBindExp(threadData, _potentialLocalKnownVar, mmc_mk_some(_binding));

                tmpMeta15 = mmc_mk_cons(mmc_mk_integer(_vindex), _localKnownVars);
                _localKnownVars = tmpMeta15;

                tmpMeta16 = mmc_mk_cons(mmc_mk_integer(_eindex), _localKnownEqns);
                _localKnownEqns = tmpMeta16;

                tmpMeta17 = MMC_TAGPTR(mmc_alloc_words(22));
                memcpy(MMC_UNTAGPTR(tmpMeta17), MMC_UNTAGPTR(_shared), 22*sizeof(modelica_metatype));
                ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta17))[3] = omc_BackendVariable_addVar(threadData, _potentialLocalKnownVar, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 3))));
                _shared = tmpMeta17;
                goto tmp9_done;
              }
              case 1: {
                /* Pattern matching succeeded */
                goto tmp9_done;
              }
              }
              goto tmp9_end;
              tmp9_end: ;
            }
            goto goto_8;
            tmp9_done:
            (void)tmp10;
            MMC_RESTORE_INTERNAL(mmc_jumper);
            goto tmp9_done2;
            goto_8:;
            MMC_CATCH_INTERNAL(mmc_jumper);
            if (++tmp10 < 2) {
              goto tmp9_top;
            }
            MMC_THROW_INTERNAL();
            tmp9_done2:;
          }
        }
        ;
      }
    }
  }

  _localKnownVars = omc_List_sort(threadData, _localKnownVars, boxvar_intLt);

  _localKnownEqns = listReverse(_localKnownEqns);

  {
    modelica_metatype _var;
    for (tmpMeta21 = _localKnownVars; !listEmpty(tmpMeta21); tmpMeta21=MMC_CDR(tmpMeta21))
    {
      _var = MMC_CAR(tmpMeta21);
      _orderedVars = omc_BackendVariable_removeVar(threadData, mmc_unbox_integer(_var), _orderedVars, NULL);
    }
  }

  {
    modelica_metatype _eqn;
    for (tmpMeta23 = _localKnownEqns; !listEmpty(tmpMeta23); tmpMeta23=MMC_CDR(tmpMeta23))
    {
      _eqn = MMC_CAR(tmpMeta23);
      _orderedEqs = omc_BackendEquation_delete(threadData, mmc_unbox_integer(_eqn), _orderedEqs);
    }
  }

  tmpMeta25 = MMC_TAGPTR(mmc_alloc_words(11));
  memcpy(MMC_UNTAGPTR(tmpMeta25), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta25))[4] = mmc_mk_none();
  _syst = tmpMeta25;

  tmpMeta26 = MMC_TAGPTR(mmc_alloc_words(11));
  memcpy(MMC_UNTAGPTR(tmpMeta26), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta26))[5] = mmc_mk_none();
  _syst = tmpMeta26;

  tmpMeta27 = MMC_TAGPTR(mmc_alloc_words(11));
  memcpy(MMC_UNTAGPTR(tmpMeta27), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta27))[7] = _OMC_LIT21;
  _syst = tmpMeta27;

  tmpMeta28 = MMC_TAGPTR(mmc_alloc_words(11));
  memcpy(MMC_UNTAGPTR(tmpMeta28), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta28))[2] = omc_BackendVariable_listVar(threadData, omc_BackendVariable_varList(threadData, _orderedVars));
  _syst = tmpMeta28;

  tmpMeta29 = MMC_TAGPTR(mmc_alloc_words(11));
  memcpy(MMC_UNTAGPTR(tmpMeta29), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta29))[3] = _orderedEqs;
  _syst = tmpMeta29;
  _return: OMC_LABEL_UNUSED
  if (out_shared) { *out_shared = _shared; }
  return _syst;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_removeLocalKnownVars(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  _outDAE = omc_BackendDAEUtil_mapEqSystem(threadData, _inDAE, boxvar_BackendDAEOptimize_removeLocalKnownVars2);
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_replaceEdgeChangeShared(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inDAE;
    {
      modelica_metatype _remeqns = NULL;
      modelica_metatype _systs = NULL;
      modelica_metatype _shared = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _remeqns has no default value.
      // _systs has no default value.
      // _shared has no default value.
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 7));
          
          _systs = tmpMeta6;
          _shared = tmpMeta7;
          _remeqns = tmpMeta8;
          /* Pattern matching succeeded */
          omc_BackendDAEUtil_traverseBackendDAEExpsEqns(threadData, _remeqns, boxvar_BackendDAEOptimize_traverserreplaceEdgeChange, mmc_mk_boolean(0 /* false */));
          tmpMeta9 = mmc_mk_box3(3, &BackendDAE_BackendDAE_DAE__desc, _systs, _shared);
          tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outDAE = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserExpreplaceEdgeChange(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inB, modelica_boolean *out_outB)
{
  modelica_metatype _outExp = NULL;
  modelica_boolean _outB;
  modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _outB has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _inExp;
    {
      modelica_metatype _e = NULL;
      modelica_metatype _ty = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e has no default value.
      // _ty has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,1) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (6 != MMC_STRLEN(tmpMeta7) || strcmp(MMC_STRINGDATA(_OMC_LIT157), MMC_STRINGDATA(tmpMeta7)) != 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_CAR(tmpMeta8);
          tmpMeta10 = MMC_CDR(tmpMeta8);
          if (!listEmpty(tmpMeta10)) goto tmp3_end;
          
          _e = tmpMeta9;
          tmp4 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
          _ty = omc_Expression_typeof(threadData, _e);
          tmpMeta11 = mmc_mk_box2(33, &DAE_Operator_NEQUAL__desc, _ty);
          tmpMeta12 = mmc_mk_cons(_e, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta13 = mmc_mk_box8(3, &DAE_CallAttributes_CALL__ATTR__desc, _ty, mmc_mk_boolean(0 /* false */), mmc_mk_boolean(1 /* true */), mmc_mk_boolean(0 /* false */), mmc_mk_boolean(0 /* false */), _OMC_LIT35, _OMC_LIT36);
          tmpMeta14 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _OMC_LIT156, tmpMeta12, tmpMeta13);
          tmpMeta15 = mmc_mk_box6(14, &DAE_Exp_RELATION__desc, _e, tmpMeta11, tmpMeta14, mmc_mk_integer(((modelica_integer) -1)), mmc_mk_none());
          tmpMeta[0+0] = tmpMeta15;
          tmp1_c1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,1,1) == 0) goto tmp3_end;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
          if (4 != MMC_STRLEN(tmpMeta17) || strcmp(MMC_STRINGDATA(_OMC_LIT158), MMC_STRINGDATA(tmpMeta17)) != 0) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta18)) goto tmp3_end;
          tmpMeta19 = MMC_CAR(tmpMeta18);
          tmpMeta20 = MMC_CDR(tmpMeta18);
          if (!listEmpty(tmpMeta20)) goto tmp3_end;
          
          _e = tmpMeta19;
          /* Pattern matching succeeded */
          _ty = omc_Expression_typeof(threadData, _e);
          tmpMeta21 = mmc_mk_box2(25, &DAE_Operator_AND__desc, _ty);
          tmpMeta22 = mmc_mk_box2(27, &DAE_Operator_NOT__desc, _ty);
          tmpMeta23 = mmc_mk_cons(_e, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta24 = mmc_mk_box8(3, &DAE_CallAttributes_CALL__ATTR__desc, _ty, mmc_mk_boolean(0 /* false */), mmc_mk_boolean(1 /* true */), mmc_mk_boolean(0 /* false */), mmc_mk_boolean(0 /* false */), _OMC_LIT35, _OMC_LIT36);
          tmpMeta25 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _OMC_LIT156, tmpMeta23, tmpMeta24);
          tmpMeta26 = mmc_mk_box3(13, &DAE_Exp_LUNARY__desc, tmpMeta22, tmpMeta25);
          tmpMeta27 = mmc_mk_box4(12, &DAE_Exp_LBINARY__desc, _e, tmpMeta21, tmpMeta26);
          tmpMeta[0+0] = tmpMeta27;
          tmp1_c1 = 1 /* true */;
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmp1_c1 = _inB;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outExp = tmpMeta[0+0];
  _outB = tmp1_c1;
  _return: OMC_LABEL_UNUSED
  if (out_outB) { *out_outB = _outB; }
  return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_traverserExpreplaceEdgeChange(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inB, modelica_metatype *out_outB)
{
  modelica_integer tmp1;
  modelica_boolean _outB;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_inB);
  _outExp = omc_BackendDAEOptimize_traverserExpreplaceEdgeChange(threadData, _inExp, tmp1, &_outB);
  /* skip box _outExp; DAE.Exp */
  if (out_outB) { *out_outB = mmc_mk_icon(_outB); }
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserreplaceEdgeChange(threadData_t *threadData, modelica_metatype _e, modelica_boolean _b, modelica_boolean *out_ob)
{
  modelica_metatype _oe = NULL;
  modelica_boolean _ob;
  modelica_metatype tmpMeta1;
  modelica_integer tmp2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oe has no default value.
  // _ob has no default value.
  /* Pattern-matching tuple assignment */
  tmpMeta3 = omc_Expression_traverseExpBottomUp(threadData, _e, boxvar_BackendDAEOptimize_traverserExpreplaceEdgeChange, mmc_mk_boolean(_b), &tmpMeta1);
  _oe = tmpMeta3;
  tmp2 = mmc_unbox_integer(tmpMeta1);
  _ob = tmp2  /* pattern as ty=Boolean */;
  _return: OMC_LABEL_UNUSED
  if (out_ob) { *out_ob = _ob; }
  return _oe;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_traverserreplaceEdgeChange(threadData_t *threadData, modelica_metatype _e, modelica_metatype _b, modelica_metatype *out_ob)
{
  modelica_integer tmp1;
  modelica_boolean _ob;
  modelica_metatype _oe = NULL;
  tmp1 = mmc_unbox_integer(_b);
  _oe = omc_BackendDAEOptimize_traverserreplaceEdgeChange(threadData, _e, tmp1, &_ob);
  /* skip box _oe; DAE.Exp */
  if (out_ob) { *out_ob = mmc_mk_icon(_ob); }
  return _oe;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_replaceEdgeChange0(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _inShared, modelica_boolean _inChanged, modelica_metatype *out_outShared, modelica_boolean *out_outChanged)
{
  modelica_metatype _osyst = NULL;
  modelica_metatype _outShared = NULL;
  modelica_boolean _outChanged;
  modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _osyst has no default value.
  _outShared = _inShared;
  // _outChanged has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _isyst;
    {
      modelica_metatype _orderedEqs = NULL;
      modelica_metatype _removedEqs = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _orderedEqs has no default value.
      // _removedEqs has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 10));
          _orderedEqs = tmpMeta6;
          _removedEqs = tmpMeta7;
          /* Pattern matching succeeded */
          omc_BackendDAEUtil_traverseBackendDAEExpsEqns(threadData, _orderedEqs, boxvar_BackendDAEOptimize_traverserreplaceEdgeChange, mmc_mk_boolean(0 /* false */));

          omc_BackendDAEUtil_traverseBackendDAEExpsEqns(threadData, _removedEqs, boxvar_BackendDAEOptimize_traverserreplaceEdgeChange, mmc_mk_boolean(0 /* false */));
          tmpMeta[0+0] = _isyst;
          tmp1_c1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _isyst;
          tmp1_c1 = _inChanged;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _osyst = tmpMeta[0+0];
  _outChanged = tmp1_c1;
  _return: OMC_LABEL_UNUSED
  if (out_outShared) { *out_outShared = _outShared; }
  if (out_outChanged) { *out_outChanged = _outChanged; }
  return _osyst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_replaceEdgeChange0(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _inShared, modelica_metatype _inChanged, modelica_metatype *out_outShared, modelica_metatype *out_outChanged)
{
  modelica_integer tmp1;
  modelica_boolean _outChanged;
  modelica_metatype _osyst = NULL;
  tmp1 = mmc_unbox_integer(_inChanged);
  _osyst = omc_BackendDAEOptimize_replaceEdgeChange0(threadData, _isyst, _inShared, tmp1, out_outShared, &_outChanged);
  /* skip box _osyst; BackendDAE.EqSystem */
  /* skip box _outShared; BackendDAE.Shared */
  if (out_outChanged) { *out_outChanged = mmc_mk_icon(_outChanged); }
  return _osyst;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_replaceEdgeChange(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  _outDAE = omc_BackendDAEUtil_mapEqSystemAndFold(threadData, _inDAE, boxvar_BackendDAEOptimize_replaceEdgeChange0, mmc_mk_boolean(0 /* false */), NULL);

  _outDAE = omc_BackendDAEOptimize_replaceEdgeChangeShared(threadData, _outDAE);
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_removeConstantsFinder(threadData_t *threadData, modelica_metatype _inVar, modelica_metatype _inRepl, modelica_metatype *out_outRepl)
{
  modelica_metatype _outVar = NULL;
  modelica_metatype _outRepl = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outVar has no default value.
  // _outRepl has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inVar;
    tmp4_2 = _inRepl;
    {
      modelica_metatype _v = NULL;
      modelica_metatype _repl = NULL;
      modelica_metatype _repl_1 = NULL;
      modelica_metatype _varName = NULL;
      modelica_metatype _exp = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _v has no default value.
      // _repl has no default value.
      // _repl_1 has no default value.
      // _varName has no default value.
      // _exp has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,8,0) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
          if (optionNone(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
          
          _v = tmp4_1;
          _varName = tmpMeta6;
          _exp = tmpMeta9;
          _repl = tmp4_2;
          /* Pattern matching succeeded */
          _repl_1 = omc_BackendVarTransform_addReplacement(threadData, _repl, _varName, _exp, mmc_mk_none());
          tmpMeta[0+0] = _v;
          tmpMeta[0+1] = _repl_1;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inVar;
          tmpMeta[0+1] = _inRepl;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outVar = tmpMeta[0+0];
  _outRepl = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outRepl) { *out_outRepl = _outRepl; }
  return _outVar;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_removeConstantsWork(threadData_t *threadData, modelica_metatype _inEqSystem, modelica_metatype _repl)
{
  modelica_metatype _outEqSystem = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEqSystem has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inEqSystem;
    {
      modelica_metatype _vars = NULL;
      modelica_metatype _lsteqns = NULL;
      modelica_boolean _b;
      modelica_metatype _syst = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _vars has no default value.
      // _lsteqns has no default value.
      // _b has no default value.
      // _syst has no default value.
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _syst = tmp4_1;
          _vars = tmpMeta6;
          /* Pattern matching succeeded */
          tmpMeta7 = mmc_mk_box2(0, _repl, mmc_mk_integer(((modelica_integer) 0)));
          omc_BackendVariable_traverseBackendDAEVarsWithUpdate(threadData, _vars, boxvar_BackendDAEOptimize_replaceFinalVarTraverser, tmpMeta7, NULL);

          _lsteqns = omc_BackendVarTransform_replaceEquations(threadData, omc_BackendEquation_equationList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_syst), 3)))), _repl, mmc_mk_none() ,&_b);

          if(_b)
          {
            tmpMeta8 = MMC_TAGPTR(mmc_alloc_words(11));
            memcpy(MMC_UNTAGPTR(tmpMeta8), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta8))[3] = omc_BackendEquation_listEquation(threadData, _lsteqns);
            _syst = tmpMeta8;

            _syst = omc_BackendDAEUtil_clearEqSyst(threadData, _syst);
          }

          _lsteqns = omc_BackendVarTransform_replaceEquations(threadData, omc_BackendEquation_equationList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_syst), 10)))), _repl, mmc_mk_none() ,&_b);

          if(_b)
          {
            tmpMeta9 = MMC_TAGPTR(mmc_alloc_words(11));
            memcpy(MMC_UNTAGPTR(tmpMeta9), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta9))[10] = omc_BackendEquation_listEquation(threadData, _lsteqns);
            _syst = tmpMeta9;
          }
          tmpMeta1 = _syst;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outEqSystem = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outEqSystem;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_removeConstants(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inDAE;
    {
      modelica_metatype _globalKnownVars = NULL;
      modelica_metatype _repl = NULL;
      modelica_metatype _systs = NULL;
      modelica_metatype _shared = NULL;
      modelica_metatype _lsteqns = NULL;
      modelica_boolean _b;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _globalKnownVars has no default value.
      // _repl has no default value.
      // _systs has no default value.
      // _shared has no default value.
      // _lsteqns has no default value.
      // _b has no default value.
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
          
          _systs = tmpMeta6;
          _shared = tmpMeta7;
          _globalKnownVars = tmpMeta8;
          /* Pattern matching succeeded */
          _repl = omc_BackendVarTransform_emptyReplacements(threadData);

          _repl = omc_BackendVariable_traverseBackendDAEVars(threadData, _globalKnownVars, boxvar_BackendDAEOptimize_removeConstantsFinder, _repl);

          /* Pattern-matching tuple assignment */
          tmpMeta11 = mmc_mk_box2(0, _repl, mmc_mk_integer(((modelica_integer) 0)));
          tmpMeta12 = omc_BackendVariable_traverseBackendDAEVarsWithUpdate(threadData, _globalKnownVars, boxvar_BackendDAEOptimize_replaceFinalVarTraverser, tmpMeta11, &tmpMeta9);
          _globalKnownVars = tmpMeta12;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 1));
          _repl = tmpMeta10;

          if(omc_Flags_isSet(threadData, _OMC_LIT162))
          {
            omc_BackendVarTransform_dumpReplacements(threadData, _repl);
          }

          _lsteqns = omc_BackendEquation_equationList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 6))));

          _lsteqns = omc_BackendVarTransform_replaceEquations(threadData, _lsteqns, _repl, mmc_mk_none() ,&_b);

          tmpMeta13 = MMC_TAGPTR(mmc_alloc_words(22));
          memcpy(MMC_UNTAGPTR(tmpMeta13), MMC_UNTAGPTR(_shared), 22*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta13))[6] = (_b?omc_BackendEquation_listEquation(threadData, _lsteqns):(MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 6))));
          _shared = tmpMeta13;

          _lsteqns = omc_BackendEquation_equationList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 7))));

          _lsteqns = omc_BackendVarTransform_replaceEquations(threadData, _lsteqns, _repl, mmc_mk_none() ,&_b);

          tmpMeta14 = MMC_TAGPTR(mmc_alloc_words(22));
          memcpy(MMC_UNTAGPTR(tmpMeta14), MMC_UNTAGPTR(_shared), 22*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta14))[7] = (_b?omc_BackendEquation_listEquation(threadData, _lsteqns):(MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 7))));
          _shared = tmpMeta14;

          _systs = omc_List_map1(threadData, _systs, boxvar_BackendDAEOptimize_removeConstantsWork, _repl);
          tmpMeta15 = mmc_mk_box3(3, &BackendDAE_BackendDAE_DAE__desc, _systs, _shared);
          tmpMeta1 = tmpMeta15;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outDAE = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifysemiLinearFinder(threadData_t *threadData, modelica_metatype _inEq, modelica_metatype _inTpl, modelica_metatype *out_outTpl)
{
  modelica_metatype _outEq = NULL;
  modelica_metatype _outTpl = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEq has no default value.
  // _outTpl has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inEq;
    tmp4_2 = _inTpl;
    {
      modelica_metatype _eqn = NULL;
      modelica_metatype _eqnslst = NULL;
      modelica_integer _index;
      modelica_boolean _b;
      modelica_metatype _x = NULL;
      modelica_metatype _y = NULL;
      modelica_metatype _sa = NULL;
      modelica_metatype _sb = NULL;
      modelica_metatype _source = NULL;
      modelica_metatype _path = NULL;
      modelica_metatype _attr = NULL;
      modelica_metatype _eqAttr = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _eqn has no default value.
      // _eqnslst has no default value.
      // _index has no default value.
      // _b has no default value.
      // _x has no default value.
      // _y has no default value.
      // _sa has no default value.
      // _sb has no default value.
      // _source has no default value.
      // _path has no default value.
      // _attr has no default value.
      // _eqAttr has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 15; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_integer tmp21;
          modelica_boolean tmp22;
          modelica_boolean tmp23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,13,3) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,1,1) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
          if (10 != MMC_STRLEN(tmpMeta9) || strcmp(MMC_STRINGDATA(_OMC_LIT164), MMC_STRINGDATA(tmpMeta9)) != 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
          if (listEmpty(tmpMeta10)) goto tmp3_end;
          tmpMeta11 = MMC_CAR(tmpMeta10);
          tmpMeta12 = MMC_CDR(tmpMeta10);
          if (listEmpty(tmpMeta12)) goto tmp3_end;
          tmpMeta13 = MMC_CAR(tmpMeta12);
          tmpMeta14 = MMC_CDR(tmpMeta12);
          if (listEmpty(tmpMeta14)) goto tmp3_end;
          tmpMeta15 = MMC_CAR(tmpMeta14);
          tmpMeta16 = MMC_CDR(tmpMeta14);
          if (!listEmpty(tmpMeta16)) goto tmp3_end;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp21 = mmc_unbox_integer(tmpMeta20);
          
          _y = tmpMeta6;
          _x = tmpMeta11;
          _sa = tmpMeta13;
          _sb = tmpMeta15;
          _source = tmpMeta17;
          _eqAttr = tmpMeta18;
          _eqnslst = tmpMeta19;
          _index = tmp21  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp22 = omc_Expression_isZero(threadData, _y);
          if (1 /* true */ != tmp22) goto goto_2;

          /* Pattern-matching assignment */
          tmp23 = omc_Expression_isZero(threadData, _x);
          if (1 /* true */ != tmp23) goto goto_2;
          tmpMeta24 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _sa, _sb, _source, _eqAttr);
          tmpMeta25 = mmc_mk_box3(0, _eqnslst, mmc_mk_integer(((modelica_integer) 1) + _index), mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = tmpMeta24;
          tmpMeta[0+1] = tmpMeta25;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          modelica_integer tmp41;
          modelica_boolean tmp42;
          modelica_boolean tmp43;
          modelica_metatype tmpMeta44;
          modelica_metatype tmpMeta45;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
          tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta26,13,3) == 0) goto tmp3_end;
          tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta26), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta27,1,1) == 0) goto tmp3_end;
          tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 2));
          if (10 != MMC_STRLEN(tmpMeta28) || strcmp(MMC_STRINGDATA(_OMC_LIT164), MMC_STRINGDATA(tmpMeta28)) != 0) goto tmp3_end;
          tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta26), 3));
          if (listEmpty(tmpMeta29)) goto tmp3_end;
          tmpMeta30 = MMC_CAR(tmpMeta29);
          tmpMeta31 = MMC_CDR(tmpMeta29);
          if (listEmpty(tmpMeta31)) goto tmp3_end;
          tmpMeta32 = MMC_CAR(tmpMeta31);
          tmpMeta33 = MMC_CDR(tmpMeta31);
          if (listEmpty(tmpMeta33)) goto tmp3_end;
          tmpMeta34 = MMC_CAR(tmpMeta33);
          tmpMeta35 = MMC_CDR(tmpMeta33);
          if (!listEmpty(tmpMeta35)) goto tmp3_end;
          tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp41 = mmc_unbox_integer(tmpMeta40);
          
          _x = tmpMeta30;
          _sa = tmpMeta32;
          _sb = tmpMeta34;
          _y = tmpMeta36;
          _source = tmpMeta37;
          _eqAttr = tmpMeta38;
          _eqnslst = tmpMeta39;
          _index = tmp41  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp42 = omc_Expression_isZero(threadData, _y);
          if (1 /* true */ != tmp42) goto goto_2;

          /* Pattern-matching assignment */
          tmp43 = omc_Expression_isZero(threadData, _x);
          if (1 /* true */ != tmp43) goto goto_2;
          tmpMeta44 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _sa, _sb, _source, _eqAttr);
          tmpMeta45 = mmc_mk_box3(0, _eqnslst, mmc_mk_integer(((modelica_integer) 1) + _index), mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = tmpMeta44;
          tmpMeta[0+1] = tmpMeta45;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta46;
          modelica_metatype tmpMeta47;
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta49;
          modelica_metatype tmpMeta50;
          modelica_metatype tmpMeta51;
          modelica_metatype tmpMeta52;
          modelica_metatype tmpMeta53;
          modelica_metatype tmpMeta54;
          modelica_metatype tmpMeta55;
          modelica_metatype tmpMeta56;
          modelica_metatype tmpMeta57;
          modelica_metatype tmpMeta58;
          modelica_metatype tmpMeta59;
          modelica_metatype tmpMeta60;
          modelica_metatype tmpMeta61;
          modelica_integer tmp62;
          modelica_boolean tmp63;
          modelica_boolean tmp64;
          modelica_metatype tmpMeta65;
          modelica_metatype tmpMeta66;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
          tmpMeta46 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta47,8,2) == 0) goto tmp3_end;
          tmpMeta48 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta47), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta48,13,3) == 0) goto tmp3_end;
          tmpMeta49 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta48), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta49,1,1) == 0) goto tmp3_end;
          tmpMeta50 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta49), 2));
          if (10 != MMC_STRLEN(tmpMeta50) || strcmp(MMC_STRINGDATA(_OMC_LIT164), MMC_STRINGDATA(tmpMeta50)) != 0) goto tmp3_end;
          tmpMeta51 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta48), 3));
          if (listEmpty(tmpMeta51)) goto tmp3_end;
          tmpMeta52 = MMC_CAR(tmpMeta51);
          tmpMeta53 = MMC_CDR(tmpMeta51);
          if (listEmpty(tmpMeta53)) goto tmp3_end;
          tmpMeta54 = MMC_CAR(tmpMeta53);
          tmpMeta55 = MMC_CDR(tmpMeta53);
          if (listEmpty(tmpMeta55)) goto tmp3_end;
          tmpMeta56 = MMC_CAR(tmpMeta55);
          tmpMeta57 = MMC_CDR(tmpMeta55);
          if (!listEmpty(tmpMeta57)) goto tmp3_end;
          tmpMeta58 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta59 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmpMeta60 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta61 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp62 = mmc_unbox_integer(tmpMeta61);
          
          _y = tmpMeta46;
          _x = tmpMeta52;
          _sa = tmpMeta54;
          _sb = tmpMeta56;
          _source = tmpMeta58;
          _eqAttr = tmpMeta59;
          _eqnslst = tmpMeta60;
          _index = tmp62  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp63 = omc_Expression_isZero(threadData, _y);
          if (1 /* true */ != tmp63) goto goto_2;

          /* Pattern-matching assignment */
          tmp64 = omc_Expression_isZero(threadData, _x);
          if (1 /* true */ != tmp64) goto goto_2;
          tmpMeta65 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _sa, _sb, _source, _eqAttr);
          tmpMeta66 = mmc_mk_box3(0, _eqnslst, mmc_mk_integer(((modelica_integer) 1) + _index), mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = tmpMeta65;
          tmpMeta[0+1] = tmpMeta66;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta67;
          modelica_metatype tmpMeta68;
          modelica_metatype tmpMeta69;
          modelica_metatype tmpMeta70;
          modelica_metatype tmpMeta71;
          modelica_metatype tmpMeta72;
          modelica_metatype tmpMeta73;
          modelica_metatype tmpMeta74;
          modelica_metatype tmpMeta75;
          modelica_metatype tmpMeta76;
          modelica_metatype tmpMeta77;
          modelica_metatype tmpMeta78;
          modelica_metatype tmpMeta79;
          modelica_metatype tmpMeta80;
          modelica_metatype tmpMeta81;
          modelica_metatype tmpMeta82;
          modelica_integer tmp83;
          modelica_boolean tmp84;
          modelica_boolean tmp85;
          modelica_metatype tmpMeta86;
          modelica_metatype tmpMeta87;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
          tmpMeta67 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta67,8,2) == 0) goto tmp3_end;
          tmpMeta68 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta67), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta68,13,3) == 0) goto tmp3_end;
          tmpMeta69 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta68), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta69,1,1) == 0) goto tmp3_end;
          tmpMeta70 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta69), 2));
          if (10 != MMC_STRLEN(tmpMeta70) || strcmp(MMC_STRINGDATA(_OMC_LIT164), MMC_STRINGDATA(tmpMeta70)) != 0) goto tmp3_end;
          tmpMeta71 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta68), 3));
          if (listEmpty(tmpMeta71)) goto tmp3_end;
          tmpMeta72 = MMC_CAR(tmpMeta71);
          tmpMeta73 = MMC_CDR(tmpMeta71);
          if (listEmpty(tmpMeta73)) goto tmp3_end;
          tmpMeta74 = MMC_CAR(tmpMeta73);
          tmpMeta75 = MMC_CDR(tmpMeta73);
          if (listEmpty(tmpMeta75)) goto tmp3_end;
          tmpMeta76 = MMC_CAR(tmpMeta75);
          tmpMeta77 = MMC_CDR(tmpMeta75);
          if (!listEmpty(tmpMeta77)) goto tmp3_end;
          tmpMeta78 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta79 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta80 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmpMeta81 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta82 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp83 = mmc_unbox_integer(tmpMeta82);
          
          _x = tmpMeta72;
          _sa = tmpMeta74;
          _sb = tmpMeta76;
          _y = tmpMeta78;
          _source = tmpMeta79;
          _eqAttr = tmpMeta80;
          _eqnslst = tmpMeta81;
          _index = tmp83  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp84 = omc_Expression_isZero(threadData, _y);
          if (1 /* true */ != tmp84) goto goto_2;

          /* Pattern-matching assignment */
          tmp85 = omc_Expression_isZero(threadData, _x);
          if (1 /* true */ != tmp85) goto goto_2;
          tmpMeta86 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _sa, _sb, _source, _eqAttr);
          tmpMeta87 = mmc_mk_box3(0, _eqnslst, mmc_mk_integer(((modelica_integer) 1) + _index), mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = tmpMeta86;
          tmpMeta[0+1] = tmpMeta87;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta88;
          modelica_metatype tmpMeta89;
          modelica_metatype tmpMeta90;
          modelica_metatype tmpMeta91;
          modelica_metatype tmpMeta92;
          modelica_metatype tmpMeta93;
          modelica_metatype tmpMeta94;
          modelica_metatype tmpMeta95;
          modelica_metatype tmpMeta96;
          modelica_metatype tmpMeta97;
          modelica_metatype tmpMeta98;
          modelica_metatype tmpMeta99;
          modelica_metatype tmpMeta100;
          modelica_metatype tmpMeta101;
          modelica_metatype tmpMeta102;
          modelica_metatype tmpMeta103;
          modelica_metatype tmpMeta104;
          modelica_metatype tmpMeta105;
          modelica_integer tmp106;
          modelica_metatype tmpMeta107;
          modelica_metatype tmpMeta108;
          modelica_metatype tmpMeta109;
          modelica_metatype tmpMeta110;
          modelica_metatype tmpMeta111;
          modelica_metatype tmpMeta112;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
          tmpMeta88 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta89 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta89,8,2) == 0) goto tmp3_end;
          tmpMeta90 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta89), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta90,13,3) == 0) goto tmp3_end;
          tmpMeta91 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta90), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta91,1,1) == 0) goto tmp3_end;
          tmpMeta92 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta91), 2));
          if (10 != MMC_STRLEN(tmpMeta92) || strcmp(MMC_STRINGDATA(_OMC_LIT164), MMC_STRINGDATA(tmpMeta92)) != 0) goto tmp3_end;
          tmpMeta93 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta90), 3));
          if (listEmpty(tmpMeta93)) goto tmp3_end;
          tmpMeta94 = MMC_CAR(tmpMeta93);
          tmpMeta95 = MMC_CDR(tmpMeta93);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta94,8,2) == 0) goto tmp3_end;
          tmpMeta96 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta94), 3));
          if (listEmpty(tmpMeta95)) goto tmp3_end;
          tmpMeta97 = MMC_CAR(tmpMeta95);
          tmpMeta98 = MMC_CDR(tmpMeta95);
          if (listEmpty(tmpMeta98)) goto tmp3_end;
          tmpMeta99 = MMC_CAR(tmpMeta98);
          tmpMeta100 = MMC_CDR(tmpMeta98);
          if (!listEmpty(tmpMeta100)) goto tmp3_end;
          tmpMeta101 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta90), 4));
          tmpMeta102 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta103 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmpMeta104 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta105 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp106 = mmc_unbox_integer(tmpMeta105);
          
          _y = tmpMeta88;
          _path = tmpMeta91;
          _x = tmpMeta96;
          _sb = tmpMeta97;
          _sa = tmpMeta99;
          _attr = tmpMeta101;
          _source = tmpMeta102;
          _eqAttr = tmpMeta103;
          _eqnslst = tmpMeta104;
          _index = tmp106  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta107 = mmc_mk_cons(_x, mmc_mk_cons(_sa, mmc_mk_cons(_sb, MMC_REFSTRUCTLIT(mmc_nil))));
          tmpMeta108 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _path, tmpMeta107, _attr);
          tmpMeta109 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _y, tmpMeta108, _source, _eqAttr);
          _eqn = tmpMeta109;

          if(omc_Flags_isSet(threadData, _OMC_LIT167))
          {
            omc_BackendDump_debugStrEqnStr(threadData, _OMC_LIT163, _eqn, _OMC_LIT45);
          }
          tmpMeta111 = mmc_mk_box2(0, _eqn, mmc_mk_integer(_index));
          tmpMeta110 = mmc_mk_cons(tmpMeta111, _eqnslst);
          tmpMeta112 = mmc_mk_box3(0, tmpMeta110, mmc_mk_integer(((modelica_integer) 1) + _index), mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _eqn;
          tmpMeta[0+1] = tmpMeta112;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta113;
          modelica_metatype tmpMeta114;
          modelica_metatype tmpMeta115;
          modelica_metatype tmpMeta116;
          modelica_metatype tmpMeta117;
          modelica_metatype tmpMeta118;
          modelica_metatype tmpMeta119;
          modelica_metatype tmpMeta120;
          modelica_metatype tmpMeta121;
          modelica_metatype tmpMeta122;
          modelica_metatype tmpMeta123;
          modelica_metatype tmpMeta124;
          modelica_metatype tmpMeta125;
          modelica_metatype tmpMeta126;
          modelica_metatype tmpMeta127;
          modelica_metatype tmpMeta128;
          modelica_metatype tmpMeta129;
          modelica_metatype tmpMeta130;
          modelica_integer tmp131;
          modelica_metatype tmpMeta132;
          modelica_metatype tmpMeta133;
          modelica_metatype tmpMeta134;
          modelica_metatype tmpMeta135;
          modelica_metatype tmpMeta136;
          modelica_metatype tmpMeta137;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
          tmpMeta113 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta113,8,2) == 0) goto tmp3_end;
          tmpMeta114 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta113), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta114,13,3) == 0) goto tmp3_end;
          tmpMeta115 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta114), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta115,1,1) == 0) goto tmp3_end;
          tmpMeta116 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta115), 2));
          if (10 != MMC_STRLEN(tmpMeta116) || strcmp(MMC_STRINGDATA(_OMC_LIT164), MMC_STRINGDATA(tmpMeta116)) != 0) goto tmp3_end;
          tmpMeta117 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta114), 3));
          if (listEmpty(tmpMeta117)) goto tmp3_end;
          tmpMeta118 = MMC_CAR(tmpMeta117);
          tmpMeta119 = MMC_CDR(tmpMeta117);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta118,8,2) == 0) goto tmp3_end;
          tmpMeta120 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta118), 3));
          if (listEmpty(tmpMeta119)) goto tmp3_end;
          tmpMeta121 = MMC_CAR(tmpMeta119);
          tmpMeta122 = MMC_CDR(tmpMeta119);
          if (listEmpty(tmpMeta122)) goto tmp3_end;
          tmpMeta123 = MMC_CAR(tmpMeta122);
          tmpMeta124 = MMC_CDR(tmpMeta122);
          if (!listEmpty(tmpMeta124)) goto tmp3_end;
          tmpMeta125 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta114), 4));
          tmpMeta126 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta127 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta128 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmpMeta129 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta130 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp131 = mmc_unbox_integer(tmpMeta130);
          
          _path = tmpMeta115;
          _x = tmpMeta120;
          _sb = tmpMeta121;
          _sa = tmpMeta123;
          _attr = tmpMeta125;
          _y = tmpMeta126;
          _source = tmpMeta127;
          _eqAttr = tmpMeta128;
          _eqnslst = tmpMeta129;
          _index = tmp131  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta132 = mmc_mk_cons(_x, mmc_mk_cons(_sa, mmc_mk_cons(_sb, MMC_REFSTRUCTLIT(mmc_nil))));
          tmpMeta133 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _path, tmpMeta132, _attr);
          tmpMeta134 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _y, tmpMeta133, _source, _eqAttr);
          _eqn = tmpMeta134;

          if(omc_Flags_isSet(threadData, _OMC_LIT167))
          {
            omc_BackendDump_debugStrEqnStr(threadData, _OMC_LIT163, _eqn, _OMC_LIT45);
          }
          tmpMeta136 = mmc_mk_box2(0, _eqn, mmc_mk_integer(_index));
          tmpMeta135 = mmc_mk_cons(tmpMeta136, _eqnslst);
          tmpMeta137 = mmc_mk_box3(0, tmpMeta135, mmc_mk_integer(((modelica_integer) 1) + _index), mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _eqn;
          tmpMeta[0+1] = tmpMeta137;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta138;
          modelica_metatype tmpMeta139;
          modelica_metatype tmpMeta140;
          modelica_metatype tmpMeta141;
          modelica_metatype tmpMeta142;
          modelica_metatype tmpMeta143;
          modelica_metatype tmpMeta144;
          modelica_metatype tmpMeta145;
          modelica_metatype tmpMeta146;
          modelica_metatype tmpMeta147;
          modelica_metatype tmpMeta148;
          modelica_metatype tmpMeta149;
          modelica_metatype tmpMeta150;
          modelica_metatype tmpMeta151;
          modelica_metatype tmpMeta152;
          modelica_metatype tmpMeta153;
          modelica_metatype tmpMeta154;
          modelica_metatype tmpMeta155;
          modelica_integer tmp156;
          modelica_metatype tmpMeta157;
          modelica_metatype tmpMeta158;
          modelica_metatype tmpMeta159;
          modelica_metatype tmpMeta160;
          modelica_metatype tmpMeta161;
          modelica_metatype tmpMeta162;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
          tmpMeta138 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta138,8,2) == 0) goto tmp3_end;
          tmpMeta139 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta138), 3));
          tmpMeta140 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta140,13,3) == 0) goto tmp3_end;
          tmpMeta141 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta140), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta141,1,1) == 0) goto tmp3_end;
          tmpMeta142 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta141), 2));
          if (10 != MMC_STRLEN(tmpMeta142) || strcmp(MMC_STRINGDATA(_OMC_LIT164), MMC_STRINGDATA(tmpMeta142)) != 0) goto tmp3_end;
          tmpMeta143 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta140), 3));
          if (listEmpty(tmpMeta143)) goto tmp3_end;
          tmpMeta144 = MMC_CAR(tmpMeta143);
          tmpMeta145 = MMC_CDR(tmpMeta143);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta144,8,2) == 0) goto tmp3_end;
          tmpMeta146 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta144), 3));
          if (listEmpty(tmpMeta145)) goto tmp3_end;
          tmpMeta147 = MMC_CAR(tmpMeta145);
          tmpMeta148 = MMC_CDR(tmpMeta145);
          if (listEmpty(tmpMeta148)) goto tmp3_end;
          tmpMeta149 = MMC_CAR(tmpMeta148);
          tmpMeta150 = MMC_CDR(tmpMeta148);
          if (!listEmpty(tmpMeta150)) goto tmp3_end;
          tmpMeta151 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta140), 4));
          tmpMeta152 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta153 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmpMeta154 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta155 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp156 = mmc_unbox_integer(tmpMeta155);
          
          _y = tmpMeta139;
          _path = tmpMeta141;
          _x = tmpMeta146;
          _sb = tmpMeta147;
          _sa = tmpMeta149;
          _attr = tmpMeta151;
          _source = tmpMeta152;
          _eqAttr = tmpMeta153;
          _eqnslst = tmpMeta154;
          _index = tmp156  /* pattern as ty=Integer */;
          tmp4 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta157 = mmc_mk_cons(_x, mmc_mk_cons(_sa, mmc_mk_cons(_sb, MMC_REFSTRUCTLIT(mmc_nil))));
          tmpMeta158 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _path, tmpMeta157, _attr);
          tmpMeta159 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _y, tmpMeta158, _source, _eqAttr);
          _eqn = tmpMeta159;

          if(omc_Flags_isSet(threadData, _OMC_LIT167))
          {
            omc_BackendDump_debugStrEqnStr(threadData, _OMC_LIT163, _eqn, _OMC_LIT45);
          }
          tmpMeta161 = mmc_mk_box2(0, _eqn, mmc_mk_integer(_index));
          tmpMeta160 = mmc_mk_cons(tmpMeta161, _eqnslst);
          tmpMeta162 = mmc_mk_box3(0, tmpMeta160, mmc_mk_integer(((modelica_integer) 1) + _index), mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _eqn;
          tmpMeta[0+1] = tmpMeta162;
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta163;
          modelica_metatype tmpMeta164;
          modelica_metatype tmpMeta165;
          modelica_metatype tmpMeta166;
          modelica_metatype tmpMeta167;
          modelica_metatype tmpMeta168;
          modelica_metatype tmpMeta169;
          modelica_metatype tmpMeta170;
          modelica_metatype tmpMeta171;
          modelica_metatype tmpMeta172;
          modelica_metatype tmpMeta173;
          modelica_metatype tmpMeta174;
          modelica_metatype tmpMeta175;
          modelica_metatype tmpMeta176;
          modelica_metatype tmpMeta177;
          modelica_metatype tmpMeta178;
          modelica_metatype tmpMeta179;
          modelica_metatype tmpMeta180;
          modelica_integer tmp181;
          modelica_metatype tmpMeta182;
          modelica_metatype tmpMeta183;
          modelica_metatype tmpMeta184;
          modelica_metatype tmpMeta185;
          modelica_metatype tmpMeta186;
          modelica_metatype tmpMeta187;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
          tmpMeta163 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta163,13,3) == 0) goto tmp3_end;
          tmpMeta164 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta163), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta164,1,1) == 0) goto tmp3_end;
          tmpMeta165 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta164), 2));
          if (10 != MMC_STRLEN(tmpMeta165) || strcmp(MMC_STRINGDATA(_OMC_LIT164), MMC_STRINGDATA(tmpMeta165)) != 0) goto tmp3_end;
          tmpMeta166 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta163), 3));
          if (listEmpty(tmpMeta166)) goto tmp3_end;
          tmpMeta167 = MMC_CAR(tmpMeta166);
          tmpMeta168 = MMC_CDR(tmpMeta166);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta167,8,2) == 0) goto tmp3_end;
          tmpMeta169 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta167), 3));
          if (listEmpty(tmpMeta168)) goto tmp3_end;
          tmpMeta170 = MMC_CAR(tmpMeta168);
          tmpMeta171 = MMC_CDR(tmpMeta168);
          if (listEmpty(tmpMeta171)) goto tmp3_end;
          tmpMeta172 = MMC_CAR(tmpMeta171);
          tmpMeta173 = MMC_CDR(tmpMeta171);
          if (!listEmpty(tmpMeta173)) goto tmp3_end;
          tmpMeta174 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta163), 4));
          tmpMeta175 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta175,8,2) == 0) goto tmp3_end;
          tmpMeta176 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta175), 3));
          tmpMeta177 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta178 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmpMeta179 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta180 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp181 = mmc_unbox_integer(tmpMeta180);
          
          _path = tmpMeta164;
          _x = tmpMeta169;
          _sb = tmpMeta170;
          _sa = tmpMeta172;
          _attr = tmpMeta174;
          _y = tmpMeta176;
          _source = tmpMeta177;
          _eqAttr = tmpMeta178;
          _eqnslst = tmpMeta179;
          _index = tmp181  /* pattern as ty=Integer */;
          tmp4 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta182 = mmc_mk_cons(_x, mmc_mk_cons(_sa, mmc_mk_cons(_sb, MMC_REFSTRUCTLIT(mmc_nil))));
          tmpMeta183 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _path, tmpMeta182, _attr);
          tmpMeta184 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _y, tmpMeta183, _source, _eqAttr);
          _eqn = tmpMeta184;

          if(omc_Flags_isSet(threadData, _OMC_LIT167))
          {
            omc_BackendDump_debugStrEqnStr(threadData, _OMC_LIT163, _eqn, _OMC_LIT45);
          }
          tmpMeta186 = mmc_mk_box2(0, _eqn, mmc_mk_integer(_index));
          tmpMeta185 = mmc_mk_cons(tmpMeta186, _eqnslst);
          tmpMeta187 = mmc_mk_box3(0, tmpMeta185, mmc_mk_integer(((modelica_integer) 1) + _index), mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _eqn;
          tmpMeta[0+1] = tmpMeta187;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta188;
          modelica_metatype tmpMeta189;
          modelica_metatype tmpMeta190;
          modelica_metatype tmpMeta191;
          modelica_metatype tmpMeta192;
          modelica_metatype tmpMeta193;
          modelica_metatype tmpMeta194;
          modelica_metatype tmpMeta195;
          modelica_metatype tmpMeta196;
          modelica_metatype tmpMeta197;
          modelica_metatype tmpMeta198;
          modelica_metatype tmpMeta199;
          modelica_metatype tmpMeta200;
          modelica_metatype tmpMeta201;
          modelica_metatype tmpMeta202;
          modelica_metatype tmpMeta203;
          modelica_metatype tmpMeta204;
          modelica_integer tmp205;
          modelica_metatype tmpMeta206;
          modelica_metatype tmpMeta207;
          modelica_metatype tmpMeta208;
          modelica_metatype tmpMeta209;
          modelica_metatype tmpMeta210;
          modelica_metatype tmpMeta211;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
          tmpMeta188 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta189 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta189,13,3) == 0) goto tmp3_end;
          tmpMeta190 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta189), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta190,1,1) == 0) goto tmp3_end;
          tmpMeta191 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta190), 2));
          if (10 != MMC_STRLEN(tmpMeta191) || strcmp(MMC_STRINGDATA(_OMC_LIT164), MMC_STRINGDATA(tmpMeta191)) != 0) goto tmp3_end;
          tmpMeta192 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta189), 3));
          if (listEmpty(tmpMeta192)) goto tmp3_end;
          tmpMeta193 = MMC_CAR(tmpMeta192);
          tmpMeta194 = MMC_CDR(tmpMeta192);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta193,8,2) == 0) goto tmp3_end;
          tmpMeta195 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta193), 3));
          if (listEmpty(tmpMeta194)) goto tmp3_end;
          tmpMeta196 = MMC_CAR(tmpMeta194);
          tmpMeta197 = MMC_CDR(tmpMeta194);
          if (listEmpty(tmpMeta197)) goto tmp3_end;
          tmpMeta198 = MMC_CAR(tmpMeta197);
          tmpMeta199 = MMC_CDR(tmpMeta197);
          if (!listEmpty(tmpMeta199)) goto tmp3_end;
          tmpMeta200 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta189), 4));
          tmpMeta201 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta202 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmpMeta203 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta204 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp205 = mmc_unbox_integer(tmpMeta204);
          
          _y = tmpMeta188;
          _path = tmpMeta190;
          _x = tmpMeta195;
          _sb = tmpMeta196;
          _sa = tmpMeta198;
          _attr = tmpMeta200;
          _source = tmpMeta201;
          _eqAttr = tmpMeta202;
          _eqnslst = tmpMeta203;
          _index = tmp205  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          _y = omc_Expression_negate(threadData, _y);

          tmpMeta206 = mmc_mk_cons(_x, mmc_mk_cons(_sa, mmc_mk_cons(_sb, MMC_REFSTRUCTLIT(mmc_nil))));
          tmpMeta207 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _path, tmpMeta206, _attr);
          tmpMeta208 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _y, tmpMeta207, _source, _eqAttr);
          _eqn = tmpMeta208;

          if(omc_Flags_isSet(threadData, _OMC_LIT167))
          {
            omc_BackendDump_debugStrEqnStr(threadData, _OMC_LIT163, _eqn, _OMC_LIT45);
          }
          tmpMeta210 = mmc_mk_box2(0, _eqn, mmc_mk_integer(_index));
          tmpMeta209 = mmc_mk_cons(tmpMeta210, _eqnslst);
          tmpMeta211 = mmc_mk_box3(0, tmpMeta209, mmc_mk_integer(((modelica_integer) 1) + _index), mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _eqn;
          tmpMeta[0+1] = tmpMeta211;
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta212;
          modelica_metatype tmpMeta213;
          modelica_metatype tmpMeta214;
          modelica_metatype tmpMeta215;
          modelica_metatype tmpMeta216;
          modelica_metatype tmpMeta217;
          modelica_metatype tmpMeta218;
          modelica_metatype tmpMeta219;
          modelica_metatype tmpMeta220;
          modelica_metatype tmpMeta221;
          modelica_metatype tmpMeta222;
          modelica_metatype tmpMeta223;
          modelica_metatype tmpMeta224;
          modelica_metatype tmpMeta225;
          modelica_metatype tmpMeta226;
          modelica_metatype tmpMeta227;
          modelica_metatype tmpMeta228;
          modelica_integer tmp229;
          modelica_metatype tmpMeta230;
          modelica_metatype tmpMeta231;
          modelica_metatype tmpMeta232;
          modelica_metatype tmpMeta233;
          modelica_metatype tmpMeta234;
          modelica_metatype tmpMeta235;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
          tmpMeta212 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta212,13,3) == 0) goto tmp3_end;
          tmpMeta213 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta212), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta213,1,1) == 0) goto tmp3_end;
          tmpMeta214 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta213), 2));
          if (10 != MMC_STRLEN(tmpMeta214) || strcmp(MMC_STRINGDATA(_OMC_LIT164), MMC_STRINGDATA(tmpMeta214)) != 0) goto tmp3_end;
          tmpMeta215 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta212), 3));
          if (listEmpty(tmpMeta215)) goto tmp3_end;
          tmpMeta216 = MMC_CAR(tmpMeta215);
          tmpMeta217 = MMC_CDR(tmpMeta215);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta216,8,2) == 0) goto tmp3_end;
          tmpMeta218 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta216), 3));
          if (listEmpty(tmpMeta217)) goto tmp3_end;
          tmpMeta219 = MMC_CAR(tmpMeta217);
          tmpMeta220 = MMC_CDR(tmpMeta217);
          if (listEmpty(tmpMeta220)) goto tmp3_end;
          tmpMeta221 = MMC_CAR(tmpMeta220);
          tmpMeta222 = MMC_CDR(tmpMeta220);
          if (!listEmpty(tmpMeta222)) goto tmp3_end;
          tmpMeta223 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta212), 4));
          tmpMeta224 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta225 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta226 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmpMeta227 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta228 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp229 = mmc_unbox_integer(tmpMeta228);
          
          _path = tmpMeta213;
          _x = tmpMeta218;
          _sb = tmpMeta219;
          _sa = tmpMeta221;
          _attr = tmpMeta223;
          _y = tmpMeta224;
          _source = tmpMeta225;
          _eqAttr = tmpMeta226;
          _eqnslst = tmpMeta227;
          _index = tmp229  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          _y = omc_Expression_negate(threadData, _y);

          tmpMeta230 = mmc_mk_cons(_x, mmc_mk_cons(_sa, mmc_mk_cons(_sb, MMC_REFSTRUCTLIT(mmc_nil))));
          tmpMeta231 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _path, tmpMeta230, _attr);
          tmpMeta232 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _y, tmpMeta231, _source, _eqAttr);
          _eqn = tmpMeta232;

          if(omc_Flags_isSet(threadData, _OMC_LIT167))
          {
            omc_BackendDump_debugStrEqnStr(threadData, _OMC_LIT163, _eqn, _OMC_LIT45);
          }
          tmpMeta234 = mmc_mk_box2(0, _eqn, mmc_mk_integer(_index));
          tmpMeta233 = mmc_mk_cons(tmpMeta234, _eqnslst);
          tmpMeta235 = mmc_mk_box3(0, tmpMeta233, mmc_mk_integer(((modelica_integer) 1) + _index), mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _eqn;
          tmpMeta[0+1] = tmpMeta235;
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta236;
          modelica_metatype tmpMeta237;
          modelica_metatype tmpMeta238;
          modelica_metatype tmpMeta239;
          modelica_metatype tmpMeta240;
          modelica_integer tmp241;
          modelica_metatype tmpMeta242;
          modelica_metatype tmpMeta243;
          modelica_metatype tmpMeta244;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
          tmpMeta236 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta236,13,3) == 0) goto tmp3_end;
          tmpMeta237 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta236), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta237,1,1) == 0) goto tmp3_end;
          tmpMeta238 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta237), 2));
          if (10 != MMC_STRLEN(tmpMeta238) || strcmp(MMC_STRINGDATA(_OMC_LIT164), MMC_STRINGDATA(tmpMeta238)) != 0) goto tmp3_end;
          tmpMeta239 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta240 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp241 = mmc_unbox_integer(tmpMeta240);
          
          _eqn = tmp4_1;
          _eqnslst = tmpMeta239;
          _index = tmp241  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          if(omc_Flags_isSet(threadData, _OMC_LIT167))
          {
            omc_BackendDump_debugStrEqnStr(threadData, _OMC_LIT163, _eqn, _OMC_LIT45);
          }
          tmpMeta243 = mmc_mk_box2(0, _eqn, mmc_mk_integer(_index));
          tmpMeta242 = mmc_mk_cons(tmpMeta243, _eqnslst);
          tmpMeta244 = mmc_mk_box3(0, tmpMeta242, mmc_mk_integer(((modelica_integer) 1) + _index), mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _eqn;
          tmpMeta[0+1] = tmpMeta244;
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta245;
          modelica_metatype tmpMeta246;
          modelica_metatype tmpMeta247;
          modelica_metatype tmpMeta248;
          modelica_metatype tmpMeta249;
          modelica_integer tmp250;
          modelica_metatype tmpMeta251;
          modelica_metatype tmpMeta252;
          modelica_metatype tmpMeta253;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
          tmpMeta245 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta245,13,3) == 0) goto tmp3_end;
          tmpMeta246 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta245), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta246,1,1) == 0) goto tmp3_end;
          tmpMeta247 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta246), 2));
          if (10 != MMC_STRLEN(tmpMeta247) || strcmp(MMC_STRINGDATA(_OMC_LIT164), MMC_STRINGDATA(tmpMeta247)) != 0) goto tmp3_end;
          tmpMeta248 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta249 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp250 = mmc_unbox_integer(tmpMeta249);
          
          _eqn = tmp4_1;
          _eqnslst = tmpMeta248;
          _index = tmp250  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          if(omc_Flags_isSet(threadData, _OMC_LIT167))
          {
            omc_BackendDump_debugStrEqnStr(threadData, _OMC_LIT163, _eqn, _OMC_LIT45);
          }
          tmpMeta252 = mmc_mk_box2(0, _eqn, mmc_mk_integer(_index));
          tmpMeta251 = mmc_mk_cons(tmpMeta252, _eqnslst);
          tmpMeta253 = mmc_mk_box3(0, tmpMeta251, mmc_mk_integer(((modelica_integer) 1) + _index), mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _eqn;
          tmpMeta[0+1] = tmpMeta253;
          goto tmp3_done;
        }
        case 12: {
          modelica_metatype tmpMeta254;
          modelica_metatype tmpMeta255;
          modelica_metatype tmpMeta256;
          modelica_metatype tmpMeta257;
          modelica_metatype tmpMeta258;
          modelica_metatype tmpMeta259;
          modelica_metatype tmpMeta260;
          modelica_metatype tmpMeta261;
          modelica_metatype tmpMeta262;
          modelica_integer tmp263;
          modelica_metatype tmpMeta264;
          modelica_metatype tmpMeta265;
          modelica_metatype tmpMeta266;
          modelica_metatype tmpMeta267;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
          tmpMeta254 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta255 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta255,8,2) == 0) goto tmp3_end;
          tmpMeta256 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta255), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta256,13,3) == 0) goto tmp3_end;
          tmpMeta257 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta256), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta257,1,1) == 0) goto tmp3_end;
          tmpMeta258 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta257), 2));
          if (10 != MMC_STRLEN(tmpMeta258) || strcmp(MMC_STRINGDATA(_OMC_LIT164), MMC_STRINGDATA(tmpMeta258)) != 0) goto tmp3_end;
          tmpMeta259 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta260 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmpMeta261 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta262 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp263 = mmc_unbox_integer(tmpMeta262);
          
          _y = tmpMeta254;
          _x = tmpMeta256;
          _source = tmpMeta259;
          _eqAttr = tmpMeta260;
          _eqnslst = tmpMeta261;
          _index = tmp263  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          _y = omc_Expression_negate(threadData, _y);

          tmpMeta264 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _y, _x, _source, _eqAttr);
          _eqn = tmpMeta264;

          if(omc_Flags_isSet(threadData, _OMC_LIT167))
          {
            omc_BackendDump_debugStrEqnStr(threadData, _OMC_LIT163, _eqn, _OMC_LIT45);
          }
          tmpMeta266 = mmc_mk_box2(0, _eqn, mmc_mk_integer(_index));
          tmpMeta265 = mmc_mk_cons(tmpMeta266, _eqnslst);
          tmpMeta267 = mmc_mk_box3(0, tmpMeta265, mmc_mk_integer(((modelica_integer) 1) + _index), mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _eqn;
          tmpMeta[0+1] = tmpMeta267;
          goto tmp3_done;
        }
        case 13: {
          modelica_metatype tmpMeta268;
          modelica_metatype tmpMeta269;
          modelica_metatype tmpMeta270;
          modelica_metatype tmpMeta271;
          modelica_metatype tmpMeta272;
          modelica_metatype tmpMeta273;
          modelica_metatype tmpMeta274;
          modelica_metatype tmpMeta275;
          modelica_metatype tmpMeta276;
          modelica_integer tmp277;
          modelica_metatype tmpMeta278;
          modelica_metatype tmpMeta279;
          modelica_metatype tmpMeta280;
          modelica_metatype tmpMeta281;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
          tmpMeta268 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta268,8,2) == 0) goto tmp3_end;
          tmpMeta269 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta268), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta269,13,3) == 0) goto tmp3_end;
          tmpMeta270 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta269), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta270,1,1) == 0) goto tmp3_end;
          tmpMeta271 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta270), 2));
          if (10 != MMC_STRLEN(tmpMeta271) || strcmp(MMC_STRINGDATA(_OMC_LIT164), MMC_STRINGDATA(tmpMeta271)) != 0) goto tmp3_end;
          tmpMeta272 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta273 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta274 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmpMeta275 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta276 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp277 = mmc_unbox_integer(tmpMeta276);
          
          _x = tmpMeta269;
          _y = tmpMeta272;
          _source = tmpMeta273;
          _eqAttr = tmpMeta274;
          _eqnslst = tmpMeta275;
          _index = tmp277  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          _y = omc_Expression_negate(threadData, _y);

          tmpMeta278 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _y, _x, _source, _eqAttr);
          _eqn = tmpMeta278;

          if(omc_Flags_isSet(threadData, _OMC_LIT167))
          {
            omc_BackendDump_debugStrEqnStr(threadData, _OMC_LIT163, _eqn, _OMC_LIT45);
          }
          tmpMeta280 = mmc_mk_box2(0, _eqn, mmc_mk_integer(_index));
          tmpMeta279 = mmc_mk_cons(tmpMeta280, _eqnslst);
          tmpMeta281 = mmc_mk_box3(0, tmpMeta279, mmc_mk_integer(((modelica_integer) 1) + _index), mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _eqn;
          tmpMeta[0+1] = tmpMeta281;
          goto tmp3_done;
        }
        case 14: {
          modelica_metatype tmpMeta282;
          modelica_metatype tmpMeta283;
          modelica_integer tmp284;
          modelica_metatype tmpMeta285;
          modelica_integer tmp286;
          modelica_metatype tmpMeta287;
          tmpMeta282 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta283 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp284 = mmc_unbox_integer(tmpMeta283);
          tmpMeta285 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp286 = mmc_unbox_integer(tmpMeta285);
          _eqn = tmp4_1;
          _eqnslst = tmpMeta282;
          _index = tmp284  /* pattern as ty=Integer */;
          _b = tmp286  /* pattern as ty=Boolean */;
          /* Pattern matching succeeded */
          tmpMeta287 = mmc_mk_box3(0, _eqnslst, mmc_mk_integer(((modelica_integer) 1) + _index), mmc_mk_boolean(_b));
          tmpMeta[0+0] = _eqn;
          tmpMeta[0+1] = tmpMeta287;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 15) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outEq = tmpMeta[0+0];
  _outTpl = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outTpl) { *out_outTpl = _outTpl; }
  return _outEq;
}

PROTECTED_FUNCTION_STATIC modelica_integer omc_BackendDAEOptimize_semiLinearSort2(threadData_t *threadData, modelica_metatype _eqnslst, modelica_metatype _iHt, modelica_integer _size, modelica_metatype _iEqnsarray, modelica_metatype *out_oEqnsarray)
{
  modelica_integer _osize;
  modelica_metatype _oEqnsarray = NULL;
  modelica_integer tmp1_c0 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _osize has no default value.
  // _oEqnsarray has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _eqnslst;
    {
      modelica_metatype _eqn = NULL;
      modelica_integer _index;
      modelica_integer _i;
      modelica_metatype _rest = NULL;
      modelica_metatype _eqns = NULL;
      modelica_metatype _ht = NULL;
      modelica_metatype _x = NULL;
      modelica_metatype _eqnsarray = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _eqn has no default value.
      // _index has no default value.
      // _i has no default value.
      // _rest has no default value.
      // _eqns has no default value.
      // _ht has no default value.
      // _x has no default value.
      // _eqnsarray has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmp1_c0 = _size;
          tmpMeta[0+1] = _iEqnsarray;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_integer tmp14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,4) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,13,3) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
          if (listEmpty(tmpMeta10)) goto tmp3_end;
          tmpMeta11 = MMC_CAR(tmpMeta10);
          tmpMeta12 = MMC_CDR(tmpMeta10);
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          tmp14 = mmc_unbox_integer(tmpMeta13);
          _eqn = tmpMeta8;
          _x = tmpMeta11;
          _index = tmp14  /* pattern as ty=Integer */;
          _rest = tmpMeta7;
          /* Pattern matching succeeded */
          _i = mmc_unbox_integer(omc_BaseHashTable_get(threadData, _x, _iHt));

          _eqns = arrayGet(_iEqnsarray,_i) /* DAE.ASUB */;

          tmpMeta16 = mmc_mk_box2(0, _eqn, mmc_mk_integer(_index));
          tmpMeta15 = mmc_mk_cons(tmpMeta16, _eqns);
          _eqnsarray = arrayUpdate(_iEqnsarray, _i, tmpMeta15);
          tmp1_c0 = omc_BackendDAEOptimize_semiLinearSort2(threadData, _rest, _iHt, _size, _eqnsarray, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_integer tmp25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_boolean tmp28;
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta17 = MMC_CAR(tmp4_1);
          tmpMeta18 = MMC_CDR(tmp4_1);
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,0,4) == 0) goto tmp3_end;
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta20,13,3) == 0) goto tmp3_end;
          tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 3));
          if (listEmpty(tmpMeta21)) goto tmp3_end;
          tmpMeta22 = MMC_CAR(tmpMeta21);
          tmpMeta23 = MMC_CDR(tmpMeta21);
          tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 2));
          tmp25 = mmc_unbox_integer(tmpMeta24);
          _eqn = tmpMeta19;
          _x = tmpMeta22;
          _index = tmp25  /* pattern as ty=Integer */;
          _rest = tmpMeta18;
          /* Pattern matching succeeded */
          tmpMeta26 = mmc_mk_box2(0, _x, mmc_mk_integer(_size));
          _ht = omc_BaseHashTable_add(threadData, tmpMeta26, _iHt);

          tmp28 = (modelica_boolean)(_size > arrayLength(_iEqnsarray));
          if(tmp28)
          {
            tmpMeta27 = MMC_REFSTRUCTLIT(mmc_nil);
            tmpMeta29 = omc_Array_expand(threadData, ((modelica_integer) 5), _iEqnsarray, tmpMeta27);
          }
          else
          {
            tmpMeta29 = _iEqnsarray;
          }
          _eqnsarray = tmpMeta29;

          tmpMeta31 = mmc_mk_box2(0, _eqn, mmc_mk_integer(_index));
          tmpMeta30 = mmc_mk_cons(tmpMeta31, MMC_REFSTRUCTLIT(mmc_nil));
          _eqnsarray = arrayUpdate(_eqnsarray, _size, tmpMeta30);
          tmp1_c0 = omc_BackendDAEOptimize_semiLinearSort2(threadData, _rest, _ht, ((modelica_integer) 1) + _size, _eqnsarray, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _osize = tmp1_c0;
  _oEqnsarray = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_oEqnsarray) { *out_oEqnsarray = _oEqnsarray; }
  return _osize;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_semiLinearSort2(threadData_t *threadData, modelica_metatype _eqnslst, modelica_metatype _iHt, modelica_metatype _size, modelica_metatype _iEqnsarray, modelica_metatype *out_oEqnsarray)
{
  modelica_integer tmp1;
  modelica_integer _osize;
  modelica_metatype out_osize;
  tmp1 = mmc_unbox_integer(_size);
  _osize = omc_BackendDAEOptimize_semiLinearSort2(threadData, _eqnslst, _iHt, tmp1, _iEqnsarray, out_oEqnsarray);
  out_osize = mmc_mk_icon(_osize);
  /* skip box _oEqnsarray; array<list<tuple<BackendDAE.Equation, #Integer>>> */
  return out_osize;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_semiLinearSort1(threadData_t *threadData, modelica_metatype _eqnslstlst, modelica_integer _size, modelica_metatype _iEqnsarray)
{
  modelica_metatype _oEqnsarray = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oEqnsarray has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _eqnslstlst;
    {
      modelica_integer _size1;
      modelica_metatype _tpl = NULL;
      modelica_metatype _eqns = NULL;
      modelica_metatype _rest = NULL;
      modelica_metatype _ht = NULL;
      modelica_metatype _eqnsarray = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _size1 has no default value.
      // _tpl has no default value.
      // _eqns has no default value.
      // _rest has no default value.
      // _ht has no default value.
      // _eqnsarray has no default value.
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta1 = _iEqnsarray;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_boolean tmp11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          if (listEmpty(tmpMeta6)) goto tmp3_end;
          tmpMeta8 = MMC_CAR(tmpMeta6);
          tmpMeta9 = MMC_CDR(tmpMeta6);
          if (!listEmpty(tmpMeta9)) goto tmp3_end;
          _tpl = tmpMeta8;
          _rest = tmpMeta7;
          /* Pattern matching succeeded */
          tmp11 = (modelica_boolean)(_size > arrayLength(_iEqnsarray));
          if(tmp11)
          {
            tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
            tmpMeta12 = omc_Array_expand(threadData, ((modelica_integer) 5), _iEqnsarray, tmpMeta10);
          }
          else
          {
            tmpMeta12 = _iEqnsarray;
          }
          _eqnsarray = tmpMeta12;

          tmpMeta13 = mmc_mk_cons(_tpl, MMC_REFSTRUCTLIT(mmc_nil));
          _eqnsarray = arrayUpdate(_eqnsarray, _size, tmpMeta13);
          /* Tail recursive call */
          _eqnslstlst = _rest;
          _size = ((modelica_integer) 1) + _size;
          _iEqnsarray = _eqnsarray;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta14 = MMC_CAR(tmp4_1);
          tmpMeta15 = MMC_CDR(tmp4_1);
          _eqns = tmpMeta14;
          _rest = tmpMeta15;
          /* Pattern matching succeeded */
          _ht = omc_HashTableExpToIndex_emptyHashTable(threadData);

          _size1 = omc_BackendDAEOptimize_semiLinearSort2(threadData, _eqns, _ht, _size, _iEqnsarray ,&_eqnsarray);
          /* Tail recursive call */
          _eqnslstlst = _rest;
          _size = _size1;
          _iEqnsarray = _eqnsarray;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _oEqnsarray = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _oEqnsarray;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_semiLinearSort1(threadData_t *threadData, modelica_metatype _eqnslstlst, modelica_metatype _size, modelica_metatype _iEqnsarray)
{
  modelica_integer tmp1;
  modelica_metatype _oEqnsarray = NULL;
  tmp1 = mmc_unbox_integer(_size);
  _oEqnsarray = omc_BackendDAEOptimize_semiLinearSort1(threadData, _eqnslstlst, tmp1, _iEqnsarray);
  /* skip box _oEqnsarray; array<list<tuple<BackendDAE.Equation, #Integer>>> */
  return _oEqnsarray;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_semiLinearSort(threadData_t *threadData, modelica_metatype _eqnslst, modelica_metatype _iHt, modelica_integer _size, modelica_metatype _iEqnsarray)
{
  modelica_metatype _oEqnsarray = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oEqnsarray has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _eqnslst;
    {
      modelica_metatype _eqn = NULL;
      modelica_integer _index;
      modelica_integer _i;
      modelica_metatype _rest = NULL;
      modelica_metatype _eqns = NULL;
      modelica_metatype _ht = NULL;
      modelica_metatype _y = NULL;
      modelica_metatype _eqnsarray = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _eqn has no default value.
      // _index has no default value.
      // _i has no default value.
      // _rest has no default value.
      // _eqns has no default value.
      // _ht has no default value.
      // _y has no default value.
      // _eqnsarray has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta1 = _iEqnsarray;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_integer tmp11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,4) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          tmp11 = mmc_unbox_integer(tmpMeta10);
          _eqn = tmpMeta8;
          _y = tmpMeta9;
          _index = tmp11  /* pattern as ty=Integer */;
          _rest = tmpMeta7;
          /* Pattern matching succeeded */
          _i = mmc_unbox_integer(omc_BaseHashTable_get(threadData, _y, _iHt));

          _eqns = arrayGet(_iEqnsarray,_i) /* DAE.ASUB */;

          tmpMeta13 = mmc_mk_box2(0, _eqn, mmc_mk_integer(_index));
          tmpMeta12 = mmc_mk_cons(tmpMeta13, _eqns);
          _eqnsarray = arrayUpdate(_iEqnsarray, _i, tmpMeta12);
          tmpMeta1 = omc_BackendDAEOptimize_semiLinearSort(threadData, _rest, _iHt, _size, _eqnsarray);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_integer tmp19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_boolean tmp22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta14 = MMC_CAR(tmp4_1);
          tmpMeta15 = MMC_CDR(tmp4_1);
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,0,4) == 0) goto tmp3_end;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
          tmp19 = mmc_unbox_integer(tmpMeta18);
          _eqn = tmpMeta16;
          _y = tmpMeta17;
          _index = tmp19  /* pattern as ty=Integer */;
          _rest = tmpMeta15;
          /* Pattern matching succeeded */
          tmpMeta20 = mmc_mk_box2(0, _y, mmc_mk_integer(_size));
          _ht = omc_BaseHashTable_add(threadData, tmpMeta20, _iHt);

          tmp22 = (modelica_boolean)(_size > arrayLength(_iEqnsarray));
          if(tmp22)
          {
            tmpMeta21 = MMC_REFSTRUCTLIT(mmc_nil);
            tmpMeta23 = omc_Array_expand(threadData, ((modelica_integer) 5), _iEqnsarray, tmpMeta21);
          }
          else
          {
            tmpMeta23 = _iEqnsarray;
          }
          _eqnsarray = tmpMeta23;

          tmpMeta25 = mmc_mk_box2(0, _eqn, mmc_mk_integer(_index));
          tmpMeta24 = mmc_mk_cons(tmpMeta25, MMC_REFSTRUCTLIT(mmc_nil));
          _eqnsarray = arrayUpdate(_eqnsarray, _size, tmpMeta24);
          tmpMeta1 = omc_BackendDAEOptimize_semiLinearSort(threadData, _rest, _ht, ((modelica_integer) 1) + _size, _eqnsarray);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _oEqnsarray = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _oEqnsarray;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_semiLinearSort(threadData_t *threadData, modelica_metatype _eqnslst, modelica_metatype _iHt, modelica_metatype _size, modelica_metatype _iEqnsarray)
{
  modelica_integer tmp1;
  modelica_metatype _oEqnsarray = NULL;
  tmp1 = mmc_unbox_integer(_size);
  _oEqnsarray = omc_BackendDAEOptimize_semiLinearSort(threadData, _eqnslst, _iHt, tmp1, _iEqnsarray);
  /* skip box _oEqnsarray; array<list<tuple<BackendDAE.Equation, #Integer>>> */
  return _oEqnsarray;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_semiLinearOptimize1(threadData_t *threadData, modelica_metatype _eqnslst, modelica_integer _i, modelica_metatype _iHt, modelica_metatype _iHt1, modelica_metatype *out_oHt1)
{
  modelica_metatype _oHt = NULL;
  modelica_metatype _oHt1 = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oHt has no default value.
  // _oHt1 has no default value.
  
  
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _eqnslst;
    {
      modelica_metatype _rest = NULL;
      modelica_metatype _ht = NULL;
      modelica_metatype _ht1 = NULL;
      modelica_metatype _sa = NULL;
      modelica_metatype _sb = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _rest has no default value.
      // _ht has no default value.
      // _ht1 has no default value.
      // _sa has no default value.
      // _sb has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _iHt;
          tmpMeta[0+1] = _iHt1;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,4) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,13,3) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
          if (listEmpty(tmpMeta10)) goto tmp3_end;
          tmpMeta11 = MMC_CAR(tmpMeta10);
          tmpMeta12 = MMC_CDR(tmpMeta10);
          if (listEmpty(tmpMeta12)) goto tmp3_end;
          tmpMeta13 = MMC_CAR(tmpMeta12);
          tmpMeta14 = MMC_CDR(tmpMeta12);
          if (listEmpty(tmpMeta14)) goto tmp3_end;
          tmpMeta15 = MMC_CAR(tmpMeta14);
          tmpMeta16 = MMC_CDR(tmpMeta14);
          if (!listEmpty(tmpMeta16)) goto tmp3_end;
          
          _sa = tmpMeta13;
          _sb = tmpMeta15;
          _rest = tmpMeta7;
          /* Pattern matching succeeded */
          tmpMeta17 = mmc_mk_box2(0, _sa, mmc_mk_integer(_i));
          _ht = omc_BaseHashTable_add(threadData, tmpMeta17, _iHt);

          tmpMeta18 = mmc_mk_box2(0, _sb, mmc_mk_integer(_i));
          _ht1 = omc_BaseHashTable_add(threadData, tmpMeta18, _iHt1);
          /* Tail recursive call */
          _eqnslst = _rest;
          _i = ((modelica_integer) 1) + _i;
          _iHt = _ht;
          _iHt1 = _ht1;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _oHt = tmpMeta[0+0];
  _oHt1 = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_oHt1) { *out_oHt1 = _oHt1; }
  return _oHt;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_semiLinearOptimize1(threadData_t *threadData, modelica_metatype _eqnslst, modelica_metatype _i, modelica_metatype _iHt, modelica_metatype _iHt1, modelica_metatype *out_oHt1)
{
  modelica_integer tmp1;
  modelica_metatype _oHt = NULL;
  tmp1 = mmc_unbox_integer(_i);
  _oHt = omc_BackendDAEOptimize_semiLinearOptimize1(threadData, _eqnslst, tmp1, _iHt, _iHt1, out_oHt1);
  /* skip box _oHt; tuple<array<list<tuple<DAE.Exp, #Integer>>>, tuple<#Integer, #Integer, array<Option<tuple<DAE.Exp, #Integer>>>>, #Integer, tuple<.HashTableExpToIndex.FuncHashCref<function>(DAE.Exp cr) => #Integer, .HashTableExpToIndex.FuncCrefEqual<function>(DAE.Exp cr1, DAE.Exp cr2) => #Boolean, .HashTableExpToIndex.FuncCrefStr<function>(DAE.Exp cr) => String, .HashTableExpToIndex.FuncExpStr<function>(#Integer exp) => String>> */
  /* skip box _oHt1; tuple<array<list<tuple<DAE.Exp, #Integer>>>, tuple<#Integer, #Integer, array<Option<tuple<DAE.Exp, #Integer>>>>, #Integer, tuple<.HashTableExpToIndex.FuncHashCref<function>(DAE.Exp cr) => #Integer, .HashTableExpToIndex.FuncCrefEqual<function>(DAE.Exp cr1, DAE.Exp cr2) => #Boolean, .HashTableExpToIndex.FuncCrefStr<function>(DAE.Exp cr) => String, .HashTableExpToIndex.FuncExpStr<function>(#Integer exp) => String>> */
  return _oHt;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_semiLinearGetSA(threadData_t *threadData, modelica_metatype _key, modelica_metatype _iHt1, modelica_metatype _iAcc)
{
  modelica_metatype _oAcc = NULL;
  modelica_metatype tmpMeta1;
  modelica_boolean tmp2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oAcc has no default value.
  tmp2 = (modelica_boolean)omc_BaseHashTable_hasKey(threadData, _key, _iHt1);
  if(tmp2)
  {
    tmpMeta3 = _iAcc;
  }
  else
  {
    tmpMeta1 = mmc_mk_cons(_key, _iAcc);
    tmpMeta3 = tmpMeta1;
  }
  _oAcc = tmpMeta3;
  _return: OMC_LABEL_UNUSED
  return _oAcc;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_semiLinearOptimize3(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _isource, modelica_integer _iIndex, modelica_metatype _iHt, modelica_metatype _IEqnsarray, modelica_metatype _iAcc, modelica_metatype *out_osource, modelica_integer *out_oIndex, modelica_metatype *out_oAcc)
{
  modelica_metatype _slast = NULL;
  modelica_metatype _osource = NULL;
  modelica_integer _oIndex;
  modelica_metatype _oAcc = NULL;
  modelica_integer tmp1_c2 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _slast has no default value.
  // _osource has no default value.
  // _oIndex has no default value.
  // _oAcc has no default value.
  
  
  
  
  { /* matchcontinue expression */
    {
      modelica_metatype _sb = NULL;
      modelica_integer _i;
      modelica_integer _index;
      modelica_metatype _source = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _sb has no default value.
      // _i has no default value.
      // _index has no default value.
      // _source has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_integer tmp18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          /* Pattern matching succeeded */
          _i = mmc_unbox_integer(omc_BaseHashTable_get(threadData, _exp, _iHt));

          /* Pattern-matching assignment */
          tmpMeta6 = arrayGet(_IEqnsarray,_i) /* DAE.ASUB */;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,4) == 0) goto goto_2;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,13,3) == 0) goto goto_2;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
          if (listEmpty(tmpMeta9)) goto goto_2;
          tmpMeta10 = MMC_CAR(tmpMeta9);
          tmpMeta11 = MMC_CDR(tmpMeta9);
          if (listEmpty(tmpMeta11)) goto goto_2;
          tmpMeta12 = MMC_CAR(tmpMeta11);
          tmpMeta13 = MMC_CDR(tmpMeta11);
          if (listEmpty(tmpMeta13)) goto goto_2;
          tmpMeta14 = MMC_CAR(tmpMeta13);
          tmpMeta15 = MMC_CDR(tmpMeta13);
          if (!listEmpty(tmpMeta15)) goto goto_2;
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          tmp18 = mmc_unbox_integer(tmpMeta17);
          _sb = tmpMeta14;
          _source = tmpMeta16;
          _index = tmp18  /* pattern as ty=Integer */;
          tmpMeta20 = mmc_mk_box3(0, _exp, mmc_mk_integer(_iIndex), _source);
          tmpMeta19 = mmc_mk_cons(tmpMeta20, _iAcc);
          tmpMeta[0+0] = omc_BackendDAEOptimize_semiLinearOptimize3(threadData, _sb, _source, _index, _iHt, _IEqnsarray, tmpMeta19, &tmpMeta[0+1], &tmp1_c2, &tmpMeta[0+3]);
          goto tmp3_done;
        }
        case 1: {
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = _isource;
          tmp1_c2 = _iIndex;
          tmpMeta[0+3] = _iAcc;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _slast = tmpMeta[0+0];
  _osource = tmpMeta[0+1];
  _oIndex = tmp1_c2;
  _oAcc = tmpMeta[0+3];
  _return: OMC_LABEL_UNUSED
  if (out_osource) { *out_osource = _osource; }
  if (out_oIndex) { *out_oIndex = _oIndex; }
  if (out_oAcc) { *out_oAcc = _oAcc; }
  return _slast;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_semiLinearOptimize3(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _isource, modelica_metatype _iIndex, modelica_metatype _iHt, modelica_metatype _IEqnsarray, modelica_metatype _iAcc, modelica_metatype *out_osource, modelica_metatype *out_oIndex, modelica_metatype *out_oAcc)
{
  modelica_integer tmp1;
  modelica_integer _oIndex;
  modelica_metatype _slast = NULL;
  tmp1 = mmc_unbox_integer(_iIndex);
  _slast = omc_BackendDAEOptimize_semiLinearOptimize3(threadData, _exp, _isource, tmp1, _iHt, _IEqnsarray, _iAcc, out_osource, &_oIndex, out_oAcc);
  /* skip box _slast; DAE.Exp */
  /* skip box _osource; DAE.ElementSource */
  if (out_oIndex) { *out_oIndex = mmc_mk_icon(_oIndex); }
  /* skip box _oAcc; list<tuple<DAE.Exp, #Integer, DAE.ElementSource>> */
  return _slast;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_semiLinearOptimize4(threadData_t *threadData, modelica_metatype _explst, modelica_metatype _iAcc, modelica_metatype _inEqAttr)
{
  modelica_metatype _oAcc = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oAcc has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _explst;
    {
      modelica_metatype _s1 = NULL;
      modelica_metatype _s2 = NULL;
      modelica_metatype _rest = NULL;
      modelica_integer _index;
      modelica_metatype _eqn = NULL;
      modelica_metatype _source = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _s1 has no default value.
      // _s2 has no default value.
      // _rest has no default value.
      // _index has no default value.
      // _eqn has no default value.
      // _source has no default value.
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta1 = _iAcc;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          if (!listEmpty(tmpMeta7)) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta1 = _iAcc;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_integer tmp12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta8 = MMC_CAR(tmp4_1);
          tmpMeta9 = MMC_CDR(tmp4_1);
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
          tmp12 = mmc_unbox_integer(tmpMeta11);
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
          if (listEmpty(tmpMeta9)) goto tmp3_end;
          tmpMeta14 = MMC_CAR(tmpMeta9);
          tmpMeta15 = MMC_CDR(tmpMeta9);
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 1));
          
          _s2 = tmpMeta10;
          _index = tmp12  /* pattern as ty=Integer */;
          _source = tmpMeta13;
          _rest = tmpMeta9;
          _s1 = tmpMeta16;
          /* Pattern matching succeeded */
          tmpMeta17 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _s2, _s1, _source, _inEqAttr);
          _eqn = tmpMeta17;
          tmpMeta19 = mmc_mk_box2(0, _eqn, mmc_mk_integer(_index));
          tmpMeta18 = mmc_mk_cons(tmpMeta19, _iAcc);
          /* Tail recursive call */
          _explst = _rest;
          _iAcc = tmpMeta18;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _oAcc = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _oAcc;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_semiLinearOptimize2(threadData_t *threadData, modelica_metatype _saLst, modelica_metatype _iHt, modelica_metatype _IEqnsarray, modelica_metatype _iAcc)
{
  modelica_metatype _oAcc = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oAcc has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _saLst;
    {
      modelica_metatype _sa = NULL;
      modelica_metatype _sb = NULL;
      modelica_metatype _s1 = NULL;
      modelica_metatype _y = NULL;
      modelica_metatype _x = NULL;
      modelica_metatype _rest = NULL;
      modelica_metatype _explst = NULL;
      modelica_metatype _acc = NULL;
      modelica_metatype _eqn = NULL;
      modelica_metatype _eqn1 = NULL;
      modelica_integer _i1;
      modelica_integer _index;
      modelica_integer _index1;
      modelica_metatype _path = NULL;
      modelica_metatype _attr = NULL;
      modelica_metatype _source = NULL;
      modelica_metatype _source1 = NULL;
      modelica_metatype _eqAttr = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _sa has no default value.
      // _sb has no default value.
      // _s1 has no default value.
      // _y has no default value.
      // _x has no default value.
      // _rest has no default value.
      // _explst has no default value.
      // _acc has no default value.
      // _eqn has no default value.
      // _eqn1 has no default value.
      // _i1 has no default value.
      // _index has no default value.
      // _index1 has no default value.
      // _path has no default value.
      // _attr has no default value.
      // _source has no default value.
      // _source1 has no default value.
      // _eqAttr has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta1 = _iAcc;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_integer tmp24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          modelica_metatype tmpMeta37;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          _sa = tmpMeta6;
          _rest = tmpMeta7;
          /* Pattern matching succeeded */
          _i1 = mmc_unbox_integer(omc_BaseHashTable_get(threadData, _sa, _iHt));

          /* Pattern-matching assignment */
          tmpMeta8 = arrayGet(_IEqnsarray,_i1) /* DAE.ASUB */;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,4) == 0) goto goto_2;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,13,3) == 0) goto goto_2;
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 3));
          if (listEmpty(tmpMeta13)) goto goto_2;
          tmpMeta14 = MMC_CAR(tmpMeta13);
          tmpMeta15 = MMC_CDR(tmpMeta13);
          if (listEmpty(tmpMeta15)) goto goto_2;
          tmpMeta16 = MMC_CAR(tmpMeta15);
          tmpMeta17 = MMC_CDR(tmpMeta15);
          if (listEmpty(tmpMeta17)) goto goto_2;
          tmpMeta18 = MMC_CAR(tmpMeta17);
          tmpMeta19 = MMC_CDR(tmpMeta17);
          if (!listEmpty(tmpMeta19)) goto goto_2;
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 4));
          tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 4));
          tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 5));
          tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
          tmp24 = mmc_unbox_integer(tmpMeta23);
          _y = tmpMeta10;
          _path = tmpMeta12;
          _x = tmpMeta14;
          _s1 = tmpMeta18;
          _attr = tmpMeta20;
          _source = tmpMeta21;
          _eqAttr = tmpMeta22;
          _index = tmp24  /* pattern as ty=Integer */;

          tmpMeta25 = MMC_REFSTRUCTLIT(mmc_nil);
          _sb = omc_BackendDAEOptimize_semiLinearOptimize3(threadData, _s1, _source, _index, _iHt, _IEqnsarray, tmpMeta25 ,&_source1 ,&_index1 ,&_explst);

          tmpMeta27 = mmc_mk_box6(14, &DAE_Exp_RELATION__desc, _x, _OMC_LIT170, _OMC_LIT139, mmc_mk_integer(((modelica_integer) -1)), mmc_mk_none());
          tmpMeta26 = mmc_mk_cons(tmpMeta27, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta28 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _OMC_LIT169, tmpMeta26, _OMC_LIT172);
          tmpMeta29 = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, tmpMeta28, _sa, _sb);
          tmpMeta30 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _s1, tmpMeta29, _source, _eqAttr);
          _eqn = tmpMeta30;

          tmpMeta31 = mmc_mk_cons(_x, mmc_mk_cons(_sa, mmc_mk_cons(_sb, MMC_REFSTRUCTLIT(mmc_nil))));
          tmpMeta32 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _path, tmpMeta31, _attr);
          tmpMeta33 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _y, tmpMeta32, _source1, _eqAttr);
          _eqn1 = tmpMeta33;

          tmpMeta35 = mmc_mk_box2(0, _eqn1, mmc_mk_integer(_index1));
          tmpMeta34 = mmc_mk_cons(tmpMeta35, _iAcc);
          _acc = omc_BackendDAEOptimize_semiLinearOptimize4(threadData, _explst, tmpMeta34, _eqAttr);
          tmpMeta37 = mmc_mk_box2(0, _eqn, mmc_mk_integer(_index));
          tmpMeta36 = mmc_mk_cons(tmpMeta37, _acc);
          tmpMeta1 = omc_BackendDAEOptimize_semiLinearOptimize2(threadData, _rest, _iHt, _IEqnsarray, tmpMeta36);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta38 = MMC_CAR(tmp4_1);
          tmpMeta39 = MMC_CDR(tmp4_1);
          _rest = tmpMeta39;
          /* Pattern matching succeeded */
          tmpMeta1 = omc_BackendDAEOptimize_semiLinearOptimize2(threadData, _rest, _iHt, _IEqnsarray, _iAcc);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _oAcc = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _oAcc;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_semiLinearOptimize(threadData_t *threadData, modelica_metatype _eqnslst, modelica_metatype _iAcc)
{
  modelica_metatype _oAcc = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oAcc has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _eqnslst;
    {
      modelica_metatype _ht = NULL;
      modelica_metatype _ht1 = NULL;
      modelica_metatype _eqnsarray = NULL;
      modelica_metatype _explst = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _ht has no default value.
      // _ht1 has no default value.
      // _eqnsarray has no default value.
      // _explst has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          if (!listEmpty(tmpMeta7)) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta1 = _iAcc;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta8;
          
          /* Pattern matching succeeded */
          _ht = omc_HashTableExpToIndex_emptyHashTable(threadData);

          _ht1 = omc_HashTableExpToIndex_emptyHashTable(threadData);

          _ht = omc_BackendDAEOptimize_semiLinearOptimize1(threadData, _eqnslst, ((modelica_integer) 1), _ht, _ht1 ,&_ht1);

          tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
          _explst = omc_List_fold1(threadData, omc_BaseHashTable_hashTableKeyList(threadData, _ht), boxvar_BackendDAEOptimize_semiLinearGetSA, _ht1, tmpMeta8);

          _eqnsarray = listArray(_eqnslst);
          tmpMeta1 = omc_BackendDAEOptimize_semiLinearOptimize2(threadData, _explst, _ht, _eqnsarray, _iAcc);
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _iAcc;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _oAcc = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _oAcc;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_semiLinearReplaceEqns(threadData_t *threadData, modelica_metatype _iTpl, modelica_metatype _iEqns)
{
  modelica_metatype _oEqns = NULL;
  modelica_metatype _eqn = NULL;
  modelica_integer _index;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_integer tmp4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oEqns has no default value.
  // _eqn has no default value.
  // _index has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _iTpl;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmp4 = mmc_unbox_integer(tmpMeta3);
  _eqn = tmpMeta2;
  _index = tmp4  /* pattern as ty=Integer */;

  if(omc_Flags_isSet(threadData, _OMC_LIT167))
  {
    omc_BackendDump_debugStrEqnStr(threadData, _OMC_LIT173, _eqn, _OMC_LIT45);
  }

  _oEqns = omc_BackendEquation_setAtIndex(threadData, _iEqns, ((modelica_integer) 1) + _index, _eqn);
  _return: OMC_LABEL_UNUSED
  return _oEqns;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifysemiLinearWork(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _ishared, modelica_metatype *out_oshared)
{
  modelica_metatype _osyst = NULL;
  modelica_metatype _oshared = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _osyst has no default value.
  // _oshared has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _isyst;
    {
      modelica_metatype _eqns = NULL;
      modelica_metatype _eqnslst = NULL;
      modelica_metatype _syst = NULL;
      modelica_metatype _eqnsarray = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _eqns has no default value.
      // _eqnslst has no default value.
      // _syst has no default value.
      // _eqnsarray has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_integer tmp10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _syst = tmp4_1;
          _eqns = tmpMeta6;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta11 = omc_BackendEquation_traverseEquationArray__WithUpdate(threadData, _eqns, boxvar_BackendDAEOptimize_simplifysemiLinearFinder, _OMC_LIT174, &tmpMeta7);
          _eqns = tmpMeta11;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
          tmp10 = mmc_unbox_integer(tmpMeta9);
          if (1 /* true */ != tmp10) goto goto_2;
          _eqnslst = tmpMeta8;

          tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
          _eqnsarray = omc_BackendDAEOptimize_semiLinearSort(threadData, _eqnslst, omc_HashTableExpToIndex_emptyHashTable(threadData), ((modelica_integer) 1), arrayCreate(((modelica_integer) 5), tmpMeta12));

          tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
          _eqnsarray = omc_BackendDAEOptimize_semiLinearSort1(threadData, arrayList(_eqnsarray), ((modelica_integer) 1), arrayCreate(((modelica_integer) 5), tmpMeta13));

          tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
          _eqnslst = omc_List_fold(threadData, arrayList(_eqnsarray), boxvar_BackendDAEOptimize_semiLinearOptimize, tmpMeta14);

          tmpMeta15 = MMC_TAGPTR(mmc_alloc_words(11));
          memcpy(MMC_UNTAGPTR(tmpMeta15), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta15))[3] = omc_List_fold(threadData, _eqnslst, boxvar_BackendDAEOptimize_semiLinearReplaceEqns, _eqns);
          _syst = tmpMeta15;
          tmpMeta[0+0] = omc_BackendDAEUtil_clearEqSyst(threadData, _syst);
          tmpMeta[0+1] = _ishared;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _isyst;
          tmpMeta[0+1] = _ishared;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _osyst = tmpMeta[0+0];
  _oshared = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_oshared) { *out_oshared = _oshared; }
  return _osyst;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_simplifysemiLinear(threadData_t *threadData, modelica_metatype _dae)
{
  modelica_metatype _odae = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _odae has no default value.
  _odae = omc_BackendDAEUtil_mapEqSystem(threadData, _dae, boxvar_BackendDAEOptimize_simplifysemiLinearWork);
  _return: OMC_LABEL_UNUSED
  return _odae;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_makeEquationsFromResiduals(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExpLst2, modelica_metatype _inExpLst3, modelica_metatype _inSource, modelica_metatype _inEqAttr)
{
  modelica_metatype _outExpLst = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExpLst has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inExpLst3;
    {
      modelica_metatype _tbsRest = NULL;
      modelica_metatype _tbsFirst = NULL;
      modelica_metatype _fbs = NULL;
      modelica_metatype _ifexp = NULL;
      modelica_metatype _fb = NULL;
      modelica_metatype _eq = NULL;
      modelica_metatype _rest_res = NULL;
      modelica_metatype _zeroExp = NULL;
      modelica_integer _size;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _tbsRest has no default value.
      // _tbsFirst has no default value.
      // _fbs has no default value.
      // _ifexp has no default value.
      // _fb has no default value.
      // _eq has no default value.
      // _rest_res has no default value.
      // _zeroExp has no default value.
      // _size has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_boolean tmp6;
          modelica_metatype tmpMeta7;
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp6 = omc_List_all(threadData, _inExpLst2, boxvar_listEmpty);
          if (1 /* true */ != tmp6) goto goto_2;
          tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta1 = tmpMeta7;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta8 = MMC_CAR(tmp4_1);
          tmpMeta9 = MMC_CDR(tmp4_1);
          _fb = tmpMeta8;
          _fbs = tmpMeta9;
          /* Pattern matching succeeded */
          _size = omc_Expression_sizeOf(threadData, omc_Expression_typeof(threadData, _fb));

          _tbsRest = omc_List_map(threadData, _inExpLst2, boxvar_listRest);

          _rest_res = omc_BackendDAEOptimize_makeEquationsFromResiduals(threadData, _inExp1, _tbsRest, _fbs, _inSource, _inEqAttr);

          _tbsFirst = omc_List_map(threadData, _inExpLst2, boxvar_listHead);

          _ifexp = omc_Expression_makeNestedIf(threadData, _inExp1, _tbsFirst, _fb);

          if((_size == ((modelica_integer) 1)))
          {
            tmpMeta10 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _OMC_LIT139, _ifexp, _inSource, _inEqAttr);
            _eq = tmpMeta10;
          }
          else
          {
            _zeroExp = omc_Expression_createZeroExpression(threadData, omc_Expression_typeof(threadData, _fb));

            tmpMeta11 = mmc_mk_box6(9, &BackendDAE_Equation_COMPLEX__EQUATION__desc, mmc_mk_integer(_size), _zeroExp, _ifexp, _inSource, _inEqAttr);
            _eq = tmpMeta11;
          }
          tmpMeta12 = mmc_mk_cons(_eq, _rest_res);
          tmpMeta1 = tmpMeta12;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExpLst = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExpLst;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_makeEquationToResidualExp(threadData_t *threadData, modelica_metatype _eq)
{
  modelica_metatype _oExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oExp has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _eq;
    {
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _e = NULL;
      modelica_metatype _expl = NULL;
      modelica_metatype _expl1 = NULL;
      modelica_metatype _cr1 = NULL;
      modelica_string _str = NULL;
      modelica_metatype _ty = NULL;
      modelica_integer _idx;
      modelica_metatype _idxs = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e1 has no default value.
      // _e2 has no default value.
      // _e has no default value.
      // _expl has no default value.
      // _expl1 has no default value.
      // _cr1 has no default value.
      // _str has no default value.
      // _ty has no default value.
      // _idx has no default value.
      // _idxs has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 7; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_boolean tmp8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _e1 = tmpMeta6;
          _e2 = tmpMeta7;
          tmp4 += 5; /* Pattern matching succeeded; we may skip some cases if we fail */
          _ty = omc_Expression_typeof(threadData, _e1);

          /* Pattern-matching assignment */
          tmp8 = omc_Types_isIntegerOrRealOrSubTypeOfEither(threadData, _ty);
          if (1 /* true */ != tmp8) goto goto_2;
          tmpMeta1 = omc_Expression_expSub(threadData, _e1, _e2);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,6) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          
          _e1 = tmpMeta9;
          _e2 = tmpMeta10;
          tmp4 += 4; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta1 = omc_Expression_expSub(threadData, _e1, _e2);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,4) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _cr1 = tmpMeta11;
          _e2 = tmpMeta12;
          tmp4 += 3; /* Pattern matching succeeded; we may skip some cases if we fail */
          _e1 = omc_Expression_crefExp(threadData, _cr1);
          tmpMeta1 = omc_Expression_expSub(threadData, _e1, _e2);
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta13;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,3) == 0) goto tmp3_end;
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _oExp = tmpMeta13;
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta1 = _oExp;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_integer tmp29;
          modelica_metatype tmpMeta30;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,5) == 0) goto tmp3_end;
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,19,1) == 0) goto tmp3_end;
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          
          _expl = tmpMeta15;
          _e2 = tmpMeta16;
          /* Pattern matching succeeded */
          tmpMeta17 = MMC_REFSTRUCTLIT(mmc_nil);
          _expl1 = tmpMeta17;

          tmpMeta18 = MMC_REFSTRUCTLIT(mmc_nil);
          _idxs = tmpMeta18;

          _idx = ((modelica_integer) 1);

          {
            modelica_metatype _elem;
            for (tmpMeta19 = _expl; !listEmpty(tmpMeta19); tmpMeta19=MMC_CDR(tmpMeta19))
            {
              _elem = MMC_CAR(tmpMeta19);
              if(omc_Expression_isNotWild(threadData, _elem))
              {
                tmpMeta20 = mmc_mk_cons(mmc_mk_integer(_idx), _idxs);
                _idxs = tmpMeta20;

                tmpMeta21 = mmc_mk_cons(_elem, _expl1);
                _expl1 = tmpMeta21;
              }

              _idx = ((modelica_integer) 1) + _idx;
            }
          }

          /* Pattern-matching assignment */
          tmpMeta23 = _expl1;
          if (listEmpty(tmpMeta23)) goto goto_2;
          tmpMeta24 = MMC_CAR(tmpMeta23);
          tmpMeta25 = MMC_CDR(tmpMeta23);
          if (!listEmpty(tmpMeta25)) goto goto_2;
          _e = tmpMeta24;

          /* Pattern-matching assignment */
          tmpMeta26 = _idxs;
          if (listEmpty(tmpMeta26)) goto goto_2;
          tmpMeta27 = MMC_CAR(tmpMeta26);
          tmpMeta28 = MMC_CDR(tmpMeta26);
          tmp29 = mmc_unbox_integer(tmpMeta27);
          if (!listEmpty(tmpMeta28)) goto goto_2;
          _idx = tmp29  /* pattern as ty=Integer */;
          tmpMeta30 = mmc_mk_box4(25, &DAE_Exp_TSUB__desc, _e2, mmc_mk_integer(_idx), omc_Expression_typeof(threadData, _e));
          tmpMeta1 = omc_Expression_expSub(threadData, _e, tmpMeta30);
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,5) == 0) goto tmp3_end;
          tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          
          _e1 = tmpMeta31;
          _e2 = tmpMeta32;
          /* Pattern matching succeeded */
          tmpMeta1 = omc_Expression_expSub(threadData, _e1, _e2);
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          
          /* Pattern matching succeeded */
          tmpMeta33 = stringAppend(_OMC_LIT175,omc_BackendDump_equationString(threadData, _eq));
          tmpMeta34 = stringAppend(tmpMeta33,_OMC_LIT176);
          _str = tmpMeta34;

          tmpMeta35 = mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT58, tmpMeta35);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 7) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _oExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _oExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_makeResidualIfExpLst(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExpLst2, modelica_metatype _inExpLst3)
{
  modelica_metatype _outExpLst = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExpLst has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
    tmp4_1 = _inExp1;
    tmp4_2 = _inExpLst2;
    tmp4_3 = _inExpLst3;
    {
      modelica_metatype _tbs = NULL;
      modelica_metatype _tbsRest = NULL;
      modelica_metatype _tbsFirst = NULL;
      modelica_metatype _fbs = NULL;
      modelica_metatype _rest_res = NULL;
      modelica_metatype _conds = NULL;
      modelica_metatype _ifexp = NULL;
      modelica_metatype _fb = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _tbs has no default value.
      // _tbsRest has no default value.
      // _tbsFirst has no default value.
      // _fbs has no default value.
      // _rest_res has no default value.
      // _conds has no default value.
      // _ifexp has no default value.
      // _fb has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_boolean tmp6;
          modelica_metatype tmpMeta7;
          if (!listEmpty(tmp4_3)) goto tmp3_end;
          
          _tbs = tmp4_2;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp6 = omc_List_all(threadData, _tbs, boxvar_listEmpty);
          if (1 /* true */ != tmp6) goto goto_2;
          tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta1 = tmpMeta7;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          if (listEmpty(tmp4_3)) goto tmp3_end;
          tmpMeta8 = MMC_CAR(tmp4_3);
          tmpMeta9 = MMC_CDR(tmp4_3);
          
          _fb = tmpMeta8;
          _fbs = tmpMeta9;
          _conds = tmp4_1;
          _tbs = tmp4_2;
          /* Pattern matching succeeded */
          _tbsRest = omc_List_map(threadData, _tbs, boxvar_listRest);

          _rest_res = omc_BackendDAEOptimize_makeResidualIfExpLst(threadData, _conds, _tbsRest, _fbs);

          _tbsFirst = omc_List_map(threadData, _tbs, boxvar_listHead);

          _ifexp = omc_Expression_makeNestedIf(threadData, _conds, _tbsFirst, _fb);
          tmpMeta10 = mmc_mk_cons(_ifexp, _rest_res);
          tmpMeta1 = tmpMeta10;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExpLst = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExpLst;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_makeEquationToResidualExpLst(threadData_t *threadData, modelica_metatype _eq)
{
  modelica_metatype _oExpLst = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oExpLst has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _eq;
    {
      modelica_metatype _tbs = NULL;
      modelica_metatype _fbs = NULL;
      modelica_metatype _conds = NULL;
      modelica_metatype _fbsExp = NULL;
      modelica_metatype _tbsExp = NULL;
      modelica_metatype _elt = NULL;
      modelica_metatype _exp = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _tbs has no default value.
      // _fbs has no default value.
      // _conds has no default value.
      // _fbsExp has no default value.
      // _tbsExp has no default value.
      // _elt has no default value.
      // _exp has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,5) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          
          _conds = tmpMeta6;
          _tbs = tmpMeta7;
          _fbs = tmpMeta8;
          /* Pattern matching succeeded */
          _fbsExp = omc_BackendDAEOptimize_makeEquationLstToResidualExpLst(threadData, _fbs);

          _tbsExp = omc_List_map(threadData, _tbs, boxvar_BackendDAEOptimize_makeEquationLstToResidualExpLst);
          tmpMeta1 = omc_BackendDAEOptimize_makeResidualIfExpLst(threadData, _conds, _tbsExp, _fbsExp);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta9;
          
          _elt = tmp4_1;
          /* Pattern matching succeeded */
          _exp = omc_BackendDAEOptimize_makeEquationToResidualExp(threadData, _elt);
          tmpMeta9 = mmc_mk_cons(_exp, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _oExpLst = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _oExpLst;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_makeEquationLstToResidualExpLst(threadData_t *threadData, modelica_metatype _eqLst)
{
  modelica_metatype _oExpLst = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oExpLst has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _eqLst;
    {
      modelica_metatype _rest = NULL;
      modelica_metatype _exps1 = NULL;
      modelica_metatype _exps2 = NULL;
      modelica_metatype _eq = NULL;
      modelica_metatype _source = NULL;
      modelica_string _str = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _rest has no default value.
      // _exps1 has no default value.
      // _exps2 has no default value.
      // _eq has no default value.
      // _source has no default value.
      // _str has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta7 = MMC_CAR(tmp4_1);
          tmpMeta8 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,4,5) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
          
          _eq = tmpMeta7;
          _source = tmpMeta9;
          _rest = tmpMeta8;
          /* Pattern matching succeeded */
          _str = omc_BackendDump_equationString(threadData, _eq);

          _str = omc_Util_stringReplaceChar(threadData, _str, _OMC_LIT45, _OMC_LIT5);

          tmpMeta10 = mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addSourceMessage(threadData, _OMC_LIT181, tmpMeta10, omc_ElementSource_getElementSourceFileInfo(threadData, _source));
          tmpMeta1 = omc_BackendDAEOptimize_makeEquationLstToResidualExpLst(threadData, _rest);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta11 = MMC_CAR(tmp4_1);
          tmpMeta12 = MMC_CDR(tmp4_1);
          _eq = tmpMeta11;
          _rest = tmpMeta12;
          /* Pattern matching succeeded */
          _exps1 = omc_BackendDAEOptimize_makeEquationToResidualExpLst(threadData, _eq);

          _exps2 = omc_BackendDAEOptimize_makeEquationLstToResidualExpLst(threadData, _rest);
          tmpMeta1 = listAppend(_exps1, _exps2);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _oExpLst = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _oExpLst;
}

PROTECTED_FUNCTION_STATIC modelica_integer omc_BackendDAEOptimize_countEquationsInBranches(threadData_t *threadData, modelica_metatype _trueBranches, modelica_metatype _falseBranch, modelica_metatype _source)
{
  modelica_integer _nrOfEquations;
  modelica_integer tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _nrOfEquations has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _falseBranch;
    {
      modelica_metatype _b = NULL;
      modelica_metatype _strs = NULL;
      modelica_string _str = NULL;
      modelica_string _eqstr = NULL;
      modelica_metatype _nrOfEquationsBranches = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _b has no default value.
      // _strs has no default value.
      // _str has no default value.
      // _eqstr has no default value.
      // _nrOfEquationsBranches has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          
          /* Pattern matching succeeded */
          _nrOfEquations = omc_BackendEquation_equationLstSize(threadData, _falseBranch);

          _nrOfEquationsBranches = omc_List_map(threadData, _trueBranches, boxvar_BackendEquation_equationLstSize);

          _b = omc_List_map1(threadData, _nrOfEquationsBranches, boxvar_intEq, mmc_mk_integer(_nrOfEquations));

          /* Pattern-matching assignment */
          tmpMeta6 = omc_List_reduce(threadData, _b, boxvar_boolAnd);
          tmp7 = mmc_unbox_integer(tmpMeta6);
          if (1 /* true */ != tmp7) goto goto_2;
          tmp1 = _nrOfEquations;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta8;
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          tmp4 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
          omc_Error_addSourceMessage(threadData, _OMC_LIT184, tmpMeta8, omc_ElementSource_getElementSourceFileInfo(threadData, _source));
          goto goto_2;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta9 = MMC_CAR(tmp4_1);
          tmpMeta10 = MMC_CDR(tmp4_1);
          /* Pattern matching succeeded */
          _nrOfEquations = omc_BackendEquation_equationLstSize(threadData, _falseBranch);

          _nrOfEquationsBranches = omc_List_map(threadData, _trueBranches, boxvar_BackendEquation_equationLstSize);

          tmpMeta11 = mmc_mk_cons(_falseBranch, MMC_REFSTRUCTLIT(mmc_nil));
          _eqstr = stringDelimitList(omc_List_map(threadData, listAppend(_trueBranches, tmpMeta11), boxvar_BackendDump_dumpEqnsStr), _OMC_LIT45);

          _strs = omc_List_map(threadData, _nrOfEquationsBranches, boxvar_intString);

          _str = stringDelimitList(_strs, _OMC_LIT185);

          tmpMeta12 = stringAppend(_OMC_LIT186,_str);
          tmpMeta13 = stringAppend(tmpMeta12,_OMC_LIT185);
          tmpMeta14 = stringAppend(tmpMeta13,intString(_nrOfEquations));
          tmpMeta15 = stringAppend(tmpMeta14,_OMC_LIT187);
          _str = tmpMeta15;

          tmpMeta16 = mmc_mk_cons(_str, mmc_mk_cons(_eqstr, MMC_REFSTRUCTLIT(mmc_nil)));
          omc_Error_addSourceMessage(threadData, _OMC_LIT190, tmpMeta16, omc_ElementSource_getElementSourceFileInfo(threadData, _source));
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _nrOfEquations = tmp1;
  _return: OMC_LABEL_UNUSED
  return _nrOfEquations;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_countEquationsInBranches(threadData_t *threadData, modelica_metatype _trueBranches, modelica_metatype _falseBranch, modelica_metatype _source)
{
  modelica_integer _nrOfEquations;
  modelica_metatype out_nrOfEquations;
  _nrOfEquations = omc_BackendDAEOptimize_countEquationsInBranches(threadData, _trueBranches, _falseBranch, _source);
  out_nrOfEquations = mmc_mk_icon(_nrOfEquations);
  return out_nrOfEquations;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_makeIfExp(threadData_t *threadData, modelica_metatype _cond, modelica_metatype _else_)
{
  modelica_metatype _oExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oExp has no default value.
  tmpMeta1 = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, _cond, _OMC_LIT191, _else_);
  _oExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _oExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyIfEquationAsserts1(threadData_t *threadData, modelica_metatype _brancheqns, modelica_metatype _condition, modelica_metatype _conditions, modelica_metatype _brancheqns1, modelica_metatype _inEqns, modelica_metatype *out_outEqns)
{
  modelica_metatype _obrancheqns = NULL;
  modelica_metatype _outEqns = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _obrancheqns has no default value.
  // _outEqns has no default value.
  
  
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _brancheqns;
    tmp4_2 = _condition;
    {
      modelica_metatype _e = NULL;
      modelica_metatype _cond = NULL;
      modelica_metatype _msg = NULL;
      modelica_metatype _level = NULL;
      modelica_metatype _eqn = NULL;
      modelica_metatype _eqns = NULL;
      modelica_integer _size;
      modelica_metatype _source = NULL;
      modelica_metatype _source1 = NULL;
      modelica_metatype _crefExpand = NULL;
      modelica_metatype _eqAttr = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e has no default value.
      // _cond has no default value.
      // _msg has no default value.
      // _level has no default value.
      // _eqn has no default value.
      // _eqns has no default value.
      // _size has no default value.
      // _source has no default value.
      // _source1 has no default value.
      // _crefExpand has no default value.
      // _eqAttr has no default value.
      tmp4 = 0;
      for (; tmp4 < 6; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = listReverse(_brancheqns1);
          tmpMeta[0+1] = _inEqns;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_integer tmp9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          if (!optionNone(tmp4_2)) goto tmp3_end;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,4,5) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          tmp9 = mmc_unbox_integer(tmpMeta8);
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
          if (listEmpty(tmpMeta11)) goto tmp3_end;
          tmpMeta12 = MMC_CAR(tmpMeta11);
          tmpMeta13 = MMC_CDR(tmpMeta11);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,8,4) == 0) goto tmp3_end;
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 3));
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 4));
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 5));
          if (!listEmpty(tmpMeta13)) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 5));
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 6));
          _size = tmp9  /* pattern as ty=Integer */;
          _cond = tmpMeta14;
          _msg = tmpMeta15;
          _level = tmpMeta16;
          _source1 = tmpMeta17;
          _source = tmpMeta18;
          _crefExpand = tmpMeta19;
          _eqAttr = tmpMeta20;
          _eqns = tmpMeta7;
          /* Pattern matching succeeded */
          _e = omc_List_fold(threadData, _conditions, boxvar_BackendDAEOptimize_makeIfExp, _cond);
          tmpMeta23 = mmc_mk_box5(11, &DAE_Statement_STMT__ASSERT__desc, _e, _msg, _level, _source1);
          tmpMeta22 = mmc_mk_cons(tmpMeta23, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta24 = mmc_mk_box2(3, &DAE_Algorithm_ALGORITHM__STMTS__desc, tmpMeta22);
          tmpMeta25 = mmc_mk_box6(7, &BackendDAE_Equation_ALGORITHM__desc, mmc_mk_integer(_size), tmpMeta24, _source, _crefExpand, _eqAttr);
          tmpMeta21 = mmc_mk_cons(tmpMeta25, _inEqns);
          /* Tail recursive call */
          _brancheqns = _eqns;
          _inEqns = tmpMeta21;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_integer tmp30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          modelica_metatype tmpMeta44;
          modelica_metatype tmpMeta45;
          modelica_metatype tmpMeta46;
          modelica_metatype tmpMeta47;
          if (optionNone(tmp4_2)) goto tmp3_end;
          tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta27 = MMC_CAR(tmp4_1);
          tmpMeta28 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta27,4,5) == 0) goto tmp3_end;
          tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 2));
          tmp30 = mmc_unbox_integer(tmpMeta29);
          tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 3));
          tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
          if (listEmpty(tmpMeta32)) goto tmp3_end;
          tmpMeta33 = MMC_CAR(tmpMeta32);
          tmpMeta34 = MMC_CDR(tmpMeta32);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta33,8,4) == 0) goto tmp3_end;
          tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta33), 2));
          tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta33), 3));
          tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta33), 4));
          tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta33), 5));
          if (!listEmpty(tmpMeta34)) goto tmp3_end;
          tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 4));
          tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 5));
          tmpMeta41 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 6));
          _e = tmpMeta26;
          _size = tmp30  /* pattern as ty=Integer */;
          _cond = tmpMeta35;
          _msg = tmpMeta36;
          _level = tmpMeta37;
          _source1 = tmpMeta38;
          _source = tmpMeta39;
          _crefExpand = tmpMeta40;
          _eqAttr = tmpMeta41;
          _eqns = tmpMeta28;
          /* Pattern matching succeeded */
          tmpMeta42 = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, _e, _cond, _OMC_LIT191);
          _e = tmpMeta42;

          _e = omc_List_fold(threadData, _conditions, boxvar_BackendDAEOptimize_makeIfExp, _e);
          tmpMeta45 = mmc_mk_box5(11, &DAE_Statement_STMT__ASSERT__desc, _e, _msg, _level, _source1);
          tmpMeta44 = mmc_mk_cons(tmpMeta45, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta46 = mmc_mk_box2(3, &DAE_Algorithm_ALGORITHM__STMTS__desc, tmpMeta44);
          tmpMeta47 = mmc_mk_box6(7, &BackendDAE_Equation_ALGORITHM__desc, mmc_mk_integer(_size), tmpMeta46, _source, _crefExpand, _eqAttr);
          tmpMeta43 = mmc_mk_cons(tmpMeta47, _inEqns);
          /* Tail recursive call */
          _brancheqns = _eqns;
          _inEqns = tmpMeta43;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta49;
          modelica_metatype tmpMeta50;
          modelica_integer tmp51;
          modelica_metatype tmpMeta52;
          modelica_metatype tmpMeta53;
          modelica_metatype tmpMeta54;
          modelica_metatype tmpMeta55;
          modelica_metatype tmpMeta56;
          modelica_metatype tmpMeta57;
          modelica_metatype tmpMeta58;
          modelica_metatype tmpMeta59;
          modelica_metatype tmpMeta60;
          modelica_metatype tmpMeta61;
          modelica_metatype tmpMeta62;
          modelica_metatype tmpMeta63;
          modelica_metatype tmpMeta64;
          modelica_metatype tmpMeta65;
          modelica_metatype tmpMeta66;
          modelica_metatype tmpMeta67;
          if (!optionNone(tmp4_2)) goto tmp3_end;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta48 = MMC_CAR(tmp4_1);
          tmpMeta49 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta48,4,5) == 0) goto tmp3_end;
          tmpMeta50 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta48), 2));
          tmp51 = mmc_unbox_integer(tmpMeta50);
          tmpMeta52 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta48), 3));
          tmpMeta53 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 2));
          if (listEmpty(tmpMeta53)) goto tmp3_end;
          tmpMeta54 = MMC_CAR(tmpMeta53);
          tmpMeta55 = MMC_CDR(tmpMeta53);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta54,9,2) == 0) goto tmp3_end;
          tmpMeta56 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta54), 2));
          tmpMeta57 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta54), 3));
          if (!listEmpty(tmpMeta55)) goto tmp3_end;
          tmpMeta58 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta48), 4));
          tmpMeta59 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta48), 5));
          tmpMeta60 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta48), 6));
          _size = tmp51  /* pattern as ty=Integer */;
          _msg = tmpMeta56;
          _source1 = tmpMeta57;
          _source = tmpMeta58;
          _crefExpand = tmpMeta59;
          _eqAttr = tmpMeta60;
          _eqns = tmpMeta49;
          /* Pattern matching succeeded */
          _e = omc_List_fold(threadData, _conditions, boxvar_BackendDAEOptimize_makeIfExp, _OMC_LIT191);
          tmpMeta64 = mmc_mk_box3(12, &DAE_Statement_STMT__TERMINATE__desc, _msg, _source1);
          tmpMeta63 = mmc_mk_cons(tmpMeta64, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta65 = mmc_mk_box5(6, &DAE_Statement_STMT__IF__desc, _e, tmpMeta63, _OMC_LIT192, _source1);
          tmpMeta62 = mmc_mk_cons(tmpMeta65, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta66 = mmc_mk_box2(3, &DAE_Algorithm_ALGORITHM__STMTS__desc, tmpMeta62);
          tmpMeta67 = mmc_mk_box6(7, &BackendDAE_Equation_ALGORITHM__desc, mmc_mk_integer(_size), tmpMeta66, _source, _crefExpand, _eqAttr);
          tmpMeta61 = mmc_mk_cons(tmpMeta67, _inEqns);
          /* Tail recursive call */
          _brancheqns = _eqns;
          _inEqns = tmpMeta61;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta68;
          modelica_metatype tmpMeta69;
          modelica_metatype tmpMeta70;
          modelica_metatype tmpMeta71;
          modelica_integer tmp72;
          modelica_metatype tmpMeta73;
          modelica_metatype tmpMeta74;
          modelica_metatype tmpMeta75;
          modelica_metatype tmpMeta76;
          modelica_metatype tmpMeta77;
          modelica_metatype tmpMeta78;
          modelica_metatype tmpMeta79;
          modelica_metatype tmpMeta80;
          modelica_metatype tmpMeta81;
          modelica_metatype tmpMeta82;
          modelica_metatype tmpMeta83;
          modelica_metatype tmpMeta84;
          modelica_metatype tmpMeta85;
          modelica_metatype tmpMeta86;
          modelica_metatype tmpMeta87;
          modelica_metatype tmpMeta88;
          if (optionNone(tmp4_2)) goto tmp3_end;
          tmpMeta68 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta69 = MMC_CAR(tmp4_1);
          tmpMeta70 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta69,4,5) == 0) goto tmp3_end;
          tmpMeta71 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta69), 2));
          tmp72 = mmc_unbox_integer(tmpMeta71);
          tmpMeta73 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta69), 3));
          tmpMeta74 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta73), 2));
          if (listEmpty(tmpMeta74)) goto tmp3_end;
          tmpMeta75 = MMC_CAR(tmpMeta74);
          tmpMeta76 = MMC_CDR(tmpMeta74);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta75,9,2) == 0) goto tmp3_end;
          tmpMeta77 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta75), 2));
          tmpMeta78 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta75), 3));
          if (!listEmpty(tmpMeta76)) goto tmp3_end;
          tmpMeta79 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta69), 4));
          tmpMeta80 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta69), 5));
          tmpMeta81 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta69), 6));
          _e = tmpMeta68;
          _size = tmp72  /* pattern as ty=Integer */;
          _msg = tmpMeta77;
          _source1 = tmpMeta78;
          _source = tmpMeta79;
          _crefExpand = tmpMeta80;
          _eqAttr = tmpMeta81;
          _eqns = tmpMeta70;
          /* Pattern matching succeeded */
          _e = omc_List_fold(threadData, _conditions, boxvar_BackendDAEOptimize_makeIfExp, _e);
          tmpMeta85 = mmc_mk_box3(12, &DAE_Statement_STMT__TERMINATE__desc, _msg, _source1);
          tmpMeta84 = mmc_mk_cons(tmpMeta85, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta86 = mmc_mk_box5(6, &DAE_Statement_STMT__IF__desc, _e, tmpMeta84, _OMC_LIT192, _source1);
          tmpMeta83 = mmc_mk_cons(tmpMeta86, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta87 = mmc_mk_box2(3, &DAE_Algorithm_ALGORITHM__STMTS__desc, tmpMeta83);
          tmpMeta88 = mmc_mk_box6(7, &BackendDAE_Equation_ALGORITHM__desc, mmc_mk_integer(_size), tmpMeta87, _source, _crefExpand, _eqAttr);
          tmpMeta82 = mmc_mk_cons(tmpMeta88, _inEqns);
          /* Tail recursive call */
          _brancheqns = _eqns;
          _inEqns = tmpMeta82;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta89;
          modelica_metatype tmpMeta90;
          modelica_metatype tmpMeta91;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta89 = MMC_CAR(tmp4_1);
          tmpMeta90 = MMC_CDR(tmp4_1);
          
          _eqn = tmpMeta89;
          _eqns = tmpMeta90;
          /* Pattern matching succeeded */
          tmpMeta91 = mmc_mk_cons(_eqn, _brancheqns1);
          /* Tail recursive call */
          _brancheqns = _eqns;
          _brancheqns1 = tmpMeta91;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _obrancheqns = tmpMeta[0+0];
  _outEqns = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outEqns) { *out_outEqns = _outEqns; }
  return _obrancheqns;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyIfEquationAsserts(threadData_t *threadData, modelica_metatype _conditions, modelica_metatype _theneqns, modelica_metatype _elseenqs, modelica_metatype _conditions1, modelica_metatype _theneqns1, modelica_metatype _inEqns, modelica_metatype *out_oelseenqs, modelica_metatype *out_outEqns)
{
  modelica_metatype _otheneqns = NULL;
  modelica_metatype _oelseenqs = NULL;
  modelica_metatype _outEqns = NULL;
  modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _otheneqns has no default value.
  // _oelseenqs has no default value.
  // _outEqns has no default value.
  
  
  
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _conditions;
    tmp4_2 = _theneqns;
    {
      modelica_metatype _e = NULL;
      modelica_metatype _explst = NULL;
      modelica_metatype _eqns = NULL;
      modelica_metatype _beqns = NULL;
      modelica_metatype _eqnslst = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e has no default value.
      // _explst has no default value.
      // _eqns has no default value.
      // _beqns has no default value.
      // _eqnslst has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (!listEmpty(tmp4_2)) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
          _beqns = omc_BackendDAEOptimize_simplifyIfEquationAsserts1(threadData, _elseenqs, mmc_mk_none(), _conditions1, tmpMeta6, _inEqns ,&_eqns);
          tmpMeta[0+0] = listReverse(_theneqns1);
          tmpMeta[0+1] = _beqns;
          tmpMeta[0+2] = _eqns;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta7 = MMC_CAR(tmp4_1);
          tmpMeta8 = MMC_CDR(tmp4_1);
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta9 = MMC_CAR(tmp4_2);
          tmpMeta10 = MMC_CDR(tmp4_2);
          _e = tmpMeta7;
          _explst = tmpMeta8;
          _eqns = tmpMeta9;
          _eqnslst = tmpMeta10;
          /* Pattern matching succeeded */
          tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
          _beqns = omc_BackendDAEOptimize_simplifyIfEquationAsserts1(threadData, _eqns, mmc_mk_some(_e), _conditions1, tmpMeta11, _inEqns ,&_eqns);
          tmpMeta12 = mmc_mk_cons(_e, _conditions1);
          tmpMeta13 = mmc_mk_cons(_beqns, _theneqns1);
          /* Tail recursive call */
          _conditions = _explst;
          _theneqns = _eqnslst;
          _conditions1 = tmpMeta12;
          _theneqns1 = tmpMeta13;
          _inEqns = _eqns;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _otheneqns = tmpMeta[0+0];
  _oelseenqs = tmpMeta[0+1];
  _outEqns = tmpMeta[0+2];
  _return: OMC_LABEL_UNUSED
  if (out_oelseenqs) { *out_oelseenqs = _oelseenqs; }
  if (out_outEqns) { *out_outEqns = _outEqns; }
  return _otheneqns;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifySolvedIfEqnsElse(threadData_t *threadData, modelica_metatype _elseenqs, modelica_metatype _iHt)
{
  modelica_metatype _oHt = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oHt has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _elseenqs;
    {
      modelica_metatype _cr = NULL;
      modelica_metatype _e = NULL;
      modelica_metatype _ht = NULL;
      modelica_metatype _rest = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _cr has no default value.
      // _e has no default value.
      // _ht has no default value.
      // _rest has no default value.
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta1 = _iHt;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_boolean tmp11;
          modelica_metatype tmpMeta12;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,4) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,6,2) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
          
          _cr = tmpMeta9;
          _e = tmpMeta10;
          _rest = tmpMeta7;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(!omc_BaseHashTable_hasKey(threadData, _cr, _iHt))) goto tmp3_end;
          /* Pattern-matching assignment */
          tmp11 = omc_Expression_expHasCref(threadData, _e, _cr);
          if (0 /* false */ != tmp11) goto goto_2;

          tmpMeta12 = mmc_mk_box2(0, _cr, _e);
          _ht = omc_BaseHashTable_add(threadData, tmpMeta12, _iHt);
          /* Tail recursive call */
          _elseenqs = _rest;
          _iHt = _ht;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_boolean tmp20;
          modelica_metatype tmpMeta21;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta13 = MMC_CAR(tmp4_1);
          tmpMeta14 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,0,4) == 0) goto tmp3_end;
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,8,2) == 0) goto tmp3_end;
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,5,1) == 0) goto tmp3_end;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,6,2) == 0) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 2));
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 3));
          
          _cr = tmpMeta18;
          _e = tmpMeta19;
          _rest = tmpMeta14;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(!omc_BaseHashTable_hasKey(threadData, _cr, _iHt))) goto tmp3_end;
          /* Pattern-matching assignment */
          tmp20 = omc_Expression_expHasCref(threadData, _e, _cr);
          if (0 /* false */ != tmp20) goto goto_2;

          _e = omc_Expression_negate(threadData, _e);

          tmpMeta21 = mmc_mk_box2(0, _cr, _e);
          _ht = omc_BaseHashTable_add(threadData, tmpMeta21, _iHt);
          /* Tail recursive call */
          _elseenqs = _rest;
          _iHt = _ht;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _oHt = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _oHt;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifySolvedIfEqns1(threadData_t *threadData, modelica_metatype _condition, modelica_metatype _brancheqns, modelica_metatype _iHt, modelica_metatype _iHs)
{
  modelica_metatype _oHt = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oHt has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _brancheqns;
    {
      modelica_metatype _cr = NULL;
      modelica_metatype _e = NULL;
      modelica_metatype _exp = NULL;
      modelica_metatype _ht = NULL;
      modelica_metatype _hs = NULL;
      modelica_metatype _rest = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _cr has no default value.
      // _e has no default value.
      // _exp has no default value.
      // _ht has no default value.
      // _hs has no default value.
      // _rest has no default value.
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta1 = _iHt;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_boolean tmp11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,4) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,6,2) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
          
          _cr = tmpMeta9;
          _e = tmpMeta10;
          _rest = tmpMeta7;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp11 = omc_Expression_expHasCref(threadData, _e, _cr);
          if (0 /* false */ != tmp11) goto goto_2;

          _hs = omc_BaseHashSet_addUnique(threadData, _cr, _iHs);

          _exp = omc_BaseHashTable_get(threadData, _cr, _iHt);

          tmpMeta12 = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, _condition, _e, _exp);
          _exp = tmpMeta12;

          tmpMeta13 = mmc_mk_box2(0, _cr, _exp);
          _ht = omc_BaseHashTable_add(threadData, tmpMeta13, _iHt);
          /* Tail recursive call */
          _brancheqns = _rest;
          _iHt = _ht;
          _iHs = _hs;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_boolean tmp21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta14 = MMC_CAR(tmp4_1);
          tmpMeta15 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,4) == 0) goto tmp3_end;
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,8,2) == 0) goto tmp3_end;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,5,1) == 0) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta18,6,2) == 0) goto tmp3_end;
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
          
          _cr = tmpMeta19;
          _e = tmpMeta20;
          _rest = tmpMeta15;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp21 = omc_Expression_expHasCref(threadData, _e, _cr);
          if (0 /* false */ != tmp21) goto goto_2;

          _hs = omc_BaseHashSet_addUnique(threadData, _cr, _iHs);

          _exp = omc_BaseHashTable_get(threadData, _cr, _iHt);

          _e = omc_Expression_negate(threadData, _e);

          tmpMeta22 = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, _condition, _e, _exp);
          _exp = tmpMeta22;

          tmpMeta23 = mmc_mk_box2(0, _cr, _exp);
          _ht = omc_BaseHashTable_add(threadData, tmpMeta23, _iHt);
          /* Tail recursive call */
          _brancheqns = _rest;
          _iHt = _ht;
          _iHs = _hs;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _oHt = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _oHt;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifySolvedIfEqns(threadData_t *threadData, modelica_metatype _conditions, modelica_metatype _theneqns, modelica_metatype _iHt)
{
  modelica_metatype _oHt = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oHt has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _conditions;
    tmp4_2 = _theneqns;
    {
      modelica_metatype _ht = NULL;
      modelica_metatype _c = NULL;
      modelica_metatype _explst = NULL;
      modelica_metatype _eqns = NULL;
      modelica_metatype _rest = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _ht has no default value.
      // _c has no default value.
      // _explst has no default value.
      // _eqns has no default value.
      // _rest has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          if (!listEmpty(tmp4_2)) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta1 = _iHt;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta8 = MMC_CAR(tmp4_2);
          tmpMeta9 = MMC_CDR(tmp4_2);
          _c = tmpMeta6;
          _explst = tmpMeta7;
          _eqns = tmpMeta8;
          _rest = tmpMeta9;
          /* Pattern matching succeeded */
          _ht = omc_BackendDAEOptimize_simplifySolvedIfEqns1(threadData, _c, _eqns, _iHt, omc_HashSet_emptyHashSet(threadData));
          /* Tail recursive call */
          _conditions = _explst;
          _theneqns = _rest;
          _iHt = _ht;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _oHt = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _oHt;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifySolvedIfEqns2(threadData_t *threadData, modelica_metatype _crexplst, modelica_metatype _inEqns, modelica_metatype _inEqAttr)
{
  modelica_metatype _outEqns = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEqns has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _crexplst;
    {
      modelica_metatype _cr = NULL;
      modelica_metatype _e = NULL;
      modelica_metatype _crexp = NULL;
      modelica_metatype _rest = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _cr has no default value.
      // _e has no default value.
      // _crexp has no default value.
      // _rest has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta1 = _inEqns;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          _cr = tmpMeta8;
          _e = tmpMeta9;
          _rest = tmpMeta7;
          /* Pattern matching succeeded */
          _crexp = omc_Expression_crefExp(threadData, _cr);
          tmpMeta11 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _crexp, _e, _OMC_LIT9, _inEqAttr);
          tmpMeta10 = mmc_mk_cons(tmpMeta11, _inEqns);
          /* Tail recursive call */
          _crexplst = _rest;
          _inEqns = tmpMeta10;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outEqns = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outEqns;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyIfEquation1(threadData_t *threadData, modelica_metatype _conditions, modelica_metatype _theneqns, modelica_metatype _elseenqs, modelica_metatype _source, modelica_metatype _globalKnownVars, modelica_metatype _inEqns, modelica_metatype _inEqAttr)
{
  modelica_metatype _outEqns = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEqns has no default value.
  { /* matchcontinue expression */
    {
      modelica_metatype _fbsExp = NULL;
      modelica_metatype _tbsExp = NULL;
      modelica_metatype _eqns = NULL;
      modelica_metatype _ht = NULL;
      modelica_metatype _crexplst = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _fbsExp has no default value.
      // _tbsExp has no default value.
      // _eqns has no default value.
      // _ht has no default value.
      // _crexplst has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          /* Pattern matching succeeded */
          omc_BackendDAEOptimize_countEquationsInBranches(threadData, _theneqns, _elseenqs, _source);

          _ht = omc_HashTable2_emptyHashTable(threadData);

          _ht = omc_BackendDAEOptimize_simplifySolvedIfEqnsElse(threadData, _elseenqs, _ht);

          _ht = omc_BackendDAEOptimize_simplifySolvedIfEqns(threadData, listReverse(_conditions), listReverse(_theneqns), _ht);

          _crexplst = omc_BaseHashTable_hashTableList(threadData, _ht);
          tmpMeta1 = omc_BackendDAEOptimize_simplifySolvedIfEqns2(threadData, _crexplst, _inEqns, _inEqAttr);
          goto tmp3_done;
        }
        case 1: {
          /* Pattern matching succeeded */
          omc_BackendDAEOptimize_countEquationsInBranches(threadData, _theneqns, _elseenqs, _source);

          _fbsExp = omc_BackendDAEOptimize_makeEquationLstToResidualExpLst(threadData, _elseenqs);

          _tbsExp = omc_List_map(threadData, _theneqns, boxvar_BackendDAEOptimize_makeEquationLstToResidualExpLst);

          _eqns = omc_BackendDAEOptimize_makeEquationsFromResiduals(threadData, _conditions, _tbsExp, _fbsExp, _source, _inEqAttr);
          tmpMeta1 = listAppend(_eqns, _inEqns);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          /* Pattern matching succeeded */
          tmpMeta7 = mmc_mk_box6(10, &BackendDAE_Equation_IF__EQUATION__desc, _conditions, _theneqns, _elseenqs, _source, _inEqAttr);
          tmpMeta6 = mmc_mk_cons(tmpMeta7, _inEqns);
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outEqns = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outEqns;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyIfEquation(threadData_t *threadData, modelica_metatype _conditions, modelica_metatype _theneqns, modelica_metatype _elseenqs, modelica_metatype _conditions1, modelica_metatype _theneqns1, modelica_metatype _source, modelica_metatype _globalKnownVars, modelica_metatype _inEqns, modelica_metatype _inEqAttr, modelica_metatype *out_outAsserts)
{
  modelica_metatype _outEqns = NULL;
  modelica_metatype _outAsserts = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEqns has no default value.
  // _outAsserts has no default value.
  
  
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;modelica_metatype tmp4_4;
    tmp4_1 = _conditions;
    tmp4_2 = _theneqns;
    tmp4_3 = _conditions1;
    tmp4_4 = _theneqns1;
    {
      modelica_metatype _e = NULL;
      modelica_metatype _explst = NULL;
      modelica_metatype _eqnslst = NULL;
      modelica_metatype _eqns = NULL;
      modelica_metatype _elseenqs1 = NULL;
      modelica_metatype _asserts = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e has no default value.
      // _explst has no default value.
      // _eqnslst has no default value.
      // _eqns has no default value.
      // _elseenqs1 has no default value.
      // _asserts has no default value.
      tmp4 = 0;
      for (; tmp4 < 6; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          if (!listEmpty(tmp4_2)) goto tmp3_end;
          if (!listEmpty(tmp4_3)) goto tmp3_end;
          if (!listEmpty(tmp4_4)) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
          _eqns = omc_List_fold31(threadData, listReverse(_elseenqs), boxvar_BackendDAEOptimize_simplifyIfEquationsFinder, _globalKnownVars, tmpMeta6, tmpMeta7, mmc_mk_boolean(0 /* false */) ,&_asserts ,NULL);
          tmpMeta[0+0] = listAppend(_eqns, _inEqns);
          tmpMeta[0+1] = _asserts;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          if (!listEmpty(tmp4_2)) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _explst = listReverse(_conditions1);

          _eqnslst = listReverse(_theneqns1);

          tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
          _elseenqs1 = omc_List_fold31(threadData, listReverse(_elseenqs), boxvar_BackendDAEOptimize_simplifyIfEquationsFinder, _globalKnownVars, tmpMeta8, tmpMeta9, mmc_mk_boolean(0 /* false */) ,&_asserts ,NULL);

          _elseenqs1 = listAppend(_elseenqs1, _asserts);

          tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
          _eqnslst = omc_BackendDAEOptimize_simplifyIfEquationAsserts(threadData, _explst, _eqnslst, _elseenqs1, tmpMeta10, tmpMeta11, tmpMeta12 ,&_elseenqs1 ,&_asserts);

          _eqns = omc_BackendDAEOptimize_simplifyIfEquation1(threadData, _explst, _eqnslst, _elseenqs1, _source, _globalKnownVars, _inEqns, _inEqAttr);
          tmpMeta[0+0] = _eqns;
          tmpMeta[0+1] = _asserts;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_integer tmp18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta13 = MMC_CAR(tmp4_2);
          tmpMeta14 = MMC_CDR(tmp4_2);
          if (!listEmpty(tmp4_3)) goto tmp3_end;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta15 = MMC_CAR(tmp4_1);
          tmpMeta16 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,3,1) == 0) goto tmp3_end;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
          tmp18 = mmc_unbox_integer(tmpMeta17);
          if (1 /* true */ != tmp18) goto tmp3_end;
          
          _eqns = tmpMeta13;
          /* Pattern matching succeeded */
          tmpMeta19 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta20 = MMC_REFSTRUCTLIT(mmc_nil);
          _eqns = omc_List_fold31(threadData, listReverse(_eqns), boxvar_BackendDAEOptimize_simplifyIfEquationsFinder, _globalKnownVars, tmpMeta19, tmpMeta20, mmc_mk_boolean(0 /* false */) ,&_asserts ,NULL);
          tmpMeta[0+0] = listAppend(_eqns, _inEqns);
          tmpMeta[0+1] = _asserts;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_integer tmp26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta21 = MMC_CAR(tmp4_2);
          tmpMeta22 = MMC_CDR(tmp4_2);
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta23 = MMC_CAR(tmp4_1);
          tmpMeta24 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta23,3,1) == 0) goto tmp3_end;
          tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 2));
          tmp26 = mmc_unbox_integer(tmpMeta25);
          if (1 /* true */ != tmp26) goto tmp3_end;
          
          _eqns = tmpMeta21;
          /* Pattern matching succeeded */
          _explst = listReverse(_conditions1);

          _eqnslst = listReverse(_theneqns1);

          tmpMeta27 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta28 = MMC_REFSTRUCTLIT(mmc_nil);
          _elseenqs1 = omc_List_fold31(threadData, listReverse(_eqns), boxvar_BackendDAEOptimize_simplifyIfEquationsFinder, _globalKnownVars, tmpMeta27, tmpMeta28, mmc_mk_boolean(0 /* false */) ,&_asserts ,NULL);

          _elseenqs1 = listAppend(_elseenqs1, _asserts);

          tmpMeta29 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta30 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta31 = MMC_REFSTRUCTLIT(mmc_nil);
          _eqnslst = omc_BackendDAEOptimize_simplifyIfEquationAsserts(threadData, _explst, _eqnslst, _elseenqs1, tmpMeta29, tmpMeta30, tmpMeta31 ,&_elseenqs1 ,&_asserts);

          _eqns = omc_BackendDAEOptimize_simplifyIfEquation1(threadData, _explst, _eqnslst, _elseenqs1, _source, _globalKnownVars, _inEqns, _inEqAttr);
          tmpMeta[0+0] = _eqns;
          tmpMeta[0+1] = _asserts;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          modelica_integer tmp37;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta32 = MMC_CAR(tmp4_2);
          tmpMeta33 = MMC_CDR(tmp4_2);
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta34 = MMC_CAR(tmp4_1);
          tmpMeta35 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta34,3,1) == 0) goto tmp3_end;
          tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta34), 2));
          tmp37 = mmc_unbox_integer(tmpMeta36);
          if (0 /* false */ != tmp37) goto tmp3_end;
          
          _eqnslst = tmpMeta33;
          _explst = tmpMeta35;
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _conditions = _explst;
          _theneqns = _eqnslst;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          modelica_metatype tmpMeta44;
          modelica_metatype tmpMeta45;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta38 = MMC_CAR(tmp4_1);
          tmpMeta39 = MMC_CDR(tmp4_1);
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta40 = MMC_CAR(tmp4_2);
          tmpMeta41 = MMC_CDR(tmp4_2);
          
          _e = tmpMeta38;
          _explst = tmpMeta39;
          _eqns = tmpMeta40;
          _eqnslst = tmpMeta41;
          /* Pattern matching succeeded */
          tmpMeta42 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta43 = MMC_REFSTRUCTLIT(mmc_nil);
          _eqns = omc_List_fold31(threadData, listReverse(_eqns), boxvar_BackendDAEOptimize_simplifyIfEquationsFinder, _globalKnownVars, tmpMeta42, tmpMeta43, mmc_mk_boolean(0 /* false */) ,&_asserts ,NULL);

          _eqns = listAppend(_eqns, _asserts);
          tmpMeta44 = mmc_mk_cons(_e, _conditions1);
          tmpMeta45 = mmc_mk_cons(_eqns, _theneqns1);
          /* Tail recursive call */
          _conditions = _explst;
          _theneqns = _eqnslst;
          _conditions1 = tmpMeta44;
          _theneqns1 = tmpMeta45;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outEqns = tmpMeta[0+0];
  _outAsserts = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outAsserts) { *out_outAsserts = _outAsserts; }
  return _outEqns;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyEvaluatedParamter(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _tpl1, modelica_metatype *out_tpl2)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _tpl2 = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _tpl2 has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inExp;
    tmp4_2 = _tpl1;
    {
      modelica_metatype _globalKnownVars = NULL;
      modelica_metatype _cr = NULL;
      modelica_metatype _v = NULL;
      modelica_metatype _e = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _globalKnownVars has no default value.
      // _cr has no default value.
      // _v has no default value.
      // _e has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_boolean tmp8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          
          _cr = tmpMeta6;
          _globalKnownVars = tmpMeta7;
          /* Pattern matching succeeded */
          _v = omc_BackendVariable_getVarSingle(threadData, _cr, _globalKnownVars, NULL);

          /* Pattern-matching assignment */
          tmp8 = ((omc_BackendVariable_hasVarEvaluateAnnotationTrue(threadData, _v) || (omc_Flags_getConfigBool(threadData, _OMC_LIT197) && omc_BackendVariable_isFinalVar(threadData, _v))) || (omc_Flags_getConfigBool(threadData, _OMC_LIT201) && omc_BackendVariable_isProtectedVar(threadData, _v)));
          if (1 /* true */ != tmp8) goto goto_2;

          _e = omc_BackendVariable_varBindExpStartValue(threadData, _v);
          tmpMeta9 = mmc_mk_box2(0, _globalKnownVars, mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = tmpMeta9;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _tpl1;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outExp = tmpMeta[0+0];
  _tpl2 = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_tpl2) { *out_tpl2 = _tpl2; }
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyIfExpevaluatedParamter(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _tpl1, modelica_metatype *out_tpl2)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _tpl2 = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _tpl2 has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inExp;
    tmp4_2 = _tpl1;
    {
      modelica_metatype _globalKnownVars = NULL;
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _cond = NULL;
      modelica_metatype _expThen = NULL;
      modelica_metatype _expElse = NULL;
      modelica_boolean _b;
      modelica_boolean _b1;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _globalKnownVars has no default value.
      // _e1 has no default value.
      // _e2 has no default value.
      // _cond has no default value.
      // _expThen has no default value.
      // _expElse has no default value.
      // _b has no default value.
      // _b1 has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_integer tmp11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_integer tmp14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_boolean tmp18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp11 = mmc_unbox_integer(tmpMeta10);
          _e1 = tmp4_1;
          _cond = tmpMeta6;
          _expThen = tmpMeta7;
          _expElse = tmpMeta8;
          _globalKnownVars = tmpMeta9;
          _b = tmp11  /* pattern as ty=Boolean */;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta15 = mmc_mk_box2(0, _globalKnownVars, mmc_mk_boolean(0 /* false */));
          tmpMeta16 = omc_Expression_traverseExpBottomUp(threadData, _cond, boxvar_BackendDAEOptimize_simplifyEvaluatedParamter, tmpMeta15, &tmpMeta12);
          _cond = tmpMeta16;
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
          tmp14 = mmc_unbox_integer(tmpMeta13);
          _b1 = tmp14  /* pattern as ty=Boolean */;

          tmp18 = (modelica_boolean)_b1;
          if(tmp18)
          {
            tmpMeta17 = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, _cond, _expThen, _expElse);
            tmpMeta19 = tmpMeta17;
          }
          else
          {
            tmpMeta19 = _e1;
          }
          _e2 = tmpMeta19;

          _e2 = omc_ExpressionSimplify_condsimplify(threadData, _b1, _e2, NULL);
          tmpMeta20 = mmc_mk_box2(0, _globalKnownVars, mmc_mk_boolean((_b || _b1)));
          tmpMeta[0+0] = _e2;
          tmpMeta[0+1] = tmpMeta20;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _tpl1;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outExp = tmpMeta[0+0];
  _tpl2 = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_tpl2) { *out_tpl2 = _tpl2; }
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyIfEquationsFinder(threadData_t *threadData, modelica_metatype _inElem, modelica_metatype _inConstArg, modelica_metatype __omcQ_24in_5Facc, modelica_metatype __omcQ_24in_5Fasserts, modelica_boolean __omcQ_24in_5Fb, modelica_metatype *out_asserts, modelica_boolean *out_b)
{
  modelica_metatype _acc = NULL;
  modelica_metatype _asserts = NULL;
  modelica_boolean _b;
  modelica_boolean tmp1_c2 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _acc = __omcQ_24in_5Facc;
  _asserts = __omcQ_24in_5Fasserts;
  _b = __omcQ_24in_5Fb;
  
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inElem;
    tmp4_2 = _inConstArg;
    {
      modelica_metatype _explst = NULL;
      modelica_metatype _eqnslst = NULL;
      modelica_metatype _asserts1 = NULL;
      modelica_metatype _eqnslstlst = NULL;
      modelica_metatype _source = NULL;
      modelica_metatype _globalKnownVars = NULL;
      modelica_metatype _eqn = NULL;
      modelica_metatype _attr = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _explst has no default value.
      // _eqnslst has no default value.
      // _asserts1 has no default value.
      // _eqnslstlst has no default value.
      // _source has no default value.
      // _globalKnownVars has no default value.
      // _eqn has no default value.
      // _attr has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,5) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
          
          _explst = tmpMeta6;
          _eqnslstlst = tmpMeta7;
          _eqnslst = tmpMeta8;
          _source = tmpMeta9;
          _attr = tmpMeta10;
          _globalKnownVars = tmp4_2;
          /* Pattern matching succeeded */
          tmpMeta11 = mmc_mk_box2(0, _globalKnownVars, mmc_mk_boolean(0 /* false */));
          _explst = omc_Expression_traverseExpList(threadData, _explst, boxvar_BackendDAEOptimize_simplifyEvaluatedParamter, tmpMeta11, NULL);

          _explst = omc_ExpressionSimplify_simplifyList(threadData, _explst);

          tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
          _acc = omc_BackendDAEOptimize_simplifyIfEquation(threadData, _explst, _eqnslstlst, _eqnslst, tmpMeta12, tmpMeta13, _source, _globalKnownVars, _acc, _attr ,&_asserts1);

          _asserts1 = listAppend(_asserts, _asserts1);
          tmpMeta[0+0] = _acc;
          tmpMeta[0+1] = _asserts1;
          tmp1_c2 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_integer tmp16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          
          _eqn = tmp4_1;
          _globalKnownVars = tmp4_2;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta17 = mmc_mk_box2(0, _globalKnownVars, mmc_mk_boolean(_b));
          tmpMeta18 = omc_BackendEquation_traverseExpsOfEquation(threadData, _eqn, boxvar_BackendDAEOptimize_simplifyIfExpevaluatedParamter, tmpMeta17, &tmpMeta14);
          _eqn = tmpMeta18;
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
          tmp16 = mmc_unbox_integer(tmpMeta15);
          _b = tmp16  /* pattern as ty=Boolean */;
          tmpMeta19 = mmc_mk_cons(_eqn, _acc);
          tmpMeta[0+0] = tmpMeta19;
          tmpMeta[0+1] = _asserts;
          tmp1_c2 = _b;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _acc = tmpMeta[0+0];
  _asserts = tmpMeta[0+1];
  _b = tmp1_c2;
  _return: OMC_LABEL_UNUSED
  if (out_asserts) { *out_asserts = _asserts; }
  if (out_b) { *out_b = _b; }
  return _acc;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_simplifyIfEquationsFinder(threadData_t *threadData, modelica_metatype _inElem, modelica_metatype _inConstArg, modelica_metatype __omcQ_24in_5Facc, modelica_metatype __omcQ_24in_5Fasserts, modelica_metatype __omcQ_24in_5Fb, modelica_metatype *out_asserts, modelica_metatype *out_b)
{
  modelica_integer tmp1;
  modelica_boolean _b;
  modelica_metatype _acc = NULL;
  tmp1 = mmc_unbox_integer(__omcQ_24in_5Fb);
  _acc = omc_BackendDAEOptimize_simplifyIfEquationsFinder(threadData, _inElem, _inConstArg, __omcQ_24in_5Facc, __omcQ_24in_5Fasserts, tmp1, out_asserts, &_b);
  /* skip box _acc; list<BackendDAE.Equation> */
  /* skip box _asserts; list<BackendDAE.Equation> */
  if (out_b) { *out_b = mmc_mk_icon(_b); }
  return _acc;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyIfEquationsWork(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _ishared, modelica_metatype *out_oshared)
{
  modelica_metatype _osyst = NULL;
  modelica_metatype _oshared = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _osyst has no default value.
  // _oshared has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _isyst;
    tmp4_2 = _ishared;
    {
      modelica_metatype _globalKnownVars = NULL;
      modelica_metatype _eqns = NULL;
      modelica_metatype _initialEqs = NULL;
      modelica_metatype _eqnslst = NULL;
      modelica_metatype _asserts = NULL;
      modelica_metatype _initial_asserts = NULL;
      modelica_metatype _syst = NULL;
      modelica_metatype _shared = NULL;
      modelica_boolean _systChanged;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _globalKnownVars has no default value.
      // _eqns has no default value.
      // _initialEqs has no default value.
      // _eqnslst has no default value.
      // _asserts has no default value.
      // _initial_asserts has no default value.
      // _syst has no default value.
      // _shared has no default value.
      // _systChanged has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_integer tmp11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_integer tmp18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          
          _syst = tmp4_1;
          _eqns = tmpMeta6;
          _shared = tmp4_2;
          _globalKnownVars = tmpMeta7;
          _initialEqs = tmpMeta8;
          /* Pattern matching succeeded */
          _eqnslst = omc_BackendEquation_equationList(threadData, _eqns);

          /* Pattern-matching tuple assignment */
          tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta14 = omc_List_fold31(threadData, listReverse(_eqnslst), boxvar_BackendDAEOptimize_simplifyIfEquationsFinder, _globalKnownVars, tmpMeta12, tmpMeta13, mmc_mk_boolean(0 /* false */), &tmpMeta9, &tmpMeta10);
          _eqnslst = tmpMeta14;
          tmp11 = mmc_unbox_integer(tmpMeta10);
          _asserts = tmpMeta9;
          _systChanged = tmp11  /* pattern as ty=Boolean */;

          tmpMeta15 = MMC_TAGPTR(mmc_alloc_words(11));
          memcpy(MMC_UNTAGPTR(tmpMeta15), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta15))[3] = omc_BackendEquation_listEquation(threadData, _eqnslst);
          _syst = tmpMeta15;

          _eqnslst = omc_BackendEquation_equationList(threadData, _initialEqs);

          /* Pattern-matching tuple assignment */
          tmpMeta19 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta20 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta21 = omc_List_fold31(threadData, listReverse(_eqnslst), boxvar_BackendDAEOptimize_simplifyIfEquationsFinder, _globalKnownVars, tmpMeta19, tmpMeta20, mmc_mk_boolean(_systChanged), &tmpMeta16, &tmpMeta17);
          _eqnslst = tmpMeta21;
          tmp18 = mmc_unbox_integer(tmpMeta17);
          if (1 /* true */ != tmp18) goto goto_2;
          _initial_asserts = tmpMeta16;

          tmpMeta22 = MMC_TAGPTR(mmc_alloc_words(22));
          memcpy(MMC_UNTAGPTR(tmpMeta22), MMC_UNTAGPTR(_shared), 22*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta22))[6] = omc_BackendEquation_listEquation(threadData, listAppend(_initial_asserts, _eqnslst));
          _shared = tmpMeta22;

          _syst = omc_BackendDAEUtil_clearEqSyst(threadData, _syst);

          _syst = omc_BackendEquation_requationsAddDAE(threadData, _asserts, _syst);
          tmpMeta[0+0] = _syst;
          tmpMeta[0+1] = _shared;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _isyst;
          tmpMeta[0+1] = _ishared;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _osyst = tmpMeta[0+0];
  _oshared = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_oshared) { *out_oshared = _oshared; }
  return _osyst;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_simplifyIfEquations(threadData_t *threadData, modelica_metatype _dae)
{
  modelica_metatype _odae = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _odae has no default value.
  _odae = omc_BackendDAEUtil_mapEqSystem(threadData, _dae, boxvar_BackendDAEOptimize_simplifyIfEquationsWork);
  _return: OMC_LABEL_UNUSED
  return _odae;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_countOperator(threadData_t *threadData, modelica_metatype _op, modelica_metatype _inTpl)
{
  modelica_metatype _outTpl = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outTpl has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _op;
    tmp4_2 = _inTpl;
    {
      modelica_metatype _tp = NULL;
      modelica_integer _i;
      modelica_integer _i1;
      modelica_integer _i2;
      modelica_integer _i3;
      modelica_integer _i4;
      modelica_integer _i5;
      modelica_integer _i6;
      modelica_integer _i7;
      modelica_integer _i8;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _tp has no default value.
      // _i has no default value.
      // _i1 has no default value.
      // _i2 has no default value.
      // _i3 has no default value.
      // _i4 has no default value.
      // _i5 has no default value.
      // _i6 has no default value.
      // _i7 has no default value.
      // _i8 has no default value.
      tmp4 = 0;
      for (; tmp4 < 33; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          modelica_metatype tmpMeta8;
          modelica_integer tmp9;
          modelica_metatype tmpMeta10;
          modelica_integer tmp11;
          modelica_metatype tmpMeta12;
          modelica_integer tmp13;
          modelica_metatype tmpMeta14;
          modelica_integer tmp15;
          modelica_metatype tmpMeta16;
          modelica_integer tmp17;
          modelica_metatype tmpMeta18;
          modelica_integer tmp19;
          modelica_metatype tmpMeta20;
          modelica_integer tmp21;
          modelica_metatype tmpMeta22;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp7 = mmc_unbox_integer(tmpMeta6);
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp9 = mmc_unbox_integer(tmpMeta8);
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp11 = mmc_unbox_integer(tmpMeta10);
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp13 = mmc_unbox_integer(tmpMeta12);
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp15 = mmc_unbox_integer(tmpMeta14);
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp17 = mmc_unbox_integer(tmpMeta16);
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp19 = mmc_unbox_integer(tmpMeta18);
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp21 = mmc_unbox_integer(tmpMeta20);
          _i1 = tmp7  /* pattern as ty=Integer */;
          _i2 = tmp9  /* pattern as ty=Integer */;
          _i3 = tmp11  /* pattern as ty=Integer */;
          _i4 = tmp13  /* pattern as ty=Integer */;
          _i5 = tmp15  /* pattern as ty=Integer */;
          _i6 = tmp17  /* pattern as ty=Integer */;
          _i7 = tmp19  /* pattern as ty=Integer */;
          _i8 = tmp21  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta22 = mmc_mk_box8(0, mmc_mk_integer(((modelica_integer) 1) + _i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta22;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta23;
          modelica_integer tmp24;
          modelica_metatype tmpMeta25;
          modelica_integer tmp26;
          modelica_metatype tmpMeta27;
          modelica_integer tmp28;
          modelica_metatype tmpMeta29;
          modelica_integer tmp30;
          modelica_metatype tmpMeta31;
          modelica_integer tmp32;
          modelica_metatype tmpMeta33;
          modelica_integer tmp34;
          modelica_metatype tmpMeta35;
          modelica_integer tmp36;
          modelica_metatype tmpMeta37;
          modelica_integer tmp38;
          modelica_metatype tmpMeta39;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp24 = mmc_unbox_integer(tmpMeta23);
          tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp26 = mmc_unbox_integer(tmpMeta25);
          tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp28 = mmc_unbox_integer(tmpMeta27);
          tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp30 = mmc_unbox_integer(tmpMeta29);
          tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp32 = mmc_unbox_integer(tmpMeta31);
          tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp34 = mmc_unbox_integer(tmpMeta33);
          tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp36 = mmc_unbox_integer(tmpMeta35);
          tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp38 = mmc_unbox_integer(tmpMeta37);
          _i1 = tmp24  /* pattern as ty=Integer */;
          _i2 = tmp26  /* pattern as ty=Integer */;
          _i3 = tmp28  /* pattern as ty=Integer */;
          _i4 = tmp30  /* pattern as ty=Integer */;
          _i5 = tmp32  /* pattern as ty=Integer */;
          _i6 = tmp34  /* pattern as ty=Integer */;
          _i7 = tmp36  /* pattern as ty=Integer */;
          _i8 = tmp38  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta39 = mmc_mk_box8(0, mmc_mk_integer(((modelica_integer) 1) + _i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta39;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta40;
          modelica_integer tmp41;
          modelica_metatype tmpMeta42;
          modelica_integer tmp43;
          modelica_metatype tmpMeta44;
          modelica_integer tmp45;
          modelica_metatype tmpMeta46;
          modelica_integer tmp47;
          modelica_metatype tmpMeta48;
          modelica_integer tmp49;
          modelica_metatype tmpMeta50;
          modelica_integer tmp51;
          modelica_metatype tmpMeta52;
          modelica_integer tmp53;
          modelica_metatype tmpMeta54;
          modelica_integer tmp55;
          modelica_metatype tmpMeta56;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
          tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp41 = mmc_unbox_integer(tmpMeta40);
          tmpMeta42 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp43 = mmc_unbox_integer(tmpMeta42);
          tmpMeta44 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp45 = mmc_unbox_integer(tmpMeta44);
          tmpMeta46 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp47 = mmc_unbox_integer(tmpMeta46);
          tmpMeta48 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp49 = mmc_unbox_integer(tmpMeta48);
          tmpMeta50 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp51 = mmc_unbox_integer(tmpMeta50);
          tmpMeta52 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp53 = mmc_unbox_integer(tmpMeta52);
          tmpMeta54 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp55 = mmc_unbox_integer(tmpMeta54);
          _i1 = tmp41  /* pattern as ty=Integer */;
          _i2 = tmp43  /* pattern as ty=Integer */;
          _i3 = tmp45  /* pattern as ty=Integer */;
          _i4 = tmp47  /* pattern as ty=Integer */;
          _i5 = tmp49  /* pattern as ty=Integer */;
          _i6 = tmp51  /* pattern as ty=Integer */;
          _i7 = tmp53  /* pattern as ty=Integer */;
          _i8 = tmp55  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta56 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(((modelica_integer) 1) + _i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta56;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta57;
          modelica_integer tmp58;
          modelica_metatype tmpMeta59;
          modelica_integer tmp60;
          modelica_metatype tmpMeta61;
          modelica_integer tmp62;
          modelica_metatype tmpMeta63;
          modelica_integer tmp64;
          modelica_metatype tmpMeta65;
          modelica_integer tmp66;
          modelica_metatype tmpMeta67;
          modelica_integer tmp68;
          modelica_metatype tmpMeta69;
          modelica_integer tmp70;
          modelica_metatype tmpMeta71;
          modelica_integer tmp72;
          modelica_metatype tmpMeta73;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
          tmpMeta57 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp58 = mmc_unbox_integer(tmpMeta57);
          tmpMeta59 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp60 = mmc_unbox_integer(tmpMeta59);
          tmpMeta61 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp62 = mmc_unbox_integer(tmpMeta61);
          tmpMeta63 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp64 = mmc_unbox_integer(tmpMeta63);
          tmpMeta65 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp66 = mmc_unbox_integer(tmpMeta65);
          tmpMeta67 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp68 = mmc_unbox_integer(tmpMeta67);
          tmpMeta69 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp70 = mmc_unbox_integer(tmpMeta69);
          tmpMeta71 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp72 = mmc_unbox_integer(tmpMeta71);
          _i1 = tmp58  /* pattern as ty=Integer */;
          _i2 = tmp60  /* pattern as ty=Integer */;
          _i3 = tmp62  /* pattern as ty=Integer */;
          _i4 = tmp64  /* pattern as ty=Integer */;
          _i5 = tmp66  /* pattern as ty=Integer */;
          _i6 = tmp68  /* pattern as ty=Integer */;
          _i7 = tmp70  /* pattern as ty=Integer */;
          _i8 = tmp72  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta73 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(((modelica_integer) 1) + _i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta73;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta74;
          modelica_integer tmp75;
          modelica_metatype tmpMeta76;
          modelica_integer tmp77;
          modelica_metatype tmpMeta78;
          modelica_integer tmp79;
          modelica_metatype tmpMeta80;
          modelica_integer tmp81;
          modelica_metatype tmpMeta82;
          modelica_integer tmp83;
          modelica_metatype tmpMeta84;
          modelica_integer tmp85;
          modelica_metatype tmpMeta86;
          modelica_integer tmp87;
          modelica_metatype tmpMeta88;
          modelica_integer tmp89;
          modelica_metatype tmpMeta90;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,1) == 0) goto tmp3_end;
          tmpMeta74 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp75 = mmc_unbox_integer(tmpMeta74);
          tmpMeta76 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp77 = mmc_unbox_integer(tmpMeta76);
          tmpMeta78 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp79 = mmc_unbox_integer(tmpMeta78);
          tmpMeta80 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp81 = mmc_unbox_integer(tmpMeta80);
          tmpMeta82 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp83 = mmc_unbox_integer(tmpMeta82);
          tmpMeta84 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp85 = mmc_unbox_integer(tmpMeta84);
          tmpMeta86 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp87 = mmc_unbox_integer(tmpMeta86);
          tmpMeta88 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp89 = mmc_unbox_integer(tmpMeta88);
          _i1 = tmp75  /* pattern as ty=Integer */;
          _i2 = tmp77  /* pattern as ty=Integer */;
          _i3 = tmp79  /* pattern as ty=Integer */;
          _i4 = tmp81  /* pattern as ty=Integer */;
          _i5 = tmp83  /* pattern as ty=Integer */;
          _i6 = tmp85  /* pattern as ty=Integer */;
          _i7 = tmp87  /* pattern as ty=Integer */;
          _i8 = tmp89  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta90 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(((modelica_integer) 1) + _i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta90;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta91;
          modelica_integer tmp92;
          modelica_metatype tmpMeta93;
          modelica_integer tmp94;
          modelica_metatype tmpMeta95;
          modelica_integer tmp96;
          modelica_metatype tmpMeta97;
          modelica_integer tmp98;
          modelica_metatype tmpMeta99;
          modelica_integer tmp100;
          modelica_metatype tmpMeta101;
          modelica_integer tmp102;
          modelica_metatype tmpMeta103;
          modelica_integer tmp104;
          modelica_metatype tmpMeta105;
          modelica_integer tmp106;
          modelica_metatype tmpMeta107;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,1) == 0) goto tmp3_end;
          tmpMeta91 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp92 = mmc_unbox_integer(tmpMeta91);
          tmpMeta93 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp94 = mmc_unbox_integer(tmpMeta93);
          tmpMeta95 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp96 = mmc_unbox_integer(tmpMeta95);
          tmpMeta97 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp98 = mmc_unbox_integer(tmpMeta97);
          tmpMeta99 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp100 = mmc_unbox_integer(tmpMeta99);
          tmpMeta101 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp102 = mmc_unbox_integer(tmpMeta101);
          tmpMeta103 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp104 = mmc_unbox_integer(tmpMeta103);
          tmpMeta105 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp106 = mmc_unbox_integer(tmpMeta105);
          _i1 = tmp92  /* pattern as ty=Integer */;
          _i2 = tmp94  /* pattern as ty=Integer */;
          _i3 = tmp96  /* pattern as ty=Integer */;
          _i4 = tmp98  /* pattern as ty=Integer */;
          _i5 = tmp100  /* pattern as ty=Integer */;
          _i6 = tmp102  /* pattern as ty=Integer */;
          _i7 = tmp104  /* pattern as ty=Integer */;
          _i8 = tmp106  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta107 = mmc_mk_box8(0, mmc_mk_integer(((modelica_integer) 1) + _i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta107;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta108;
          modelica_metatype tmpMeta109;
          modelica_integer tmp110;
          modelica_metatype tmpMeta111;
          modelica_integer tmp112;
          modelica_metatype tmpMeta113;
          modelica_integer tmp114;
          modelica_metatype tmpMeta115;
          modelica_integer tmp116;
          modelica_metatype tmpMeta117;
          modelica_integer tmp118;
          modelica_metatype tmpMeta119;
          modelica_integer tmp120;
          modelica_metatype tmpMeta121;
          modelica_integer tmp122;
          modelica_metatype tmpMeta123;
          modelica_integer tmp124;
          modelica_metatype tmpMeta125;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,1) == 0) goto tmp3_end;
          tmpMeta108 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta109 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp110 = mmc_unbox_integer(tmpMeta109);
          tmpMeta111 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp112 = mmc_unbox_integer(tmpMeta111);
          tmpMeta113 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp114 = mmc_unbox_integer(tmpMeta113);
          tmpMeta115 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp116 = mmc_unbox_integer(tmpMeta115);
          tmpMeta117 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp118 = mmc_unbox_integer(tmpMeta117);
          tmpMeta119 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp120 = mmc_unbox_integer(tmpMeta119);
          tmpMeta121 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp122 = mmc_unbox_integer(tmpMeta121);
          tmpMeta123 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp124 = mmc_unbox_integer(tmpMeta123);
          _tp = tmpMeta108;
          _i1 = tmp110  /* pattern as ty=Integer */;
          _i2 = tmp112  /* pattern as ty=Integer */;
          _i3 = tmp114  /* pattern as ty=Integer */;
          _i4 = tmp116  /* pattern as ty=Integer */;
          _i5 = tmp118  /* pattern as ty=Integer */;
          _i6 = tmp120  /* pattern as ty=Integer */;
          _i7 = tmp122  /* pattern as ty=Integer */;
          _i8 = tmp124  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          _i = omc_Expression_sizeOf(threadData, _tp);
          tmpMeta125 = mmc_mk_box8(0, mmc_mk_integer(_i1 + _i), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta125;
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta126;
          modelica_metatype tmpMeta127;
          modelica_integer tmp128;
          modelica_metatype tmpMeta129;
          modelica_integer tmp130;
          modelica_metatype tmpMeta131;
          modelica_integer tmp132;
          modelica_metatype tmpMeta133;
          modelica_integer tmp134;
          modelica_metatype tmpMeta135;
          modelica_integer tmp136;
          modelica_metatype tmpMeta137;
          modelica_integer tmp138;
          modelica_metatype tmpMeta139;
          modelica_integer tmp140;
          modelica_metatype tmpMeta141;
          modelica_integer tmp142;
          modelica_metatype tmpMeta143;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,1) == 0) goto tmp3_end;
          tmpMeta126 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta127 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp128 = mmc_unbox_integer(tmpMeta127);
          tmpMeta129 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp130 = mmc_unbox_integer(tmpMeta129);
          tmpMeta131 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp132 = mmc_unbox_integer(tmpMeta131);
          tmpMeta133 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp134 = mmc_unbox_integer(tmpMeta133);
          tmpMeta135 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp136 = mmc_unbox_integer(tmpMeta135);
          tmpMeta137 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp138 = mmc_unbox_integer(tmpMeta137);
          tmpMeta139 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp140 = mmc_unbox_integer(tmpMeta139);
          tmpMeta141 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp142 = mmc_unbox_integer(tmpMeta141);
          _tp = tmpMeta126;
          _i1 = tmp128  /* pattern as ty=Integer */;
          _i2 = tmp130  /* pattern as ty=Integer */;
          _i3 = tmp132  /* pattern as ty=Integer */;
          _i4 = tmp134  /* pattern as ty=Integer */;
          _i5 = tmp136  /* pattern as ty=Integer */;
          _i6 = tmp138  /* pattern as ty=Integer */;
          _i7 = tmp140  /* pattern as ty=Integer */;
          _i8 = tmp142  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          _i = omc_Expression_sizeOf(threadData, _tp);
          tmpMeta143 = mmc_mk_box8(0, mmc_mk_integer(_i1 + _i), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta143;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta144;
          modelica_metatype tmpMeta145;
          modelica_integer tmp146;
          modelica_metatype tmpMeta147;
          modelica_integer tmp148;
          modelica_metatype tmpMeta149;
          modelica_integer tmp150;
          modelica_metatype tmpMeta151;
          modelica_integer tmp152;
          modelica_metatype tmpMeta153;
          modelica_integer tmp154;
          modelica_metatype tmpMeta155;
          modelica_integer tmp156;
          modelica_metatype tmpMeta157;
          modelica_integer tmp158;
          modelica_metatype tmpMeta159;
          modelica_integer tmp160;
          modelica_metatype tmpMeta161;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,1) == 0) goto tmp3_end;
          tmpMeta144 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta145 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp146 = mmc_unbox_integer(tmpMeta145);
          tmpMeta147 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp148 = mmc_unbox_integer(tmpMeta147);
          tmpMeta149 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp150 = mmc_unbox_integer(tmpMeta149);
          tmpMeta151 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp152 = mmc_unbox_integer(tmpMeta151);
          tmpMeta153 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp154 = mmc_unbox_integer(tmpMeta153);
          tmpMeta155 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp156 = mmc_unbox_integer(tmpMeta155);
          tmpMeta157 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp158 = mmc_unbox_integer(tmpMeta157);
          tmpMeta159 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp160 = mmc_unbox_integer(tmpMeta159);
          _tp = tmpMeta144;
          _i1 = tmp146  /* pattern as ty=Integer */;
          _i2 = tmp148  /* pattern as ty=Integer */;
          _i3 = tmp150  /* pattern as ty=Integer */;
          _i4 = tmp152  /* pattern as ty=Integer */;
          _i5 = tmp154  /* pattern as ty=Integer */;
          _i6 = tmp156  /* pattern as ty=Integer */;
          _i7 = tmp158  /* pattern as ty=Integer */;
          _i8 = tmp160  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          _i = omc_Expression_sizeOf(threadData, _tp);
          tmpMeta161 = mmc_mk_box8(0, mmc_mk_integer(_i1 + _i), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta161;
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta162;
          modelica_metatype tmpMeta163;
          modelica_integer tmp164;
          modelica_metatype tmpMeta165;
          modelica_integer tmp166;
          modelica_metatype tmpMeta167;
          modelica_integer tmp168;
          modelica_metatype tmpMeta169;
          modelica_integer tmp170;
          modelica_metatype tmpMeta171;
          modelica_integer tmp172;
          modelica_metatype tmpMeta173;
          modelica_integer tmp174;
          modelica_metatype tmpMeta175;
          modelica_integer tmp176;
          modelica_metatype tmpMeta177;
          modelica_integer tmp178;
          modelica_metatype tmpMeta179;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,1) == 0) goto tmp3_end;
          tmpMeta162 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta163 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp164 = mmc_unbox_integer(tmpMeta163);
          tmpMeta165 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp166 = mmc_unbox_integer(tmpMeta165);
          tmpMeta167 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp168 = mmc_unbox_integer(tmpMeta167);
          tmpMeta169 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp170 = mmc_unbox_integer(tmpMeta169);
          tmpMeta171 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp172 = mmc_unbox_integer(tmpMeta171);
          tmpMeta173 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp174 = mmc_unbox_integer(tmpMeta173);
          tmpMeta175 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp176 = mmc_unbox_integer(tmpMeta175);
          tmpMeta177 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp178 = mmc_unbox_integer(tmpMeta177);
          _tp = tmpMeta162;
          _i1 = tmp164  /* pattern as ty=Integer */;
          _i2 = tmp166  /* pattern as ty=Integer */;
          _i3 = tmp168  /* pattern as ty=Integer */;
          _i4 = tmp170  /* pattern as ty=Integer */;
          _i5 = tmp172  /* pattern as ty=Integer */;
          _i6 = tmp174  /* pattern as ty=Integer */;
          _i7 = tmp176  /* pattern as ty=Integer */;
          _i8 = tmp178  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          _i = omc_Expression_sizeOf(threadData, _tp);
          tmpMeta179 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2 + _i), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta179;
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta180;
          modelica_metatype tmpMeta181;
          modelica_integer tmp182;
          modelica_metatype tmpMeta183;
          modelica_integer tmp184;
          modelica_metatype tmpMeta185;
          modelica_integer tmp186;
          modelica_metatype tmpMeta187;
          modelica_integer tmp188;
          modelica_metatype tmpMeta189;
          modelica_integer tmp190;
          modelica_metatype tmpMeta191;
          modelica_integer tmp192;
          modelica_metatype tmpMeta193;
          modelica_integer tmp194;
          modelica_metatype tmpMeta195;
          modelica_integer tmp196;
          modelica_metatype tmpMeta197;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,1) == 0) goto tmp3_end;
          tmpMeta180 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta181 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp182 = mmc_unbox_integer(tmpMeta181);
          tmpMeta183 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp184 = mmc_unbox_integer(tmpMeta183);
          tmpMeta185 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp186 = mmc_unbox_integer(tmpMeta185);
          tmpMeta187 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp188 = mmc_unbox_integer(tmpMeta187);
          tmpMeta189 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp190 = mmc_unbox_integer(tmpMeta189);
          tmpMeta191 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp192 = mmc_unbox_integer(tmpMeta191);
          tmpMeta193 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp194 = mmc_unbox_integer(tmpMeta193);
          tmpMeta195 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp196 = mmc_unbox_integer(tmpMeta195);
          _tp = tmpMeta180;
          _i1 = tmp182  /* pattern as ty=Integer */;
          _i2 = tmp184  /* pattern as ty=Integer */;
          _i3 = tmp186  /* pattern as ty=Integer */;
          _i4 = tmp188  /* pattern as ty=Integer */;
          _i5 = tmp190  /* pattern as ty=Integer */;
          _i6 = tmp192  /* pattern as ty=Integer */;
          _i7 = tmp194  /* pattern as ty=Integer */;
          _i8 = tmp196  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          _i = omc_Expression_sizeOf(threadData, _tp);
          tmpMeta197 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3 + _i), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta197;
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta198;
          modelica_integer tmp199;
          modelica_metatype tmpMeta200;
          modelica_integer tmp201;
          modelica_metatype tmpMeta202;
          modelica_integer tmp203;
          modelica_metatype tmpMeta204;
          modelica_integer tmp205;
          modelica_metatype tmpMeta206;
          modelica_integer tmp207;
          modelica_metatype tmpMeta208;
          modelica_integer tmp209;
          modelica_metatype tmpMeta210;
          modelica_integer tmp211;
          modelica_metatype tmpMeta212;
          modelica_integer tmp213;
          modelica_metatype tmpMeta214;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,1) == 0) goto tmp3_end;
          tmpMeta198 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp199 = mmc_unbox_integer(tmpMeta198);
          tmpMeta200 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp201 = mmc_unbox_integer(tmpMeta200);
          tmpMeta202 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp203 = mmc_unbox_integer(tmpMeta202);
          tmpMeta204 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp205 = mmc_unbox_integer(tmpMeta204);
          tmpMeta206 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp207 = mmc_unbox_integer(tmpMeta206);
          tmpMeta208 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp209 = mmc_unbox_integer(tmpMeta208);
          tmpMeta210 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp211 = mmc_unbox_integer(tmpMeta210);
          tmpMeta212 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp213 = mmc_unbox_integer(tmpMeta212);
          _i1 = tmp199  /* pattern as ty=Integer */;
          _i2 = tmp201  /* pattern as ty=Integer */;
          _i3 = tmp203  /* pattern as ty=Integer */;
          _i4 = tmp205  /* pattern as ty=Integer */;
          _i5 = tmp207  /* pattern as ty=Integer */;
          _i6 = tmp209  /* pattern as ty=Integer */;
          _i7 = tmp211  /* pattern as ty=Integer */;
          _i8 = tmp213  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta214 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(((modelica_integer) 1) + _i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta214;
          goto tmp3_done;
        }
        case 12: {
          modelica_metatype tmpMeta215;
          modelica_integer tmp216;
          modelica_metatype tmpMeta217;
          modelica_integer tmp218;
          modelica_metatype tmpMeta219;
          modelica_integer tmp220;
          modelica_metatype tmpMeta221;
          modelica_integer tmp222;
          modelica_metatype tmpMeta223;
          modelica_integer tmp224;
          modelica_metatype tmpMeta225;
          modelica_integer tmp226;
          modelica_metatype tmpMeta227;
          modelica_integer tmp228;
          modelica_metatype tmpMeta229;
          modelica_integer tmp230;
          modelica_metatype tmpMeta231;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,1) == 0) goto tmp3_end;
          tmpMeta215 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp216 = mmc_unbox_integer(tmpMeta215);
          tmpMeta217 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp218 = mmc_unbox_integer(tmpMeta217);
          tmpMeta219 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp220 = mmc_unbox_integer(tmpMeta219);
          tmpMeta221 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp222 = mmc_unbox_integer(tmpMeta221);
          tmpMeta223 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp224 = mmc_unbox_integer(tmpMeta223);
          tmpMeta225 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp226 = mmc_unbox_integer(tmpMeta225);
          tmpMeta227 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp228 = mmc_unbox_integer(tmpMeta227);
          tmpMeta229 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp230 = mmc_unbox_integer(tmpMeta229);
          _i1 = tmp216  /* pattern as ty=Integer */;
          _i2 = tmp218  /* pattern as ty=Integer */;
          _i3 = tmp220  /* pattern as ty=Integer */;
          _i4 = tmp222  /* pattern as ty=Integer */;
          _i5 = tmp224  /* pattern as ty=Integer */;
          _i6 = tmp226  /* pattern as ty=Integer */;
          _i7 = tmp228  /* pattern as ty=Integer */;
          _i8 = tmp230  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta231 = mmc_mk_box8(0, mmc_mk_integer(((modelica_integer) 1) + _i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta231;
          goto tmp3_done;
        }
        case 13: {
          modelica_metatype tmpMeta232;
          modelica_integer tmp233;
          modelica_metatype tmpMeta234;
          modelica_integer tmp235;
          modelica_metatype tmpMeta236;
          modelica_integer tmp237;
          modelica_metatype tmpMeta238;
          modelica_integer tmp239;
          modelica_metatype tmpMeta240;
          modelica_integer tmp241;
          modelica_metatype tmpMeta242;
          modelica_integer tmp243;
          modelica_metatype tmpMeta244;
          modelica_integer tmp245;
          modelica_metatype tmpMeta246;
          modelica_integer tmp247;
          modelica_metatype tmpMeta248;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
          tmpMeta232 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp233 = mmc_unbox_integer(tmpMeta232);
          tmpMeta234 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp235 = mmc_unbox_integer(tmpMeta234);
          tmpMeta236 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp237 = mmc_unbox_integer(tmpMeta236);
          tmpMeta238 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp239 = mmc_unbox_integer(tmpMeta238);
          tmpMeta240 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp241 = mmc_unbox_integer(tmpMeta240);
          tmpMeta242 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp243 = mmc_unbox_integer(tmpMeta242);
          tmpMeta244 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp245 = mmc_unbox_integer(tmpMeta244);
          tmpMeta246 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp247 = mmc_unbox_integer(tmpMeta246);
          _i1 = tmp233  /* pattern as ty=Integer */;
          _i2 = tmp235  /* pattern as ty=Integer */;
          _i3 = tmp237  /* pattern as ty=Integer */;
          _i4 = tmp239  /* pattern as ty=Integer */;
          _i5 = tmp241  /* pattern as ty=Integer */;
          _i6 = tmp243  /* pattern as ty=Integer */;
          _i7 = tmp245  /* pattern as ty=Integer */;
          _i8 = tmp247  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta248 = mmc_mk_box8(0, mmc_mk_integer(((modelica_integer) 1) + _i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta248;
          goto tmp3_done;
        }
        case 14: {
          modelica_metatype tmpMeta249;
          modelica_integer tmp250;
          modelica_metatype tmpMeta251;
          modelica_integer tmp252;
          modelica_metatype tmpMeta253;
          modelica_integer tmp254;
          modelica_metatype tmpMeta255;
          modelica_integer tmp256;
          modelica_metatype tmpMeta257;
          modelica_integer tmp258;
          modelica_metatype tmpMeta259;
          modelica_integer tmp260;
          modelica_metatype tmpMeta261;
          modelica_integer tmp262;
          modelica_metatype tmpMeta263;
          modelica_integer tmp264;
          modelica_metatype tmpMeta265;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,1) == 0) goto tmp3_end;
          tmpMeta249 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp250 = mmc_unbox_integer(tmpMeta249);
          tmpMeta251 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp252 = mmc_unbox_integer(tmpMeta251);
          tmpMeta253 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp254 = mmc_unbox_integer(tmpMeta253);
          tmpMeta255 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp256 = mmc_unbox_integer(tmpMeta255);
          tmpMeta257 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp258 = mmc_unbox_integer(tmpMeta257);
          tmpMeta259 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp260 = mmc_unbox_integer(tmpMeta259);
          tmpMeta261 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp262 = mmc_unbox_integer(tmpMeta261);
          tmpMeta263 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp264 = mmc_unbox_integer(tmpMeta263);
          _i1 = tmp250  /* pattern as ty=Integer */;
          _i2 = tmp252  /* pattern as ty=Integer */;
          _i3 = tmp254  /* pattern as ty=Integer */;
          _i4 = tmp256  /* pattern as ty=Integer */;
          _i5 = tmp258  /* pattern as ty=Integer */;
          _i6 = tmp260  /* pattern as ty=Integer */;
          _i7 = tmp262  /* pattern as ty=Integer */;
          _i8 = tmp264  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta265 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(((modelica_integer) 1) + _i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta265;
          goto tmp3_done;
        }
        case 15: {
          modelica_metatype tmpMeta266;
          modelica_integer tmp267;
          modelica_metatype tmpMeta268;
          modelica_integer tmp269;
          modelica_metatype tmpMeta270;
          modelica_integer tmp271;
          modelica_metatype tmpMeta272;
          modelica_integer tmp273;
          modelica_metatype tmpMeta274;
          modelica_integer tmp275;
          modelica_metatype tmpMeta276;
          modelica_integer tmp277;
          modelica_metatype tmpMeta278;
          modelica_integer tmp279;
          modelica_metatype tmpMeta280;
          modelica_integer tmp281;
          modelica_metatype tmpMeta282;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,1) == 0) goto tmp3_end;
          tmpMeta266 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp267 = mmc_unbox_integer(tmpMeta266);
          tmpMeta268 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp269 = mmc_unbox_integer(tmpMeta268);
          tmpMeta270 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp271 = mmc_unbox_integer(tmpMeta270);
          tmpMeta272 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp273 = mmc_unbox_integer(tmpMeta272);
          tmpMeta274 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp275 = mmc_unbox_integer(tmpMeta274);
          tmpMeta276 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp277 = mmc_unbox_integer(tmpMeta276);
          tmpMeta278 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp279 = mmc_unbox_integer(tmpMeta278);
          tmpMeta280 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp281 = mmc_unbox_integer(tmpMeta280);
          _i1 = tmp267  /* pattern as ty=Integer */;
          _i2 = tmp269  /* pattern as ty=Integer */;
          _i3 = tmp271  /* pattern as ty=Integer */;
          _i4 = tmp273  /* pattern as ty=Integer */;
          _i5 = tmp275  /* pattern as ty=Integer */;
          _i6 = tmp277  /* pattern as ty=Integer */;
          _i7 = tmp279  /* pattern as ty=Integer */;
          _i8 = tmp281  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta282 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(((modelica_integer) 1) + _i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta282;
          goto tmp3_done;
        }
        case 16: {
          modelica_metatype tmpMeta283;
          modelica_integer tmp284;
          modelica_metatype tmpMeta285;
          modelica_integer tmp286;
          modelica_metatype tmpMeta287;
          modelica_integer tmp288;
          modelica_metatype tmpMeta289;
          modelica_integer tmp290;
          modelica_metatype tmpMeta291;
          modelica_integer tmp292;
          modelica_metatype tmpMeta293;
          modelica_integer tmp294;
          modelica_metatype tmpMeta295;
          modelica_integer tmp296;
          modelica_metatype tmpMeta297;
          modelica_integer tmp298;
          modelica_metatype tmpMeta299;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,1) == 0) goto tmp3_end;
          tmpMeta283 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp284 = mmc_unbox_integer(tmpMeta283);
          tmpMeta285 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp286 = mmc_unbox_integer(tmpMeta285);
          tmpMeta287 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp288 = mmc_unbox_integer(tmpMeta287);
          tmpMeta289 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp290 = mmc_unbox_integer(tmpMeta289);
          tmpMeta291 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp292 = mmc_unbox_integer(tmpMeta291);
          tmpMeta293 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp294 = mmc_unbox_integer(tmpMeta293);
          tmpMeta295 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp296 = mmc_unbox_integer(tmpMeta295);
          tmpMeta297 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp298 = mmc_unbox_integer(tmpMeta297);
          _i1 = tmp284  /* pattern as ty=Integer */;
          _i2 = tmp286  /* pattern as ty=Integer */;
          _i3 = tmp288  /* pattern as ty=Integer */;
          _i4 = tmp290  /* pattern as ty=Integer */;
          _i5 = tmp292  /* pattern as ty=Integer */;
          _i6 = tmp294  /* pattern as ty=Integer */;
          _i7 = tmp296  /* pattern as ty=Integer */;
          _i8 = tmp298  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta299 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(((modelica_integer) 1) + _i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta299;
          goto tmp3_done;
        }
        case 17: {
          modelica_metatype tmpMeta300;
          modelica_integer tmp301;
          modelica_metatype tmpMeta302;
          modelica_integer tmp303;
          modelica_metatype tmpMeta304;
          modelica_integer tmp305;
          modelica_metatype tmpMeta306;
          modelica_integer tmp307;
          modelica_metatype tmpMeta308;
          modelica_integer tmp309;
          modelica_metatype tmpMeta310;
          modelica_integer tmp311;
          modelica_metatype tmpMeta312;
          modelica_integer tmp313;
          modelica_metatype tmpMeta314;
          modelica_integer tmp315;
          modelica_metatype tmpMeta316;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,1) == 0) goto tmp3_end;
          tmpMeta300 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp301 = mmc_unbox_integer(tmpMeta300);
          tmpMeta302 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp303 = mmc_unbox_integer(tmpMeta302);
          tmpMeta304 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp305 = mmc_unbox_integer(tmpMeta304);
          tmpMeta306 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp307 = mmc_unbox_integer(tmpMeta306);
          tmpMeta308 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp309 = mmc_unbox_integer(tmpMeta308);
          tmpMeta310 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp311 = mmc_unbox_integer(tmpMeta310);
          tmpMeta312 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp313 = mmc_unbox_integer(tmpMeta312);
          tmpMeta314 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp315 = mmc_unbox_integer(tmpMeta314);
          _i1 = tmp301  /* pattern as ty=Integer */;
          _i2 = tmp303  /* pattern as ty=Integer */;
          _i3 = tmp305  /* pattern as ty=Integer */;
          _i4 = tmp307  /* pattern as ty=Integer */;
          _i5 = tmp309  /* pattern as ty=Integer */;
          _i6 = tmp311  /* pattern as ty=Integer */;
          _i7 = tmp313  /* pattern as ty=Integer */;
          _i8 = tmp315  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta316 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(((modelica_integer) 1) + _i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta316;
          goto tmp3_done;
        }
        case 18: {
          modelica_metatype tmpMeta317;
          modelica_integer tmp318;
          modelica_metatype tmpMeta319;
          modelica_integer tmp320;
          modelica_metatype tmpMeta321;
          modelica_integer tmp322;
          modelica_metatype tmpMeta323;
          modelica_integer tmp324;
          modelica_metatype tmpMeta325;
          modelica_integer tmp326;
          modelica_metatype tmpMeta327;
          modelica_integer tmp328;
          modelica_metatype tmpMeta329;
          modelica_integer tmp330;
          modelica_metatype tmpMeta331;
          modelica_integer tmp332;
          modelica_metatype tmpMeta333;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,1) == 0) goto tmp3_end;
          tmpMeta317 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp318 = mmc_unbox_integer(tmpMeta317);
          tmpMeta319 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp320 = mmc_unbox_integer(tmpMeta319);
          tmpMeta321 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp322 = mmc_unbox_integer(tmpMeta321);
          tmpMeta323 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp324 = mmc_unbox_integer(tmpMeta323);
          tmpMeta325 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp326 = mmc_unbox_integer(tmpMeta325);
          tmpMeta327 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp328 = mmc_unbox_integer(tmpMeta327);
          tmpMeta329 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp330 = mmc_unbox_integer(tmpMeta329);
          tmpMeta331 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp332 = mmc_unbox_integer(tmpMeta331);
          _i1 = tmp318  /* pattern as ty=Integer */;
          _i2 = tmp320  /* pattern as ty=Integer */;
          _i3 = tmp322  /* pattern as ty=Integer */;
          _i4 = tmp324  /* pattern as ty=Integer */;
          _i5 = tmp326  /* pattern as ty=Integer */;
          _i6 = tmp328  /* pattern as ty=Integer */;
          _i7 = tmp330  /* pattern as ty=Integer */;
          _i8 = tmp332  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta333 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(((modelica_integer) 1) + _i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta333;
          goto tmp3_done;
        }
        case 19: {
          modelica_metatype tmpMeta334;
          modelica_integer tmp335;
          modelica_metatype tmpMeta336;
          modelica_integer tmp337;
          modelica_metatype tmpMeta338;
          modelica_integer tmp339;
          modelica_metatype tmpMeta340;
          modelica_integer tmp341;
          modelica_metatype tmpMeta342;
          modelica_integer tmp343;
          modelica_metatype tmpMeta344;
          modelica_integer tmp345;
          modelica_metatype tmpMeta346;
          modelica_integer tmp347;
          modelica_metatype tmpMeta348;
          modelica_integer tmp349;
          modelica_metatype tmpMeta350;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,1) == 0) goto tmp3_end;
          tmpMeta334 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp335 = mmc_unbox_integer(tmpMeta334);
          tmpMeta336 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp337 = mmc_unbox_integer(tmpMeta336);
          tmpMeta338 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp339 = mmc_unbox_integer(tmpMeta338);
          tmpMeta340 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp341 = mmc_unbox_integer(tmpMeta340);
          tmpMeta342 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp343 = mmc_unbox_integer(tmpMeta342);
          tmpMeta344 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp345 = mmc_unbox_integer(tmpMeta344);
          tmpMeta346 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp347 = mmc_unbox_integer(tmpMeta346);
          tmpMeta348 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp349 = mmc_unbox_integer(tmpMeta348);
          _i1 = tmp335  /* pattern as ty=Integer */;
          _i2 = tmp337  /* pattern as ty=Integer */;
          _i3 = tmp339  /* pattern as ty=Integer */;
          _i4 = tmp341  /* pattern as ty=Integer */;
          _i5 = tmp343  /* pattern as ty=Integer */;
          _i6 = tmp345  /* pattern as ty=Integer */;
          _i7 = tmp347  /* pattern as ty=Integer */;
          _i8 = tmp349  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta350 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(((modelica_integer) 1) + _i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta350;
          goto tmp3_done;
        }
        case 20: {
          modelica_metatype tmpMeta351;
          modelica_integer tmp352;
          modelica_metatype tmpMeta353;
          modelica_integer tmp354;
          modelica_metatype tmpMeta355;
          modelica_integer tmp356;
          modelica_metatype tmpMeta357;
          modelica_integer tmp358;
          modelica_metatype tmpMeta359;
          modelica_integer tmp360;
          modelica_metatype tmpMeta361;
          modelica_integer tmp362;
          modelica_metatype tmpMeta363;
          modelica_integer tmp364;
          modelica_metatype tmpMeta365;
          modelica_integer tmp366;
          modelica_metatype tmpMeta367;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,1) == 0) goto tmp3_end;
          tmpMeta351 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp352 = mmc_unbox_integer(tmpMeta351);
          tmpMeta353 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp354 = mmc_unbox_integer(tmpMeta353);
          tmpMeta355 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp356 = mmc_unbox_integer(tmpMeta355);
          tmpMeta357 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp358 = mmc_unbox_integer(tmpMeta357);
          tmpMeta359 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp360 = mmc_unbox_integer(tmpMeta359);
          tmpMeta361 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp362 = mmc_unbox_integer(tmpMeta361);
          tmpMeta363 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp364 = mmc_unbox_integer(tmpMeta363);
          tmpMeta365 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp366 = mmc_unbox_integer(tmpMeta365);
          _i1 = tmp352  /* pattern as ty=Integer */;
          _i2 = tmp354  /* pattern as ty=Integer */;
          _i3 = tmp356  /* pattern as ty=Integer */;
          _i4 = tmp358  /* pattern as ty=Integer */;
          _i5 = tmp360  /* pattern as ty=Integer */;
          _i6 = tmp362  /* pattern as ty=Integer */;
          _i7 = tmp364  /* pattern as ty=Integer */;
          _i8 = tmp366  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta367 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(((modelica_integer) 1) + _i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta367;
          goto tmp3_done;
        }
        case 21: {
          modelica_metatype tmpMeta368;
          modelica_integer tmp369;
          modelica_metatype tmpMeta370;
          modelica_integer tmp371;
          modelica_metatype tmpMeta372;
          modelica_integer tmp373;
          modelica_metatype tmpMeta374;
          modelica_integer tmp375;
          modelica_metatype tmpMeta376;
          modelica_integer tmp377;
          modelica_metatype tmpMeta378;
          modelica_integer tmp379;
          modelica_metatype tmpMeta380;
          modelica_integer tmp381;
          modelica_metatype tmpMeta382;
          modelica_integer tmp383;
          modelica_metatype tmpMeta384;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,1) == 0) goto tmp3_end;
          tmpMeta368 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp369 = mmc_unbox_integer(tmpMeta368);
          tmpMeta370 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp371 = mmc_unbox_integer(tmpMeta370);
          tmpMeta372 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp373 = mmc_unbox_integer(tmpMeta372);
          tmpMeta374 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp375 = mmc_unbox_integer(tmpMeta374);
          tmpMeta376 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp377 = mmc_unbox_integer(tmpMeta376);
          tmpMeta378 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp379 = mmc_unbox_integer(tmpMeta378);
          tmpMeta380 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp381 = mmc_unbox_integer(tmpMeta380);
          tmpMeta382 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp383 = mmc_unbox_integer(tmpMeta382);
          _i1 = tmp369  /* pattern as ty=Integer */;
          _i2 = tmp371  /* pattern as ty=Integer */;
          _i3 = tmp373  /* pattern as ty=Integer */;
          _i4 = tmp375  /* pattern as ty=Integer */;
          _i5 = tmp377  /* pattern as ty=Integer */;
          _i6 = tmp379  /* pattern as ty=Integer */;
          _i7 = tmp381  /* pattern as ty=Integer */;
          _i8 = tmp383  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta384 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(((modelica_integer) 1) + _i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta384;
          goto tmp3_done;
        }
        case 22: {
          modelica_metatype tmpMeta385;
          modelica_integer tmp386;
          modelica_metatype tmpMeta387;
          modelica_integer tmp388;
          modelica_metatype tmpMeta389;
          modelica_integer tmp390;
          modelica_metatype tmpMeta391;
          modelica_integer tmp392;
          modelica_metatype tmpMeta393;
          modelica_integer tmp394;
          modelica_metatype tmpMeta395;
          modelica_integer tmp396;
          modelica_metatype tmpMeta397;
          modelica_integer tmp398;
          modelica_metatype tmpMeta399;
          modelica_integer tmp400;
          modelica_metatype tmpMeta401;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,1) == 0) goto tmp3_end;
          tmpMeta385 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp386 = mmc_unbox_integer(tmpMeta385);
          tmpMeta387 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp388 = mmc_unbox_integer(tmpMeta387);
          tmpMeta389 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp390 = mmc_unbox_integer(tmpMeta389);
          tmpMeta391 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp392 = mmc_unbox_integer(tmpMeta391);
          tmpMeta393 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp394 = mmc_unbox_integer(tmpMeta393);
          tmpMeta395 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp396 = mmc_unbox_integer(tmpMeta395);
          tmpMeta397 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp398 = mmc_unbox_integer(tmpMeta397);
          tmpMeta399 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp400 = mmc_unbox_integer(tmpMeta399);
          _i1 = tmp386  /* pattern as ty=Integer */;
          _i2 = tmp388  /* pattern as ty=Integer */;
          _i3 = tmp390  /* pattern as ty=Integer */;
          _i4 = tmp392  /* pattern as ty=Integer */;
          _i5 = tmp394  /* pattern as ty=Integer */;
          _i6 = tmp396  /* pattern as ty=Integer */;
          _i7 = tmp398  /* pattern as ty=Integer */;
          _i8 = tmp400  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta401 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(((modelica_integer) 1) + _i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta401;
          goto tmp3_done;
        }
        case 23: {
          modelica_metatype tmpMeta402;
          modelica_integer tmp403;
          modelica_metatype tmpMeta404;
          modelica_integer tmp405;
          modelica_metatype tmpMeta406;
          modelica_integer tmp407;
          modelica_metatype tmpMeta408;
          modelica_integer tmp409;
          modelica_metatype tmpMeta410;
          modelica_integer tmp411;
          modelica_metatype tmpMeta412;
          modelica_integer tmp413;
          modelica_metatype tmpMeta414;
          modelica_integer tmp415;
          modelica_metatype tmpMeta416;
          modelica_integer tmp417;
          modelica_metatype tmpMeta418;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,23,1) == 0) goto tmp3_end;
          tmpMeta402 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp403 = mmc_unbox_integer(tmpMeta402);
          tmpMeta404 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp405 = mmc_unbox_integer(tmpMeta404);
          tmpMeta406 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp407 = mmc_unbox_integer(tmpMeta406);
          tmpMeta408 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp409 = mmc_unbox_integer(tmpMeta408);
          tmpMeta410 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp411 = mmc_unbox_integer(tmpMeta410);
          tmpMeta412 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp413 = mmc_unbox_integer(tmpMeta412);
          tmpMeta414 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp415 = mmc_unbox_integer(tmpMeta414);
          tmpMeta416 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp417 = mmc_unbox_integer(tmpMeta416);
          _i1 = tmp403  /* pattern as ty=Integer */;
          _i2 = tmp405  /* pattern as ty=Integer */;
          _i3 = tmp407  /* pattern as ty=Integer */;
          _i4 = tmp409  /* pattern as ty=Integer */;
          _i5 = tmp411  /* pattern as ty=Integer */;
          _i6 = tmp413  /* pattern as ty=Integer */;
          _i7 = tmp415  /* pattern as ty=Integer */;
          _i8 = tmp417  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta418 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(((modelica_integer) 1) + _i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta418;
          goto tmp3_done;
        }
        case 24: {
          modelica_metatype tmpMeta419;
          modelica_integer tmp420;
          modelica_metatype tmpMeta421;
          modelica_integer tmp422;
          modelica_metatype tmpMeta423;
          modelica_integer tmp424;
          modelica_metatype tmpMeta425;
          modelica_integer tmp426;
          modelica_metatype tmpMeta427;
          modelica_integer tmp428;
          modelica_metatype tmpMeta429;
          modelica_integer tmp430;
          modelica_metatype tmpMeta431;
          modelica_integer tmp432;
          modelica_metatype tmpMeta433;
          modelica_integer tmp434;
          modelica_metatype tmpMeta435;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,1) == 0) goto tmp3_end;
          tmpMeta419 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp420 = mmc_unbox_integer(tmpMeta419);
          tmpMeta421 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp422 = mmc_unbox_integer(tmpMeta421);
          tmpMeta423 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp424 = mmc_unbox_integer(tmpMeta423);
          tmpMeta425 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp426 = mmc_unbox_integer(tmpMeta425);
          tmpMeta427 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp428 = mmc_unbox_integer(tmpMeta427);
          tmpMeta429 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp430 = mmc_unbox_integer(tmpMeta429);
          tmpMeta431 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp432 = mmc_unbox_integer(tmpMeta431);
          tmpMeta433 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp434 = mmc_unbox_integer(tmpMeta433);
          _i1 = tmp420  /* pattern as ty=Integer */;
          _i2 = tmp422  /* pattern as ty=Integer */;
          _i3 = tmp424  /* pattern as ty=Integer */;
          _i4 = tmp426  /* pattern as ty=Integer */;
          _i5 = tmp428  /* pattern as ty=Integer */;
          _i6 = tmp430  /* pattern as ty=Integer */;
          _i7 = tmp432  /* pattern as ty=Integer */;
          _i8 = tmp434  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta435 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(((modelica_integer) 1) + _i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta435;
          goto tmp3_done;
        }
        case 25: {
          modelica_metatype tmpMeta436;
          modelica_integer tmp437;
          modelica_metatype tmpMeta438;
          modelica_integer tmp439;
          modelica_metatype tmpMeta440;
          modelica_integer tmp441;
          modelica_metatype tmpMeta442;
          modelica_integer tmp443;
          modelica_metatype tmpMeta444;
          modelica_integer tmp445;
          modelica_metatype tmpMeta446;
          modelica_integer tmp447;
          modelica_metatype tmpMeta448;
          modelica_integer tmp449;
          modelica_metatype tmpMeta450;
          modelica_integer tmp451;
          modelica_metatype tmpMeta452;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,25,1) == 0) goto tmp3_end;
          tmpMeta436 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp437 = mmc_unbox_integer(tmpMeta436);
          tmpMeta438 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp439 = mmc_unbox_integer(tmpMeta438);
          tmpMeta440 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp441 = mmc_unbox_integer(tmpMeta440);
          tmpMeta442 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp443 = mmc_unbox_integer(tmpMeta442);
          tmpMeta444 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp445 = mmc_unbox_integer(tmpMeta444);
          tmpMeta446 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp447 = mmc_unbox_integer(tmpMeta446);
          tmpMeta448 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp449 = mmc_unbox_integer(tmpMeta448);
          tmpMeta450 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp451 = mmc_unbox_integer(tmpMeta450);
          _i1 = tmp437  /* pattern as ty=Integer */;
          _i2 = tmp439  /* pattern as ty=Integer */;
          _i3 = tmp441  /* pattern as ty=Integer */;
          _i4 = tmp443  /* pattern as ty=Integer */;
          _i5 = tmp445  /* pattern as ty=Integer */;
          _i6 = tmp447  /* pattern as ty=Integer */;
          _i7 = tmp449  /* pattern as ty=Integer */;
          _i8 = tmp451  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta452 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(((modelica_integer) 1) + _i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta452;
          goto tmp3_done;
        }
        case 26: {
          modelica_metatype tmpMeta453;
          modelica_integer tmp454;
          modelica_metatype tmpMeta455;
          modelica_integer tmp456;
          modelica_metatype tmpMeta457;
          modelica_integer tmp458;
          modelica_metatype tmpMeta459;
          modelica_integer tmp460;
          modelica_metatype tmpMeta461;
          modelica_integer tmp462;
          modelica_metatype tmpMeta463;
          modelica_integer tmp464;
          modelica_metatype tmpMeta465;
          modelica_integer tmp466;
          modelica_metatype tmpMeta467;
          modelica_integer tmp468;
          modelica_metatype tmpMeta469;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,1) == 0) goto tmp3_end;
          tmpMeta453 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp454 = mmc_unbox_integer(tmpMeta453);
          tmpMeta455 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp456 = mmc_unbox_integer(tmpMeta455);
          tmpMeta457 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp458 = mmc_unbox_integer(tmpMeta457);
          tmpMeta459 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp460 = mmc_unbox_integer(tmpMeta459);
          tmpMeta461 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp462 = mmc_unbox_integer(tmpMeta461);
          tmpMeta463 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp464 = mmc_unbox_integer(tmpMeta463);
          tmpMeta465 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp466 = mmc_unbox_integer(tmpMeta465);
          tmpMeta467 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp468 = mmc_unbox_integer(tmpMeta467);
          _i1 = tmp454  /* pattern as ty=Integer */;
          _i2 = tmp456  /* pattern as ty=Integer */;
          _i3 = tmp458  /* pattern as ty=Integer */;
          _i4 = tmp460  /* pattern as ty=Integer */;
          _i5 = tmp462  /* pattern as ty=Integer */;
          _i6 = tmp464  /* pattern as ty=Integer */;
          _i7 = tmp466  /* pattern as ty=Integer */;
          _i8 = tmp468  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta469 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(((modelica_integer) 1) + _i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta469;
          goto tmp3_done;
        }
        case 27: {
          modelica_metatype tmpMeta470;
          modelica_integer tmp471;
          modelica_metatype tmpMeta472;
          modelica_integer tmp473;
          modelica_metatype tmpMeta474;
          modelica_integer tmp475;
          modelica_metatype tmpMeta476;
          modelica_integer tmp477;
          modelica_metatype tmpMeta478;
          modelica_integer tmp479;
          modelica_metatype tmpMeta480;
          modelica_integer tmp481;
          modelica_metatype tmpMeta482;
          modelica_integer tmp483;
          modelica_metatype tmpMeta484;
          modelica_integer tmp485;
          modelica_metatype tmpMeta486;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,1) == 0) goto tmp3_end;
          tmpMeta470 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp471 = mmc_unbox_integer(tmpMeta470);
          tmpMeta472 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp473 = mmc_unbox_integer(tmpMeta472);
          tmpMeta474 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp475 = mmc_unbox_integer(tmpMeta474);
          tmpMeta476 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp477 = mmc_unbox_integer(tmpMeta476);
          tmpMeta478 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp479 = mmc_unbox_integer(tmpMeta478);
          tmpMeta480 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp481 = mmc_unbox_integer(tmpMeta480);
          tmpMeta482 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp483 = mmc_unbox_integer(tmpMeta482);
          tmpMeta484 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp485 = mmc_unbox_integer(tmpMeta484);
          _i1 = tmp471  /* pattern as ty=Integer */;
          _i2 = tmp473  /* pattern as ty=Integer */;
          _i3 = tmp475  /* pattern as ty=Integer */;
          _i4 = tmp477  /* pattern as ty=Integer */;
          _i5 = tmp479  /* pattern as ty=Integer */;
          _i6 = tmp481  /* pattern as ty=Integer */;
          _i7 = tmp483  /* pattern as ty=Integer */;
          _i8 = tmp485  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta486 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(((modelica_integer) 1) + _i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta486;
          goto tmp3_done;
        }
        case 28: {
          modelica_metatype tmpMeta487;
          modelica_integer tmp488;
          modelica_metatype tmpMeta489;
          modelica_integer tmp490;
          modelica_metatype tmpMeta491;
          modelica_integer tmp492;
          modelica_metatype tmpMeta493;
          modelica_integer tmp494;
          modelica_metatype tmpMeta495;
          modelica_integer tmp496;
          modelica_metatype tmpMeta497;
          modelica_integer tmp498;
          modelica_metatype tmpMeta499;
          modelica_integer tmp500;
          modelica_metatype tmpMeta501;
          modelica_integer tmp502;
          modelica_metatype tmpMeta503;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,28,1) == 0) goto tmp3_end;
          tmpMeta487 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp488 = mmc_unbox_integer(tmpMeta487);
          tmpMeta489 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp490 = mmc_unbox_integer(tmpMeta489);
          tmpMeta491 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp492 = mmc_unbox_integer(tmpMeta491);
          tmpMeta493 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp494 = mmc_unbox_integer(tmpMeta493);
          tmpMeta495 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp496 = mmc_unbox_integer(tmpMeta495);
          tmpMeta497 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp498 = mmc_unbox_integer(tmpMeta497);
          tmpMeta499 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp500 = mmc_unbox_integer(tmpMeta499);
          tmpMeta501 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp502 = mmc_unbox_integer(tmpMeta501);
          _i1 = tmp488  /* pattern as ty=Integer */;
          _i2 = tmp490  /* pattern as ty=Integer */;
          _i3 = tmp492  /* pattern as ty=Integer */;
          _i4 = tmp494  /* pattern as ty=Integer */;
          _i5 = tmp496  /* pattern as ty=Integer */;
          _i6 = tmp498  /* pattern as ty=Integer */;
          _i7 = tmp500  /* pattern as ty=Integer */;
          _i8 = tmp502  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta503 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(((modelica_integer) 1) + _i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta503;
          goto tmp3_done;
        }
        case 29: {
          modelica_metatype tmpMeta504;
          modelica_integer tmp505;
          modelica_metatype tmpMeta506;
          modelica_integer tmp507;
          modelica_metatype tmpMeta508;
          modelica_integer tmp509;
          modelica_metatype tmpMeta510;
          modelica_integer tmp511;
          modelica_metatype tmpMeta512;
          modelica_integer tmp513;
          modelica_metatype tmpMeta514;
          modelica_integer tmp515;
          modelica_metatype tmpMeta516;
          modelica_integer tmp517;
          modelica_metatype tmpMeta518;
          modelica_integer tmp519;
          modelica_metatype tmpMeta520;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,29,1) == 0) goto tmp3_end;
          tmpMeta504 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp505 = mmc_unbox_integer(tmpMeta504);
          tmpMeta506 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp507 = mmc_unbox_integer(tmpMeta506);
          tmpMeta508 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp509 = mmc_unbox_integer(tmpMeta508);
          tmpMeta510 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp511 = mmc_unbox_integer(tmpMeta510);
          tmpMeta512 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp513 = mmc_unbox_integer(tmpMeta512);
          tmpMeta514 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp515 = mmc_unbox_integer(tmpMeta514);
          tmpMeta516 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp517 = mmc_unbox_integer(tmpMeta516);
          tmpMeta518 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp519 = mmc_unbox_integer(tmpMeta518);
          _i1 = tmp505  /* pattern as ty=Integer */;
          _i2 = tmp507  /* pattern as ty=Integer */;
          _i3 = tmp509  /* pattern as ty=Integer */;
          _i4 = tmp511  /* pattern as ty=Integer */;
          _i5 = tmp513  /* pattern as ty=Integer */;
          _i6 = tmp515  /* pattern as ty=Integer */;
          _i7 = tmp517  /* pattern as ty=Integer */;
          _i8 = tmp519  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta520 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(((modelica_integer) 1) + _i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta520;
          goto tmp3_done;
        }
        case 30: {
          modelica_metatype tmpMeta521;
          modelica_integer tmp522;
          modelica_metatype tmpMeta523;
          modelica_integer tmp524;
          modelica_metatype tmpMeta525;
          modelica_integer tmp526;
          modelica_metatype tmpMeta527;
          modelica_integer tmp528;
          modelica_metatype tmpMeta529;
          modelica_integer tmp530;
          modelica_metatype tmpMeta531;
          modelica_integer tmp532;
          modelica_metatype tmpMeta533;
          modelica_integer tmp534;
          modelica_metatype tmpMeta535;
          modelica_integer tmp536;
          modelica_metatype tmpMeta537;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,30,1) == 0) goto tmp3_end;
          tmpMeta521 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp522 = mmc_unbox_integer(tmpMeta521);
          tmpMeta523 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp524 = mmc_unbox_integer(tmpMeta523);
          tmpMeta525 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp526 = mmc_unbox_integer(tmpMeta525);
          tmpMeta527 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp528 = mmc_unbox_integer(tmpMeta527);
          tmpMeta529 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp530 = mmc_unbox_integer(tmpMeta529);
          tmpMeta531 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp532 = mmc_unbox_integer(tmpMeta531);
          tmpMeta533 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp534 = mmc_unbox_integer(tmpMeta533);
          tmpMeta535 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp536 = mmc_unbox_integer(tmpMeta535);
          _i1 = tmp522  /* pattern as ty=Integer */;
          _i2 = tmp524  /* pattern as ty=Integer */;
          _i3 = tmp526  /* pattern as ty=Integer */;
          _i4 = tmp528  /* pattern as ty=Integer */;
          _i5 = tmp530  /* pattern as ty=Integer */;
          _i6 = tmp532  /* pattern as ty=Integer */;
          _i7 = tmp534  /* pattern as ty=Integer */;
          _i8 = tmp536  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta537 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(((modelica_integer) 1) + _i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta537;
          goto tmp3_done;
        }
        case 31: {
          modelica_metatype tmpMeta538;
          modelica_integer tmp539;
          modelica_metatype tmpMeta540;
          modelica_integer tmp541;
          modelica_metatype tmpMeta542;
          modelica_integer tmp543;
          modelica_metatype tmpMeta544;
          modelica_integer tmp545;
          modelica_metatype tmpMeta546;
          modelica_integer tmp547;
          modelica_metatype tmpMeta548;
          modelica_integer tmp549;
          modelica_metatype tmpMeta550;
          modelica_integer tmp551;
          modelica_metatype tmpMeta552;
          modelica_integer tmp553;
          modelica_metatype tmpMeta554;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,31,1) == 0) goto tmp3_end;
          tmpMeta538 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp539 = mmc_unbox_integer(tmpMeta538);
          tmpMeta540 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp541 = mmc_unbox_integer(tmpMeta540);
          tmpMeta542 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp543 = mmc_unbox_integer(tmpMeta542);
          tmpMeta544 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp545 = mmc_unbox_integer(tmpMeta544);
          tmpMeta546 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp547 = mmc_unbox_integer(tmpMeta546);
          tmpMeta548 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp549 = mmc_unbox_integer(tmpMeta548);
          tmpMeta550 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp551 = mmc_unbox_integer(tmpMeta550);
          tmpMeta552 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp553 = mmc_unbox_integer(tmpMeta552);
          _i1 = tmp539  /* pattern as ty=Integer */;
          _i2 = tmp541  /* pattern as ty=Integer */;
          _i3 = tmp543  /* pattern as ty=Integer */;
          _i4 = tmp545  /* pattern as ty=Integer */;
          _i5 = tmp547  /* pattern as ty=Integer */;
          _i6 = tmp549  /* pattern as ty=Integer */;
          _i7 = tmp551  /* pattern as ty=Integer */;
          _i8 = tmp553  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta554 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(((modelica_integer) 1) + _i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta1 = tmpMeta554;
          goto tmp3_done;
        }
        case 32: {
          
          /* Pattern matching succeeded */
          fputs(MMC_STRINGDATA(_OMC_LIT202),stdout);
          tmpMeta1 = _inTpl;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outTpl = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outTpl;
}

static modelica_metatype closure7_BackendDAEOptimize_traversecountOperationsExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inTuple, modelica_metatype tmp10)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_traversecountOperationsExp(thData, inExp, shared, inTuple, tmp10);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_countOperationsInFunction(threadData_t *threadData, modelica_metatype _elemLst, modelica_metatype _shared, modelica_metatype _inTpl)
{
  modelica_metatype _outTpl = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outTpl has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _elemLst;
    {
      modelica_metatype _tpl = NULL;
      modelica_metatype _exp1 = NULL;
      modelica_metatype _exp2 = NULL;
      modelica_metatype _stmts = NULL;
      modelica_metatype _rest = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _tpl has no default value.
      // _exp1 has no default value.
      // _exp2 has no default value.
      // _stmts has no default value.
      // _rest has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 5; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          tmp4 += 4; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta1 = _inTpl;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta11;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,16,2) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
          
          _stmts = tmpMeta9;
          _rest = tmpMeta7;
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta11 = mmc_mk_box1(0, _shared);
          omc_DAEUtil_traverseDAEEquationsStmts(threadData, _stmts, (modelica_fnptr) mmc_mk_box2(0,closure7_BackendDAEOptimize_traversecountOperationsExp,tmpMeta11), _inTpl ,&_tpl);
          tmpMeta1 = omc_BackendDAEOptimize_countOperationsInFunction(threadData, _rest, _shared, _tpl);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta12 = MMC_CAR(tmp4_1);
          tmpMeta13 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,3,3) == 0) goto tmp3_end;
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 3));
          
          _exp1 = tmpMeta14;
          _exp2 = tmpMeta15;
          _rest = tmpMeta13;
          tmp4 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
          omc_BackendDAEOptimize_traversecountOperationsExp(threadData, _exp1, _shared, _inTpl ,&_tpl);

          omc_BackendDAEOptimize_traversecountOperationsExp(threadData, _exp2, _shared, _tpl ,&_tpl);
          tmpMeta1 = omc_BackendDAEOptimize_countOperationsInFunction(threadData, _rest, _shared, _tpl);
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta16 = MMC_CAR(tmp4_1);
          tmpMeta17 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,8,3) == 0) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 3));
          
          _exp1 = tmpMeta18;
          _exp2 = tmpMeta19;
          _rest = tmpMeta17;
          /* Pattern matching succeeded */
          omc_BackendDAEOptimize_traversecountOperationsExp(threadData, _exp1, _shared, _inTpl ,&_tpl);

          omc_BackendDAEOptimize_traversecountOperationsExp(threadData, _exp2, _shared, _tpl ,&_tpl);
          tmpMeta1 = omc_BackendDAEOptimize_countOperationsInFunction(threadData, _rest, _shared, _tpl);
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta20 = MMC_CAR(tmp4_1);
          tmpMeta21 = MMC_CDR(tmp4_1);
          _rest = tmpMeta21;
          /* Pattern matching succeeded */
          tmpMeta1 = omc_BackendDAEOptimize_countOperationsInFunction(threadData, _rest, _shared, _inTpl);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 5) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outTpl = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outTpl;
}

static modelica_metatype closure8_BackendDAEOptimize_countOperationsExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inTpl, modelica_metatype tmp33)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_countOperationsExp(thData, inExp, shared, inTpl, tmp33);
}static modelica_metatype closure9_BackendDAEOptimize_countOperationsExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inTpl, modelica_metatype tmp36)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_countOperationsExp(thData, inExp, shared, inTpl, tmp36);
}static modelica_metatype closure10_BackendDAEOptimize_countOperationsExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inTpl, modelica_metatype tmp39)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_countOperationsExp(thData, inExp, shared, inTpl, tmp39);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traversecountOperationsExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _shared, modelica_metatype _inTuple, modelica_metatype *out_outTuple)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _outTuple = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _outTuple has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inExp;
    tmp4_2 = _inTuple;
    {
      modelica_metatype _path = NULL;
      modelica_metatype _e = NULL;
      modelica_metatype _cond = NULL;
      modelica_metatype _exp1 = NULL;
      modelica_metatype _exp2 = NULL;
      modelica_metatype _func = NULL;
      modelica_integer _i1;
      modelica_integer _i2;
      modelica_integer _i3;
      modelica_integer _i4;
      modelica_integer _i5;
      modelica_integer _i6;
      modelica_integer _i7;
      modelica_integer _i8;
      modelica_metatype _tpl = NULL;
      modelica_metatype _op = NULL;
      modelica_string _opName = NULL;
      modelica_metatype _expLst = NULL;
      modelica_metatype _elemLst = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _path has no default value.
      // _e has no default value.
      // _cond has no default value.
      // _exp1 has no default value.
      // _exp2 has no default value.
      // _func has no default value.
      // _i1 has no default value.
      // _i2 has no default value.
      // _i3 has no default value.
      // _i4 has no default value.
      // _i5 has no default value.
      // _i6 has no default value.
      // _i7 has no default value.
      // _i8 has no default value.
      // _tpl has no default value.
      // _op has no default value.
      // _opName has no default value.
      // _expLst has no default value.
      // _elemLst has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 16; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _e = tmp4_1;
          _op = tmpMeta6;
          tmp4 += 14; /* Pattern matching succeeded; we may skip some cases if we fail */
          _tpl = omc_BackendDAEOptimize_countOperator(threadData, _op, _inTuple);
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _tpl;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _e = tmp4_1;
          _op = tmpMeta7;
          tmp4 += 13; /* Pattern matching succeeded; we may skip some cases if we fail */
          _tpl = omc_BackendDAEOptimize_countOperator(threadData, _op, _inTuple);
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _tpl;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _e = tmp4_1;
          _op = tmpMeta8;
          tmp4 += 12; /* Pattern matching succeeded; we may skip some cases if we fail */
          _tpl = omc_BackendDAEOptimize_countOperator(threadData, _op, _inTuple);
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _tpl;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,2) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _e = tmp4_1;
          _op = tmpMeta9;
          tmp4 += 11; /* Pattern matching succeeded; we may skip some cases if we fail */
          _tpl = omc_BackendDAEOptimize_countOperator(threadData, _op, _inTuple);
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _tpl;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,5) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _e = tmp4_1;
          _op = tmpMeta10;
          tmp4 += 10; /* Pattern matching succeeded; we may skip some cases if we fail */
          _tpl = omc_BackendDAEOptimize_countOperator(threadData, _op, _inTuple);
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _tpl;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_integer tmp16;
          modelica_metatype tmpMeta17;
          modelica_integer tmp18;
          modelica_metatype tmpMeta19;
          modelica_integer tmp20;
          modelica_metatype tmpMeta21;
          modelica_integer tmp22;
          modelica_metatype tmpMeta23;
          modelica_integer tmp24;
          modelica_metatype tmpMeta25;
          modelica_integer tmp26;
          modelica_metatype tmpMeta27;
          modelica_integer tmp28;
          modelica_metatype tmpMeta29;
          modelica_integer tmp30;
          modelica_metatype tmpMeta31;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          
          _e = tmp4_1;
          _cond = tmpMeta11;
          _exp1 = tmpMeta12;
          _exp2 = tmpMeta13;
          tmp4 += 9; /* Pattern matching succeeded; we may skip some cases if we fail */
          omc_BackendDAEOptimize_traversecountOperationsExp(threadData, _exp1, _shared, _inTuple ,&_tpl);

          omc_BackendDAEOptimize_traversecountOperationsExp(threadData, _exp2, _shared, _tpl ,&_tpl);

          /* Pattern-matching tuple assignment, wild first pattern */
          omc_BackendDAEOptimize_traversecountOperationsExp(threadData, _cond, _shared, _tpl, &tmpMeta14);
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 1));
          tmp16 = mmc_unbox_integer(tmpMeta15);
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
          tmp18 = mmc_unbox_integer(tmpMeta17);
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
          tmp20 = mmc_unbox_integer(tmpMeta19);
          tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
          tmp22 = mmc_unbox_integer(tmpMeta21);
          tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
          tmp24 = mmc_unbox_integer(tmpMeta23);
          tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
          tmp26 = mmc_unbox_integer(tmpMeta25);
          tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 7));
          tmp28 = mmc_unbox_integer(tmpMeta27);
          tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 8));
          tmp30 = mmc_unbox_integer(tmpMeta29);
          _i1 = tmp16  /* pattern as ty=Integer */;
          _i2 = tmp18  /* pattern as ty=Integer */;
          _i3 = tmp20  /* pattern as ty=Integer */;
          _i4 = tmp22  /* pattern as ty=Integer */;
          _i5 = tmp24  /* pattern as ty=Integer */;
          _i6 = tmp26  /* pattern as ty=Integer */;
          _i7 = tmp28  /* pattern as ty=Integer */;
          _i8 = tmp30  /* pattern as ty=Integer */;
          tmpMeta31 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(((modelica_integer) 1) + _i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = tmpMeta31;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta34;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,4) == 0) goto tmp3_end;
          tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _e = tmp4_1;
          _expLst = tmpMeta32;
          tmp4 += 8; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta34 = mmc_mk_box1(0, _shared);
          omc_Expression_traverseExpList(threadData, _expLst, (modelica_fnptr) mmc_mk_box2(0,closure8_BackendDAEOptimize_countOperationsExp,tmpMeta34), _inTuple ,&_tpl);
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _tpl;
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta37;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
          tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          
          _e = tmp4_1;
          _expLst = tmpMeta35;
          tmp4 += 7; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta37 = mmc_mk_box1(0, _shared);
          omc_Expression_traverseExpList(threadData, _expLst, (modelica_fnptr) mmc_mk_box2(0,closure9_BackendDAEOptimize_countOperationsExp,tmpMeta37), _inTuple ,&_tpl);
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _tpl;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta40;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,1) == 0) goto tmp3_end;
          tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _e = tmp4_1;
          _expLst = tmpMeta38;
          tmp4 += 6; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta40 = mmc_mk_box1(0, _shared);
          omc_Expression_traverseExpList(threadData, _expLst, (modelica_fnptr) mmc_mk_box2(0,closure10_BackendDAEOptimize_countOperationsExp,tmpMeta40), _inTuple ,&_tpl);
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _tpl;
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          modelica_integer tmp44;
          modelica_metatype tmpMeta45;
          modelica_integer tmp46;
          modelica_metatype tmpMeta47;
          modelica_integer tmp48;
          modelica_metatype tmpMeta49;
          modelica_integer tmp50;
          modelica_metatype tmpMeta51;
          modelica_integer tmp52;
          modelica_metatype tmpMeta53;
          modelica_integer tmp54;
          modelica_metatype tmpMeta55;
          modelica_integer tmp56;
          modelica_metatype tmpMeta57;
          modelica_integer tmp58;
          modelica_metatype tmpMeta59;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta41 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta41,1,1) == 0) goto tmp3_end;
          tmpMeta42 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta41), 2));
          tmpMeta43 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp44 = mmc_unbox_integer(tmpMeta43);
          tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp46 = mmc_unbox_integer(tmpMeta45);
          tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp48 = mmc_unbox_integer(tmpMeta47);
          tmpMeta49 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp50 = mmc_unbox_integer(tmpMeta49);
          tmpMeta51 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp52 = mmc_unbox_integer(tmpMeta51);
          tmpMeta53 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp54 = mmc_unbox_integer(tmpMeta53);
          tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp56 = mmc_unbox_integer(tmpMeta55);
          tmpMeta57 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp58 = mmc_unbox_integer(tmpMeta57);
          _e = tmp4_1;
          _opName = tmpMeta42;
          _i1 = tmp44  /* pattern as ty=Integer */;
          _i2 = tmp46  /* pattern as ty=Integer */;
          _i3 = tmp48  /* pattern as ty=Integer */;
          _i4 = tmp50  /* pattern as ty=Integer */;
          _i5 = tmp52  /* pattern as ty=Integer */;
          _i6 = tmp54  /* pattern as ty=Integer */;
          _i7 = tmp56  /* pattern as ty=Integer */;
          _i8 = tmp58  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(((stringEqual(_opName, _OMC_LIT203)) || (stringEqual(_opName, _OMC_LIT204))) || (stringEqual(_opName, _OMC_LIT205)))) goto tmp3_end;
          tmpMeta59 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(((modelica_integer) 1) + _i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = tmpMeta59;
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta60;
          modelica_metatype tmpMeta61;
          modelica_metatype tmpMeta62;
          modelica_integer tmp63;
          modelica_metatype tmpMeta64;
          modelica_integer tmp65;
          modelica_metatype tmpMeta66;
          modelica_integer tmp67;
          modelica_metatype tmpMeta68;
          modelica_integer tmp69;
          modelica_metatype tmpMeta70;
          modelica_integer tmp71;
          modelica_metatype tmpMeta72;
          modelica_integer tmp73;
          modelica_metatype tmpMeta74;
          modelica_integer tmp75;
          modelica_metatype tmpMeta76;
          modelica_integer tmp77;
          modelica_metatype tmpMeta78;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta60 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta60,1,1) == 0) goto tmp3_end;
          tmpMeta61 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta60), 2));
          if (3 != MMC_STRLEN(tmpMeta61) || strcmp(MMC_STRINGDATA(_OMC_LIT20), MMC_STRINGDATA(tmpMeta61)) != 0) goto tmp3_end;
          tmpMeta62 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp63 = mmc_unbox_integer(tmpMeta62);
          tmpMeta64 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp65 = mmc_unbox_integer(tmpMeta64);
          tmpMeta66 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp67 = mmc_unbox_integer(tmpMeta66);
          tmpMeta68 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp69 = mmc_unbox_integer(tmpMeta68);
          tmpMeta70 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp71 = mmc_unbox_integer(tmpMeta70);
          tmpMeta72 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp73 = mmc_unbox_integer(tmpMeta72);
          tmpMeta74 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp75 = mmc_unbox_integer(tmpMeta74);
          tmpMeta76 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp77 = mmc_unbox_integer(tmpMeta76);
          _e = tmp4_1;
          _i1 = tmp63  /* pattern as ty=Integer */;
          _i2 = tmp65  /* pattern as ty=Integer */;
          _i3 = tmp67  /* pattern as ty=Integer */;
          _i4 = tmp69  /* pattern as ty=Integer */;
          _i5 = tmp71  /* pattern as ty=Integer */;
          _i6 = tmp73  /* pattern as ty=Integer */;
          _i7 = tmp75  /* pattern as ty=Integer */;
          _i8 = tmp77  /* pattern as ty=Integer */;
          tmp4 += 3; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta78 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(_i8));
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = tmpMeta78;
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta79;
          modelica_metatype tmpMeta80;
          modelica_metatype tmpMeta81;
          modelica_integer tmp82;
          modelica_metatype tmpMeta83;
          modelica_integer tmp84;
          modelica_metatype tmpMeta85;
          modelica_integer tmp86;
          modelica_metatype tmpMeta87;
          modelica_integer tmp88;
          modelica_metatype tmpMeta89;
          modelica_integer tmp90;
          modelica_metatype tmpMeta91;
          modelica_integer tmp92;
          modelica_metatype tmpMeta93;
          modelica_integer tmp94;
          modelica_metatype tmpMeta95;
          modelica_integer tmp96;
          modelica_metatype tmpMeta97;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta79 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta79,1,1) == 0) goto tmp3_end;
          tmpMeta80 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta79), 2));
          if (3 != MMC_STRLEN(tmpMeta80) || strcmp(MMC_STRINGDATA(_OMC_LIT206), MMC_STRINGDATA(tmpMeta80)) != 0) goto tmp3_end;
          tmpMeta81 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp82 = mmc_unbox_integer(tmpMeta81);
          tmpMeta83 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp84 = mmc_unbox_integer(tmpMeta83);
          tmpMeta85 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp86 = mmc_unbox_integer(tmpMeta85);
          tmpMeta87 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp88 = mmc_unbox_integer(tmpMeta87);
          tmpMeta89 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp90 = mmc_unbox_integer(tmpMeta89);
          tmpMeta91 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp92 = mmc_unbox_integer(tmpMeta91);
          tmpMeta93 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp94 = mmc_unbox_integer(tmpMeta93);
          tmpMeta95 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp96 = mmc_unbox_integer(tmpMeta95);
          _e = tmp4_1;
          _i1 = tmp82  /* pattern as ty=Integer */;
          _i2 = tmp84  /* pattern as ty=Integer */;
          _i3 = tmp86  /* pattern as ty=Integer */;
          _i4 = tmp88  /* pattern as ty=Integer */;
          _i5 = tmp90  /* pattern as ty=Integer */;
          _i6 = tmp92  /* pattern as ty=Integer */;
          _i7 = tmp94  /* pattern as ty=Integer */;
          _i8 = tmp96  /* pattern as ty=Integer */;
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta97 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(((modelica_integer) 1) + _i7), mmc_mk_integer(_i8));
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = tmpMeta97;
          goto tmp3_done;
        }
        case 12: {
          modelica_metatype tmpMeta98;
          modelica_metatype tmpMeta99;
          modelica_metatype tmpMeta100;
          modelica_integer tmp101;
          modelica_metatype tmpMeta102;
          modelica_integer tmp103;
          modelica_metatype tmpMeta104;
          modelica_integer tmp105;
          modelica_metatype tmpMeta106;
          modelica_integer tmp107;
          modelica_metatype tmpMeta108;
          modelica_integer tmp109;
          modelica_metatype tmpMeta110;
          modelica_integer tmp111;
          modelica_metatype tmpMeta112;
          modelica_integer tmp113;
          modelica_metatype tmpMeta114;
          modelica_integer tmp115;
          modelica_metatype tmpMeta116;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta98 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta98,1,1) == 0) goto tmp3_end;
          tmpMeta99 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta98), 2));
          if (3 != MMC_STRLEN(tmpMeta99) || strcmp(MMC_STRINGDATA(_OMC_LIT147), MMC_STRINGDATA(tmpMeta99)) != 0) goto tmp3_end;
          tmpMeta100 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp101 = mmc_unbox_integer(tmpMeta100);
          tmpMeta102 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp103 = mmc_unbox_integer(tmpMeta102);
          tmpMeta104 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp105 = mmc_unbox_integer(tmpMeta104);
          tmpMeta106 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp107 = mmc_unbox_integer(tmpMeta106);
          tmpMeta108 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp109 = mmc_unbox_integer(tmpMeta108);
          tmpMeta110 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp111 = mmc_unbox_integer(tmpMeta110);
          tmpMeta112 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp113 = mmc_unbox_integer(tmpMeta112);
          tmpMeta114 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp115 = mmc_unbox_integer(tmpMeta114);
          _e = tmp4_1;
          _i1 = tmp101  /* pattern as ty=Integer */;
          _i2 = tmp103  /* pattern as ty=Integer */;
          _i3 = tmp105  /* pattern as ty=Integer */;
          _i4 = tmp107  /* pattern as ty=Integer */;
          _i5 = tmp109  /* pattern as ty=Integer */;
          _i6 = tmp111  /* pattern as ty=Integer */;
          _i7 = tmp113  /* pattern as ty=Integer */;
          _i8 = tmp115  /* pattern as ty=Integer */;
          tmp4 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta116 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(((modelica_integer) 1) + _i8));
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = tmpMeta116;
          goto tmp3_done;
        }
        case 13: {
          modelica_metatype tmpMeta117;
          modelica_metatype tmpMeta118;
          modelica_metatype tmpMeta119;
          modelica_integer tmp120;
          modelica_metatype tmpMeta121;
          modelica_integer tmp122;
          modelica_metatype tmpMeta123;
          modelica_integer tmp124;
          modelica_metatype tmpMeta125;
          modelica_integer tmp126;
          modelica_metatype tmpMeta127;
          modelica_integer tmp128;
          modelica_metatype tmpMeta129;
          modelica_integer tmp130;
          modelica_metatype tmpMeta131;
          modelica_integer tmp132;
          modelica_metatype tmpMeta133;
          modelica_integer tmp134;
          modelica_metatype tmpMeta135;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta117 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta117,1,1) == 0) goto tmp3_end;
          tmpMeta118 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta117), 2));
          if (8 != MMC_STRLEN(tmpMeta118) || strcmp(MMC_STRINGDATA(_OMC_LIT207), MMC_STRINGDATA(tmpMeta118)) != 0) goto tmp3_end;
          tmpMeta119 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp120 = mmc_unbox_integer(tmpMeta119);
          tmpMeta121 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp122 = mmc_unbox_integer(tmpMeta121);
          tmpMeta123 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp124 = mmc_unbox_integer(tmpMeta123);
          tmpMeta125 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp126 = mmc_unbox_integer(tmpMeta125);
          tmpMeta127 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp128 = mmc_unbox_integer(tmpMeta127);
          tmpMeta129 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp130 = mmc_unbox_integer(tmpMeta129);
          tmpMeta131 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp132 = mmc_unbox_integer(tmpMeta131);
          tmpMeta133 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp134 = mmc_unbox_integer(tmpMeta133);
          _e = tmp4_1;
          _i1 = tmp120  /* pattern as ty=Integer */;
          _i2 = tmp122  /* pattern as ty=Integer */;
          _i3 = tmp124  /* pattern as ty=Integer */;
          _i4 = tmp126  /* pattern as ty=Integer */;
          _i5 = tmp128  /* pattern as ty=Integer */;
          _i6 = tmp130  /* pattern as ty=Integer */;
          _i7 = tmp132  /* pattern as ty=Integer */;
          _i8 = tmp134  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta135 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(((modelica_integer) 1) + _i8));
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = tmpMeta135;
          goto tmp3_done;
        }
        case 14: {
          modelica_metatype tmpMeta136;
          modelica_metatype tmpMeta137;
          modelica_metatype tmpMeta138;
          modelica_integer tmp139;
          modelica_metatype tmpMeta140;
          modelica_integer tmp141;
          modelica_metatype tmpMeta142;
          modelica_integer tmp143;
          modelica_metatype tmpMeta144;
          modelica_integer tmp145;
          modelica_metatype tmpMeta146;
          modelica_integer tmp147;
          modelica_metatype tmpMeta148;
          modelica_integer tmp149;
          modelica_metatype tmpMeta150;
          modelica_integer tmp151;
          modelica_metatype tmpMeta152;
          modelica_integer tmp153;
          modelica_metatype tmpMeta154;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta136 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _e = tmp4_1;
          _path = tmpMeta136;
          /* Pattern matching succeeded */
          _func = omc_DAEUtil_getNamedFunction(threadData, _path, omc_BackendDAEUtil_getFunctions(threadData, _shared));

          _elemLst = omc_DAEUtil_getFunctionElements(threadData, _func);

          /* Pattern-matching assignment */
          tmpMeta137 = omc_BackendDAEOptimize_countOperationsInFunction(threadData, _elemLst, _shared, _inTuple);
          tmpMeta138 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta137), 1));
          tmp139 = mmc_unbox_integer(tmpMeta138);
          tmpMeta140 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta137), 2));
          tmp141 = mmc_unbox_integer(tmpMeta140);
          tmpMeta142 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta137), 3));
          tmp143 = mmc_unbox_integer(tmpMeta142);
          tmpMeta144 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta137), 4));
          tmp145 = mmc_unbox_integer(tmpMeta144);
          tmpMeta146 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta137), 5));
          tmp147 = mmc_unbox_integer(tmpMeta146);
          tmpMeta148 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta137), 6));
          tmp149 = mmc_unbox_integer(tmpMeta148);
          tmpMeta150 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta137), 7));
          tmp151 = mmc_unbox_integer(tmpMeta150);
          tmpMeta152 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta137), 8));
          tmp153 = mmc_unbox_integer(tmpMeta152);
          _i1 = tmp139  /* pattern as ty=Integer */;
          _i2 = tmp141  /* pattern as ty=Integer */;
          _i3 = tmp143  /* pattern as ty=Integer */;
          _i4 = tmp145  /* pattern as ty=Integer */;
          _i5 = tmp147  /* pattern as ty=Integer */;
          _i6 = tmp149  /* pattern as ty=Integer */;
          _i7 = tmp151  /* pattern as ty=Integer */;
          _i8 = tmp153  /* pattern as ty=Integer */;
          tmpMeta154 = mmc_mk_box8(0, mmc_mk_integer(_i1), mmc_mk_integer(_i2), mmc_mk_integer(_i3), mmc_mk_integer(_i4), mmc_mk_integer(_i5), mmc_mk_integer(_i6), mmc_mk_integer(_i7), mmc_mk_integer(((modelica_integer) 1) + _i8));
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = tmpMeta154;
          goto tmp3_done;
        }
        case 15: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _inTuple;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 16) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outExp = tmpMeta[0+0];
  _outTuple = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outTuple) { *out_outTuple = _outTuple; }
  return _outExp;
}

static modelica_metatype closure11_BackendDAEOptimize_traversecountOperationsExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inTuple, modelica_metatype tmp1)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_traversecountOperationsExp(thData, inExp, shared, inTuple, tmp1);
}
DLLDirection
modelica_metatype omc_BackendDAEOptimize_countOperationsExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _shared, modelica_metatype _inTpl, modelica_metatype *out_outTpl)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _outTpl = NULL;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _outTpl has no default value.
  tmpMeta2 = mmc_mk_box1(0, _shared);
  _outExp = omc_Expression_traverseExpBottomUp(threadData, _inExp, (modelica_fnptr) mmc_mk_box2(0,closure11_BackendDAEOptimize_traversecountOperationsExp,tmpMeta2), _inTpl ,&_outTpl);
  _return: OMC_LABEL_UNUSED
  if (out_outTpl) { *out_outTpl = _outTpl; }
  return _outExp;
}

static modelica_metatype closure12_BackendDAEOptimize_countOperationsExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inTpl, modelica_metatype tmp1)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_countOperationsExp(thData, inExp, shared, inTpl, tmp1);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_countOperationsJac1(threadData_t *threadData, modelica_metatype _inJac, modelica_metatype _shared, modelica_metatype _inTpl)
{
  modelica_metatype _outTpl = NULL;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outTpl has no default value.
  tmpMeta2 = mmc_mk_box1(0, _shared);
  omc_BackendEquation_traverseExpsOfEquation(threadData, omc_Util_tuple33(threadData, _inJac), (modelica_fnptr) mmc_mk_box2(0,closure12_BackendDAEOptimize_countOperationsExp,tmpMeta2), _inTpl ,&_outTpl);
  _return: OMC_LABEL_UNUSED
  return _outTpl;
}

static modelica_metatype closure13_BackendDAEOptimize_countOperationsJac1(threadData_t *thData, modelica_metatype closure, modelica_metatype inJac, modelica_metatype inTpl)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_countOperationsJac1(thData, inJac, shared, inTpl);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_countOperationsJac(threadData_t *threadData, modelica_metatype _inJac, modelica_metatype _shared, modelica_metatype _compInfoIn)
{
  modelica_metatype _compInfoOut = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _compInfoOut has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _inJac;
    tmp4_2 = _compInfoIn;
    {
      modelica_integer _numAdd;
      modelica_integer _numMul;
      modelica_integer _numDiv;
      modelica_integer _numOth;
      modelica_integer _numTrig;
      modelica_integer _numRel;
      modelica_integer _numLog;
      modelica_integer _numFuncs;
      modelica_metatype _jac = NULL;
      modelica_metatype _comp = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _numAdd has no default value.
      // _numMul has no default value.
      // _numDiv has no default value.
      // _numOth has no default value.
      // _numTrig has no default value.
      // _numRel has no default value.
      // _numLog has no default value.
      // _numFuncs has no default value.
      // _jac has no default value.
      // _comp has no default value.
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (!optionNone(tmpMeta6)) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = _compInfoIn;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_integer tmp9;
          modelica_metatype tmpMeta10;
          modelica_integer tmp11;
          modelica_metatype tmpMeta12;
          modelica_integer tmp13;
          modelica_metatype tmpMeta14;
          modelica_integer tmp15;
          modelica_metatype tmpMeta16;
          modelica_integer tmp17;
          modelica_metatype tmpMeta18;
          modelica_integer tmp19;
          modelica_metatype tmpMeta20;
          modelica_integer tmp21;
          modelica_metatype tmpMeta22;
          modelica_integer tmp23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_integer tmp30;
          modelica_metatype tmpMeta31;
          modelica_integer tmp32;
          modelica_metatype tmpMeta33;
          modelica_integer tmp34;
          modelica_metatype tmpMeta35;
          modelica_integer tmp36;
          modelica_metatype tmpMeta37;
          modelica_integer tmp38;
          modelica_metatype tmpMeta39;
          modelica_integer tmp40;
          modelica_metatype tmpMeta41;
          modelica_integer tmp42;
          modelica_metatype tmpMeta43;
          modelica_integer tmp44;
          modelica_metatype tmpMeta45;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,9) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp9 = mmc_unbox_integer(tmpMeta8);
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp11 = mmc_unbox_integer(tmpMeta10);
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp13 = mmc_unbox_integer(tmpMeta12);
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
          tmp15 = mmc_unbox_integer(tmpMeta14);
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
          tmp17 = mmc_unbox_integer(tmpMeta16);
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
          tmp19 = mmc_unbox_integer(tmpMeta18);
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 9));
          tmp21 = mmc_unbox_integer(tmpMeta20);
          tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 10));
          tmp23 = mmc_unbox_integer(tmpMeta22);
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (optionNone(tmpMeta24)) goto tmp3_end;
          tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 1));
          _comp = tmpMeta7;
          _numAdd = tmp9  /* pattern as ty=Integer */;
          _numMul = tmp11  /* pattern as ty=Integer */;
          _numDiv = tmp13  /* pattern as ty=Integer */;
          _numTrig = tmp15  /* pattern as ty=Integer */;
          _numRel = tmp17  /* pattern as ty=Integer */;
          _numLog = tmp19  /* pattern as ty=Integer */;
          _numOth = tmp21  /* pattern as ty=Integer */;
          _numFuncs = tmp23  /* pattern as ty=Integer */;
          _jac = tmpMeta25;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta26 = mmc_mk_box1(0, _shared);
          tmpMeta27 = mmc_mk_box8(0, mmc_mk_integer(_numAdd), mmc_mk_integer(_numMul), mmc_mk_integer(_numDiv), mmc_mk_integer(_numOth), mmc_mk_integer(_numTrig), mmc_mk_integer(_numRel), mmc_mk_integer(_numLog), mmc_mk_integer(_numFuncs));
          tmpMeta28 = omc_List_fold(threadData, _jac, (modelica_fnptr) mmc_mk_box2(0,closure13_BackendDAEOptimize_countOperationsJac1,tmpMeta26), tmpMeta27);
          tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta28), 1));
          tmp30 = mmc_unbox_integer(tmpMeta29);
          tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta28), 2));
          tmp32 = mmc_unbox_integer(tmpMeta31);
          tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta28), 3));
          tmp34 = mmc_unbox_integer(tmpMeta33);
          tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta28), 4));
          tmp36 = mmc_unbox_integer(tmpMeta35);
          tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta28), 5));
          tmp38 = mmc_unbox_integer(tmpMeta37);
          tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta28), 6));
          tmp40 = mmc_unbox_integer(tmpMeta39);
          tmpMeta41 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta28), 7));
          tmp42 = mmc_unbox_integer(tmpMeta41);
          tmpMeta43 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta28), 8));
          tmp44 = mmc_unbox_integer(tmpMeta43);
          _numAdd = tmp30  /* pattern as ty=Integer */;
          _numMul = tmp32  /* pattern as ty=Integer */;
          _numDiv = tmp34  /* pattern as ty=Integer */;
          _numTrig = tmp36  /* pattern as ty=Integer */;
          _numRel = tmp38  /* pattern as ty=Integer */;
          _numLog = tmp40  /* pattern as ty=Integer */;
          _numOth = tmp42  /* pattern as ty=Integer */;
          _numFuncs = tmp44  /* pattern as ty=Integer */;
          tmpMeta45 = mmc_mk_box10(3, &BackendDAE_CompInfo_COUNTER__desc, _comp, mmc_mk_integer(_numAdd), mmc_mk_integer(_numMul), mmc_mk_integer(_numDiv), mmc_mk_integer(_numTrig), mmc_mk_integer(_numRel), mmc_mk_integer(_numLog), mmc_mk_integer(_numOth), mmc_mk_integer(_numFuncs));
          tmpMeta1 = tmpMeta45;
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _compInfoIn;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _compInfoOut = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _compInfoOut;
}

PROTECTED_FUNCTION_STATIC modelica_integer omc_BackendDAEOptimize_getNumJacEntries(threadData_t *threadData, modelica_metatype _inJac)
{
  modelica_integer _numEntries;
  modelica_integer tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _numEntries has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inJac;
    {
      modelica_metatype _jac = NULL;
      modelica_metatype _vars1 = NULL;
      modelica_metatype _vars2 = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _jac has no default value.
      // _vars1 has no default value.
      // _vars2 has no default value.
      tmp4 = 0;
      for (; tmp4 < 6; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (!optionNone(tmpMeta6)) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) -1);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (optionNone(tmpMeta7)) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
          _jac = tmpMeta8;
          /* Pattern matching succeeded */
          tmp1 = listLength(_jac);
          goto tmp3_done;
        }
        case 2: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) -1);
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,4) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (!optionNone(tmpMeta9)) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) -1);
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,4) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (optionNone(tmpMeta10)) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 1));
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 3));
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 4));
          
          _vars1 = tmpMeta12;
          _vars2 = tmpMeta13;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(listLength(_vars1) == listLength(_vars2))) goto tmp3_end;
          tmp1 = listLength(_vars1);
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          fputs(MMC_STRINGDATA(_OMC_LIT208),stdout);
          tmp1 = ((modelica_integer) -1);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _numEntries = tmp1;
  _return: OMC_LABEL_UNUSED
  return _numEntries;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_getNumJacEntries(threadData_t *threadData, modelica_metatype _inJac)
{
  modelica_integer _numEntries;
  modelica_metatype out_numEntries;
  _numEntries = omc_BackendDAEOptimize_getNumJacEntries(threadData, _inJac);
  out_numEntries = mmc_mk_icon(_numEntries);
  return out_numEntries;
}

static modelica_metatype closure14_BackendDAEOptimize_countOperationsExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inTpl, modelica_metatype tmp27)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_countOperationsExp(thData, inExp, shared, inTpl, tmp27);
}static modelica_metatype closure15_BackendDAEOptimize_countOperationsExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inTpl, modelica_metatype tmp52)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_countOperationsExp(thData, inExp, shared, inTpl, tmp52);
}static modelica_metatype closure16_BackendDAEOptimize_countOperationsExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inTpl, modelica_metatype tmp68)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_countOperationsExp(thData, inExp, shared, inTpl, tmp68);
}static modelica_metatype closure17_BackendDAEOptimize_countOperationsExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inTpl, modelica_metatype tmp112)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_countOperationsExp(thData, inExp, shared, inTpl, tmp112);
}static modelica_metatype closure18_BackendDAEOptimize_countOperationsExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inTpl, modelica_metatype tmp137)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_countOperationsExp(thData, inExp, shared, inTpl, tmp137);
}static modelica_metatype closure19_BackendDAEOptimize_countOperationsExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inTpl, modelica_metatype tmp162)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_countOperationsExp(thData, inExp, shared, inTpl, tmp162);
}static modelica_metatype closure20_BackendDAEOptimize_countOperationsExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inTpl, modelica_metatype tmp187)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_countOperationsExp(thData, inExp, shared, inTpl, tmp187);
}static modelica_metatype closure21_BackendDAEOptimize_countOperationsExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inTpl, modelica_metatype tmp217)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_countOperationsExp(thData, inExp, shared, inTpl, tmp217);
}static modelica_metatype closure22_BackendDAEOptimize_countOperationsExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inTpl, modelica_metatype tmp237)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_countOperationsExp(thData, inExp, shared, inTpl, tmp237);
}static modelica_metatype closure23_BackendDAEOptimize_countOperationsExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inTpl, modelica_metatype tmp266)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_countOperationsExp(thData, inExp, shared, inTpl, tmp266);
}static modelica_metatype closure24_BackendDAEOptimize_countOperationsExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inTpl, modelica_metatype tmp286)
{
  modelica_metatype shared = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_countOperationsExp(thData, inExp, shared, inTpl, tmp286);
}
DLLDirection
modelica_metatype omc_BackendDAEOptimize_countOperationstraverseComps(threadData_t *threadData, modelica_metatype _inComps, modelica_metatype _isyst, modelica_metatype _ishared, modelica_metatype _compInfosIn)
{
  modelica_metatype _compInfosOut = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _compInfosOut has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inComps;
    tmp4_2 = _ishared;
    {
      modelica_integer _eqIdx;
      modelica_integer _numAdd;
      modelica_integer _numMul;
      modelica_integer _numDiv;
      modelica_integer _numTrig;
      modelica_integer _numRel;
      modelica_integer _numOth;
      modelica_integer _numFuncs;
      modelica_integer _numLog;
      modelica_integer _size;
      modelica_integer _jacEntries;
      modelica_real _density;
      modelica_metatype _eqs = NULL;
      modelica_metatype _tornEqs = NULL;
      modelica_metatype _otherEqs = NULL;
      modelica_metatype _comp = NULL;
      modelica_metatype _rest = NULL;
      modelica_metatype _eqns = NULL;
      modelica_metatype _vars = NULL;
      modelica_metatype _eqn = NULL;
      modelica_metatype _compInfo = NULL;
      modelica_metatype _allOps = NULL;
      modelica_metatype _torn = NULL;
      modelica_metatype _other = NULL;
      modelica_metatype _eqnlst = NULL;
      modelica_metatype _jac = NULL;
      modelica_metatype _funcs = NULL;
      modelica_metatype _varlst = NULL;
      modelica_metatype _explst = NULL;
      modelica_metatype _innerEquations = NULL;
      modelica_metatype _vlst = NULL;
      modelica_metatype _vLstLst = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _eqIdx has no default value.
      // _numAdd has no default value.
      // _numMul has no default value.
      // _numDiv has no default value.
      // _numTrig has no default value.
      // _numRel has no default value.
      // _numOth has no default value.
      // _numFuncs has no default value.
      // _numLog has no default value.
      // _size has no default value.
      // _jacEntries has no default value.
      // _density has no default value.
      // _eqs has no default value.
      // _tornEqs has no default value.
      // _otherEqs has no default value.
      // _comp has no default value.
      // _rest has no default value.
      // _eqns has no default value.
      // _vars has no default value.
      // _eqn has no default value.
      // _compInfo has no default value.
      // _allOps has no default value.
      // _torn has no default value.
      // _other has no default value.
      // _eqnlst has no default value.
      // _jac has no default value.
      // _funcs has no default value.
      // _varlst has no default value.
      // _explst has no default value.
      // _innerEquations has no default value.
      // _vlst has no default value.
      // _vLstLst has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 12; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          
          tmp4 += 11; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta1 = _compInfosIn;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_integer tmp9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_integer tmp12;
          modelica_metatype tmpMeta13;
          modelica_integer tmp14;
          modelica_metatype tmpMeta15;
          modelica_integer tmp16;
          modelica_metatype tmpMeta17;
          modelica_integer tmp18;
          modelica_metatype tmpMeta19;
          modelica_integer tmp20;
          modelica_metatype tmpMeta21;
          modelica_integer tmp22;
          modelica_metatype tmpMeta23;
          modelica_integer tmp24;
          modelica_metatype tmpMeta25;
          modelica_integer tmp26;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,2) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          tmp9 = mmc_unbox_integer(tmpMeta8);
          
          _eqIdx = tmp9  /* pattern as ty=Integer */;
          _rest = tmpMeta7;
          tmp4 += 9; /* Pattern matching succeeded; we may skip some cases if we fail */
          _eqns = omc_BackendEquation_getEqnsFromEqSystem(threadData, _isyst);

          _eqn = omc_BackendEquation_get(threadData, _eqns, _eqIdx);

          /* Pattern-matching tuple assignment, wild first pattern */
          tmpMeta28 = mmc_mk_box1(0, _ishared);
          omc_BackendEquation_traverseExpsOfEquation(threadData, _eqn, (modelica_fnptr) mmc_mk_box2(0,closure14_BackendDAEOptimize_countOperationsExp,tmpMeta28), _OMC_LIT209, &tmpMeta10);
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 1));
          tmp12 = mmc_unbox_integer(tmpMeta11);
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
          tmp14 = mmc_unbox_integer(tmpMeta13);
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 3));
          tmp16 = mmc_unbox_integer(tmpMeta15);
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 4));
          tmp18 = mmc_unbox_integer(tmpMeta17);
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 5));
          tmp20 = mmc_unbox_integer(tmpMeta19);
          tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 6));
          tmp22 = mmc_unbox_integer(tmpMeta21);
          tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 7));
          tmp24 = mmc_unbox_integer(tmpMeta23);
          tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 8));
          tmp26 = mmc_unbox_integer(tmpMeta25);
          _numAdd = tmp12  /* pattern as ty=Integer */;
          _numMul = tmp14  /* pattern as ty=Integer */;
          _numDiv = tmp16  /* pattern as ty=Integer */;
          _numTrig = tmp18  /* pattern as ty=Integer */;
          _numRel = tmp20  /* pattern as ty=Integer */;
          _numLog = tmp22  /* pattern as ty=Integer */;
          _numOth = tmp24  /* pattern as ty=Integer */;
          _numFuncs = tmp26  /* pattern as ty=Integer */;

          tmpMeta29 = mmc_mk_box10(3, &BackendDAE_CompInfo_COUNTER__desc, listHead(_inComps), mmc_mk_integer(_numAdd), mmc_mk_integer(_numMul), mmc_mk_integer(_numDiv), mmc_mk_integer(_numTrig), mmc_mk_integer(_numRel), mmc_mk_integer(_numLog), mmc_mk_integer(_numOth), mmc_mk_integer(_numFuncs));
          _compInfo = tmpMeta29;

          if(omc_Flags_isSet(threadData, _OMC_LIT213))
          {
            omc_BackendDump_dumpCompInfo(threadData, _compInfo);
          }
          tmpMeta30 = mmc_mk_cons(_compInfo, _compInfosIn);
          tmpMeta1 = omc_BackendDAEOptimize_countOperationstraverseComps(threadData, _rest, _isyst, _ishared, tmpMeta30);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_integer tmp34;
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          modelica_integer tmp37;
          modelica_metatype tmpMeta38;
          modelica_integer tmp39;
          modelica_metatype tmpMeta40;
          modelica_integer tmp41;
          modelica_metatype tmpMeta42;
          modelica_integer tmp43;
          modelica_metatype tmpMeta44;
          modelica_integer tmp45;
          modelica_metatype tmpMeta46;
          modelica_integer tmp47;
          modelica_metatype tmpMeta48;
          modelica_integer tmp49;
          modelica_metatype tmpMeta50;
          modelica_integer tmp51;
          modelica_metatype tmpMeta53;
          modelica_metatype tmpMeta54;
          modelica_metatype tmpMeta55;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta31 = MMC_CAR(tmp4_1);
          tmpMeta32 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,5,2) == 0) goto tmp3_end;
          tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
          tmp34 = mmc_unbox_integer(tmpMeta33);
          
          _eqIdx = tmp34  /* pattern as ty=Integer */;
          _rest = tmpMeta32;
          tmp4 += 8; /* Pattern matching succeeded; we may skip some cases if we fail */
          _eqn = omc_BackendEquation_get(threadData, omc_BackendEquation_getEqnsFromEqSystem(threadData, _isyst), _eqIdx);

          /* Pattern-matching tuple assignment, wild first pattern */
          tmpMeta53 = mmc_mk_box1(0, _ishared);
          omc_BackendEquation_traverseExpsOfEquation(threadData, _eqn, (modelica_fnptr) mmc_mk_box2(0,closure15_BackendDAEOptimize_countOperationsExp,tmpMeta53), _OMC_LIT209, &tmpMeta35);
          tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta35), 1));
          tmp37 = mmc_unbox_integer(tmpMeta36);
          tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta35), 2));
          tmp39 = mmc_unbox_integer(tmpMeta38);
          tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta35), 3));
          tmp41 = mmc_unbox_integer(tmpMeta40);
          tmpMeta42 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta35), 4));
          tmp43 = mmc_unbox_integer(tmpMeta42);
          tmpMeta44 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta35), 5));
          tmp45 = mmc_unbox_integer(tmpMeta44);
          tmpMeta46 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta35), 6));
          tmp47 = mmc_unbox_integer(tmpMeta46);
          tmpMeta48 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta35), 7));
          tmp49 = mmc_unbox_integer(tmpMeta48);
          tmpMeta50 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta35), 8));
          tmp51 = mmc_unbox_integer(tmpMeta50);
          _numAdd = tmp37  /* pattern as ty=Integer */;
          _numMul = tmp39  /* pattern as ty=Integer */;
          _numDiv = tmp41  /* pattern as ty=Integer */;
          _numTrig = tmp43  /* pattern as ty=Integer */;
          _numRel = tmp45  /* pattern as ty=Integer */;
          _numLog = tmp47  /* pattern as ty=Integer */;
          _numOth = tmp49  /* pattern as ty=Integer */;
          _numFuncs = tmp51  /* pattern as ty=Integer */;

          tmpMeta54 = mmc_mk_box10(3, &BackendDAE_CompInfo_COUNTER__desc, listHead(_inComps), mmc_mk_integer(_numAdd), mmc_mk_integer(_numMul), mmc_mk_integer(_numDiv), mmc_mk_integer(_numTrig), mmc_mk_integer(_numRel), mmc_mk_integer(((modelica_integer) 1) + _numLog), mmc_mk_integer(_numOth), mmc_mk_integer(_numFuncs));
          _compInfo = tmpMeta54;

          if(omc_Flags_isSet(threadData, _OMC_LIT213))
          {
            omc_BackendDump_dumpCompInfo(threadData, _compInfo);
          }
          tmpMeta55 = mmc_mk_cons(_compInfo, _compInfosIn);
          tmpMeta1 = omc_BackendDAEOptimize_countOperationstraverseComps(threadData, _rest, _isyst, _ishared, tmpMeta55);
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta56;
          modelica_metatype tmpMeta57;
          modelica_metatype tmpMeta58;
          modelica_metatype tmpMeta59;
          modelica_metatype tmpMeta60;
          modelica_real tmp61;
          modelica_metatype tmpMeta62;
          modelica_metatype tmpMeta63;
          modelica_metatype tmpMeta64;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta56 = MMC_CAR(tmp4_1);
          tmpMeta57 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta56,1,5) == 0) goto tmp3_end;
          tmpMeta58 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta56), 2));
          tmpMeta59 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta56), 4));
          tmpMeta60 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta56), 5));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta60,1,0) == 0) goto tmp3_end;
          
          _comp = tmpMeta56;
          _eqs = tmpMeta58;
          _jac = tmpMeta59;
          _rest = tmpMeta57;
          /* Pattern matching succeeded */
          omc_BackendDAETransform_getEquationAndSolvedVar(threadData, _comp, omc_BackendEquation_getEqnsFromEqSystem(threadData, _isyst), omc_BackendVariable_daeVars(threadData, _isyst), NULL, NULL);

          _size = listLength(_eqs);

          tmp61 = ((modelica_real)(_size) * (_size));
          if (tmp61 == 0) {goto goto_2;}
          _density = (((modelica_real)omc_BackendDAEOptimize_getNumJacEntries(threadData, _jac))) / tmp61;

          tmpMeta62 = mmc_mk_box10(3, &BackendDAE_CompInfo_COUNTER__desc, _comp, mmc_mk_integer(((modelica_integer) 0)), mmc_mk_integer(((modelica_integer) 0)), mmc_mk_integer(((modelica_integer) 0)), mmc_mk_integer(((modelica_integer) 0)), mmc_mk_integer(((modelica_integer) 0)), mmc_mk_integer(((modelica_integer) 0)), mmc_mk_integer(((modelica_integer) 0)), mmc_mk_integer(((modelica_integer) 0)));
          _allOps = tmpMeta62;

          _allOps = omc_BackendDAEOptimize_countOperationsJac(threadData, _jac, _ishared, _allOps);

          tmpMeta63 = mmc_mk_box5(4, &BackendDAE_CompInfo_SYSTEM__desc, _comp, _allOps, mmc_mk_integer(_size), mmc_mk_real(_density));
          _compInfo = tmpMeta63;
          tmpMeta64 = mmc_mk_cons(_compInfo, _compInfosIn);
          tmpMeta1 = omc_BackendDAEOptimize_countOperationstraverseComps(threadData, _rest, _isyst, _ishared, tmpMeta64);
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta65;
          modelica_metatype tmpMeta66;
          modelica_metatype tmpMeta67;
          modelica_metatype tmpMeta69;
          modelica_metatype tmpMeta70;
          modelica_metatype tmpMeta71;
          modelica_integer tmp72;
          modelica_metatype tmpMeta73;
          modelica_integer tmp74;
          modelica_metatype tmpMeta75;
          modelica_integer tmp76;
          modelica_metatype tmpMeta77;
          modelica_integer tmp78;
          modelica_metatype tmpMeta79;
          modelica_integer tmp80;
          modelica_metatype tmpMeta81;
          modelica_integer tmp82;
          modelica_metatype tmpMeta83;
          modelica_integer tmp84;
          modelica_metatype tmpMeta85;
          modelica_integer tmp86;
          modelica_metatype tmpMeta87;
          modelica_real tmp88;
          modelica_metatype tmpMeta89;
          modelica_metatype tmpMeta90;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta65 = MMC_CAR(tmp4_1);
          tmpMeta66 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta65,1,5) == 0) goto tmp3_end;
          tmpMeta67 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta65), 4));
          
          _comp = tmpMeta65;
          _jac = tmpMeta67;
          _rest = tmpMeta66;
          tmp4 += 6; /* Pattern matching succeeded; we may skip some cases if we fail */
          _eqnlst = omc_BackendDAETransform_getEquationAndSolvedVar(threadData, _comp, omc_BackendEquation_getEqnsFromEqSystem(threadData, _isyst), omc_BackendVariable_daeVars(threadData, _isyst), NULL, NULL);

          _size = listLength(_eqnlst);

          /* Pattern-matching assignment */
          tmpMeta69 = mmc_mk_box1(0, _ishared);
          tmpMeta70 = omc_BackendDAEUtil_traverseBackendDAEExpsEqns(threadData, omc_BackendEquation_listEquation(threadData, _eqnlst), (modelica_fnptr) mmc_mk_box2(0,closure16_BackendDAEOptimize_countOperationsExp,tmpMeta69), _OMC_LIT209);
          tmpMeta71 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 1));
          tmp72 = mmc_unbox_integer(tmpMeta71);
          tmpMeta73 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 2));
          tmp74 = mmc_unbox_integer(tmpMeta73);
          tmpMeta75 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 3));
          tmp76 = mmc_unbox_integer(tmpMeta75);
          tmpMeta77 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 4));
          tmp78 = mmc_unbox_integer(tmpMeta77);
          tmpMeta79 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 5));
          tmp80 = mmc_unbox_integer(tmpMeta79);
          tmpMeta81 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 6));
          tmp82 = mmc_unbox_integer(tmpMeta81);
          tmpMeta83 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 7));
          tmp84 = mmc_unbox_integer(tmpMeta83);
          tmpMeta85 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 8));
          tmp86 = mmc_unbox_integer(tmpMeta85);
          _numAdd = tmp72  /* pattern as ty=Integer */;
          _numMul = tmp74  /* pattern as ty=Integer */;
          _numDiv = tmp76  /* pattern as ty=Integer */;
          _numTrig = tmp78  /* pattern as ty=Integer */;
          _numRel = tmp80  /* pattern as ty=Integer */;
          _numLog = tmp82  /* pattern as ty=Integer */;
          _numOth = tmp84  /* pattern as ty=Integer */;
          _numFuncs = tmp86  /* pattern as ty=Integer */;

          tmpMeta87 = mmc_mk_box10(3, &BackendDAE_CompInfo_COUNTER__desc, _comp, mmc_mk_integer(_numAdd), mmc_mk_integer(_numMul), mmc_mk_integer(_numDiv), mmc_mk_integer(_numTrig), mmc_mk_integer(_numRel), mmc_mk_integer(_numLog), mmc_mk_integer(_numOth), mmc_mk_integer(_numFuncs));
          _allOps = tmpMeta87;

          _jacEntries = omc_BackendDAEOptimize_getNumJacEntries(threadData, _jac);

          if((_jacEntries == ((modelica_integer) -1)))
          {
            _jacEntries = (_size) * (_size);
          }

          tmp88 = ((modelica_real)(_size) * (_size));
          if (tmp88 == 0) {goto goto_2;}
          _density = (((modelica_real)_jacEntries)) / tmp88;

          tmpMeta89 = mmc_mk_box5(4, &BackendDAE_CompInfo_SYSTEM__desc, _comp, _allOps, mmc_mk_integer(_size), mmc_mk_real(_density));
          _compInfo = tmpMeta89;
          tmpMeta90 = mmc_mk_cons(_compInfo, _compInfosIn);
          tmpMeta1 = omc_BackendDAEOptimize_countOperationstraverseComps(threadData, _rest, _isyst, _ishared, tmpMeta90);
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta91;
          modelica_metatype tmpMeta92;
          modelica_metatype tmpMeta93;
          modelica_integer tmp94;
          modelica_metatype tmpMeta95;
          modelica_metatype tmpMeta96;
          modelica_integer tmp97;
          modelica_metatype tmpMeta98;
          modelica_integer tmp99;
          modelica_metatype tmpMeta100;
          modelica_integer tmp101;
          modelica_metatype tmpMeta102;
          modelica_integer tmp103;
          modelica_metatype tmpMeta104;
          modelica_integer tmp105;
          modelica_metatype tmpMeta106;
          modelica_integer tmp107;
          modelica_metatype tmpMeta108;
          modelica_integer tmp109;
          modelica_metatype tmpMeta110;
          modelica_integer tmp111;
          modelica_metatype tmpMeta113;
          modelica_metatype tmpMeta114;
          modelica_metatype tmpMeta115;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta91 = MMC_CAR(tmp4_1);
          tmpMeta92 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta91,2,2) == 0) goto tmp3_end;
          tmpMeta93 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta91), 2));
          tmp94 = mmc_unbox_integer(tmpMeta93);
          
          _comp = tmpMeta91;
          _eqIdx = tmp94  /* pattern as ty=Integer */;
          _rest = tmpMeta92;
          tmp4 += 5; /* Pattern matching succeeded; we may skip some cases if we fail */
          _eqn = omc_BackendEquation_get(threadData, omc_BackendEquation_getEqnsFromEqSystem(threadData, _isyst), _eqIdx);

          /* Pattern-matching tuple assignment, wild first pattern */
          tmpMeta113 = mmc_mk_box1(0, _ishared);
          omc_BackendEquation_traverseExpsOfEquation(threadData, _eqn, (modelica_fnptr) mmc_mk_box2(0,closure17_BackendDAEOptimize_countOperationsExp,tmpMeta113), _OMC_LIT209, &tmpMeta95);
          tmpMeta96 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta95), 1));
          tmp97 = mmc_unbox_integer(tmpMeta96);
          tmpMeta98 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta95), 2));
          tmp99 = mmc_unbox_integer(tmpMeta98);
          tmpMeta100 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta95), 3));
          tmp101 = mmc_unbox_integer(tmpMeta100);
          tmpMeta102 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta95), 4));
          tmp103 = mmc_unbox_integer(tmpMeta102);
          tmpMeta104 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta95), 5));
          tmp105 = mmc_unbox_integer(tmpMeta104);
          tmpMeta106 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta95), 6));
          tmp107 = mmc_unbox_integer(tmpMeta106);
          tmpMeta108 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta95), 7));
          tmp109 = mmc_unbox_integer(tmpMeta108);
          tmpMeta110 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta95), 8));
          tmp111 = mmc_unbox_integer(tmpMeta110);
          _numAdd = tmp97  /* pattern as ty=Integer */;
          _numMul = tmp99  /* pattern as ty=Integer */;
          _numDiv = tmp101  /* pattern as ty=Integer */;
          _numTrig = tmp103  /* pattern as ty=Integer */;
          _numRel = tmp105  /* pattern as ty=Integer */;
          _numLog = tmp107  /* pattern as ty=Integer */;
          _numOth = tmp109  /* pattern as ty=Integer */;
          _numFuncs = tmp111  /* pattern as ty=Integer */;

          tmpMeta114 = mmc_mk_box10(3, &BackendDAE_CompInfo_COUNTER__desc, _comp, mmc_mk_integer(_numAdd), mmc_mk_integer(_numMul), mmc_mk_integer(_numDiv), mmc_mk_integer(_numTrig), mmc_mk_integer(_numRel), mmc_mk_integer(_numLog), mmc_mk_integer(_numOth), mmc_mk_integer(_numFuncs));
          _compInfo = tmpMeta114;
          tmpMeta115 = mmc_mk_cons(_compInfo, _compInfosIn);
          tmpMeta1 = omc_BackendDAEOptimize_countOperationstraverseComps(threadData, _rest, _isyst, _ishared, tmpMeta115);
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta116;
          modelica_metatype tmpMeta117;
          modelica_metatype tmpMeta118;
          modelica_integer tmp119;
          modelica_metatype tmpMeta120;
          modelica_metatype tmpMeta121;
          modelica_integer tmp122;
          modelica_metatype tmpMeta123;
          modelica_integer tmp124;
          modelica_metatype tmpMeta125;
          modelica_integer tmp126;
          modelica_metatype tmpMeta127;
          modelica_integer tmp128;
          modelica_metatype tmpMeta129;
          modelica_integer tmp130;
          modelica_metatype tmpMeta131;
          modelica_integer tmp132;
          modelica_metatype tmpMeta133;
          modelica_integer tmp134;
          modelica_metatype tmpMeta135;
          modelica_integer tmp136;
          modelica_metatype tmpMeta138;
          modelica_metatype tmpMeta139;
          modelica_metatype tmpMeta140;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta116 = MMC_CAR(tmp4_1);
          tmpMeta117 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta116,6,2) == 0) goto tmp3_end;
          tmpMeta118 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta116), 2));
          tmp119 = mmc_unbox_integer(tmpMeta118);
          
          _comp = tmpMeta116;
          _eqIdx = tmp119  /* pattern as ty=Integer */;
          _rest = tmpMeta117;
          tmp4 += 4; /* Pattern matching succeeded; we may skip some cases if we fail */
          _eqn = omc_BackendEquation_get(threadData, omc_BackendEquation_getEqnsFromEqSystem(threadData, _isyst), _eqIdx);

          /* Pattern-matching tuple assignment, wild first pattern */
          tmpMeta138 = mmc_mk_box1(0, _ishared);
          omc_BackendEquation_traverseExpsOfEquation(threadData, _eqn, (modelica_fnptr) mmc_mk_box2(0,closure18_BackendDAEOptimize_countOperationsExp,tmpMeta138), _OMC_LIT209, &tmpMeta120);
          tmpMeta121 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta120), 1));
          tmp122 = mmc_unbox_integer(tmpMeta121);
          tmpMeta123 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta120), 2));
          tmp124 = mmc_unbox_integer(tmpMeta123);
          tmpMeta125 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta120), 3));
          tmp126 = mmc_unbox_integer(tmpMeta125);
          tmpMeta127 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta120), 4));
          tmp128 = mmc_unbox_integer(tmpMeta127);
          tmpMeta129 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta120), 5));
          tmp130 = mmc_unbox_integer(tmpMeta129);
          tmpMeta131 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta120), 6));
          tmp132 = mmc_unbox_integer(tmpMeta131);
          tmpMeta133 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta120), 7));
          tmp134 = mmc_unbox_integer(tmpMeta133);
          tmpMeta135 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta120), 8));
          tmp136 = mmc_unbox_integer(tmpMeta135);
          _numAdd = tmp122  /* pattern as ty=Integer */;
          _numMul = tmp124  /* pattern as ty=Integer */;
          _numDiv = tmp126  /* pattern as ty=Integer */;
          _numTrig = tmp128  /* pattern as ty=Integer */;
          _numRel = tmp130  /* pattern as ty=Integer */;
          _numLog = tmp132  /* pattern as ty=Integer */;
          _numOth = tmp134  /* pattern as ty=Integer */;
          _numFuncs = tmp136  /* pattern as ty=Integer */;

          tmpMeta139 = mmc_mk_box10(3, &BackendDAE_CompInfo_COUNTER__desc, _comp, mmc_mk_integer(_numAdd), mmc_mk_integer(_numMul), mmc_mk_integer(_numDiv), mmc_mk_integer(_numTrig), mmc_mk_integer(_numRel), mmc_mk_integer(((modelica_integer) 1) + _numLog), mmc_mk_integer(_numOth), mmc_mk_integer(_numFuncs));
          _compInfo = tmpMeta139;
          tmpMeta140 = mmc_mk_cons(_compInfo, _compInfosIn);
          tmpMeta1 = omc_BackendDAEOptimize_countOperationstraverseComps(threadData, _rest, _isyst, _ishared, tmpMeta140);
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta141;
          modelica_metatype tmpMeta142;
          modelica_metatype tmpMeta143;
          modelica_integer tmp144;
          modelica_metatype tmpMeta145;
          modelica_metatype tmpMeta146;
          modelica_integer tmp147;
          modelica_metatype tmpMeta148;
          modelica_integer tmp149;
          modelica_metatype tmpMeta150;
          modelica_integer tmp151;
          modelica_metatype tmpMeta152;
          modelica_integer tmp153;
          modelica_metatype tmpMeta154;
          modelica_integer tmp155;
          modelica_metatype tmpMeta156;
          modelica_integer tmp157;
          modelica_metatype tmpMeta158;
          modelica_integer tmp159;
          modelica_metatype tmpMeta160;
          modelica_integer tmp161;
          modelica_metatype tmpMeta163;
          modelica_metatype tmpMeta164;
          modelica_metatype tmpMeta165;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta141 = MMC_CAR(tmp4_1);
          tmpMeta142 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta141,3,2) == 0) goto tmp3_end;
          tmpMeta143 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta141), 2));
          tmp144 = mmc_unbox_integer(tmpMeta143);
          
          _comp = tmpMeta141;
          _eqIdx = tmp144  /* pattern as ty=Integer */;
          _rest = tmpMeta142;
          tmp4 += 3; /* Pattern matching succeeded; we may skip some cases if we fail */
          _eqn = omc_BackendEquation_get(threadData, omc_BackendEquation_getEqnsFromEqSystem(threadData, _isyst), _eqIdx);

          /* Pattern-matching tuple assignment, wild first pattern */
          tmpMeta163 = mmc_mk_box1(0, _ishared);
          omc_BackendEquation_traverseExpsOfEquation(threadData, _eqn, (modelica_fnptr) mmc_mk_box2(0,closure19_BackendDAEOptimize_countOperationsExp,tmpMeta163), _OMC_LIT209, &tmpMeta145);
          tmpMeta146 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta145), 1));
          tmp147 = mmc_unbox_integer(tmpMeta146);
          tmpMeta148 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta145), 2));
          tmp149 = mmc_unbox_integer(tmpMeta148);
          tmpMeta150 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta145), 3));
          tmp151 = mmc_unbox_integer(tmpMeta150);
          tmpMeta152 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta145), 4));
          tmp153 = mmc_unbox_integer(tmpMeta152);
          tmpMeta154 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta145), 5));
          tmp155 = mmc_unbox_integer(tmpMeta154);
          tmpMeta156 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta145), 6));
          tmp157 = mmc_unbox_integer(tmpMeta156);
          tmpMeta158 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta145), 7));
          tmp159 = mmc_unbox_integer(tmpMeta158);
          tmpMeta160 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta145), 8));
          tmp161 = mmc_unbox_integer(tmpMeta160);
          _numAdd = tmp147  /* pattern as ty=Integer */;
          _numMul = tmp149  /* pattern as ty=Integer */;
          _numDiv = tmp151  /* pattern as ty=Integer */;
          _numTrig = tmp153  /* pattern as ty=Integer */;
          _numRel = tmp155  /* pattern as ty=Integer */;
          _numLog = tmp157  /* pattern as ty=Integer */;
          _numOth = tmp159  /* pattern as ty=Integer */;
          _numFuncs = tmp161  /* pattern as ty=Integer */;

          tmpMeta164 = mmc_mk_box10(3, &BackendDAE_CompInfo_COUNTER__desc, _comp, mmc_mk_integer(_numAdd), mmc_mk_integer(_numMul), mmc_mk_integer(_numDiv), mmc_mk_integer(_numTrig), mmc_mk_integer(_numRel), mmc_mk_integer(((modelica_integer) 1) + _numLog), mmc_mk_integer(_numOth), mmc_mk_integer(_numFuncs));
          _compInfo = tmpMeta164;
          tmpMeta165 = mmc_mk_cons(_compInfo, _compInfosIn);
          tmpMeta1 = omc_BackendDAEOptimize_countOperationstraverseComps(threadData, _rest, _isyst, _ishared, tmpMeta165);
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta166;
          modelica_metatype tmpMeta167;
          modelica_metatype tmpMeta168;
          modelica_integer tmp169;
          modelica_metatype tmpMeta170;
          modelica_metatype tmpMeta171;
          modelica_integer tmp172;
          modelica_metatype tmpMeta173;
          modelica_integer tmp174;
          modelica_metatype tmpMeta175;
          modelica_integer tmp176;
          modelica_metatype tmpMeta177;
          modelica_integer tmp178;
          modelica_metatype tmpMeta179;
          modelica_integer tmp180;
          modelica_metatype tmpMeta181;
          modelica_integer tmp182;
          modelica_metatype tmpMeta183;
          modelica_integer tmp184;
          modelica_metatype tmpMeta185;
          modelica_integer tmp186;
          modelica_metatype tmpMeta188;
          modelica_metatype tmpMeta189;
          modelica_metatype tmpMeta190;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta166 = MMC_CAR(tmp4_1);
          tmpMeta167 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta166,4,2) == 0) goto tmp3_end;
          tmpMeta168 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta166), 2));
          tmp169 = mmc_unbox_integer(tmpMeta168);
          
          _comp = tmpMeta166;
          _eqIdx = tmp169  /* pattern as ty=Integer */;
          _rest = tmpMeta167;
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          _eqn = omc_BackendEquation_get(threadData, omc_BackendEquation_getEqnsFromEqSystem(threadData, _isyst), _eqIdx);

          /* Pattern-matching tuple assignment, wild first pattern */
          tmpMeta188 = mmc_mk_box1(0, _ishared);
          omc_BackendEquation_traverseExpsOfEquation(threadData, _eqn, (modelica_fnptr) mmc_mk_box2(0,closure20_BackendDAEOptimize_countOperationsExp,tmpMeta188), _OMC_LIT209, &tmpMeta170);
          tmpMeta171 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta170), 1));
          tmp172 = mmc_unbox_integer(tmpMeta171);
          tmpMeta173 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta170), 2));
          tmp174 = mmc_unbox_integer(tmpMeta173);
          tmpMeta175 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta170), 3));
          tmp176 = mmc_unbox_integer(tmpMeta175);
          tmpMeta177 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta170), 4));
          tmp178 = mmc_unbox_integer(tmpMeta177);
          tmpMeta179 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta170), 5));
          tmp180 = mmc_unbox_integer(tmpMeta179);
          tmpMeta181 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta170), 6));
          tmp182 = mmc_unbox_integer(tmpMeta181);
          tmpMeta183 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta170), 7));
          tmp184 = mmc_unbox_integer(tmpMeta183);
          tmpMeta185 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta170), 8));
          tmp186 = mmc_unbox_integer(tmpMeta185);
          _numAdd = tmp172  /* pattern as ty=Integer */;
          _numMul = tmp174  /* pattern as ty=Integer */;
          _numDiv = tmp176  /* pattern as ty=Integer */;
          _numTrig = tmp178  /* pattern as ty=Integer */;
          _numRel = tmp180  /* pattern as ty=Integer */;
          _numLog = tmp182  /* pattern as ty=Integer */;
          _numOth = tmp184  /* pattern as ty=Integer */;
          _numFuncs = tmp186  /* pattern as ty=Integer */;

          tmpMeta189 = mmc_mk_box10(3, &BackendDAE_CompInfo_COUNTER__desc, _comp, mmc_mk_integer(_numAdd), mmc_mk_integer(_numMul), mmc_mk_integer(_numDiv), mmc_mk_integer(_numTrig), mmc_mk_integer(_numRel), mmc_mk_integer(((modelica_integer) 1) + _numLog), mmc_mk_integer(_numOth), mmc_mk_integer(_numFuncs));
          _compInfo = tmpMeta189;
          tmpMeta190 = mmc_mk_cons(_compInfo, _compInfosIn);
          tmpMeta1 = omc_BackendDAEOptimize_countOperationstraverseComps(threadData, _rest, _isyst, _ishared, tmpMeta190);
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta191;
          modelica_metatype tmpMeta192;
          modelica_metatype tmpMeta193;
          modelica_metatype tmpMeta194;
          modelica_metatype tmpMeta195;
          modelica_metatype tmpMeta196;
          modelica_metatype tmpMeta197;
          modelica_integer tmp198;
          modelica_metatype tmpMeta199;
          modelica_metatype tmpMeta200;
          modelica_metatype tmpMeta201;
          modelica_integer tmp202;
          modelica_metatype tmpMeta203;
          modelica_integer tmp204;
          modelica_metatype tmpMeta205;
          modelica_integer tmp206;
          modelica_metatype tmpMeta207;
          modelica_integer tmp208;
          modelica_metatype tmpMeta209;
          modelica_integer tmp210;
          modelica_metatype tmpMeta211;
          modelica_integer tmp212;
          modelica_metatype tmpMeta213;
          modelica_integer tmp214;
          modelica_metatype tmpMeta215;
          modelica_integer tmp216;
          modelica_metatype tmpMeta218;
          modelica_metatype tmpMeta219;
          modelica_metatype tmpMeta220;
          modelica_metatype tmpMeta221;
          modelica_integer tmp222;
          modelica_metatype tmpMeta223;
          modelica_integer tmp224;
          modelica_metatype tmpMeta225;
          modelica_integer tmp226;
          modelica_metatype tmpMeta227;
          modelica_integer tmp228;
          modelica_metatype tmpMeta229;
          modelica_integer tmp230;
          modelica_metatype tmpMeta231;
          modelica_integer tmp232;
          modelica_metatype tmpMeta233;
          modelica_integer tmp234;
          modelica_metatype tmpMeta235;
          modelica_integer tmp236;
          modelica_metatype tmpMeta238;
          modelica_metatype tmpMeta239;
          modelica_metatype tmpMeta240;
          modelica_metatype tmpMeta241;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta191 = MMC_CAR(tmp4_1);
          tmpMeta192 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta191,7,4) == 0) goto tmp3_end;
          tmpMeta193 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta191), 2));
          tmpMeta194 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta193), 2));
          tmpMeta195 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta193), 3));
          tmpMeta196 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta193), 4));
          tmpMeta197 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta191), 4));
          tmp198 = mmc_unbox_integer(tmpMeta197);
          if (1 /* true */ != tmp198) goto tmp3_end;
          tmpMeta199 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 12));
          
          _vlst = tmpMeta194;
          _tornEqs = tmpMeta195;
          _innerEquations = tmpMeta196;
          _rest = tmpMeta192;
          _funcs = tmpMeta199;
          tmp4 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
          _comp = listHead(_inComps);

          _eqns = omc_BackendEquation_getEqnsFromEqSystem(threadData, _isyst);

          _vars = omc_BackendVariable_daeVars(threadData, _isyst);

          _eqnlst = omc_BackendEquation_getList(threadData, _tornEqs, _eqns);

          _varlst = omc_List_map1(threadData, _vlst, boxvar_BackendVariable_getVarAtIndexFirst, _vars);

          _explst = omc_BackendDAEUtil_getEqnSysRhs(threadData, omc_BackendEquation_listEquation(threadData, _eqnlst), omc_BackendVariable_listVar1(threadData, _varlst), mmc_mk_some(_funcs), NULL);

          /* Pattern-matching tuple assignment, wild first pattern */
          tmpMeta218 = mmc_mk_box1(0, _ishared);
          omc_Expression_traverseExpList(threadData, _explst, (modelica_fnptr) mmc_mk_box2(0,closure21_BackendDAEOptimize_countOperationsExp,tmpMeta218), _OMC_LIT209, &tmpMeta200);
          tmpMeta201 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta200), 1));
          tmp202 = mmc_unbox_integer(tmpMeta201);
          tmpMeta203 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta200), 2));
          tmp204 = mmc_unbox_integer(tmpMeta203);
          tmpMeta205 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta200), 3));
          tmp206 = mmc_unbox_integer(tmpMeta205);
          tmpMeta207 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta200), 4));
          tmp208 = mmc_unbox_integer(tmpMeta207);
          tmpMeta209 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta200), 5));
          tmp210 = mmc_unbox_integer(tmpMeta209);
          tmpMeta211 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta200), 6));
          tmp212 = mmc_unbox_integer(tmpMeta211);
          tmpMeta213 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta200), 7));
          tmp214 = mmc_unbox_integer(tmpMeta213);
          tmpMeta215 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta200), 8));
          tmp216 = mmc_unbox_integer(tmpMeta215);
          _numAdd = tmp202  /* pattern as ty=Integer */;
          _numMul = tmp204  /* pattern as ty=Integer */;
          _numDiv = tmp206  /* pattern as ty=Integer */;
          _numTrig = tmp208  /* pattern as ty=Integer */;
          _numRel = tmp210  /* pattern as ty=Integer */;
          _numLog = tmp212  /* pattern as ty=Integer */;
          _numOth = tmp214  /* pattern as ty=Integer */;
          _numFuncs = tmp216  /* pattern as ty=Integer */;

          tmpMeta219 = mmc_mk_box10(3, &BackendDAE_CompInfo_COUNTER__desc, _comp, mmc_mk_integer(_numAdd), mmc_mk_integer(_numMul), mmc_mk_integer(_numDiv), mmc_mk_integer(_numTrig), mmc_mk_integer(_numRel), mmc_mk_integer(_numLog), mmc_mk_integer(_numOth), mmc_mk_integer(_numFuncs));
          _torn = tmpMeta219;

          _otherEqs = omc_List_map__3(threadData, _innerEquations, boxvar_BackendDAEUtil_getEqnAndVarsFromInnerEquation ,&_vLstLst ,NULL);

          _vlst = omc_List_flatten(threadData, _vLstLst);

          _eqnlst = omc_BackendEquation_getList(threadData, _otherEqs, _eqns);

          _varlst = omc_List_map1(threadData, _vlst, boxvar_BackendVariable_getVarAtIndexFirst, _vars);

          _explst = omc_BackendDAEUtil_getEqnSysRhs(threadData, omc_BackendEquation_listEquation(threadData, _eqnlst), omc_BackendVariable_listVar1(threadData, _varlst), mmc_mk_some(_funcs), NULL);

          /* Pattern-matching tuple assignment, wild first pattern */
          tmpMeta238 = mmc_mk_box1(0, _ishared);
          omc_Expression_traverseExpList(threadData, _explst, (modelica_fnptr) mmc_mk_box2(0,closure22_BackendDAEOptimize_countOperationsExp,tmpMeta238), _OMC_LIT209, &tmpMeta220);
          tmpMeta221 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta220), 1));
          tmp222 = mmc_unbox_integer(tmpMeta221);
          tmpMeta223 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta220), 2));
          tmp224 = mmc_unbox_integer(tmpMeta223);
          tmpMeta225 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta220), 3));
          tmp226 = mmc_unbox_integer(tmpMeta225);
          tmpMeta227 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta220), 4));
          tmp228 = mmc_unbox_integer(tmpMeta227);
          tmpMeta229 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta220), 5));
          tmp230 = mmc_unbox_integer(tmpMeta229);
          tmpMeta231 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta220), 6));
          tmp232 = mmc_unbox_integer(tmpMeta231);
          tmpMeta233 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta220), 7));
          tmp234 = mmc_unbox_integer(tmpMeta233);
          tmpMeta235 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta220), 8));
          tmp236 = mmc_unbox_integer(tmpMeta235);
          _numAdd = tmp222  /* pattern as ty=Integer */;
          _numMul = tmp224  /* pattern as ty=Integer */;
          _numDiv = tmp226  /* pattern as ty=Integer */;
          _numTrig = tmp228  /* pattern as ty=Integer */;
          _numRel = tmp230  /* pattern as ty=Integer */;
          _numLog = tmp232  /* pattern as ty=Integer */;
          _numOth = tmp234  /* pattern as ty=Integer */;
          _numFuncs = tmp236  /* pattern as ty=Integer */;

          tmpMeta239 = mmc_mk_box10(3, &BackendDAE_CompInfo_COUNTER__desc, _comp, mmc_mk_integer(_numAdd), mmc_mk_integer(_numMul), mmc_mk_integer(_numDiv), mmc_mk_integer(_numTrig), mmc_mk_integer(_numRel), mmc_mk_integer(_numLog), mmc_mk_integer(_numOth), mmc_mk_integer(_numFuncs));
          _other = tmpMeta239;

          tmpMeta240 = mmc_mk_box5(5, &BackendDAE_CompInfo_TORN__ANALYSE__desc, _comp, _torn, _other, mmc_mk_integer(listLength(_tornEqs)));
          _compInfo = tmpMeta240;
          tmpMeta241 = mmc_mk_cons(_compInfo, _compInfosIn);
          tmpMeta1 = omc_BackendDAEOptimize_countOperationstraverseComps(threadData, _rest, _isyst, _ishared, tmpMeta241);
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta242;
          modelica_metatype tmpMeta243;
          modelica_metatype tmpMeta244;
          modelica_metatype tmpMeta245;
          modelica_metatype tmpMeta246;
          modelica_metatype tmpMeta247;
          modelica_integer tmp248;
          modelica_metatype tmpMeta249;
          modelica_metatype tmpMeta250;
          modelica_integer tmp251;
          modelica_metatype tmpMeta252;
          modelica_integer tmp253;
          modelica_metatype tmpMeta254;
          modelica_integer tmp255;
          modelica_metatype tmpMeta256;
          modelica_integer tmp257;
          modelica_metatype tmpMeta258;
          modelica_integer tmp259;
          modelica_metatype tmpMeta260;
          modelica_integer tmp261;
          modelica_metatype tmpMeta262;
          modelica_integer tmp263;
          modelica_metatype tmpMeta264;
          modelica_integer tmp265;
          modelica_metatype tmpMeta267;
          modelica_metatype tmpMeta268;
          modelica_metatype tmpMeta269;
          modelica_metatype tmpMeta270;
          modelica_integer tmp271;
          modelica_metatype tmpMeta272;
          modelica_integer tmp273;
          modelica_metatype tmpMeta274;
          modelica_integer tmp275;
          modelica_metatype tmpMeta276;
          modelica_integer tmp277;
          modelica_metatype tmpMeta278;
          modelica_integer tmp279;
          modelica_metatype tmpMeta280;
          modelica_integer tmp281;
          modelica_metatype tmpMeta282;
          modelica_integer tmp283;
          modelica_metatype tmpMeta284;
          modelica_integer tmp285;
          modelica_metatype tmpMeta287;
          modelica_metatype tmpMeta288;
          modelica_metatype tmpMeta289;
          modelica_metatype tmpMeta290;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta242 = MMC_CAR(tmp4_1);
          tmpMeta243 = MMC_CDR(tmp4_1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta242,7,4) == 0) goto tmp3_end;
          tmpMeta244 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta242), 2));
          tmpMeta245 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta244), 3));
          tmpMeta246 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta244), 4));
          tmpMeta247 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta242), 4));
          tmp248 = mmc_unbox_integer(tmpMeta247);
          if (0 /* false */ != tmp248) goto tmp3_end;
          
          _tornEqs = tmpMeta245;
          _innerEquations = tmpMeta246;
          _rest = tmpMeta243;
          /* Pattern matching succeeded */
          _comp = listHead(_inComps);

          _eqns = omc_BackendEquation_getEqnsFromEqSystem(threadData, _isyst);

          omc_BackendVariable_daeVars(threadData, _isyst);

          _eqnlst = omc_BackendEquation_getList(threadData, _tornEqs, _eqns);

          _explst = omc_List_map(threadData, _eqnlst, boxvar_BackendEquation_getEquationRHS);

          /* Pattern-matching tuple assignment, wild first pattern */
          tmpMeta267 = mmc_mk_box1(0, _ishared);
          omc_Expression_traverseExpList(threadData, _explst, (modelica_fnptr) mmc_mk_box2(0,closure23_BackendDAEOptimize_countOperationsExp,tmpMeta267), _OMC_LIT209, &tmpMeta249);
          tmpMeta250 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta249), 1));
          tmp251 = mmc_unbox_integer(tmpMeta250);
          tmpMeta252 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta249), 2));
          tmp253 = mmc_unbox_integer(tmpMeta252);
          tmpMeta254 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta249), 3));
          tmp255 = mmc_unbox_integer(tmpMeta254);
          tmpMeta256 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta249), 4));
          tmp257 = mmc_unbox_integer(tmpMeta256);
          tmpMeta258 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta249), 5));
          tmp259 = mmc_unbox_integer(tmpMeta258);
          tmpMeta260 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta249), 6));
          tmp261 = mmc_unbox_integer(tmpMeta260);
          tmpMeta262 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta249), 7));
          tmp263 = mmc_unbox_integer(tmpMeta262);
          tmpMeta264 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta249), 8));
          tmp265 = mmc_unbox_integer(tmpMeta264);
          _numAdd = tmp251  /* pattern as ty=Integer */;
          _numMul = tmp253  /* pattern as ty=Integer */;
          _numDiv = tmp255  /* pattern as ty=Integer */;
          _numTrig = tmp257  /* pattern as ty=Integer */;
          _numRel = tmp259  /* pattern as ty=Integer */;
          _numLog = tmp261  /* pattern as ty=Integer */;
          _numOth = tmp263  /* pattern as ty=Integer */;
          _numFuncs = tmp265  /* pattern as ty=Integer */;

          tmpMeta268 = mmc_mk_box10(3, &BackendDAE_CompInfo_COUNTER__desc, _comp, mmc_mk_integer(_numAdd), mmc_mk_integer(_numMul), mmc_mk_integer(_numDiv), mmc_mk_integer(_numTrig), mmc_mk_integer(_numRel), mmc_mk_integer(_numLog), mmc_mk_integer(_numOth), mmc_mk_integer(_numFuncs));
          _torn = tmpMeta268;

          _otherEqs = omc_List_map__3(threadData, _innerEquations, boxvar_BackendDAEUtil_getEqnAndVarsFromInnerEquation, NULL, NULL);

          _eqnlst = omc_BackendEquation_getList(threadData, _otherEqs, _eqns);

          _explst = omc_List_map(threadData, _eqnlst, boxvar_BackendEquation_getEquationRHS);

          /* Pattern-matching tuple assignment, wild first pattern */
          tmpMeta287 = mmc_mk_box1(0, _ishared);
          omc_Expression_traverseExpList(threadData, _explst, (modelica_fnptr) mmc_mk_box2(0,closure24_BackendDAEOptimize_countOperationsExp,tmpMeta287), _OMC_LIT209, &tmpMeta269);
          tmpMeta270 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta269), 1));
          tmp271 = mmc_unbox_integer(tmpMeta270);
          tmpMeta272 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta269), 2));
          tmp273 = mmc_unbox_integer(tmpMeta272);
          tmpMeta274 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta269), 3));
          tmp275 = mmc_unbox_integer(tmpMeta274);
          tmpMeta276 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta269), 4));
          tmp277 = mmc_unbox_integer(tmpMeta276);
          tmpMeta278 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta269), 5));
          tmp279 = mmc_unbox_integer(tmpMeta278);
          tmpMeta280 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta269), 6));
          tmp281 = mmc_unbox_integer(tmpMeta280);
          tmpMeta282 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta269), 7));
          tmp283 = mmc_unbox_integer(tmpMeta282);
          tmpMeta284 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta269), 8));
          tmp285 = mmc_unbox_integer(tmpMeta284);
          _numAdd = tmp271  /* pattern as ty=Integer */;
          _numMul = tmp273  /* pattern as ty=Integer */;
          _numDiv = tmp275  /* pattern as ty=Integer */;
          _numTrig = tmp277  /* pattern as ty=Integer */;
          _numRel = tmp279  /* pattern as ty=Integer */;
          _numLog = tmp281  /* pattern as ty=Integer */;
          _numOth = tmp283  /* pattern as ty=Integer */;
          _numFuncs = tmp285  /* pattern as ty=Integer */;

          tmpMeta288 = mmc_mk_box10(3, &BackendDAE_CompInfo_COUNTER__desc, _comp, mmc_mk_integer(_numAdd), mmc_mk_integer(_numMul), mmc_mk_integer(_numDiv), mmc_mk_integer(_numTrig), mmc_mk_integer(_numRel), mmc_mk_integer(_numLog), mmc_mk_integer(_numOth), mmc_mk_integer(_numFuncs));
          _other = tmpMeta288;

          tmpMeta289 = mmc_mk_box5(5, &BackendDAE_CompInfo_TORN__ANALYSE__desc, _comp, _torn, _other, mmc_mk_integer(listLength(_tornEqs)));
          _compInfo = tmpMeta289;
          tmpMeta290 = mmc_mk_cons(_compInfo, _compInfosIn);
          tmpMeta1 = omc_BackendDAEOptimize_countOperationstraverseComps(threadData, _rest, _isyst, _ishared, tmpMeta290);
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta291;
          modelica_metatype tmpMeta292;
          modelica_metatype tmpMeta293;
          modelica_metatype tmpMeta294;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta291 = MMC_CAR(tmp4_1);
          tmpMeta292 = MMC_CDR(tmp4_1);
          
          _comp = tmpMeta291;
          _rest = tmpMeta292;
          /* Pattern matching succeeded */
          tmpMeta293 = stringAppend(_OMC_LIT214,omc_BackendDump_strongComponentString(threadData, _comp));
          tmpMeta294 = stringAppend(tmpMeta293,_OMC_LIT45);
          fputs(MMC_STRINGDATA(tmpMeta294),stdout);
          tmpMeta1 = omc_BackendDAEOptimize_countOperationstraverseComps(threadData, _rest, _isyst, _ishared, _compInfosIn);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 12) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _compInfosOut = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _compInfosOut;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_countOperations0(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _inShared, modelica_boolean _inChanged, modelica_metatype *out_outShared, modelica_boolean *out_outChanged)
{
  modelica_metatype _osyst = NULL;
  modelica_metatype _outShared = NULL;
  modelica_boolean _outChanged;
  modelica_metatype _compInfos = NULL;
  modelica_metatype _comps = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _osyst = _isyst;
  _outShared = _inShared;
  _outChanged = _inChanged;
  // _compInfos has no default value.
  // _comps has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _isyst;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 7));
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta2,1,3) == 0) MMC_THROW_INTERNAL();
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 4));
  _comps = tmpMeta3;

  tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
  _compInfos = omc_BackendDAEOptimize_countOperationstraverseComps(threadData, _comps, _isyst, _inShared, tmpMeta4);
  _return: OMC_LABEL_UNUSED
  if (out_outShared) { *out_outShared = _outShared; }
  if (out_outChanged) { *out_outChanged = _outChanged; }
  return _osyst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_countOperations0(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _inShared, modelica_metatype _inChanged, modelica_metatype *out_outShared, modelica_metatype *out_outChanged)
{
  modelica_integer tmp1;
  modelica_boolean _outChanged;
  modelica_metatype _osyst = NULL;
  tmp1 = mmc_unbox_integer(_inChanged);
  _osyst = omc_BackendDAEOptimize_countOperations0(threadData, _isyst, _inShared, tmp1, out_outShared, &_outChanged);
  /* skip box _osyst; BackendDAE.EqSystem */
  /* skip box _outShared; BackendDAE.Shared */
  if (out_outChanged) { *out_outChanged = mmc_mk_icon(_outChanged); }
  return _osyst;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_countOperations(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  if(omc_Flags_isSet(threadData, _OMC_LIT213))
  {
    _outDAE = omc_BackendDAEUtil_mapEqSystemAndFold(threadData, _inDAE, boxvar_BackendDAEOptimize_countOperations0, mmc_mk_boolean(0 /* false */), NULL);
  }
  else
  {
    _outDAE = _inDAE;
  }
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_residualForm2(threadData_t *threadData, modelica_metatype _inEq, modelica_integer _ii, modelica_integer *out_oi)
{
  modelica_metatype _outEq = NULL;
  modelica_integer _oi;
  modelica_integer tmp1_c1 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEq has no default value.
  // _oi has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_integer tmp4_2;
    tmp4_1 = _inEq;
    tmp4_2 = _ii;
    {
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _e = NULL;
      modelica_metatype _source = NULL;
      modelica_integer _i;
      modelica_metatype _eqAttr = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e1 has no default value.
      // _e2 has no default value.
      // _e has no default value.
      // _source has no default value.
      // _i has no default value.
      // _eqAttr has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_boolean tmp11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          
          _e1 = tmpMeta6;
          _e2 = tmpMeta7;
          _source = tmpMeta8;
          _eqAttr = tmpMeta9;
          _i = tmp4_2;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta10 = omc_Expression_typeof(threadData, _e1);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,1) == 0) goto goto_2;
          

          /* Pattern-matching assignment */
          tmp11 = (omc_Expression_isZero(threadData, _e1) || omc_Expression_isZero(threadData, _e2));
          if (0 /* false */ != tmp11) goto goto_2;

          tmpMeta12 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, _OMC_LIT17, _e2);
          _e = tmpMeta12;

          _e = omc_ExpressionSimplify_simplify(threadData, _e, NULL);

          tmpMeta13 = mmc_mk_box4(13, &DAE_SymbolicOperation_OP__RESIDUAL__desc, _e1, _e2, _e);
          _source = omc_ElementSource_addSymbolicTransformation(threadData, _source, tmpMeta13);
          tmpMeta14 = mmc_mk_box5(3, &BackendDAE_Equation_EQUATION__desc, _OMC_LIT139, _e, _source, _eqAttr);
          tmpMeta[0+0] = tmpMeta14;
          tmp1_c1 = _i;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inEq;
          tmp1_c1 = _ii;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outEq = tmpMeta[0+0];
  _oi = tmp1_c1;
  _return: OMC_LABEL_UNUSED
  if (out_oi) { *out_oi = _oi; }
  return _outEq;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_residualForm2(threadData_t *threadData, modelica_metatype _inEq, modelica_metatype _ii, modelica_metatype *out_oi)
{
  modelica_integer tmp1;
  modelica_integer _oi;
  modelica_metatype _outEq = NULL;
  tmp1 = mmc_unbox_integer(_ii);
  _outEq = omc_BackendDAEOptimize_residualForm2(threadData, _inEq, tmp1, &_oi);
  /* skip box _outEq; BackendDAE.Equation */
  if (out_oi) { *out_oi = mmc_mk_icon(_oi); }
  return _outEq;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_residualForm1(threadData_t *threadData, modelica_metatype _syst, modelica_integer _i, modelica_metatype _shared, modelica_metatype *out_oshared)
{
  modelica_metatype _osyst = NULL;
  modelica_metatype _oshared = NULL;
  modelica_metatype _eqs = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _osyst = _syst;
  _oshared = _shared;
  // _eqs has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _syst;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  _eqs = tmpMeta2;

  omc_BackendEquation_traverseEquationArray__WithUpdate(threadData, _eqs, boxvar_BackendDAEOptimize_residualForm2, mmc_mk_integer(((modelica_integer) 1)), NULL);
  _return: OMC_LABEL_UNUSED
  if (out_oshared) { *out_oshared = _oshared; }
  return _osyst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_residualForm1(threadData_t *threadData, modelica_metatype _syst, modelica_metatype _i, modelica_metatype _shared, modelica_metatype *out_oshared)
{
  modelica_integer tmp1;
  modelica_metatype _osyst = NULL;
  tmp1 = mmc_unbox_integer(_i);
  _osyst = omc_BackendDAEOptimize_residualForm1(threadData, _syst, tmp1, _shared, out_oshared);
  /* skip box _osyst; BackendDAE.EqSystem */
  /* skip box _oshared; BackendDAE.Shared */
  return _osyst;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_residualForm(threadData_t *threadData, modelica_metatype _dlow)
{
  modelica_metatype _odlow = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _odlow has no default value.
  _odlow = omc_BackendDAEUtil_mapEqSystem1(threadData, _dlow, boxvar_BackendDAEOptimize_residualForm1, mmc_mk_integer(((modelica_integer) 1)));
  _return: OMC_LABEL_UNUSED
  return _odlow;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_partitionIndependentBlocksHelper(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _ishared, modelica_integer _numErrorMessages, modelica_boolean _throwNoError, modelica_metatype *out_oshared)
{
  modelica_metatype _systs = NULL;
  modelica_metatype _oshared = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _systs has no default value.
  // _oshared has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _isyst;
    tmp4_2 = _ishared;
    {
      modelica_metatype _m = NULL;
      modelica_metatype _mT = NULL;
      modelica_metatype _rm = NULL;
      modelica_metatype _rmT = NULL;
      modelica_metatype _eqPartMap = NULL;
      modelica_metatype _varPartMap = NULL;
      modelica_metatype _rixs = NULL;
      modelica_metatype _vars = NULL;
      modelica_metatype _rvars = NULL;
      modelica_boolean _b;
      modelica_boolean _isInitial;
      modelica_integer _i;
      modelica_metatype _shared = NULL;
      modelica_metatype _syst = NULL;
      modelica_metatype _funcs = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _m has no default value.
      // _mT has no default value.
      // _rm has no default value.
      // _rmT has no default value.
      // _eqPartMap has no default value.
      // _varPartMap has no default value.
      // _rixs has no default value.
      // _vars has no default value.
      // _rvars has no default value.
      // _b has no default value.
      // _isInitial has no default value.
      // _i has no default value.
      // _shared has no default value.
      // _syst has no default value.
      // _funcs has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_boolean tmp7;
          modelica_metatype tmpMeta8;
          
          _syst = tmp4_1;
          _shared = tmp4_2;
          /* Pattern matching succeeded */
          _isInitial = omc_BackendDAEUtil_isInitializationDAE(threadData, _ishared);

          _funcs = omc_BackendDAEUtil_getFunctions(threadData, _ishared);

          _syst = omc_BackendDAEUtil_getAdjacencyMatrixfromOption(threadData, _syst, _OMC_LIT22, mmc_mk_some(_funcs), _isInitial ,&_m ,&_mT);

          _rm = omc_BackendDAEUtil_removedAdjacencyMatrix(threadData, _syst, _OMC_LIT22, mmc_mk_some(_funcs), _isInitial ,&_rmT);

          _eqPartMap = arrayCreate(arrayLength(_m), mmc_mk_integer(((modelica_integer) 0)));

          _varPartMap = arrayCreate(arrayLength(_mT), mmc_mk_integer(((modelica_integer) 0)));

          _rixs = arrayCreate(arrayLength(_rm), mmc_mk_integer(((modelica_integer) 0)));

          _vars = arrayCreate(arrayLength(_mT), mmc_mk_boolean(0 /* false */));

          _rvars = arrayCreate(arrayLength(_rmT), mmc_mk_boolean(0 /* false */));

          _i = omc_SynchronousFeatures_partitionIndependentBlocks0(threadData, _m, _mT, _rm, _rmT, _eqPartMap, _varPartMap, _rixs, _vars, _rvars);

          _b = (_i > ((modelica_integer) 1));

          tmp7 = (modelica_boolean)_b;
          if(tmp7)
          {
            tmpMeta8 = omc_SynchronousFeatures_partitionIndependentBlocksSplitBlocks(threadData, _i, _syst, _eqPartMap, _rixs, _mT, _rmT, _throwNoError, _funcs, _isInitial, NULL, NULL);
          }
          else
          {
            tmpMeta6 = mmc_mk_cons(_syst, MMC_REFSTRUCTLIT(mmc_nil));
            tmpMeta8 = tmpMeta6;
          }
          _systs = tmpMeta8;

          omc_GCExt_free(threadData, _eqPartMap);

          omc_GCExt_free(threadData, _varPartMap);

          omc_GCExt_free(threadData, _rixs);
          tmpMeta[0+0] = _systs;
          tmpMeta[0+1] = _shared;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          omc_Error_assertion(threadData, (!(_numErrorMessages == omc_Error_getNumErrorMessages(threadData))), _OMC_LIT215, _OMC_LIT7);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _systs = tmpMeta[0+0];
  _oshared = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_oshared) { *out_oshared = _oshared; }
  return _systs;
}
modelica_metatype boxptr_BackendDAEOptimize_partitionIndependentBlocksHelper(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _ishared, modelica_metatype _numErrorMessages, modelica_metatype _throwNoError, modelica_metatype *out_oshared)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _systs = NULL;
  tmp1 = mmc_unbox_integer(_numErrorMessages);
  tmp2 = mmc_unbox_integer(_throwNoError);
  _systs = omc_BackendDAEOptimize_partitionIndependentBlocksHelper(threadData, _isyst, _ishared, tmp1, tmp2, out_oshared);
  /* skip box _systs; list<BackendDAE.EqSystem> */
  /* skip box _oshared; BackendDAE.Shared */
  return _systs;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_partitionIndependentBlocks(threadData_t *threadData, modelica_metatype _dlow)
{
  modelica_metatype _outDlow = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDlow has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _dlow;
    {
      modelica_metatype _syst = NULL;
      modelica_metatype _systs = NULL;
      modelica_metatype _shared = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _syst has no default value.
      // _systs has no default value.
      // _shared has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (listEmpty(tmpMeta6)) goto tmp3_end;
          tmpMeta7 = MMC_CAR(tmpMeta6);
          tmpMeta8 = MMC_CDR(tmpMeta6);
          if (!listEmpty(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          _syst = tmpMeta7;
          _shared = tmpMeta9;
          /* Pattern matching succeeded */
          _systs = omc_BackendDAEOptimize_partitionIndependentBlocksHelper(threadData, _syst, _shared, omc_Error_getNumErrorMessages(threadData), 0 /* false */ ,&_shared);
          tmpMeta10 = mmc_mk_box3(3, &BackendDAE_BackendDAE_DAE__desc, _systs, _shared);
          tmpMeta1 = tmpMeta10;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta11 = omc_BackendDAEOptimize_collapseIndependentBlocks(threadData, _dlow);
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
          if (listEmpty(tmpMeta12)) goto goto_2;
          tmpMeta13 = MMC_CAR(tmpMeta12);
          tmpMeta14 = MMC_CDR(tmpMeta12);
          if (!listEmpty(tmpMeta14)) goto goto_2;
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 3));
          _syst = tmpMeta13;
          _shared = tmpMeta15;

          _systs = omc_BackendDAEOptimize_partitionIndependentBlocksHelper(threadData, _syst, _shared, omc_Error_getNumErrorMessages(threadData), 0 /* false */ ,&_shared);
          tmpMeta16 = mmc_mk_box3(3, &BackendDAE_BackendDAE_DAE__desc, _systs, _shared);
          tmpMeta1 = tmpMeta16;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outDlow = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outDlow;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_mergeIndependentBlocks(threadData_t *threadData, modelica_metatype _syst1, modelica_metatype _syst2)
{
  modelica_metatype _syst = NULL;
  modelica_metatype _vars = NULL;
  modelica_metatype _eqs = NULL;
  modelica_metatype _removedEqs = NULL;
  modelica_metatype _stateSets = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _syst has no default value.
  // _vars has no default value.
  // _eqs has no default value.
  // _removedEqs has no default value.
  // _stateSets has no default value.
  _vars = omc_BackendVariable_addVariables(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_syst1), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_syst2), 2))));

  _eqs = omc_BackendEquation_addList(threadData, omc_BackendEquation_equationList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_syst1), 3)))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_syst2), 3))));

  _removedEqs = omc_BackendEquation_addList(threadData, omc_BackendEquation_equationList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_syst1), 10)))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_syst2), 10))));

  _stateSets = listAppend((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_syst1), 8))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_syst2), 8))));

  _syst = omc_BackendDAEUtil_createEqSystem(threadData, _vars, _eqs, _stateSets, _OMC_LIT110, _removedEqs);
  _return: OMC_LABEL_UNUSED
  return _syst;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_collapseIndependentBlocks(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  modelica_metatype _syst = NULL;
  modelica_metatype _systs = NULL;
  modelica_metatype _shared = NULL;
  modelica_integer _sz;
  modelica_metatype _vars = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_integer tmp4;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  // _syst has no default value.
  // _systs has no default value.
  // _shared has no default value.
  // _sz has no default value.
  // _vars has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _inDAE;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  _systs = tmpMeta2;
  _shared = tmpMeta3;

  {
    modelica_integer __omcQ_24tmpVar21;
    modelica_integer __omcQ_24tmpVar20;
    modelica_integer tmp5;
    modelica_metatype _s_loopVar = 0;
    modelica_metatype _s;
    _s_loopVar = _systs;
    __omcQ_24tmpVar21 = ((modelica_integer) 0); /* defaultValue */
    while(1) {
      tmp5 = 1;
      if (!listEmpty(_s_loopVar)) {
        _s = MMC_CAR(_s_loopVar);
        _s_loopVar = MMC_CDR(_s_loopVar);
        tmp5--;
      }
      if (tmp5 == 0) {
        __omcQ_24tmpVar20 = omc_BackendVariable_varsSize(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_s), 2))));
        __omcQ_24tmpVar21 = __omcQ_24tmpVar21 + __omcQ_24tmpVar20;
      } else if (tmp5 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    tmp4 = __omcQ_24tmpVar21;
  }
  _vars = omc_BackendVariable_emptyVarsSized(threadData, ((modelica_integer)floor((1.4) * (((modelica_real)tmp4)))));

  tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
  _syst = omc_List_fold(threadData, listReverse(_systs), boxvar_BackendDAEOptimize_mergeIndependentBlocks, omc_BackendDAEUtil_createEqSystem(threadData, _vars, omc_BackendEquation_emptyEqns(threadData), tmpMeta6, _OMC_LIT110, omc_BackendEquation_emptyEqns(threadData)));

  tmpMeta7 = mmc_mk_cons(_syst, MMC_REFSTRUCTLIT(mmc_nil));
  tmpMeta8 = mmc_mk_box3(3, &BackendDAE_BackendDAE_DAE__desc, tmpMeta7, _shared);
  _outDAE = tmpMeta8;
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_getFunctionAndBody(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _fns, modelica_metatype *out_outFnBody)
{
  modelica_metatype _outFn = NULL;
  modelica_metatype _outFnBody = NULL;
  modelica_metatype _fn = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outFn has no default value.
  // _outFnBody has no default value.
  // _fn has no default value.
  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp2_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta5 = omc_DAE_AvlTreePathFunction_get(threadData, _fns, _inPath);
          if (optionNone(tmpMeta5)) goto goto_1;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 1));
          _outFn = tmpMeta5;
          _fn = tmpMeta6;

          _outFnBody = omc_DAEUtil_getFunctionElements(threadData, _fn);
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          /* Pattern matching succeeded */
          _outFn = mmc_mk_none();

          tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
          _outFnBody = tmpMeta7;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      tmp2_done:
      (void)tmp3;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp2_done2;
      goto_1:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp3 < 2) {
        goto tmp2_top;
      }
      MMC_THROW_INTERNAL();
      tmp2_done2:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  if (out_outFnBody) { *out_outFnBody = _outFnBody; }
  return _outFn;
}

static modelica_metatype closure25_BackendDAEOptimize_checkUnusedFunctions(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inUsedFunctions, modelica_metatype tmp5)
{
  modelica_metatype inFunctions = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_checkUnusedFunctions(thData, inExp, inFunctions, inUsedFunctions, tmp5);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_addUnusedFunction(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inFunctions, modelica_metatype _inUsedFunctions)
{
  modelica_metatype _outUsedFunctions = NULL;
  modelica_metatype _f = NULL;
  modelica_metatype _body = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outUsedFunctions = _inUsedFunctions;
  // _f has no default value.
  // _body has no default value.
  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp2_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          /* Pattern matching succeeded */
          omc_DAE_AvlTreePathFunction_get(threadData, _inUsedFunctions, _inPath);
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          /* Pattern matching succeeded */
          _f = omc_BackendDAEOptimize_getFunctionAndBody(threadData, _inPath, _inFunctions ,&_body);

          if(isSome(_f))
          {
            _outUsedFunctions = omc_DAE_AvlTreePathFunction_add(threadData, _outUsedFunctions, _inPath, _f, boxvar_DAE_AvlTreePathFunction_addConflictDefault);

            tmpMeta6 = mmc_mk_box1(0, _inFunctions);
            omc_DAEUtil_traverseDAEElementList(threadData, _body, (modelica_fnptr) mmc_mk_box2(0,closure25_BackendDAEOptimize_checkUnusedFunctions,tmpMeta6), _outUsedFunctions ,&_outUsedFunctions);
          }
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      tmp2_done:
      (void)tmp3;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp2_done2;
      goto_1:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp3 < 2) {
        goto tmp2_top;
      }
      MMC_THROW_INTERNAL();
      tmp2_done2:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _outUsedFunctions;
}

static modelica_metatype closure26_BackendDAEOptimize_checkUnusedFunctions(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inUsedFunctions, modelica_metatype tmp12)
{
  modelica_metatype inFunctions = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_checkUnusedFunctions(thData, inExp, inFunctions, inUsedFunctions, tmp12);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_checkUnusedFunctionsExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inFunctions, modelica_metatype _inUsedFunctions, modelica_metatype *out_outUsedFunctions)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _outUsedFunctions = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outExp = _inExp;
  // _outUsedFunctions has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inExp;
    {
      modelica_metatype _path = NULL;
      modelica_metatype _cr = NULL;
      modelica_metatype _usedfuncs = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _path has no default value.
      // _cr has no default value.
      // _usedfuncs has no default value.
      tmp4 = 0;
      for (; tmp4 < 5; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _path = tmpMeta6;
          /* Pattern matching succeeded */
          tmpMeta1 = omc_BackendDAEOptimize_addUnusedFunction(threadData, _path, _inFunctions, _inUsedFunctions);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,4) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _path = tmpMeta7;
          /* Pattern matching succeeded */
          tmpMeta1 = omc_BackendDAEOptimize_addUnusedFunction(threadData, _path, _inFunctions, _inUsedFunctions);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,13,2) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,11,4) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 5));
          _path = tmpMeta10;
          /* Pattern matching succeeded */
          tmpMeta1 = omc_BackendDAEOptimize_addUnusedFunction(threadData, _path, _inFunctions, _inUsedFunctions);
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta13;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _cr = tmpMeta11;
          /* Pattern matching succeeded */
          tmpMeta13 = mmc_mk_box1(0, _inFunctions);
          omc_Expression_traverseExpCrefDims(threadData, _cr, (modelica_fnptr) mmc_mk_box2(0,closure26_BackendDAEOptimize_checkUnusedFunctions,tmpMeta13), _inUsedFunctions ,&_usedfuncs);
          tmpMeta1 = _usedfuncs;
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _inUsedFunctions;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outUsedFunctions = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  if (out_outUsedFunctions) { *out_outUsedFunctions = _outUsedFunctions; }
  return _outExp;
}

static modelica_metatype closure27_BackendDAEOptimize_checkUnusedFunctionsExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inUsedFunctions, modelica_metatype tmp1)
{
  modelica_metatype inFunctions = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_checkUnusedFunctionsExp(thData, inExp, inFunctions, inUsedFunctions, tmp1);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_checkUnusedFunctions(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inFunctions, modelica_metatype _inUsedFunctions, modelica_metatype *out_outUsedFunctions)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _outUsedFunctions = NULL;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _outUsedFunctions has no default value.
  tmpMeta2 = mmc_mk_box1(0, _inFunctions);
  _outExp = omc_Expression_traverseExpBottomUp(threadData, _inExp, (modelica_fnptr) mmc_mk_box2(0,closure27_BackendDAEOptimize_checkUnusedFunctionsExp,tmpMeta2), _inUsedFunctions ,&_outUsedFunctions);
  _return: OMC_LABEL_UNUSED
  if (out_outUsedFunctions) { *out_outUsedFunctions = _outUsedFunctions; }
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_removeUnusedFunctionsSymJacs(threadData_t *threadData, modelica_metatype _inShared, modelica_metatype _inFunctions, modelica_metatype _inUsedFunctions)
{
  modelica_metatype _outUsedFunctions = NULL;
  modelica_metatype _bdae = NULL;
  modelica_metatype _usedfuncs = NULL;
  modelica_metatype _shared = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta10;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outUsedFunctions = _inUsedFunctions;
  // _bdae has no default value.
  // _usedfuncs has no default value.
  // _shared has no default value.
  {
    modelica_metatype _sjac;
    for (tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inShared), 16))); !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _sjac = MMC_CAR(tmpMeta1);
      { /* match expression */
        modelica_metatype tmp4_1;
        tmp4_1 = _sjac;
        {
          volatile mmc_switch_type tmp4;
          int tmp5;
          tmp4 = 0;
          for (; tmp4 < 2; tmp4++) {
            switch (MMC_SWITCH_CAST(tmp4)) {
            case 0: {
              modelica_metatype tmpMeta6;
              modelica_metatype tmpMeta7;
              modelica_metatype tmpMeta8;
              modelica_metatype tmpMeta9;
              tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
              if (optionNone(tmpMeta6)) goto tmp3_end;
              tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
              tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
              
              _bdae = tmpMeta8;
              /* Pattern matching succeeded */
              _bdae = omc_BackendDAEUtil_setFunctionTree(threadData, _bdae, _inFunctions);

              _shared = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_bdae), 3)));

              tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
              _usedfuncs = omc_BackendDAEOptimize_removeUnusedFunctions(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_bdae), 2))), _shared, tmpMeta9, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 12))), _inUsedFunctions);

              _outUsedFunctions = omc_DAE_AvlTreePathFunction_join(threadData, _outUsedFunctions, _usedfuncs, boxvar_DAE_AvlTreePathFunction_addConflictDefault);
              goto tmp3_done;
            }
            case 1: {
              
              /* Pattern matching succeeded */
              goto tmp3_done;
            }
            }
            goto tmp3_end;
            tmp3_end: ;
          }
          goto goto_2;
          goto_2:;
          MMC_THROW_INTERNAL();
          goto tmp3_done;
          tmp3_done:;
        }
      }
      ;
    }
  }

  { /* match expression */
    modelica_metatype tmp13_1;
    tmp13_1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inShared), 20)));
    {
      volatile mmc_switch_type tmp13;
      int tmp14;
      tmp13 = 0;
      for (; tmp13 < 3; tmp13++) {
        switch (MMC_SWITCH_CAST(tmp13)) {
        case 0: {
          if (!optionNone(tmp13_1)) goto tmp12_end;
          /* Pattern matching succeeded */
          goto tmp12_done;
        }
        case 1: {
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          if (optionNone(tmp13_1)) goto tmp12_end;
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp13_1), 1));
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,1,4) == 0) goto tmp12_end;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
          if (optionNone(tmpMeta17)) goto tmp12_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 1));
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 1));
          
          _bdae = tmpMeta19;
          /* Pattern matching succeeded */
          _bdae = omc_BackendDAEUtil_setFunctionTree(threadData, _bdae, _inFunctions);

          _shared = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_bdae), 3)));

          tmpMeta20 = MMC_REFSTRUCTLIT(mmc_nil);
          _usedfuncs = omc_BackendDAEOptimize_removeUnusedFunctions(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_bdae), 2))), _shared, tmpMeta20, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 12))), _inUsedFunctions);

          _outUsedFunctions = omc_DAE_AvlTreePathFunction_join(threadData, _outUsedFunctions, _usedfuncs, boxvar_DAE_AvlTreePathFunction_addConflictDefault);
          goto tmp12_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          omc_Error_addInternalError(threadData, _OMC_LIT216, _OMC_LIT218);
          goto goto_11;
          goto tmp12_done;
        }
        }
        goto tmp12_end;
        tmp12_end: ;
      }
      goto goto_11;
      goto_11:;
      MMC_THROW_INTERNAL();
      goto tmp12_done;
      tmp12_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _outUsedFunctions;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_copyRecordConstructorAndExternalObjConstructorDestructor(threadData_t *threadData, modelica_metatype _inAllFunctionTree)
{
  modelica_metatype _outUsedFunctionTree = NULL;
  modelica_metatype _allfuncs_list = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta21;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outUsedFunctionTree has no default value.
  // _allfuncs_list has no default value.
  _outUsedFunctionTree = _OMC_LIT219;

  _allfuncs_list = omc_DAEUtil_getFunctionList(threadData, _inAllFunctionTree, 0 /* false */);

  {
    modelica_metatype _func;
    for (tmpMeta1 = _allfuncs_list; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _func = MMC_CAR(tmpMeta1);
      { /* match expression */
        modelica_metatype tmp4_1;
        tmp4_1 = _func;
        {
          modelica_metatype _path = NULL;
          modelica_metatype _var_list = NULL;
          modelica_metatype _obind = NULL;
          modelica_metatype _bind_exp = NULL;
          volatile mmc_switch_type tmp4;
          int tmp5;
          // _path has no default value.
          // _var_list has no default value.
          // _obind has no default value.
          // _bind_exp has no default value.
          tmp4 = 0;
          for (; tmp4 < 2; tmp4++) {
            switch (MMC_SWITCH_CAST(tmp4)) {
            case 0: {
              modelica_metatype tmpMeta6;
              modelica_metatype tmpMeta16;
              modelica_metatype tmpMeta17;
              modelica_metatype tmpMeta18;
              modelica_metatype tmpMeta19;
              if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
              tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
              
              _path = tmpMeta6;
              /* Pattern matching succeeded */
              _outUsedFunctionTree = omc_DAE_AvlTreePathFunction_add(threadData, _outUsedFunctionTree, _path, mmc_mk_some(_func), boxvar_DAE_AvlTreePathFunction_addConflictDefault);

              { /* matchcontinue expression */
                {
                  volatile mmc_switch_type tmp9;
                  int tmp10;
                  tmp9 = 0;
                  MMC_TRY_INTERNAL(mmc_jumper)
                  tmp8_top:
                  threadData->mmc_jumper = &new_mmc_jumper;
                  for (; tmp9 < 2; tmp9++) {
                    switch (MMC_SWITCH_CAST(tmp9)) {
                    case 0: {
                      modelica_metatype tmpMeta11;
                      modelica_metatype tmpMeta12;
                      modelica_metatype tmpMeta13;
                      /* Pattern matching succeeded */
                      /* Pattern-matching assignment */
                      tmpMeta11 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 3)));
                      if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,11,4) == 0) goto goto_7;
                      tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 3));
                      if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,9,4) == 0) goto goto_7;
                      tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 3));
                      _var_list = tmpMeta13;
                      goto tmp8_done;
                    }
                    case 1: {
                      modelica_metatype tmpMeta14;
                      modelica_metatype tmpMeta15;
                      /* Pattern matching succeeded */
                      tmpMeta15 = stringAppend(_OMC_LIT220,omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT221, 1 /* true */, 0 /* false */));
                      tmpMeta14 = mmc_mk_cons(tmpMeta15, MMC_REFSTRUCTLIT(mmc_nil));
                      omc_Error_addSourceMessage(threadData, _OMC_LIT58, tmpMeta14, _OMC_LIT222);

                      goto goto_7;
                      goto tmp8_done;
                    }
                    }
                    goto tmp8_end;
                    tmp8_end: ;
                  }
                  goto goto_7;
                  tmp8_done:
                  (void)tmp9;
                  MMC_RESTORE_INTERNAL(mmc_jumper);
                  goto tmp8_done2;
                  goto_7:;
                  MMC_CATCH_INTERNAL(mmc_jumper);
                  if (++tmp9 < 2) {
                    goto tmp8_top;
                  }
                  goto goto_2;
                  tmp8_done2:;
                }
              }
              ;

              {
                modelica_metatype _var;
                for (tmpMeta16 = _var_list; !listEmpty(tmpMeta16); tmpMeta16=MMC_CDR(tmpMeta16))
                {
                  _var = MMC_CAR(tmpMeta16);
                  _obind = omc_Types_getBindingExpOptional(threadData, _var);

                  if(isSome(_obind))
                  {
                    /* Pattern-matching assignment */
                    tmpMeta17 = _obind;
                    if (optionNone(tmpMeta17)) goto goto_2;
                    tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 1));
                    _bind_exp = tmpMeta18;

                    omc_BackendDAEOptimize_checkUnusedFunctions(threadData, _bind_exp, _inAllFunctionTree, _outUsedFunctionTree ,&_outUsedFunctionTree);
                  }
                }
              }
              goto tmp3_done;
            }
            case 1: {
              modelica_metatype tmpMeta20;
              if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,10) == 0) goto tmp3_end;
              tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
              
              _path = tmpMeta20;
              /* Pattern matching succeeded */
              if(((stringEqual(omc_AbsynUtil_pathLastIdent(threadData, _path), _OMC_LIT223)) || (stringEqual(omc_AbsynUtil_pathLastIdent(threadData, _path), _OMC_LIT224))))
              {
                _outUsedFunctionTree = omc_DAE_AvlTreePathFunction_add(threadData, _outUsedFunctionTree, _path, mmc_mk_some(_func), boxvar_DAE_AvlTreePathFunction_addConflictDefault);
              }
              goto tmp3_done;
            }
            }
            goto tmp3_end;
            tmp3_end: ;
          }
          goto goto_2;
          goto_2:;
          MMC_THROW_INTERNAL();
          goto tmp3_done;
          tmp3_done:;
        }
      }
      ;
    }
  }
  _return: OMC_LABEL_UNUSED
  return _outUsedFunctionTree;
}

static modelica_metatype closure28_BackendDAEOptimize_checkUnusedFunctions(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inUsedFunctions, modelica_metatype tmp1)
{
  modelica_metatype inFunctions = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_checkUnusedFunctions(thData, inExp, inFunctions, inUsedFunctions, tmp1);
}
DLLDirection
modelica_metatype omc_BackendDAEOptimize_removeUnusedFunctions(threadData_t *threadData, modelica_metatype _inEqs, modelica_metatype _inShared, modelica_metatype _inEquationLst, modelica_metatype _inFunctionTree, modelica_metatype _inusedFunctions)
{
  modelica_metatype _outFunctionTree = NULL;
  modelica_fnptr _func;
  modelica_metatype _funcs = NULL;
  modelica_metatype _usedfuncs = NULL;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outFunctionTree has no default value.
  // _funcs has no default value.
  // _usedfuncs has no default value.
  _funcs = _inFunctionTree;

  _usedfuncs = _inusedFunctions;

  tmpMeta2 = mmc_mk_box1(0, _funcs);
  _func = (modelica_fnptr) (modelica_fnptr) mmc_mk_box2(0,closure28_BackendDAEOptimize_checkUnusedFunctions,tmpMeta2);

  _usedfuncs = omc_List_fold1(threadData, _inEqs, boxvar_BackendDAEUtil_traverseBackendDAEExpsEqSystem, ((modelica_fnptr) _func), _usedfuncs);

  _usedfuncs = omc_List_fold1(threadData, _inEqs, boxvar_BackendDAEUtil_traverseBackendDAEExpsEqSystemJacobians, ((modelica_fnptr) _func), _usedfuncs);

  _usedfuncs = omc_List_fold1(threadData, _inEquationLst, boxvar_BackendEquation_traverseExpsOfEquationList__WithoutChange, ((modelica_fnptr) _func), _usedfuncs);

  _usedfuncs = omc_BackendDAEUtil_traverseBackendDAEExpsVars(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inShared), 2))), ((modelica_fnptr) _func), _usedfuncs);

  _usedfuncs = omc_BackendDAEUtil_traverseBackendDAEExpsVars(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inShared), 4))), ((modelica_fnptr) _func), _usedfuncs);

  _usedfuncs = omc_BackendDAEUtil_traverseBackendDAEExpsVars(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inShared), 5))), ((modelica_fnptr) _func), _usedfuncs);

  _usedfuncs = omc_BackendDAEUtil_traverseBackendDAEExpsEqns(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inShared), 7))), ((modelica_fnptr) _func), _usedfuncs);

  _usedfuncs = omc_BackendDAEUtil_traverseBackendDAEExpsEqns(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inShared), 6))), ((modelica_fnptr) _func), _usedfuncs);

  _usedfuncs = omc_BackendDAEOptimize_removeUnusedFunctionsSymJacs(threadData, _inShared, _funcs, _usedfuncs);

  _outFunctionTree = _usedfuncs;
  _return: OMC_LABEL_UNUSED
  return _outFunctionTree;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_checkUnusedVariablesExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTuple, modelica_metatype *out_outTuple)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _outTuple = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _outTuple has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inExp;
    tmp4_2 = _inTuple;
    {
      modelica_metatype _e = NULL;
      modelica_metatype _e1 = NULL;
      modelica_metatype _vars = NULL;
      modelica_metatype _vars1 = NULL;
      modelica_metatype _cr = NULL;
      modelica_metatype _expl = NULL;
      modelica_metatype _varLst = NULL;
      modelica_metatype _var = NULL;
      modelica_metatype _tp = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e has no default value.
      // _e1 has no default value.
      // _vars has no default value.
      // _vars1 has no default value.
      // _cr has no default value.
      // _expl has no default value.
      // _varLst has no default value.
      // _var has no default value.
      // _tp has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 7; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,3) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (4 != MMC_STRLEN(tmpMeta7) || strcmp(MMC_STRINGDATA(_OMC_LIT27), MMC_STRINGDATA(tmpMeta7)) != 0) goto tmp3_end;
          
          _e = tmp4_1;
          _tp = tmp4_2;
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _tp;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,9,4) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,3,1) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
          
          _e = tmp4_1;
          _cr = tmpMeta8;
          _varLst = tmpMeta11;
          _tp = tmp4_2;
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          _expl = omc_List_map1(threadData, _varLst, boxvar_Expression_generateCrefsExpFromExpVar, _cr);

          omc_Expression_traverseExpList(threadData, _expl, boxvar_BackendDAEOptimize_checkUnusedVariablesExp, _tp ,&_tp);
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _tp;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta12;
          modelica_boolean tmp13;
          modelica_metatype tmpMeta14;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,6,2) == 0) goto tmp3_end;
          
          _e = tmp4_1;
          _tp = tmp4_2;
          tmp4 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
          /* Pattern-matching tuple assignment */
          tmpMeta14 = omc_Expression_extendArrExp(threadData, _e, 0 /* false */, &tmp13);
          _e1 = tmpMeta14;
          if (1 /* true */ != tmp13) goto goto_2;

          omc_Expression_traverseExpBottomUp(threadData, _e1, boxvar_BackendDAEOptimize_checkUnusedVariablesExp, _tp ,&_tp);
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _tp;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta15;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,13,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _inTuple;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          _cr = tmpMeta16;
          _vars1 = tmpMeta17;
          /* Pattern matching succeeded */
          omc_BackendVariable_getVar(threadData, _cr, _vars1, NULL);
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _inTuple;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          _cr = tmpMeta18;
          _vars = tmpMeta19;
          _vars1 = tmpMeta20;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta21 = omc_BackendVariable_getVar(threadData, _cr, _vars, NULL);
          if (listEmpty(tmpMeta21)) goto goto_2;
          tmpMeta22 = MMC_CAR(tmpMeta21);
          tmpMeta23 = MMC_CDR(tmpMeta21);
          _var = tmpMeta22;

          _vars1 = omc_BackendVariable_addVar(threadData, _var, _vars1);
          tmpMeta24 = mmc_mk_box2(0, _vars, _vars1);
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = tmpMeta24;
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _inTuple;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 7) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outExp = tmpMeta[0+0];
  _outTuple = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outTuple) { *out_outTuple = _outTuple; }
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_checkUnusedVariables(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_outTpl)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _outTpl = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _outTpl has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _inExp;
    {
      modelica_metatype _exp = NULL;
      modelica_metatype _tpl = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _exp has no default value.
      // _tpl has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          
          _exp = tmp4_1;
          /* Pattern matching succeeded */
          omc_Expression_traverseExpBottomUp(threadData, _exp, boxvar_BackendDAEOptimize_checkUnusedVariablesExp, _inTpl ,&_tpl);
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = _tpl;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _inTpl;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outExp = tmpMeta[0+0];
  _outTpl = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outTpl) { *out_outTpl = _outTpl; }
  return _outExp;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_removeUnusedVariables(threadData_t *threadData, modelica_metatype _inDlow)
{
  modelica_metatype _outDlow = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDlow has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inDlow;
    {
      modelica_metatype _globalKnownVars = NULL;
      modelica_metatype _globalKnownVars1 = NULL;
      modelica_metatype _eqs = NULL;
      modelica_metatype _shared = NULL;
      modelica_metatype _tpl = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _globalKnownVars has no default value.
      // _globalKnownVars1 has no default value.
      // _eqs has no default value.
      // _shared has no default value.
      // _tpl has no default value.
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          _eqs = tmpMeta6;
          _shared = tmpMeta7;
          /* Pattern matching succeeded */
          _globalKnownVars1 = omc_BackendVariable_emptyVars(threadData, ((modelica_integer) 4013));

          _globalKnownVars = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 2)));

          tmpMeta8 = mmc_mk_box2(0, _globalKnownVars, _globalKnownVars1);
          _tpl = omc_List_fold1(threadData, _eqs, boxvar_BackendDAEUtil_traverseBackendDAEExpsEqSystem, boxvar_BackendDAEOptimize_checkUnusedVariables, tmpMeta8);

          _tpl = omc_BackendDAEUtil_traverseBackendDAEExpsVars(threadData, _globalKnownVars, boxvar_BackendDAEOptimize_checkUnusedVariables, _tpl);

          _tpl = omc_BackendDAEUtil_traverseBackendDAEExpsVars(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 5))), boxvar_BackendDAEOptimize_checkUnusedVariables, _tpl);

          _tpl = omc_BackendDAEUtil_traverseBackendDAEExpsEqns(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 7))), boxvar_BackendDAEOptimize_checkUnusedVariables, _tpl);

          /* Pattern-matching assignment */
          tmpMeta9 = omc_BackendDAEUtil_traverseBackendDAEExpsEqns(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 6))), boxvar_BackendDAEOptimize_checkUnusedVariables, _tpl);
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
          _globalKnownVars1 = tmpMeta10;

          tmpMeta11 = MMC_TAGPTR(mmc_alloc_words(22));
          memcpy(MMC_UNTAGPTR(tmpMeta11), MMC_UNTAGPTR(_shared), 22*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta11))[2] = _globalKnownVars1;
          _shared = tmpMeta11;
          tmpMeta12 = mmc_mk_box3(3, &BackendDAE_BackendDAE_DAE__desc, _eqs, _shared);
          tmpMeta1 = tmpMeta12;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outDlow = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outDlow;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_checkUnusedParameterExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTuple, modelica_metatype *out_outTuple)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _outTuple = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _outTuple has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inExp;
    tmp4_2 = _inTuple;
    {
      modelica_metatype _e = NULL;
      modelica_metatype _e1 = NULL;
      modelica_metatype _vars = NULL;
      modelica_metatype _vars1 = NULL;
      modelica_metatype _cr = NULL;
      modelica_metatype _expl = NULL;
      modelica_metatype _varLst = NULL;
      modelica_metatype _var = NULL;
      modelica_metatype _tp = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e has no default value.
      // _e1 has no default value.
      // _vars has no default value.
      // _vars1 has no default value.
      // _cr has no default value.
      // _expl has no default value.
      // _varLst has no default value.
      // _var has no default value.
      // _tp has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 7; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,3) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (4 != MMC_STRLEN(tmpMeta7) || strcmp(MMC_STRINGDATA(_OMC_LIT27), MMC_STRINGDATA(tmpMeta7)) != 0) goto tmp3_end;
          
          _e = tmp4_1;
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _inTuple;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,9,4) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,3,1) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
          
          _e = tmp4_1;
          _cr = tmpMeta8;
          _varLst = tmpMeta11;
          _tp = tmp4_2;
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          _expl = omc_List_map1(threadData, _varLst, boxvar_Expression_generateCrefsExpFromExpVar, _cr);

          omc_Expression_traverseExpList(threadData, _expl, boxvar_BackendDAEOptimize_checkUnusedParameterExp, _tp ,&_tp);
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _tp;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta12;
          modelica_boolean tmp13;
          modelica_metatype tmpMeta14;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,6,2) == 0) goto tmp3_end;
          
          _e = tmp4_1;
          _tp = tmp4_2;
          tmp4 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
          /* Pattern-matching tuple assignment */
          tmpMeta14 = omc_Expression_extendArrExp(threadData, _e, 0 /* false */, &tmp13);
          _e1 = tmpMeta14;
          if (1 /* true */ != tmp13) goto goto_2;

          omc_Expression_traverseExpBottomUp(threadData, _e1, boxvar_BackendDAEOptimize_checkUnusedParameterExp, _tp ,&_tp);
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _tp;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta15;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,13,2) == 0) goto tmp3_end;
          
          _e = tmp4_1;
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _inTuple;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          _e = tmp4_1;
          _cr = tmpMeta16;
          _vars1 = tmpMeta17;
          /* Pattern matching succeeded */
          omc_BackendVariable_getVar(threadData, _cr, _vars1, NULL);
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = _inTuple;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          _e = tmp4_1;
          _cr = tmpMeta18;
          _vars = tmpMeta19;
          _vars1 = tmpMeta20;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta21 = omc_BackendVariable_getVar(threadData, _cr, _vars, NULL);
          if (listEmpty(tmpMeta21)) goto goto_2;
          tmpMeta22 = MMC_CAR(tmpMeta21);
          tmpMeta23 = MMC_CDR(tmpMeta21);
          _var = tmpMeta22;

          _vars1 = omc_BackendVariable_addVar(threadData, _var, _vars1);
          tmpMeta24 = mmc_mk_box2(0, _vars, _vars1);
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = tmpMeta24;
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _inTuple;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 7) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outExp = tmpMeta[0+0];
  _outTuple = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outTuple) { *out_outTuple = _outTuple; }
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_checkUnusedParameter(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_outTpl)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _outTpl = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _outTpl has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inExp;
    tmp4_2 = _inTpl;
    {
      modelica_metatype _exp = NULL;
      modelica_metatype _vars = NULL;
      modelica_metatype _vars1 = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _exp has no default value.
      // _vars has no default value.
      // _vars1 has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          
          _exp = tmp4_1;
          _vars = tmpMeta6;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment, wild first pattern */
          omc_Expression_traverseExpBottomUp(threadData, _exp, boxvar_BackendDAEOptimize_checkUnusedParameterExp, _inTpl, &tmpMeta7);
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
          _vars1 = tmpMeta8;
          tmpMeta9 = mmc_mk_box2(0, _vars, _vars1);
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = tmpMeta9;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _inTpl;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outExp = tmpMeta[0+0];
  _outTpl = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outTpl) { *out_outTpl = _outTpl; }
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_copyNonParamVariables(threadData_t *threadData, modelica_metatype _inVar, modelica_metatype _inVars, modelica_metatype *out_outVars)
{
  modelica_metatype _outVar = NULL;
  modelica_metatype _outVars = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outVar has no default value.
  // _outVars has no default value.
  
  
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inVar;
    {
      modelica_metatype _v = NULL;
      modelica_metatype _vars1 = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _v has no default value.
      // _vars1 has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,7,0) == 0) goto tmp3_end;
          
          _v = tmp4_1;
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _v;
          tmpMeta[0+1] = _inVars;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          _vars1 = omc_BackendVariable_addVar(threadData, _inVar, _inVars);
          tmpMeta[0+0] = _inVar;
          tmpMeta[0+1] = _vars1;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outVar = tmpMeta[0+0];
  _outVars = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outVars) { *out_outVars = _outVars; }
  return _outVar;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_removeUnusedParameter(threadData_t *threadData, modelica_metatype _inDlow)
{
  modelica_metatype _outDlow = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDlow has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inDlow;
    {
      modelica_metatype _globalKnownVars = NULL;
      modelica_metatype _globalKnownVars1 = NULL;
      modelica_metatype _eqs = NULL;
      modelica_metatype _shared = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _globalKnownVars has no default value.
      // _globalKnownVars1 has no default value.
      // _eqs has no default value.
      // _shared has no default value.
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          _eqs = tmpMeta6;
          _shared = tmpMeta7;
          /* Pattern matching succeeded */
          _globalKnownVars1 = omc_BackendVariable_emptyVars(threadData, ((modelica_integer) 4013));

          _globalKnownVars = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 2)));

          _globalKnownVars1 = omc_BackendVariable_traverseBackendDAEVars(threadData, _globalKnownVars, boxvar_BackendDAEOptimize_copyNonParamVariables, _globalKnownVars1);

          /* Pattern-matching assignment */
          tmpMeta8 = mmc_mk_box2(0, _globalKnownVars, _globalKnownVars1);
          tmpMeta9 = omc_List_fold1(threadData, _eqs, boxvar_BackendDAEUtil_traverseBackendDAEExpsEqSystem, boxvar_BackendDAEOptimize_checkUnusedVariables, tmpMeta8);
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
          _globalKnownVars1 = tmpMeta10;

          /* Pattern-matching assignment */
          tmpMeta11 = mmc_mk_box2(0, _globalKnownVars, _globalKnownVars1);
          tmpMeta12 = omc_BackendDAEUtil_traverseBackendDAEExpsVars(threadData, _globalKnownVars, boxvar_BackendDAEOptimize_checkUnusedParameter, tmpMeta11);
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
          _globalKnownVars1 = tmpMeta13;

          /* Pattern-matching assignment */
          tmpMeta14 = mmc_mk_box2(0, _globalKnownVars, _globalKnownVars1);
          tmpMeta15 = omc_BackendDAEUtil_traverseBackendDAEExpsVars(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 5))), boxvar_BackendDAEOptimize_checkUnusedParameter, tmpMeta14);
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
          _globalKnownVars1 = tmpMeta16;

          /* Pattern-matching assignment */
          tmpMeta17 = mmc_mk_box2(0, _globalKnownVars, _globalKnownVars1);
          tmpMeta18 = omc_BackendDAEUtil_traverseBackendDAEExpsEqns(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 7))), boxvar_BackendDAEOptimize_checkUnusedParameter, tmpMeta17);
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
          _globalKnownVars1 = tmpMeta19;

          /* Pattern-matching assignment */
          tmpMeta20 = mmc_mk_box2(0, _globalKnownVars, _globalKnownVars1);
          tmpMeta21 = omc_BackendDAEUtil_traverseBackendDAEExpsEqns(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 6))), boxvar_BackendDAEOptimize_checkUnusedParameter, tmpMeta20);
          tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 2));
          _globalKnownVars1 = tmpMeta22;

          tmpMeta23 = MMC_TAGPTR(mmc_alloc_words(22));
          memcpy(MMC_UNTAGPTR(tmpMeta23), MMC_UNTAGPTR(_shared), 22*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta23))[2] = _globalKnownVars1;
          _shared = tmpMeta23;
          tmpMeta24 = mmc_mk_box3(3, &BackendDAE_BackendDAE_DAE__desc, _eqs, _shared);
          tmpMeta1 = tmpMeta24;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outDlow = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outDlow;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_replaceExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_outTpl)
{
  modelica_metatype _e1 = NULL;
  modelica_metatype _outTpl = NULL;
  modelica_metatype _e = NULL;
  modelica_metatype _se = NULL;
  modelica_metatype _te = NULL;
  modelica_integer _i;
  modelica_integer _j;
  modelica_metatype _ops = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_integer tmp7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_integer tmp11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_boolean tmp15;
  modelica_metatype tmpMeta16;
  modelica_metatype tmpMeta17;
  modelica_metatype tmpMeta18;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _e1 has no default value.
  // _outTpl has no default value.
  // _e has no default value.
  // _se has no default value.
  // _te has no default value.
  // _i has no default value.
  // _j has no default value.
  // _ops has no default value.
  _e = _inExp;

  /* Pattern-matching assignment */
  tmpMeta1 = _inTpl;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 1));
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 2));
  tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 3));
  tmp7 = mmc_unbox_integer(tmpMeta6);
  _ops = tmpMeta2;
  _se = tmpMeta4;
  _te = tmpMeta5;
  _i = tmp7  /* pattern as ty=Integer */;

  /* Pattern-matching assignment */
  tmpMeta8 = omc_Expression_replaceExp(threadData, _e, _se, _te);
  tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
  tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
  tmp11 = mmc_unbox_integer(tmpMeta10);
  _e1 = tmpMeta9;
  _j = tmp11  /* pattern as ty=Integer */;

  tmp15 = (modelica_boolean)(_j > ((modelica_integer) 0));
  if(tmp15)
  {
    tmpMeta13 = mmc_mk_cons(_e1, MMC_REFSTRUCTLIT(mmc_nil));
    tmpMeta14 = mmc_mk_box3(5, &DAE_SymbolicOperation_SUBSTITUTION__desc, tmpMeta13, _e);
    tmpMeta12 = mmc_mk_cons(tmpMeta14, _ops);
    tmpMeta16 = tmpMeta12;
  }
  else
  {
    tmpMeta16 = _ops;
  }
  _ops = tmpMeta16;

  tmpMeta17 = mmc_mk_box3(0, _se, _te, mmc_mk_integer(_i + _j));
  tmpMeta18 = mmc_mk_box2(0, _ops, tmpMeta17);
  _outTpl = tmpMeta18;
  _return: OMC_LABEL_UNUSED
  if (out_outTpl) { *out_outTpl = _outTpl; }
  return _e1;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_removeEqualFunctionCall(threadData_t *threadData, modelica_metatype _inEqsLst, modelica_metatype _inExp, modelica_metatype _inECr, modelica_metatype _inEqns, modelica_metatype _ichanged, modelica_metatype *out_outEqsLst)
{
  modelica_metatype _outEqns = NULL;
  modelica_metatype _outEqsLst = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEqns has no default value.
  // _outEqsLst has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _inEqsLst;
    {
      modelica_metatype _eqns = NULL;
      modelica_metatype _eqn = NULL;
      modelica_metatype _eqn1 = NULL;
      modelica_integer _pos;
      modelica_integer _i;
      modelica_metatype _rest = NULL;
      modelica_metatype _changed = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _eqns has no default value.
      // _eqn has no default value.
      // _eqn1 has no default value.
      // _pos has no default value.
      // _i has no default value.
      // _rest has no default value.
      // _changed has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta[0+0] = _inEqns;
          tmpMeta[0+1] = _ichanged;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_integer tmp8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_integer tmp11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_boolean tmp14;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          tmp8 = mmc_unbox_integer(tmpMeta6);
          _pos = tmp8  /* pattern as ty=Integer */;
          _rest = tmpMeta7;
          /* Pattern matching succeeded */
          _eqn = omc_BackendEquation_get(threadData, _inEqns, _pos);

          /* Pattern-matching tuple assignment */
          tmpMeta12 = mmc_mk_box3(0, _inECr, _inExp, mmc_mk_integer(((modelica_integer) 0)));
          tmpMeta13 = omc_BackendDAETransform_traverseBackendDAEExpsEqnWithSymbolicOperation(threadData, _eqn, boxvar_BackendDAEOptimize_replaceExp, tmpMeta12, &tmpMeta9);
          _eqn1 = tmpMeta13;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
          tmp11 = mmc_unbox_integer(tmpMeta10);
          _i = tmp11  /* pattern as ty=Integer */;

          /* Pattern-matching assignment */
          tmp14 = (_i > ((modelica_integer) 0));
          if (1 /* true */ != tmp14) goto goto_2;

          _eqns = omc_BackendEquation_setAtIndex(threadData, _inEqns, _pos, _eqn1);

          _changed = omc_List_consOnTrue(threadData, (!listMember(mmc_mk_integer(_pos), _ichanged)), mmc_mk_integer(_pos), _ichanged);
          tmpMeta[0+0] = omc_BackendDAEOptimize_removeEqualFunctionCall(threadData, _rest, _inExp, _inECr, _eqns, _changed, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta15 = MMC_CAR(tmp4_1);
          tmpMeta16 = MMC_CDR(tmp4_1);
          _rest = tmpMeta16;
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_BackendDAEOptimize_removeEqualFunctionCall(threadData, _rest, _inExp, _inECr, _inEqns, _ichanged, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outEqns = tmpMeta[0+0];
  _outEqsLst = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outEqsLst) { *out_outEqsLst = _outEqsLst; }
  return _outEqns;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_getControlEqns(threadData_t *threadData, modelica_metatype _inVarsEqn, modelica_metatype _inVarsEqns)
{
  modelica_metatype _outEqns = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEqns has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _inVarsEqn;
    tmp4_2 = _inVarsEqns;
    {
      modelica_metatype _a = NULL;
      modelica_metatype _b = NULL;
      modelica_metatype _c = NULL;
      modelica_metatype _rest = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _a has no default value.
      // _b has no default value.
      // _c has no default value.
      // _rest has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_2)) goto tmp3_end;
          
          _a = tmp4_1;
          /* Pattern matching succeeded */
          tmpMeta1 = _a;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_2);
          tmpMeta7 = MMC_CDR(tmp4_2);
          
          _b = tmpMeta6;
          _rest = tmpMeta7;
          _a = tmp4_1;
          /* Pattern matching succeeded */
          _c = omc_List_intersectionOnTrue(threadData, _a, _b, boxvar_intEq);
          /* Tail recursive call */
          _inVarsEqn = _c;
          _inVarsEqns = _rest;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outEqns = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outEqns;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_varEqns(threadData_t *threadData, modelica_integer _v, modelica_integer _pos, modelica_metatype _mT)
{
  modelica_metatype _outVarEqns = NULL;
  modelica_metatype _vareqns = NULL;
  modelica_metatype _vareqns1 = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outVarEqns has no default value.
  // _vareqns has no default value.
  // _vareqns1 has no default value.
  _vareqns = arrayGet(_mT,labs(_v)) /* DAE.ASUB */;

  _vareqns1 = omc_List_map(threadData, _vareqns, boxvar_intAbs);

  _outVarEqns = omc_List_removeOnTrue(threadData, mmc_mk_integer(labs(_pos)), boxvar_intEq, _vareqns1);
  _return: OMC_LABEL_UNUSED
  return _outVarEqns;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_varEqns(threadData_t *threadData, modelica_metatype _v, modelica_metatype _pos, modelica_metatype _mT)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _outVarEqns = NULL;
  tmp1 = mmc_unbox_integer(_v);
  tmp2 = mmc_unbox_integer(_pos);
  _outVarEqns = omc_BackendDAEOptimize_varEqns(threadData, tmp1, tmp2, _mT);
  /* skip box _outVarEqns; list<#Integer> */
  return _outVarEqns;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_functionCallEqn(threadData_t *threadData, modelica_metatype _ie1, modelica_metatype _ie2, modelica_metatype _inVars, modelica_metatype *out_outExp)
{
  modelica_metatype _outECr = NULL;
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outECr has no default value.
  // _outExp has no default value.
  
  
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _ie1;
    tmp4_2 = _ie2;
    {
      modelica_metatype _cr = NULL;
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _op = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _cr has no default value.
      // _e1 has no default value.
      // _e2 has no default value.
      // _op has no default value.
      tmp4 = 0;
      for (; tmp4 < 7; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,8,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,5,1) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          goto goto_2;
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          goto goto_2;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,6,2) == 0) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,5,1) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          goto goto_2;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,8,2) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,5,1) == 0) goto tmp3_end;
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          _e1 = tmp4_1;
          _cr = tmpMeta10;
          _op = tmpMeta11;
          _e2 = tmpMeta12;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta16 = omc_BackendVariable_getVar(threadData, _cr, _inVars, &tmpMeta13);
          if (listEmpty(tmpMeta16)) goto goto_2;
          tmpMeta17 = MMC_CAR(tmpMeta16);
          tmpMeta18 = MMC_CDR(tmpMeta16);
          if (listEmpty(tmpMeta13)) goto goto_2;
          tmpMeta14 = MMC_CAR(tmpMeta13);
          tmpMeta15 = MMC_CDR(tmpMeta13);
          tmpMeta19 = mmc_mk_box3(11, &DAE_Exp_UNARY__desc, _op, _e1);
          tmpMeta[0+0] = tmpMeta19;
          tmpMeta[0+1] = _e2;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _e1 = tmp4_1;
          _cr = tmpMeta20;
          _e2 = tmp4_2;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta24 = omc_BackendVariable_getVar(threadData, _cr, _inVars, &tmpMeta21);
          if (listEmpty(tmpMeta24)) goto goto_2;
          tmpMeta25 = MMC_CAR(tmpMeta24);
          tmpMeta26 = MMC_CDR(tmpMeta24);
          if (listEmpty(tmpMeta21)) goto goto_2;
          tmpMeta22 = MMC_CAR(tmpMeta21);
          tmpMeta23 = MMC_CDR(tmpMeta21);
          tmpMeta[0+0] = _e1;
          tmpMeta[0+1] = _e2;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,6,2) == 0) goto tmp3_end;
          tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
          tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta28,5,1) == 0) goto tmp3_end;
          tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          _e2 = tmp4_2;
          _cr = tmpMeta27;
          _op = tmpMeta28;
          _e1 = tmpMeta29;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta33 = omc_BackendVariable_getVar(threadData, _cr, _inVars, &tmpMeta30);
          if (listEmpty(tmpMeta33)) goto goto_2;
          tmpMeta34 = MMC_CAR(tmpMeta33);
          tmpMeta35 = MMC_CDR(tmpMeta33);
          if (listEmpty(tmpMeta30)) goto goto_2;
          tmpMeta31 = MMC_CAR(tmpMeta30);
          tmpMeta32 = MMC_CDR(tmpMeta30);
          tmpMeta36 = mmc_mk_box3(11, &DAE_Exp_UNARY__desc, _op, _e2);
          tmpMeta[0+0] = tmpMeta36;
          tmpMeta[0+1] = _e1;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,6,2) == 0) goto tmp3_end;
          tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          
          _e2 = tmp4_2;
          _cr = tmpMeta37;
          _e1 = tmp4_1;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta41 = omc_BackendVariable_getVar(threadData, _cr, _inVars, &tmpMeta38);
          if (listEmpty(tmpMeta41)) goto goto_2;
          tmpMeta42 = MMC_CAR(tmpMeta41);
          tmpMeta43 = MMC_CDR(tmpMeta41);
          if (listEmpty(tmpMeta38)) goto goto_2;
          tmpMeta39 = MMC_CAR(tmpMeta38);
          tmpMeta40 = MMC_CDR(tmpMeta38);
          tmpMeta[0+0] = _e2;
          tmpMeta[0+1] = _e1;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outECr = tmpMeta[0+0];
  _outExp = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outExp) { *out_outExp = _outExp; }
  return _outECr;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_removeEqualFunctionCallFinder(threadData_t *threadData, modelica_metatype _elem, modelica_integer _pos, modelica_metatype _inTpl, modelica_metatype *out_outTpl)
{
  modelica_metatype _outList = NULL;
  modelica_metatype _outTpl = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outList has no default value.
  // _outTpl has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _inTpl;
    {
      modelica_metatype _mT = NULL;
      modelica_metatype _changed = NULL;
      modelica_metatype _vars = NULL;
      modelica_metatype _eqns = NULL;
      modelica_metatype _eqns1 = NULL;
      modelica_metatype _exp = NULL;
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _ecr = NULL;
      modelica_metatype _expvars = NULL;
      modelica_metatype _controleqns = NULL;
      modelica_metatype _expvars1 = NULL;
      modelica_metatype _expvarseqns = NULL;
      modelica_boolean _isInitial;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _mT has no default value.
      // _changed has no default value.
      // _vars has no default value.
      // _eqns has no default value.
      // _eqns1 has no default value.
      // _exp has no default value.
      // _e1 has no default value.
      // _e2 has no default value.
      // _ecr has no default value.
      // _expvars has no default value.
      // _controleqns has no default value.
      // _expvars1 has no default value.
      // _expvarseqns has no default value.
      // _isInitial has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_integer tmp11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmp11 = mmc_unbox_integer(tmpMeta10);
          _mT = tmpMeta6;
          _vars = tmpMeta7;
          _eqns = tmpMeta8;
          _changed = tmpMeta9;
          _isInitial = tmp11  /* pattern as ty=Boolean */;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta12 = _elem;
          if (listEmpty(tmpMeta12)) goto goto_2;
          tmpMeta13 = MMC_CAR(tmpMeta12);
          tmpMeta14 = MMC_CDR(tmpMeta12);

          /* Pattern-matching assignment */
          tmpMeta15 = omc_BackendEquation_get(threadData, _eqns, _pos);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,0,4) == 0) goto goto_2;
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 3));
          _e1 = tmpMeta16;
          _e2 = tmpMeta17;

          _ecr = omc_BackendDAEOptimize_functionCallEqn(threadData, _e1, _e2, _vars ,&_exp);

          _expvars = omc_BackendDAEUtil_adjacencyRowExp(threadData, _exp, _vars, _OMC_LIT225, mmc_mk_none(), _OMC_LIT22, _isInitial);

          /* Pattern-matching assignment */
          tmpMeta18 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta19 = omc_List_map2(threadData, omc_AvlSetInt_listKeys(threadData, _expvars, tmpMeta18), boxvar_BackendDAEOptimize_varEqns, mmc_mk_integer(_pos), _mT);
          if (listEmpty(tmpMeta19)) goto goto_2;
          tmpMeta20 = MMC_CAR(tmpMeta19);
          tmpMeta21 = MMC_CDR(tmpMeta19);
          _expvars1 = tmpMeta20;
          _expvarseqns = tmpMeta21;

          _controleqns = omc_BackendDAEOptimize_getControlEqns(threadData, _expvars1, _expvarseqns);

          _eqns1 = omc_BackendDAEOptimize_removeEqualFunctionCall(threadData, _controleqns, _ecr, _exp, _eqns, _changed ,&_changed);
          tmpMeta22 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta23 = mmc_mk_box5(0, _mT, _vars, _eqns1, _changed, mmc_mk_boolean(_isInitial));
          tmpMeta[0+0] = tmpMeta22;
          tmpMeta[0+1] = tmpMeta23;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta24;
          
          /* Pattern matching succeeded */
          tmpMeta24 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta[0+0] = tmpMeta24;
          tmpMeta[0+1] = _inTpl;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outList = tmpMeta[0+0];
  _outTpl = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outTpl) { *out_outTpl = _outTpl; }
  return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_removeEqualFunctionCallFinder(threadData_t *threadData, modelica_metatype _elem, modelica_metatype _pos, modelica_metatype _inTpl, modelica_metatype *out_outTpl)
{
  modelica_integer tmp1;
  modelica_metatype _outList = NULL;
  tmp1 = mmc_unbox_integer(_pos);
  _outList = omc_BackendDAEOptimize_removeEqualFunctionCallFinder(threadData, _elem, tmp1, _inTpl, out_outTpl);
  /* skip box _outList; list<#Integer> */
  /* skip box _outTpl; tuple<array<list<#Integer>>, BackendDAE.Variables, ExpandableArray<BackendDAE.Equation>, list<#Integer>, #Boolean> */
  return _outList;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_removeEqualFunctionCallsWork(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _ishared, modelica_metatype *out_oshared)
{
  modelica_metatype _osyst = NULL;
  modelica_metatype _oshared = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _osyst has no default value.
  // _oshared has no default value.
  
  
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _isyst;
    {
      modelica_metatype _m = NULL;
      modelica_metatype _mT = NULL;
      modelica_metatype _vars = NULL;
      modelica_metatype _eqns = NULL;
      modelica_metatype _changed = NULL;
      modelica_boolean _isInitial;
      modelica_metatype _syst = NULL;
      modelica_metatype _funcs = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _m has no default value.
      // _mT has no default value.
      // _vars has no default value.
      // _eqns has no default value.
      // _changed has no default value.
      // _isInitial has no default value.
      // _syst has no default value.
      // _funcs has no default value.
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _syst = tmp4_1;
          _vars = tmpMeta6;
          _eqns = tmpMeta7;
          /* Pattern matching succeeded */
          _isInitial = omc_BackendDAEUtil_isInitializationDAE(threadData, _ishared);

          _funcs = omc_BackendDAEUtil_getFunctions(threadData, _ishared);

          _syst = omc_BackendDAEUtil_getAdjacencyMatrixfromOption(threadData, _syst, _OMC_LIT22, mmc_mk_some(_funcs), _isInitial ,&_m ,&_mT);

          /* Pattern-matching tuple assignment */
          tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta12 = mmc_mk_box5(0, _mT, _vars, _eqns, tmpMeta11, mmc_mk_boolean(_isInitial));
          tmpMeta13 = omc_AdjacencyMatrix_traverseAdjacencyMatrix(threadData, _m, boxvar_BackendDAEOptimize_removeEqualFunctionCallFinder, tmpMeta12, &tmpMeta8);
          _m = tmpMeta13;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 4));
          _mT = tmpMeta9;
          _changed = tmpMeta10;

          tmpMeta14 = MMC_TAGPTR(mmc_alloc_words(11));
          memcpy(MMC_UNTAGPTR(tmpMeta14), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta14))[4] = mmc_mk_some(_m);
          _syst = tmpMeta14;

          tmpMeta15 = MMC_TAGPTR(mmc_alloc_words(11));
          memcpy(MMC_UNTAGPTR(tmpMeta15), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta15))[5] = mmc_mk_some(_mT);
          _syst = tmpMeta15;

          tmpMeta16 = MMC_TAGPTR(mmc_alloc_words(11));
          memcpy(MMC_UNTAGPTR(tmpMeta16), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta16))[7] = _OMC_LIT21;
          _syst = tmpMeta16;

          _syst = omc_BackendDAEUtil_updateAdjacencyMatrix(threadData, _syst, _OMC_LIT22, mmc_mk_none(), _changed, _isInitial);
          tmpMeta[0+0] = _syst;
          tmpMeta[0+1] = _ishared;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _osyst = tmpMeta[0+0];
  _oshared = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_oshared) { *out_oshared = _oshared; }
  return _osyst;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_removeEqualRHS(threadData_t *threadData, modelica_metatype _dae)
{
  modelica_metatype _odae = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _odae has no default value.
  _odae = omc_BackendDAEUtil_mapEqSystem(threadData, _dae, boxvar_BackendDAEOptimize_removeEqualFunctionCallsWork);
  _return: OMC_LABEL_UNUSED
  return _odae;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_protectedParametersFinder(threadData_t *threadData, modelica_metatype _inVar, modelica_metatype _inRepl, modelica_metatype *out_outRepl)
{
  modelica_metatype _outVar = NULL;
  modelica_metatype _outRepl = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outVar has no default value.
  // _outRepl has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inVar;
    tmp4_2 = _inRepl;
    {
      modelica_metatype _v = NULL;
      modelica_metatype _repl = NULL;
      modelica_metatype _repl_1 = NULL;
      modelica_metatype _varName = NULL;
      modelica_metatype _values = NULL;
      modelica_metatype _exp = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _v has no default value.
      // _repl has no default value.
      // _repl_1 has no default value.
      // _varName has no default value.
      // _values has no default value.
      // _exp has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_boolean tmp11;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,7,0) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
          if (optionNone(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 11));
          
          _v = tmp4_1;
          _varName = tmpMeta6;
          _exp = tmpMeta9;
          _values = tmpMeta10;
          _repl = tmp4_2;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp11 = omc_DAEUtil_getProtectedAttr(threadData, _values);
          if (1 /* true */ != tmp11) goto goto_2;

          _repl_1 = omc_BackendVarTransform_addReplacement(threadData, _repl, _varName, _exp, mmc_mk_none());
          tmpMeta[0+0] = _v;
          tmpMeta[0+1] = _repl_1;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inVar;
          tmpMeta[0+1] = _inRepl;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outVar = tmpMeta[0+0];
  _outRepl = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outRepl) { *out_outRepl = _outRepl; }
  return _outVar;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_removeProtectedParameterswork(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _repl)
{
  modelica_metatype _osyst = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _osyst has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _isyst;
    {
      modelica_metatype _syst = NULL;
      modelica_metatype _eqns = NULL;
      modelica_metatype _lsteqns = NULL;
      modelica_boolean _b;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _syst has no default value.
      // _eqns has no default value.
      // _lsteqns has no default value.
      // _b has no default value.
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _syst = tmp4_1;
          _eqns = tmpMeta6;
          /* Pattern matching succeeded */
          _lsteqns = omc_BackendEquation_equationList(threadData, _eqns);

          _lsteqns = omc_BackendVarTransform_replaceEquations(threadData, _lsteqns, _repl, mmc_mk_none() ,&_b);

          if(_b)
          {
            tmpMeta7 = MMC_TAGPTR(mmc_alloc_words(11));
            memcpy(MMC_UNTAGPTR(tmpMeta7), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta7))[3] = omc_BackendEquation_listEquation(threadData, _lsteqns);
            _syst = tmpMeta7;

            _syst = omc_BackendDAEUtil_clearEqSyst(threadData, _syst);
          }
          tmpMeta1 = _syst;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _osyst = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _osyst;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_removeProtectedParameters(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inDAE;
    {
      modelica_metatype _globalKnownVars = NULL;
      modelica_metatype _repl = NULL;
      modelica_metatype _systs = NULL;
      modelica_metatype _shared = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _globalKnownVars has no default value.
      // _repl has no default value.
      // _systs has no default value.
      // _shared has no default value.
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
          
          _systs = tmpMeta6;
          _shared = tmpMeta7;
          _globalKnownVars = tmpMeta8;
          /* Pattern matching succeeded */
          _repl = omc_BackendVarTransform_emptyReplacements(threadData);

          _repl = omc_BackendVariable_traverseBackendDAEVars(threadData, _globalKnownVars, boxvar_BackendDAEOptimize_protectedParametersFinder, _repl);

          if(omc_Flags_isSet(threadData, _OMC_LIT229))
          {
            omc_BackendVarTransform_dumpReplacements(threadData, _repl);
          }

          _systs = omc_List_map1(threadData, _systs, boxvar_BackendDAEOptimize_removeProtectedParameterswork, _repl);

          tmpMeta9 = MMC_TAGPTR(mmc_alloc_words(22));
          memcpy(MMC_UNTAGPTR(tmpMeta9), MMC_UNTAGPTR(_shared), 22*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta9))[2] = _globalKnownVars;
          _shared = tmpMeta9;
          tmpMeta10 = mmc_mk_box3(3, &BackendDAE_BackendDAE_DAE__desc, _systs, _shared);
          tmpMeta1 = tmpMeta10;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outDAE = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverseExpVisitorWrapper(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inRepl, modelica_metatype *out_repl)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _repl = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _exp has no default value.
  // _repl has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inExp;
    tmp4_2 = _inRepl;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          _exp = tmp4_1;
          _repl = tmp4_2;
          /* Pattern matching succeeded */
          _exp = omc_BackendVarTransform_replaceExp(threadData, _exp, _repl, mmc_mk_none(), NULL);
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = _repl;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _inRepl;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _exp = tmpMeta[0+0];
  _repl = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_repl) { *out_repl = _repl; }
  return _exp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_addConstExpReplacement(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _cr, modelica_metatype _inRepl)
{
  modelica_metatype _outRepl = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outRepl has no default value.
  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_boolean tmp6;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp6 = omc_Expression_isConst(threadData, _inExp);
          if (1 /* true */ != tmp6) goto goto_2;
          tmpMeta1 = omc_BackendVarTransform_addReplacement(threadData, _inRepl, _cr, _inExp, mmc_mk_none());
          goto tmp3_done;
        }
        case 1: {
          /* Pattern matching succeeded */
          tmpMeta1 = _inRepl;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outRepl = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outRepl;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_replaceFinalVarTraverser(threadData_t *threadData, modelica_metatype _inVar, modelica_metatype _inTpl, modelica_metatype *out_outTpl)
{
  modelica_metatype _outVar = NULL;
  modelica_metatype _outTpl = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outVar has no default value.
  // _outTpl has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inVar;
    tmp4_2 = _inTpl;
    {
      modelica_metatype _v = NULL;
      modelica_metatype _v1 = NULL;
      modelica_metatype _repl = NULL;
      modelica_metatype _repl_1 = NULL;
      modelica_integer _numrepl;
      modelica_metatype _e = NULL;
      modelica_metatype _e1 = NULL;
      modelica_metatype _cr = NULL;
      modelica_metatype _attr = NULL;
      modelica_metatype _new_attr = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _v has no default value.
      // _v1 has no default value.
      // _repl has no default value.
      // _repl_1 has no default value.
      // _numrepl has no default value.
      // _e has no default value.
      // _e1 has no default value.
      // _cr has no default value.
      // _attr has no default value.
      // _new_attr has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
          if (optionNone(tmpMeta6)) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,13,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inVar;
          tmpMeta[0+1] = _inTpl;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_integer tmp14;
          modelica_boolean tmp15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
          if (optionNone(tmpMeta9)) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 1));
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 11));
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp14 = mmc_unbox_integer(tmpMeta13);
          _v = tmp4_1;
          _cr = tmpMeta8;
          _e = tmpMeta10;
          _attr = tmpMeta11;
          _repl = tmpMeta12;
          _numrepl = tmp14  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta16 = omc_BackendVarTransform_replaceExp(threadData, _e, _repl, mmc_mk_none(), &tmp15);
          _e1 = tmpMeta16;
          if (1 /* true */ != tmp15) goto goto_2;

          _e1 = omc_ExpressionSimplify_simplify(threadData, _e1, NULL);

          _v1 = omc_BackendVariable_setBindExp(threadData, _v, mmc_mk_some(_e1));

          _repl_1 = omc_BackendDAEOptimize_addConstExpReplacement(threadData, _e1, _cr, _repl);

          _attr = omc_BackendDAEUtil_traverseBackendDAEVarAttr(threadData, _attr, boxvar_BackendDAEOptimize_traverseExpVisitorWrapper, _repl_1 ,&_repl_1);

          _v1 = omc_BackendVariable_setVarAttributes(threadData, _v1, _attr);
          tmpMeta17 = mmc_mk_box2(0, _repl_1, mmc_mk_integer(((modelica_integer) 1) + _numrepl));
          tmpMeta[0+0] = _v1;
          tmpMeta[0+1] = tmpMeta17;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_integer tmp21;
          modelica_metatype tmpMeta22;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 11));
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp21 = mmc_unbox_integer(tmpMeta20);
          _v = tmp4_1;
          _attr = tmpMeta18;
          _repl = tmpMeta19;
          _numrepl = tmp21  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          _new_attr = omc_BackendDAEUtil_traverseBackendDAEVarAttr(threadData, _attr, boxvar_BackendDAEOptimize_traverseExpVisitorWrapper, _repl ,&_repl);

          _v1 = omc_BackendVariable_setVarAttributes(threadData, _v, _new_attr);
          tmpMeta22 = mmc_mk_box2(0, _repl, mmc_mk_integer(_numrepl));
          tmpMeta[0+0] = _v1;
          tmpMeta[0+1] = tmpMeta22;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 3) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outVar = tmpMeta[0+0];
  _outTpl = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outTpl) { *out_outTpl = _outTpl; }
  return _outVar;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_replaceFinalVars(threadData_t *threadData, modelica_integer _inNumRepl, modelica_metatype _inVars, modelica_metatype _inRepl, modelica_metatype *out_outRepl)
{
  modelica_metatype _outVars = NULL;
  modelica_metatype _outRepl = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outVars has no default value.
  // _outRepl has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_integer tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
    tmp4_1 = _inNumRepl;
    tmp4_2 = _inVars;
    tmp4_3 = _inRepl;
    {
      modelica_integer _numrepl;
      modelica_metatype _globalKnownVars = NULL;
      modelica_metatype _globalKnownVars1 = NULL;
      modelica_metatype _repl = NULL;
      modelica_metatype _repl1 = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _numrepl has no default value.
      // _globalKnownVars has no default value.
      // _globalKnownVars1 has no default value.
      // _repl has no default value.
      // _repl1 has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_boolean tmp6;
          
          _numrepl = tmp4_1;
          _globalKnownVars = tmp4_2;
          _repl = tmp4_3;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmp6 = (((modelica_integer) 0) == _numrepl);
          if (1 /* true */ != tmp6) goto goto_2;
          tmpMeta[0+0] = _globalKnownVars;
          tmpMeta[0+1] = _repl;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_integer tmp10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          
          _globalKnownVars = tmp4_2;
          _repl = tmp4_3;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta11 = mmc_mk_box2(0, _repl, mmc_mk_integer(((modelica_integer) 0)));
          tmpMeta12 = omc_BackendVariable_traverseBackendDAEVarsWithUpdate(threadData, _globalKnownVars, boxvar_BackendDAEOptimize_replaceFinalVarTraverser, tmpMeta11, &tmpMeta7);
          _globalKnownVars1 = tmpMeta12;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
          tmp10 = mmc_unbox_integer(tmpMeta9);
          _repl1 = tmpMeta8;
          _numrepl = tmp10  /* pattern as ty=Integer */;
          tmpMeta[0+0] = omc_BackendDAEOptimize_replaceFinalVars(threadData, _numrepl, _globalKnownVars1, _repl1, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outVars = tmpMeta[0+0];
  _outRepl = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outRepl) { *out_outRepl = _outRepl; }
  return _outVars;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_replaceFinalVars(threadData_t *threadData, modelica_metatype _inNumRepl, modelica_metatype _inVars, modelica_metatype _inRepl, modelica_metatype *out_outRepl)
{
  modelica_integer tmp1;
  modelica_metatype _outVars = NULL;
  tmp1 = mmc_unbox_integer(_inNumRepl);
  _outVars = omc_BackendDAEOptimize_replaceFinalVars(threadData, tmp1, _inVars, _inRepl, out_outRepl);
  /* skip box _outVars; BackendDAE.Variables */
  /* skip box _outRepl; BackendVarTransform.VariableReplacements */
  return _outVars;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_removeParametersFinder(threadData_t *threadData, modelica_metatype _inVar, modelica_metatype _inTpl, modelica_metatype *out_outTpl)
{
  modelica_metatype _outVar = NULL;
  modelica_metatype _outTpl = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outVar has no default value.
  // _outTpl has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inVar;
    tmp4_2 = _inTpl;
    {
      modelica_metatype _vars = NULL;
      modelica_metatype _v = NULL;
      modelica_metatype _repl = NULL;
      modelica_metatype _repl_1 = NULL;
      modelica_metatype _varName = NULL;
      modelica_metatype _exp = NULL;
      modelica_metatype _exp1 = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _vars has no default value.
      // _v has no default value.
      // _repl has no default value.
      // _repl_1 has no default value.
      // _varName has no default value.
      // _exp has no default value.
      // _exp1 has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,7,0) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
          if (optionNone(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          _v = tmp4_1;
          _varName = tmpMeta6;
          _exp = tmpMeta9;
          _repl = tmpMeta10;
          _vars = tmpMeta11;
          /* Pattern matching succeeded */
          tmpMeta12 = mmc_mk_box2(0, _vars, _varName);
          _exp1 = omc_Expression_traverseExpBottomUp(threadData, _exp, boxvar_BackendDAEUtil_replaceCrefsWithValues, tmpMeta12, NULL);

          _repl_1 = omc_BackendVarTransform_addReplacement(threadData, _repl, _varName, _exp1, mmc_mk_none());
          tmpMeta13 = mmc_mk_box2(0, _repl_1, _vars);
          tmpMeta[0+0] = _v;
          tmpMeta[0+1] = tmpMeta13;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inVar;
          tmpMeta[0+1] = _inTpl;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outVar = tmpMeta[0+0];
  _outTpl = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outTpl) { *out_outTpl = _outTpl; }
  return _outVar;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_removeParameterswork(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _repl)
{
  modelica_metatype _osyst = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _osyst has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _isyst;
    {
      modelica_metatype _m = NULL;
      modelica_metatype _mT = NULL;
      modelica_metatype _vars = NULL;
      modelica_metatype _eqns = NULL;
      modelica_metatype _lsteqns = NULL;
      modelica_metatype _syst = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _m has no default value.
      // _mT has no default value.
      // _vars has no default value.
      // _eqns has no default value.
      // _lsteqns has no default value.
      // _syst has no default value.
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _syst = tmp4_1;
          _vars = tmpMeta6;
          _eqns = tmpMeta7;
          /* Pattern matching succeeded */
          _vars = omc_BackendDAEOptimize_replaceFinalVars(threadData, ((modelica_integer) 1), _vars, _repl, NULL);

          _lsteqns = omc_BackendVarTransform_replaceEquations(threadData, omc_BackendEquation_equationList(threadData, _eqns), _repl, mmc_mk_none(), NULL);

          tmpMeta8 = MMC_TAGPTR(mmc_alloc_words(11));
          memcpy(MMC_UNTAGPTR(tmpMeta8), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta8))[2] = _vars;
          _syst = tmpMeta8;

          tmpMeta9 = MMC_TAGPTR(mmc_alloc_words(11));
          memcpy(MMC_UNTAGPTR(tmpMeta9), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta9))[3] = omc_BackendEquation_listEquation(threadData, _lsteqns);
          _syst = tmpMeta9;

          tmpMeta10 = MMC_TAGPTR(mmc_alloc_words(11));
          memcpy(MMC_UNTAGPTR(tmpMeta10), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta10))[4] = mmc_mk_none();
          _syst = tmpMeta10;

          tmpMeta11 = MMC_TAGPTR(mmc_alloc_words(11));
          memcpy(MMC_UNTAGPTR(tmpMeta11), MMC_UNTAGPTR(_syst), 11*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta11))[5] = mmc_mk_none();
          _syst = tmpMeta11;
          tmpMeta1 = _syst;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _osyst = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _osyst;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_removeParameters(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inDAE;
    {
      modelica_metatype _globalKnownVars = NULL;
      modelica_metatype _repl = NULL;
      modelica_metatype _systs = NULL;
      modelica_metatype _shared = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _globalKnownVars has no default value.
      // _repl has no default value.
      // _systs has no default value.
      // _shared has no default value.
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
          
          _systs = tmpMeta6;
          _shared = tmpMeta7;
          _globalKnownVars = tmpMeta8;
          /* Pattern matching succeeded */
          _repl = omc_BackendVarTransform_emptyReplacements(threadData);

          /* Pattern-matching assignment */
          tmpMeta9 = mmc_mk_box2(0, _repl, _globalKnownVars);
          tmpMeta10 = omc_BackendVariable_traverseBackendDAEVars(threadData, _globalKnownVars, boxvar_BackendDAEOptimize_removeParametersFinder, tmpMeta9);
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 1));
          _repl = tmpMeta11;

          _globalKnownVars = omc_BackendDAEOptimize_replaceFinalVars(threadData, ((modelica_integer) 1), _globalKnownVars, _repl ,&_repl);

          _globalKnownVars = omc_BackendDAEOptimize_replaceFinalVars(threadData, ((modelica_integer) 1), _globalKnownVars, _repl ,&_repl);

          if(omc_Flags_isSet(threadData, _OMC_LIT233))
          {
            omc_BackendVarTransform_dumpReplacements(threadData, _repl);
          }

          _systs = omc_List_map1(threadData, _systs, boxvar_BackendDAEOptimize_removeParameterswork, _repl);

          tmpMeta12 = MMC_TAGPTR(mmc_alloc_words(22));
          memcpy(MMC_UNTAGPTR(tmpMeta12), MMC_UNTAGPTR(_shared), 22*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta12))[2] = _globalKnownVars;
          _shared = tmpMeta12;
          tmpMeta13 = mmc_mk_box3(3, &BackendDAE_BackendDAE_DAE__desc, _systs, _shared);
          tmpMeta1 = tmpMeta13;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outDAE = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

PROTECTED_FUNCTION_STATIC void omc_BackendDAEOptimize_countsimpleEquation(threadData_t *threadData, modelica_metatype _elem, modelica_integer _length, modelica_integer _pos, modelica_metatype _syst, modelica_metatype _shared)
{
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  { /* matchcontinue expression */
    volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
    tmp3_1 = _elem;
    tmp3_2 = _shared;
    {
      modelica_metatype _cr = NULL;
      modelica_integer _i;
      modelica_metatype _cre = NULL;
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _vars = NULL;
      modelica_metatype _globalKnownVars = NULL;
      modelica_metatype _var = NULL;
      modelica_metatype _eqns = NULL;
      modelica_metatype _eqn = NULL;
      volatile mmc_switch_type tmp3;
      int tmp4;
      // _cr has no default value.
      // _i has no default value.
      // _cre has no default value.
      // _e1 has no default value.
      // _e2 has no default value.
      // _vars has no default value.
      // _globalKnownVars has no default value.
      // _var has no default value.
      // _eqns has no default value.
      // _eqn has no default value.
      tmp3 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp2_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp3 < 4; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_integer tmp8;
          modelica_boolean tmp9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_integer tmp15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_integer tmp19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 15));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta5,1,0) == 0) goto tmp2_end;
          if (listEmpty(tmp3_1)) goto tmp2_end;
          tmpMeta6 = MMC_CAR(tmp3_1);
          tmpMeta7 = MMC_CDR(tmp3_1);
          tmp8 = mmc_unbox_integer(tmpMeta6);
          if (!listEmpty(tmpMeta7)) goto tmp2_end;
          _i = tmp8  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          _vars = omc_BackendVariable_daeVars(threadData, _syst);

          _var = omc_BackendVariable_getVarAt(threadData, _vars, labs(_i));

          /* Pattern-matching assignment */
          tmp9 = omc_BackendVariable_isStateorStateDerVar(threadData, _var);
          if (0 /* false */ != tmp9) goto goto_1;

          _eqns = omc_BackendEquation_getEqnsFromEqSystem(threadData, _syst);

          _eqn = omc_BackendEquation_get(threadData, _eqns, _pos);

          /* Pattern-matching assignment */
          tmpMeta10 = _eqn;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,0,4) == 0) goto goto_1;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 3));
          _e1 = tmpMeta11;
          _e2 = tmpMeta12;

          _globalKnownVars = omc_BackendVariable_daeGlobalKnownVars(threadData, _shared);

          /* Pattern-matching tuple assignment, wild first pattern */
          tmpMeta16 = mmc_mk_box5(0, mmc_mk_boolean(0 /* false */), _vars, _globalKnownVars, mmc_mk_boolean(1 /* true */), mmc_mk_boolean(0 /* false */));
          omc_Expression_traverseExpTopDown(threadData, _e1, boxvar_BackendDAEOptimize_traversingTimeEqnsFinder, tmpMeta16, &tmpMeta13);
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 1));
          tmp15 = mmc_unbox_integer(tmpMeta14);
          if (0 /* false */ != tmp15) goto goto_1;
          

          /* Pattern-matching tuple assignment, wild first pattern */
          tmpMeta20 = mmc_mk_box5(0, mmc_mk_boolean(0 /* false */), _vars, _globalKnownVars, mmc_mk_boolean(1 /* true */), mmc_mk_boolean(0 /* false */));
          omc_Expression_traverseExpTopDown(threadData, _e2, boxvar_BackendDAEOptimize_traversingTimeEqnsFinder, tmpMeta20, &tmpMeta17);
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 1));
          tmp19 = mmc_unbox_integer(tmpMeta18);
          if (0 /* false */ != tmp19) goto goto_1;
          

          _cr = omc_BackendVariable_varCref(threadData, _var);

          _cre = omc_Expression_crefExp(threadData, _cr);

          /* Pattern-matching tuple assignment, wild first pattern */
          omc_ExpressionSolve_solve(threadData, _e1, _e2, _cre, mmc_mk_none(), &tmpMeta21);
          if (!listEmpty(tmpMeta21)) goto goto_1;
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_integer tmp24;
          modelica_boolean tmp25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_integer tmp31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_integer tmp35;
          modelica_metatype tmpMeta36;
          modelica_metatype tmpMeta37;
          if (listEmpty(tmp3_1)) goto tmp2_end;
          tmpMeta22 = MMC_CAR(tmp3_1);
          tmpMeta23 = MMC_CDR(tmp3_1);
          tmp24 = mmc_unbox_integer(tmpMeta22);
          if (!listEmpty(tmpMeta23)) goto tmp2_end;
          
          _i = tmp24  /* pattern as ty=Integer */;
          tmp3 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          _vars = omc_BackendVariable_daeVars(threadData, _syst);

          _var = omc_BackendVariable_getVarAt(threadData, _vars, labs(_i));

          /* Pattern-matching assignment */
          tmp25 = omc_BackendVariable_isStateorStateDerVar(threadData, _var);
          if (0 /* false */ != tmp25) goto goto_1;

          _eqns = omc_BackendEquation_getEqnsFromEqSystem(threadData, _syst);

          _eqn = omc_BackendEquation_get(threadData, _eqns, _pos);

          /* Pattern-matching assignment */
          tmpMeta26 = _eqn;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta26,0,4) == 0) goto goto_1;
          tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta26), 2));
          tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta26), 3));
          _e1 = tmpMeta27;
          _e2 = tmpMeta28;

          _globalKnownVars = omc_BackendVariable_daeGlobalKnownVars(threadData, _shared);

          /* Pattern-matching tuple assignment, wild first pattern */
          tmpMeta32 = mmc_mk_box5(0, mmc_mk_boolean(0 /* false */), _vars, _globalKnownVars, mmc_mk_boolean(0 /* false */), mmc_mk_boolean(0 /* false */));
          omc_Expression_traverseExpTopDown(threadData, _e1, boxvar_BackendDAEOptimize_traversingTimeEqnsFinder, tmpMeta32, &tmpMeta29);
          tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta29), 1));
          tmp31 = mmc_unbox_integer(tmpMeta30);
          if (0 /* false */ != tmp31) goto goto_1;
          

          /* Pattern-matching tuple assignment, wild first pattern */
          tmpMeta36 = mmc_mk_box5(0, mmc_mk_boolean(0 /* false */), _vars, _globalKnownVars, mmc_mk_boolean(0 /* false */), mmc_mk_boolean(0 /* false */));
          omc_Expression_traverseExpTopDown(threadData, _e2, boxvar_BackendDAEOptimize_traversingTimeEqnsFinder, tmpMeta36, &tmpMeta33);
          tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta33), 1));
          tmp35 = mmc_unbox_integer(tmpMeta34);
          if (0 /* false */ != tmp35) goto goto_1;
          

          _cr = omc_BackendVariable_varCref(threadData, _var);

          _cre = omc_Expression_crefExp(threadData, _cr);

          /* Pattern-matching tuple assignment, wild first pattern */
          omc_ExpressionSolve_solve(threadData, _e1, _e2, _cre, mmc_mk_none(), &tmpMeta37);
          if (!listEmpty(tmpMeta37)) goto goto_1;
          goto tmp2_done;
        }
        case 2: {
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          modelica_metatype tmpMeta44;
          modelica_metatype tmpMeta45;
          modelica_metatype tmpMeta46;
          modelica_metatype tmpMeta47;
          if (listEmpty(tmp3_1)) goto tmp2_end;
          tmpMeta38 = MMC_CAR(tmp3_1);
          tmpMeta39 = MMC_CDR(tmp3_1);
          if (listEmpty(tmpMeta39)) goto tmp2_end;
          tmpMeta40 = MMC_CAR(tmpMeta39);
          tmpMeta41 = MMC_CDR(tmpMeta39);
          if (!listEmpty(tmpMeta41)) goto tmp2_end;
          
          /* Pattern matching succeeded */
          _eqns = omc_BackendEquation_getEqnsFromEqSystem(threadData, _syst);

          _eqn = omc_BackendEquation_get(threadData, _eqns, _pos);

          _cr = omc_BackendEquation_derivativeEquation(threadData, _eqn, NULL, NULL, NULL, NULL);

          _vars = omc_BackendVariable_daeVars(threadData, _syst);

          /* Pattern-matching tuple assignment */
          tmpMeta45 = omc_BackendVariable_getVar(threadData, _cr, _vars, &tmpMeta42);
          if (listEmpty(tmpMeta45)) goto goto_1;
          tmpMeta46 = MMC_CAR(tmpMeta45);
          tmpMeta47 = MMC_CDR(tmpMeta45);
          if (listEmpty(tmpMeta42)) goto goto_1;
          tmpMeta43 = MMC_CAR(tmpMeta42);
          tmpMeta44 = MMC_CDR(tmpMeta42);
          goto tmp2_done;
        }
        case 3: {
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta49;
          modelica_metatype tmpMeta50;
          modelica_metatype tmpMeta51;
          modelica_metatype tmpMeta52;
          if (listEmpty(tmp3_1)) goto tmp2_end;
          tmpMeta48 = MMC_CAR(tmp3_1);
          tmpMeta49 = MMC_CDR(tmp3_1);
          if (listEmpty(tmpMeta49)) goto tmp2_end;
          tmpMeta50 = MMC_CAR(tmpMeta49);
          tmpMeta51 = MMC_CDR(tmpMeta49);
          if (!listEmpty(tmpMeta51)) goto tmp2_end;
          
          /* Pattern matching succeeded */
          _eqns = omc_BackendEquation_getEqnsFromEqSystem(threadData, _syst);

          /* Pattern-matching assignment */
          tmpMeta52 = omc_BackendEquation_get(threadData, _eqns, _pos);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta52,0,4) == 0) goto goto_1;
          _eqn = tmpMeta52;

          omc_BackendEquation_aliasEquation(threadData, _eqn);
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      tmp2_done:
      (void)tmp3;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp2_done2;
      goto_1:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp3 < 4) {
        goto tmp2_top;
      }
      MMC_THROW_INTERNAL();
      tmp2_done2:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return;
}
PROTECTED_FUNCTION_STATIC void boxptr_BackendDAEOptimize_countsimpleEquation(threadData_t *threadData, modelica_metatype _elem, modelica_metatype _length, modelica_metatype _pos, modelica_metatype _syst, modelica_metatype _shared)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  tmp1 = mmc_unbox_integer(_length);
  tmp2 = mmc_unbox_integer(_pos);
  omc_BackendDAEOptimize_countsimpleEquation(threadData, _elem, tmp1, tmp2, _syst, _shared);
  return;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_countSimpleEquationsFinder(threadData_t *threadData, modelica_metatype _elem, modelica_integer _pos, modelica_metatype _inTpl, modelica_metatype *out_outTpl)
{
  modelica_metatype _outList = NULL;
  modelica_metatype _outTpl = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outList has no default value.
  // _outTpl has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _inTpl;
    {
      modelica_integer _l;
      modelica_integer _n;
      modelica_integer _n_1;
      modelica_metatype _dae = NULL;
      modelica_metatype _syst = NULL;
      modelica_metatype _shared = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _l has no default value.
      // _n has no default value.
      // _n_1 has no default value.
      // _dae has no default value.
      // _syst has no default value.
      // _shared has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_integer tmp12;
          modelica_boolean tmp13;
          modelica_boolean tmp14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (listEmpty(tmpMeta7)) goto tmp3_end;
          tmpMeta8 = MMC_CAR(tmpMeta7);
          tmpMeta9 = MMC_CDR(tmpMeta7);
          if (!listEmpty(tmpMeta9)) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmp12 = mmc_unbox_integer(tmpMeta11);
          _dae = tmpMeta6;
          _syst = tmpMeta8;
          _shared = tmpMeta10;
          _n = tmp12  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          _l = listLength(_elem);

          /* Pattern-matching assignment */
          tmp13 = (_l < ((modelica_integer) 3));
          if (1 /* true */ != tmp13) goto goto_2;

          /* Pattern-matching assignment */
          tmp14 = (_l > ((modelica_integer) 0));
          if (1 /* true */ != tmp14) goto goto_2;

          omc_BackendDAEOptimize_countsimpleEquation(threadData, _elem, _l, _pos, _syst, _shared);

          _n_1 = ((modelica_integer) 1) + _n;
          tmpMeta15 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta16 = mmc_mk_box2(0, _dae, mmc_mk_integer(_n_1));
          tmpMeta[0+0] = tmpMeta15;
          tmpMeta[0+1] = tmpMeta16;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta17;
          
          /* Pattern matching succeeded */
          tmpMeta17 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta[0+0] = tmpMeta17;
          tmpMeta[0+1] = _inTpl;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outList = tmpMeta[0+0];
  _outTpl = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outTpl) { *out_outTpl = _outTpl; }
  return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_countSimpleEquationsFinder(threadData_t *threadData, modelica_metatype _elem, modelica_metatype _pos, modelica_metatype _inTpl, modelica_metatype *out_outTpl)
{
  modelica_integer tmp1;
  modelica_metatype _outList = NULL;
  tmp1 = mmc_unbox_integer(_pos);
  _outList = omc_BackendDAEOptimize_countSimpleEquationsFinder(threadData, _elem, tmp1, _inTpl, out_outTpl);
  /* skip box _outList; list<#Integer> */
  /* skip box _outTpl; tuple<BackendDAE.BackendDAE, #Integer> */
  return _outList;
}

DLLDirection
modelica_integer omc_BackendDAEOptimize_countSimpleEquations(threadData_t *threadData, modelica_metatype _inDlow, modelica_metatype _inM)
{
  modelica_integer _outSimpleEqns;
  modelica_integer tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outSimpleEqns has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inDlow;
    {
      modelica_metatype _dlow = NULL;
      modelica_integer _n;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _dlow has no default value.
      // _n has no default value.
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_integer tmp8;
          modelica_metatype tmpMeta9;
          
          _dlow = tmp4_1;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment, wild first pattern */
          tmpMeta9 = mmc_mk_box2(0, _dlow, mmc_mk_integer(((modelica_integer) 0)));
          omc_AdjacencyMatrix_traverseAdjacencyMatrix(threadData, _inM, boxvar_BackendDAEOptimize_countSimpleEquationsFinder, tmpMeta9, &tmpMeta6);
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          tmp8 = mmc_unbox_integer(tmpMeta7);
          _n = tmp8  /* pattern as ty=Integer */;
          tmp1 = _n;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outSimpleEqns = tmp1;
  _return: OMC_LABEL_UNUSED
  return _outSimpleEqns;
}
modelica_metatype boxptr_BackendDAEOptimize_countSimpleEquations(threadData_t *threadData, modelica_metatype _inDlow, modelica_metatype _inM)
{
  modelica_integer _outSimpleEqns;
  modelica_metatype out_outSimpleEqns;
  _outSimpleEqns = omc_BackendDAEOptimize_countSimpleEquations(threadData, _inDlow, _inM);
  out_outSimpleEqns = mmc_mk_icon(_outSimpleEqns);
  return out_outSimpleEqns;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traversingTimeEqnsFinder(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_boolean *out_cont, modelica_metatype *out_outTpl)
{
  modelica_metatype _outExp = NULL;
  modelica_boolean _cont;
  modelica_metatype _outTpl = NULL;
  modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _cont has no default value.
  // _outTpl has no default value.
  
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inExp;
    tmp4_2 = _inTpl;
    {
      modelica_metatype _e = NULL;
      modelica_boolean _b;
      modelica_boolean _b1;
      modelica_boolean _b2;
      modelica_metatype _vars = NULL;
      modelica_metatype _globalKnownVars = NULL;
      modelica_metatype _cr = NULL;
      modelica_metatype _var = NULL;
      modelica_metatype _vlst = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e has no default value.
      // _b has no default value.
      // _b1 has no default value.
      // _b2 has no default value.
      // _vars has no default value.
      // _globalKnownVars has no default value.
      // _cr has no default value.
      // _var has no default value.
      // _vlst has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 10; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_integer tmp12;
          modelica_metatype tmpMeta13;
          modelica_integer tmp14;
          modelica_metatype tmpMeta15;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,3) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (4 != MMC_STRLEN(tmpMeta7) || strcmp(MMC_STRINGDATA(_OMC_LIT27), MMC_STRINGDATA(tmpMeta7)) != 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
          if (!listEmpty(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp12 = mmc_unbox_integer(tmpMeta11);
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp14 = mmc_unbox_integer(tmpMeta13);
          _e = tmp4_1;
          _vars = tmpMeta9;
          _globalKnownVars = tmpMeta10;
          _b1 = tmp12  /* pattern as ty=Boolean */;
          _b2 = tmp14  /* pattern as ty=Boolean */;
          /* Pattern matching succeeded */
          tmpMeta15 = mmc_mk_box5(0, mmc_mk_boolean(1 /* true */), _vars, _globalKnownVars, mmc_mk_boolean(_b1), mmc_mk_boolean(_b2));
          tmpMeta[0+0] = _e;
          tmp1_c1 = 0 /* false */;
          tmpMeta[0+2] = tmpMeta15;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_integer tmp20;
          modelica_metatype tmpMeta21;
          modelica_integer tmp22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          modelica_boolean tmp27;
          modelica_metatype tmpMeta28;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp20 = mmc_unbox_integer(tmpMeta19);
          tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp22 = mmc_unbox_integer(tmpMeta21);
          _e = tmp4_1;
          _cr = tmpMeta16;
          _vars = tmpMeta17;
          _globalKnownVars = tmpMeta18;
          _b1 = tmp20  /* pattern as ty=Boolean */;
          _b2 = tmp22  /* pattern as ty=Boolean */;
          tmp4 += 5; /* Pattern matching succeeded; we may skip some cases if we fail */
          /* Pattern-matching tuple assignment */
          tmpMeta26 = omc_BackendVariable_getVar(threadData, _cr, _globalKnownVars, &tmpMeta23);
          _vlst = tmpMeta26;
          if (listEmpty(tmpMeta23)) goto goto_2;
          tmpMeta24 = MMC_CAR(tmpMeta23);
          tmpMeta25 = MMC_CDR(tmpMeta23);

          /* Pattern-matching assignment */
          tmp27 = omc_List_none(threadData, _vlst, boxvar_BackendDAEOptimize_toplevelInputOrUnfixed);
          if (0 /* false */ != tmp27) goto goto_2;
          tmpMeta28 = mmc_mk_box5(0, mmc_mk_boolean(1 /* true */), _vars, _globalKnownVars, mmc_mk_boolean(_b1), mmc_mk_boolean(_b2));
          tmpMeta[0+0] = _e;
          tmp1_c1 = 0 /* false */;
          tmpMeta[0+2] = tmpMeta28;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          modelica_integer tmp41;
          modelica_metatype tmpMeta42;
          modelica_integer tmp43;
          modelica_metatype tmpMeta44;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta29,1,1) == 0) goto tmp3_end;
          tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta29), 2));
          if (6 != MMC_STRLEN(tmpMeta30) || strcmp(MMC_STRINGDATA(_OMC_LIT234), MMC_STRINGDATA(tmpMeta30)) != 0) goto tmp3_end;
          tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta31)) goto tmp3_end;
          tmpMeta32 = MMC_CAR(tmpMeta31);
          tmpMeta33 = MMC_CDR(tmpMeta31);
          if (listEmpty(tmpMeta33)) goto tmp3_end;
          tmpMeta34 = MMC_CAR(tmpMeta33);
          tmpMeta35 = MMC_CDR(tmpMeta33);
          if (listEmpty(tmpMeta35)) goto tmp3_end;
          tmpMeta36 = MMC_CAR(tmpMeta35);
          tmpMeta37 = MMC_CDR(tmpMeta35);
          if (!listEmpty(tmpMeta37)) goto tmp3_end;
          tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp41 = mmc_unbox_integer(tmpMeta40);
          tmpMeta42 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp43 = mmc_unbox_integer(tmpMeta42);
          _e = tmp4_1;
          _vars = tmpMeta38;
          _globalKnownVars = tmpMeta39;
          _b1 = tmp41  /* pattern as ty=Boolean */;
          _b2 = tmp43  /* pattern as ty=Boolean */;
          tmp4 += 6; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta44 = mmc_mk_box5(0, mmc_mk_boolean(1 /* true */), _vars, _globalKnownVars, mmc_mk_boolean(_b1), mmc_mk_boolean(_b2));
          tmpMeta[0+0] = _e;
          tmp1_c1 = 0 /* false */;
          tmpMeta[0+2] = tmpMeta44;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta45;
          modelica_metatype tmpMeta46;
          modelica_metatype tmpMeta47;
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta49;
          modelica_metatype tmpMeta50;
          modelica_metatype tmpMeta51;
          modelica_metatype tmpMeta52;
          modelica_integer tmp53;
          modelica_metatype tmpMeta54;
          modelica_integer tmp55;
          modelica_metatype tmpMeta56;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta45,1,1) == 0) goto tmp3_end;
          tmpMeta46 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta45), 2));
          if (3 != MMC_STRLEN(tmpMeta46) || strcmp(MMC_STRINGDATA(_OMC_LIT147), MMC_STRINGDATA(tmpMeta46)) != 0) goto tmp3_end;
          tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta47)) goto tmp3_end;
          tmpMeta48 = MMC_CAR(tmpMeta47);
          tmpMeta49 = MMC_CDR(tmpMeta47);
          if (!listEmpty(tmpMeta49)) goto tmp3_end;
          tmpMeta50 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmpMeta51 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmpMeta52 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp53 = mmc_unbox_integer(tmpMeta52);
          tmpMeta54 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp55 = mmc_unbox_integer(tmpMeta54);
          _e = tmp4_1;
          _vars = tmpMeta50;
          _globalKnownVars = tmpMeta51;
          _b1 = tmp53  /* pattern as ty=Boolean */;
          _b2 = tmp55  /* pattern as ty=Boolean */;
          tmp4 += 5; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta56 = mmc_mk_box5(0, mmc_mk_boolean(1 /* true */), _vars, _globalKnownVars, mmc_mk_boolean(_b1), mmc_mk_boolean(_b2));
          tmpMeta[0+0] = _e;
          tmp1_c1 = 0 /* false */;
          tmpMeta[0+2] = tmpMeta56;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta57;
          modelica_metatype tmpMeta58;
          modelica_metatype tmpMeta59;
          modelica_metatype tmpMeta60;
          modelica_metatype tmpMeta61;
          modelica_metatype tmpMeta62;
          modelica_metatype tmpMeta63;
          modelica_metatype tmpMeta64;
          modelica_integer tmp65;
          modelica_metatype tmpMeta66;
          modelica_integer tmp67;
          modelica_metatype tmpMeta68;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta57 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta57,1,1) == 0) goto tmp3_end;
          tmpMeta58 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta57), 2));
          if (8 != MMC_STRLEN(tmpMeta58) || strcmp(MMC_STRINGDATA(_OMC_LIT207), MMC_STRINGDATA(tmpMeta58)) != 0) goto tmp3_end;
          tmpMeta59 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta59)) goto tmp3_end;
          tmpMeta60 = MMC_CAR(tmpMeta59);
          tmpMeta61 = MMC_CDR(tmpMeta59);
          if (!listEmpty(tmpMeta61)) goto tmp3_end;
          tmpMeta62 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmpMeta63 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmpMeta64 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp65 = mmc_unbox_integer(tmpMeta64);
          tmpMeta66 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp67 = mmc_unbox_integer(tmpMeta66);
          _e = tmp4_1;
          _vars = tmpMeta62;
          _globalKnownVars = tmpMeta63;
          _b1 = tmp65  /* pattern as ty=Boolean */;
          _b2 = tmp67  /* pattern as ty=Boolean */;
          tmp4 += 4; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta68 = mmc_mk_box5(0, mmc_mk_boolean(1 /* true */), _vars, _globalKnownVars, mmc_mk_boolean(_b1), mmc_mk_boolean(_b2));
          tmpMeta[0+0] = _e;
          tmp1_c1 = 0 /* false */;
          tmpMeta[0+2] = tmpMeta68;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta69;
          modelica_metatype tmpMeta70;
          modelica_metatype tmpMeta71;
          modelica_metatype tmpMeta72;
          modelica_metatype tmpMeta73;
          modelica_metatype tmpMeta74;
          modelica_metatype tmpMeta75;
          modelica_metatype tmpMeta76;
          modelica_integer tmp77;
          modelica_metatype tmpMeta78;
          modelica_integer tmp79;
          modelica_metatype tmpMeta80;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta69 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta69,1,1) == 0) goto tmp3_end;
          tmpMeta70 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta69), 2));
          if (6 != MMC_STRLEN(tmpMeta70) || strcmp(MMC_STRINGDATA(_OMC_LIT157), MMC_STRINGDATA(tmpMeta70)) != 0) goto tmp3_end;
          tmpMeta71 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta71)) goto tmp3_end;
          tmpMeta72 = MMC_CAR(tmpMeta71);
          tmpMeta73 = MMC_CDR(tmpMeta71);
          if (!listEmpty(tmpMeta73)) goto tmp3_end;
          tmpMeta74 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmpMeta75 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmpMeta76 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp77 = mmc_unbox_integer(tmpMeta76);
          tmpMeta78 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp79 = mmc_unbox_integer(tmpMeta78);
          _e = tmp4_1;
          _vars = tmpMeta74;
          _globalKnownVars = tmpMeta75;
          _b1 = tmp77  /* pattern as ty=Boolean */;
          _b2 = tmp79  /* pattern as ty=Boolean */;
          tmp4 += 3; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta80 = mmc_mk_box5(0, mmc_mk_boolean(1 /* true */), _vars, _globalKnownVars, mmc_mk_boolean(_b1), mmc_mk_boolean(_b2));
          tmpMeta[0+0] = _e;
          tmp1_c1 = 0 /* false */;
          tmpMeta[0+2] = tmpMeta80;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta81;
          modelica_metatype tmpMeta82;
          modelica_metatype tmpMeta83;
          modelica_metatype tmpMeta84;
          modelica_metatype tmpMeta85;
          modelica_metatype tmpMeta86;
          modelica_metatype tmpMeta87;
          modelica_metatype tmpMeta88;
          modelica_integer tmp89;
          modelica_metatype tmpMeta90;
          modelica_integer tmp91;
          modelica_metatype tmpMeta92;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta81 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta81,1,1) == 0) goto tmp3_end;
          tmpMeta82 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta81), 2));
          if (4 != MMC_STRLEN(tmpMeta82) || strcmp(MMC_STRINGDATA(_OMC_LIT158), MMC_STRINGDATA(tmpMeta82)) != 0) goto tmp3_end;
          tmpMeta83 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta83)) goto tmp3_end;
          tmpMeta84 = MMC_CAR(tmpMeta83);
          tmpMeta85 = MMC_CDR(tmpMeta83);
          if (!listEmpty(tmpMeta85)) goto tmp3_end;
          tmpMeta86 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmpMeta87 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmpMeta88 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp89 = mmc_unbox_integer(tmpMeta88);
          tmpMeta90 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp91 = mmc_unbox_integer(tmpMeta90);
          _e = tmp4_1;
          _vars = tmpMeta86;
          _globalKnownVars = tmpMeta87;
          _b1 = tmp89  /* pattern as ty=Boolean */;
          _b2 = tmp91  /* pattern as ty=Boolean */;
          tmp4 += 2; /* Pattern matching succeeded; we may skip some cases if we fail */
          tmpMeta92 = mmc_mk_box5(0, mmc_mk_boolean(1 /* true */), _vars, _globalKnownVars, mmc_mk_boolean(_b1), mmc_mk_boolean(_b2));
          tmpMeta[0+0] = _e;
          tmp1_c1 = 0 /* false */;
          tmpMeta[0+2] = tmpMeta92;
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta93;
          modelica_metatype tmpMeta94;
          modelica_metatype tmpMeta95;
          modelica_integer tmp96;
          modelica_metatype tmpMeta97;
          modelica_integer tmp98;
          modelica_metatype tmpMeta99;
          modelica_metatype tmpMeta100;
          modelica_metatype tmpMeta101;
          modelica_metatype tmpMeta102;
          modelica_metatype tmpMeta103;
          modelica_metatype tmpMeta104;
          modelica_metatype tmpMeta105;
          modelica_metatype tmpMeta106;
          modelica_metatype tmpMeta107;
          tmpMeta93 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmpMeta94 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmpMeta95 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp96 = mmc_unbox_integer(tmpMeta95);
          if (1 /* true */ != tmp96) goto tmp3_end;
          tmpMeta97 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp98 = mmc_unbox_integer(tmpMeta97);
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta99 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _vars = tmpMeta93;
          _globalKnownVars = tmpMeta94;
          _b2 = tmp98  /* pattern as ty=Boolean */;
          _e = tmp4_1;
          _cr = tmpMeta99;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta103 = omc_BackendVariable_getVar(threadData, _cr, _globalKnownVars, &tmpMeta100);
          if (listEmpty(tmpMeta103)) goto goto_2;
          tmpMeta104 = MMC_CAR(tmpMeta103);
          tmpMeta105 = MMC_CDR(tmpMeta103);
          _var = tmpMeta104;
          if (listEmpty(tmpMeta100)) goto goto_2;
          tmpMeta101 = MMC_CAR(tmpMeta100);
          tmpMeta102 = MMC_CDR(tmpMeta100);

          /* Pattern-matching assignment */
          tmpMeta106 = omc_BackendVariable_getVarDirection(threadData, _var);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta106,0,0) == 0) goto goto_2;
          tmpMeta107 = mmc_mk_box5(0, mmc_mk_boolean(1 /* true */), _vars, _globalKnownVars, mmc_mk_boolean(1 /* true */), mmc_mk_boolean(_b2));
          tmpMeta[0+0] = _e;
          tmp1_c1 = 0 /* false */;
          tmpMeta[0+2] = tmpMeta107;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta108;
          modelica_metatype tmpMeta109;
          modelica_metatype tmpMeta110;
          modelica_integer tmp111;
          modelica_metatype tmpMeta112;
          modelica_integer tmp113;
          modelica_metatype tmpMeta114;
          modelica_metatype tmpMeta115;
          modelica_metatype tmpMeta116;
          modelica_metatype tmpMeta117;
          modelica_metatype tmpMeta118;
          modelica_metatype tmpMeta119;
          modelica_metatype tmpMeta120;
          modelica_metatype tmpMeta121;
          tmpMeta108 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmpMeta109 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmpMeta110 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
          tmp111 = mmc_unbox_integer(tmpMeta110);
          tmpMeta112 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
          tmp113 = mmc_unbox_integer(tmpMeta112);
          if (1 /* true */ != tmp113) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta114 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _vars = tmpMeta108;
          _globalKnownVars = tmpMeta109;
          _b1 = tmp111  /* pattern as ty=Boolean */;
          _e = tmp4_1;
          _cr = tmpMeta114;
          /* Pattern matching succeeded */
          /* Pattern-matching tuple assignment */
          tmpMeta118 = omc_BackendVariable_getVar(threadData, _cr, _vars, &tmpMeta115);
          if (listEmpty(tmpMeta118)) goto goto_2;
          tmpMeta119 = MMC_CAR(tmpMeta118);
          tmpMeta120 = MMC_CDR(tmpMeta118);
          if (listEmpty(tmpMeta115)) goto goto_2;
          tmpMeta116 = MMC_CAR(tmpMeta115);
          tmpMeta117 = MMC_CDR(tmpMeta115);
          tmpMeta121 = mmc_mk_box5(0, mmc_mk_boolean(1 /* true */), _vars, _globalKnownVars, mmc_mk_boolean(_b1), mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _e;
          tmp1_c1 = 0 /* false */;
          tmpMeta[0+2] = tmpMeta121;
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta122;
          modelica_integer tmp123;
          tmpMeta122 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp123 = mmc_unbox_integer(tmpMeta122);
          
          _e = tmp4_1;
          _b = tmp123  /* pattern as ty=Boolean */;
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _e;
          tmp1_c1 = (!_b);
          tmpMeta[0+2] = _inTpl;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 10) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outExp = tmpMeta[0+0];
  _cont = tmp1_c1;
  _outTpl = tmpMeta[0+2];
  _return: OMC_LABEL_UNUSED
  if (out_cont) { *out_cont = _cont; }
  if (out_outTpl) { *out_outTpl = _outTpl; }
  return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_traversingTimeEqnsFinder(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_cont, modelica_metatype *out_outTpl)
{
  modelica_boolean _cont;
  modelica_metatype _outExp = NULL;
  _outExp = omc_BackendDAEOptimize_traversingTimeEqnsFinder(threadData, _inExp, _inTpl, &_cont, out_outTpl);
  /* skip box _outExp; DAE.Exp */
  if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
  /* skip box _outTpl; tuple<#Boolean, BackendDAE.Variables, BackendDAE.Variables, #Boolean, #Boolean> */
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_boolean omc_BackendDAEOptimize_toplevelInputOrUnfixed(threadData_t *threadData, modelica_metatype _inVar)
{
  modelica_boolean _b;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _b has no default value.
  _b = (omc_BackendVariable_isVarOnTopLevelAndInput(threadData, _inVar) || (omc_BackendVariable_isParam(threadData, _inVar) && (!omc_BackendVariable_varFixed(threadData, _inVar))));
  _return: OMC_LABEL_UNUSED
  return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_toplevelInputOrUnfixed(threadData_t *threadData, modelica_metatype _inVar)
{
  modelica_boolean _b;
  modelica_metatype out_b;
  _b = omc_BackendDAEOptimize_toplevelInputOrUnfixed(threadData, _inVar);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverseZeroCrossingExps(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fzc, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Farg, modelica_metatype *out_arg)
{
  modelica_metatype _zc = NULL;
  modelica_metatype _arg = NULL;
  modelica_metatype _relation = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _zc = __omcQ_24in_5Fzc;
  _arg = __omcQ_24in_5Farg;
  // _relation has no default value.
  _relation = omc_Expression_traverseExpBottomUp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_zc), 3))), ((modelica_fnptr) _func), _arg ,&_arg);

  if((!referenceEq(_relation, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_zc), 3))))))
  {
    tmpMeta1 = MMC_TAGPTR(mmc_alloc_words(6));
    memcpy(MMC_UNTAGPTR(tmpMeta1), MMC_UNTAGPTR(_zc), 6*sizeof(modelica_metatype));
    ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta1))[3] = _relation;
    _zc = tmpMeta1;
  }
  _return: OMC_LABEL_UNUSED
  if (out_arg) { *out_arg = _arg; }
  return _zc;
}

static modelica_metatype closure29_BackendDAEOptimize_traverseZeroCrossingExps(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_zc, modelica_metatype $in_arg, modelica_metatype tmp1)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_traverseZeroCrossingExps(thData, $in_zc, func, $in_arg, tmp1);
}static modelica_metatype closure30_BackendDAEOptimize_traverseZeroCrossingExps(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_zc, modelica_metatype $in_arg, modelica_metatype tmp3)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_traverseZeroCrossingExps(thData, $in_zc, func, $in_arg, tmp3);
}static modelica_metatype closure31_BackendDAEOptimize_traverseZeroCrossingExps(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_zc, modelica_metatype $in_arg, modelica_metatype tmp5)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_BackendDAEOptimize_traverseZeroCrossingExps(thData, $in_zc, func, $in_arg, tmp5);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverseEventInfoExps(threadData_t *threadData, modelica_metatype __omcQ_24in_5FeventInfo, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Farg, modelica_metatype *out_arg)
{
  modelica_metatype _eventInfo = NULL;
  modelica_metatype _arg = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _eventInfo = __omcQ_24in_5FeventInfo;
  _arg = __omcQ_24in_5Farg;
  tmpMeta2 = mmc_mk_box1(0, ((modelica_fnptr) _func));
  _arg = omc_DoubleEnded_mapFoldNoCopy(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eventInfo), 3)))), 2))), (modelica_fnptr) mmc_mk_box2(0,closure29_BackendDAEOptimize_traverseZeroCrossingExps,tmpMeta2), _arg);

  tmpMeta4 = mmc_mk_box1(0, ((modelica_fnptr) _func));
  _arg = omc_DoubleEnded_mapFoldNoCopy(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eventInfo), 5)))), 2))), (modelica_fnptr) mmc_mk_box2(0,closure30_BackendDAEOptimize_traverseZeroCrossingExps,tmpMeta4), _arg);

  tmpMeta6 = mmc_mk_box1(0, ((modelica_fnptr) _func));
  _arg = omc_DoubleEnded_mapFoldNoCopy(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eventInfo), 4))), (modelica_fnptr) mmc_mk_box2(0,closure31_BackendDAEOptimize_traverseZeroCrossingExps,tmpMeta6), _arg);
  _return: OMC_LABEL_UNUSED
  if (out_arg) { *out_arg = _arg; }
  return _eventInfo;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyTimeIndepFuncCallsShared(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  modelica_metatype _shared = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  // _shared has no default value.
  _shared = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDAE), 3)));

  tmpMeta1 = mmc_mk_box3(0, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 5))), mmc_mk_boolean(0 /* false */));
  tmpMeta2 = mmc_mk_box2(0, boxvar_BackendDAEOptimize_traverserExpsimplifyTimeIndepFuncCalls, tmpMeta1);
  omc_BackendDAEUtil_traverseBackendDAEExpsVarsWithUpdate(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 2))), boxvar_Expression_traverseSubexpressionsHelper, tmpMeta2);

  tmpMeta3 = mmc_mk_box3(0, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 5))), mmc_mk_boolean(0 /* false */));
  tmpMeta4 = mmc_mk_box2(0, boxvar_BackendDAEOptimize_traverserExpsimplifyTimeIndepFuncCalls, tmpMeta3);
  omc_BackendDAEUtil_traverseBackendDAEExpsEqns(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 6))), boxvar_Expression_traverseSubexpressionsHelper, tmpMeta4);

  tmpMeta5 = mmc_mk_box3(0, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 5))), mmc_mk_boolean(0 /* false */));
  tmpMeta6 = mmc_mk_box2(0, boxvar_BackendDAEOptimize_traverserExpsimplifyTimeIndepFuncCalls, tmpMeta5);
  omc_BackendDAEUtil_traverseBackendDAEExpsEqns(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 7))), boxvar_Expression_traverseSubexpressionsHelper, tmpMeta6);

  tmpMeta8 = mmc_mk_box3(0, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 5))), mmc_mk_boolean(0 /* false */));
  tmpMeta9 = mmc_mk_box2(0, boxvar_BackendDAEOptimize_traverserExpsimplifyTimeIndepFuncCalls, tmpMeta8);
  tmpMeta7 = MMC_TAGPTR(mmc_alloc_words(22));
  memcpy(MMC_UNTAGPTR(tmpMeta7), MMC_UNTAGPTR(_shared), 22*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta7))[13] = omc_BackendDAEOptimize_traverseEventInfoExps(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 13))), boxvar_Expression_traverseSubexpressionsHelper, tmpMeta9, NULL);
  _shared = tmpMeta7;

  tmpMeta10 = mmc_mk_box3(3, &BackendDAE_BackendDAE_DAE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDAE), 2))), _shared);
  _outDAE = tmpMeta10;
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_traverserExpsimplifyTimeIndepFuncCalls(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_outTpl)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _outTpl = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _outTpl has no default value.
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _inExp;
    tmp4_2 = _inTpl;
    {
      modelica_metatype _globalKnownVars = NULL;
      modelica_metatype _aliasvars = NULL;
      modelica_metatype _tp = NULL;
      modelica_metatype _e = NULL;
      modelica_metatype _zero = NULL;
      modelica_metatype _cr = NULL;
      modelica_metatype _var = NULL;
      modelica_metatype _attr = NULL;
      modelica_boolean _negate;
      modelica_string _idn = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _globalKnownVars has no default value.
      // _aliasvars has no default value.
      // _tp has no default value.
      // _e has no default value.
      // _zero has no default value.
      // _cr has no default value.
      // _var has no default value.
      // _attr has no default value.
      // _negate has no default value.
      // _idn has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 10; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_boolean tmp15;
          modelica_metatype tmpMeta16;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,1) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (3 != MMC_STRLEN(tmpMeta7) || strcmp(MMC_STRINGDATA(_OMC_LIT20), MMC_STRINGDATA(tmpMeta7)) != 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_CAR(tmpMeta8);
          tmpMeta10 = MMC_CDR(tmpMeta8);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,6,2) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
          if (!listEmpty(tmpMeta10)) goto tmp3_end;
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          
          _cr = tmpMeta11;
          _tp = tmpMeta12;
          _globalKnownVars = tmpMeta13;
          _aliasvars = tmpMeta14;
          /* Pattern matching succeeded */
          _var = omc_BackendVariable_getVarSingle(threadData, _cr, _globalKnownVars, NULL);

          /* Pattern-matching assignment */
          tmp15 = omc_BackendVariable_isVarOnTopLevelAndInput(threadData, _var);
          if (0 /* false */ != tmp15) goto goto_2;

          _zero = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _tp), NULL);
          tmpMeta16 = mmc_mk_box3(0, _globalKnownVars, _aliasvars, mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _zero;
          tmpMeta[0+1] = tmpMeta16;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,1,1) == 0) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 2));
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta19)) goto tmp3_end;
          tmpMeta20 = MMC_CAR(tmpMeta19);
          tmpMeta21 = MMC_CDR(tmpMeta19);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta20,6,2) == 0) goto tmp3_end;
          tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 2));
          if (!listEmpty(tmpMeta21)) goto tmp3_end;
          tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          
          _idn = tmpMeta18;
          _e = tmpMeta20;
          _cr = tmpMeta22;
          _globalKnownVars = tmpMeta23;
          _aliasvars = tmpMeta24;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!((stringEqual(_idn, _OMC_LIT147)) || (stringEqual(_idn, _OMC_LIT207)))) goto tmp3_end;
          omc_BackendVariable_getVarSingle(threadData, _cr, _globalKnownVars, NULL);
          tmpMeta25 = mmc_mk_box3(0, _globalKnownVars, _aliasvars, mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = tmpMeta25;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta26,1,1) == 0) goto tmp3_end;
          tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta26), 2));
          tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta28)) goto tmp3_end;
          tmpMeta29 = MMC_CAR(tmpMeta28);
          tmpMeta30 = MMC_CDR(tmpMeta28);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta29,6,2) == 0) goto tmp3_end;
          tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta29), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,1,3) == 0) goto tmp3_end;
          tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
          if (4 != MMC_STRLEN(tmpMeta32) || strcmp(MMC_STRINGDATA(_OMC_LIT27), MMC_STRINGDATA(tmpMeta32)) != 0) goto tmp3_end;
          if (!listEmpty(tmpMeta30)) goto tmp3_end;
          tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          
          _idn = tmpMeta27;
          _e = tmpMeta29;
          _globalKnownVars = tmpMeta33;
          _aliasvars = tmpMeta34;
          tmp4 += 1; /* Pattern matching succeeded; we may skip some cases if we fail */
          /* Check guard condition after assignments */
          if (!((stringEqual(_idn, _OMC_LIT147)) || (stringEqual(_idn, _OMC_LIT207)))) goto tmp3_end;
          tmpMeta35 = mmc_mk_box3(0, _globalKnownVars, _aliasvars, mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = tmpMeta35;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta36;
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          modelica_metatype tmpMeta44;
          modelica_metatype tmpMeta45;
          modelica_metatype tmpMeta46;
          modelica_metatype tmpMeta47;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta36,1,1) == 0) goto tmp3_end;
          tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta36), 2));
          tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta38)) goto tmp3_end;
          tmpMeta39 = MMC_CAR(tmpMeta38);
          tmpMeta40 = MMC_CDR(tmpMeta38);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta39,8,2) == 0) goto tmp3_end;
          tmpMeta41 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta39), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta41,5,1) == 0) goto tmp3_end;
          tmpMeta42 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta39), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta42,6,2) == 0) goto tmp3_end;
          tmpMeta43 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta42), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta43,1,3) == 0) goto tmp3_end;
          tmpMeta44 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta43), 2));
          if (4 != MMC_STRLEN(tmpMeta44) || strcmp(MMC_STRINGDATA(_OMC_LIT27), MMC_STRINGDATA(tmpMeta44)) != 0) goto tmp3_end;
          if (!listEmpty(tmpMeta40)) goto tmp3_end;
          tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta46 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          
          _idn = tmpMeta37;
          _e = tmpMeta39;
          _globalKnownVars = tmpMeta45;
          _aliasvars = tmpMeta46;
          tmp4 += 5; /* Pattern matching succeeded; we may skip some cases if we fail */
          /* Check guard condition after assignments */
          if (!((stringEqual(_idn, _OMC_LIT147)) || (stringEqual(_idn, _OMC_LIT207)))) goto tmp3_end;
          tmpMeta47 = mmc_mk_box3(0, _globalKnownVars, _aliasvars, mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = tmpMeta47;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta49;
          modelica_metatype tmpMeta50;
          modelica_metatype tmpMeta51;
          modelica_metatype tmpMeta52;
          modelica_metatype tmpMeta53;
          modelica_metatype tmpMeta54;
          modelica_metatype tmpMeta55;
          modelica_metatype tmpMeta56;
          modelica_metatype tmpMeta57;
          modelica_metatype tmpMeta58;
          modelica_metatype tmpMeta59;
          modelica_metatype tmpMeta60;
          modelica_metatype tmpMeta61;
          modelica_metatype tmpMeta62;
          modelica_metatype tmpMeta63;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta48 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta48,1,1) == 0) goto tmp3_end;
          tmpMeta49 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta48), 2));
          tmpMeta50 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta50)) goto tmp3_end;
          tmpMeta51 = MMC_CAR(tmpMeta50);
          tmpMeta52 = MMC_CDR(tmpMeta50);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta51,6,2) == 0) goto tmp3_end;
          tmpMeta53 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta51), 2));
          tmpMeta54 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta51), 3));
          if (!listEmpty(tmpMeta52)) goto tmp3_end;
          tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta56 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta57 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          
          _idn = tmpMeta49;
          _cr = tmpMeta53;
          _tp = tmpMeta54;
          _attr = tmpMeta55;
          _globalKnownVars = tmpMeta56;
          _aliasvars = tmpMeta57;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!((stringEqual(_idn, _OMC_LIT147)) || (stringEqual(_idn, _OMC_LIT207)))) goto tmp3_end;
          _var = omc_BackendVariable_getVarSingle(threadData, _cr, _aliasvars, NULL);

          _cr = omc_BackendVariable_getAlias(threadData, _var ,&_negate);

          tmpMeta58 = mmc_mk_box3(9, &DAE_Exp_CREF__desc, _cr, _tp);
          _e = tmpMeta58;

          _e = (_negate?omc_Expression_negate(threadData, _e):_e);

          tmpMeta59 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _idn);
          tmpMeta60 = mmc_mk_cons(_e, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta61 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, tmpMeta59, tmpMeta60, _attr);
          _e = omc_ExpressionSimplify_simplify(threadData, tmpMeta61, NULL);

          tmpMeta62 = mmc_mk_box3(0, _globalKnownVars, _aliasvars, mmc_mk_boolean(0 /* false */));
          _e = omc_Expression_traverseExpBottomUp(threadData, _e, boxvar_BackendDAEOptimize_traverserExpsimplifyTimeIndepFuncCalls, tmpMeta62, NULL);
          tmpMeta63 = mmc_mk_box3(0, _globalKnownVars, _aliasvars, mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = tmpMeta63;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta64;
          modelica_metatype tmpMeta65;
          modelica_metatype tmpMeta66;
          modelica_metatype tmpMeta67;
          modelica_metatype tmpMeta68;
          modelica_metatype tmpMeta69;
          modelica_metatype tmpMeta70;
          modelica_metatype tmpMeta71;
          modelica_metatype tmpMeta72;
          modelica_metatype tmpMeta73;
          modelica_metatype tmpMeta74;
          modelica_metatype tmpMeta75;
          modelica_metatype tmpMeta76;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta64 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta64,1,1) == 0) goto tmp3_end;
          tmpMeta65 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta64), 2));
          tmpMeta66 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta66)) goto tmp3_end;
          tmpMeta67 = MMC_CAR(tmpMeta66);
          tmpMeta68 = MMC_CDR(tmpMeta66);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta67,6,2) == 0) goto tmp3_end;
          tmpMeta69 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta67), 2));
          tmpMeta70 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta67), 3));
          if (!listEmpty(tmpMeta68)) goto tmp3_end;
          tmpMeta71 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta72 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          
          _idn = tmpMeta65;
          _cr = tmpMeta69;
          _tp = tmpMeta70;
          _globalKnownVars = tmpMeta71;
          _aliasvars = tmpMeta72;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!((stringEqual(_idn, _OMC_LIT157)) || (stringEqual(_idn, _OMC_LIT158)))) goto tmp3_end;
          /* Pattern-matching tuple assignment */
          tmpMeta73 = omc_BackendVariable_getVar(threadData, _cr, _globalKnownVars, NULL);
          if (listEmpty(tmpMeta73)) goto goto_2;
          tmpMeta74 = MMC_CAR(tmpMeta73);
          tmpMeta75 = MMC_CDR(tmpMeta73);

          _zero = omc_Expression_arrayFill(threadData, omc_Expression_arrayDimension(threadData, _tp), _OMC_LIT235);
          tmpMeta76 = mmc_mk_box3(0, _globalKnownVars, _aliasvars, mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _zero;
          tmpMeta[0+1] = tmpMeta76;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta77;
          modelica_metatype tmpMeta78;
          modelica_metatype tmpMeta79;
          modelica_metatype tmpMeta80;
          modelica_metatype tmpMeta81;
          modelica_metatype tmpMeta82;
          modelica_metatype tmpMeta83;
          modelica_metatype tmpMeta84;
          modelica_metatype tmpMeta85;
          modelica_metatype tmpMeta86;
          modelica_metatype tmpMeta87;
          modelica_metatype tmpMeta88;
          modelica_metatype tmpMeta89;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta77 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta77,1,1) == 0) goto tmp3_end;
          tmpMeta78 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta77), 2));
          tmpMeta79 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta79)) goto tmp3_end;
          tmpMeta80 = MMC_CAR(tmpMeta79);
          tmpMeta81 = MMC_CDR(tmpMeta79);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta80,6,2) == 0) goto tmp3_end;
          tmpMeta82 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta80), 2));
          tmpMeta83 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta80), 3));
          if (!listEmpty(tmpMeta81)) goto tmp3_end;
          tmpMeta84 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta85 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          
          _idn = tmpMeta78;
          _cr = tmpMeta82;
          _tp = tmpMeta83;
          _globalKnownVars = tmpMeta84;
          _aliasvars = tmpMeta85;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!((stringEqual(_idn, _OMC_LIT157)) || (stringEqual(_idn, _OMC_LIT158)))) goto tmp3_end;
          /* Pattern-matching tuple assignment */
          tmpMeta86 = omc_BackendVariable_getVar(threadData, _cr, _aliasvars, NULL);
          if (listEmpty(tmpMeta86)) goto goto_2;
          tmpMeta87 = MMC_CAR(tmpMeta86);
          tmpMeta88 = MMC_CDR(tmpMeta86);

          _zero = omc_Expression_arrayFill(threadData, omc_Expression_arrayDimension(threadData, _tp), _OMC_LIT235);
          tmpMeta89 = mmc_mk_box3(0, _globalKnownVars, _aliasvars, mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _zero;
          tmpMeta[0+1] = tmpMeta89;
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta90;
          modelica_metatype tmpMeta91;
          modelica_metatype tmpMeta92;
          modelica_metatype tmpMeta93;
          modelica_metatype tmpMeta94;
          modelica_metatype tmpMeta95;
          modelica_metatype tmpMeta96;
          modelica_metatype tmpMeta97;
          modelica_metatype tmpMeta98;
          modelica_metatype tmpMeta99;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta90 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta90,1,1) == 0) goto tmp3_end;
          tmpMeta91 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta90), 2));
          tmpMeta92 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta92)) goto tmp3_end;
          tmpMeta93 = MMC_CAR(tmpMeta92);
          tmpMeta94 = MMC_CDR(tmpMeta92);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta93,6,2) == 0) goto tmp3_end;
          tmpMeta95 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta93), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta95,1,3) == 0) goto tmp3_end;
          tmpMeta96 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta95), 2));
          if (4 != MMC_STRLEN(tmpMeta96) || strcmp(MMC_STRINGDATA(_OMC_LIT27), MMC_STRINGDATA(tmpMeta96)) != 0) goto tmp3_end;
          if (!listEmpty(tmpMeta94)) goto tmp3_end;
          tmpMeta97 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta98 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          
          _idn = tmpMeta91;
          _globalKnownVars = tmpMeta97;
          _aliasvars = tmpMeta98;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!((stringEqual(_idn, _OMC_LIT157)) || (stringEqual(_idn, _OMC_LIT158)))) goto tmp3_end;
          tmpMeta99 = mmc_mk_box3(0, _globalKnownVars, _aliasvars, mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _OMC_LIT235;
          tmpMeta[0+1] = tmpMeta99;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta100;
          modelica_metatype tmpMeta101;
          modelica_metatype tmpMeta102;
          modelica_metatype tmpMeta103;
          modelica_metatype tmpMeta104;
          modelica_metatype tmpMeta105;
          modelica_metatype tmpMeta106;
          modelica_metatype tmpMeta107;
          modelica_metatype tmpMeta108;
          modelica_metatype tmpMeta109;
          modelica_metatype tmpMeta110;
          modelica_metatype tmpMeta111;
          modelica_metatype tmpMeta112;
          modelica_metatype tmpMeta113;
          modelica_metatype tmpMeta114;
          modelica_metatype tmpMeta115;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta100 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta100,1,1) == 0) goto tmp3_end;
          tmpMeta101 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta100), 2));
          tmpMeta102 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta102)) goto tmp3_end;
          tmpMeta103 = MMC_CAR(tmpMeta102);
          tmpMeta104 = MMC_CDR(tmpMeta102);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta103,6,2) == 0) goto tmp3_end;
          tmpMeta105 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta103), 2));
          tmpMeta106 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta103), 3));
          if (!listEmpty(tmpMeta104)) goto tmp3_end;
          tmpMeta107 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmpMeta108 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmpMeta109 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          
          _idn = tmpMeta101;
          _cr = tmpMeta105;
          _tp = tmpMeta106;
          _attr = tmpMeta107;
          _globalKnownVars = tmpMeta108;
          _aliasvars = tmpMeta109;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!((stringEqual(_idn, _OMC_LIT157)) || (stringEqual(_idn, _OMC_LIT158)))) goto tmp3_end;
          _var = omc_BackendVariable_getVarSingle(threadData, _cr, _aliasvars, NULL);

          _cr = omc_BackendVariable_getAlias(threadData, _var ,&_negate);

          tmpMeta110 = mmc_mk_box3(9, &DAE_Exp_CREF__desc, _cr, _tp);
          _e = tmpMeta110;

          _e = (_negate?omc_Expression_negate(threadData, _e):_e);

          tmpMeta111 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _idn);
          tmpMeta112 = mmc_mk_cons(_e, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta113 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, tmpMeta111, tmpMeta112, _attr);
          _e = omc_ExpressionSimplify_simplify(threadData, tmpMeta113, NULL);

          tmpMeta114 = mmc_mk_box3(0, _globalKnownVars, _aliasvars, mmc_mk_boolean(0 /* false */));
          _e = omc_Expression_traverseExpBottomUp(threadData, _e, boxvar_BackendDAEOptimize_traverserExpsimplifyTimeIndepFuncCalls, tmpMeta114, NULL);
          tmpMeta115 = mmc_mk_box3(0, _globalKnownVars, _aliasvars, mmc_mk_boolean(1 /* true */));
          tmpMeta[0+0] = _e;
          tmpMeta[0+1] = tmpMeta115;
          goto tmp3_done;
        }
        case 9: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _inExp;
          tmpMeta[0+1] = _inTpl;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 10) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _outExp = tmpMeta[0+0];
  _outTpl = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_outTpl) { *out_outTpl = _outTpl; }
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyTimeIndepFuncCalls0(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _inShared, modelica_boolean _inChanged, modelica_metatype *out_outShared, modelica_boolean *out_outChanged)
{
  modelica_metatype _osyst = NULL;
  modelica_metatype _outShared = NULL;
  modelica_boolean _outChanged;
  modelica_boolean tmp1_c2 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _osyst has no default value.
  // _outShared has no default value.
  // _outChanged has no default value.
  
  
  
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
    tmp4_1 = _isyst;
    tmp4_2 = _inShared;
    {
      modelica_metatype _shared = NULL;
      modelica_metatype _syst = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _shared has no default value.
      // _syst has no default value.
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_integer tmp11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_integer tmp17;
          
          _syst = tmp4_1;
          _shared = tmp4_2;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta6 = mmc_mk_box3(0, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 5))), mmc_mk_boolean(0 /* false */));
          tmpMeta7 = mmc_mk_box2(0, boxvar_BackendDAEOptimize_traverserExpsimplifyTimeIndepFuncCalls, tmpMeta6);
          tmpMeta8 = omc_BackendDAEUtil_traverseBackendDAEExpsEqns(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_syst), 3))), boxvar_Expression_traverseSubexpressionsHelper, tmpMeta7);
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
          tmp11 = mmc_unbox_integer(tmpMeta10);
          if (1 /* true */ != tmp11) goto goto_2;

          /* Pattern-matching assignment */
          tmpMeta12 = mmc_mk_box3(0, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 5))), mmc_mk_boolean(0 /* false */));
          tmpMeta13 = mmc_mk_box2(0, boxvar_BackendDAEOptimize_traverserExpsimplifyTimeIndepFuncCalls, tmpMeta12);
          tmpMeta14 = omc_BackendDAEUtil_traverseBackendDAEExpsEqns(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_syst), 10))), boxvar_Expression_traverseSubexpressionsHelper, tmpMeta13);
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 3));
          tmp17 = mmc_unbox_integer(tmpMeta16);
          if (1 /* true */ != tmp17) goto goto_2;
          tmpMeta[0+0] = _isyst;
          tmpMeta[0+1] = _inShared;
          tmp1_c2 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _isyst;
          tmpMeta[0+1] = _inShared;
          tmp1_c2 = _inChanged;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _osyst = tmpMeta[0+0];
  _outShared = tmpMeta[0+1];
  _outChanged = tmp1_c2;
  _return: OMC_LABEL_UNUSED
  if (out_outShared) { *out_outShared = _outShared; }
  if (out_outChanged) { *out_outChanged = _outChanged; }
  return _osyst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_BackendDAEOptimize_simplifyTimeIndepFuncCalls0(threadData_t *threadData, modelica_metatype _isyst, modelica_metatype _inShared, modelica_metatype _inChanged, modelica_metatype *out_outShared, modelica_metatype *out_outChanged)
{
  modelica_integer tmp1;
  modelica_boolean _outChanged;
  modelica_metatype _osyst = NULL;
  tmp1 = mmc_unbox_integer(_inChanged);
  _osyst = omc_BackendDAEOptimize_simplifyTimeIndepFuncCalls0(threadData, _isyst, _inShared, tmp1, out_outShared, &_outChanged);
  /* skip box _osyst; BackendDAE.EqSystem */
  /* skip box _outShared; BackendDAE.Shared */
  if (out_outChanged) { *out_outChanged = mmc_mk_icon(_outChanged); }
  return _osyst;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_simplifyTimeIndepFuncCalls(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDAE has no default value.
  _outDAE = omc_BackendDAEUtil_mapEqSystemAndFold(threadData, _inDAE, boxvar_BackendDAEOptimize_simplifyTimeIndepFuncCalls0, mmc_mk_boolean(0 /* false */), NULL);

  _outDAE = omc_BackendDAEOptimize_simplifyTimeIndepFuncCallsShared(threadData, _outDAE);
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyInStreamGetMinMaxAttributes(threadData_t *threadData, modelica_metatype _cr, modelica_metatype _inVars, modelica_metatype *out_outMax)
{
  modelica_metatype _outMin = NULL;
  modelica_metatype _outMax = NULL;
  modelica_metatype _v = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outMin = mmc_mk_none();
  _outMax = mmc_mk_none();
  // _v has no default value.
  {
    modelica_metatype _vars;
    for (tmpMeta1 = _inVars; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _vars = MMC_CAR(tmpMeta1);
      { /* matchcontinue expression */
        {
          volatile mmc_switch_type tmp4;
          int tmp5;
          tmp4 = 0;
          MMC_TRY_INTERNAL(mmc_jumper)
          tmp3_top:
          threadData->mmc_jumper = &new_mmc_jumper;
          for (; tmp4 < 2; tmp4++) {
            switch (MMC_SWITCH_CAST(tmp4)) {
            case 0: {
              /* Pattern matching succeeded */
              _v = omc_BackendVariable_getVarSingle(threadData, _cr, _vars, NULL);

              _outMin = omc_BackendVariable_getMinMaxAttribute(threadData, _v ,&_outMax);

              break;
              goto tmp3_done;
            }
            case 1: {
              /* Pattern matching succeeded */
              goto tmp3_done;
            }
            }
            goto tmp3_end;
            tmp3_end: ;
          }
          goto goto_2;
          tmp3_done:
          (void)tmp4;
          MMC_RESTORE_INTERNAL(mmc_jumper);
          goto tmp3_done2;
          goto_2:;
          MMC_CATCH_INTERNAL(mmc_jumper);
          if (++tmp4 < 2) {
            goto tmp3_top;
          }
          MMC_THROW_INTERNAL();
          tmp3_done2:;
        }
      }
      ;
    }
  }
  _return: OMC_LABEL_UNUSED
  if (out_outMax) { *out_outMax = _outMax; }
  return _outMin;
}

static modelica_metatype closure32_Expression_isGreaterOrEqual(threadData_t *thData, modelica_metatype closure, modelica_metatype exp1)
{
  modelica_metatype exp2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_Expression_isGreaterOrEqual(thData, exp1, exp2);
}static modelica_metatype closure33_Expression_isGreaterOrEqual(threadData_t *thData, modelica_metatype closure, modelica_metatype exp2)
{
  modelica_metatype exp1 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_Expression_isGreaterOrEqual(thData, exp1, exp2);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyInStreamWork2(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inVars, modelica_metatype *out_outVars)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _outVars = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  _outVars = _inVars;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _inExp;
    {
      modelica_metatype _tp = NULL;
      modelica_metatype _cr = NULL;
      modelica_metatype _e = NULL;
      modelica_metatype _expr = NULL;
      modelica_metatype _eMin = NULL;
      modelica_metatype _eMax = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _tp has no default value.
      // _cr has no default value.
      // _e has no default value.
      // _expr has no default value.
      // _eMin has no default value.
      // _eMax has no default value.
      tmp4 = 0;
      for (; tmp4 < 5; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_boolean tmp16;
          modelica_metatype tmpMeta17;
          modelica_boolean tmp18;
          modelica_metatype tmpMeta19;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,1) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (16 != MMC_STRLEN(tmpMeta7) || strcmp(MMC_STRINGDATA(_OMC_LIT237), MMC_STRINGDATA(tmpMeta7)) != 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_CAR(tmpMeta8);
          tmpMeta10 = MMC_CDR(tmpMeta8);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,6,2) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
          if (listEmpty(tmpMeta10)) goto tmp3_end;
          tmpMeta12 = MMC_CAR(tmpMeta10);
          tmpMeta13 = MMC_CDR(tmpMeta10);
          if (!listEmpty(tmpMeta13)) goto tmp3_end;
          
          _e = tmpMeta9;
          _cr = tmpMeta11;
          _expr = tmpMeta12;
          /* Pattern matching succeeded */
          _eMin = omc_BackendDAEOptimize_simplifyInStreamGetMinMaxAttributes(threadData, _cr, _outVars ,&_eMax);

          _tp = omc_ComponentReference_crefTypeFull(threadData, _cr);
          tmp18 = (modelica_boolean)mmc_unbox_boolean(omc_Util_applyOptionOrDefault(threadData, _eMax, boxvar_Expression_isNegativeOrZero, mmc_mk_boolean(0 /* false */)));
          if(tmp18)
          {
            tmpMeta19 = omc_Expression_createZeroExpression(threadData, _tp);
          }
          else
          {
            tmpMeta14 = mmc_mk_box1(0, _expr);
            tmp16 = (modelica_boolean)mmc_unbox_boolean(omc_Util_applyOptionOrDefault(threadData, _eMin, (modelica_fnptr) mmc_mk_box2(0,closure32_Expression_isGreaterOrEqual,tmpMeta14), mmc_mk_boolean(0 /* false */)));
            if(tmp16)
            {
              tmpMeta17 = _e;
            }
            else
            {
              tmpMeta15 = mmc_mk_cons(_e, mmc_mk_cons(_expr, MMC_REFSTRUCTLIT(mmc_nil)));
              tmpMeta17 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT236, tmpMeta15, _tp);
            }
            tmpMeta19 = tmpMeta17;
          }
          tmpMeta1 = tmpMeta19;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_boolean tmp33;
          modelica_metatype tmpMeta34;
          modelica_boolean tmp35;
          modelica_metatype tmpMeta36;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta20,1,1) == 0) goto tmp3_end;
          tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 2));
          if (16 != MMC_STRLEN(tmpMeta21) || strcmp(MMC_STRINGDATA(_OMC_LIT237), MMC_STRINGDATA(tmpMeta21)) != 0) goto tmp3_end;
          tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta22)) goto tmp3_end;
          tmpMeta23 = MMC_CAR(tmpMeta22);
          tmpMeta24 = MMC_CDR(tmpMeta22);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta23,8,2) == 0) goto tmp3_end;
          tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta25,5,1) == 0) goto tmp3_end;
          tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 2));
          tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta27,6,2) == 0) goto tmp3_end;
          tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 2));
          if (listEmpty(tmpMeta24)) goto tmp3_end;
          tmpMeta29 = MMC_CAR(tmpMeta24);
          tmpMeta30 = MMC_CDR(tmpMeta24);
          if (!listEmpty(tmpMeta30)) goto tmp3_end;
          
          _e = tmpMeta23;
          _tp = tmpMeta26;
          _cr = tmpMeta28;
          _expr = tmpMeta29;
          /* Pattern matching succeeded */
          _eMin = omc_BackendDAEOptimize_simplifyInStreamGetMinMaxAttributes(threadData, _cr, _outVars ,&_eMax);
          tmp35 = (modelica_boolean)mmc_unbox_boolean(omc_Util_applyOptionOrDefault(threadData, _eMin, boxvar_Expression_isPositiveOrZero, mmc_mk_boolean(0 /* false */)));
          if(tmp35)
          {
            tmpMeta36 = omc_Expression_createZeroExpression(threadData, _tp);
          }
          else
          {
            tmpMeta31 = mmc_mk_box1(0, omc_Expression_negate(threadData, _expr));
            tmp33 = (modelica_boolean)mmc_unbox_boolean(omc_Util_applyOptionOrDefault(threadData, _eMax, (modelica_fnptr) mmc_mk_box2(0,closure33_Expression_isGreaterOrEqual,tmpMeta31), mmc_mk_boolean(0 /* false */)));
            if(tmp33)
            {
              tmpMeta34 = _e;
            }
            else
            {
              tmpMeta32 = mmc_mk_cons(_e, mmc_mk_cons(_expr, MMC_REFSTRUCTLIT(mmc_nil)));
              tmpMeta34 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT236, tmpMeta32, _tp);
            }
            tmpMeta36 = tmpMeta34;
          }
          tmpMeta1 = tmpMeta36;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          modelica_metatype tmpMeta44;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta37,1,1) == 0) goto tmp3_end;
          tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 2));
          if (16 != MMC_STRLEN(tmpMeta38) || strcmp(MMC_STRINGDATA(_OMC_LIT237), MMC_STRINGDATA(tmpMeta38)) != 0) goto tmp3_end;
          tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta39)) goto tmp3_end;
          tmpMeta40 = MMC_CAR(tmpMeta39);
          tmpMeta41 = MMC_CDR(tmpMeta39);
          if (listEmpty(tmpMeta41)) goto tmp3_end;
          tmpMeta42 = MMC_CAR(tmpMeta41);
          tmpMeta43 = MMC_CDR(tmpMeta41);
          if (!listEmpty(tmpMeta43)) goto tmp3_end;
          
          _e = tmpMeta40;
          _expr = tmpMeta42;
          /* Pattern matching succeeded */
          tmpMeta44 = mmc_mk_cons(_e, mmc_mk_cons(_expr, MMC_REFSTRUCTLIT(mmc_nil)));
          tmpMeta1 = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT236, tmpMeta44, omc_Expression_typeof(threadData, _e));
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta45;
          modelica_metatype tmpMeta46;
          modelica_metatype tmpMeta47;
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta49;
          modelica_metatype tmpMeta50;
          modelica_metatype tmpMeta51;
          modelica_metatype tmpMeta52;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
          tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta45,1,1) == 0) goto tmp3_end;
          tmpMeta46 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta45), 2));
          if (16 != MMC_STRLEN(tmpMeta46) || strcmp(MMC_STRINGDATA(_OMC_LIT238), MMC_STRINGDATA(tmpMeta46)) != 0) goto tmp3_end;
          tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (listEmpty(tmpMeta47)) goto tmp3_end;
          tmpMeta48 = MMC_CAR(tmpMeta47);
          tmpMeta49 = MMC_CDR(tmpMeta47);
          if (listEmpty(tmpMeta49)) goto tmp3_end;
          tmpMeta50 = MMC_CAR(tmpMeta49);
          tmpMeta51 = MMC_CDR(tmpMeta49);
          if (!listEmpty(tmpMeta51)) goto tmp3_end;
          
          _e = tmpMeta48;
          _expr = tmpMeta50;
          /* Pattern matching succeeded */
          _e = omc_ExpressionSimplify_simplify(threadData, _e, NULL);
          { /* match expression */
            modelica_metatype tmp55_1;
            tmp55_1 = _e;
            {
              modelica_metatype _a = NULL;
              modelica_metatype _b = NULL;
              volatile mmc_switch_type tmp55;
              int tmp56;
              // _a has no default value.
              // _b has no default value.
              tmp55 = 0;
              for (; tmp55 < 2; tmp55++) {
                switch (MMC_SWITCH_CAST(tmp55)) {
                case 0: {
                  modelica_metatype tmpMeta57;
                  modelica_metatype tmpMeta58;
                  modelica_metatype tmpMeta59;
                  if (mmc__uniontype__metarecord__typedef__equal(tmp55_1,7,3) == 0) goto tmp54_end;
                  tmpMeta57 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp55_1), 2));
                  tmpMeta58 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp55_1), 3));
                  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta58,3,1) == 0) goto tmp54_end;
                  tmpMeta59 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp55_1), 4));
                  _a = tmpMeta57;
                  _b = tmpMeta59;
                  /* Pattern matching succeeded */
                  /* Check guard condition after assignments */
                  if (!(omc_Expression_isZero(threadData, _a) && omc_Expression_isZero(threadData, _b))) goto tmp54_end;
                  tmpMeta52 = _expr;
                  goto tmp54_done;
                }
                case 1: {
                  
                  /* Pattern matching succeeded */
                  tmpMeta52 = _e;
                  goto tmp54_done;
                }
                }
                goto tmp54_end;
                tmp54_end: ;
              }
              goto goto_53;
              goto_53:;
              goto goto_2;
              goto tmp54_done;
              tmp54_done:;
            }
          }tmpMeta1 = tmpMeta52;
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _inExp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  if (out_outVars) { *out_outVars = _outVars; }
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_BackendDAEOptimize_simplifyInStreamWork(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inVars, modelica_metatype *out_outVars)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _outVars = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  _outVars = _inVars;
  _outExp = omc_Expression_traverseExpBottomUp(threadData, _inExp, boxvar_BackendDAEOptimize_simplifyInStreamWork2, _outVars, NULL);

  if((!omc_Expression_expEqual(threadData, _outExp, _inExp)))
  {
    _outExp = omc_ExpressionSimplify_simplify(threadData, _outExp, NULL);
  }
  _return: OMC_LABEL_UNUSED
  if (out_outVars) { *out_outVars = _outVars; }
  return _outExp;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_simplifyInStream(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fdae)
{
  modelica_metatype _dae = NULL;
  modelica_metatype _shared = NULL;
  modelica_metatype _eqs = NULL;
  modelica_metatype _vars = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _dae = __omcQ_24in_5Fdae;
  _shared = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dae), 3)));
  _eqs = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dae), 2)));
  {
    modelica_metatype __omcQ_24tmpVar23;
    modelica_metatype* tmp2;
    modelica_metatype tmpMeta3;
    modelica_metatype __omcQ_24tmpVar22;
    modelica_integer tmp4;
    modelica_metatype _eq_loopVar = 0;
    modelica_metatype _eq;
    _eq_loopVar = _eqs;
    tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar23 = tmpMeta3; /* defaultValue */
    tmp2 = &__omcQ_24tmpVar23;
    while(1) {
      tmp4 = 1;
      if (!listEmpty(_eq_loopVar)) {
        _eq = MMC_CAR(_eq_loopVar);
        _eq_loopVar = MMC_CDR(_eq_loopVar);
        tmp4--;
      }
      if (tmp4 == 0) {
        __omcQ_24tmpVar22 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 2)));
        *tmp2 = mmc_mk_cons(__omcQ_24tmpVar22,0);
        tmp2 = &MMC_CDR(*tmp2);
      } else if (tmp4 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp2 = mmc_mk_nil();
    tmpMeta1 = __omcQ_24tmpVar23;
  }
  _vars = tmpMeta1;
  tmpMeta5 = mmc_mk_cons((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 2))), _vars);
  _vars = tmpMeta5;

  tmpMeta6 = mmc_mk_cons((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 3))), _vars);
  _vars = tmpMeta6;

  omc_BackendDAEUtil_traverseBackendDAEExpsNoCopyWithUpdate(threadData, _dae, boxvar_BackendDAEOptimize_simplifyInStreamWork, _vars);
  _return: OMC_LABEL_UNUSED
  return _dae;
}

DLLDirection
modelica_metatype omc_BackendDAEOptimize_simplifyAllExpressions(threadData_t *threadData, modelica_metatype _inDAE)
{
  modelica_metatype _outDAE = NULL;
  modelica_metatype _removedEqsList = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _shared = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outDAE = _inDAE;
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _removedEqsList = tmpMeta1;
  // _shared has no default value.
  omc_BackendDAEUtil_traverseBackendDAEExpsNoCopyWithUpdate(threadData, _outDAE, boxvar_ExpressionSimplify_simplify1TraverseHelper, mmc_mk_integer(((modelica_integer) 0)));

  _shared = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outDAE), 3)));

  {
    modelica_metatype _eq;
    for (tmpMeta2 = omc_BackendEquation_equationList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_shared), 7)))); !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
    {
      _eq = MMC_CAR(tmpMeta2);
      { /* match expression */
        modelica_metatype tmp6_1;
        tmp6_1 = _eq;
        {
          volatile mmc_switch_type tmp6;
          int tmp7;
          tmp6 = 0;
          for (; tmp6 < 2; tmp6++) {
            switch (MMC_SWITCH_CAST(tmp6)) {
            case 0: {
              modelica_metatype tmpMeta8;
              modelica_metatype tmpMeta9;
              if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,4,5) == 0) goto tmp5_end;
              tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 3));
              tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
              if (!listEmpty(tmpMeta9)) goto tmp5_end;
              
              /* Pattern matching succeeded */
              tmpMeta3 = _removedEqsList;
              goto tmp5_done;
            }
            case 1: {
              modelica_metatype tmpMeta10;
              
              /* Pattern matching succeeded */
              tmpMeta10 = mmc_mk_cons(_eq, _removedEqsList);
              tmpMeta3 = tmpMeta10;
              goto tmp5_done;
            }
            }
            goto tmp5_end;
            tmp5_end: ;
          }
          goto goto_4;
          goto_4:;
          MMC_THROW_INTERNAL();
          goto tmp5_done;
          tmp5_done:;
        }
      }
      _removedEqsList = tmpMeta3;
    }
  }

  tmpMeta12 = MMC_TAGPTR(mmc_alloc_words(22));
  memcpy(MMC_UNTAGPTR(tmpMeta12), MMC_UNTAGPTR(_shared), 22*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta12))[7] = omc_BackendEquation_listEquation(threadData, listReverseInPlace(_removedEqsList));
  _shared = tmpMeta12;

  tmpMeta13 = MMC_TAGPTR(mmc_alloc_words(4));
  memcpy(MMC_UNTAGPTR(tmpMeta13), MMC_UNTAGPTR(_outDAE), 4*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta13))[3] = _shared;
  _outDAE = tmpMeta13;
  _return: OMC_LABEL_UNUSED
  return _outDAE;
}

