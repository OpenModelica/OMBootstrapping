#include "omc_simulation_settings.h"
#include "NFTyping.h"
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT0,1,5) {&ErrorTypes_MessageType_TRANSLATION__desc,}};
#define _OMC_LIT0 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT0)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT1,1,4) {&ErrorTypes_Severity_ERROR__desc,}};
#define _OMC_LIT1 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT1)
#define _OMC_LIT2_data "Dimension %s of %s and %s of %s differs when trying to deduce implicit iteration range."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT2,87,_OMC_LIT2_data);
#define _OMC_LIT2 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT2)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT3,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT2}};
#define _OMC_LIT3 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT3)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT4,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(138)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT3}};
#define _OMC_LIT4 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT4)
#define _OMC_LIT5_data "Identifier %s of implicit for iterator must be present as array subscript in the loop body."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT5,91,_OMC_LIT5_data);
#define _OMC_LIT5 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT5)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT6,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT5}};
#define _OMC_LIT6 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT7,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(110)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT6}};
#define _OMC_LIT7 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT7)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT8,1,13) {&NFType_UNKNOWN__desc,}};
#define _OMC_LIT8 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT8)
#define _OMC_LIT9_data "Assignment to iterator '%s'."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT9,28,_OMC_LIT9_data);
#define _OMC_LIT9 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT9)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT10,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT9}};
#define _OMC_LIT10 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT10)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT11,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(415)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT10}};
#define _OMC_LIT11 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT11)
#define _OMC_LIT12_data "The first argument to reinit must be a variable of type Real or an array of such variables."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT12,91,_OMC_LIT12_data);
#define _OMC_LIT12 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT12)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT13,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT12}};
#define _OMC_LIT13 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT13)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT14,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(249)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT13}};
#define _OMC_LIT14 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT14)
#define _OMC_LIT15_data "The first argument to reinit must be a continuous time variable, but %s is %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT15,78,_OMC_LIT15_data);
#define _OMC_LIT15 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT15)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT16,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT15}};
#define _OMC_LIT16 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT16)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT17,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(225)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT16}};
#define _OMC_LIT17 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT17)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT18,1,4) {&NFType_REAL__desc,}};
#define _OMC_LIT18 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT18)
#define _OMC_LIT19_data "The first argument to reinit must be a subtype of Real, but %s has type %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT19,75,_OMC_LIT19_data);
#define _OMC_LIT19 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT19)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT20,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT19}};
#define _OMC_LIT20 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT20)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT21,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(224)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT20}};
#define _OMC_LIT21 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT21)
#define _OMC_LIT22_data "Type mismatch for positional argument %s in %s(%s=%s). The argument has type:\n  %s\nexpected type:\n  %s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT22,102,_OMC_LIT22_data);
#define _OMC_LIT22 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT22)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT23,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT22}};
#define _OMC_LIT23 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT23)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT24,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(269)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT23}};
#define _OMC_LIT24 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT24)
#define _OMC_LIT25_data "2"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT25,1,_OMC_LIT25_data);
#define _OMC_LIT25 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT25)
#define _OMC_LIT26_data "reinit"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT26,6,_OMC_LIT26_data);
#define _OMC_LIT26 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT26)
#define _OMC_LIT27_data ""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT27,0,_OMC_LIT27_data);
#define _OMC_LIT27 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT27)
#define _OMC_LIT28_data "initial"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT28,7,_OMC_LIT28_data);
#define _OMC_LIT28 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT28)
#define _OMC_LIT29_data "Type error in when conditional '%s'. Expected Boolean scalar or vector, got %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT29,79,_OMC_LIT29_data);
#define _OMC_LIT29 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT29)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT30,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT29}};
#define _OMC_LIT30 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT30)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT31,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(12)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT30}};
#define _OMC_LIT31 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT31)
#define _OMC_LIT32_data "When-condition '%s' is not a discrete-time expression."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT32,54,_OMC_LIT32_data);
#define _OMC_LIT32 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT32)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT33,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT32}};
#define _OMC_LIT33 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT33)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT34,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(382)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT33}};
#define _OMC_LIT34 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT34)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT35,1,5) {&ErrorTypes_Severity_WARNING__desc,}};
#define _OMC_LIT35 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT35)
#define _OMC_LIT36_data "initial() may only be used as a when condition (when initial() or when {..., initial(), ...}), but got condition '%s'."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT36,118,_OMC_LIT36_data);
#define _OMC_LIT36 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT36)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT37,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT36}};
#define _OMC_LIT37 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT37)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT38,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(294)),_OMC_LIT0,_OMC_LIT35,_OMC_LIT37}};
#define _OMC_LIT38 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT38)
#define _OMC_LIT39_data "Clocked when branch in when equation."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT39,37,_OMC_LIT39_data);
#define _OMC_LIT39 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT39)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT40,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT39}};
#define _OMC_LIT40 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT40)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT41,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(565)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT40}};
#define _OMC_LIT41 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT41)
#define _OMC_LIT42_data "Clocked when equation can not contain elsewhen part."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT42,52,_OMC_LIT42_data);
#define _OMC_LIT42 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT42)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT43,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT42}};
#define _OMC_LIT43 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT43)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT44,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(562)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT43}};
#define _OMC_LIT44 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT44)
#define _OMC_LIT45_data "Type error in conditional '%s'. Expected Boolean, got %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT45,57,_OMC_LIT45_data);
#define _OMC_LIT45 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT45)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT46,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT45}};
#define _OMC_LIT46 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT46)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT47,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(10)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT46}};
#define _OMC_LIT47 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT47)
#define _OMC_LIT48_data "NFTyping.typeIfEquation"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT48,23,_OMC_LIT48_data);
#define _OMC_LIT48 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT48)
#define _OMC_LIT49_data "Invalid left-hand side of when-equation: %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT49,44,_OMC_LIT49_data);
#define _OMC_LIT49 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT49)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT50,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT49}};
#define _OMC_LIT50 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT50)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT51,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(158)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT50}};
#define _OMC_LIT51 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT51)
#define _OMC_LIT52_data "Type mismatch in equation %s of type %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT52,40,_OMC_LIT52_data);
#define _OMC_LIT52 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT52)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT53,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT52}};
#define _OMC_LIT53 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT53)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT54,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(45)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT53}};
#define _OMC_LIT54 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT54)
#define _OMC_LIT55_data " = "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT55,3,_OMC_LIT55_data);
#define _OMC_LIT55 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT55)
#define _OMC_LIT56_data "Trying to assign to %s component %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT56,36,_OMC_LIT56_data);
#define _OMC_LIT56 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT56)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT57,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT56}};
#define _OMC_LIT57 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT57)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT58,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(8)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT57}};
#define _OMC_LIT58 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT58)
#define _OMC_LIT59_data "input"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT59,5,_OMC_LIT59_data);
#define _OMC_LIT59 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT59)
#define _OMC_LIT60_data "Trying to assign to parameter component in %s := %s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT60,51,_OMC_LIT60_data);
#define _OMC_LIT60 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT60)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT61,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT60}};
#define _OMC_LIT61 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT61)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT62,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(7)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT61}};
#define _OMC_LIT62 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT62)
#define _OMC_LIT63_data "Trying to assign to constant component in %s := %s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT63,50,_OMC_LIT63_data);
#define _OMC_LIT63 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT63)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT64,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT63}};
#define _OMC_LIT64 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT64)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT65,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(6)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT64}};
#define _OMC_LIT65 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT65)
#define _OMC_LIT66_data "Type mismatch in assignment in %s := %s of %s := %s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT66,51,_OMC_LIT66_data);
#define _OMC_LIT66 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT66)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT67,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT66}};
#define _OMC_LIT67 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT67)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT68,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT67}};
#define _OMC_LIT68 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT68)
#define _OMC_LIT69_data "%s is not allowed in a function."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT69,32,_OMC_LIT69_data);
#define _OMC_LIT69 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT69)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT70,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT69}};
#define _OMC_LIT70 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT70)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT71,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(318)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT70}};
#define _OMC_LIT71 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT71)
#define _OMC_LIT72_data "terminate"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT72,9,_OMC_LIT72_data);
#define _OMC_LIT72 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT72)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT73,2,1) {_OMC_LIT72,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT73 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT73)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT74,1,5) {&NFType_STRING__desc,}};
#define _OMC_LIT74 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT74)
#define _OMC_LIT75_data "message"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT75,7,_OMC_LIT75_data);
#define _OMC_LIT75 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT75)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT76,2,1) {_OMC_LIT26,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT76 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT76)
#define _OMC_LIT77_data "Type error in while conditional '%s'. Expected Boolean got %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT77,62,_OMC_LIT77_data);
#define _OMC_LIT77 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT77)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT78,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT77}};
#define _OMC_LIT78 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT78)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT79,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(13)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT78}};
#define _OMC_LIT79 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT79)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT80,1,6) {&NFType_BOOLEAN__desc,}};
#define _OMC_LIT80 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT80)
#define _OMC_LIT81_data "assert"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT81,6,_OMC_LIT81_data);
#define _OMC_LIT81 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT81)
#define _OMC_LIT82_data "condition"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT82,9,_OMC_LIT82_data);
#define _OMC_LIT82 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT82)
#define _OMC_LIT83_data "AssertionLevel"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT83,14,_OMC_LIT83_data);
#define _OMC_LIT83 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT83)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT84,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT83}};
#define _OMC_LIT84 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT84)
#define _OMC_LIT85_data "warning"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT85,7,_OMC_LIT85_data);
#define _OMC_LIT85 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT85)
#define _OMC_LIT86_data "error"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT86,5,_OMC_LIT86_data);
#define _OMC_LIT86 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT86)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT87,2,1) {_OMC_LIT86,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT87 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT87)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT88,2,1) {_OMC_LIT85,_OMC_LIT87}};
#define _OMC_LIT88 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT88)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT89,3,8) {&NFType_ENUMERATION__desc,_OMC_LIT84,_OMC_LIT88}};
#define _OMC_LIT89 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT89)
#define _OMC_LIT90_data "level"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT90,5,_OMC_LIT90_data);
#define _OMC_LIT90 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT90)
#define _OMC_LIT91_data "Function argument %s=%s in call to %s has variability %s which is not a %s expression."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT91,86,_OMC_LIT91_data);
#define _OMC_LIT91 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT91)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT92,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT91}};
#define _OMC_LIT92 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT92)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT93,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(195)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT92}};
#define _OMC_LIT93 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT93)
#define _OMC_LIT94_data "parameter"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT94,9,_OMC_LIT94_data);
#define _OMC_LIT94 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT94)
#define _OMC_LIT95_data "%s is not a valid connector."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT95,28,_OMC_LIT95_data);
#define _OMC_LIT95 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT95)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT96,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT95}};
#define _OMC_LIT96 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT96)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT97,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(48)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT96}};
#define _OMC_LIT97 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT97)
#define _OMC_LIT98_data "%s is not a valid form for a connector, connectors must be either c1.c2...cn or m.c (where c is a connector and m is a non-connector)."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT98,134,_OMC_LIT98_data);
#define _OMC_LIT98 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT98)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT99,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT98}};
#define _OMC_LIT99 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT99)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT100,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(311)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT99}};
#define _OMC_LIT100 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT100)
#define _OMC_LIT101_data "Connector '%s' has non-parameter subscript '%s'."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT101,48,_OMC_LIT101_data);
#define _OMC_LIT101 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT101)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT102,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT101}};
#define _OMC_LIT102 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT102)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT103,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(111)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT102}};
#define _OMC_LIT103 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT103)
#define _OMC_LIT104_data "connect may not be used inside if-equations with non-parametric conditions (found connect(%s, %s))."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT104,99,_OMC_LIT104_data);
#define _OMC_LIT104 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT104)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT105,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT104}};
#define _OMC_LIT105 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT105)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT106,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(116)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT105}};
#define _OMC_LIT106 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT106)
#define _OMC_LIT107_data "The connectors in connect(%s, %s) are not type compatible."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT107,58,_OMC_LIT107_data);
#define _OMC_LIT107 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT107)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT108,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT107}};
#define _OMC_LIT108 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT108)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT109,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(406)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT108}};
#define _OMC_LIT109 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT109)
#define _OMC_LIT110_data "NFTyping.typeComponentSections got uninstantiated component "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT110,60,_OMC_LIT110_data);
#define _OMC_LIT110 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT110)
#define _OMC_LIT111_data "/home/adrpo33/OpenModelica/OMCompiler/Compiler/NFFrontEnd/NFTyping.mo"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT111,69,_OMC_LIT111_data);
#define _OMC_LIT111 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT111)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT112_6,1.758197185e9);
#define _OMC_LIT112_6 MMC_REFREALLIT(_OMC_LIT_STRUCT112_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT112,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT111,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2979)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2979)),MMC_IMMEDIATE(MMC_TAGFIXNUM(126)),_OMC_LIT112_6}};
#define _OMC_LIT112 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT112)
#define _OMC_LIT113_data "The lhs (result) of the external function declaration has array type (%s), but this is not allowed in the specification. You need to pass it as an input to the function (preferably also with a size()-expression to avoid out-of-bounds errors in the external call)."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT113,263,_OMC_LIT113_data);
#define _OMC_LIT113 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT113)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT114,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT113}};
#define _OMC_LIT114 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT114)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT115,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(177)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT114}};
#define _OMC_LIT115 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT115)
#define _OMC_LIT116_data "The lhs (result) of the external function declaration is not a variable."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT116,72,_OMC_LIT116_data);
#define _OMC_LIT116 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT116)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT117,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT116}};
#define _OMC_LIT117 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT117)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT118,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(176)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT117}};
#define _OMC_LIT118 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT118)
#define _OMC_LIT119_data "builtin"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT119,7,_OMC_LIT119_data);
#define _OMC_LIT119 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT119)
#define _OMC_LIT120_data "An external declaration with a single output without explicit mapping is defined as having the output as the lhs, but language %s does not support this for array variables. OpenModelica will put the output as an input (as is done when there is more than 1 output), but this is not according to the Modelica Specification. Use an explicit mapping instead of the implicit one to suppress this warning."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT120,399,_OMC_LIT120_data);
#define _OMC_LIT120 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT120)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT121,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT120}};
#define _OMC_LIT121 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT121)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT122,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(290)),_OMC_LIT0,_OMC_LIT35,_OMC_LIT121}};
#define _OMC_LIT122 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT122)
#define _OMC_LIT123_data "Invalid external argument '%s', the dimension index must be a constant expression."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT123,82,_OMC_LIT123_data);
#define _OMC_LIT123 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT123)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT124,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT123}};
#define _OMC_LIT124 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT124)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT125,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(328)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT124}};
#define _OMC_LIT125 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT125)
#define _OMC_LIT126_data "Expression %s cannot be an external argument. Only identifiers, scalar constants, and size-expressions are allowed."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT126,115,_OMC_LIT126_data);
#define _OMC_LIT126 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT126)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT127,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT126}};
#define _OMC_LIT127 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT127)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT128,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(251)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT127}};
#define _OMC_LIT128 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT128)
#define _OMC_LIT129_data "Function %s has more than one algorithm section or external declaration."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT129,72,_OMC_LIT129_data);
#define _OMC_LIT129 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT129)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT130,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT129}};
#define _OMC_LIT130 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT130)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT131,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(315)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT130}};
#define _OMC_LIT131 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT131)
#define _OMC_LIT132_data "NFTyping.typeFunctionSections got uninstantiated class "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT132,55,_OMC_LIT132_data);
#define _OMC_LIT132 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT132)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT133_6,1.758197185e9);
#define _OMC_LIT133_6 MMC_REFREALLIT(_OMC_LIT_STRUCT133_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT133,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT111,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2799)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2799)),MMC_IMMEDIATE(MMC_TAGFIXNUM(122)),_OMC_LIT133_6}};
#define _OMC_LIT133 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT133)
#define _OMC_LIT134_data "Class specialization violation: %s is a %s, which may not contain an %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT134,72,_OMC_LIT134_data);
#define _OMC_LIT134 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT134)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT135,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT134}};
#define _OMC_LIT135 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT135)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT136,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(212)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT135}};
#define _OMC_LIT136 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT136)
#define _OMC_LIT137_data "external declaration"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT137,20,_OMC_LIT137_data);
#define _OMC_LIT137 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT137)
#define _OMC_LIT138_data "NFTyping.typeClassSections got uninstantiated class "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT138,52,_OMC_LIT138_data);
#define _OMC_LIT138 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT138)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT139_6,1.758197185e9);
#define _OMC_LIT139_6 MMC_REFREALLIT(_OMC_LIT_STRUCT139_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT139,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT111,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2737)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2737)),MMC_IMMEDIATE(MMC_TAGFIXNUM(122)),_OMC_LIT139_6}};
#define _OMC_LIT139 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT139)
#define _OMC_LIT140_data "Type mismatch in if-expression in component %s. True branch: %s has type %s, false branch: %s has type %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT140,106,_OMC_LIT140_data);
#define _OMC_LIT140 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT140)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT141,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT140}};
#define _OMC_LIT141 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT141)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT142,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(83)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT141}};
#define _OMC_LIT142 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT142)
#define _OMC_LIT143_data "der"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT143,3,_OMC_LIT143_data);
#define _OMC_LIT143 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT143)
#define _OMC_LIT144_data "evaluateStructuralParameters"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT144,28,_OMC_LIT144_data);
#define _OMC_LIT144 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT144)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT145,1,4) {&Flags_FlagVisibility_EXTERNAL__desc,}};
#define _OMC_LIT145 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT145)
#define _OMC_LIT146_data "all"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT146,3,_OMC_LIT146_data);
#define _OMC_LIT146 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT146)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT147,2,8) {&Flags_FlagData_STRING__FLAG__desc,_OMC_LIT146}};
#define _OMC_LIT147 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT147)
#define _OMC_LIT148_data "Evaluates all structural parameters"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT148,35,_OMC_LIT148_data);
#define _OMC_LIT148 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT148)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT149,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT148}};
#define _OMC_LIT149 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT149)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT150,2,0) {_OMC_LIT146,_OMC_LIT149}};
#define _OMC_LIT150 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT150)
#define _OMC_LIT151_data "strictlyNecessary"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT151,17,_OMC_LIT151_data);
#define _OMC_LIT151 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT151)
#define _OMC_LIT152_data "Evaluates only structural parameters strictly required by the frontend"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT152,70,_OMC_LIT152_data);
#define _OMC_LIT152 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT152)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT153,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT152}};
#define _OMC_LIT153 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT153)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT154,2,0) {_OMC_LIT151,_OMC_LIT153}};
#define _OMC_LIT154 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT154)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT155,2,1) {_OMC_LIT154,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT155 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT155)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT156,2,1) {_OMC_LIT150,_OMC_LIT155}};
#define _OMC_LIT156 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT156)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT157,2,4) {&Flags_ValidOptions_STRING__DESC__OPTION__desc,_OMC_LIT156}};
#define _OMC_LIT157 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT157)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT158,1,1) {_OMC_LIT157}};
#define _OMC_LIT158 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT158)
#define _OMC_LIT159_data "Sets which structural parameters are evaluated by the frontend."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT159,63,_OMC_LIT159_data);
#define _OMC_LIT159 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT159)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT160,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT159}};
#define _OMC_LIT160 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT160)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT161,8,3) {&Flags_ConfigFlag_CONFIG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(158)),_OMC_LIT144,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT145,_OMC_LIT147,_OMC_LIT158,_OMC_LIT160}};
#define _OMC_LIT161 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT161)
#define _OMC_LIT162_data "The first argument of %s must be an array expression."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT162,53,_OMC_LIT162_data);
#define _OMC_LIT162 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT162)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT163,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT162}};
#define _OMC_LIT163 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT163)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT164,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(229)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT163}};
#define _OMC_LIT164 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT164)
#define _OMC_LIT165_data "size"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT165,4,_OMC_LIT165_data);
#define _OMC_LIT165 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT165)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT166,2,1) {_OMC_LIT165,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT166 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT166)
#define _OMC_LIT167_data "Invalid index %s in call to size of %s, valid index interval is [1,%s]."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT167,71,_OMC_LIT167_data);
#define _OMC_LIT167 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT167)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT168,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT167}};
#define _OMC_LIT168 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT168)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT169,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(186)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT168}};
#define _OMC_LIT169 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT169)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT170,1,3) {&NFType_INTEGER__desc,}};
#define _OMC_LIT170 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT170)
#define _OMC_LIT171_data "size "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT171,5,_OMC_LIT171_data);
#define _OMC_LIT171 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT171)
#define _OMC_LIT172_data "dim"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT172,3,_OMC_LIT172_data);
#define _OMC_LIT172 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT172)
#define _OMC_LIT173_data "Integer"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT173,7,_OMC_LIT173_data);
#define _OMC_LIT173 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT173)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT174,0.0);
#define _OMC_LIT174 MMC_REFREALLIT(_OMC_LIT_STRUCT174)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT175,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT27,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT174}};
#define _OMC_LIT175 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT175)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT176,4,3) {&NFCeval_EvalTarget_EVAL__TARGET__desc,_OMC_LIT175,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT176 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT176)
#define _OMC_LIT177_data "Type mismatch in range: '%s' of type\n  %s\nis not type compatible with '%s' of type\n  %s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT177,87,_OMC_LIT177_data);
#define _OMC_LIT177 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT177)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT178,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT177}};
#define _OMC_LIT178 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT178)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT179,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(295)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT178}};
#define _OMC_LIT179 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT179)
#define _OMC_LIT180_data "Tuple expressions may only occur on the left side of an assignment or equation with a single function call on the right side. Got the following expression: %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT180,159,_OMC_LIT180_data);
#define _OMC_LIT180 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT180)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT181,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT180}};
#define _OMC_LIT181 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT181)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT182,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(291)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT181}};
#define _OMC_LIT182 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT182)
#define _OMC_LIT183_data "Tuple assignment only allowed for tuple of component references in lhs (in %s)."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT183,79,_OMC_LIT183_data);
#define _OMC_LIT183 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT183)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT184,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT183}};
#define _OMC_LIT184 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT184)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT185,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(147)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT184}};
#define _OMC_LIT185 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT185)
#define _OMC_LIT186_data "NFTyping.typeMatrixComma expected non-empty arguments"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT186,53,_OMC_LIT186_data);
#define _OMC_LIT186 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT186)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT187_6,1.758197185e9);
#define _OMC_LIT187_6 MMC_REFREALLIT(_OMC_LIT_STRUCT187_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT187,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT111,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2304)),MMC_IMMEDIATE(MMC_TAGFIXNUM(3)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2304)),MMC_IMMEDIATE(MMC_TAGFIXNUM(110)),_OMC_LIT187_6}};
#define _OMC_LIT187 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT187)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT188,2,3) {&NFExpression_INTEGER__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT188 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT188)
#define _OMC_LIT189_data "matrix constructor "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT189,19,_OMC_LIT189_data);
#define _OMC_LIT189 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT189)
#define _OMC_LIT190_data "arg"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT190,3,_OMC_LIT190_data);
#define _OMC_LIT190 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT190)
#define _OMC_LIT191_data "Array types mismatch. Argument %s (%s) has type %s whereas previous arguments have type %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT191,91,_OMC_LIT191_data);
#define _OMC_LIT191 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT191)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT192,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT191}};
#define _OMC_LIT192 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT192)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT193,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(587)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT192}};
#define _OMC_LIT193 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT193)
#define _OMC_LIT194_data "Subscript '%s' has type %s, expected type %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT194,45,_OMC_LIT194_data);
#define _OMC_LIT194 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT194)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT195,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT194}};
#define _OMC_LIT195 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT195)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT196,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(317)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT195}};
#define _OMC_LIT196 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT196)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT197,2,33) {&NFExpression_EMPTY__desc,_OMC_LIT8}};
#define _OMC_LIT197 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT197)
#define _OMC_LIT198_data "NFTyping.typeSubscript got unknown subscript"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT198,44,_OMC_LIT198_data);
#define _OMC_LIT198 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT198)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT199_6,1.758197185e9);
#define _OMC_LIT199_6 MMC_REFREALLIT(_OMC_LIT_STRUCT199_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT199,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT111,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2150)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2150)),MMC_IMMEDIATE(MMC_TAGFIXNUM(91)),_OMC_LIT199_6}};
#define _OMC_LIT199 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT199)
#define _OMC_LIT200_data "Wrong number of subscripts in %s (%s subscripts for %s dimensions)."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT200,67,_OMC_LIT200_data);
#define _OMC_LIT200 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT200)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT201,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT200}};
#define _OMC_LIT201 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT201)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT202,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(154)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT201}};
#define _OMC_LIT202 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT202)
#define _OMC_LIT203_data "time"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT203,4,_OMC_LIT203_data);
#define _OMC_LIT203 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT203)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT204,2,1) {_OMC_LIT203,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT204 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT204)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT205,1,3) {&NFTyping_TypingError_NO__ERROR__desc,}};
#define _OMC_LIT205 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT205)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT206,1,10) {&NFDimension_UNKNOWN__desc,}};
#define _OMC_LIT206 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT206)
#define _OMC_LIT207_data "Dimension %s of %s, '%s', could not be evaluated due to a cyclic dependency."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT207,76,_OMC_LIT207_data);
#define _OMC_LIT207 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT207)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT208,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT207}};
#define _OMC_LIT208 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT208)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT209,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(300)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT208}};
#define _OMC_LIT209 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT209)
#define _OMC_LIT210_data "NFTyping.evaluateArrayIf failed on "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT210,35,_OMC_LIT210_data);
#define _OMC_LIT210 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT210)
#define _OMC_LIT211_data "fill"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT211,4,_OMC_LIT211_data);
#define _OMC_LIT211 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT211)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT212,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT211}};
#define _OMC_LIT212 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT212)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT213,1,11) {&NFInstNode_InstNode_EMPTY__NODE__desc,}};
#define _OMC_LIT213 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT213)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT214,1,7) {&DAE_InlineType_NO__INLINE__desc,}};
#define _OMC_LIT214 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT214)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT215,3,4) {&DAE_FunctionBuiltin_FUNCTION__BUILTIN__desc,MMC_REFSTRUCTLIT(mmc_none),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */))}};
#define _OMC_LIT215 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT215)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT216,1,3) {&DAE_FunctionParallelism_FP__NON__PARALLEL__desc,}};
#define _OMC_LIT216 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT216)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT217,7,3) {&DAE_FunctionAttributes_FUNCTION__ATTRIBUTES__desc,_OMC_LIT214,MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT215,_OMC_LIT216}};
#define _OMC_LIT217 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT217)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT218,1,1) {MMC_IMMEDIATE(MMC_TAGFIXNUM(1))}};
#define _OMC_LIT218 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT218)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT219,1,1) {MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT219 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT219)
#define _OMC_LIT220_data "Type name '%s' is not allowed in this context."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT220,46,_OMC_LIT220_data);
#define _OMC_LIT220 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT220)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT221,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT220}};
#define _OMC_LIT221 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT221)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT222,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(303)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT221}};
#define _OMC_LIT222 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT222)
#define _OMC_LIT223_data "'end' can not be used outside array subscripts."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT223,47,_OMC_LIT223_data);
#define _OMC_LIT223 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT223)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT224,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT223}};
#define _OMC_LIT224 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT224)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT225,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(14)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT224}};
#define _OMC_LIT225 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT225)
#define _OMC_LIT226_data "."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT226,1,_OMC_LIT226_data);
#define _OMC_LIT226 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT226)
#define _OMC_LIT227_data "Modified element %s not found in class %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT227,42,_OMC_LIT227_data);
#define _OMC_LIT227 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT227)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT228,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT227}};
#define _OMC_LIT228 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT228)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT229,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(214)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT228}};
#define _OMC_LIT229 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT229)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT230,1,5) {&NFModifier_Modifier_NOMOD__desc,}};
#define _OMC_LIT230 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT230)
#define _OMC_LIT231_data "Component %s of variability %s has binding %s of higher variability %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT231,71,_OMC_LIT231_data);
#define _OMC_LIT231 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT231)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT232,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT231}};
#define _OMC_LIT232 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT232)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT233,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(130)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT232}};
#define _OMC_LIT233 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT233)
#define _OMC_LIT234_data "'"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT234,1,_OMC_LIT234_data);
#define _OMC_LIT234 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT234)
#define _OMC_LIT235_data "Component condition must be parameter or constant expression (in %s)."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT235,69,_OMC_LIT235_data);
#define _OMC_LIT235 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT235)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT236,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT235}};
#define _OMC_LIT236 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT236)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT237,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(100)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT236}};
#define _OMC_LIT237 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT237)
#define _OMC_LIT238_data "NFTyping.typeComponentCondition"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT238,31,_OMC_LIT238_data);
#define _OMC_LIT238 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT238)
#define _OMC_LIT239_data "NFTyping.typeBinding got uninstantiated binding"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT239,47,_OMC_LIT239_data);
#define _OMC_LIT239 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT239)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT240_6,1.758197185e9);
#define _OMC_LIT240_6 MMC_REFREALLIT(_OMC_LIT_STRUCT240_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT240,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT111,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1189)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1189)),MMC_IMMEDIATE(MMC_TAGFIXNUM(96)),_OMC_LIT240_6}};
#define _OMC_LIT240 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT240)
#define _OMC_LIT241_data "NFTyping.typeComponentBinding"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT241,29,_OMC_LIT241_data);
#define _OMC_LIT241 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT241)
#define _OMC_LIT242_data "graphics"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT242,8,_OMC_LIT242_data);
#define _OMC_LIT242 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT242)
#define _OMC_LIT243_data "NFTyping.typeComponentBinding got invalid node "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT243,47,_OMC_LIT243_data);
#define _OMC_LIT243 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT243)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT244_6,1.758197185e9);
#define _OMC_LIT244_6 MMC_REFREALLIT(_OMC_LIT_STRUCT244_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT244,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT111,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1115)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1115)),MMC_IMMEDIATE(MMC_TAGFIXNUM(109)),_OMC_LIT244_6}};
#define _OMC_LIT244 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT244)
#define _OMC_LIT245_data "NFTyping.typeBindings got uninstantiated class "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT245,47,_OMC_LIT245_data);
#define _OMC_LIT245 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT245)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT246_6,1.758197185e9);
#define _OMC_LIT246_6 MMC_REFREALLIT(_OMC_LIT_STRUCT246_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT246,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT111,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(982)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(982)),MMC_IMMEDIATE(MMC_TAGFIXNUM(116)),_OMC_LIT246_6}};
#define _OMC_LIT246 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT246)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT247,1,3) {&NFBinding_UNBOUND__desc,}};
#define _OMC_LIT247 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT247)
#define _OMC_LIT248_data "Dimensions must be parameter or constant expression (in %s)."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT248,60,_OMC_LIT248_data);
#define _OMC_LIT248 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT248)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT249,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT248}};
#define _OMC_LIT249 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT249)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT250,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(23)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT249}};
#define _OMC_LIT250 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT250)
#define _OMC_LIT251_data ":"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT251,1,_OMC_LIT251_data);
#define _OMC_LIT251 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT251)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT252,2,7) {&NFInstNode_InstNode_NAME__NODE__desc,_OMC_LIT251}};
#define _OMC_LIT252 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT252)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT253,1,4) {&NFComponentRef_EMPTY__desc,}};
#define _OMC_LIT253 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT253)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT254,6,3) {&NFComponentRef_CREF__desc,_OMC_LIT252,MMC_REFSTRUCTLIT(mmc_nil),_OMC_LIT8,MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),_OMC_LIT253}};
#define _OMC_LIT254 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT254)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT255,3,9) {&NFExpression_CREF__desc,_OMC_LIT8,_OMC_LIT254}};
#define _OMC_LIT255 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT255)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT256,3,4) {&NFDimension_UNTYPED__desc,_OMC_LIT255,MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */))}};
#define _OMC_LIT256 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT256)
#define _OMC_LIT257_data "start"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT257,5,_OMC_LIT257_data);
#define _OMC_LIT257 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT257)
#define _OMC_LIT258_data "Failed to deduce dimension %s of %s due to missing binding equation."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT258,68,_OMC_LIT258_data);
#define _OMC_LIT258 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT258)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT259,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT258}};
#define _OMC_LIT259 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT259)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT260,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(188)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT259}};
#define _OMC_LIT260 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT260)
#define _OMC_LIT261_data "Dimension %s of '%s' could not be deduced from the component's binding equation '%s'."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT261,85,_OMC_LIT261_data);
#define _OMC_LIT261 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT261)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT262,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT261}};
#define _OMC_LIT262 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT262)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT263,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(351)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT262}};
#define _OMC_LIT263 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT263)
#define _OMC_LIT264_data "NFTyping.typeDimension returned unknown dimension in a non-function context"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT264,75,_OMC_LIT264_data);
#define _OMC_LIT264 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT264)
#define _OMC_LIT265_data "The iteration range %s is not a constant or parameter expression."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT265,65,_OMC_LIT265_data);
#define _OMC_LIT265 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT265)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT266,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT265}};
#define _OMC_LIT266 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT266)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT267,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(109)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT266}};
#define _OMC_LIT267 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT267)
#define _OMC_LIT268_data "nfScalarize"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT268,11,_OMC_LIT268_data);
#define _OMC_LIT268 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT268)
#define _OMC_LIT269_data "Run scalarization in NF, default true."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT269,38,_OMC_LIT269_data);
#define _OMC_LIT269 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT269)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT270,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT269}};
#define _OMC_LIT270 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT270)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT271,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(168)),_OMC_LIT268,MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */)),_OMC_LIT270}};
#define _OMC_LIT271 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT271)
#define _OMC_LIT272_data "Type error in iteration range '%s'. Expected array got %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT272,58,_OMC_LIT272_data);
#define _OMC_LIT272 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT272)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT273,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT272}};
#define _OMC_LIT273 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT273)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT274,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(11)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT273}};
#define _OMC_LIT274 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT274)
#define _OMC_LIT275_data "NFTyping.typeIterator got non-iterator "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT275,39,_OMC_LIT275_data);
#define _OMC_LIT275 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT275)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT276_6,1.758197185e9);
#define _OMC_LIT276_6 MMC_REFREALLIT(_OMC_LIT_STRUCT276_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT276,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT111,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(573)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(573)),MMC_IMMEDIATE(MMC_TAGFIXNUM(113)),_OMC_LIT276_6}};
#define _OMC_LIT276 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT276)
#define _OMC_LIT277_data "Invalid prefix '%s' on non-Real component '%s'."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT277,47,_OMC_LIT277_data);
#define _OMC_LIT277 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT277)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT278,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT277}};
#define _OMC_LIT278 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT278)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT279,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(352)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT278}};
#define _OMC_LIT279 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT279)
#define _OMC_LIT280_data "NFTyping.typeComponentTry"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT280,25,_OMC_LIT280_data);
#define _OMC_LIT280 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT280)
#define _OMC_LIT281_data "NFTyping.typeComponent got noninstantiated component "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT281,53,_OMC_LIT281_data);
#define _OMC_LIT281 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT281)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT282_6,1.758197185e9);
#define _OMC_LIT282_6 MMC_REFREALLIT(_OMC_LIT_STRUCT282_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT282,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT111,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(493)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(493)),MMC_IMMEDIATE(MMC_TAGFIXNUM(127)),_OMC_LIT282_6}};
#define _OMC_LIT282 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT282)
#define _OMC_LIT283_data "NFTyping.makeRecordType got record type without constructor"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT283,59,_OMC_LIT283_data);
#define _OMC_LIT283 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT283)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT284_6,1.758197185e9);
#define _OMC_LIT284_6 MMC_REFREALLIT(_OMC_LIT_STRUCT284_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT284,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT111,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(421)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(422)),MMC_IMMEDIATE(MMC_TAGFIXNUM(64)),_OMC_LIT284_6}};
#define _OMC_LIT284 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT284)
#define _OMC_LIT285_data "Connector %s is not balanced: The number of potential variables (%s) is not equal to the number of flow variables (%s)."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT285,119,_OMC_LIT285_data);
#define _OMC_LIT285 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT285)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT286,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT285}};
#define _OMC_LIT286 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT286)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT287,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(150)),_OMC_LIT0,_OMC_LIT35,_OMC_LIT286}};
#define _OMC_LIT287 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT287)
#define _OMC_LIT288_data "allowNonStandardModelica"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT288,24,_OMC_LIT288_data);
#define _OMC_LIT288 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT288)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT289,2,9) {&Flags_FlagData_STRING__LIST__FLAG__desc,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT289 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT289)
#define _OMC_LIT290_data "nonStdMultipleExternalDeclarations"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT290,34,_OMC_LIT290_data);
#define _OMC_LIT290 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT290)
#define _OMC_LIT291_data "Allow several external declarations in functions.\nSee: https://specification.modelica.org/maint/3.5/functions.html#function-as-a-specialized-class"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT291,146,_OMC_LIT291_data);
#define _OMC_LIT291 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT291)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT292,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT291}};
#define _OMC_LIT292 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT292)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT293,2,0) {_OMC_LIT290,_OMC_LIT292}};
#define _OMC_LIT293 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT293)
#define _OMC_LIT294_data "nonStdEnumerationAsIntegers"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT294,27,_OMC_LIT294_data);
#define _OMC_LIT294 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT294)
#define _OMC_LIT295_data "Allow enumeration as integer without casting via Integer(Enum).\nSee: https://specification.modelica.org/maint/3.5/class-predefined-types-and-declarations.html#type-conversion-of-enumeration-values-to-string-or-integer"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT295,217,_OMC_LIT295_data);
#define _OMC_LIT295 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT295)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT296,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT295}};
#define _OMC_LIT296 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT296)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT297,2,0) {_OMC_LIT294,_OMC_LIT296}};
#define _OMC_LIT297 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT297)
#define _OMC_LIT298_data "nonStdIntegersAsEnumeration"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT298,27,_OMC_LIT298_data);
#define _OMC_LIT298 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT298)
#define _OMC_LIT299_data "Allow integer as enumeration without casting via Enum(Integer).\nSee: https://specification.modelica.org/maint/3.5/class-predefined-types-and-declarations.html#type-conversion-of-integer-to-enumeration-values"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT299,207,_OMC_LIT299_data);
#define _OMC_LIT299 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT299)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT300,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT299}};
#define _OMC_LIT300 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT300)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT301,2,0) {_OMC_LIT298,_OMC_LIT300}};
#define _OMC_LIT301 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT301)
#define _OMC_LIT302_data "nonStdDifferentCaseFileVsClassName"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT302,34,_OMC_LIT302_data);
#define _OMC_LIT302 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT302)
#define _OMC_LIT303_data "Allow directory or file with different case in the name than the contained class name.\nSee: https://specification.modelica.org/maint/3.5/packages.html#mapping-package-class-structures-to-a-hierarchical-file-system"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT303,213,_OMC_LIT303_data);
#define _OMC_LIT303 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT303)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT304,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT303}};
#define _OMC_LIT304 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT304)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT305,2,0) {_OMC_LIT302,_OMC_LIT304}};
#define _OMC_LIT305 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT305)
#define _OMC_LIT306_data "nonStdTopLevelOuter"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT306,19,_OMC_LIT306_data);
#define _OMC_LIT306 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT306)
#define _OMC_LIT307_data "Allow top level outer.\nSee: https://specification.modelica.org/maint/3.6/scoping-name-lookup-and-flattening.html#S4.p1"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT307,118,_OMC_LIT307_data);
#define _OMC_LIT307 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT307)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT308,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT307}};
#define _OMC_LIT308 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT308)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT309,2,0) {_OMC_LIT306,_OMC_LIT308}};
#define _OMC_LIT309 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT309)
#define _OMC_LIT310_data "protectedAccess"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT310,15,_OMC_LIT310_data);
#define _OMC_LIT310 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT310)
#define _OMC_LIT311_data "Allow access of protected elements"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT311,34,_OMC_LIT311_data);
#define _OMC_LIT311 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT311)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT312,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT311}};
#define _OMC_LIT312 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT312)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT313,2,0) {_OMC_LIT310,_OMC_LIT312}};
#define _OMC_LIT313 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT313)
#define _OMC_LIT314_data "reinitInAlgorithms"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT314,18,_OMC_LIT314_data);
#define _OMC_LIT314 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT314)
#define _OMC_LIT315_data "Allow reinit in algorithm sections"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT315,34,_OMC_LIT315_data);
#define _OMC_LIT315 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT315)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT316,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT315}};
#define _OMC_LIT316 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT316)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT317,2,0) {_OMC_LIT314,_OMC_LIT316}};
#define _OMC_LIT317 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT317)
#define _OMC_LIT318_data "unbalancedModel"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT318,15,_OMC_LIT318_data);
#define _OMC_LIT318 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT318)
#define _OMC_LIT319_data "Allow models to be locally unbalanced and to have unbalanced connectors"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT319,71,_OMC_LIT319_data);
#define _OMC_LIT319 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT319)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT320,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT319}};
#define _OMC_LIT320 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT320)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT321,2,0) {_OMC_LIT318,_OMC_LIT320}};
#define _OMC_LIT321 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT321)
#define _OMC_LIT322_data "implicitParameterStartAttribute"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT322,31,_OMC_LIT322_data);
#define _OMC_LIT322 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT322)
#define _OMC_LIT323_data "Allow fixed parameters with no binding or start attribute"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT323,57,_OMC_LIT323_data);
#define _OMC_LIT323 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT323)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT324,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT323}};
#define _OMC_LIT324 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT324)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT325,2,0) {_OMC_LIT322,_OMC_LIT324}};
#define _OMC_LIT325 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT325)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT326,2,1) {_OMC_LIT325,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT326 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT326)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT327,2,1) {_OMC_LIT321,_OMC_LIT326}};
#define _OMC_LIT327 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT327)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT328,2,1) {_OMC_LIT317,_OMC_LIT327}};
#define _OMC_LIT328 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT328)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT329,2,1) {_OMC_LIT313,_OMC_LIT328}};
#define _OMC_LIT329 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT329)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT330,2,1) {_OMC_LIT309,_OMC_LIT329}};
#define _OMC_LIT330 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT330)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT331,2,1) {_OMC_LIT305,_OMC_LIT330}};
#define _OMC_LIT331 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT331)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT332,2,1) {_OMC_LIT301,_OMC_LIT331}};
#define _OMC_LIT332 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT332)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT333,2,1) {_OMC_LIT297,_OMC_LIT332}};
#define _OMC_LIT333 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT333)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT334,2,1) {_OMC_LIT293,_OMC_LIT333}};
#define _OMC_LIT334 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT334)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT335,2,4) {&Flags_ValidOptions_STRING__DESC__OPTION__desc,_OMC_LIT334}};
#define _OMC_LIT335 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT335)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT336,1,1) {_OMC_LIT335}};
#define _OMC_LIT336 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT336)
#define _OMC_LIT337_data "Flags to allow non-standard Modelica."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT337,37,_OMC_LIT337_data);
#define _OMC_LIT337 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT337)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT338,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT337}};
#define _OMC_LIT338 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT338)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT339,8,3) {&Flags_ConfigFlag_CONFIG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(143)),_OMC_LIT288,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT145,_OMC_LIT289,_OMC_LIT336,_OMC_LIT338}};
#define _OMC_LIT339 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT339)
#define _OMC_LIT340_data "Invalid stream connector %s: A stream connector must have exactly one flow variable, this connector has %s flow variables."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT340,122,_OMC_LIT340_data);
#define _OMC_LIT340 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT340)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT341,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT340}};
#define _OMC_LIT341 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT341)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT342,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(216)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT341}};
#define _OMC_LIT342 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT342)
#define _OMC_LIT343_data "Invalid connector type on component "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT343,36,_OMC_LIT343_data);
#define _OMC_LIT343 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT343)
#define _OMC_LIT344_data "NFTyping.typeClassType got noninstantiated class "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT344,49,_OMC_LIT344_data);
#define _OMC_LIT344 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT344)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT345_6,1.758197185e9);
#define _OMC_LIT345_6 MMC_REFREALLIT(_OMC_LIT_STRUCT345_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT345,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT111,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(306)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(307)),MMC_IMMEDIATE(MMC_TAGFIXNUM(48)),_OMC_LIT345_6}};
#define _OMC_LIT345 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT345)
#define _OMC_LIT346_data "NFTyping.typeComponents got uninstantiated class "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT346,49,_OMC_LIT346_data);
#define _OMC_LIT346 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT346)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT347_6,1.758197185e9);
#define _OMC_LIT347_6 MMC_REFREALLIT(_OMC_LIT_STRUCT347_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT347,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT111,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(208)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(208)),MMC_IMMEDIATE(MMC_TAGFIXNUM(116)),_OMC_LIT347_6}};
#define _OMC_LIT347 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT347)
#define _OMC_LIT348_data "NFTyping.typeComponents"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT348,23,_OMC_LIT348_data);
#define _OMC_LIT348 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT348)
#define _OMC_LIT349_data "NFTyping.typeBindings"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT349,21,_OMC_LIT349_data);
#define _OMC_LIT349 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT349)
#define _OMC_LIT350_data "NFTyping.typeClassSections"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT350,26,_OMC_LIT350_data);
#define _OMC_LIT350 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT350)
#include "util/modelica.h"

#include "NFTyping_includes.h"



DLLDirection
modelica_metatype omc_NFTyping_deduceIterationRange2(threadData_t *threadData, modelica_metatype _range1, modelica_metatype _range2, modelica_metatype _info)
{
  modelica_metatype _range = NULL;
  modelica_metatype _cref1 = NULL;
  modelica_metatype _cref2 = NULL;
  modelica_integer _index1;
  modelica_integer _index2;
  modelica_metatype _node1 = NULL;
  modelica_metatype _node2 = NULL;
  modelica_metatype _dim1 = NULL;
  modelica_metatype _dim2 = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_integer tmp4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_integer tmp8;
  modelica_metatype tmpMeta9;
  modelica_string tmp10;
  modelica_string tmp11;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _range = _range2;
  // _cref1 has no default value.
  // _cref2 has no default value.
  // _index1 has no default value.
  // _index2 has no default value.
  // _node1 has no default value.
  // _node2 has no default value.
  // _dim1 has no default value.
  // _dim2 has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _range1;
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmp4 = mmc_unbox_integer(tmpMeta3);
  _cref1 = tmpMeta2;
  _index1 = tmp4  /* pattern as ty=Integer */;

  /* Pattern-matching assignment */
  tmpMeta5 = _range2;
  tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 1));
  tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 2));
  tmp8 = mmc_unbox_integer(tmpMeta7);
  _cref2 = tmpMeta6;
  _index2 = tmp8  /* pattern as ty=Integer */;

  _node1 = omc_NFComponentRef_node(threadData, _cref1);

  _node2 = omc_NFComponentRef_node(threadData, _cref2);

  if(((_index1 == _index2) && omc_NFInstNode_InstNode_refEqual(threadData, _node1, _node2)))
  {
    goto _return;
  }

  _dim1 = omc_NFType_nthDimension(threadData, omc_NFInstNode_InstNode_getType(threadData, _node1), _index1);

  _dim2 = omc_NFType_nthDimension(threadData, omc_NFInstNode_InstNode_getType(threadData, _node2), _index2);

  if((!omc_NFDimension_isEqualKnownSize(threadData, _dim1, _node1, _index1, _dim2, _node2, _index2)))
  {
    tmp10 = modelica_integer_to_modelica_string(_index1, ((modelica_integer) 0), 1 /* true */);
    tmp11 = modelica_integer_to_modelica_string(_index2, ((modelica_integer) 0), 1 /* true */);
    tmpMeta9 = mmc_mk_cons(tmp10, mmc_mk_cons(omc_NFComponentRef_toString(threadData, _cref1), mmc_mk_cons(tmp11, mmc_mk_cons(omc_NFComponentRef_toString(threadData, _cref2), MMC_REFSTRUCTLIT(mmc_nil)))));
    omc_Error_addSourceMessage(threadData, _OMC_LIT4, tmpMeta9, _info);

    MMC_THROW_INTERNAL();
  }
  _return: OMC_LABEL_UNUSED
  return _range;
}

DLLDirection
modelica_metatype omc_NFTyping_collectIteratorCrefs2(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _iterator, modelica_metatype __omcQ_24in_5Fcrefs)
{
  modelica_metatype _crefs = NULL;
  modelica_metatype _cref = NULL;
  modelica_integer _index;
  modelica_metatype _subs = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _crefs = __omcQ_24in_5Fcrefs;
  // _cref has no default value.
  // _index has no default value.
  // _subs has no default value.
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _exp;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
          _cref = tmpMeta5;
          /* Pattern matching succeeded */
          while(1)
          {
            if(!omc_NFComponentRef_isCref(threadData, _cref)) break;
            _cref = omc_NFComponentRef_stripSubscripts(threadData, _cref ,&_subs);

            _index = ((modelica_integer) 1);

            {
              modelica_metatype _sub;
              for (tmpMeta6 = _subs; !listEmpty(tmpMeta6); tmpMeta6=MMC_CDR(tmpMeta6))
              {
                _sub = MMC_CAR(tmpMeta6);
                if(omc_NFSubscript_equalsIterator(threadData, _sub, _iterator))
                {
                  tmpMeta8 = mmc_mk_box2(0, _cref, mmc_mk_integer(_index));
                  tmpMeta7 = mmc_mk_cons(tmpMeta8, _crefs);
                  _crefs = tmpMeta7;
                }

                _index = ((modelica_integer) 1) + _index;
              }
            }

            _cref = omc_NFComponentRef_rest(threadData, _cref);
          }
          goto tmp2_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _crefs;
}

static modelica_metatype closure0_NFTyping_collectIteratorCrefs2(threadData_t *thData, modelica_metatype closure, modelica_metatype exp, modelica_metatype $in_crefs)
{
  modelica_metatype iterator = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFTyping_collectIteratorCrefs2(thData, exp, iterator, $in_crefs);
}
DLLDirection
modelica_metatype omc_NFTyping_collectIteratorCrefs(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _iterator, modelica_metatype __omcQ_24in_5Fcrefs)
{
  modelica_metatype _crefs = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _crefs = __omcQ_24in_5Fcrefs;
  tmpMeta1 = mmc_mk_box1(0, _iterator);
  _crefs = omc_NFExpression_fold(threadData, _exp, (modelica_fnptr) mmc_mk_box2(0,closure0_NFTyping_collectIteratorCrefs2,tmpMeta1), _crefs);
  _return: OMC_LABEL_UNUSED
  return _crefs;
}

static modelica_metatype closure1_NFTyping_deduceIterationRange2(threadData_t *thData, modelica_metatype closure, modelica_metatype range1, modelica_metatype range2)
{
  modelica_metatype info = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFTyping_deduceIterationRange2(thData, range1, range2, info);
}
DLLDirection
modelica_metatype omc_NFTyping_deduceIterationRange(threadData_t *threadData, modelica_metatype _crefs, modelica_metatype _iterator, modelica_metatype _info)
{
  modelica_metatype _iterationRange = NULL;
  modelica_metatype _range_cr = NULL;
  modelica_metatype _cr = NULL;
  modelica_integer _dim_index;
  modelica_metatype _dim = NULL;
  modelica_metatype _start_exp = NULL;
  modelica_metatype _stop_exp = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_integer tmp6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _iterationRange has no default value.
  // _range_cr has no default value.
  // _cr has no default value.
  // _dim_index has no default value.
  // _dim has no default value.
  // _start_exp has no default value.
  // _stop_exp has no default value.
  if(listEmpty(_crefs))
  {
    tmpMeta1 = mmc_mk_cons(omc_NFInstNode_InstNode_name(threadData, _iterator), MMC_REFSTRUCTLIT(mmc_nil));
    omc_Error_addSourceMessage(threadData, _OMC_LIT7, tmpMeta1, _info);

    MMC_THROW_INTERNAL();
  }

  tmpMeta2 = mmc_mk_box1(0, _info);
  _range_cr = omc_List_reduce(threadData, _crefs, (modelica_fnptr) mmc_mk_box2(0,closure1_NFTyping_deduceIterationRange2,tmpMeta2));

  /* Pattern-matching assignment */
  tmpMeta3 = _range_cr;
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 1));
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 2));
  tmp6 = mmc_unbox_integer(tmpMeta5);
  _cr = tmpMeta4;
  _dim_index = tmp6  /* pattern as ty=Integer */;

  _dim = omc_NFType_nthDimension(threadData, omc_NFInstNode_InstNode_getType(threadData, omc_NFComponentRef_node(threadData, _cr)), _dim_index);

  _start_exp = omc_NFDimension_lowerBoundExp(threadData, _dim);

  tmpMeta7 = mmc_mk_box3(9, &NFExpression_CREF__desc, _OMC_LIT8, _cr);
  _stop_exp = omc_NFDimension_endExp(threadData, _dim, tmpMeta7, _dim_index);

  tmpMeta8 = mmc_mk_box5(13, &NFExpression_RANGE__desc, _OMC_LIT8, _start_exp, mmc_mk_none(), _stop_exp);
  _iterationRange = tmpMeta8;
  _return: OMC_LABEL_UNUSED
  return _iterationRange;
}

static modelica_metatype closure2_NFTyping_collectIteratorCrefs2(threadData_t *thData, modelica_metatype closure, modelica_metatype exp, modelica_metatype $in_crefs)
{
  modelica_metatype iterator = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFTyping_collectIteratorCrefs2(thData, exp, iterator, $in_crefs);
}
DLLDirection
modelica_metatype omc_NFTyping_deduceIterationRangeExp(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _iterator, modelica_metatype _info)
{
  modelica_metatype _iterationRange = NULL;
  modelica_metatype _crefs = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _iterationRange has no default value.
  // _crefs has no default value.
  tmpMeta1 = mmc_mk_box1(0, _iterator);
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _crefs = omc_NFExpression_fold(threadData, _exp, (modelica_fnptr) mmc_mk_box2(0,closure2_NFTyping_collectIteratorCrefs2,tmpMeta1), tmpMeta2);

  _iterationRange = omc_NFTyping_deduceIterationRange(threadData, _crefs, _iterator, _info);
  _return: OMC_LABEL_UNUSED
  return _iterationRange;
}

static modelica_metatype closure3_NFTyping_collectIteratorCrefs(threadData_t *thData, modelica_metatype closure, modelica_metatype exp, modelica_metatype $in_crefs)
{
  modelica_metatype iterator = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFTyping_collectIteratorCrefs(thData, exp, iterator, $in_crefs);
}
DLLDirection
modelica_metatype omc_NFTyping_deduceIterationRangeStmt(threadData_t *threadData, modelica_metatype _stmt, modelica_metatype _iterator, modelica_metatype _info)
{
  modelica_metatype _iterationRange = NULL;
  modelica_metatype _crefs = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _iterationRange has no default value.
  // _crefs has no default value.
  tmpMeta1 = mmc_mk_box1(0, _iterator);
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _crefs = omc_NFStatement_foldExp(threadData, _stmt, (modelica_fnptr) mmc_mk_box2(0,closure3_NFTyping_collectIteratorCrefs,tmpMeta1), tmpMeta2);

  _iterationRange = omc_NFTyping_deduceIterationRange(threadData, _crefs, _iterator, _info);
  _return: OMC_LABEL_UNUSED
  return _iterationRange;
}

static modelica_metatype closure4_NFTyping_collectIteratorCrefs(threadData_t *thData, modelica_metatype closure, modelica_metatype exp, modelica_metatype $in_crefs)
{
  modelica_metatype iterator = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFTyping_collectIteratorCrefs(thData, exp, iterator, $in_crefs);
}
DLLDirection
modelica_metatype omc_NFTyping_deduceIterationRangeEq(threadData_t *threadData, modelica_metatype _eq, modelica_metatype _iterator, modelica_metatype _info)
{
  modelica_metatype _iterationRange = NULL;
  modelica_metatype _crefs = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _iterationRange has no default value.
  // _crefs has no default value.
  tmpMeta1 = mmc_mk_box1(0, _iterator);
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _crefs = omc_NFEquation_foldExp(threadData, _eq, (modelica_fnptr) mmc_mk_box2(0,closure4_NFTyping_collectIteratorCrefs,tmpMeta1), tmpMeta2);

  _iterationRange = omc_NFTyping_deduceIterationRange(threadData, _crefs, _iterator, _info);
  _return: OMC_LABEL_UNUSED
  return _iterationRange;
}

DLLDirection
modelica_metatype omc_NFTyping_typeReinit(threadData_t *threadData, modelica_metatype __omcQ_24in_5FcrefExp, modelica_metatype __omcQ_24in_5Fexp, modelica_integer _context, modelica_metatype _source, modelica_metatype *out_exp)
{
  modelica_metatype _crefExp = NULL;
  modelica_metatype _exp = NULL;
  modelica_integer _var;
  modelica_integer _mk;
  modelica_metatype _ty1 = NULL;
  modelica_metatype _ty2 = NULL;
  modelica_metatype _cref = NULL;
  modelica_metatype _info = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _crefExp = __omcQ_24in_5FcrefExp;
  _exp = __omcQ_24in_5Fexp;
  // _var has no default value.
  // _mk has no default value.
  // _ty1 has no default value.
  // _ty2 has no default value.
  // _cref has no default value.
  // _info has no default value.
  _info = omc_ElementSource_getInfo(threadData, _source);

  _crefExp = omc_NFTyping_typeExp(threadData, _crefExp, _context, _info, 0 /* false */ ,&_ty1 ,NULL, NULL);

  _exp = omc_NFTyping_typeExp(threadData, _exp, _context, _info, 0 /* false */ ,&_ty2 ,NULL, NULL);

  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _crefExp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          if(omc_NFComponentRef_isIterator(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_crefExp), 3)))))
          {
            tmpMeta6 = mmc_mk_cons(omc_NFComponentRef_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_crefExp), 3)))), MMC_REFSTRUCTLIT(mmc_nil));
            omc_Error_addSourceMessage(threadData, _OMC_LIT11, tmpMeta6, _info);

            goto goto_2;
          }
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_crefExp), 3)));
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          
          /* Pattern matching succeeded */
          tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
          omc_Error_addSourceMessage(threadData, _OMC_LIT14, tmpMeta7, _info);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _cref = tmpMeta1;

  if((omc_NFComponentRef_nodeVariability(threadData, _cref) < 6))
  {
    tmpMeta8 = mmc_mk_cons(omc_NFExpression_toString(threadData, _crefExp), mmc_mk_cons(omc_NFPrefixes_variabilityString(threadData, omc_NFComponentRef_nodeVariability(threadData, _cref)), MMC_REFSTRUCTLIT(mmc_nil)));
    omc_Error_addSourceMessage(threadData, _OMC_LIT17, tmpMeta8, _info);

    MMC_THROW_INTERNAL();
  }

  omc_NFTypeCheck_matchTypes(threadData, omc_NFType_arrayElementType(threadData, _ty1), _OMC_LIT18, _crefExp, ((modelica_integer) 0) ,NULL ,&_mk);

  if(omc_NFTypeCheck_isIncompatibleMatch(threadData, (modelica_integer)_mk))
  {
    tmpMeta9 = mmc_mk_cons(omc_NFExpression_toString(threadData, _crefExp), mmc_mk_cons(omc_NFType_toString(threadData, omc_NFType_arrayElementType(threadData, _ty1)), MMC_REFSTRUCTLIT(mmc_nil)));
    omc_Error_addSourceMessage(threadData, _OMC_LIT21, tmpMeta9, _info);

    MMC_THROW_INTERNAL();
  }

  _exp = omc_NFTypeCheck_matchTypes(threadData, _ty2, _ty1, _exp, ((modelica_integer) 0) ,NULL ,&_mk);

  if(omc_NFTypeCheck_isIncompatibleMatch(threadData, (modelica_integer)_mk))
  {
    tmpMeta10 = mmc_mk_cons(_OMC_LIT25, mmc_mk_cons(_OMC_LIT26, mmc_mk_cons(_OMC_LIT27, mmc_mk_cons(omc_NFExpression_toString(threadData, _exp), mmc_mk_cons(omc_NFType_toString(threadData, _ty2), mmc_mk_cons(omc_NFType_toString(threadData, _ty1), MMC_REFSTRUCTLIT(mmc_nil)))))));
    omc_Error_addSourceMessage(threadData, _OMC_LIT24, tmpMeta10, _info);

    MMC_THROW_INTERNAL();
  }
  _return: OMC_LABEL_UNUSED
  if (out_exp) { *out_exp = _exp; }
  return _crefExp;
}
modelica_metatype boxptr_NFTyping_typeReinit(threadData_t *threadData, modelica_metatype __omcQ_24in_5FcrefExp, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _context, modelica_metatype _source, modelica_metatype *out_exp)
{
  modelica_integer tmp1;
  modelica_metatype _crefExp = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _crefExp = omc_NFTyping_typeReinit(threadData, __omcQ_24in_5FcrefExp, __omcQ_24in_5Fexp, tmp1, _source, out_exp);
  /* skip box _crefExp; NFExpression */
  /* skip box _exp; NFExpression */
  return _crefExp;
}

DLLDirection
modelica_metatype omc_NFTyping_typeOperatorArg(threadData_t *threadData, modelica_metatype __omcQ_24in_5Farg, modelica_metatype _expectedType, modelica_integer _context, modelica_string _operatorName, modelica_string _argName, modelica_integer _argIndex, modelica_metatype _info, modelica_integer *out_var)
{
  modelica_metatype _arg = NULL;
  modelica_integer _var;
  modelica_metatype _ty = NULL;
  modelica_integer _mk;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _arg = __omcQ_24in_5Farg;
  // _var has no default value.
  // _ty has no default value.
  // _mk has no default value.
  _arg = omc_NFTyping_typeExp(threadData, _arg, _context, _info, 0 /* false */ ,&_ty ,&_var, NULL);

  _arg = omc_NFTypeCheck_matchTypes(threadData, _ty, _expectedType, _arg, ((modelica_integer) 0) ,NULL ,&_mk);

  if(omc_NFTypeCheck_isIncompatibleMatch(threadData, (modelica_integer)_mk))
  {
    tmpMeta1 = mmc_mk_cons(intString(_argIndex), mmc_mk_cons(_operatorName, mmc_mk_cons(_argName, mmc_mk_cons(omc_NFExpression_toString(threadData, _arg), mmc_mk_cons(omc_NFType_toString(threadData, _ty), mmc_mk_cons(omc_NFType_toString(threadData, _expectedType), MMC_REFSTRUCTLIT(mmc_nil)))))));
    omc_Error_addSourceMessage(threadData, _OMC_LIT24, tmpMeta1, _info);

    MMC_THROW_INTERNAL();
  }
  _return: OMC_LABEL_UNUSED
  if (out_var) { *out_var = _var; }
  return _arg;
}
modelica_metatype boxptr_NFTyping_typeOperatorArg(threadData_t *threadData, modelica_metatype __omcQ_24in_5Farg, modelica_metatype _expectedType, modelica_metatype _context, modelica_metatype _operatorName, modelica_metatype _argName, modelica_metatype _argIndex, modelica_metatype _info, modelica_metatype *out_var)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer _var;
  modelica_metatype _arg = NULL;
  tmp1 = mmc_unbox_integer(_context);
  tmp2 = mmc_unbox_integer(_argIndex);
  _arg = omc_NFTyping_typeOperatorArg(threadData, __omcQ_24in_5Farg, _expectedType, tmp1, _operatorName, _argName, tmp2, _info, &_var);
  /* skip box _arg; NFExpression */
  if (out_var) { *out_var = mmc_mk_icon(_var); }
  return _arg;
}

static modelica_metatype closure6_NFExpression_isCallNamed(threadData_t *thData, modelica_metatype closure, modelica_metatype exp)
{
  modelica_string name = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_isCallNamed(thData, exp, name);
}static modelica_metatype closure5_NFExpression_contains(threadData_t *thData, modelica_metatype closure, modelica_metatype exp)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_contains(thData, exp, func);
}
DLLDirection
modelica_boolean omc_NFTyping_checkWhenInitial(threadData_t *threadData, modelica_metatype _condition)
{
  modelica_boolean _invalid;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _invalid has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _condition;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_integer tmp8;
          modelica_integer tmp9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _e;
            for (tmpMeta6 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_condition), 3))), tmp9 = arrayLength(tmpMeta6), tmp8 = 1; tmp8 <= tmp9; tmp8++)
            {
              _e = arrayGet(tmpMeta6,tmp8);
              if(omc_NFTyping_checkWhenInitial(threadData, _e))
              {
                _invalid = 1 /* true */;

                goto _return;
              }
            }
          }
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          
          /* Pattern matching succeeded */
          tmpMeta11 = mmc_mk_box1(0, _OMC_LIT28);
          tmpMeta10 = mmc_mk_box1(0, (modelica_fnptr) mmc_mk_box2(0,closure6_NFExpression_isCallNamed,tmpMeta11));
          tmp1 = (!omc_NFExpression_containsShallow(threadData, _condition, (modelica_fnptr) mmc_mk_box2(0,closure5_NFExpression_contains,tmpMeta10)));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _invalid = tmp1;
  _return: OMC_LABEL_UNUSED
  return _invalid;
}
modelica_metatype boxptr_NFTyping_checkWhenInitial(threadData_t *threadData, modelica_metatype _condition)
{
  modelica_boolean _invalid;
  modelica_metatype out_invalid;
  _invalid = omc_NFTyping_checkWhenInitial(threadData, _condition);
  out_invalid = mmc_mk_icon(_invalid);
  return out_invalid;
}

DLLDirection
modelica_metatype omc_NFTyping_typeWhenCondition(threadData_t *threadData, modelica_metatype _condition, modelica_integer _context, modelica_metatype _source, modelica_boolean _allowClock, modelica_metatype *out_ty, modelica_integer *out_variability)
{
  modelica_metatype _outCondition = NULL;
  modelica_metatype _ty = NULL;
  modelica_integer _variability;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outCondition has no default value.
  // _ty has no default value.
  // _variability has no default value.
  _outCondition = omc_NFTyping_typeCondition(threadData, _condition, _context, _source, _OMC_LIT31, 1 /* true */, _allowClock ,&_ty ,&_variability);

  if((((modelica_integer)_variability > 6) && (!omc_NFType_isClock(threadData, _ty))))
  {
    tmpMeta1 = mmc_mk_cons(omc_NFExpression_toString(threadData, _condition), MMC_REFSTRUCTLIT(mmc_nil));
    omc_Error_addSourceMessage(threadData, _OMC_LIT34, tmpMeta1, omc_ElementSource_getInfo(threadData, _source));

    MMC_THROW_INTERNAL();
  }

  if((!omc_NFTyping_checkWhenInitial(threadData, _outCondition)))
  {
    tmpMeta2 = mmc_mk_cons(omc_NFExpression_toString(threadData, _condition), MMC_REFSTRUCTLIT(mmc_nil));
    omc_Error_addSourceMessage(threadData, _OMC_LIT38, tmpMeta2, omc_ElementSource_getInfo(threadData, _source));
  }
  _return: OMC_LABEL_UNUSED
  if (out_ty) { *out_ty = _ty; }
  if (out_variability) { *out_variability = _variability; }
  return _outCondition;
}
modelica_metatype boxptr_NFTyping_typeWhenCondition(threadData_t *threadData, modelica_metatype _condition, modelica_metatype _context, modelica_metatype _source, modelica_metatype _allowClock, modelica_metatype *out_ty, modelica_metatype *out_variability)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer _variability;
  modelica_metatype _outCondition = NULL;
  tmp1 = mmc_unbox_integer(_context);
  tmp2 = mmc_unbox_integer(_allowClock);
  _outCondition = omc_NFTyping_typeWhenCondition(threadData, _condition, tmp1, _source, tmp2, out_ty, &_variability);
  /* skip box _outCondition; NFExpression */
  /* skip box _ty; NFType */
  if (out_variability) { *out_variability = mmc_mk_icon(_variability); }
  return _outCondition;
}

DLLDirection
modelica_metatype omc_NFTyping_typeWhenEquation(threadData_t *threadData, modelica_metatype _branches, modelica_integer _context, modelica_metatype _scope, modelica_metatype _source)
{
  modelica_metatype _whenEq = NULL;
  modelica_integer _next_context;
  modelica_metatype _accum_branches = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _cond = NULL;
  modelica_metatype _body = NULL;
  modelica_metatype _ty = NULL;
  modelica_integer _var;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _whenEq has no default value.
  _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 2048));
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _accum_branches = tmpMeta1;
  // _cond has no default value.
  // _body has no default value.
  // _ty has no default value.
  // _var has no default value.
  {
    modelica_metatype _branch;
    for (tmpMeta2 = _branches; !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
    {
      _branch = MMC_CAR(tmpMeta2);
      /* Pattern-matching assignment */
      tmpMeta3 = _branch;
      if (mmc__uniontype__metarecord__typedef__equal(tmpMeta3,0,3) == 0) MMC_THROW_INTERNAL();
      tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 2));
      tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 4));
      _cond = tmpMeta4;
      _body = tmpMeta5;

      _cond = omc_NFTyping_typeWhenCondition(threadData, _cond, _context, _source, 1 /* true */ ,&_ty ,&_var);

      if(omc_NFType_isClock(threadData, _ty))
      {
        if((listLength(_branches) != ((modelica_integer) 1)))
        {
          if(referenceEq(_branch, listHead(_branches)))
          {
            tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
            omc_Error_addSourceMessage(threadData, _OMC_LIT44, tmpMeta6, omc_ElementSource_getInfo(threadData, _source));
          }
          else
          {
            tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
            omc_Error_addSourceMessage(threadData, _OMC_LIT41, tmpMeta7, omc_ElementSource_getInfo(threadData, _source));
          }

          MMC_THROW_INTERNAL();
        }
        else
        {
          _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 4096));
        }
      }

      {
        modelica_metatype __omcQ_24tmpVar1;
        modelica_metatype* tmp9;
        modelica_metatype tmpMeta10;
        modelica_metatype __omcQ_24tmpVar0;
        modelica_integer tmp11;
        modelica_metatype _eq_loopVar = 0;
        modelica_metatype _eq;
        _eq_loopVar = _body;
        tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
        __omcQ_24tmpVar1 = tmpMeta10; /* defaultValue */
        tmp9 = &__omcQ_24tmpVar1;
        while(1) {
          tmp11 = 1;
          if (!listEmpty(_eq_loopVar)) {
            _eq = MMC_CAR(_eq_loopVar);
            _eq_loopVar = MMC_CDR(_eq_loopVar);
            tmp11--;
          }
          if (tmp11 == 0) {
            __omcQ_24tmpVar0 = omc_NFTyping_typeEquation(threadData, _eq, _next_context);
            *tmp9 = mmc_mk_cons(__omcQ_24tmpVar0,0);
            tmp9 = &MMC_CDR(*tmp9);
          } else if (tmp11 == 1) {
            break;
          } else {
            MMC_THROW_INTERNAL();
          }
        }
        *tmp9 = mmc_mk_nil();
        tmpMeta8 = __omcQ_24tmpVar1;
      }
      _body = tmpMeta8;

      tmpMeta12 = mmc_mk_cons(omc_NFEquation_makeBranch(threadData, _cond, _body, (modelica_integer)_var), _accum_branches);
      _accum_branches = tmpMeta12;
    }
  }

  tmpMeta14 = mmc_mk_box4(8, &NFEquation_WHEN__desc, listReverseInPlace(_accum_branches), _scope, _source);
  _whenEq = tmpMeta14;
  _return: OMC_LABEL_UNUSED
  return _whenEq;
}
modelica_metatype boxptr_NFTyping_typeWhenEquation(threadData_t *threadData, modelica_metatype _branches, modelica_metatype _context, modelica_metatype _scope, modelica_metatype _source)
{
  modelica_integer tmp1;
  modelica_metatype _whenEq = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _whenEq = omc_NFTyping_typeWhenEquation(threadData, _branches, tmp1, _scope, _source);
  /* skip box _whenEq; NFEquation */
  return _whenEq;
}

DLLDirection
modelica_metatype omc_NFTyping_typeIfEquation(threadData_t *threadData, modelica_metatype _branches, modelica_integer _context, modelica_metatype _scope, modelica_metatype _source)
{
  modelica_metatype _ifEq = NULL;
  modelica_metatype _cond = NULL;
  modelica_metatype _eql = NULL;
  modelica_integer _accum_var;
  modelica_integer _var;
  modelica_metatype _bl = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _bl2 = NULL;
  modelica_metatype tmpMeta2;
  modelica_integer _next_context;
  modelica_integer _cond_context;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_integer tmp14;
  modelica_metatype tmpMeta15;
  modelica_metatype tmpMeta27;
  modelica_metatype tmpMeta28;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _ifEq has no default value.
  // _cond has no default value.
  // _eql has no default value.
  _accum_var = 1;
  // _var has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _bl = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _bl2 = tmpMeta2;
  _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 16384));
  _cond_context = omc_NFInstContext_set(threadData, _next_context, ((modelica_integer) 1048576));
  {
    modelica_metatype _b;
    for (tmpMeta3 = _branches; !listEmpty(tmpMeta3); tmpMeta3=MMC_CDR(tmpMeta3))
    {
      _b = MMC_CAR(tmpMeta3);
      /* Pattern-matching assignment */
      tmpMeta4 = _b;
      if (mmc__uniontype__metarecord__typedef__equal(tmpMeta4,0,3) == 0) MMC_THROW_INTERNAL();
      tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta4), 2));
      tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta4), 4));
      _cond = tmpMeta5;
      _eql = tmpMeta6;

      _cond = omc_NFTyping_typeCondition(threadData, _cond, _cond_context, _source, _OMC_LIT47, 0 /* false */, 0 /* false */ ,NULL ,&_var);

      if((((modelica_integer)_var > 3) || omc_NFStructural_isExpressionNotFixed(threadData, _cond, 0 /* false */, ((modelica_integer) 100))))
      {
        _next_context = omc_NFInstContext_set(threadData, _next_context, ((modelica_integer) 65536));
      }
      else
      {
        if((((modelica_integer)_var == 3) && (((modelica_integer)_accum_var <= 3) || omc_NFEquation_containsList(threadData, _eql, boxvar_NFEquation_isConnection))))
        {
          _var = 2;
        }
      }

      _accum_var = omc_NFPrefixes_variabilityMax(threadData, (modelica_integer)_accum_var, (modelica_integer)_var);

      tmpMeta8 = mmc_mk_box4(3, &NFEquation_Branch_BRANCH__desc, _cond, mmc_mk_integer((modelica_integer)_var), _eql);
      tmpMeta7 = mmc_mk_cons(tmpMeta8, _bl);
      _bl = tmpMeta7;
    }
  }

  {
    modelica_metatype _b;
    for (tmpMeta10 = _bl; !listEmpty(tmpMeta10); tmpMeta10=MMC_CDR(tmpMeta10))
    {
      _b = MMC_CAR(tmpMeta10);
      /* Pattern-matching assignment */
      tmpMeta11 = _b;
      if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,0,3) == 0) MMC_THROW_INTERNAL();
      tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
      tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 3));
      tmp14 = mmc_unbox_integer(tmpMeta13);
      tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 4));
      _cond = tmpMeta12;
      _var = tmp14  /* pattern as ty=enumeration(CONSTANT, STRUCTURAL_PARAMETER, PARAMETER, NON_STRUCTURAL_PARAMETER, DISCRETE, IMPLICITLY_DISCRETE, CONTINUOUS) */;
      _eql = tmpMeta15;

      omc_ErrorExt_setCheckpoint(threadData, _OMC_LIT48);

      { /* matchcontinue expression */
        {
          volatile mmc_switch_type tmp18;
          int tmp19;
          tmp18 = 0;
          MMC_TRY_INTERNAL(mmc_jumper)
          tmp17_top:
          threadData->mmc_jumper = &new_mmc_jumper;
          for (; tmp18 < 2; tmp18++) {
            switch (MMC_SWITCH_CAST(tmp18)) {
            case 0: {
              modelica_metatype tmpMeta20;
              modelica_metatype tmpMeta24;
              /* Pattern matching succeeded */
              {
                modelica_metatype __omcQ_24tmpVar3;
                modelica_metatype* tmp21;
                modelica_metatype tmpMeta22;
                modelica_metatype __omcQ_24tmpVar2;
                modelica_integer tmp23;
                modelica_metatype _e_loopVar = 0;
                modelica_metatype _e;
                _e_loopVar = _eql;
                tmpMeta22 = MMC_REFSTRUCTLIT(mmc_nil);
                __omcQ_24tmpVar3 = tmpMeta22; /* defaultValue */
                tmp21 = &__omcQ_24tmpVar3;
                while(1) {
                  tmp23 = 1;
                  if (!listEmpty(_e_loopVar)) {
                    _e = MMC_CAR(_e_loopVar);
                    _e_loopVar = MMC_CDR(_e_loopVar);
                    tmp23--;
                  }
                  if (tmp23 == 0) {
                    __omcQ_24tmpVar2 = omc_NFTyping_typeEquation(threadData, _e, _next_context);
                    *tmp21 = mmc_mk_cons(__omcQ_24tmpVar2,0);
                    tmp21 = &MMC_CDR(*tmp21);
                  } else if (tmp23 == 1) {
                    break;
                  } else {
                    goto goto_16;
                  }
                }
                *tmp21 = mmc_mk_nil();
                tmpMeta20 = __omcQ_24tmpVar3;
              }
              _eql = tmpMeta20;

              tmpMeta24 = mmc_mk_cons(omc_NFEquation_makeBranch(threadData, _cond, _eql, (modelica_integer)_var), _bl2);
              _bl2 = tmpMeta24;
              goto tmp17_done;
            }
            case 1: {
              modelica_metatype tmpMeta25;
              modelica_metatype tmpMeta26;
              /* Pattern matching succeeded */
              tmpMeta26 = mmc_mk_box3(4, &NFEquation_Branch_INVALID__BRANCH__desc, omc_NFEquation_makeBranch(threadData, _cond, _eql, (modelica_integer)_var), omc_ErrorExt_getCheckpointMessages(threadData));
              tmpMeta25 = mmc_mk_cons(tmpMeta26, _bl2);
              _bl2 = tmpMeta25;
              goto tmp17_done;
            }
            }
            goto tmp17_end;
            tmp17_end: ;
          }
          goto goto_16;
          tmp17_done:
          (void)tmp18;
          MMC_RESTORE_INTERNAL(mmc_jumper);
          goto tmp17_done2;
          goto_16:;
          MMC_CATCH_INTERNAL(mmc_jumper);
          if (++tmp18 < 2) {
            goto tmp17_top;
          }
          MMC_THROW_INTERNAL();
          tmp17_done2:;
        }
      }
      ;

      omc_ErrorExt_delCheckpoint(threadData, _OMC_LIT48);
    }
  }

  tmpMeta28 = mmc_mk_box4(7, &NFEquation_IF__desc, _bl2, _scope, _source);
  _ifEq = tmpMeta28;
  _return: OMC_LABEL_UNUSED
  return _ifEq;
}
modelica_metatype boxptr_NFTyping_typeIfEquation(threadData_t *threadData, modelica_metatype _branches, modelica_metatype _context, modelica_metatype _scope, modelica_metatype _source)
{
  modelica_integer tmp1;
  modelica_metatype _ifEq = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _ifEq = omc_NFTyping_typeIfEquation(threadData, _branches, tmp1, _scope, _source);
  /* skip box _ifEq; NFEquation */
  return _ifEq;
}

DLLDirection
modelica_metatype omc_NFTyping_typeCondition(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcondition, modelica_integer _context, modelica_metatype _source, modelica_metatype _errorMsg, modelica_boolean _allowVector, modelica_boolean _allowClock, modelica_metatype *out_ty, modelica_integer *out_variability)
{
  modelica_metatype _condition = NULL;
  modelica_metatype _ty = NULL;
  modelica_integer _variability;
  modelica_metatype _info = NULL;
  modelica_metatype _ety = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _condition = __omcQ_24in_5Fcondition;
  // _ty has no default value.
  // _variability has no default value.
  // _info has no default value.
  // _ety has no default value.
  _info = omc_ElementSource_getInfo(threadData, _source);

  _condition = omc_NFTyping_typeExp(threadData, _condition, _context, _info, 0 /* false */ ,&_ty ,&_variability, NULL);

  if((_allowVector && omc_NFType_isArray(threadData, _ty)))
  {
    _ety = omc_NFType_unliftArray(threadData, _ty);
  }
  else
  {
    _ety = _ty;
  }

  if((!(omc_NFType_isBoolean(threadData, _ety) || (_allowClock && omc_NFType_isClock(threadData, _ety)))))
  {
    tmpMeta1 = mmc_mk_cons(omc_NFExpression_toString(threadData, _condition), mmc_mk_cons(omc_NFType_toString(threadData, _ty), MMC_REFSTRUCTLIT(mmc_nil)));
    omc_Error_addSourceMessage(threadData, _errorMsg, tmpMeta1, _info);

    MMC_THROW_INTERNAL();
  }
  _return: OMC_LABEL_UNUSED
  if (out_ty) { *out_ty = _ty; }
  if (out_variability) { *out_variability = _variability; }
  return _condition;
}
modelica_metatype boxptr_NFTyping_typeCondition(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcondition, modelica_metatype _context, modelica_metatype _source, modelica_metatype _errorMsg, modelica_metatype _allowVector, modelica_metatype _allowClock, modelica_metatype *out_ty, modelica_metatype *out_variability)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer tmp3;
  modelica_integer _variability;
  modelica_metatype _condition = NULL;
  tmp1 = mmc_unbox_integer(_context);
  tmp2 = mmc_unbox_integer(_allowVector);
  tmp3 = mmc_unbox_integer(_allowClock);
  _condition = omc_NFTyping_typeCondition(threadData, __omcQ_24in_5Fcondition, tmp1, _source, _errorMsg, tmp2, tmp3, out_ty, &_variability);
  /* skip box _condition; NFExpression */
  /* skip box _ty; NFType */
  if (out_variability) { *out_variability = mmc_mk_icon(_variability); }
  return _condition;
}

DLLDirection
modelica_metatype omc_NFTyping_typeEqualityEquation(threadData_t *threadData, modelica_metatype _lhsExp, modelica_metatype _rhsExp, modelica_integer _context, modelica_metatype _scope, modelica_metatype _source)
{
  modelica_metatype _eq = NULL;
  modelica_metatype _info = NULL;
  modelica_metatype _e1 = NULL;
  modelica_metatype _e2 = NULL;
  modelica_metatype _ty1 = NULL;
  modelica_metatype _ty2 = NULL;
  modelica_metatype _ty = NULL;
  modelica_integer _mk;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _eq has no default value.
  _info = omc_ElementSource_getInfo(threadData, _source);
  // _e1 has no default value.
  // _e2 has no default value.
  // _ty1 has no default value.
  // _ty2 has no default value.
  // _ty has no default value.
  // _mk has no default value.
  if((omc_NFInstContext_inWhen(threadData, _context) && (!omc_NFInstContext_inClocked(threadData, _context))))
  {
    if(omc_NFTyping_checkLhsInWhen(threadData, _lhsExp))
    {
      omc_NFStructural_markSubscriptsInExp(threadData, _lhsExp);
    }
    else
    {
      tmpMeta1 = mmc_mk_cons(omc_NFExpression_toString(threadData, _lhsExp), MMC_REFSTRUCTLIT(mmc_nil));
      omc_Error_addSourceMessage(threadData, _OMC_LIT51, tmpMeta1, _info);

      MMC_THROW_INTERNAL();
    }
  }

  _e1 = omc_NFTyping_typeExp(threadData, _lhsExp, omc_NFInstContext_set(threadData, _context, ((modelica_integer) 512)), _info, 0 /* false */ ,&_ty1, NULL, NULL);

  _e2 = omc_NFTyping_typeExp(threadData, _rhsExp, omc_NFInstContext_set(threadData, _context, ((modelica_integer) 1024)), _info, 0 /* false */ ,&_ty2, NULL, NULL);

  _e2 = omc_NFTypeCheck_matchExpressions(threadData, _e2, _ty2, _e1, _ty1, ((modelica_integer) 0) ,&_e1 ,&_ty ,&_mk);

  if(omc_NFTypeCheck_isIncompatibleMatch(threadData, (modelica_integer)_mk))
  {
    tmpMeta3 = stringAppend(omc_NFExpression_toString(threadData, _lhsExp),_OMC_LIT55);
    tmpMeta4 = stringAppend(tmpMeta3,omc_NFExpression_toString(threadData, _rhsExp));
    tmpMeta5 = stringAppend(omc_NFType_toString(threadData, _ty1),_OMC_LIT55);
    tmpMeta6 = stringAppend(tmpMeta5,omc_NFType_toString(threadData, _ty2));
    tmpMeta2 = mmc_mk_cons(tmpMeta4, mmc_mk_cons(tmpMeta6, MMC_REFSTRUCTLIT(mmc_nil)));
    omc_Error_addSourceMessage(threadData, _OMC_LIT54, tmpMeta2, _info);

    MMC_THROW_INTERNAL();
  }

  tmpMeta7 = mmc_mk_box6(3, &NFEquation_EQUALITY__desc, _e1, _e2, _ty, _scope, _source);
  _eq = tmpMeta7;

  if(omc_NFExpression_isExternalCall(threadData, _e2))
  {
    omc_NFCall_updateExternalRecordArgs(threadData, omc_NFExpression_tupleElements(threadData, _e1));
  }
  _return: OMC_LABEL_UNUSED
  return _eq;
}
modelica_metatype boxptr_NFTyping_typeEqualityEquation(threadData_t *threadData, modelica_metatype _lhsExp, modelica_metatype _rhsExp, modelica_metatype _context, modelica_metatype _scope, modelica_metatype _source)
{
  modelica_integer tmp1;
  modelica_metatype _eq = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _eq = omc_NFTyping_typeEqualityEquation(threadData, _lhsExp, _rhsExp, tmp1, _scope, _source);
  /* skip box _eq; NFEquation */
  return _eq;
}

DLLDirection
void omc_NFTyping_checkAssignment(threadData_t *threadData, modelica_metatype _lhsExp, modelica_metatype _rhsExp, modelica_integer _lhsVar, modelica_integer _context, modelica_metatype _info)
{
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  if(omc_NFInstContext_inInstanceAPI(threadData, _context))
  {
    goto _return;
  }

  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _lhsExp;
    {
      modelica_integer _i;
      volatile mmc_switch_type tmp3;
      int tmp4;
      // _i has no default value.
      tmp3 = 0;
      for (; tmp3 < 3; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,11,2) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          _i = ((modelica_integer) 1);

          {
            modelica_metatype _e;
            for (tmpMeta5 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_lhsExp), 3))); !listEmpty(tmpMeta5); tmpMeta5=MMC_CDR(tmpMeta5))
            {
              _e = MMC_CAR(tmpMeta5);
              omc_NFTyping_checkAssignment(threadData, _e, omc_NFExpression_tupleElement(threadData, _rhsExp, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_lhsExp), 2))), _i), omc_NFExpression_variability(threadData, _e), _context, _info);

              _i = ((modelica_integer) 1) + _i;
            }
          }
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_NFInstContext_inFunction(threadData, _context)) goto tmp2_end;
          if((omc_NFComponentRef_isCref(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_lhsExp), 3)))) && omc_NFInstNode_InstNode_isInput(threadData, omc_NFComponentRef_node(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_lhsExp), 3)))))))
          {
            tmpMeta7 = mmc_mk_cons(_OMC_LIT59, mmc_mk_cons(omc_NFComponentRef_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_lhsExp), 3)))), MMC_REFSTRUCTLIT(mmc_nil)));
            omc_Error_addSourceMessage(threadData, _OMC_LIT58, tmpMeta7, _info);

            goto goto_1;
          }
          goto tmp2_done;
        }
        case 2: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          
          /* Pattern matching succeeded */
          if(((modelica_integer)_lhsVar < 5))
          {
            if(((modelica_integer)_lhsVar == 1))
            {
              tmpMeta8 = mmc_mk_cons(omc_NFExpression_toString(threadData, _lhsExp), mmc_mk_cons(omc_NFExpression_toString(threadData, _rhsExp), MMC_REFSTRUCTLIT(mmc_nil)));
              omc_Error_addSourceMessage(threadData, _OMC_LIT65, tmpMeta8, _info);

              goto goto_1;
            }
            else
            {
              if((!omc_NFInstContext_inInitial(threadData, _context)))
              {
                tmpMeta9 = mmc_mk_cons(omc_NFExpression_toString(threadData, _lhsExp), mmc_mk_cons(omc_NFExpression_toString(threadData, _rhsExp), MMC_REFSTRUCTLIT(mmc_nil)));
                omc_Error_addSourceMessage(threadData, _OMC_LIT62, tmpMeta9, _info);

                goto goto_1;
              }
            }
          }
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return;
}
void boxptr_NFTyping_checkAssignment(threadData_t *threadData, modelica_metatype _lhsExp, modelica_metatype _rhsExp, modelica_metatype _lhsVar, modelica_metatype _context, modelica_metatype _info)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  tmp1 = mmc_unbox_integer(_lhsVar);
  tmp2 = mmc_unbox_integer(_context);
  omc_NFTyping_checkAssignment(threadData, _lhsExp, _rhsExp, tmp1, tmp2, _info);
  return;
}

DLLDirection
modelica_metatype omc_NFTyping_typeStatement(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fst, modelica_integer _context)
{
  modelica_metatype _st = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _st = __omcQ_24in_5Fst;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _st;
    {
      modelica_metatype _cond = NULL;
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _e3 = NULL;
      modelica_metatype _ty1 = NULL;
      modelica_metatype _ty2 = NULL;
      modelica_metatype _sts1 = NULL;
      modelica_metatype _body = NULL;
      modelica_metatype _tybrs = NULL;
      modelica_integer _mk;
      modelica_integer _next_context;
      modelica_integer _cond_context;
      modelica_metatype _info = NULL;
      modelica_integer _var;
      int tmp4;
      // _cond has no default value.
      // _e1 has no default value.
      // _e2 has no default value.
      // _e3 has no default value.
      // _ty1 has no default value.
      // _ty2 has no default value.
      // _sts1 has no default value.
      // _body has no default value.
      // _tybrs has no default value.
      // _mk has no default value.
      // _next_context has no default value.
      // _cond_context has no default value.
      // _info has no default value.
      // _var has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          _info = omc_ElementSource_getInfo(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 5))));

          _e1 = omc_NFTyping_typeExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 2))), omc_NFInstContext_set(threadData, _context, ((modelica_integer) 512)), _info, 0 /* false */ ,&_ty1 ,&_var, NULL);

          _e2 = omc_NFTyping_typeExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 3))), omc_NFInstContext_set(threadData, _context, ((modelica_integer) 1024)), _info, 0 /* false */ ,&_ty2, NULL, NULL);

          _e2 = omc_NFTypeCheck_matchTypes(threadData, _ty2, _ty1, _e2, ((modelica_integer) 1) ,NULL ,&_mk);

          if(omc_NFTypeCheck_isIncompatibleMatch(threadData, (modelica_integer)_mk))
          {
            tmpMeta5 = mmc_mk_cons(omc_NFExpression_toString(threadData, _e1), mmc_mk_cons(omc_NFExpression_toString(threadData, _e2), mmc_mk_cons(omc_NFType_toString(threadData, _ty1), mmc_mk_cons(omc_NFType_toString(threadData, _ty2), MMC_REFSTRUCTLIT(mmc_nil)))));
            omc_Error_addSourceMessage(threadData, _OMC_LIT68, tmpMeta5, _info);

            goto goto_2;
          }

          omc_NFTyping_checkAssignment(threadData, _e1, _e2, (modelica_integer)_var, _context, _info);

          if(omc_NFExpression_isExternalCall(threadData, _e2))
          {
            omc_NFCall_updateExternalRecordArgs(threadData, omc_NFExpression_tupleElements(threadData, _e1));
          }
          tmpMeta6 = mmc_mk_box5(3, &NFStatement_ASSIGNMENT__desc, _e1, _e2, _ty1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 5))));
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          
          /* Pattern matching succeeded */
          _info = omc_ElementSource_getInfo(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 6))));

          if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 3)))))
          {
            /* Pattern-matching assignment */
            tmpMeta7 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 3)));
            if (optionNone(tmpMeta7)) goto goto_2;
            tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
            _e1 = tmpMeta8;
          }
          else
          {
            _e1 = omc_NFTyping_deduceIterationRangeStmt(threadData, _st, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 2))), _info);
          }

          _e1 = omc_NFTyping_typeIterator(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 2))), _e1, _context, 0 /* false */, NULL, NULL, NULL);

          _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 8192));

          _body = omc_NFTyping_typeStatements(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 4))), _next_context);
          tmpMeta9 = mmc_mk_box6(5, &NFStatement_FOR__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 2))), mmc_mk_some(_e1), _body, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 5))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 6))));
          tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta26;
          
          /* Pattern matching succeeded */
          _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 16384));

          _cond_context = omc_NFInstContext_set(threadData, _next_context, ((modelica_integer) 1048576));

          {
            modelica_metatype __omcQ_24tmpVar7;
            modelica_metatype* tmp11;
            modelica_metatype tmpMeta12;
            modelica_metatype tmpMeta13;
            modelica_metatype __omcQ_24tmpVar6;
            modelica_integer tmp25;
            modelica_metatype _br_loopVar = 0;
            modelica_metatype _br;
            _br_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 2)));
            tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar7 = tmpMeta12; /* defaultValue */
            tmp11 = &__omcQ_24tmpVar7;
            while(1) {
              tmp25 = 1;
              if (!listEmpty(_br_loopVar)) {
                _br = MMC_CAR(_br_loopVar);
                _br_loopVar = MMC_CDR(_br_loopVar);
                tmp25--;
              }
              if (tmp25 == 0) {
                { /* match expression */
                  modelica_metatype tmp16_1;
                  tmp16_1 = _br;
                  {
                    volatile mmc_switch_type tmp16;
                    int tmp17;
                    tmp16 = 0;
                    for (; tmp16 < 1; tmp16++) {
                      switch (MMC_SWITCH_CAST(tmp16)) {
                      case 0: {
                        modelica_metatype tmpMeta18;
                        modelica_metatype tmpMeta19;
                        modelica_metatype tmpMeta20;
                        modelica_metatype tmpMeta24;
                        tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp16_1), 1));
                        tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp16_1), 2));
                        _cond = tmpMeta18;
                        _body = tmpMeta19;
                        /* Pattern matching succeeded */
                        _e1 = omc_NFTyping_typeCondition(threadData, _cond, _cond_context, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 3))), _OMC_LIT47, 0 /* false */, 0 /* false */, NULL, NULL);

                        {
                          modelica_metatype __omcQ_24tmpVar5;
                          modelica_metatype* tmp21;
                          modelica_metatype tmpMeta22;
                          modelica_metatype __omcQ_24tmpVar4;
                          modelica_integer tmp23;
                          modelica_metatype _bst_loopVar = 0;
                          modelica_metatype _bst;
                          _bst_loopVar = _body;
                          tmpMeta22 = MMC_REFSTRUCTLIT(mmc_nil);
                          __omcQ_24tmpVar5 = tmpMeta22; /* defaultValue */
                          tmp21 = &__omcQ_24tmpVar5;
                          while(1) {
                            tmp23 = 1;
                            if (!listEmpty(_bst_loopVar)) {
                              _bst = MMC_CAR(_bst_loopVar);
                              _bst_loopVar = MMC_CDR(_bst_loopVar);
                              tmp23--;
                            }
                            if (tmp23 == 0) {
                              __omcQ_24tmpVar4 = omc_NFTyping_typeStatement(threadData, _bst, _next_context);
                              *tmp21 = mmc_mk_cons(__omcQ_24tmpVar4,0);
                              tmp21 = &MMC_CDR(*tmp21);
                            } else if (tmp23 == 1) {
                              break;
                            } else {
                              goto goto_14;
                            }
                          }
                          *tmp21 = mmc_mk_nil();
                          tmpMeta20 = __omcQ_24tmpVar5;
                        }
                        _sts1 = tmpMeta20;
                        tmpMeta24 = mmc_mk_box2(0, _e1, _sts1);
                        tmpMeta13 = tmpMeta24;
                        goto tmp15_done;
                      }
                      }
                      goto tmp15_end;
                      tmp15_end: ;
                    }
                    goto goto_14;
                    goto_14:;
                    goto goto_2;
                    goto tmp15_done;
                    tmp15_done:;
                  }
                }__omcQ_24tmpVar6 = tmpMeta13;
                *tmp11 = mmc_mk_cons(__omcQ_24tmpVar6,0);
                tmp11 = &MMC_CDR(*tmp11);
              } else if (tmp25 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp11 = mmc_mk_nil();
            tmpMeta10 = __omcQ_24tmpVar7;
          }
          _tybrs = tmpMeta10;
          tmpMeta26 = mmc_mk_box3(6, &NFStatement_IF__desc, _tybrs, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 3))));
          tmpMeta1 = tmpMeta26;
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta43;
          
          /* Pattern matching succeeded */
          _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 2048));

          {
            modelica_metatype __omcQ_24tmpVar11;
            modelica_metatype* tmp28;
            modelica_metatype tmpMeta29;
            modelica_metatype tmpMeta30;
            modelica_metatype __omcQ_24tmpVar10;
            modelica_integer tmp42;
            modelica_metatype _br_loopVar = 0;
            modelica_metatype _br;
            _br_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 2)));
            tmpMeta29 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar11 = tmpMeta29; /* defaultValue */
            tmp28 = &__omcQ_24tmpVar11;
            while(1) {
              tmp42 = 1;
              if (!listEmpty(_br_loopVar)) {
                _br = MMC_CAR(_br_loopVar);
                _br_loopVar = MMC_CDR(_br_loopVar);
                tmp42--;
              }
              if (tmp42 == 0) {
                { /* match expression */
                  modelica_metatype tmp33_1;
                  tmp33_1 = _br;
                  {
                    volatile mmc_switch_type tmp33;
                    int tmp34;
                    tmp33 = 0;
                    for (; tmp33 < 1; tmp33++) {
                      switch (MMC_SWITCH_CAST(tmp33)) {
                      case 0: {
                        modelica_metatype tmpMeta35;
                        modelica_metatype tmpMeta36;
                        modelica_metatype tmpMeta37;
                        modelica_metatype tmpMeta41;
                        tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp33_1), 1));
                        tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp33_1), 2));
                        _cond = tmpMeta35;
                        _body = tmpMeta36;
                        /* Pattern matching succeeded */
                        _e1 = omc_NFTyping_typeWhenCondition(threadData, _cond, _context, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 3))), 0 /* false */, NULL, NULL);

                        {
                          modelica_metatype __omcQ_24tmpVar9;
                          modelica_metatype* tmp38;
                          modelica_metatype tmpMeta39;
                          modelica_metatype __omcQ_24tmpVar8;
                          modelica_integer tmp40;
                          modelica_metatype _bst_loopVar = 0;
                          modelica_metatype _bst;
                          _bst_loopVar = _body;
                          tmpMeta39 = MMC_REFSTRUCTLIT(mmc_nil);
                          __omcQ_24tmpVar9 = tmpMeta39; /* defaultValue */
                          tmp38 = &__omcQ_24tmpVar9;
                          while(1) {
                            tmp40 = 1;
                            if (!listEmpty(_bst_loopVar)) {
                              _bst = MMC_CAR(_bst_loopVar);
                              _bst_loopVar = MMC_CDR(_bst_loopVar);
                              tmp40--;
                            }
                            if (tmp40 == 0) {
                              __omcQ_24tmpVar8 = omc_NFTyping_typeStatement(threadData, _bst, _next_context);
                              *tmp38 = mmc_mk_cons(__omcQ_24tmpVar8,0);
                              tmp38 = &MMC_CDR(*tmp38);
                            } else if (tmp40 == 1) {
                              break;
                            } else {
                              goto goto_31;
                            }
                          }
                          *tmp38 = mmc_mk_nil();
                          tmpMeta37 = __omcQ_24tmpVar9;
                        }
                        _sts1 = tmpMeta37;
                        tmpMeta41 = mmc_mk_box2(0, _e1, _sts1);
                        tmpMeta30 = tmpMeta41;
                        goto tmp32_done;
                      }
                      }
                      goto tmp32_end;
                      tmp32_end: ;
                    }
                    goto goto_31;
                    goto_31:;
                    goto goto_2;
                    goto tmp32_done;
                    tmp32_done:;
                  }
                }__omcQ_24tmpVar10 = tmpMeta30;
                *tmp28 = mmc_mk_cons(__omcQ_24tmpVar10,0);
                tmp28 = &MMC_CDR(*tmp28);
              } else if (tmp42 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp28 = mmc_mk_nil();
            tmpMeta27 = __omcQ_24tmpVar11;
          }
          _tybrs = tmpMeta27;
          tmpMeta43 = mmc_mk_box3(7, &NFStatement_WHEN__desc, _tybrs, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 3))));
          tmpMeta1 = tmpMeta43;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta44;
          
          /* Pattern matching succeeded */
          _info = omc_ElementSource_getInfo(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 5))));

          _e1 = omc_NFTyping_typeAssert(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 4))), _context, _info ,&_e2 ,&_e3);
          tmpMeta44 = mmc_mk_box5(8, &NFStatement_ASSERT__desc, _e1, _e2, _e3, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 5))));
          tmpMeta1 = tmpMeta44;
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta45;
          
          /* Pattern matching succeeded */
          _info = omc_ElementSource_getInfo(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 3))));

          if(omc_NFInstContext_inFunction(threadData, _context))
          {
            omc_Error_addSourceMessage(threadData, _OMC_LIT71, _OMC_LIT73, _info);

            goto goto_2;
          }

          _e1 = omc_NFTyping_typeOperatorArg(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 2))), _OMC_LIT74, _context, _OMC_LIT72, _OMC_LIT75, ((modelica_integer) 1), _info, NULL);
          tmpMeta45 = mmc_mk_box3(9, &NFStatement_TERMINATE__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 3))));
          tmpMeta1 = tmpMeta45;
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta46;
          
          /* Pattern matching succeeded */
          if(omc_NFInstContext_inFunction(threadData, _context))
          {
            omc_Error_addSourceMessage(threadData, _OMC_LIT71, _OMC_LIT76, omc_ElementSource_getInfo(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 4)))));

            goto goto_2;
          }

          _e1 = omc_NFTyping_typeReinit(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 3))), _context, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 4))) ,&_e2);
          tmpMeta46 = mmc_mk_box4(10, &NFStatement_REINIT__desc, _e1, _e2, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 4))));
          tmpMeta1 = tmpMeta46;
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta47;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFTyping_typeExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 2))), _context, omc_ElementSource_getInfo(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 3)))), 0 /* false */, NULL, NULL, NULL);
          tmpMeta47 = mmc_mk_box3(11, &NFStatement_NORETCALL__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 3))));
          tmpMeta1 = tmpMeta47;
          goto tmp3_done;
        }
        case 12: {
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta52;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFTyping_typeCondition(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 2))), _context, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 4))), _OMC_LIT79, 0 /* false */, 0 /* false */, NULL, NULL);

          {
            modelica_metatype __omcQ_24tmpVar13;
            modelica_metatype* tmp49;
            modelica_metatype tmpMeta50;
            modelica_metatype __omcQ_24tmpVar12;
            modelica_integer tmp51;
            modelica_metatype _bst_loopVar = 0;
            modelica_metatype _bst;
            _bst_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 3)));
            tmpMeta50 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar13 = tmpMeta50; /* defaultValue */
            tmp49 = &__omcQ_24tmpVar13;
            while(1) {
              tmp51 = 1;
              if (!listEmpty(_bst_loopVar)) {
                _bst = MMC_CAR(_bst_loopVar);
                _bst_loopVar = MMC_CDR(_bst_loopVar);
                tmp51--;
              }
              if (tmp51 == 0) {
                __omcQ_24tmpVar12 = omc_NFTyping_typeStatement(threadData, _bst, _context);
                *tmp49 = mmc_mk_cons(__omcQ_24tmpVar12,0);
                tmp49 = &MMC_CDR(*tmp49);
              } else if (tmp51 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp49 = mmc_mk_nil();
            tmpMeta48 = __omcQ_24tmpVar13;
          }
          _sts1 = tmpMeta48;
          tmpMeta52 = mmc_mk_box4(12, &NFStatement_WHILE__desc, _e1, _sts1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 4))));
          tmpMeta1 = tmpMeta52;
          goto tmp3_done;
        }
        case 15: {
          modelica_metatype tmpMeta53;
          modelica_metatype tmpMeta57;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar15;
            modelica_metatype* tmp54;
            modelica_metatype tmpMeta55;
            modelica_metatype __omcQ_24tmpVar14;
            modelica_integer tmp56;
            modelica_metatype _bst_loopVar = 0;
            modelica_metatype _bst;
            _bst_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 2)));
            tmpMeta55 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar15 = tmpMeta55; /* defaultValue */
            tmp54 = &__omcQ_24tmpVar15;
            while(1) {
              tmp56 = 1;
              if (!listEmpty(_bst_loopVar)) {
                _bst = MMC_CAR(_bst_loopVar);
                _bst_loopVar = MMC_CDR(_bst_loopVar);
                tmp56--;
              }
              if (tmp56 == 0) {
                __omcQ_24tmpVar14 = omc_NFTyping_typeStatement(threadData, _bst, _context);
                *tmp54 = mmc_mk_cons(__omcQ_24tmpVar14,0);
                tmp54 = &MMC_CDR(*tmp54);
              } else if (tmp56 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp54 = mmc_mk_nil();
            tmpMeta53 = __omcQ_24tmpVar15;
          }
          _sts1 = tmpMeta53;
          tmpMeta57 = mmc_mk_box3(15, &NFStatement_FAILURE__desc, _sts1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_st), 3))));
          tmpMeta1 = tmpMeta57;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _st;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _st = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _st;
}
modelica_metatype boxptr_NFTyping_typeStatement(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fst, modelica_metatype _context)
{
  modelica_integer tmp1;
  modelica_metatype _st = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _st = omc_NFTyping_typeStatement(threadData, __omcQ_24in_5Fst, tmp1);
  /* skip box _st; NFStatement */
  return _st;
}

DLLDirection
modelica_metatype omc_NFTyping_typeStatements(threadData_t *threadData, modelica_metatype __omcQ_24in_5Falg, modelica_integer _context)
{
  modelica_metatype _alg = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _alg = __omcQ_24in_5Falg;
  {
    modelica_metatype __omcQ_24tmpVar17;
    modelica_metatype* tmp2;
    modelica_metatype tmpMeta3;
    modelica_metatype __omcQ_24tmpVar16;
    modelica_integer tmp4;
    modelica_metatype _stmt_loopVar = 0;
    modelica_metatype _stmt;
    _stmt_loopVar = _alg;
    tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar17 = tmpMeta3; /* defaultValue */
    tmp2 = &__omcQ_24tmpVar17;
    while(1) {
      tmp4 = 1;
      if (!listEmpty(_stmt_loopVar)) {
        _stmt = MMC_CAR(_stmt_loopVar);
        _stmt_loopVar = MMC_CDR(_stmt_loopVar);
        tmp4--;
      }
      if (tmp4 == 0) {
        __omcQ_24tmpVar16 = omc_NFTyping_typeStatement(threadData, _stmt, _context);
        *tmp2 = mmc_mk_cons(__omcQ_24tmpVar16,0);
        tmp2 = &MMC_CDR(*tmp2);
      } else if (tmp4 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp2 = mmc_mk_nil();
    tmpMeta1 = __omcQ_24tmpVar17;
  }
  _alg = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _alg;
}
modelica_metatype boxptr_NFTyping_typeStatements(threadData_t *threadData, modelica_metatype __omcQ_24in_5Falg, modelica_metatype _context)
{
  modelica_integer tmp1;
  modelica_metatype _alg = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _alg = omc_NFTyping_typeStatements(threadData, __omcQ_24in_5Falg, tmp1);
  /* skip box _alg; list<NFStatement> */
  return _alg;
}

DLLDirection
modelica_metatype omc_NFTyping_typeAlgorithm(threadData_t *threadData, modelica_metatype __omcQ_24in_5Falg, modelica_integer _context)
{
  modelica_metatype _alg = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _alg = __omcQ_24in_5Falg;
  {
    modelica_metatype __omcQ_24tmpVar19;
    modelica_metatype* tmp3;
    modelica_metatype tmpMeta4;
    modelica_metatype __omcQ_24tmpVar18;
    modelica_integer tmp5;
    modelica_metatype _s_loopVar = 0;
    modelica_metatype _s;
    _s_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_alg), 2)));
    tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar19 = tmpMeta4; /* defaultValue */
    tmp3 = &__omcQ_24tmpVar19;
    while(1) {
      tmp5 = 1;
      if (!listEmpty(_s_loopVar)) {
        _s = MMC_CAR(_s_loopVar);
        _s_loopVar = MMC_CDR(_s_loopVar);
        tmp5--;
      }
      if (tmp5 == 0) {
        __omcQ_24tmpVar18 = omc_NFTyping_typeStatement(threadData, _s, _context);
        *tmp3 = mmc_mk_cons(__omcQ_24tmpVar18,0);
        tmp3 = &MMC_CDR(*tmp3);
      } else if (tmp5 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp3 = mmc_mk_nil();
    tmpMeta2 = __omcQ_24tmpVar19;
  }
  tmpMeta1 = MMC_TAGPTR(mmc_alloc_words(7));
  memcpy(MMC_UNTAGPTR(tmpMeta1), MMC_UNTAGPTR(_alg), 7*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta1))[2] = tmpMeta2;
  _alg = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _alg;
}
modelica_metatype boxptr_NFTyping_typeAlgorithm(threadData_t *threadData, modelica_metatype __omcQ_24in_5Falg, modelica_metatype _context)
{
  modelica_integer tmp1;
  modelica_metatype _alg = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _alg = omc_NFTyping_typeAlgorithm(threadData, __omcQ_24in_5Falg, tmp1);
  /* skip box _alg; NFAlgorithm */
  return _alg;
}

DLLDirection
modelica_metatype omc_NFTyping_typeAssert(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcondition, modelica_metatype __omcQ_24in_5Fmessage, modelica_metatype __omcQ_24in_5Flevel, modelica_integer _context, modelica_metatype _info, modelica_metatype *out_message, modelica_metatype *out_level)
{
  modelica_metatype _condition = NULL;
  modelica_metatype _message = NULL;
  modelica_metatype _level = NULL;
  modelica_integer _next_context;
  modelica_integer _level_var;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _condition = __omcQ_24in_5Fcondition;
  _message = __omcQ_24in_5Fmessage;
  _level = __omcQ_24in_5Flevel;
  // _next_context has no default value.
  // _level_var has no default value.
  _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 33554432));

  _condition = omc_NFTyping_typeOperatorArg(threadData, _condition, _OMC_LIT80, omc_NFInstContext_set(threadData, _next_context, ((modelica_integer) 1048576)), _OMC_LIT81, _OMC_LIT82, ((modelica_integer) 1), _info, NULL);

  _message = omc_NFTyping_typeOperatorArg(threadData, _message, _OMC_LIT74, _next_context, _OMC_LIT81, _OMC_LIT75, ((modelica_integer) 2), _info, NULL);

  _level = omc_NFTyping_typeOperatorArg(threadData, _level, _OMC_LIT89, _next_context, _OMC_LIT81, _OMC_LIT90, ((modelica_integer) 3), _info ,&_level_var);

  if(((modelica_integer)_level_var > 3))
  {
    tmpMeta1 = mmc_mk_cons(_OMC_LIT90, mmc_mk_cons(omc_NFExpression_toString(threadData, _level), mmc_mk_cons(_OMC_LIT81, mmc_mk_cons(omc_NFPrefixes_variabilityString(threadData, (modelica_integer)_level_var), mmc_mk_cons(_OMC_LIT94, MMC_REFSTRUCTLIT(mmc_nil))))));
    omc_Error_addSourceMessage(threadData, _OMC_LIT93, tmpMeta1, _info);

    MMC_THROW_INTERNAL();
  }

  omc_NFStructural_markExp(threadData, _level);
  _return: OMC_LABEL_UNUSED
  if (out_message) { *out_message = _message; }
  if (out_level) { *out_level = _level; }
  return _condition;
}
modelica_metatype boxptr_NFTyping_typeAssert(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcondition, modelica_metatype __omcQ_24in_5Fmessage, modelica_metatype __omcQ_24in_5Flevel, modelica_metatype _context, modelica_metatype _info, modelica_metatype *out_message, modelica_metatype *out_level)
{
  modelica_integer tmp1;
  modelica_metatype _condition = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _condition = omc_NFTyping_typeAssert(threadData, __omcQ_24in_5Fcondition, __omcQ_24in_5Fmessage, __omcQ_24in_5Flevel, tmp1, _info, out_message, out_level);
  /* skip box _condition; NFExpression */
  /* skip box _message; NFExpression */
  /* skip box _level; NFExpression */
  return _condition;
}

DLLDirection
modelica_boolean omc_NFTyping_checkLhsInWhen(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isValid;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isValid has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 9: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 14: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _e;
            for (tmpMeta5 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))); !listEmpty(tmpMeta5); tmpMeta5=MMC_CDR(tmpMeta5))
            {
              _e = MMC_CAR(tmpMeta5);
              omc_NFTyping_checkLhsInWhen(threadData, _e);
            }
          }
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isValid = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isValid;
}
modelica_metatype boxptr_NFTyping_checkLhsInWhen(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isValid;
  modelica_metatype out_isValid;
  _isValid = omc_NFTyping_checkLhsInWhen(threadData, _exp);
  out_isValid = mmc_mk_icon(_isValid);
  return out_isValid;
}

DLLDirection
modelica_boolean omc_NFTyping_checkConnectorForm(threadData_t *threadData, modelica_metatype _cref, modelica_boolean _isConnector)
{
  modelica_boolean _valid;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _valid has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _cref;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          modelica_metatype tmpMeta8;
          modelica_boolean tmp9;
          modelica_boolean tmp10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmp7 = mmc_unbox_integer(tmpMeta6);
          if (1 != tmp7) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp9 = (modelica_boolean)_isConnector;
          if(tmp9)
          {
            /* Tail recursive call */
            tmpMeta8 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 6)));
            _isConnector = omc_NFInstNode_InstNode_isConnector(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 2))));
            _cref = tmpMeta8;
            goto _tailrecursive;
            /* TODO: Make sure any eventual dead code below is never generated */
          }
          else
          {
            tmp10 = 0 /* false */;
          }
          tmp1 = tmp10;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _valid = tmp1;
  _return: OMC_LABEL_UNUSED
  return _valid;
}
modelica_metatype boxptr_NFTyping_checkConnectorForm(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _isConnector)
{
  modelica_integer tmp1;
  modelica_boolean _valid;
  modelica_metatype out_valid;
  tmp1 = mmc_unbox_integer(_isConnector);
  _valid = omc_NFTyping_checkConnectorForm(threadData, _cref, tmp1);
  out_valid = mmc_mk_icon(_valid);
  return out_valid;
}

DLLDirection
modelica_boolean omc_NFTyping_checkConnector(threadData_t *threadData, modelica_metatype _connExp, modelica_metatype _info)
{
  modelica_boolean _deleted;
  modelica_metatype _cr = NULL;
  modelica_metatype _subs = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _deleted has no default value.
  // _cr has no default value.
  // _subs has no default value.
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _connExp;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta5,0,5) == 0) goto tmp2_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 5));
          tmp7 = mmc_unbox_integer(tmpMeta6);
          if (1 != tmp7) goto tmp2_end;
          
          _cr = tmpMeta5;
          /* Pattern matching succeeded */
          if((!omc_NFInstNode_InstNode_isConnector(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cr), 2))))))
          {
            tmpMeta8 = mmc_mk_cons(omc_NFComponentRef_toString(threadData, _cr), MMC_REFSTRUCTLIT(mmc_nil));
            omc_Error_addSourceMessageAndFail(threadData, _OMC_LIT97, tmpMeta8, _info);
          }

          if((!omc_NFTyping_checkConnectorForm(threadData, _cr, 1 /* true */)))
          {
            tmpMeta9 = mmc_mk_cons(omc_NFComponentRef_toString(threadData, _cr), MMC_REFSTRUCTLIT(mmc_nil));
            omc_Error_addSourceMessageAndFail(threadData, _OMC_LIT100, tmpMeta9, _info);
          }

          if((omc_NFComponentRef_subscriptsVariability(threadData, _cr, 1) > 3))
          {
            _subs = omc_NFComponentRef_subscriptsAllFlat(threadData, _cr);

            {
              modelica_metatype _sub;
              for (tmpMeta10 = _subs; !listEmpty(tmpMeta10); tmpMeta10=MMC_CDR(tmpMeta10))
              {
                _sub = MMC_CAR(tmpMeta10);
                if((omc_NFSubscript_variability(threadData, _sub) > 3))
                {
                  tmpMeta11 = mmc_mk_cons(omc_NFExpression_toString(threadData, _connExp), mmc_mk_cons(omc_NFSubscript_toString(threadData, _sub), MMC_REFSTRUCTLIT(mmc_nil)));
                  omc_Error_addSourceMessage(threadData, _OMC_LIT103, tmpMeta11, _info);

                  goto goto_1;
                }
              }
            }
          }

          _deleted = omc_NFComponentRef_isDeleted(threadData, _cr);
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta13;
          
          /* Pattern matching succeeded */
          tmpMeta13 = mmc_mk_cons(omc_NFExpression_toString(threadData, _connExp), MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addSourceMessage(threadData, _OMC_LIT97, tmpMeta13, _info);
          goto goto_1;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _deleted;
}
modelica_metatype boxptr_NFTyping_checkConnector(threadData_t *threadData, modelica_metatype _connExp, modelica_metatype _info)
{
  modelica_boolean _deleted;
  modelica_metatype out_deleted;
  _deleted = omc_NFTyping_checkConnector(threadData, _connExp, _info);
  out_deleted = mmc_mk_icon(_deleted);
  return out_deleted;
}

DLLDirection
modelica_metatype omc_NFTyping_typeConnector(threadData_t *threadData, modelica_metatype __omcQ_24in_5FconnExp, modelica_integer _context, modelica_metatype _info, modelica_metatype *out_ty, modelica_boolean *out_deleted)
{
  modelica_metatype _connExp = NULL;
  modelica_metatype _ty = NULL;
  modelica_boolean _deleted;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _connExp = __omcQ_24in_5FconnExp;
  // _ty has no default value.
  // _deleted has no default value.
  _connExp = omc_NFTyping_typeExp(threadData, _connExp, _context, _info, 0 /* false */ ,&_ty ,NULL, NULL);

  _deleted = omc_NFTyping_checkConnector(threadData, _connExp, _info);
  _return: OMC_LABEL_UNUSED
  if (out_ty) { *out_ty = _ty; }
  if (out_deleted) { *out_deleted = _deleted; }
  return _connExp;
}
modelica_metatype boxptr_NFTyping_typeConnector(threadData_t *threadData, modelica_metatype __omcQ_24in_5FconnExp, modelica_metatype _context, modelica_metatype _info, modelica_metatype *out_ty, modelica_metatype *out_deleted)
{
  modelica_integer tmp1;
  modelica_boolean _deleted;
  modelica_metatype _connExp = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _connExp = omc_NFTyping_typeConnector(threadData, __omcQ_24in_5FconnExp, tmp1, _info, out_ty, &_deleted);
  /* skip box _connExp; NFExpression */
  /* skip box _ty; NFType */
  if (out_deleted) { *out_deleted = mmc_mk_icon(_deleted); }
  return _connExp;
}

DLLDirection
modelica_metatype omc_NFTyping_typeConnect(threadData_t *threadData, modelica_metatype _lhsConn, modelica_metatype _rhsConn, modelica_integer _context, modelica_metatype _scope, modelica_metatype _source)
{
  modelica_metatype _connEq = NULL;
  modelica_metatype _lhs = NULL;
  modelica_metatype _rhs = NULL;
  modelica_metatype _lhs_ty = NULL;
  modelica_metatype _rhs_ty = NULL;
  modelica_integer _lhs_var;
  modelica_integer _rhs_var;
  modelica_integer _mk;
  modelica_integer _next_context;
  modelica_metatype _info = NULL;
  modelica_metatype _eql = NULL;
  modelica_boolean _lhs_deleted;
  modelica_boolean _rhs_deleted;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _connEq has no default value.
  // _lhs has no default value.
  // _rhs has no default value.
  // _lhs_ty has no default value.
  // _rhs_ty has no default value.
  // _lhs_var has no default value.
  // _rhs_var has no default value.
  // _mk has no default value.
  // _next_context has no default value.
  // _info has no default value.
  // _eql has no default value.
  // _lhs_deleted has no default value.
  // _rhs_deleted has no default value.
  _info = omc_ElementSource_getInfo(threadData, _source);

  if(omc_NFInstContext_inNonexpandable(threadData, _context))
  {
    tmpMeta1 = mmc_mk_cons(omc_NFExpression_toString(threadData, _lhsConn), mmc_mk_cons(omc_NFExpression_toString(threadData, _rhsConn), MMC_REFSTRUCTLIT(mmc_nil)));
    omc_Error_addSourceMessage(threadData, _OMC_LIT106, tmpMeta1, _info);

    MMC_THROW_INTERNAL();
  }

  _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 8388608));

  _lhs = omc_NFTyping_typeConnector(threadData, _lhsConn, _next_context, _info ,&_lhs_ty ,&_lhs_deleted);

  _rhs = omc_NFTyping_typeConnector(threadData, _rhsConn, _next_context, _info ,&_rhs_ty ,&_rhs_deleted);

  if(((!(_lhs_deleted || _rhs_deleted)) && (!(omc_NFType_isExpandableConnector(threadData, omc_NFType_arrayElementType(threadData, _lhs_ty)) || omc_NFType_isExpandableConnector(threadData, omc_NFType_arrayElementType(threadData, _rhs_ty))))))
  {
    _lhs = omc_NFTypeCheck_matchExpressions(threadData, _lhs, _lhs_ty, _rhs, _rhs_ty, ((modelica_integer) 1) ,&_rhs ,NULL ,&_mk);

    if(omc_NFTypeCheck_isIncompatibleMatch(threadData, (modelica_integer)_mk))
    {
      tmpMeta2 = mmc_mk_cons(omc_NFExpression_toString(threadData, _lhsConn), mmc_mk_cons(omc_NFExpression_toString(threadData, _rhsConn), MMC_REFSTRUCTLIT(mmc_nil)));
      omc_Error_addSourceMessage(threadData, _OMC_LIT109, tmpMeta2, _info);

      MMC_THROW_INTERNAL();
    }
  }

  tmpMeta3 = mmc_mk_box5(5, &NFEquation_CONNECT__desc, _lhs, _rhs, _scope, _source);
  _connEq = tmpMeta3;
  _return: OMC_LABEL_UNUSED
  return _connEq;
}
modelica_metatype boxptr_NFTyping_typeConnect(threadData_t *threadData, modelica_metatype _lhsConn, modelica_metatype _rhsConn, modelica_metatype _context, modelica_metatype _scope, modelica_metatype _source)
{
  modelica_integer tmp1;
  modelica_metatype _connEq = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _connEq = omc_NFTyping_typeConnect(threadData, _lhsConn, _rhsConn, tmp1, _scope, _source);
  /* skip box _connEq; NFEquation */
  return _connEq;
}

DLLDirection
modelica_metatype omc_NFTyping_typeEquation(threadData_t *threadData, modelica_metatype __omcQ_24in_5Feq, modelica_integer _context)
{
  modelica_metatype _eq = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _eq = __omcQ_24in_5Feq;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _eq;
    {
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _e3 = NULL;
      modelica_metatype _body = NULL;
      modelica_integer _next_context;
      modelica_metatype _info = NULL;
      int tmp4;
      // _e1 has no default value.
      // _e2 has no default value.
      // _e3 has no default value.
      // _body has no default value.
      // _next_context has no default value.
      // _info has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFTyping_typeEqualityEquation(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 3))), _context, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 5))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 6))));
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFTyping_typeConnect(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 3))), _context, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 5))));
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta11;
          
          /* Pattern matching succeeded */
          _info = omc_ElementSource_getInfo(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 6))));

          if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 3)))))
          {
            /* Pattern-matching assignment */
            tmpMeta5 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 3)));
            if (optionNone(tmpMeta5)) goto goto_2;
            tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 1));
            _e1 = tmpMeta6;
          }
          else
          {
            _e1 = omc_NFTyping_deduceIterationRangeEq(threadData, _eq, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 2))), _info);
          }

          _e1 = omc_NFTyping_typeIterator(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 2))), _e1, _context, 1 /* true */, NULL, NULL, NULL);

          _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 8192));

          {
            modelica_metatype __omcQ_24tmpVar21;
            modelica_metatype* tmp8;
            modelica_metatype tmpMeta9;
            modelica_metatype __omcQ_24tmpVar20;
            modelica_integer tmp10;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 4)));
            tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar21 = tmpMeta9; /* defaultValue */
            tmp8 = &__omcQ_24tmpVar21;
            while(1) {
              tmp10 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp10--;
              }
              if (tmp10 == 0) {
                __omcQ_24tmpVar20 = omc_NFTyping_typeEquation(threadData, _e, _next_context);
                *tmp8 = mmc_mk_cons(__omcQ_24tmpVar20,0);
                tmp8 = &MMC_CDR(*tmp8);
              } else if (tmp10 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp8 = mmc_mk_nil();
            tmpMeta7 = __omcQ_24tmpVar21;
          }
          _body = tmpMeta7;
          tmpMeta11 = mmc_mk_box6(6, &NFEquation_FOR__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 2))), mmc_mk_some(_e1), _body, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 5))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 6))));
          tmpMeta1 = tmpMeta11;
          goto tmp3_done;
        }
        case 7: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFTyping_typeIfEquation(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 2))), _context, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 4))));
          goto tmp3_done;
        }
        case 8: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFTyping_typeWhenEquation(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 2))), _context, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 4))));
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta12;
          
          /* Pattern matching succeeded */
          _info = omc_ElementSource_getInfo(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 6))));

          _e1 = omc_NFTyping_typeAssert(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 4))), _context, _info ,&_e2 ,&_e3);
          tmpMeta12 = mmc_mk_box6(9, &NFEquation_ASSERT__desc, _e1, _e2, _e3, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 5))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 6))));
          tmpMeta1 = tmpMeta12;
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta13;
          
          /* Pattern matching succeeded */
          _info = omc_ElementSource_getInfo(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 4))));

          _e1 = omc_NFTyping_typeOperatorArg(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 2))), _OMC_LIT74, _context, _OMC_LIT72, _OMC_LIT75, ((modelica_integer) 1), _info, NULL);
          tmpMeta13 = mmc_mk_box4(10, &NFEquation_TERMINATE__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 4))));
          tmpMeta1 = tmpMeta13;
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta14;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFTyping_typeReinit(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 3))), _context, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 5))) ,&_e2);
          tmpMeta14 = mmc_mk_box5(11, &NFEquation_REINIT__desc, _e1, _e2, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 5))));
          tmpMeta1 = tmpMeta14;
          goto tmp3_done;
        }
        case 12: {
          modelica_metatype tmpMeta15;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFTyping_typeExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 2))), _context, omc_ElementSource_getInfo(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 4)))), 0 /* false */, NULL, NULL, NULL);
          tmpMeta15 = mmc_mk_box4(12, &NFEquation_NORETCALL__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eq), 4))));
          tmpMeta1 = tmpMeta15;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _eq;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _eq = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _eq;
}
modelica_metatype boxptr_NFTyping_typeEquation(threadData_t *threadData, modelica_metatype __omcQ_24in_5Feq, modelica_metatype _context)
{
  modelica_integer tmp1;
  modelica_metatype _eq = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _eq = omc_NFTyping_typeEquation(threadData, __omcQ_24in_5Feq, tmp1);
  /* skip box _eq; NFEquation */
  return _eq;
}

DLLDirection
void omc_NFTyping_typeComponentSections(threadData_t *threadData, modelica_metatype _component, modelica_integer _context)
{
  modelica_metatype _comp = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _comp has no default value.
  _comp = omc_NFInstNode_InstNode_component(threadData, _component);

  if((omc_NFComponent_isDeleted(threadData, _comp) || omc_NFInstNode_InstNode_isOnlyOuter(threadData, _component)))
  {
    goto _return;
  }

  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _comp;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,8) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_comp), 8)))) >= 4)) goto tmp2_end;
          omc_NFTyping_typeClassSections(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_comp), 2))), _context);
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          tmpMeta5 = stringAppend(_OMC_LIT110,omc_NFInstNode_InstNode_name(threadData, _component));
          omc_Error_assertion(threadData, 0 /* false */, tmpMeta5, _OMC_LIT112);
          goto goto_1;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return;
}
void boxptr_NFTyping_typeComponentSections(threadData_t *threadData, modelica_metatype _component, modelica_metatype _context)
{
  modelica_integer tmp1;
  tmp1 = mmc_unbox_integer(_context);
  omc_NFTyping_typeComponentSections(threadData, _component, tmp1);
  return;
}

DLLDirection
void omc_NFTyping_checkExternalCallResult(threadData_t *threadData, modelica_metatype _result, modelica_metatype _info)
{
  modelica_metatype _ty = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _ty has no default value.
  if((!omc_NFComponentRef_isCref(threadData, _result)))
  {
    goto _return;
  }

  _ty = omc_NFComponentRef_nodeType(threadData, _result);

  if(omc_NFType_isArray(threadData, _ty))
  {
    tmpMeta1 = mmc_mk_cons(omc_NFType_toString(threadData, _ty), MMC_REFSTRUCTLIT(mmc_nil));
    omc_Error_addSourceMessage(threadData, _OMC_LIT115, tmpMeta1, _info);

    MMC_THROW_INTERNAL();
  }

  if((omc_NFComponentRef_variability(threadData, _result) < 5))
  {
    tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
    omc_Error_addSourceMessage(threadData, _OMC_LIT118, tmpMeta2, _info);

    MMC_THROW_INTERNAL();
  }
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
modelica_metatype omc_NFTyping_makeDefaultExternalCall(threadData_t *threadData, modelica_metatype __omcQ_24in_5FextDecl, modelica_metatype _fnNode)
{
  modelica_metatype _extDecl = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _extDecl = __omcQ_24in_5FextDecl;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _extDecl;
    {
      modelica_metatype _args = NULL;
      modelica_metatype _fn = NULL;
      modelica_boolean _single_output;
      modelica_metatype _comps = NULL;
      modelica_metatype _comp = NULL;
      modelica_metatype _ty = NULL;
      modelica_metatype _node = NULL;
      modelica_metatype _exp = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _args has no default value.
      // _fn has no default value.
      // _single_output has no default value.
      // _comps has no default value.
      // _comp has no default value.
      // _ty has no default value.
      // _node has no default value.
      // _exp has no default value.
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_integer tmp24;
          modelica_integer tmp25;
          modelica_integer tmp26;
          modelica_metatype tmpMeta27;
          modelica_integer tmp28;
          modelica_integer tmp29;
          modelica_metatype tmpMeta30;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,7) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          if((stringEqual((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_extDecl), 5))), _OMC_LIT119)))
          {
            goto _return;
          }

          /* Pattern-matching assignment */
          tmpMeta6 = omc_NFInstNode_InstNode_getFuncCache(threadData, _fnNode);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,2,3) == 0) goto goto_2;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (listEmpty(tmpMeta7)) goto goto_2;
          tmpMeta8 = MMC_CAR(tmpMeta7);
          tmpMeta9 = MMC_CDR(tmpMeta7);
          if (!listEmpty(tmpMeta9)) goto goto_2;
          _fn = tmpMeta8;

          _single_output = (listLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fn), 5)))) == ((modelica_integer) 1));

          if((_single_output && omc_NFType_isArray(threadData, omc_NFFunction_Function_returnType(threadData, _fn))))
          {
            _single_output = 0 /* false */;

            tmpMeta10 = mmc_mk_cons((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_extDecl), 5))), MMC_REFSTRUCTLIT(mmc_nil));
            omc_Error_addSourceMessage(threadData, _OMC_LIT122, tmpMeta10, omc_NFInstNode_InstNode_info(threadData, _fnNode));
          }

          if(_single_output)
          {
            /* Pattern-matching assignment */
            tmpMeta11 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fn), 5)));
            if (listEmpty(tmpMeta11)) goto goto_2;
            tmpMeta12 = MMC_CAR(tmpMeta11);
            tmpMeta13 = MMC_CDR(tmpMeta11);
            if (!listEmpty(tmpMeta13)) goto goto_2;
            _node = tmpMeta12;

            _ty = omc_NFInstNode_InstNode_getType(threadData, _node);

            tmpMeta15 = MMC_REFSTRUCTLIT(mmc_nil);
            tmpMeta14 = MMC_TAGPTR(mmc_alloc_words(9));
            memcpy(MMC_UNTAGPTR(tmpMeta14), MMC_UNTAGPTR(_extDecl), 9*sizeof(modelica_metatype));
            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta14))[4] = omc_NFComponentRef_fromNode(threadData, _node, _ty, tmpMeta15, 1);
            _extDecl = tmpMeta14;
          }

          _comps = omc_NFClassTree_ClassTree_getComponents(threadData, omc_NFClass_classTree(threadData, omc_NFInstNode_InstNode_getClass(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fn), 3))))));

          if((arrayLength(_comps) > ((modelica_integer) 0)))
          {
            tmpMeta16 = MMC_REFSTRUCTLIT(mmc_nil);
            _args = tmpMeta16;

            {
              modelica_metatype _c;
              for (tmpMeta17 = _comps, tmp29 = arrayLength(tmpMeta17), tmp28 = 1; tmp28 <= tmp29; tmp28++)
              {
                _c = arrayGet(tmpMeta17,tmp28);
                _comp = omc_NFInstNode_InstNode_component(threadData, _c);

                if(((!_single_output) || (omc_NFComponent_direction(threadData, _comp) != 3)))
                {
                  _ty = omc_NFComponent_getType(threadData, _comp);

                  tmpMeta18 = MMC_REFSTRUCTLIT(mmc_nil);
                  tmpMeta19 = mmc_mk_box3(9, &NFExpression_CREF__desc, _ty, omc_NFComponentRef_fromNode(threadData, _c, _ty, tmpMeta18, 1));
                  _exp = tmpMeta19;

                  tmpMeta20 = mmc_mk_cons(_exp, _args);
                  _args = tmpMeta20;

                  tmp24 = ((modelica_integer) 1); tmp25 = 1; tmp26 = omc_NFType_dimensionCount(threadData, _ty);
                  if(!(((tmp25 > 0) && (tmp24 > tmp26)) || ((tmp25 < 0) && (tmp24 < tmp26))))
                  {
                    modelica_integer _i;
                    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp24, tmp26); _i += tmp25)
                    {
                      tmpMeta22 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer(_i));
                      tmpMeta23 = mmc_mk_box3(17, &NFExpression_SIZE__desc, _exp, mmc_mk_some(tmpMeta22));
                      tmpMeta21 = mmc_mk_cons(tmpMeta23, _args);
                      _args = tmpMeta21;
                    }
                  }
                }
              }
            }

            tmpMeta30 = MMC_TAGPTR(mmc_alloc_words(9));
            memcpy(MMC_UNTAGPTR(tmpMeta30), MMC_UNTAGPTR(_extDecl), 9*sizeof(modelica_metatype));
            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta30))[3] = listReverse(_args);
            _extDecl = tmpMeta30;
          }
          tmpMeta1 = _extDecl;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _extDecl = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _extDecl;
}

DLLDirection
modelica_metatype omc_NFTyping_typeExternalArg(threadData_t *threadData, modelica_metatype _arg, modelica_metatype _info, modelica_metatype _node)
{
  modelica_metatype _outArg = NULL;
  modelica_metatype _ty = NULL;
  modelica_integer _var;
  modelica_metatype _index = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outArg has no default value.
  // _ty has no default value.
  // _var has no default value.
  // _index has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _arg;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (optionNone(tmpMeta6)) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
          /* Pattern matching succeeded */
          _outArg = omc_NFTyping_typeSize(threadData, _arg, ((modelica_integer) 16), _info, 0 /* false */, NULL, NULL, NULL);

          /* Pattern-matching assignment */
          tmpMeta8 = _outArg;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,14,2) == 0) goto goto_2;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
          if (optionNone(tmpMeta9)) goto goto_2;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 1));
          _index = tmpMeta10;

          if((!omc_NFExpression_isInteger(threadData, _index)))
          {
            tmpMeta11 = mmc_mk_cons(omc_NFExpression_toString(threadData, _arg), MMC_REFSTRUCTLIT(mmc_nil));
            omc_Error_addSourceMessage(threadData, _OMC_LIT125, tmpMeta11, _info);

            goto goto_2;
          }
          tmpMeta1 = _outArg;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta12;
          
          /* Pattern matching succeeded */
          _outArg = omc_NFTyping_typeExp(threadData, _arg, ((modelica_integer) 16), _info, 0 /* false */ ,&_ty ,&_var, NULL);

          omc_NFCall_updateExternalRecordArgsInType(threadData, _ty);
          { /* match expression */
            modelica_metatype tmp15_1;
            tmp15_1 = _arg;
            {
              volatile mmc_switch_type tmp15;
              int tmp16;
              tmp15 = 0;
              for (; tmp15 < 2; tmp15++) {
                switch (MMC_SWITCH_CAST(tmp15)) {
                case 0: {
                  if (mmc__uniontype__metarecord__typedef__equal(tmp15_1,6,2) == 0) goto tmp14_end;
                  
                  /* Pattern matching succeeded */
                  tmpMeta12 = _outArg;
                  goto tmp14_done;
                }
                case 1: {
                  modelica_metatype tmpMeta17;
                  
                  /* Pattern matching succeeded */
                  if((omc_NFType_isScalarBuiltin(threadData, _ty) && ((modelica_integer)_var == 1)))
                  {
                    _outArg = omc_NFCeval_evalExp(threadData, _outArg, omc_NFCeval_EvalTarget_new(threadData, _info, ((modelica_integer) 16), mmc_mk_none()));
                  }
                  else
                  {
                    tmpMeta17 = mmc_mk_cons(omc_NFExpression_toString(threadData, _outArg), MMC_REFSTRUCTLIT(mmc_nil));
                    omc_Error_addSourceMessage(threadData, _OMC_LIT128, tmpMeta17, _info);

                    goto goto_13;
                  }
                  tmpMeta12 = _outArg;
                  goto tmp14_done;
                }
                }
                goto tmp14_end;
                tmp14_end: ;
              }
              goto goto_13;
              goto_13:;
              goto goto_2;
              goto tmp14_done;
              tmp14_done:;
            }
          }tmpMeta1 = tmpMeta12;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outArg = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outArg;
}

DLLDirection
void omc_NFTyping_typeFunctionSections(threadData_t *threadData, modelica_metatype _classNode, modelica_integer _context)
{
  modelica_metatype _cls = NULL;
  modelica_metatype _typed_cls = NULL;
  modelica_metatype _sections = NULL;
  modelica_metatype _info = NULL;
  modelica_metatype _alg = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _cls has no default value.
  // _typed_cls has no default value.
  // _sections has no default value.
  // _info has no default value.
  // _alg has no default value.
  _cls = omc_NFInstNode_InstNode_getClass(threadData, _classNode);

  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _cls;
    {
      int tmp3;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
        case 8: {
          modelica_metatype tmpMeta4;
          modelica_metatype tmpMeta5;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,5) == 0) goto tmp2_end;
          tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
          
          _sections = tmpMeta4;
          /* Pattern matching succeeded */
          { /* match expression */
            modelica_metatype tmp8_1;
            tmp8_1 = _sections;
            {
              volatile mmc_switch_type tmp8;
              int tmp9;
              tmp8 = 0;
              for (; tmp8 < 5; tmp8++) {
                switch (MMC_SWITCH_CAST(tmp8)) {
                case 0: {
                  modelica_metatype tmpMeta10;
                  modelica_metatype tmpMeta11;
                  modelica_metatype tmpMeta12;
                  modelica_metatype tmpMeta13;
                  modelica_metatype tmpMeta14;
                  modelica_metatype tmpMeta15;
                  modelica_metatype tmpMeta16;
                  modelica_metatype tmpMeta17;
                  if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,0,4) == 0) goto tmp7_end;
                  tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 2));
                  if (!listEmpty(tmpMeta10)) goto tmp7_end;
                  tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 3));
                  if (!listEmpty(tmpMeta11)) goto tmp7_end;
                  tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 4));
                  if (listEmpty(tmpMeta12)) goto tmp7_end;
                  tmpMeta13 = MMC_CAR(tmpMeta12);
                  tmpMeta14 = MMC_CDR(tmpMeta12);
                  if (!listEmpty(tmpMeta14)) goto tmp7_end;
                  tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 5));
                  if (!listEmpty(tmpMeta15)) goto tmp7_end;
                  _alg = tmpMeta13;
                  /* Pattern matching succeeded */
                  tmpMeta17 = mmc_mk_cons(omc_NFTyping_typeAlgorithm(threadData, _alg, omc_NFInstContext_set(threadData, _context, ((modelica_integer) 64))), MMC_REFSTRUCTLIT(mmc_nil));
                  tmpMeta16 = MMC_TAGPTR(mmc_alloc_words(6));
                  memcpy(MMC_UNTAGPTR(tmpMeta16), MMC_UNTAGPTR(_sections), 6*sizeof(modelica_metatype));
                  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta16))[4] = tmpMeta17;
                  _sections = tmpMeta16;
                  tmpMeta5 = _sections;
                  goto tmp7_done;
                }
                case 1: {
                  modelica_metatype tmpMeta18;
                  if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,0,4) == 0) goto tmp7_end;
                  
                  /* Pattern matching succeeded */
                  tmpMeta18 = mmc_mk_cons(omc_NFInstNode_InstNode_name(threadData, _classNode), MMC_REFSTRUCTLIT(mmc_nil));
                  omc_Error_addSourceMessage(threadData, _OMC_LIT131, tmpMeta18, omc_NFInstNode_InstNode_info(threadData, _classNode));
                  goto goto_6;
                  goto tmp7_done;
                }
                case 2: {
                  modelica_metatype tmpMeta19;
                  modelica_integer tmp20;
                  modelica_metatype tmpMeta21;
                  modelica_metatype tmpMeta22;
                  modelica_metatype tmpMeta26;
                  if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,1,7) == 0) goto tmp7_end;
                  tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 7));
                  tmp20 = mmc_unbox_integer(tmpMeta19);
                  if (1 /* true */ != tmp20) goto tmp7_end;
                  
                  /* Pattern matching succeeded */
                  _info = omc_NFInstNode_InstNode_info(threadData, _classNode);

                  {
                    modelica_metatype __omcQ_24tmpVar23;
                    modelica_metatype* tmp23;
                    modelica_metatype tmpMeta24;
                    modelica_metatype __omcQ_24tmpVar22;
                    modelica_integer tmp25;
                    modelica_metatype _arg_loopVar = 0;
                    modelica_metatype _arg;
                    _arg_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sections), 3)));
                    tmpMeta24 = MMC_REFSTRUCTLIT(mmc_nil);
                    __omcQ_24tmpVar23 = tmpMeta24; /* defaultValue */
                    tmp23 = &__omcQ_24tmpVar23;
                    while(1) {
                      tmp25 = 1;
                      if (!listEmpty(_arg_loopVar)) {
                        _arg = MMC_CAR(_arg_loopVar);
                        _arg_loopVar = MMC_CDR(_arg_loopVar);
                        tmp25--;
                      }
                      if (tmp25 == 0) {
                        __omcQ_24tmpVar22 = omc_NFTyping_typeExternalArg(threadData, _arg, _info, _classNode);
                        *tmp23 = mmc_mk_cons(__omcQ_24tmpVar22,0);
                        tmp23 = &MMC_CDR(*tmp23);
                      } else if (tmp25 == 1) {
                        break;
                      } else {
                        goto goto_6;
                      }
                    }
                    *tmp23 = mmc_mk_nil();
                    tmpMeta22 = __omcQ_24tmpVar23;
                  }
                  tmpMeta21 = MMC_TAGPTR(mmc_alloc_words(9));
                  memcpy(MMC_UNTAGPTR(tmpMeta21), MMC_UNTAGPTR(_sections), 9*sizeof(modelica_metatype));
                  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta21))[3] = tmpMeta22;
                  _sections = tmpMeta21;

                  tmpMeta26 = MMC_TAGPTR(mmc_alloc_words(9));
                  memcpy(MMC_UNTAGPTR(tmpMeta26), MMC_UNTAGPTR(_sections), 9*sizeof(modelica_metatype));
                  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta26))[4] = omc_NFTyping_typeCref(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sections), 4))), _context, _info, NULL, NULL, NULL);
                  _sections = tmpMeta26;

                  omc_NFTyping_checkExternalCallResult(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sections), 4))), _info);
                  tmpMeta5 = _sections;
                  goto tmp7_done;
                }
                case 3: {
                  if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,1,7) == 0) goto tmp7_end;
                  
                  /* Pattern matching succeeded */
                  tmpMeta5 = omc_NFTyping_makeDefaultExternalCall(threadData, _sections, _classNode);
                  goto tmp7_done;
                }
                case 4: {
                  
                  /* Pattern matching succeeded */
                  tmpMeta5 = _sections;
                  goto tmp7_done;
                }
                }
                goto tmp7_end;
                tmp7_end: ;
              }
              goto goto_6;
              goto_6:;
              goto goto_1;
              goto tmp7_done;
              tmp7_done:;
            }
          }
          _sections = tmpMeta5;

          _typed_cls = omc_NFClass_setSections(threadData, _sections, _cls);

          omc_NFInstNode_InstNode_updateClass(threadData, _typed_cls, _classNode);
          goto tmp2_done;
        }
        case 10: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _classNode = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          ;
          goto tmp2_done;
        }
        default:
        tmp2_default: OMC_LABEL_UNUSED; {
          modelica_metatype tmpMeta27;
          
          /* Pattern matching succeeded */
          tmpMeta27 = stringAppend(_OMC_LIT132,omc_NFInstNode_InstNode_name(threadData, _classNode));
          omc_Error_assertion(threadData, 0 /* false */, tmpMeta27, _OMC_LIT133);
          goto goto_1;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return;
}
void boxptr_NFTyping_typeFunctionSections(threadData_t *threadData, modelica_metatype _classNode, modelica_metatype _context)
{
  modelica_integer tmp1;
  tmp1 = mmc_unbox_integer(_context);
  omc_NFTyping_typeFunctionSections(threadData, _classNode, tmp1);
  return;
}

static modelica_metatype closure7_NFTyping_typeEquation(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_eq)
{
  modelica_metatype context = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFTyping_typeEquation(thData, $in_eq, context);
}static modelica_metatype closure8_NFTyping_typeAlgorithm(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_alg)
{
  modelica_metatype context = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFTyping_typeAlgorithm(thData, $in_alg, context);
}static modelica_metatype closure9_NFTyping_typeEquation(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_eq)
{
  modelica_metatype context = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFTyping_typeEquation(thData, $in_eq, context);
}static modelica_metatype closure10_NFTyping_typeAlgorithm(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_alg)
{
  modelica_metatype context = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFTyping_typeAlgorithm(thData, $in_alg, context);
}
DLLDirection
void omc_NFTyping_typeClassSections(threadData_t *threadData, modelica_metatype _classNode, modelica_integer _context)
{
  modelica_metatype _cls = NULL;
  modelica_metatype _typed_cls = NULL;
  modelica_metatype _components = NULL;
  modelica_metatype _sections = NULL;
  modelica_metatype _info = NULL;
  modelica_integer _initial_context;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _cls has no default value.
  // _typed_cls has no default value.
  // _components has no default value.
  // _sections has no default value.
  // _info has no default value.
  // _initial_context has no default value.
  _cls = omc_NFInstNode_InstNode_getClass(threadData, _classNode);

  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _cls;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 5; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,5) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_NFType_isBasic(threadData, omc_NFType_arrayElementType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 2)))))) goto tmp2_end;
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_integer tmp19;
          modelica_integer tmp20;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,5) == 0) goto tmp2_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta5,3,5) == 0) goto tmp2_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 4));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
          
          _components = tmpMeta6;
          _sections = tmpMeta7;
          /* Pattern matching succeeded */
          { /* match expression */
            modelica_metatype tmp11_1;
            tmp11_1 = _sections;
            {
              int tmp11;
              {
                switch (MMC_SWITCH_CAST(valueConstructor(tmp11_1))) {
                case 3: {
                  modelica_metatype tmpMeta12;
                  modelica_metatype tmpMeta13;
                  modelica_metatype tmpMeta14;
                  modelica_metatype tmpMeta15;
                  
                  /* Pattern matching succeeded */
                  _initial_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 256));
                  tmpMeta12 = mmc_mk_box1(0, mmc_mk_integer(omc_NFInstContext_set(threadData, _context, ((modelica_integer) 128))));
                  tmpMeta13 = mmc_mk_box1(0, mmc_mk_integer(omc_NFInstContext_set(threadData, _context, ((modelica_integer) 64))));
                  tmpMeta14 = mmc_mk_box1(0, mmc_mk_integer(omc_NFInstContext_set(threadData, _initial_context, ((modelica_integer) 128))));
                  tmpMeta15 = mmc_mk_box1(0, mmc_mk_integer(omc_NFInstContext_set(threadData, _initial_context, ((modelica_integer) 64))));
                  tmpMeta8 = omc_NFSections_map(threadData, _sections, (modelica_fnptr) mmc_mk_box2(0,closure7_NFTyping_typeEquation,tmpMeta12), (modelica_fnptr) mmc_mk_box2(0,closure8_NFTyping_typeAlgorithm,tmpMeta13), (modelica_fnptr) mmc_mk_box2(0,closure9_NFTyping_typeEquation,tmpMeta14), (modelica_fnptr) mmc_mk_box2(0,closure10_NFTyping_typeAlgorithm,tmpMeta15));
                  goto tmp10_done;
                }
                case 4: {
                  modelica_metatype tmpMeta16;
                  
                  /* Pattern matching succeeded */
                  tmpMeta16 = mmc_mk_cons(omc_NFInstNode_InstNode_name(threadData, _classNode), mmc_mk_cons(omc_NFRestriction_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 6)))), mmc_mk_cons(_OMC_LIT137, MMC_REFSTRUCTLIT(mmc_nil))));
                  omc_Error_addSourceMessage(threadData, _OMC_LIT136, tmpMeta16, omc_NFInstNode_InstNode_info(threadData, _classNode));
                  goto goto_9;
                  goto tmp10_done;
                }
                default:
                tmp10_default: OMC_LABEL_UNUSED; {
                  
                  /* Pattern matching succeeded */
                  tmpMeta8 = _sections;
                  goto tmp10_done;
                }
                }
                goto tmp10_end;
                tmp10_end: ;
              }
              goto goto_9;
              goto_9:;
              goto goto_1;
              goto tmp10_done;
              tmp10_done:;
            }
          }
          _sections = tmpMeta8;

          _typed_cls = omc_NFClass_setSections(threadData, _sections, _cls);

          {
            modelica_metatype _c;
            for (tmpMeta17 = _components, tmp20 = arrayLength(tmpMeta17), tmp19 = 1; tmp19 <= tmp20; tmp19++)
            {
              _c = arrayGet(tmpMeta17,tmp19);
              omc_NFTyping_typeComponentSections(threadData, omc_NFInstNode_InstNode_resolveOuter(threadData, _c), _context);
            }
          }

          omc_NFInstNode_InstNode_updateClass(threadData, _typed_cls, _classNode);
          goto tmp2_done;
        }
        case 2: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,3) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        case 3: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _classNode = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          ;
          goto tmp2_done;
        }
        case 4: {
          modelica_metatype tmpMeta21;
          
          /* Pattern matching succeeded */
          tmpMeta21 = stringAppend(_OMC_LIT138,omc_NFInstNode_InstNode_name(threadData, _classNode));
          omc_Error_assertion(threadData, 0 /* false */, tmpMeta21, _OMC_LIT139);
          goto goto_1;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return;
}
void boxptr_NFTyping_typeClassSections(threadData_t *threadData, modelica_metatype _classNode, modelica_metatype _context)
{
  modelica_integer tmp1;
  tmp1 = mmc_unbox_integer(_context);
  omc_NFTyping_typeClassSections(threadData, _classNode, tmp1);
  return;
}

static modelica_metatype closure11_NFExpression_isCallNamed(threadData_t *thData, modelica_metatype closure, modelica_metatype exp)
{
  modelica_string name = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_isCallNamed(thData, exp, name);
}static modelica_metatype closure12_NFExpression_isCallNamed(threadData_t *thData, modelica_metatype closure, modelica_metatype exp)
{
  modelica_string name = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_isCallNamed(thData, exp, name);
}
DLLDirection
modelica_metatype omc_NFTyping_typeIfExpression(threadData_t *threadData, modelica_metatype __omcQ_24in_5FifExp, modelica_integer _context, modelica_metatype _info, modelica_metatype *out_ty, modelica_integer *out_var, modelica_integer *out_purity)
{
  modelica_metatype _ifExp = NULL;
  modelica_metatype _ty = NULL;
  modelica_integer _var;
  modelica_integer _purity;
  modelica_metatype _cond = NULL;
  modelica_metatype _tb = NULL;
  modelica_metatype _fb = NULL;
  modelica_metatype _tb2 = NULL;
  modelica_metatype _fb2 = NULL;
  modelica_integer _next_context;
  modelica_metatype _cond_ty = NULL;
  modelica_metatype _tb_ty = NULL;
  modelica_metatype _fb_ty = NULL;
  modelica_integer _cond_var;
  modelica_integer _tb_var;
  modelica_integer _fb_var;
  modelica_integer _cond_pur;
  modelica_integer _tb_pur;
  modelica_integer _fb_pur;
  modelica_integer _ty_match;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _ifExp = __omcQ_24in_5FifExp;
  // _ty has no default value.
  // _var has no default value.
  // _purity has no default value.
  // _cond has no default value.
  // _tb has no default value.
  // _fb has no default value.
  // _tb2 has no default value.
  // _fb2 has no default value.
  // _next_context has no default value.
  // _cond_ty has no default value.
  // _tb_ty has no default value.
  // _fb_ty has no default value.
  // _cond_var has no default value.
  // _tb_var has no default value.
  // _fb_var has no default value.
  // _cond_pur has no default value.
  // _tb_pur has no default value.
  // _fb_pur has no default value.
  // _ty_match has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _ifExp;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,22,4) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 4));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 5));
  _cond = tmpMeta2;
  _tb = tmpMeta3;
  _fb = tmpMeta4;

  _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 4194304));

  _cond = omc_NFTyping_typeExp(threadData, _cond, _next_context, _info, 0 /* false */ ,&_cond_ty ,&_cond_var ,&_cond_pur);

  _cond = omc_NFTypeCheck_matchTypes(threadData, _cond_ty, _OMC_LIT80, _cond, ((modelica_integer) 0) ,NULL ,&_ty_match);

  if(omc_NFTypeCheck_isIncompatibleMatch(threadData, (modelica_integer)_ty_match))
  {
    tmpMeta5 = mmc_mk_cons(omc_NFExpression_toString(threadData, _cond), mmc_mk_cons(omc_NFType_toString(threadData, _cond_ty), MMC_REFSTRUCTLIT(mmc_nil)));
    omc_Error_addSourceMessage(threadData, _OMC_LIT47, tmpMeta5, _info);

    MMC_THROW_INTERNAL();
  }

  _tb = omc_NFTyping_typeExp(threadData, _tb, _next_context, _info, 0 /* false */ ,&_tb_ty ,&_tb_var ,&_tb_pur);

  _fb = omc_NFTyping_typeExp(threadData, _fb, _next_context, _info, 0 /* false */ ,&_fb_ty ,&_fb_var ,&_fb_pur);

  _tb2 = omc_NFTypeCheck_matchIfBranches(threadData, _tb, _tb_ty, _fb, _fb_ty, ((modelica_integer) 0) ,&_fb2 ,&_ty ,&_ty_match);

  if(omc_NFTypeCheck_isIncompatibleMatch(threadData, (modelica_integer)_ty_match))
  {
    tmpMeta6 = mmc_mk_cons(_OMC_LIT27, mmc_mk_cons(omc_NFExpression_toString(threadData, _tb), mmc_mk_cons(omc_NFType_toString(threadData, _tb_ty), mmc_mk_cons(omc_NFExpression_toString(threadData, _fb), mmc_mk_cons(omc_NFType_toString(threadData, _fb_ty), MMC_REFSTRUCTLIT(mmc_nil))))));
    omc_Error_addSourceMessage(threadData, _OMC_LIT142, tmpMeta6, _info);

    MMC_THROW_INTERNAL();
  }

  tmpMeta7 = mmc_mk_box1(0, _OMC_LIT143);
  tmpMeta8 = mmc_mk_box1(0, _OMC_LIT143);
  if(((!omc_NFExpression_contains(threadData, _tb2, (modelica_fnptr) mmc_mk_box2(0,closure11_NFExpression_isCallNamed,tmpMeta7)) != !omc_NFExpression_contains(threadData, _fb2, (modelica_fnptr) mmc_mk_box2(0,closure12_NFExpression_isCallNamed,tmpMeta8))) && (stringEqual(omc_Flags_getConfigString(threadData, _OMC_LIT161), _OMC_LIT146))))
  {
    omc_NFStructural_markExp(threadData, _cond);
  }

  tmpMeta9 = mmc_mk_box5(25, &NFExpression_IF__desc, _ty, _cond, _tb2, _fb2);
  _ifExp = tmpMeta9;

  _var = omc_NFPrefixes_variabilityMax(threadData, (modelica_integer)_cond_var, omc_NFPrefixes_variabilityMax(threadData, (modelica_integer)_tb_var, (modelica_integer)_fb_var));

  _purity = omc_NFPrefixes_purityMin(threadData, (modelica_integer)_cond_pur, omc_NFPrefixes_purityMin(threadData, (modelica_integer)_tb_pur, (modelica_integer)_fb_pur));
  _return: OMC_LABEL_UNUSED
  if (out_ty) { *out_ty = _ty; }
  if (out_var) { *out_var = _var; }
  if (out_purity) { *out_purity = _purity; }
  return _ifExp;
}
modelica_metatype boxptr_NFTyping_typeIfExpression(threadData_t *threadData, modelica_metatype __omcQ_24in_5FifExp, modelica_metatype _context, modelica_metatype _info, modelica_metatype *out_ty, modelica_metatype *out_var, modelica_metatype *out_purity)
{
  modelica_integer tmp1;
  modelica_integer _var;
  modelica_integer _purity;
  modelica_metatype _ifExp = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _ifExp = omc_NFTyping_typeIfExpression(threadData, __omcQ_24in_5FifExp, tmp1, _info, out_ty, &_var, &_purity);
  /* skip box _ifExp; NFExpression */
  /* skip box _ty; NFType */
  if (out_var) { *out_var = mmc_mk_icon(_var); }
  if (out_purity) { *out_purity = mmc_mk_icon(_purity); }
  return _ifExp;
}

static modelica_metatype closure13_NFTyping_evaluateEnd(threadData_t *thData, modelica_metatype closure, modelica_metatype exp)
{
  modelica_metatype dim = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype subscriptedExp = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  modelica_metatype index = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),3));
  modelica_metatype context = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),4));
  modelica_metatype info = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),5));
  return boxptr_NFTyping_evaluateEnd(thData, exp, dim, subscriptedExp, index, context, info);
}
DLLDirection
modelica_metatype omc_NFTyping_evaluateEnd(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _dim, modelica_metatype _subscriptedExp, modelica_integer _index, modelica_integer _context, modelica_metatype _info)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 18: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFDimension_endExp(threadData, _dim, _subscriptedExp, _index);
          goto tmp3_done;
        }
        case 9: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          tmpMeta5 = mmc_mk_box5(0, _dim, _subscriptedExp, mmc_mk_integer(_index), mmc_mk_integer(_context), _info);
          tmpMeta1 = omc_NFExpression_mapShallow(threadData, _exp, (modelica_fnptr) mmc_mk_box2(0,closure13_NFTyping_evaluateEnd,tmpMeta5));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}
modelica_metatype boxptr_NFTyping_evaluateEnd(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _dim, modelica_metatype _subscriptedExp, modelica_metatype _index, modelica_metatype _context, modelica_metatype _info)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_index);
  tmp2 = mmc_unbox_integer(_context);
  _outExp = omc_NFTyping_evaluateEnd(threadData, _exp, _dim, _subscriptedExp, tmp1, tmp2, _info);
  /* skip box _outExp; NFExpression */
  return _outExp;
}

DLLDirection
void omc_NFTyping_checkSizeTypingError(threadData_t *threadData, modelica_metatype _typingError, modelica_metatype _exp, modelica_integer _index, modelica_metatype _info)
{
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _typingError;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 3; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,0) == 0) goto tmp2_end;
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta5;
          modelica_integer tmp6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
          tmp6 = mmc_unbox_integer(tmpMeta5);
          if (0 != tmp6) goto tmp2_end;
          /* Pattern matching succeeded */
          omc_Error_addSourceMessage(threadData, _OMC_LIT164, _OMC_LIT166, _info);
          goto goto_1;
          goto tmp2_done;
        }
        case 2: {
          modelica_metatype tmpMeta7;
          modelica_string tmp8;
          modelica_string tmp9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          tmp8 = modelica_integer_to_modelica_string(_index, ((modelica_integer) 0), 1 /* true */);
          tmp9 = modelica_integer_to_modelica_string(mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_typingError), 2)))), ((modelica_integer) 0), 1 /* true */);
          tmpMeta7 = mmc_mk_cons(tmp8, mmc_mk_cons(omc_NFExpression_toString(threadData, _exp), mmc_mk_cons(tmp9, MMC_REFSTRUCTLIT(mmc_nil))));
          omc_Error_addSourceMessage(threadData, _OMC_LIT169, tmpMeta7, _info);
          goto goto_1;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return;
}
void boxptr_NFTyping_checkSizeTypingError(threadData_t *threadData, modelica_metatype _typingError, modelica_metatype _exp, modelica_metatype _index, modelica_metatype _info)
{
  modelica_integer tmp1;
  tmp1 = mmc_unbox_integer(_index);
  omc_NFTyping_checkSizeTypingError(threadData, _typingError, _exp, tmp1, _info);
  return;
}

DLLDirection
modelica_metatype omc_NFTyping_typeSize(threadData_t *threadData, modelica_metatype __omcQ_24in_5FsizeExp, modelica_integer _context, modelica_metatype _info, modelica_boolean _evaluate, modelica_metatype *out_sizeType, modelica_integer *out_variability, modelica_integer *out_purity)
{
  modelica_metatype _sizeExp = NULL;
  modelica_metatype _sizeType = NULL;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _exp = NULL;
  modelica_metatype _index = NULL;
  modelica_metatype _exp_ty = NULL;
  modelica_metatype _index_ty = NULL;
  modelica_integer _ty_match;
  modelica_integer _iindex;
  modelica_integer _dim_size;
  modelica_metatype _dim = NULL;
  modelica_metatype _ty_err = NULL;
  modelica_metatype _oexp = NULL;
  modelica_integer _next_context;
  modelica_metatype _expl = NULL;
  modelica_integer tmp1_c2 __attribute__((unused)) = 0;
  modelica_integer tmp1_c3 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _sizeExp = __omcQ_24in_5FsizeExp;
  // _sizeType has no default value.
  // _variability has no default value.
  // _purity has no default value.
  // _exp has no default value.
  // _index has no default value.
  // _exp_ty has no default value.
  // _index_ty has no default value.
  // _ty_match has no default value.
  // _iindex has no default value.
  // _dim_size has no default value.
  // _dim has no default value.
  // _ty_err has no default value.
  // _oexp has no default value.
  _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 4194304));
  // _expl has no default value.
  
  
  
  
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _sizeExp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_integer tmp12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (optionNone(tmpMeta7)) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
          _exp = tmpMeta6;
          _index = tmpMeta8;
          /* Pattern matching succeeded */
          _index = omc_NFTyping_typeExp(threadData, _index, _next_context, _info, 0 /* false */ ,&_index_ty ,&_variability ,&_purity);

          _index = omc_NFTypeCheck_matchTypes(threadData, _index_ty, _OMC_LIT170, _index, ((modelica_integer) 0) ,NULL ,&_ty_match);

          if(omc_NFTypeCheck_isIncompatibleMatch(threadData, (modelica_integer)_ty_match))
          {
            tmpMeta9 = mmc_mk_cons(_OMC_LIT25, mmc_mk_cons(_OMC_LIT171, mmc_mk_cons(_OMC_LIT172, mmc_mk_cons(omc_NFExpression_toString(threadData, _index), mmc_mk_cons(omc_NFType_toString(threadData, _index_ty), mmc_mk_cons(_OMC_LIT173, MMC_REFSTRUCTLIT(mmc_nil)))))));
            omc_Error_addSourceMessage(threadData, _OMC_LIT24, tmpMeta9, _info);

            goto goto_2;
          }

          if((((modelica_integer)_variability <= 2) && ((modelica_integer)_purity == 1)))
          {
            _index = omc_NFCeval_evalExp(threadData, _index, _OMC_LIT176);

            /* Pattern-matching assignment */
            tmpMeta10 = _index;
            if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,0,1) == 0) goto goto_2;
            tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
            tmp12 = mmc_unbox_integer(tmpMeta11);
            _iindex = tmp12  /* pattern as ty=Integer */;

            _dim = omc_NFTyping_typeExpDim(threadData, _exp, _iindex, _next_context, _info ,&_oexp ,&_ty_err);

            omc_NFTyping_checkSizeTypingError(threadData, _ty_err, _exp, _iindex, _info);

            if((omc_NFDimension_isKnown(threadData, _dim, 0 /* false */) && _evaluate))
            {
              _exp = omc_NFDimension_sizeExp(threadData, _dim);
            }
            else
            {
              if(isSome(_oexp))
              {
                /* Pattern-matching assignment */
                tmpMeta13 = _oexp;
                if (optionNone(tmpMeta13)) goto goto_2;
                tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 1));
                _exp = tmpMeta14;
              }
              else
              {
                _exp = omc_NFTyping_typeExp(threadData, _exp, _next_context, _info, 0 /* false */, NULL, NULL, NULL);
              }

              tmpMeta15 = mmc_mk_box3(17, &NFExpression_SIZE__desc, _exp, mmc_mk_some(_index));
              _exp = tmpMeta15;
            }

            if(((!omc_NFInstContext_inFunction(threadData, _context)) || omc_NFDimension_isKnown(threadData, _dim, 0 /* false */)))
            {
              _variability = 1;
            }
            else
            {
              _variability = 5;

              _purity = 2;
            }
          }
          else
          {
            _exp = omc_NFTyping_typeExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sizeExp), 2))), _next_context, _info, 0 /* false */ ,&_exp_ty ,NULL ,&_purity);

            if((!omc_NFType_isArray(threadData, _exp_ty)))
            {
              omc_Error_addSourceMessage(threadData, _OMC_LIT164, _OMC_LIT166, _info);

              goto goto_2;
            }

            if((omc_NFType_isEmptyArray(threadData, _exp_ty) && (!omc_NFInstContext_inFunction(threadData, _context))))
            {
              _expl = omc_Array_mapList(threadData, omc_NFType_arrayDims(threadData, _exp_ty), boxvar_NFDimension_sizeExp);

              _exp = omc_NFExpression_makeExpArray(threadData, _expl, _OMC_LIT170, 0 /* false */);

              tmpMeta16 = mmc_mk_cons(omc_NFSubscript_makeIndex(threadData, _index), MMC_REFSTRUCTLIT(mmc_nil));
              _exp = omc_NFExpression_makeSubscriptedExp(threadData, tmpMeta16, _exp, 0 /* false */);
            }
            else
            {
              tmpMeta17 = mmc_mk_box3(17, &NFExpression_SIZE__desc, _exp, mmc_mk_some(_index));
              _exp = tmpMeta17;
            }
          }
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = _OMC_LIT170;
          tmp1_c2 = (modelica_integer)_variability;
          tmp1_c3 = (modelica_integer)_purity;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta18;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _exp = omc_NFTyping_typeExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sizeExp), 2))), _next_context, _info, 0 /* false */ ,&_exp_ty ,NULL, NULL);

          _sizeType = omc_NFType_sizeType(threadData, _exp_ty);
          tmpMeta18 = mmc_mk_box3(17, &NFExpression_SIZE__desc, _exp, mmc_mk_none());
          tmpMeta[0+0] = tmpMeta18;
          tmpMeta[0+1] = _sizeType;
          tmp1_c2 = 3;
          tmp1_c3 = 1;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _sizeExp = tmpMeta[0+0];
  _sizeType = tmpMeta[0+1];
  _variability = tmp1_c2;
  _purity = tmp1_c3;
  _return: OMC_LABEL_UNUSED
  if (out_sizeType) { *out_sizeType = _sizeType; }
  if (out_variability) { *out_variability = _variability; }
  if (out_purity) { *out_purity = _purity; }
  return _sizeExp;
}
modelica_metatype boxptr_NFTyping_typeSize(threadData_t *threadData, modelica_metatype __omcQ_24in_5FsizeExp, modelica_metatype _context, modelica_metatype _info, modelica_metatype _evaluate, modelica_metatype *out_sizeType, modelica_metatype *out_variability, modelica_metatype *out_purity)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _sizeExp = NULL;
  tmp1 = mmc_unbox_integer(_context);
  tmp2 = mmc_unbox_integer(_evaluate);
  _sizeExp = omc_NFTyping_typeSize(threadData, __omcQ_24in_5FsizeExp, tmp1, _info, tmp2, out_sizeType, &_variability, &_purity);
  /* skip box _sizeExp; NFExpression */
  /* skip box _sizeType; NFType */
  if (out_variability) { *out_variability = mmc_mk_icon(_variability); }
  if (out_purity) { *out_purity = mmc_mk_icon(_purity); }
  return _sizeExp;
}

DLLDirection
void omc_NFTyping_printRangeTypeError(threadData_t *threadData, modelica_metatype _exp1, modelica_metatype _ty1, modelica_metatype _exp2, modelica_metatype _ty2, modelica_metatype _info)
{
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = mmc_mk_cons(omc_NFExpression_toString(threadData, _exp1), mmc_mk_cons(omc_NFType_toString(threadData, _ty1), mmc_mk_cons(omc_NFExpression_toString(threadData, _exp2), mmc_mk_cons(omc_NFType_toString(threadData, _ty2), MMC_REFSTRUCTLIT(mmc_nil)))));
  omc_Error_addSourceMessage(threadData, _OMC_LIT179, tmpMeta1, _info);

  MMC_THROW_INTERNAL();
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
modelica_metatype omc_NFTyping_typeTuple(threadData_t *threadData, modelica_metatype _elements, modelica_integer _context, modelica_metatype _info, modelica_metatype *out_tupleType, modelica_integer *out_variability, modelica_integer *out_purity)
{
  modelica_metatype _tupleExp = NULL;
  modelica_metatype _tupleType = NULL;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _expl = NULL;
  modelica_metatype _tyl = NULL;
  modelica_metatype _valr = NULL;
  modelica_integer _next_context;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _tupleExp has no default value.
  // _tupleType has no default value.
  // _variability has no default value.
  _purity = 1;
  // _expl has no default value.
  // _tyl has no default value.
  // _valr has no default value.
  // _next_context has no default value.
  if(((!omc_NFInstContext_onLHS(threadData, _context)) || omc_NFInstContext_inSubexpression(threadData, _context)))
  {
    tmpMeta2 = mmc_mk_box3(14, &NFExpression_TUPLE__desc, _OMC_LIT8, _elements);
    tmpMeta1 = mmc_mk_cons(omc_NFExpression_toString(threadData, tmpMeta2), MMC_REFSTRUCTLIT(mmc_nil));
    omc_Error_addSourceMessage(threadData, _OMC_LIT182, tmpMeta1, _info);

    MMC_THROW_INTERNAL();
  }

  _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 4194304));

  _expl = omc_NFTyping_typeExpl(threadData, _elements, _next_context, _info ,&_tyl ,&_valr);

  tmpMeta3 = mmc_mk_box3(11, &NFType_TUPLE__desc, _tyl, mmc_mk_none());
  _tupleType = tmpMeta3;

  tmpMeta4 = mmc_mk_box3(14, &NFExpression_TUPLE__desc, _tupleType, _expl);
  _tupleExp = tmpMeta4;

  if((!omc_List_all(threadData, _expl, boxvar_NFExpression_isCref)))
  {
    tmpMeta5 = mmc_mk_cons(omc_NFExpression_toString(threadData, _tupleExp), MMC_REFSTRUCTLIT(mmc_nil));
    omc_Error_addSourceMessage(threadData, _OMC_LIT185, tmpMeta5, _info);

    MMC_THROW_INTERNAL();
  }

  _variability = (listEmpty(_valr)?1:mmc_unbox_integer(listHead(_valr)));
  _return: OMC_LABEL_UNUSED
  if (out_tupleType) { *out_tupleType = _tupleType; }
  if (out_variability) { *out_variability = _variability; }
  if (out_purity) { *out_purity = _purity; }
  return _tupleExp;
}
modelica_metatype boxptr_NFTyping_typeTuple(threadData_t *threadData, modelica_metatype _elements, modelica_metatype _context, modelica_metatype _info, modelica_metatype *out_tupleType, modelica_metatype *out_variability, modelica_metatype *out_purity)
{
  modelica_integer tmp1;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _tupleExp = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _tupleExp = omc_NFTyping_typeTuple(threadData, _elements, tmp1, _info, out_tupleType, &_variability, &_purity);
  /* skip box _tupleExp; NFExpression */
  /* skip box _tupleType; NFType */
  if (out_variability) { *out_variability = mmc_mk_icon(_variability); }
  if (out_purity) { *out_purity = mmc_mk_icon(_purity); }
  return _tupleExp;
}

DLLDirection
modelica_metatype omc_NFTyping_typeRange(threadData_t *threadData, modelica_metatype __omcQ_24in_5FrangeExp, modelica_integer _context, modelica_metatype _info, modelica_metatype *out_rangeType, modelica_integer *out_variability, modelica_integer *out_purity)
{
  modelica_metatype _rangeExp = NULL;
  modelica_metatype _rangeType = NULL;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _start_exp = NULL;
  modelica_metatype _step_exp = NULL;
  modelica_metatype _stop_exp = NULL;
  modelica_metatype _start_ty = NULL;
  modelica_metatype _step_ty = NULL;
  modelica_metatype _stop_ty = NULL;
  modelica_metatype _ostep_exp = NULL;
  modelica_metatype _ostep_ty = NULL;
  modelica_integer _start_var;
  modelica_integer _step_var;
  modelica_integer _stop_var;
  modelica_integer _start_pur;
  modelica_integer _step_pur;
  modelica_integer _stop_pur;
  modelica_integer _ty_match;
  modelica_integer _next_context;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _rangeExp = __omcQ_24in_5FrangeExp;
  // _rangeType has no default value.
  // _variability has no default value.
  // _purity has no default value.
  // _start_exp has no default value.
  // _step_exp has no default value.
  // _stop_exp has no default value.
  // _start_ty has no default value.
  // _step_ty has no default value.
  // _stop_ty has no default value.
  // _ostep_exp has no default value.
  // _ostep_ty has no default value.
  // _start_var has no default value.
  // _step_var has no default value.
  // _stop_var has no default value.
  // _start_pur has no default value.
  // _step_pur has no default value.
  // _stop_pur has no default value.
  // _ty_match has no default value.
  _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 4194304));
  /* Pattern-matching assignment */
  tmpMeta1 = _rangeExp;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,10,4) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 4));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 5));
  _start_exp = tmpMeta2;
  _ostep_exp = tmpMeta3;
  _stop_exp = tmpMeta4;

  _start_exp = omc_NFTyping_typeExp(threadData, _start_exp, _next_context, _info, 0 /* false */ ,&_start_ty ,&_start_var ,&_start_pur);

  _stop_exp = omc_NFTyping_typeExp(threadData, _stop_exp, _next_context, _info, 0 /* false */ ,&_stop_ty ,&_stop_var ,&_stop_pur);

  _variability = omc_NFPrefixes_variabilityMax(threadData, (modelica_integer)_start_var, (modelica_integer)_stop_var);

  _purity = omc_NFPrefixes_purityMin(threadData, (modelica_integer)_start_pur, (modelica_integer)_stop_pur);

  _start_exp = omc_NFTypeCheck_matchExpressions(threadData, _start_exp, _start_ty, _stop_exp, _stop_ty, ((modelica_integer) 0) ,&_stop_exp ,&_rangeType ,&_ty_match);

  if(omc_NFTypeCheck_isIncompatibleMatch(threadData, (modelica_integer)_ty_match))
  {
    omc_NFTyping_printRangeTypeError(threadData, _start_exp, _start_ty, _stop_exp, _stop_ty, _info);
  }

  if(isSome(_ostep_exp))
  {
    /* Pattern-matching assignment */
    tmpMeta5 = _ostep_exp;
    if (optionNone(tmpMeta5)) MMC_THROW_INTERNAL();
    tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 1));
    _step_exp = tmpMeta6;

    _step_exp = omc_NFTyping_typeExp(threadData, _step_exp, _next_context, _info, 0 /* false */ ,&_step_ty ,&_step_var ,&_step_pur);

    _variability = omc_NFPrefixes_variabilityMax(threadData, (modelica_integer)_step_var, (modelica_integer)_variability);

    _purity = omc_NFPrefixes_purityMin(threadData, (modelica_integer)_step_pur, (modelica_integer)_purity);

    _start_exp = omc_NFTypeCheck_matchExpressions(threadData, _start_exp, _start_ty, _step_exp, _step_ty, ((modelica_integer) 0) ,&_step_exp ,&_rangeType ,&_ty_match);

    if(omc_NFTypeCheck_isIncompatibleMatch(threadData, (modelica_integer)_ty_match))
    {
      omc_NFTyping_printRangeTypeError(threadData, _start_exp, _start_ty, _step_exp, _step_ty, _info);
    }

    _stop_exp = omc_NFTypeCheck_matchTypes__cast(threadData, _stop_ty, _rangeType, _stop_exp, ((modelica_integer) 0), NULL, NULL);

    _ostep_exp = mmc_mk_some(_step_exp);

    _ostep_ty = mmc_mk_some(_step_ty);
  }
  else
  {
    _ostep_exp = mmc_mk_none();

    _ostep_ty = mmc_mk_none();
  }

  _rangeType = omc_NFTypeCheck_getRangeType(threadData, _start_exp, _ostep_exp, _stop_exp, _rangeType, _info);

  tmpMeta7 = mmc_mk_box5(13, &NFExpression_RANGE__desc, _rangeType, _start_exp, _ostep_exp, _stop_exp);
  _rangeExp = tmpMeta7;

  if(((((modelica_integer)_variability <= 3) && ((modelica_integer)_purity == 1)) && (!omc_NFInstContext_inFunction(threadData, _context))))
  {
    omc_NFStructural_markExp(threadData, _rangeExp);
  }
  _return: OMC_LABEL_UNUSED
  if (out_rangeType) { *out_rangeType = _rangeType; }
  if (out_variability) { *out_variability = _variability; }
  if (out_purity) { *out_purity = _purity; }
  return _rangeExp;
}
modelica_metatype boxptr_NFTyping_typeRange(threadData_t *threadData, modelica_metatype __omcQ_24in_5FrangeExp, modelica_metatype _context, modelica_metatype _info, modelica_metatype *out_rangeType, modelica_metatype *out_variability, modelica_metatype *out_purity)
{
  modelica_integer tmp1;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _rangeExp = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _rangeExp = omc_NFTyping_typeRange(threadData, __omcQ_24in_5FrangeExp, tmp1, _info, out_rangeType, &_variability, &_purity);
  /* skip box _rangeExp; NFExpression */
  /* skip box _rangeType; NFType */
  if (out_variability) { *out_variability = mmc_mk_icon(_variability); }
  if (out_purity) { *out_purity = mmc_mk_icon(_purity); }
  return _rangeExp;
}

DLLDirection
modelica_metatype omc_NFTyping_typeMatrixComma(threadData_t *threadData, modelica_metatype _elements, modelica_integer _context, modelica_metatype _info, modelica_metatype *out_arrayType, modelica_integer *out_variability, modelica_integer *out_purity)
{
  modelica_metatype _arrayExp = NULL;
  modelica_metatype _arrayType = NULL;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _exp = NULL;
  modelica_metatype _expl = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _res = NULL;
  modelica_metatype tmpMeta2;
  modelica_integer _var;
  modelica_integer _pur;
  modelica_metatype _ty = NULL;
  modelica_metatype _ty1 = NULL;
  modelica_metatype _ty2 = NULL;
  modelica_metatype _ty3 = NULL;
  modelica_metatype _tys = NULL;
  modelica_metatype tmpMeta3;
  modelica_metatype _tys2 = NULL;
  modelica_integer _n;
  modelica_integer _pos;
  modelica_integer _mk;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_string tmp15;
  modelica_metatype tmpMeta16;
  modelica_metatype tmpMeta17;
  modelica_metatype tmpMeta18;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _arrayExp has no default value.
  // _arrayType has no default value.
  _variability = 1;
  _purity = 1;
  // _exp has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _expl = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _res = tmpMeta2;
  // _var has no default value.
  // _pur has no default value.
  _ty = _OMC_LIT8;
  // _ty1 has no default value.
  // _ty2 has no default value.
  // _ty3 has no default value.
  tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
  _tys = tmpMeta3;
  // _tys2 has no default value.
  _n = ((modelica_integer) 2);
  // _pos has no default value.
  // _mk has no default value.
  omc_Error_assertion(threadData, (!listEmpty(_elements)), _OMC_LIT186, _OMC_LIT187);

  if((listLength(_elements) > ((modelica_integer) 1)))
  {
    {
      modelica_metatype _e;
      for (tmpMeta4 = _elements; !listEmpty(tmpMeta4); tmpMeta4=MMC_CDR(tmpMeta4))
      {
        _e = MMC_CAR(tmpMeta4);
        _exp = omc_NFTyping_typeExp(threadData, _e, _context, _info, 0 /* false */ ,&_ty1 ,&_var ,&_pur);

        tmpMeta5 = mmc_mk_cons(_exp, _expl);
        _expl = tmpMeta5;

        if(omc_NFType_isEqual(threadData, _ty, _OMC_LIT8))
        {
          _ty = _ty1;
        }
        else
        {
          omc_NFTypeCheck_matchExpressions(threadData, _OMC_LIT188, omc_NFType_arrayElementType(threadData, _ty1), _OMC_LIT188, omc_NFType_arrayElementType(threadData, _ty), ((modelica_integer) 0) ,NULL ,&_ty2 ,&_mk);

          if(omc_NFTypeCheck_isCompatibleMatch(threadData, (modelica_integer)_mk))
          {
            _ty = _ty2;
          }
        }

        tmpMeta6 = mmc_mk_cons(_ty1, _tys);
        _tys = tmpMeta6;

        _variability = omc_NFPrefixes_variabilityMax(threadData, (modelica_integer)_variability, (modelica_integer)_var);

        _purity = omc_NFPrefixes_purityMin(threadData, (modelica_integer)_purity, (modelica_integer)_pur);

        _n = modelica_integer_max((modelica_integer)(_n),(modelica_integer)(omc_NFType_dimensionCount(threadData, _ty)));
      }
    }

    tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
    _tys2 = tmpMeta8;

    tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
    _res = tmpMeta9;

    _pos = ((modelica_integer) 1) + _n;

    {
      modelica_metatype _e;
      for (tmpMeta10 = _expl; !listEmpty(tmpMeta10); tmpMeta10=MMC_CDR(tmpMeta10))
      {
        _e = MMC_CAR(tmpMeta10);
        /* Pattern-matching assignment */
        tmpMeta11 = _tys;
        if (listEmpty(tmpMeta11)) MMC_THROW_INTERNAL();
        tmpMeta12 = MMC_CAR(tmpMeta11);
        tmpMeta13 = MMC_CDR(tmpMeta11);
        _ty1 = tmpMeta12;
        _tys = tmpMeta13;

        _pos = ((modelica_integer) -1) + _pos;

        if((omc_NFType_dimensionCount(threadData, _ty1) != _n))
        {
          _e = omc_NFExpression_promote(threadData, _e, _ty1, _n ,&_ty1);
        }

        _ty2 = omc_NFType_setArrayElementType(threadData, _ty1, _ty);

        _e = omc_NFTypeCheck_matchTypes(threadData, _ty1, _ty2, _e, ((modelica_integer) 0) ,&_ty3 ,&_mk);

        if(omc_NFTypeCheck_isIncompatibleMatch(threadData, (modelica_integer)_mk))
        {
          tmp15 = modelica_integer_to_modelica_string(_pos, ((modelica_integer) 0), 1 /* true */);
          tmpMeta14 = mmc_mk_cons(tmp15, mmc_mk_cons(_OMC_LIT189, mmc_mk_cons(_OMC_LIT190, mmc_mk_cons(omc_NFExpression_toString(threadData, _e), mmc_mk_cons(omc_NFType_toString(threadData, _ty1), mmc_mk_cons(omc_NFType_toString(threadData, _ty2), MMC_REFSTRUCTLIT(mmc_nil)))))));
          omc_Error_addSourceMessageAndFail(threadData, _OMC_LIT24, tmpMeta14, _info);
        }

        tmpMeta16 = mmc_mk_cons(_e, _res);
        _res = tmpMeta16;

        tmpMeta17 = mmc_mk_cons(_ty3, _tys2);
        _tys2 = tmpMeta17;
      }
    }

    _arrayExp = omc_NFBuiltinCall_makeCatExp(threadData, ((modelica_integer) 2), _res, _tys2, (modelica_integer)_variability, (modelica_integer)_purity, _info ,&_arrayType);
  }
  else
  {
    _arrayExp = omc_NFTyping_typeExp(threadData, listHead(_elements), _context, _info, 0 /* false */ ,&_arrayType ,&_variability, NULL);
  }
  _return: OMC_LABEL_UNUSED
  if (out_arrayType) { *out_arrayType = _arrayType; }
  if (out_variability) { *out_variability = _variability; }
  if (out_purity) { *out_purity = _purity; }
  return _arrayExp;
}
modelica_metatype boxptr_NFTyping_typeMatrixComma(threadData_t *threadData, modelica_metatype _elements, modelica_metatype _context, modelica_metatype _info, modelica_metatype *out_arrayType, modelica_metatype *out_variability, modelica_metatype *out_purity)
{
  modelica_integer tmp1;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _arrayExp = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _arrayExp = omc_NFTyping_typeMatrixComma(threadData, _elements, tmp1, _info, out_arrayType, &_variability, &_purity);
  /* skip box _arrayExp; NFExpression */
  /* skip box _arrayType; NFType */
  if (out_variability) { *out_variability = mmc_mk_icon(_variability); }
  if (out_purity) { *out_purity = mmc_mk_icon(_purity); }
  return _arrayExp;
}

DLLDirection
modelica_metatype omc_NFTyping_typeMatrix(threadData_t *threadData, modelica_metatype _elements, modelica_integer _context, modelica_metatype _info, modelica_metatype *out_arrayType, modelica_integer *out_variability, modelica_integer *out_purity)
{
  modelica_metatype _arrayExp = NULL;
  modelica_metatype _arrayType = NULL;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _exp = NULL;
  modelica_metatype _expl = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _res = NULL;
  modelica_metatype tmpMeta2;
  modelica_integer _var;
  modelica_integer _pur;
  modelica_metatype _ty = NULL;
  modelica_metatype _tys = NULL;
  modelica_metatype tmpMeta3;
  modelica_metatype _resTys = NULL;
  modelica_metatype tmpMeta4;
  modelica_integer _n;
  modelica_integer _next_context;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _arrayExp has no default value.
  _arrayType = _OMC_LIT8;
  _variability = 1;
  _purity = 1;
  // _exp has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _expl = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _res = tmpMeta2;
  // _var has no default value.
  // _pur has no default value.
  _ty = _OMC_LIT8;
  tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
  _tys = tmpMeta3;
  tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
  _resTys = tmpMeta4;
  _n = ((modelica_integer) 2);
  _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 4194304));
  if((listLength(_elements) > ((modelica_integer) 1)))
  {
    {
      modelica_metatype _el;
      for (tmpMeta5 = _elements; !listEmpty(tmpMeta5); tmpMeta5=MMC_CDR(tmpMeta5))
      {
        _el = MMC_CAR(tmpMeta5);
        _exp = omc_NFTyping_typeMatrixComma(threadData, _el, _next_context, _info ,&_ty ,&_var ,&_pur);

        _variability = omc_NFPrefixes_variabilityMax(threadData, (modelica_integer)_var, (modelica_integer)_variability);

        _purity = omc_NFPrefixes_purityMin(threadData, (modelica_integer)_pur, (modelica_integer)_purity);

        tmpMeta6 = mmc_mk_cons(_exp, _expl);
        _expl = tmpMeta6;

        tmpMeta7 = mmc_mk_cons(_ty, _tys);
        _tys = tmpMeta7;

        _n = modelica_integer_max((modelica_integer)(_n),(modelica_integer)(omc_NFType_dimensionCount(threadData, _ty)));
      }
    }

    {
      modelica_metatype _e;
      for (tmpMeta9 = _expl; !listEmpty(tmpMeta9); tmpMeta9=MMC_CDR(tmpMeta9))
      {
        _e = MMC_CAR(tmpMeta9);
        /* Pattern-matching assignment */
        tmpMeta10 = _tys;
        if (listEmpty(tmpMeta10)) MMC_THROW_INTERNAL();
        tmpMeta11 = MMC_CAR(tmpMeta10);
        tmpMeta12 = MMC_CDR(tmpMeta10);
        _ty = tmpMeta11;
        _tys = tmpMeta12;

        _e = omc_NFExpression_promote(threadData, _e, _ty, _n ,&_ty);

        tmpMeta13 = mmc_mk_cons(_ty, _resTys);
        _resTys = tmpMeta13;

        tmpMeta14 = mmc_mk_cons(_e, _res);
        _res = tmpMeta14;
      }
    }

    _arrayExp = omc_NFBuiltinCall_makeCatExp(threadData, ((modelica_integer) 1), _res, _resTys, (modelica_integer)_variability, (modelica_integer)_purity, _info ,&_arrayType);
  }
  else
  {
    _arrayExp = omc_NFTyping_typeMatrixComma(threadData, listHead(_elements), _next_context, _info ,&_arrayType ,&_variability ,&_purity);

    if((omc_NFType_dimensionCount(threadData, _arrayType) < ((modelica_integer) 2)))
    {
      _arrayExp = omc_NFExpression_promote(threadData, _arrayExp, _arrayType, _n ,&_arrayType);
    }
  }
  _return: OMC_LABEL_UNUSED
  if (out_arrayType) { *out_arrayType = _arrayType; }
  if (out_variability) { *out_variability = _variability; }
  if (out_purity) { *out_purity = _purity; }
  return _arrayExp;
}
modelica_metatype boxptr_NFTyping_typeMatrix(threadData_t *threadData, modelica_metatype _elements, modelica_metatype _context, modelica_metatype _info, modelica_metatype *out_arrayType, modelica_metatype *out_variability, modelica_metatype *out_purity)
{
  modelica_integer tmp1;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _arrayExp = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _arrayExp = omc_NFTyping_typeMatrix(threadData, _elements, tmp1, _info, out_arrayType, &_variability, &_purity);
  /* skip box _arrayExp; NFExpression */
  /* skip box _arrayType; NFType */
  if (out_variability) { *out_variability = mmc_mk_icon(_variability); }
  if (out_purity) { *out_purity = mmc_mk_icon(_purity); }
  return _arrayExp;
}

DLLDirection
modelica_metatype omc_NFTyping_typeArray(threadData_t *threadData, modelica_metatype _elements, modelica_boolean _isLiteral, modelica_integer _context, modelica_metatype _info, modelica_metatype *out_arrayType, modelica_integer *out_variability, modelica_integer *out_purity)
{
  modelica_metatype _arrayExp = NULL;
  modelica_metatype _arrayType = NULL;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _exp = NULL;
  modelica_metatype _expl = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _expl2 = NULL;
  modelica_metatype tmpMeta2;
  modelica_integer _var;
  modelica_integer _pur;
  modelica_metatype _ty1 = NULL;
  modelica_metatype _ty2 = NULL;
  modelica_metatype _ty3 = NULL;
  modelica_metatype _tys = NULL;
  modelica_metatype tmpMeta3;
  modelica_integer _mk;
  modelica_integer _array_len;
  modelica_integer _idx;
  modelica_integer _next_context;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_integer tmp8;
  modelica_integer tmp9;
  modelica_integer tmp10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  modelica_metatype tmpMeta16;
  modelica_string tmp17;
  modelica_metatype tmpMeta18;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _arrayExp has no default value.
  _arrayType = _OMC_LIT8;
  _variability = 1;
  _purity = 1;
  // _exp has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _expl = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _expl2 = tmpMeta2;
  // _var has no default value.
  // _pur has no default value.
  _ty1 = _OMC_LIT8;
  // _ty2 has no default value.
  // _ty3 has no default value.
  tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
  _tys = tmpMeta3;
  // _mk has no default value.
  // _array_len has no default value.
  // _idx has no default value.
  // _next_context has no default value.
  _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 4194304));

  _array_len = arrayLength(_elements);

  if((_array_len > ((modelica_integer) 0)))
  {
    _exp = omc_NFTyping_typeExp(threadData, arrayGet(_elements, ((modelica_integer) 1)), _next_context, _info, 0 /* false */ ,&_ty1 ,&_variability ,&_purity);

    tmpMeta4 = mmc_mk_cons(_exp, _expl);
    _expl = tmpMeta4;

    tmpMeta5 = mmc_mk_cons(_ty1, _tys);
    _tys = tmpMeta5;

    tmp8 = ((modelica_integer) 2); tmp9 = 1; tmp10 = _array_len;
    if(!(((tmp9 > 0) && (tmp8 > tmp10)) || ((tmp9 < 0) && (tmp8 < tmp10))))
    {
      modelica_integer _i;
      for(_i = ((modelica_integer) 2); in_range_integer(_i, tmp8, tmp10); _i += tmp9)
      {
        _exp = omc_NFTyping_typeExp(threadData, arrayGet(_elements, _i), _next_context, _info, 0 /* false */ ,&_ty2 ,&_var ,&_pur);

        _variability = omc_NFPrefixes_variabilityMax(threadData, (modelica_integer)_var, (modelica_integer)_variability);

        _purity = omc_NFPrefixes_purityMin(threadData, (modelica_integer)_pur, (modelica_integer)_purity);

        omc_NFTypeCheck_matchTypes(threadData, _ty2, _ty1, _exp, ((modelica_integer) 4) ,&_ty3 ,&_mk);

        if(omc_NFTypeCheck_isIncompatibleMatch(threadData, (modelica_integer)_mk))
        {
          omc_NFTypeCheck_matchTypes(threadData, _ty1, _ty2, _exp, ((modelica_integer) 4) ,&_ty3 ,&_mk);

          if(omc_NFTypeCheck_isCompatibleMatch(threadData, (modelica_integer)_mk))
          {
            _ty1 = _ty3;
          }
        }
        else
        {
          _ty1 = _ty3;
        }

        tmpMeta6 = mmc_mk_cons(_exp, _expl);
        _expl = tmpMeta6;

        tmpMeta7 = mmc_mk_cons(_ty2, _tys);
        _tys = tmpMeta7;
      }
    }
  }

  _idx = _array_len;

  {
    modelica_metatype _e;
    for (tmpMeta11 = _expl; !listEmpty(tmpMeta11); tmpMeta11=MMC_CDR(tmpMeta11))
    {
      _e = MMC_CAR(tmpMeta11);
      /* Pattern-matching assignment */
      tmpMeta12 = _tys;
      if (listEmpty(tmpMeta12)) MMC_THROW_INTERNAL();
      tmpMeta13 = MMC_CAR(tmpMeta12);
      tmpMeta14 = MMC_CDR(tmpMeta12);
      _ty2 = tmpMeta13;
      _tys = tmpMeta14;

      _exp = omc_NFTypeCheck_matchTypes(threadData, _ty2, _ty1, _e, ((modelica_integer) 4) ,NULL ,&_mk);

      tmpMeta15 = mmc_mk_cons(_exp, _expl2);
      _expl2 = tmpMeta15;

      if((!omc_NFInstContext_inAnnotation(threadData, _context)))
      {
        if(omc_NFTypeCheck_isIncompatibleMatch(threadData, (modelica_integer)_mk))
        {
          tmp17 = modelica_integer_to_modelica_string(_idx, ((modelica_integer) 0), 1 /* true */);
          tmpMeta16 = mmc_mk_cons(tmp17, mmc_mk_cons(omc_NFExpression_toString(threadData, _exp), mmc_mk_cons(omc_NFType_toString(threadData, _ty2), mmc_mk_cons(omc_NFType_toString(threadData, _ty1), MMC_REFSTRUCTLIT(mmc_nil)))));
          omc_Error_addSourceMessage(threadData, _OMC_LIT193, tmpMeta16, _info);

          MMC_THROW_INTERNAL();
        }
      }

      _idx = ((modelica_integer) -1) + _idx;
    }
  }

  _arrayType = omc_NFType_liftArrayLeft(threadData, _ty1, omc_NFDimension_fromExpList(threadData, _expl2));

  _arrayExp = omc_NFExpression_makeArray(threadData, _arrayType, listArray(_expl2), _isLiteral);
  _return: OMC_LABEL_UNUSED
  if (out_arrayType) { *out_arrayType = _arrayType; }
  if (out_variability) { *out_variability = _variability; }
  if (out_purity) { *out_purity = _purity; }
  return _arrayExp;
}
modelica_metatype boxptr_NFTyping_typeArray(threadData_t *threadData, modelica_metatype _elements, modelica_metatype _isLiteral, modelica_metatype _context, modelica_metatype _info, modelica_metatype *out_arrayType, modelica_metatype *out_variability, modelica_metatype *out_purity)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _arrayExp = NULL;
  tmp1 = mmc_unbox_integer(_isLiteral);
  tmp2 = mmc_unbox_integer(_context);
  _arrayExp = omc_NFTyping_typeArray(threadData, _elements, tmp1, tmp2, _info, out_arrayType, &_variability, &_purity);
  /* skip box _arrayExp; NFExpression */
  /* skip box _arrayType; NFType */
  if (out_variability) { *out_variability = mmc_mk_icon(_variability); }
  if (out_purity) { *out_purity = mmc_mk_icon(_purity); }
  return _arrayExp;
}

DLLDirection
modelica_metatype omc_NFTyping_checkSubscriptType(threadData_t *threadData, modelica_metatype __omcQ_24in_5FsubscriptExp, modelica_metatype _subscriptType, modelica_metatype _dimension, modelica_metatype _info, modelica_metatype *out_outType)
{
  modelica_metatype _subscriptExp = NULL;
  modelica_metatype _outType = NULL;
  modelica_metatype _expected_ty = NULL;
  modelica_integer _mk;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _subscriptExp = __omcQ_24in_5FsubscriptExp;
  // _outType has no default value.
  // _expected_ty has no default value.
  // _mk has no default value.
  _expected_ty = omc_NFDimension_subscriptType(threadData, _dimension);

  _subscriptExp = omc_NFTypeCheck_matchTypes(threadData, _subscriptType, _expected_ty, _subscriptExp, ((modelica_integer) 1) ,&_outType ,&_mk);

  if(omc_NFTypeCheck_isIncompatibleMatch(threadData, (modelica_integer)_mk))
  {
    tmpMeta1 = mmc_mk_cons(omc_NFExpression_toString(threadData, _subscriptExp), mmc_mk_cons(omc_NFType_toString(threadData, _subscriptType), mmc_mk_cons(omc_NFType_toString(threadData, _expected_ty), MMC_REFSTRUCTLIT(mmc_nil))));
    omc_Error_addSourceMessage(threadData, _OMC_LIT196, tmpMeta1, _info);

    MMC_THROW_INTERNAL();
  }
  _return: OMC_LABEL_UNUSED
  if (out_outType) { *out_outType = _outType; }
  return _subscriptExp;
}

DLLDirection
modelica_metatype omc_NFTyping_typeSubscript(threadData_t *threadData, modelica_metatype _subscript, modelica_metatype _dimension, modelica_metatype _subscriptedExp, modelica_integer _index, modelica_integer _context, modelica_metatype _info, modelica_integer *out_variability)
{
  modelica_metatype _outSubscript = NULL;
  modelica_integer _variability;
  modelica_metatype _e = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _matched_ty = NULL;
  modelica_integer _mk;
  modelica_integer tmp1_c1 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outSubscript = _subscript;
  _variability = 1;
  _e = _OMC_LIT197;
  // _ty has no default value.
  // _matched_ty has no default value.
  // _mk has no default value.
  
  
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _subscript;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 4: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          _e = omc_NFTyping_evaluateEnd(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_subscript), 2))), _dimension, _subscriptedExp, _index, _context, _info);

          _e = omc_NFTyping_typeExp(threadData, _e, _context, _info, 0 /* false */ ,&_ty ,&_variability, NULL);

          _e = omc_NFTyping_checkSubscriptType(threadData, _e, omc_NFType_arrayElementType(threadData, _ty), _dimension, _info ,&_matched_ty);

          if(omc_NFType_isArray(threadData, _ty))
          {
            tmpMeta5 = mmc_mk_box2(6, &NFSubscript_SLICE__desc, _e);
            _outSubscript = tmpMeta5;

            if(omc_NFInstContext_inEquation(threadData, _context))
            {
              omc_NFStructural_markExp(threadData, _e);
            }
          }
          else
          {
            tmpMeta6 = mmc_mk_box2(5, &NFSubscript_INDEX__desc, _e);
            _outSubscript = tmpMeta6;
          }
          tmpMeta[0+0] = _matched_ty;
          tmp1_c1 = (modelica_integer)_variability;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          _e = tmpMeta7;
          /* Pattern matching succeeded */
          _e = omc_NFTyping_checkSubscriptType(threadData, _e, omc_NFExpression_typeOf(threadData, _e), _dimension, _info ,&_ty);

          tmpMeta8 = mmc_mk_box2(5, &NFSubscript_INDEX__desc, _e);
          _outSubscript = tmpMeta8;
          tmpMeta[0+0] = _ty;
          tmp1_c1 = omc_NFExpression_variability(threadData, _e);
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          _e = tmpMeta9;
          /* Pattern matching succeeded */
          _e = omc_NFTyping_checkSubscriptType(threadData, _e, omc_NFType_unliftArray(threadData, omc_NFExpression_typeOf(threadData, _e)), _dimension, _info ,&_ty);

          tmpMeta10 = mmc_mk_box2(6, &NFSubscript_SLICE__desc, _e);
          _outSubscript = tmpMeta10;
          tmpMeta[0+0] = _ty;
          tmp1_c1 = omc_NFExpression_variability(threadData, _e);
          goto tmp3_done;
        }
        case 8: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _OMC_LIT8;
          tmp1_c1 = omc_NFDimension_variability(threadData, _dimension);
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          omc_Error_assertion(threadData, 0 /* false */, _OMC_LIT198, _OMC_LIT199);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _ty = tmpMeta[0+0];
  _variability = tmp1_c1;
  _return: OMC_LABEL_UNUSED
  if (out_variability) { *out_variability = _variability; }
  return _outSubscript;
}
modelica_metatype boxptr_NFTyping_typeSubscript(threadData_t *threadData, modelica_metatype _subscript, modelica_metatype _dimension, modelica_metatype _subscriptedExp, modelica_metatype _index, modelica_metatype _context, modelica_metatype _info, modelica_metatype *out_variability)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer _variability;
  modelica_metatype _outSubscript = NULL;
  tmp1 = mmc_unbox_integer(_index);
  tmp2 = mmc_unbox_integer(_context);
  _outSubscript = omc_NFTyping_typeSubscript(threadData, _subscript, _dimension, _subscriptedExp, tmp1, tmp2, _info, &_variability);
  /* skip box _outSubscript; NFSubscript */
  if (out_variability) { *out_variability = mmc_mk_icon(_variability); }
  return _outSubscript;
}

DLLDirection
modelica_metatype omc_NFTyping_typeSubscripts(threadData_t *threadData, modelica_metatype _subscripts, modelica_metatype _crefType, modelica_metatype _subscriptedExp, modelica_integer _context, modelica_metatype _info, modelica_integer *out_variability)
{
  modelica_metatype _typedSubs = NULL;
  modelica_integer _variability;
  modelica_metatype _dims = NULL;
  modelica_metatype _dim = NULL;
  modelica_integer _next_context;
  modelica_integer _i;
  modelica_metatype _sub = NULL;
  modelica_integer _var;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_string tmp3;
  modelica_string tmp4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _typedSubs has no default value.
  _variability = 1;
  // _dims has no default value.
  // _dim has no default value.
  // _next_context has no default value.
  // _i has no default value.
  // _sub has no default value.
  // _var has no default value.
  if(listEmpty(_subscripts))
  {
    _typedSubs = _subscripts;

    goto _return;
  }

  _dims = omc_NFType_arrayDims(threadData, _crefType);

  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _typedSubs = tmpMeta1;

  _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 2097152));

  _i = ((modelica_integer) 1);

  if((listLength(_subscripts) > listLength(_dims)))
  {
    tmp3 = modelica_integer_to_modelica_string(listLength(_subscripts), ((modelica_integer) 0), 1 /* true */);
    tmp4 = modelica_integer_to_modelica_string(listLength(_dims), ((modelica_integer) 0), 1 /* true */);
    tmpMeta2 = mmc_mk_cons(omc_NFExpression_toString(threadData, _subscriptedExp), mmc_mk_cons(tmp3, mmc_mk_cons(tmp4, MMC_REFSTRUCTLIT(mmc_nil))));
    omc_Error_addSourceMessage(threadData, _OMC_LIT202, tmpMeta2, _info);

    MMC_THROW_INTERNAL();
  }

  {
    modelica_metatype _s;
    for (tmpMeta5 = _subscripts; !listEmpty(tmpMeta5); tmpMeta5=MMC_CDR(tmpMeta5))
    {
      _s = MMC_CAR(tmpMeta5);
      /* Pattern-matching assignment */
      tmpMeta6 = _dims;
      if (listEmpty(tmpMeta6)) MMC_THROW_INTERNAL();
      tmpMeta7 = MMC_CAR(tmpMeta6);
      tmpMeta8 = MMC_CDR(tmpMeta6);
      _dim = tmpMeta7;
      _dims = tmpMeta8;

      _sub = omc_NFTyping_typeSubscript(threadData, _s, _dim, _subscriptedExp, _i, _next_context, _info ,&_var);

      tmpMeta9 = mmc_mk_cons(_sub, _typedSubs);
      _typedSubs = tmpMeta9;

      _variability = omc_NFPrefixes_variabilityMax(threadData, (modelica_integer)_variability, (modelica_integer)_var);

      _i = ((modelica_integer) 1) + _i;

      if(((modelica_integer)_var == 3))
      {
        omc_NFStructural_markSubscript(threadData, _sub);
      }
    }
  }

  _typedSubs = listReverseInPlace(_typedSubs);
  _return: OMC_LABEL_UNUSED
  if (out_variability) { *out_variability = _variability; }
  return _typedSubs;
}
modelica_metatype boxptr_NFTyping_typeSubscripts(threadData_t *threadData, modelica_metatype _subscripts, modelica_metatype _crefType, modelica_metatype _subscriptedExp, modelica_metatype _context, modelica_metatype _info, modelica_metatype *out_variability)
{
  modelica_integer tmp1;
  modelica_integer _variability;
  modelica_metatype _typedSubs = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _typedSubs = omc_NFTyping_typeSubscripts(threadData, _subscripts, _crefType, _subscriptedExp, tmp1, _info, &_variability);
  /* skip box _typedSubs; list<NFSubscript> */
  if (out_variability) { *out_variability = mmc_mk_icon(_variability); }
  return _typedSubs;
}

DLLDirection
modelica_metatype omc_NFTyping_typeCref2(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcref, modelica_integer _context, modelica_metatype _info, modelica_boolean _firstPart, modelica_integer *out_subsVariability)
{
  modelica_metatype _cref = NULL;
  modelica_integer _subsVariability;
  modelica_integer tmp1_c1 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _cref = __omcQ_24in_5Fcref;
  // _subsVariability has no default value.
  
  
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _cref;
    {
      modelica_metatype _rest_cr = NULL;
      modelica_metatype _node_ty = NULL;
      modelica_metatype _subs = NULL;
      modelica_integer _subs_var;
      modelica_integer _rest_var;
      modelica_metatype _fn = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _rest_cr has no default value.
      // _node_ty has no default value.
      // _subs has no default value.
      // _subs_var has no default value.
      // _rest_var has no default value.
      // _fn has no default value.
      tmp4 = 0;
      for (; tmp4 < 5; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmp7 = mmc_unbox_integer(tmpMeta6);
          if (2 != tmp7) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta8 = MMC_TAGPTR(mmc_alloc_words(7));
          memcpy(MMC_UNTAGPTR(tmpMeta8), MMC_UNTAGPTR(_cref), 7*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta8))[4] = omc_NFInstNode_InstNode_getType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 2))));
          _cref = tmpMeta8;

          tmpMeta9 = MMC_TAGPTR(mmc_alloc_words(7));
          memcpy(MMC_UNTAGPTR(tmpMeta9), MMC_UNTAGPTR(_cref), 7*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta9))[6] = omc_NFTyping_typeCref2(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 6))), _context, _info, 0 /* false */, NULL);
          _cref = tmpMeta9;
          tmpMeta[0+0] = _cref;
          tmp1_c1 = 1;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,6) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _node_ty = omc_NFTyping_typeComponent(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 2))), omc_NFInstContext_nodeContext(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 2))), _context), (_firstPart || (!omc_NFInstContext_inDimension(threadData, _context))));

          tmpMeta11 = mmc_mk_box3(9, &NFExpression_CREF__desc, _node_ty, _cref);
          _subs = omc_NFTyping_typeSubscripts(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 3))), _node_ty, tmpMeta11, _context, _info ,&_subs_var);

          _rest_cr = omc_NFTyping_typeCref2(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 6))), _context, _info, 0 /* false */ ,&_rest_var);

          _subsVariability = omc_NFPrefixes_variabilityMax(threadData, (modelica_integer)_subs_var, (modelica_integer)_rest_var);
          tmpMeta12 = mmc_mk_box6(3, &NFComponentRef_CREF__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 2))), _subs, _node_ty, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 5))), _rest_cr);
          tmpMeta[0+0] = tmpMeta12;
          tmp1_c1 = (modelica_integer)_subsVariability;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,0,7) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(_firstPart && omc_NFInstNode_InstNode_isFunction(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 2)))))) goto tmp3_end;
          /* Pattern-matching assignment */
          tmpMeta14 = omc_NFFunction_Function_typeNodeCache(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 2))), ((modelica_integer) 16));
          if (listEmpty(tmpMeta14)) goto goto_2;
          tmpMeta15 = MMC_CAR(tmpMeta14);
          tmpMeta16 = MMC_CDR(tmpMeta14);
          _fn = tmpMeta15;

          tmpMeta18 = mmc_mk_box3(15, &NFType_FUNCTION__desc, _fn, mmc_mk_integer(2));
          tmpMeta17 = MMC_TAGPTR(mmc_alloc_words(7));
          memcpy(MMC_UNTAGPTR(tmpMeta17), MMC_UNTAGPTR(_cref), 7*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta17))[4] = tmpMeta18;
          _cref = tmpMeta17;

          tmpMeta19 = MMC_TAGPTR(mmc_alloc_words(7));
          memcpy(MMC_UNTAGPTR(tmpMeta19), MMC_UNTAGPTR(_cref), 7*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta19))[6] = omc_NFTyping_typeCref2(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 6))), _context, _info, 0 /* false */, NULL);
          _cref = tmpMeta19;
          tmpMeta[0+0] = _cref;
          tmp1_c1 = 1;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta20,0,7) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta21 = MMC_TAGPTR(mmc_alloc_words(7));
          memcpy(MMC_UNTAGPTR(tmpMeta21), MMC_UNTAGPTR(_cref), 7*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta21))[4] = omc_NFInstNode_InstNode_getType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 2))));
          _cref = tmpMeta21;
          tmpMeta[0+0] = _cref;
          tmp1_c1 = 1;
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _cref;
          tmp1_c1 = 1;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _cref = tmpMeta[0+0];
  _subsVariability = tmp1_c1;
  _return: OMC_LABEL_UNUSED
  if (out_subsVariability) { *out_subsVariability = _subsVariability; }
  return _cref;
}
modelica_metatype boxptr_NFTyping_typeCref2(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcref, modelica_metatype _context, modelica_metatype _info, modelica_metatype _firstPart, modelica_metatype *out_subsVariability)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer _subsVariability;
  modelica_metatype _cref = NULL;
  tmp1 = mmc_unbox_integer(_context);
  tmp2 = mmc_unbox_integer(_firstPart);
  _cref = omc_NFTyping_typeCref2(threadData, __omcQ_24in_5Fcref, tmp1, _info, tmp2, &_subsVariability);
  /* skip box _cref; NFComponentRef */
  if (out_subsVariability) { *out_subsVariability = mmc_mk_icon(_subsVariability); }
  return _cref;
}

DLLDirection
modelica_metatype omc_NFTyping_typeCref(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcref, modelica_integer _context, modelica_metatype _info, modelica_metatype *out_ty, modelica_integer *out_nodeVariability, modelica_integer *out_subsVariability)
{
  modelica_metatype _cref = NULL;
  modelica_metatype _ty = NULL;
  modelica_integer _nodeVariability;
  modelica_integer _subsVariability;
  modelica_integer _subs_var;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _cref = __omcQ_24in_5Fcref;
  // _ty has no default value.
  // _nodeVariability has no default value.
  // _subsVariability has no default value.
  // _subs_var has no default value.
  if((omc_NFInstContext_inFunction(threadData, _context) && omc_NFComponentRef_isTime(threadData, _cref)))
  {
    omc_Error_addSourceMessage(threadData, _OMC_LIT71, _OMC_LIT204, _info);

    MMC_THROW_INTERNAL();
  }

  _cref = omc_NFTyping_typeCref2(threadData, _cref, _context, _info, 1 /* true */ ,&_subsVariability);

  _ty = omc_NFComponentRef_getSubscriptedType(threadData, _cref, 0 /* false */);

  _nodeVariability = omc_NFComponentRef_nodeVariability(threadData, _cref);
  _return: OMC_LABEL_UNUSED
  if (out_ty) { *out_ty = _ty; }
  if (out_nodeVariability) { *out_nodeVariability = _nodeVariability; }
  if (out_subsVariability) { *out_subsVariability = _subsVariability; }
  return _cref;
}
modelica_metatype boxptr_NFTyping_typeCref(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcref, modelica_metatype _context, modelica_metatype _info, modelica_metatype *out_ty, modelica_metatype *out_nodeVariability, modelica_metatype *out_subsVariability)
{
  modelica_integer tmp1;
  modelica_integer _nodeVariability;
  modelica_integer _subsVariability;
  modelica_metatype _cref = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _cref = omc_NFTyping_typeCref(threadData, __omcQ_24in_5Fcref, tmp1, _info, out_ty, &_nodeVariability, &_subsVariability);
  /* skip box _cref; NFComponentRef */
  /* skip box _ty; NFType */
  if (out_nodeVariability) { *out_nodeVariability = mmc_mk_icon(_nodeVariability); }
  if (out_subsVariability) { *out_subsVariability = mmc_mk_icon(_subsVariability); }
  return _cref;
}

DLLDirection
modelica_metatype omc_NFTyping_typeCrefExp(threadData_t *threadData, modelica_metatype _cref, modelica_integer _context, modelica_metatype _info, modelica_metatype *out_ty, modelica_integer *out_variability, modelica_integer *out_purity)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _ty = NULL;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _cr = NULL;
  modelica_integer _node_var;
  modelica_integer _subs_var;
  modelica_boolean _eval;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _exp has no default value.
  // _ty has no default value.
  // _variability has no default value.
  // _purity has no default value.
  // _cr has no default value.
  // _node_var has no default value.
  // _subs_var has no default value.
  // _eval has no default value.
  _cr = omc_NFTyping_typeCref(threadData, _cref, _context, _info ,&_ty ,&_node_var ,&_subs_var);

  tmpMeta1 = mmc_mk_box3(9, &NFExpression_CREF__desc, _ty, _cr);
  _exp = tmpMeta1;

  _variability = omc_NFPrefixes_variabilityMax(threadData, (modelica_integer)_node_var, (modelica_integer)_subs_var);

  _purity = omc_NFComponentRef_purity(threadData, _cref);
  _return: OMC_LABEL_UNUSED
  if (out_ty) { *out_ty = _ty; }
  if (out_variability) { *out_variability = _variability; }
  if (out_purity) { *out_purity = _purity; }
  return _exp;
}
modelica_metatype boxptr_NFTyping_typeCrefExp(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _context, modelica_metatype _info, modelica_metatype *out_ty, modelica_metatype *out_variability, modelica_metatype *out_purity)
{
  modelica_integer tmp1;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _exp = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _exp = omc_NFTyping_typeCrefExp(threadData, _cref, tmp1, _info, out_ty, &_variability, &_purity);
  /* skip box _exp; NFExpression */
  /* skip box _ty; NFType */
  if (out_variability) { *out_variability = mmc_mk_icon(_variability); }
  if (out_purity) { *out_purity = mmc_mk_icon(_purity); }
  return _exp;
}

DLLDirection
modelica_metatype omc_NFTyping_nthDimensionBoundsChecked(threadData_t *threadData, modelica_metatype _ty, modelica_integer _dimIndex, modelica_integer _offset, modelica_metatype *out_error)
{
  modelica_metatype _dim = NULL;
  modelica_metatype _error = NULL;
  modelica_integer _dim_size;
  modelica_integer _index;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _dim has no default value.
  // _error has no default value.
  _dim_size = omc_NFType_dimensionCount(threadData, _ty);
  _index = _dimIndex + _offset;
  if(((_index < ((modelica_integer) 1)) || (_index > _dim_size)))
  {
    _dim = _OMC_LIT206;

    tmpMeta1 = mmc_mk_box2(4, &NFTyping_TypingError_OUT__OF__BOUNDS__desc, mmc_mk_integer(_dim_size - _offset));
    _error = tmpMeta1;
  }
  else
  {
    _dim = omc_NFType_nthDimension(threadData, _ty, _index);

    _error = _OMC_LIT205;
  }
  _return: OMC_LABEL_UNUSED
  if (out_error) { *out_error = _error; }
  return _dim;
}
modelica_metatype boxptr_NFTyping_nthDimensionBoundsChecked(threadData_t *threadData, modelica_metatype _ty, modelica_metatype _dimIndex, modelica_metatype _offset, modelica_metatype *out_error)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _dim = NULL;
  tmp1 = mmc_unbox_integer(_dimIndex);
  tmp2 = mmc_unbox_integer(_offset);
  _dim = omc_NFTyping_nthDimensionBoundsChecked(threadData, _ty, tmp1, tmp2, out_error);
  /* skip box _dim; NFDimension */
  /* skip box _error; NFTyping.TypingError */
  return _dim;
}

DLLDirection
void omc_NFTyping_checkCyclicDimension(threadData_t *threadData, modelica_metatype _dim, modelica_metatype _component, modelica_integer _index, modelica_metatype _info)
{
  modelica_metatype _dim_exp = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _dim_exp has no default value.
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _dim;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          modelica_integer tmp6;
          modelica_metatype tmpMeta7;
          modelica_string tmp8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,2) == 0) goto tmp2_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
          tmp6 = mmc_unbox_integer(tmpMeta5);
          if (1 /* true */ != tmp6) goto tmp2_end;
          /* Pattern matching succeeded */
          tmp8 = modelica_integer_to_modelica_string(_index, ((modelica_integer) 0), 1 /* true */);
          tmpMeta7 = mmc_mk_cons(tmp8, mmc_mk_cons(omc_NFInstNode_InstNode_name(threadData, _component), mmc_mk_cons(omc_NFExpression_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dim), 2)))), MMC_REFSTRUCTLIT(mmc_nil))));
          omc_Error_addSourceMessage(threadData, _OMC_LIT209, tmpMeta7, _info);
          goto goto_1;
          goto tmp2_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return;
}
void boxptr_NFTyping_checkCyclicDimension(threadData_t *threadData, modelica_metatype _dim, modelica_metatype _component, modelica_metatype _index, modelica_metatype _info)
{
  modelica_integer tmp1;
  tmp1 = mmc_unbox_integer(_index);
  omc_NFTyping_checkCyclicDimension(threadData, _dim, _component, tmp1, _info);
  return;
}

DLLDirection
modelica_metatype omc_NFTyping_typeCrefDim(threadData_t *threadData, modelica_metatype _cref, modelica_integer _dimIndex, modelica_integer _context, modelica_metatype _info, modelica_metatype *out_error)
{
  modelica_metatype _dim = NULL;
  modelica_metatype _error = NULL;
  modelica_metatype _crl = NULL;
  modelica_metatype _subs = NULL;
  modelica_integer _index;
  modelica_integer _dim_count;
  modelica_integer _dim_total;
  modelica_metatype _node = NULL;
  modelica_metatype _c = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _dims = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta16;
  modelica_metatype tmpMeta17;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _dim has no default value.
  _error = _OMC_LIT205;
  // _crl has no default value.
  // _subs has no default value.
  // _index has no default value.
  // _dim_count has no default value.
  _dim_total = ((modelica_integer) 0);
  // _node has no default value.
  // _c has no default value.
  // _ty has no default value.
  // _dims has no default value.
  if(omc_NFComponentRef_hasSubscripts(threadData, _cref))
  {
    omc_NFTyping_typeCref(threadData, _cref, _context, _info ,&_ty, NULL, NULL);

    _dim = omc_NFTyping_nthDimensionBoundsChecked(threadData, _ty, _dimIndex, ((modelica_integer) 0) ,&_error);

    goto _return;
  }

  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _crl = omc_NFComponentRef_toListReverse(threadData, _cref, 0 /* false */, tmpMeta1);

  _index = _dimIndex;

  {
    modelica_metatype _cr;
    for (tmpMeta2 = _crl; !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
    {
      _cr = MMC_CAR(tmpMeta2);
      { /* match expression */
        modelica_metatype tmp5_1;
        tmp5_1 = _cr;
        {
          volatile mmc_switch_type tmp5;
          int tmp6;
          tmp5 = 0;
          for (; tmp5 < 2; tmp5++) {
            switch (MMC_SWITCH_CAST(tmp5)) {
            case 0: {
              modelica_metatype tmpMeta7;
              modelica_metatype tmpMeta8;
              modelica_integer tmp9 = 0;
              if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,0,5) == 0) goto tmp4_end;
              tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
              if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,6) == 0) goto tmp4_end;
              tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
              
              _subs = tmpMeta8;
              /* Pattern matching succeeded */
              _node = omc_NFInstNode_InstNode_resolveOuter(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cr), 2))));

              _c = omc_NFInstNode_InstNode_component(threadData, _node);

              if(omc_NFClass_hasDimensions(threadData, omc_NFInstNode_InstNode_getClass(threadData, omc_NFComponent_classInstance(threadData, _c))))
              {
                omc_NFTyping_typeComponent(threadData, _node, _context, 1 /* true */);

                _c = omc_NFInstNode_InstNode_component(threadData, _node);
              }

              { /* match expression */
                modelica_metatype tmp12_1;
                tmp12_1 = _c;
                {
                  volatile mmc_switch_type tmp12;
                  int tmp13;
                  tmp12 = 0;
                  for (; tmp12 < 3; tmp12++) {
                    switch (MMC_SWITCH_CAST(tmp12)) {
                    case 0: {
                      modelica_metatype tmpMeta14;
                      modelica_metatype tmpMeta15;
                      if (mmc__uniontype__metarecord__typedef__equal(tmp12_1,1,8) == 0) goto tmp11_end;
                      tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp12_1), 3));
                      if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,17,2) == 0) goto tmp11_end;
                      tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
                      
                      _dims = tmpMeta15;
                      /* Pattern matching succeeded */
                      _dim_count = arrayLength(_dims);

                      if(((_index <= _dim_count) && (_index > ((modelica_integer) 0))))
                      {
                        _dim = omc_NFTyping_typeDimension(threadData, _dims, _index, _node, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 4))), _context, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 9))));

                        omc_NFTyping_checkCyclicDimension(threadData, _dim, _node, _index, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 9))));

                        goto _return;
                      }
                      tmp9 = _dim_count;
                      goto tmp11_done;
                    }
                    case 1: {
                      if (mmc__uniontype__metarecord__typedef__equal(tmp12_1,1,8) == 0) goto tmp11_end;
                      
                      /* Pattern matching succeeded */
                      _dim_count = omc_NFType_dimensionCount(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 3))));

                      if(((_index <= _dim_count) && (_index > ((modelica_integer) 0))))
                      {
                        _dim = omc_NFType_nthDimension(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 3))), _index);

                        goto _return;
                      }
                      tmp9 = _dim_count;
                      goto tmp11_done;
                    }
                    case 2: {
                      
                      /* Pattern matching succeeded */
                      tmp9 = ((modelica_integer) 0);
                      goto tmp11_done;
                    }
                    }
                    goto tmp11_end;
                    tmp11_end: ;
                  }
                  goto goto_10;
                  goto_10:;
                  goto goto_3;
                  goto tmp11_done;
                  tmp11_done:;
                }
              }
              _dim_count = tmp9;

              _index = _index - _dim_count;

              _dim_total = _dim_total + _dim_count;
              goto tmp4_done;
            }
            case 1: {
              
              /* Pattern matching succeeded */
              goto tmp4_done;
            }
            }
            goto tmp4_end;
            tmp4_end: ;
          }
          goto goto_3;
          goto_3:;
          MMC_THROW_INTERNAL();
          goto tmp4_done;
          tmp4_done:;
        }
      }
      ;
    }
  }

  _dim = _OMC_LIT206;

  tmpMeta17 = mmc_mk_box2(4, &NFTyping_TypingError_OUT__OF__BOUNDS__desc, mmc_mk_integer(_dim_total));
  _error = tmpMeta17;
  _return: OMC_LABEL_UNUSED
  if (out_error) { *out_error = _error; }
  return _dim;
}
modelica_metatype boxptr_NFTyping_typeCrefDim(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _dimIndex, modelica_metatype _context, modelica_metatype _info, modelica_metatype *out_error)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _dim = NULL;
  tmp1 = mmc_unbox_integer(_dimIndex);
  tmp2 = mmc_unbox_integer(_context);
  _dim = omc_NFTyping_typeCrefDim(threadData, _cref, tmp1, tmp2, _info, out_error);
  /* skip box _dim; NFDimension */
  /* skip box _error; NFTyping.TypingError */
  return _dim;
}

DLLDirection
modelica_metatype omc_NFTyping_typeArrayDim2(threadData_t *threadData, modelica_metatype _arrayExp, modelica_integer _dimIndex, modelica_integer _dimCount, modelica_metatype *out_error)
{
  modelica_metatype _dim = NULL;
  modelica_metatype _error = NULL;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _dim has no default value.
  // _error has no default value.
  
  
  { /* match expression */
    modelica_metatype tmp4_1;modelica_integer tmp4_2;
    tmp4_1 = _arrayExp;
    tmp4_2 = _dimIndex;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (1 != tmp4_2) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_NFDimension_fromExpArray(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_arrayExp), 3))));
          tmpMeta[0+1] = _OMC_LIT205;
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _arrayExp = arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_arrayExp), 3))), ((modelica_integer) 1));
          _dimIndex = ((modelica_integer) -1) + _dimIndex;
          _dimCount = ((modelica_integer) 1) + _dimCount;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          _dim = _OMC_LIT206;

          tmpMeta6 = mmc_mk_box2(4, &NFTyping_TypingError_OUT__OF__BOUNDS__desc, mmc_mk_integer(_dimCount));
          _error = tmpMeta6;
          tmpMeta[0+0] = _dim;
          tmpMeta[0+1] = _error;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _dim = tmpMeta[0+0];
  _error = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_error) { *out_error = _error; }
  return _dim;
}
modelica_metatype boxptr_NFTyping_typeArrayDim2(threadData_t *threadData, modelica_metatype _arrayExp, modelica_metatype _dimIndex, modelica_metatype _dimCount, modelica_metatype *out_error)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _dim = NULL;
  tmp1 = mmc_unbox_integer(_dimIndex);
  tmp2 = mmc_unbox_integer(_dimCount);
  _dim = omc_NFTyping_typeArrayDim2(threadData, _arrayExp, tmp1, tmp2, out_error);
  /* skip box _dim; NFDimension */
  /* skip box _error; NFTyping.TypingError */
  return _dim;
}

DLLDirection
modelica_metatype omc_NFTyping_typeArrayDim(threadData_t *threadData, modelica_metatype _arrayExp, modelica_integer _dimIndex, modelica_metatype *out_error)
{
  modelica_metatype _dim = NULL;
  modelica_metatype _error = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _dim has no default value.
  // _error has no default value.
  if((_dimIndex < ((modelica_integer) 1)))
  {
    _dim = _OMC_LIT206;

    tmpMeta1 = mmc_mk_box2(4, &NFTyping_TypingError_OUT__OF__BOUNDS__desc, mmc_mk_integer(omc_NFExpression_dimensionCount(threadData, _arrayExp)));
    _error = tmpMeta1;
  }
  else
  {
    _dim = omc_NFTyping_typeArrayDim2(threadData, _arrayExp, _dimIndex, ((modelica_integer) 0) ,&_error);
  }
  _return: OMC_LABEL_UNUSED
  if (out_error) { *out_error = _error; }
  return _dim;
}
modelica_metatype boxptr_NFTyping_typeArrayDim(threadData_t *threadData, modelica_metatype _arrayExp, modelica_metatype _dimIndex, modelica_metatype *out_error)
{
  modelica_integer tmp1;
  modelica_metatype _dim = NULL;
  tmp1 = mmc_unbox_integer(_dimIndex);
  _dim = omc_NFTyping_typeArrayDim(threadData, _arrayExp, tmp1, out_error);
  /* skip box _dim; NFDimension */
  /* skip box _error; NFTyping.TypingError */
  return _dim;
}

DLLDirection
modelica_metatype omc_NFTyping_evaluateArrayIf(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _target)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _cond = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _cond has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_NFType_isConditionalArray(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))) goto tmp3_end;
          _cond = omc_NFCeval_evalExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _target);

          if(omc_NFExpression_isTrue(threadData, _cond))
          {
            _outExp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)));
          }
          else
          {
            if(omc_NFExpression_isFalse(threadData, _cond))
            {
              _outExp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)));
            }
            else
            {
              tmpMeta6 = stringAppend(_OMC_LIT210,omc_NFExpression_toString(threadData, _exp));
              omc_Error_addInternalError(threadData, tmpMeta6, omc_NFCeval_EvalTarget_getInfo(threadData, _target));

              goto goto_2;
            }
          }
          tmpMeta1 = _outExp;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

static modelica_metatype closure14_NFTyping_evaluateArrayIf(threadData_t *thData, modelica_metatype closure, modelica_metatype exp)
{
  modelica_metatype target = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFTyping_evaluateArrayIf(thData, exp, target);
}
DLLDirection
modelica_metatype omc_NFTyping_typeExpDim(threadData_t *threadData, modelica_metatype _exp, modelica_integer _dimIndex, modelica_integer _context, modelica_metatype _info, modelica_metatype *out_typedExp, modelica_metatype *out_error)
{
  modelica_metatype _dim = NULL;
  modelica_metatype _typedExp = NULL;
  modelica_metatype _error = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _e = NULL;
  modelica_integer _next_context;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _dim has no default value.
  _typedExp = mmc_mk_none();
  // _error has no default value.
  // _ty has no default value.
  // _e has no default value.
  // _next_context has no default value.
  _ty = omc_NFExpression_typeOf(threadData, _exp);

  if(omc_NFType_isKnown(threadData, _ty))
  {
    _dim = omc_NFTyping_nthDimensionBoundsChecked(threadData, _ty, _dimIndex, ((modelica_integer) 0) ,&_error);

    _typedExp = mmc_mk_some(_exp);

    if((!omc_NFDimension_isUnknown(threadData, _dim)))
    {
      goto _return;
    }
  }

  _next_context = omc_NFInstContext_clearExpFlags(threadData, _context);

  
  
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,10,0) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_NFTyping_typeArrayDim(threadData, _exp, _dimIndex, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_NFTyping_typeCrefDim(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _dimIndex, _next_context, _info, &tmpMeta[0+1]);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta7;
          
          /* Pattern matching succeeded */
          _e = omc_NFTyping_typeExp(threadData, _exp, _next_context, _info, 0 /* false */ ,&_ty ,NULL, NULL);

          if(omc_NFType_isConditionalArray(threadData, _ty))
          {
            tmpMeta7 = mmc_mk_box1(0, omc_NFCeval_EvalTarget_new(threadData, _info, _next_context, mmc_mk_none()));
            _e = omc_NFExpression_map(threadData, _e, (modelica_fnptr) mmc_mk_box2(0,closure14_NFTyping_evaluateArrayIf,tmpMeta7));

            _e = omc_NFTyping_typeExp(threadData, _e, _next_context, _info, 0 /* false */ ,&_ty ,NULL, NULL);
          }

          _typedExp = mmc_mk_some(_e);
          tmpMeta[0+0] = omc_NFTyping_nthDimensionBoundsChecked(threadData, _ty, _dimIndex, ((modelica_integer) 0), &tmpMeta[0+1]);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _dim = tmpMeta[0+0];
  _error = tmpMeta[0+1];
  _return: OMC_LABEL_UNUSED
  if (out_typedExp) { *out_typedExp = _typedExp; }
  if (out_error) { *out_error = _error; }
  return _dim;
}
modelica_metatype boxptr_NFTyping_typeExpDim(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _dimIndex, modelica_metatype _context, modelica_metatype _info, modelica_metatype *out_typedExp, modelica_metatype *out_error)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _dim = NULL;
  tmp1 = mmc_unbox_integer(_dimIndex);
  tmp2 = mmc_unbox_integer(_context);
  _dim = omc_NFTyping_typeExpDim(threadData, _exp, tmp1, tmp2, _info, out_typedExp, out_error);
  /* skip box _dim; NFDimension */
  /* skip box _typedExp; Option<NFExpression> */
  /* skip box _error; NFTyping.TypingError */
  return _dim;
}

DLLDirection
modelica_metatype omc_NFTyping_typeSubscriptedExp2(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _splitSubs, modelica_integer _context, modelica_metatype _info, modelica_metatype *out_ty, modelica_integer *out_variability, modelica_integer *out_purity)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _ty = NULL;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _expl = NULL;
  modelica_integer tmp1_c2 __attribute__((unused)) = 0;
  modelica_integer tmp1_c3 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _ty has no default value.
  // _variability has no default value.
  // _purity has no default value.
  // _expl has no default value.
  
  
  
  
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_integer tmp10;
          modelica_integer tmp11;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!((!listEmpty(_splitSubs)) && (!(arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) == ((modelica_integer) 0))))) goto tmp3_end;
          tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
          _expl = tmpMeta6;

          _variability = 1;

          _purity = 1;

          {
            modelica_metatype _e;
            for (tmpMeta7 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), tmp11 = arrayLength(tmpMeta7), tmp10 = 1; tmp10 <= tmp11; tmp10++)
            {
              _e = arrayGet(tmpMeta7,tmp10);
              _e = omc_NFTyping_typeSubscriptedExp2(threadData, _e, listRest(_splitSubs), _context, _info ,&_ty ,&_variability ,&_purity);

              tmpMeta8 = mmc_mk_cons(_e, _expl);
              _expl = tmpMeta8;
            }
          }

          _expl = listReverseInPlace(_expl);

          _ty = omc_NFType_liftArrayLeft(threadData, _ty, omc_NFDimension_fromInteger(threadData, listLength(_expl), 1));

          _outExp = omc_NFExpression_makeArray(threadData, _ty, listArray(_expl), mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))));
          tmpMeta[0+0] = _outExp;
          tmpMeta[0+1] = _ty;
          tmp1_c2 = (modelica_integer)_variability;
          tmp1_c3 = (modelica_integer)_purity;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_NFTyping_typeExp(threadData, _exp, _context, _info, 0 /* false */, &tmpMeta[0+1], &tmp1_c2, &tmp1_c3);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta[0+0];
  _ty = tmpMeta[0+1];
  _variability = tmp1_c2;
  _purity = tmp1_c3;
  _return: OMC_LABEL_UNUSED
  if (out_ty) { *out_ty = _ty; }
  if (out_variability) { *out_variability = _variability; }
  if (out_purity) { *out_purity = _purity; }
  return _outExp;
}
modelica_metatype boxptr_NFTyping_typeSubscriptedExp2(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _splitSubs, modelica_metatype _context, modelica_metatype _info, modelica_metatype *out_ty, modelica_metatype *out_variability, modelica_metatype *out_purity)
{
  modelica_integer tmp1;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _outExp = omc_NFTyping_typeSubscriptedExp2(threadData, _exp, _splitSubs, tmp1, _info, out_ty, &_variability, &_purity);
  /* skip box _outExp; NFExpression */
  /* skip box _ty; NFType */
  if (out_variability) { *out_variability = mmc_mk_icon(_variability); }
  if (out_purity) { *out_purity = mmc_mk_icon(_purity); }
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFTyping_expandProxySubscripts(threadData_t *threadData, modelica_metatype _subscripts, modelica_integer _context, modelica_metatype *out_fillDimensions)
{
  modelica_metatype _outSubscripts = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _fillDimensions = NULL;
  modelica_metatype tmpMeta2;
  modelica_integer _dim_count;
  modelica_metatype _cr_exp = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _dims = NULL;
  modelica_metatype _dim = NULL;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta25;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _outSubscripts = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _fillDimensions = tmpMeta2;
  // _dim_count has no default value.
  // _cr_exp has no default value.
  // _ty has no default value.
  // _dims has no default value.
  // _dim has no default value.
  {
    modelica_metatype _s;
    for (tmpMeta3 = _subscripts; !listEmpty(tmpMeta3); tmpMeta3=MMC_CDR(tmpMeta3))
    {
      _s = MMC_CAR(tmpMeta3);
      { /* match expression */
        modelica_metatype tmp7_1;
        tmp7_1 = _s;
        {
          volatile mmc_switch_type tmp7;
          int tmp8;
          tmp7 = 0;
          for (; tmp7 < 2; tmp7++) {
            switch (MMC_SWITCH_CAST(tmp7)) {
            case 0: {
              modelica_metatype tmpMeta9;
              modelica_integer tmp10;
              modelica_integer tmp11;
              modelica_integer tmp12;
              modelica_metatype tmpMeta13;
              modelica_metatype tmpMeta14;
              modelica_metatype tmpMeta15;
              modelica_metatype tmpMeta16;
              modelica_metatype tmpMeta17;
              modelica_metatype tmpMeta18;
              modelica_metatype tmpMeta19;
              modelica_metatype tmpMeta20;
              modelica_integer tmp21;
              modelica_integer tmp22;
              modelica_integer tmp23;
              if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,6,2) == 0) goto tmp6_end;
              
              /* Pattern matching succeeded */
              _dim_count = omc_NFInstNode_InstNode_dimensionCount(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_s), 3))));

              tmp10 = ((modelica_integer) 1); tmp11 = 1; tmp12 = _dim_count;
              if(!(((tmp11 > 0) && (tmp10 > tmp12)) || ((tmp11 < 0) && (tmp10 < tmp12))))
              {
                modelica_integer _i;
                for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp10, tmp12); _i += tmp11)
                {
                  tmpMeta9 = mmc_mk_cons(omc_NFSubscript_makeSplitIndex(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_s), 3))), _i), _outSubscripts);
                  _outSubscripts = tmpMeta9;
                }
              }

              if((!omc_NFInstNode_InstNode_refEqual(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_s), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_s), 3))))))
              {
                _dim_count = _dim_count - omc_NFInstNode_InstNode_dimensionCount(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_s), 2))));

                if((_dim_count > ((modelica_integer) 0)))
                {
                  _ty = omc_NFInstNode_InstNode_getType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_s), 3))));

                  tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
                  _cr_exp = omc_NFExpression_fromCref(threadData, omc_NFComponentRef_fromNode(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_s), 3))), _ty, tmpMeta13, 1), 0 /* false */);

                  _dims = omc_NFType_arrayDims(threadData, _ty);

                  tmp21 = ((modelica_integer) 1); tmp22 = 1; tmp23 = _dim_count;
                  if(!(((tmp22 > 0) && (tmp21 > tmp23)) || ((tmp22 < 0) && (tmp21 < tmp23))))
                  {
                    modelica_integer _i;
                    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp21, tmp23); _i += tmp22)
                    {
                      /* Pattern-matching assignment */
                      tmpMeta14 = _dims;
                      if (listEmpty(tmpMeta14)) goto goto_5;
                      tmpMeta15 = MMC_CAR(tmpMeta14);
                      tmpMeta16 = MMC_CDR(tmpMeta14);
                      _dim = tmpMeta15;
                      _dims = tmpMeta16;

                      if(omc_NFDimension_isKnown(threadData, _dim, 1 /* true */))
                      {
                        tmpMeta17 = mmc_mk_cons(omc_NFDimension_sizeExp(threadData, _dim), _fillDimensions);
                        _fillDimensions = tmpMeta17;
                      }
                      else
                      {
                        tmpMeta19 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer(_i));
                        tmpMeta20 = mmc_mk_box3(17, &NFExpression_SIZE__desc, _cr_exp, mmc_mk_some(tmpMeta19));
                        tmpMeta18 = mmc_mk_cons(tmpMeta20, _fillDimensions);
                        _fillDimensions = tmpMeta18;
                      }
                    }
                  }
                }
              }
              tmpMeta4 = _outSubscripts;
              goto tmp6_done;
            }
            case 1: {
              modelica_metatype tmpMeta24;
              
              /* Pattern matching succeeded */
              tmpMeta24 = mmc_mk_cons(_s, _outSubscripts);
              tmpMeta4 = tmpMeta24;
              goto tmp6_done;
            }
            }
            goto tmp6_end;
            tmp6_end: ;
          }
          goto goto_5;
          goto_5:;
          MMC_THROW_INTERNAL();
          goto tmp6_done;
          tmp6_done:;
        }
      }
      _outSubscripts = tmpMeta4;
    }
  }

  _outSubscripts = omc_List_trim(threadData, _outSubscripts, boxvar_NFSubscript_isWhole);

  _outSubscripts = listReverseInPlace(_outSubscripts);
  _return: OMC_LABEL_UNUSED
  if (out_fillDimensions) { *out_fillDimensions = _fillDimensions; }
  return _outSubscripts;
}
modelica_metatype boxptr_NFTyping_expandProxySubscripts(threadData_t *threadData, modelica_metatype _subscripts, modelica_metatype _context, modelica_metatype *out_fillDimensions)
{
  modelica_integer tmp1;
  modelica_metatype _outSubscripts = NULL;
  modelica_metatype tmpMeta2;
  tmp1 = mmc_unbox_integer(_context);
  _outSubscripts = omc_NFTyping_expandProxySubscripts(threadData, _subscripts, tmp1, out_fillDimensions);
  /* skip box _outSubscripts; list<NFSubscript> */
  /* skip box _fillDimensions; list<NFExpression> */
  return _outSubscripts;
}

DLLDirection
modelica_metatype omc_NFTyping_typeSubscriptedExp(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_integer _context, modelica_metatype _info, modelica_metatype *out_ty, modelica_integer *out_variability, modelica_integer *out_purity)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _ty = NULL;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _e = NULL;
  modelica_metatype _subs = NULL;
  modelica_metatype _expanded_subs = NULL;
  modelica_metatype _fill_dims = NULL;
  modelica_boolean _split;
  modelica_integer _subs_var;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_integer tmp6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  modelica_metatype tmpMeta16;
  modelica_metatype tmpMeta17;
  modelica_metatype tmpMeta18;
  modelica_metatype tmpMeta19;
  modelica_metatype tmpMeta20;
  modelica_metatype tmpMeta21;
  modelica_metatype tmpMeta22;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  // _ty has no default value.
  // _variability has no default value.
  // _purity has no default value.
  // _e has no default value.
  // _subs has no default value.
  // _expanded_subs has no default value.
  // _fill_dims has no default value.
  // _split has no default value.
  // _subs_var has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _exp;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,26,4) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 4));
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 5));
  tmp6 = mmc_unbox_integer(tmpMeta5);
  _e = tmpMeta2;
  _subs = tmpMeta3;
  _ty = tmpMeta4;
  _split = tmp6  /* pattern as ty=Boolean */;

  if(_split)
  {
    _expanded_subs = omc_NFTyping_expandProxySubscripts(threadData, _subs, _context ,&_fill_dims);

    _exp = omc_NFTyping_typeSubscriptedExp2(threadData, _e, _expanded_subs, _context, _info ,&_ty ,&_variability ,&_purity);

    if((!listEmpty(_fill_dims)))
    {
      _fill_dims = listReverseInPlace(_fill_dims);

      {
        modelica_metatype __omcQ_24tmpVar25;
        modelica_metatype* tmp8;
        modelica_metatype tmpMeta9;
        modelica_metatype __omcQ_24tmpVar24;
        modelica_integer tmp10;
        modelica_metatype _d_loopVar = 0;
        modelica_metatype _d;
        _d_loopVar = _fill_dims;
        tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
        __omcQ_24tmpVar25 = tmpMeta9; /* defaultValue */
        tmp8 = &__omcQ_24tmpVar25;
        while(1) {
          tmp10 = 1;
          if (!listEmpty(_d_loopVar)) {
            _d = MMC_CAR(_d_loopVar);
            _d_loopVar = MMC_CDR(_d_loopVar);
            tmp10--;
          }
          if (tmp10 == 0) {
            __omcQ_24tmpVar24 = omc_NFDimension_fromExp(threadData, _d, 1);
            *tmp8 = mmc_mk_cons(__omcQ_24tmpVar24,0);
            tmp8 = &MMC_CDR(*tmp8);
          } else if (tmp10 == 1) {
            break;
          } else {
            MMC_THROW_INTERNAL();
          }
        }
        *tmp8 = mmc_mk_nil();
        tmpMeta7 = __omcQ_24tmpVar25;
      }
      _ty = omc_NFType_liftArrayLeftList(threadData, _ty, tmpMeta7);

      tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
      tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
      tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
      tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
      tmpMeta15 = MMC_REFSTRUCTLIT(mmc_nil);
      tmpMeta16 = MMC_REFSTRUCTLIT(mmc_nil);
      tmpMeta17 = MMC_REFSTRUCTLIT(mmc_nil);
      tmpMeta18 = mmc_mk_box14(3, &NFFunction_Function_FUNCTION__desc, _OMC_LIT212, _OMC_LIT213, tmpMeta11, tmpMeta12, tmpMeta13, tmpMeta14, _OMC_LIT8, _OMC_LIT217, tmpMeta15, tmpMeta16, listArray(tmpMeta17), _OMC_LIT218, _OMC_LIT219);
      tmpMeta19 = mmc_mk_cons(_exp, _fill_dims);
      tmpMeta20 = mmc_mk_box2(16, &NFExpression_CALL__desc, omc_NFCall_makeTypedCall(threadData, tmpMeta18, tmpMeta19, (modelica_integer)_variability, (modelica_integer)_purity, _ty));
      _exp = tmpMeta20;
    }

    if((!listEmpty(_expanded_subs)))
    {
      _ty = omc_NFType_subscript(threadData, _ty, _expanded_subs, 0 /* false */);

      if(omc_NFType_isUnknown(threadData, _ty))
      {
        tmpMeta21 = mmc_mk_box5(29, &NFExpression_SUBSCRIPTED__EXP__desc, _exp, _expanded_subs, _ty, mmc_mk_boolean(1 /* true */));
        _exp = tmpMeta21;
      }
      else
      {
        _exp = omc_NFExpression_applySubscripts(threadData, _expanded_subs, _exp, 0 /* false */);
      }

      if(((modelica_integer)_purity == 1))
      {
        _purity = omc_NFSubscript_purityList(threadData, _expanded_subs);
      }

      if(((modelica_integer)_variability != 7))
      {
        _variability = omc_NFPrefixes_variabilityMax(threadData, (modelica_integer)_variability, omc_NFSubscript_variabilityList(threadData, _expanded_subs));
      }
    }
  }
  else
  {
    _e = omc_NFTyping_typeExp(threadData, _e, _context, _info, 0 /* false */ ,&_ty ,&_variability ,&_purity);

    _subs = omc_NFTyping_typeSubscripts(threadData, _subs, _ty, _exp, _context, _info ,&_subs_var);

    _ty = omc_NFType_subscript(threadData, _ty, _subs, 1 /* true */);

    tmpMeta22 = mmc_mk_box5(29, &NFExpression_SUBSCRIPTED__EXP__desc, _e, _subs, _ty, mmc_mk_boolean(0 /* false */));
    _exp = tmpMeta22;
  }
  _return: OMC_LABEL_UNUSED
  if (out_ty) { *out_ty = _ty; }
  if (out_variability) { *out_variability = _variability; }
  if (out_purity) { *out_purity = _purity; }
  return _exp;
}
modelica_metatype boxptr_NFTyping_typeSubscriptedExp(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _context, modelica_metatype _info, modelica_metatype *out_ty, modelica_metatype *out_variability, modelica_metatype *out_purity)
{
  modelica_integer tmp1;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _exp = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _exp = omc_NFTyping_typeSubscriptedExp(threadData, __omcQ_24in_5Fexp, tmp1, _info, out_ty, &_variability, &_purity);
  /* skip box _exp; NFExpression */
  /* skip box _ty; NFType */
  if (out_variability) { *out_variability = mmc_mk_icon(_variability); }
  if (out_purity) { *out_purity = mmc_mk_icon(_purity); }
  return _exp;
}

DLLDirection
modelica_metatype omc_NFTyping_typeRecordExp(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_integer _context, modelica_metatype _info, modelica_metatype *out_ty, modelica_integer *out_variability, modelica_integer *out_purity)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _ty = NULL;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _path = NULL;
  modelica_metatype _elems = NULL;
  modelica_metatype _ty_elems = NULL;
  modelica_metatype tmpMeta1;
  modelica_integer _var;
  modelica_integer _pur;
  modelica_integer _next_context;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  // _ty has no default value.
  _variability = 1;
  _purity = 1;
  // _path has no default value.
  // _elems has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _ty_elems = tmpMeta1;
  // _var has no default value.
  // _pur has no default value.
  // _next_context has no default value.
  /* Pattern-matching assignment */
  tmpMeta2 = _exp;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta2,12,3) == 0) MMC_THROW_INTERNAL();
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 3));
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 4));
  _path = tmpMeta3;
  _ty = tmpMeta4;
  _elems = tmpMeta5;

  _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 4194304));

  {
    modelica_metatype _e;
    for (tmpMeta6 = _elems; !listEmpty(tmpMeta6); tmpMeta6=MMC_CDR(tmpMeta6))
    {
      _e = MMC_CAR(tmpMeta6);
      _e = omc_NFTyping_typeExp(threadData, _e, _context, _info, 0 /* false */ ,NULL ,&_var ,&_pur);

      _variability = omc_NFPrefixes_variabilityMax(threadData, (modelica_integer)_var, (modelica_integer)_variability);

      _purity = omc_NFPrefixes_purityMin(threadData, (modelica_integer)_pur, (modelica_integer)_purity);

      tmpMeta7 = mmc_mk_cons(_e, _ty_elems);
      _ty_elems = tmpMeta7;
    }
  }

  _exp = omc_NFExpression_makeRecord(threadData, _path, _ty, listReverseInPlace(_ty_elems));
  _return: OMC_LABEL_UNUSED
  if (out_ty) { *out_ty = _ty; }
  if (out_variability) { *out_variability = _variability; }
  if (out_purity) { *out_purity = _purity; }
  return _exp;
}
modelica_metatype boxptr_NFTyping_typeRecordExp(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _context, modelica_metatype _info, modelica_metatype *out_ty, modelica_metatype *out_variability, modelica_metatype *out_purity)
{
  modelica_integer tmp1;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _exp = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _exp = omc_NFTyping_typeRecordExp(threadData, __omcQ_24in_5Fexp, tmp1, _info, out_ty, &_variability, &_purity);
  /* skip box _exp; NFExpression */
  /* skip box _ty; NFType */
  if (out_variability) { *out_variability = mmc_mk_icon(_variability); }
  if (out_purity) { *out_purity = mmc_mk_icon(_purity); }
  return _exp;
}

DLLDirection
modelica_metatype omc_NFTyping_typeExpl(threadData_t *threadData, modelica_metatype _expl, modelica_integer _context, modelica_metatype _info, modelica_metatype *out_tyl, modelica_metatype *out_varl)
{
  modelica_metatype _explTyped = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _tyl = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype _varl = NULL;
  modelica_metatype tmpMeta3;
  modelica_metatype _exp = NULL;
  modelica_integer _var;
  modelica_metatype _ty = NULL;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _explTyped = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _tyl = tmpMeta2;
  tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
  _varl = tmpMeta3;
  // _exp has no default value.
  // _var has no default value.
  // _ty has no default value.
  {
    modelica_metatype _e;
    for (tmpMeta4 = listReverse(_expl); !listEmpty(tmpMeta4); tmpMeta4=MMC_CDR(tmpMeta4))
    {
      _e = MMC_CAR(tmpMeta4);
      _exp = omc_NFTyping_typeExp(threadData, _e, _context, _info, 0 /* false */ ,&_ty ,&_var, NULL);

      tmpMeta5 = mmc_mk_cons(_exp, _explTyped);
      _explTyped = tmpMeta5;

      tmpMeta6 = mmc_mk_cons(_ty, _tyl);
      _tyl = tmpMeta6;

      tmpMeta7 = mmc_mk_cons(mmc_mk_integer((modelica_integer)_var), _varl);
      _varl = tmpMeta7;
    }
  }
  _return: OMC_LABEL_UNUSED
  if (out_tyl) { *out_tyl = _tyl; }
  if (out_varl) { *out_varl = _varl; }
  return _explTyped;
}
modelica_metatype boxptr_NFTyping_typeExpl(threadData_t *threadData, modelica_metatype _expl, modelica_metatype _context, modelica_metatype _info, modelica_metatype *out_tyl, modelica_metatype *out_varl)
{
  modelica_integer tmp1;
  modelica_metatype _explTyped = NULL;
  modelica_metatype tmpMeta2;
  tmp1 = mmc_unbox_integer(_context);
  _explTyped = omc_NFTyping_typeExpl(threadData, _expl, tmp1, _info, out_tyl, out_varl);
  /* skip box _explTyped; list<NFExpression> */
  /* skip box _tyl; list<NFType> */
  /* skip box _varl; list<#enumeration(CONSTANT, STRUCTURAL_PARAMETER, PARAMETER, NON_STRUCTURAL_PARAMETER, DISCRETE, IMPLICITLY_DISCRETE, CONTINUOUS)> */
  return _explTyped;
}

DLLDirection
modelica_metatype omc_NFTyping_typeExp(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_integer _context, modelica_metatype _info, modelica_boolean _retype, modelica_metatype *out_ty, modelica_integer *out_variability, modelica_integer *out_purity)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _ty = NULL;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_integer tmp1_c2 __attribute__((unused)) = 0;
  modelica_integer tmp1_c3 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  // _ty has no default value.
  // _variability has no default value.
  // _purity has no default value.
  
  
  
  
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_integer _var1;
      modelica_integer _var2;
      modelica_integer _pur1;
      modelica_integer _pur2;
      modelica_metatype _ty1 = NULL;
      modelica_metatype _ty2 = NULL;
      modelica_integer _next_context;
      int tmp4;
      // _e1 has no default value.
      // _e2 has no default value.
      // _var1 has no default value.
      // _var2 has no default value.
      // _pur1 has no default value.
      // _pur2 has no default value.
      // _ty1 has no default value.
      // _ty2 has no default value.
      // _next_context has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = _OMC_LIT170;
          tmp1_c2 = 1;
          tmp1_c3 = 1;
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = _OMC_LIT18;
          tmp1_c2 = 1;
          tmp1_c3 = 1;
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = _OMC_LIT74;
          tmp1_c2 = 1;
          tmp1_c3 = 1;
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = _OMC_LIT80;
          tmp1_c2 = 1;
          tmp1_c3 = 1;
          goto tmp3_done;
        }
        case 7: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          tmp1_c2 = 1;
          tmp1_c3 = 1;
          goto tmp3_done;
        }
        case 9: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_NFTyping_typeCrefExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _context, _info, &tmpMeta[0+1], &tmp1_c2, &tmp1_c3);
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          if((!omc_NFInstContext_inValidTypenameScope(threadData, _context)))
          {
            tmpMeta5 = mmc_mk_cons(omc_NFType_typenameString(threadData, omc_NFType_arrayElementType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))), MMC_REFSTRUCTLIT(mmc_nil));
            omc_Error_addSourceMessage(threadData, _OMC_LIT222, tmpMeta5, _info);

            goto goto_2;
          }
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          tmp1_c2 = 1;
          tmp1_c3 = 1;
          goto tmp3_done;
        }
        case 11: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_NFTyping_typeArray(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))), _context, _info, &tmpMeta[0+1], &tmp1_c2, &tmp1_c3);
          goto tmp3_done;
        }
        case 12: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_NFTyping_typeMatrix(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _context, _info, &tmpMeta[0+1], &tmp1_c2, &tmp1_c3);
          goto tmp3_done;
        }
        case 13: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_NFTyping_typeRange(threadData, _exp, _context, _info, &tmpMeta[0+1], &tmp1_c2, &tmp1_c3);
          goto tmp3_done;
        }
        case 14: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_NFTyping_typeTuple(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _context, _info, &tmpMeta[0+1], &tmp1_c2, &tmp1_c3);
          goto tmp3_done;
        }
        case 17: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_NFTyping_typeSize(threadData, _exp, _context, _info, 1 /* true */, &tmpMeta[0+1], &tmp1_c2, &tmp1_c3);
          goto tmp3_done;
        }
        case 18: {
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
          omc_Error_addSourceMessage(threadData, _OMC_LIT225, tmpMeta6, _info);
          goto goto_2;
          goto tmp3_done;
        }
        case 19: {
          
          /* Pattern matching succeeded */
          _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 4194304));

          _e1 = omc_NFTyping_typeExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _next_context, _info, 0 /* false */ ,&_ty1 ,&_var1 ,&_pur1);

          _e2 = omc_NFTyping_typeExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _next_context, _info, 0 /* false */ ,&_ty2 ,&_var2 ,&_pur2);

          _exp = omc_NFTypeCheck_checkBinaryOperation(threadData, _e1, _ty1, (modelica_integer)_var1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e2, _ty2, (modelica_integer)_var2, _context, _info, _retype ,&_ty);
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = _ty;
          tmp1_c2 = omc_NFPrefixes_variabilityMax(threadData, (modelica_integer)_var1, (modelica_integer)_var2);
          tmp1_c3 = omc_NFPrefixes_purityMin(threadData, (modelica_integer)_pur1, (modelica_integer)_pur2);
          goto tmp3_done;
        }
        case 20: {
          
          /* Pattern matching succeeded */
          _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 4194304));

          _e1 = omc_NFTyping_typeExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _next_context, _info, 0 /* false */ ,&_ty1 ,&_var1 ,&_pur1);

          _exp = omc_NFTypeCheck_checkUnaryOperation(threadData, _e1, _ty1, (modelica_integer)_var1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _context, _info ,&_ty);
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = _ty;
          tmp1_c2 = (modelica_integer)_var1;
          tmp1_c3 = (modelica_integer)_pur1;
          goto tmp3_done;
        }
        case 21: {
          
          /* Pattern matching succeeded */
          _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 4194304));

          _e1 = omc_NFTyping_typeExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _next_context, _info, 0 /* false */ ,&_ty1 ,&_var1 ,&_pur1);

          _e2 = omc_NFTyping_typeExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _next_context, _info, 0 /* false */ ,&_ty2 ,&_var2 ,&_pur2);

          _exp = omc_NFTypeCheck_checkLogicalBinaryOperation(threadData, _e1, _ty1, (modelica_integer)_var1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e2, _ty2, (modelica_integer)_var2, _context, _info ,&_ty);
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = _ty;
          tmp1_c2 = omc_NFPrefixes_variabilityMax(threadData, (modelica_integer)_var1, (modelica_integer)_var2);
          tmp1_c3 = omc_NFPrefixes_purityMin(threadData, (modelica_integer)_pur1, (modelica_integer)_pur2);
          goto tmp3_done;
        }
        case 22: {
          
          /* Pattern matching succeeded */
          _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 4194304));

          _e1 = omc_NFTyping_typeExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _next_context, _info, 0 /* false */ ,&_ty1 ,&_var1 ,&_pur1);

          _exp = omc_NFTypeCheck_checkLogicalUnaryOperation(threadData, _e1, _ty1, (modelica_integer)_var1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _context, _info ,&_ty);
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = _ty;
          tmp1_c2 = (modelica_integer)_var1;
          tmp1_c3 = (modelica_integer)_pur1;
          goto tmp3_done;
        }
        case 23: {
          
          /* Pattern matching succeeded */
          _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 4194304));

          _e1 = omc_NFTyping_typeExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _next_context, _info, 0 /* false */ ,&_ty1 ,&_var1 ,&_pur1);

          _e2 = omc_NFTyping_typeExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _next_context, _info, 0 /* false */ ,&_ty2 ,&_var2 ,&_pur2);

          _exp = omc_NFTypeCheck_checkRelationOperation(threadData, _e1, _ty1, (modelica_integer)_var1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e2, _ty2, (modelica_integer)_var2, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)))), _context, _info ,&_ty);

          _variability = omc_NFPrefixes_variabilityMax(threadData, (modelica_integer)_var1, (modelica_integer)_var2);

          _purity = omc_NFPrefixes_purityMin(threadData, (modelica_integer)_pur1, (modelica_integer)_pur2);

          if(((!omc_NFInstContext_inNoEvent(threadData, _context)) && ((modelica_integer)_variability == 7)))
          {
            _variability = 5;
          }
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = _ty;
          tmp1_c2 = (modelica_integer)_variability;
          tmp1_c3 = (modelica_integer)_purity;
          goto tmp3_done;
        }
        case 25: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_NFTyping_typeIfExpression(threadData, _exp, _context, _info, &tmpMeta[0+1], &tmp1_c2, &tmp1_c3);
          goto tmp3_done;
        }
        case 15: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_NFTyping_typeRecordExp(threadData, _exp, _context, _info, &tmpMeta[0+1], &tmp1_c2, &tmp1_c3);
          goto tmp3_done;
        }
        case 16: {
          
          /* Pattern matching succeeded */
          _e1 = omc_NFCall_typeCall(threadData, _exp, _context, _info, _retype ,&_ty ,&_var1 ,&_pur1);

          if((omc_NFType_isTuple(threadData, _ty) && (!omc_NFInstContext_isSingleExpression(threadData, _context))))
          {
            _ty = omc_NFType_firstTupleType(threadData, _ty);

            _e1 = omc_NFExpression_tupleElement(threadData, _e1, _ty, ((modelica_integer) 1));
          }
          tmpMeta[0+0] = _e1;
          tmpMeta[0+1] = _ty;
          tmp1_c2 = (modelica_integer)_var1;
          tmp1_c3 = (modelica_integer)_pur1;
          goto tmp3_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 4194304));
          tmpMeta[0+0] = omc_NFTyping_typeExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _next_context, _info, _retype, &tmpMeta[0+1], &tmp1_c2, &tmp1_c3);
          goto tmp3_done;
        }
        case 29: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_NFTyping_typeSubscriptedExp(threadData, _exp, _context, _info, &tmpMeta[0+1], &tmp1_c2, &tmp1_c3);
          goto tmp3_done;
        }
        case 32: {
          modelica_metatype tmpMeta7;
          
          /* Pattern matching succeeded */
          _e1 = omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));

          _e1 = omc_NFTyping_typeExp(threadData, _e1, _context, _info, _retype ,&_ty ,&_variability ,&_purity);

          tmpMeta7 = MMC_TAGPTR(mmc_alloc_words(3));
          memcpy(MMC_UNTAGPTR(tmpMeta7), MMC_UNTAGPTR(_exp), 3*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta7))[2] = omc_Mutable_create(threadData, _e1);
          _exp = tmpMeta7;
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = _ty;
          tmp1_c2 = (modelica_integer)_variability;
          tmp1_c3 = (modelica_integer)_purity;
          goto tmp3_done;
        }
        case 34: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_NFFunction_Function_typePartialApplication(threadData, _exp, _context, _info, &tmpMeta[0+1], &tmp1_c2, &tmp1_c3);
          goto tmp3_done;
        }
        case 35: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = _OMC_LIT74;
          tmp1_c2 = 1;
          tmp1_c3 = 1;
          goto tmp3_done;
        }
        case 24: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_NFTyping_typeExp(threadData, omc_NFSimplifyExp_splitMultary(threadData, _exp), _context, _info, _retype, &tmpMeta[0+1], &tmp1_c2, &tmp1_c3);
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = omc_NFExpression_typeOf(threadData, _exp);
          tmp1_c2 = omc_NFExpression_variability(threadData, _exp);
          tmp1_c3 = omc_NFExpression_purity(threadData, _exp);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta[0+0];
  _ty = tmpMeta[0+1];
  _variability = tmp1_c2;
  _purity = tmp1_c3;

  if((omc_NFInstContext_inDiscreteScope(threadData, _context) && ((modelica_integer)_variability == 7)))
  {
    _variability = 5;
  }
  _return: OMC_LABEL_UNUSED
  if (out_ty) { *out_ty = _ty; }
  if (out_variability) { *out_variability = _variability; }
  if (out_purity) { *out_purity = _purity; }
  return _exp;
}
modelica_metatype boxptr_NFTyping_typeExp(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _context, modelica_metatype _info, modelica_metatype _retype, modelica_metatype *out_ty, modelica_metatype *out_variability, modelica_metatype *out_purity)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer _variability;
  modelica_integer _purity;
  modelica_metatype _exp = NULL;
  tmp1 = mmc_unbox_integer(_context);
  tmp2 = mmc_unbox_integer(_retype);
  _exp = omc_NFTyping_typeExp(threadData, __omcQ_24in_5Fexp, tmp1, _info, tmp2, out_ty, &_variability, &_purity);
  /* skip box _exp; NFExpression */
  /* skip box _ty; NFType */
  if (out_variability) { *out_variability = mmc_mk_icon(_variability); }
  if (out_purity) { *out_purity = mmc_mk_icon(_purity); }
  return _exp;
}

DLLDirection
modelica_metatype omc_NFTyping_typeTypeAttribute(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fattribute, modelica_metatype _attrType, modelica_metatype _component, modelica_integer _context)
{
  modelica_metatype _attribute = NULL;
  modelica_string _name = NULL;
  modelica_metatype _binding = NULL;
  modelica_metatype _parent = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _attribute = __omcQ_24in_5Fattribute;
  // _name has no default value.
  // _binding has no default value.
  // _parent has no default value.
  // _ty has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _attribute;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 4; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(!omc_NFModifier_ModTable_isEmpty(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_attribute), 6)))))) goto tmp3_end;
          tmpMeta6 = stringAppend((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_attribute), 2))),_OMC_LIT226);
          tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta8 = stringAppend(tmpMeta6,omc_Util_tuple21(threadData, listHead(omc_NFModifier_ModTable_toList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_attribute), 6))), tmpMeta7))));
          _name = tmpMeta8;

          tmpMeta9 = mmc_mk_cons(_name, mmc_mk_cons(omc_NFType_toString(threadData, _attrType), MMC_REFSTRUCTLIT(mmc_nil)));
          omc_Error_addSourceMessage(threadData, _OMC_LIT229, tmpMeta9, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_attribute), 7))));
          goto goto_2;
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_NFBinding_isUnbound(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_attribute), 5))))) goto tmp3_end;
          tmpMeta1 = _OMC_LIT230;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,3,9) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = _attribute;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          
          _name = tmpMeta11;
          _binding = tmpMeta12;
          /* Pattern matching succeeded */
          if(omc_NFBinding_isBound(threadData, _binding))
          {
            _binding = omc_NFTyping_typeBinding(threadData, _binding, _context);

            _parent = omc_NFInstNode_InstNode_parent(threadData, _component);

            _binding = omc_NFTypeCheck_matchBinding(threadData, _binding, _attrType, _name, _parent, _context);

            if(((omc_NFBinding_variability(threadData, _binding) >= 5) && (!omc_NFInstContext_inFunction(threadData, _context))))
            {
              tmpMeta14 = stringAppend(_OMC_LIT234,omc_NFBinding_toString(threadData, _binding, _OMC_LIT27));
              tmpMeta15 = stringAppend(tmpMeta14,_OMC_LIT234);
              tmpMeta13 = mmc_mk_cons(_name, mmc_mk_cons(omc_NFPrefixes_variabilityString(threadData, 3), mmc_mk_cons(tmpMeta15, mmc_mk_cons(omc_NFPrefixes_variabilityString(threadData, omc_NFBinding_variability(threadData, _binding)), MMC_REFSTRUCTLIT(mmc_nil)))));
              omc_Error_addSourceMessage(threadData, _OMC_LIT233, tmpMeta13, omc_NFBinding_getInfo(threadData, _binding));

              goto goto_2;
            }

            tmpMeta16 = MMC_TAGPTR(mmc_alloc_words(8));
            memcpy(MMC_UNTAGPTR(tmpMeta16), MMC_UNTAGPTR(_attribute), 8*sizeof(modelica_metatype));
            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta16))[5] = _binding;
            _attribute = tmpMeta16;
          }
          tmpMeta1 = _attribute;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _attribute = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _attribute;
}
modelica_metatype boxptr_NFTyping_typeTypeAttribute(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fattribute, modelica_metatype _attrType, modelica_metatype _component, modelica_metatype _context)
{
  modelica_integer tmp1;
  modelica_metatype _attribute = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _attribute = omc_NFTyping_typeTypeAttribute(threadData, __omcQ_24in_5Fattribute, _attrType, _component, tmp1);
  /* skip box _attribute; NFModifier.Modifier */
  return _attribute;
}

DLLDirection
modelica_metatype omc_NFTyping_typeComponentCondition(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcondition, modelica_integer _context, modelica_boolean _evaluate)
{
  modelica_metatype _condition = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _condition = __omcQ_24in_5Fcondition;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _condition;
    {
      modelica_metatype _exp = NULL;
      modelica_metatype _ty = NULL;
      modelica_integer _var;
      modelica_integer _purity;
      modelica_metatype _info = NULL;
      modelica_integer _mk;
      modelica_integer _eval_state;
      modelica_integer _next_context;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _exp has no default value.
      // _ty has no default value.
      // _var has no default value.
      // _purity has no default value.
      // _info has no default value.
      // _mk has no default value.
      // _eval_state has no default value.
      // _next_context has no default value.
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta13;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,6) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _exp = tmpMeta6;
          /* Pattern matching succeeded */
          _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 1048576));

          _info = omc_NFBinding_getInfo(threadData, _condition);

          _exp = omc_NFTyping_typeExp(threadData, _exp, _next_context, _info, 0 /* false */ ,&_ty ,&_var ,&_purity);

          _exp = omc_NFTypeCheck_matchTypes(threadData, _ty, _OMC_LIT80, _exp, ((modelica_integer) 0) ,NULL ,&_mk);

          if(omc_NFTypeCheck_isIncompatibleMatch(threadData, (modelica_integer)_mk))
          {
            tmpMeta7 = mmc_mk_cons(omc_NFExpression_toString(threadData, _exp), mmc_mk_cons(omc_NFType_toString(threadData, _ty), MMC_REFSTRUCTLIT(mmc_nil)));
            omc_Error_addSourceMessage(threadData, _OMC_LIT47, tmpMeta7, _info);

            goto goto_2;
          }

          if(((modelica_integer)_var > 3))
          {
            tmpMeta8 = mmc_mk_cons(omc_NFExpression_toString(threadData, _exp), MMC_REFSTRUCTLIT(mmc_nil));
            omc_Error_addSourceMessage(threadData, _OMC_LIT237, tmpMeta8, _info);

            goto goto_2;
          }

          _eval_state = 1;

          if(_evaluate)
          {
            omc_ErrorExt_setCheckpoint(threadData, _OMC_LIT238);

            { /* matchcontinue expression */
              {
                volatile mmc_switch_type tmp11;
                int tmp12;
                tmp11 = 0;
                MMC_TRY_INTERNAL(mmc_jumper)
                tmp10_top:
                threadData->mmc_jumper = &new_mmc_jumper;
                for (; tmp11 < 2; tmp11++) {
                  switch (MMC_SWITCH_CAST(tmp11)) {
                  case 0: {
                    /* Pattern matching succeeded */
                    _exp = omc_NFCeval_evalExp(threadData, _exp, omc_NFCeval_EvalTarget_new(threadData, _info, _next_context, mmc_mk_none()));

                    _exp = omc_NFTyping_simplifyDimExp(threadData, _exp);

                    _eval_state = 3;
                    goto tmp10_done;
                  }
                  case 1: {
                    /* Pattern matching succeeded */
                    goto tmp10_done;
                  }
                  }
                  goto tmp10_end;
                  tmp10_end: ;
                }
                goto goto_9;
                tmp10_done:
                (void)tmp11;
                MMC_RESTORE_INTERNAL(mmc_jumper);
                goto tmp10_done2;
                goto_9:;
                MMC_CATCH_INTERNAL(mmc_jumper);
                if (++tmp11 < 2) {
                  goto tmp10_top;
                }
                goto goto_2;
                tmp10_done2:;
              }
            }
            ;

            omc_ErrorExt_rollBack(threadData, _OMC_LIT238);
          }
          tmpMeta13 = mmc_mk_box10(6, &NFBinding_TYPED__BINDING__desc, _exp, _ty, mmc_mk_integer((modelica_integer)_var), mmc_mk_integer((modelica_integer)_purity), mmc_mk_integer(1), omc_Mutable_create(threadData, mmc_mk_integer((modelica_integer)_eval_state)), mmc_mk_boolean(0 /* false */), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_condition), 6))), _info);
          tmpMeta1 = tmpMeta13;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _condition = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _condition;
}
modelica_metatype boxptr_NFTyping_typeComponentCondition(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcondition, modelica_metatype _context, modelica_metatype _evaluate)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _condition = NULL;
  tmp1 = mmc_unbox_integer(_context);
  tmp2 = mmc_unbox_integer(_evaluate);
  _condition = omc_NFTyping_typeComponentCondition(threadData, __omcQ_24in_5Fcondition, tmp1, tmp2);
  /* skip box _condition; NFBinding */
  return _condition;
}

DLLDirection
modelica_metatype omc_NFTyping_typeBinding(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fbinding, modelica_integer _context)
{
  modelica_metatype _binding = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _binding = __omcQ_24in_5Fbinding;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _binding;
    {
      modelica_metatype _exp = NULL;
      modelica_metatype _ty = NULL;
      modelica_integer _var;
      modelica_integer _purity;
      modelica_metatype _info = NULL;
      int tmp4;
      // _exp has no default value.
      // _ty has no default value.
      // _var has no default value.
      // _purity has no default value.
      // _info has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 5: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,6) == 0) goto tmp3_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _exp = tmpMeta5;
          /* Pattern matching succeeded */
          _info = omc_NFBinding_getInfo(threadData, _binding);

          _exp = omc_NFTyping_typeExp(threadData, _exp, _context, _info, 0 /* false */ ,&_ty ,&_var ,&_purity);
          tmpMeta6 = mmc_mk_box10(6, &NFBinding_TYPED__BINDING__desc, _exp, _ty, mmc_mk_integer((modelica_integer)_var), mmc_mk_integer((modelica_integer)_purity), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_binding), 5))), omc_Mutable_create(threadData, mmc_mk_integer(1)), mmc_mk_boolean(0 /* false */), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_binding), 6))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_binding), 7))));
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _binding;
          goto tmp3_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _binding;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          omc_Error_assertion(threadData, 0 /* false */, _OMC_LIT239, _OMC_LIT240);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _binding = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _binding;
}
modelica_metatype boxptr_NFTyping_typeBinding(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fbinding, modelica_metatype _context)
{
  modelica_integer tmp1;
  modelica_metatype _binding = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _binding = omc_NFTyping_typeBinding(threadData, __omcQ_24in_5Fbinding, tmp1);
  /* skip box _binding; NFBinding */
  return _binding;
}

DLLDirection
modelica_integer omc_NFTyping_checkComponentBindingVariability(threadData_t *threadData, modelica_string _name, modelica_metatype _component, modelica_metatype _binding, modelica_integer _context)
{
  modelica_integer _var;
  modelica_integer _comp_var;
  modelica_integer _comp_eff_var;
  modelica_integer _bind_var;
  modelica_integer _bind_eff_var;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _var has no default value.
  // _comp_var has no default value.
  // _comp_eff_var has no default value.
  // _bind_var has no default value.
  // _bind_eff_var has no default value.
  _comp_var = omc_NFComponent_variability(threadData, _component);

  _comp_eff_var = omc_NFPrefixes_effectiveVariability(threadData, (modelica_integer)_comp_var);

  _bind_var = omc_NFBinding_variability(threadData, _binding);

  _bind_eff_var = omc_NFPrefixes_effectiveVariability(threadData, (modelica_integer)_bind_var);

  if((((modelica_integer)_bind_eff_var > (modelica_integer)_comp_eff_var) && (!omc_NFInstContext_inFunction(threadData, _context))))
  {
    tmpMeta2 = stringAppend(_OMC_LIT234,omc_NFBinding_toString(threadData, omc_NFComponent_getBinding(threadData, _component), _OMC_LIT27));
    tmpMeta3 = stringAppend(tmpMeta2,_OMC_LIT234);
    tmpMeta1 = mmc_mk_cons(_name, mmc_mk_cons(omc_NFPrefixes_variabilityString(threadData, (modelica_integer)_comp_eff_var), mmc_mk_cons(tmpMeta3, mmc_mk_cons(omc_NFPrefixes_variabilityString(threadData, (modelica_integer)_bind_eff_var), MMC_REFSTRUCTLIT(mmc_nil)))));
    omc_Error_addSourceMessage(threadData, _OMC_LIT233, tmpMeta1, omc_NFBinding_getInfo(threadData, _binding));

    if((!omc_NFInstContext_inRelaxed(threadData, _context)))
    {
      MMC_THROW_INTERNAL();
    }
  }

  if((((modelica_integer)_comp_var == 3) && ((((modelica_integer)_bind_var == 2) && omc_NFBinding_isCrefExp(threadData, _binding)) || ((modelica_integer)_bind_var == 4))))
  {
    _var = (modelica_integer)_bind_var;
  }
  else
  {
    _var = (modelica_integer)_comp_var;
  }
  _return: OMC_LABEL_UNUSED
  return _var;
}
modelica_metatype boxptr_NFTyping_checkComponentBindingVariability(threadData_t *threadData, modelica_metatype _name, modelica_metatype _component, modelica_metatype _binding, modelica_metatype _context)
{
  modelica_integer tmp1;
  modelica_integer _var;
  modelica_metatype out_var;
  tmp1 = mmc_unbox_integer(_context);
  _var = omc_NFTyping_checkComponentBindingVariability(threadData, _name, _component, _binding, tmp1);
  out_var = mmc_mk_icon(_var);
  return out_var;
}

DLLDirection
void omc_NFTyping_typeComponentBinding(threadData_t *threadData, modelica_metatype _component, modelica_integer _context, modelica_boolean _typeChildren)
{
  modelica_metatype _node = NULL;
  modelica_metatype _c = NULL;
  modelica_metatype _binding = NULL;
  modelica_metatype _cls = NULL;
  modelica_integer _matchKind;
  modelica_string _name = NULL;
  modelica_integer _comp_var;
  modelica_integer _comp_eff_var;
  modelica_integer _bind_var;
  modelica_integer _bind_eff_var;
  modelica_metatype _attrs = NULL;
  modelica_metatype _ty = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _node = omc_NFInstNode_InstNode_resolveOuter(threadData, _component);
  // _c has no default value.
  // _binding has no default value.
  // _cls has no default value.
  // _matchKind has no default value.
  // _name has no default value.
  // _comp_var has no default value.
  // _comp_eff_var has no default value.
  // _bind_var has no default value.
  // _bind_eff_var has no default value.
  // _attrs has no default value.
  // _ty has no default value.
  _c = omc_NFInstNode_InstNode_component(threadData, _node);

  if(omc_NFInstNode_InstNode_isOnlyOuter(threadData, _component))
  {
    goto _return;
  }

  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _c;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 10; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,8) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(omc_NFComponent_isDeleted(threadData, _c) || omc_NFComponent_isInvalid(threadData, _c))) goto tmp2_end;
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,8) == 0) goto tmp2_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta5,2,6) == 0) goto tmp2_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
          
          _attrs = tmpMeta6;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 8)))) == 3)) goto tmp2_end;
          _name = omc_NFInstNode_InstNode_name(threadData, _component);

          _binding = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 4)));

          omc_ErrorExt_setCheckpoint(threadData, _OMC_LIT241);

          { /* matchcontinue expression */
            {
              volatile mmc_switch_type tmp9;
              int tmp10;
              tmp9 = 0;
              MMC_TRY_INTERNAL(mmc_jumper)
              tmp8_top:
              threadData->mmc_jumper = &new_mmc_jumper;
              for (; tmp9 < 2; tmp9++) {
                switch (MMC_SWITCH_CAST(tmp9)) {
                case 0: {
                  modelica_metatype tmpMeta11;
                  modelica_metatype tmpMeta12;
                  /* Pattern matching succeeded */
                  _binding = omc_NFTyping_typeBinding(threadData, _binding, omc_NFInstContext_set(threadData, _context, ((modelica_integer) 524288)));

                  if((!((omc_NFInstContext_inAnnotation(threadData, _context) && (stringEqual(_name, _OMC_LIT242))) || omc_NFInstNode_InstNode_isEmpty(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 2)))))))
                  {
                    _binding = omc_NFTypeCheck_matchBinding(threadData, _binding, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 3))), _name, _node, _context);
                  }

                  _comp_var = omc_NFTyping_checkComponentBindingVariability(threadData, _name, _c, _binding, _context);

                  if(((modelica_integer)_comp_var != mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_attrs), 4))))))
                  {
                    tmpMeta11 = MMC_TAGPTR(mmc_alloc_words(11));
                    memcpy(MMC_UNTAGPTR(tmpMeta11), MMC_UNTAGPTR(_attrs), 11*sizeof(modelica_metatype));
                    ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta11))[4] = mmc_mk_integer((modelica_integer)_comp_var);
                    _attrs = tmpMeta11;

                    tmpMeta12 = MMC_TAGPTR(mmc_alloc_words(10));
                    memcpy(MMC_UNTAGPTR(tmpMeta12), MMC_UNTAGPTR(_c), 10*sizeof(modelica_metatype));
                    ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta12))[6] = _attrs;
                    _c = tmpMeta12;
                  }
                  goto tmp8_done;
                }
                case 1: {
                  modelica_metatype tmpMeta13;
                  /* Pattern matching succeeded */
                  if((omc_NFBinding_isBound(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 5)))) || omc_NFInstContext_inInstanceAPI(threadData, _context)))
                  {
                    tmpMeta13 = mmc_mk_box3(9, &NFBinding_INVALID__BINDING__desc, _binding, omc_ErrorExt_getCheckpointMessages(threadData));
                    _binding = tmpMeta13;
                  }
                  else
                  {
                    omc_ErrorExt_delCheckpoint(threadData, _OMC_LIT241);

                    goto goto_7;
                  }
                  goto tmp8_done;
                }
                }
                goto tmp8_end;
                tmp8_end: ;
              }
              goto goto_7;
              tmp8_done:
              (void)tmp9;
              MMC_RESTORE_INTERNAL(mmc_jumper);
              goto tmp8_done2;
              goto_7:;
              MMC_CATCH_INTERNAL(mmc_jumper);
              if (++tmp9 < 2) {
                goto tmp8_top;
              }
              goto goto_1;
              tmp8_done2:;
            }
          }
          ;

          omc_ErrorExt_delCheckpoint(threadData, _OMC_LIT241);

          tmpMeta14 = MMC_TAGPTR(mmc_alloc_words(10));
          memcpy(MMC_UNTAGPTR(tmpMeta14), MMC_UNTAGPTR(_c), 10*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta14))[4] = _binding;
          _c = tmpMeta14;

          tmpMeta15 = MMC_TAGPTR(mmc_alloc_words(10));
          memcpy(MMC_UNTAGPTR(tmpMeta15), MMC_UNTAGPTR(_c), 10*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta15))[8] = mmc_mk_integer(4);
          _c = tmpMeta15;

          omc_NFInstNode_InstNode_updateComponent(threadData, _c, _node);

          if((_typeChildren && (!omc_NFInstNode_InstNode_isEmpty(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 2)))))))
          {
            omc_NFTyping_typeBindings(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 2))), _context);
          }
          goto tmp2_done;
        }
        case 2: {
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,8) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 8)))) >= 3)) goto tmp2_end;
          if((mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 8)))) == 3))
          {
            if(omc_NFBinding_isTyped(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 4)))))
            {
              tmpMeta16 = MMC_TAGPTR(mmc_alloc_words(10));
              memcpy(MMC_UNTAGPTR(tmpMeta16), MMC_UNTAGPTR(_c), 10*sizeof(modelica_metatype));
              ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta16))[4] = omc_NFTypeCheck_matchBinding(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 3))), omc_NFInstNode_InstNode_name(threadData, _component), _node, _context);
              _c = tmpMeta16;

              omc_NFTyping_checkComponentBindingVariability(threadData, omc_NFInstNode_InstNode_name(threadData, _component), _c, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 4))), _context);
            }

            tmpMeta17 = MMC_TAGPTR(mmc_alloc_words(10));
            memcpy(MMC_UNTAGPTR(tmpMeta17), MMC_UNTAGPTR(_c), 10*sizeof(modelica_metatype));
            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta17))[8] = mmc_mk_integer(4);
            _c = tmpMeta17;

            omc_NFInstNode_InstNode_updateComponent(threadData, _c, _node);
          }

          if((_typeChildren && (!omc_NFInstNode_InstNode_isEmpty(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 2)))))))
          {
            omc_NFTyping_typeBindings(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 2))), _context);
          }
          goto tmp2_done;
        }
        case 3: {
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,8) == 0) goto tmp2_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta18,2,6) == 0) goto tmp2_end;
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
          
          _attrs = tmpMeta19;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 8)))) < 3)) goto tmp2_end;
          _name = omc_NFInstNode_InstNode_name(threadData, _component);

          _binding = omc_NFTyping_typeBinding(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 4))), omc_NFInstContext_set(threadData, _context, ((modelica_integer) 524288)));

          _comp_var = omc_NFTyping_checkComponentBindingVariability(threadData, _name, _c, _binding, _context);

          if(((modelica_integer)_comp_var != mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_attrs), 4))))))
          {
            tmpMeta20 = MMC_TAGPTR(mmc_alloc_words(11));
            memcpy(MMC_UNTAGPTR(tmpMeta20), MMC_UNTAGPTR(_attrs), 11*sizeof(modelica_metatype));
            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta20))[4] = mmc_mk_integer((modelica_integer)_comp_var);
            _attrs = tmpMeta20;

            tmpMeta21 = MMC_TAGPTR(mmc_alloc_words(10));
            memcpy(MMC_UNTAGPTR(tmpMeta21), MMC_UNTAGPTR(_c), 10*sizeof(modelica_metatype));
            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta21))[6] = _attrs;
            _c = tmpMeta21;
          }

          tmpMeta22 = MMC_TAGPTR(mmc_alloc_words(10));
          memcpy(MMC_UNTAGPTR(tmpMeta22), MMC_UNTAGPTR(_c), 10*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta22))[4] = _binding;
          _c = tmpMeta22;

          omc_NFInstNode_InstNode_updateComponent(threadData, _c, _node);
          goto tmp2_done;
        }
        case 4: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,8) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        case 5: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,2) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        case 6: {
          modelica_metatype tmpMeta23;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,2) == 0) goto tmp2_end;
          tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta23,2,0) == 0) goto tmp2_end;
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        case 7: {
          modelica_metatype tmpMeta24;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,2) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          tmpMeta24 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta24), MMC_UNTAGPTR(_c), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta24))[3] = omc_NFTyping_typeTypeAttribute(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 2))), _component, _context);
          _c = tmpMeta24;

          omc_NFInstNode_InstNode_updateComponent(threadData, _c, _node);
          goto tmp2_done;
        }
        case 8: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,2) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        case 9: {
          modelica_metatype tmpMeta25;
          
          /* Pattern matching succeeded */
          tmpMeta25 = stringAppend(_OMC_LIT243,omc_NFInstNode_InstNode_name(threadData, _node));
          omc_Error_assertion(threadData, 0 /* false */, tmpMeta25, _OMC_LIT244);
          goto goto_1;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return;
}
void boxptr_NFTyping_typeComponentBinding(threadData_t *threadData, modelica_metatype _component, modelica_metatype _context, modelica_metatype _typeChildren)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  tmp1 = mmc_unbox_integer(_context);
  tmp2 = mmc_unbox_integer(_typeChildren);
  omc_NFTyping_typeComponentBinding(threadData, _component, tmp1, tmp2);
  return;
}

DLLDirection
void omc_NFTyping_typeBindings(threadData_t *threadData, modelica_metatype _cls, modelica_integer _context)
{
  modelica_metatype _c = NULL;
  modelica_metatype _cls_tree = NULL;
  modelica_metatype _node = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _c has no default value.
  // _cls_tree has no default value.
  // _node has no default value.
  _c = omc_NFInstNode_InstNode_getClass(threadData, _cls);

  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _c;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 5; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_integer tmp8;
          modelica_integer tmp9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,5) == 0) goto tmp2_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta5,3,5) == 0) goto tmp2_end;
          
          _cls_tree = tmpMeta5;
          /* Pattern matching succeeded */
          {
            modelica_metatype _c;
            for (tmpMeta6 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls_tree), 4))), tmp9 = arrayLength(tmpMeta6), tmp8 = 1; tmp8 <= tmp9; tmp8++)
            {
              _c = arrayGet(tmpMeta6,tmp8);
              omc_NFTyping_typeComponentBinding(threadData, _c, _context, 1 /* true */);
            }
          }
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_integer tmp13;
          modelica_integer tmp14;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,3) == 0) goto tmp2_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,3,5) == 0) goto tmp2_end;
          
          _cls_tree = tmpMeta10;
          /* Pattern matching succeeded */
          {
            modelica_metatype _c;
            for (tmpMeta11 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls_tree), 4))), tmp14 = arrayLength(tmpMeta11), tmp13 = 1; tmp13 <= tmp14; tmp13++)
            {
              _c = arrayGet(tmpMeta11,tmp13);
              omc_NFTyping_typeComponentBinding(threadData, _c, _context, 1 /* true */);
            }
          }
          goto tmp2_done;
        }
        case 2: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,3) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        case 3: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _cls = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          ;
          goto tmp2_done;
        }
        case 4: {
          modelica_metatype tmpMeta15;
          
          /* Pattern matching succeeded */
          tmpMeta15 = stringAppend(_OMC_LIT245,omc_NFInstNode_InstNode_name(threadData, _cls));
          omc_Error_assertion(threadData, 0 /* false */, tmpMeta15, _OMC_LIT246);
          goto goto_1;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return;
}
void boxptr_NFTyping_typeBindings(threadData_t *threadData, modelica_metatype _cls, modelica_metatype _context)
{
  modelica_integer tmp1;
  tmp1 = mmc_unbox_integer(_context);
  omc_NFTyping_typeBindings(threadData, _cls, tmp1);
  return;
}

DLLDirection
modelica_metatype omc_NFTyping_getRecordElementBinding(threadData_t *threadData, modelica_metatype _component, modelica_integer _context, modelica_integer *out_parentDims)
{
  modelica_metatype _binding = NULL;
  modelica_integer _parentDims;
  modelica_metatype _parent = NULL;
  modelica_metatype _comp = NULL;
  modelica_metatype _exp = NULL;
  modelica_metatype _parent_binding = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _binding has no default value.
  _parentDims = ((modelica_integer) 0);
  // _parent has no default value.
  // _comp has no default value.
  // _exp has no default value.
  // _parent_binding has no default value.
  _parent = omc_NFInstNode_InstNode_instanceParent(threadData, _component);

  if(omc_NFInstNode_InstNode_isComponent(threadData, _parent))
  {
    _comp = omc_NFInstNode_InstNode_component(threadData, _parent);

    _parent_binding = omc_NFComponent_getBinding(threadData, _comp);

    if(omc_NFBinding_isUnbound(threadData, _parent_binding))
    {
      _binding = omc_NFTyping_getRecordElementBinding(threadData, _parent, _context ,&_parentDims);
    }
    else
    {
      _binding = omc_NFTyping_typeBinding(threadData, _parent_binding, omc_NFInstContext_set(threadData, _context, ((modelica_integer) 262144)));

      if((!referenceEq(_parent_binding, _binding)))
      {
        omc_NFInstNode_InstNode_componentApply(threadData, _parent, boxvar_NFComponent_setBinding, _binding);
      }
    }

    _parentDims = _parentDims + omc_NFComponent_dimensionCount(threadData, _comp);

    if(omc_NFBinding_isBound(threadData, _binding))
    {
      _binding = omc_NFBinding_recordFieldBinding(threadData, _component, _binding);
    }
  }
  else
  {
    _binding = _OMC_LIT247;
  }
  _return: OMC_LABEL_UNUSED
  if (out_parentDims) { *out_parentDims = _parentDims; }
  return _binding;
}
modelica_metatype boxptr_NFTyping_getRecordElementBinding(threadData_t *threadData, modelica_metatype _component, modelica_metatype _context, modelica_metatype *out_parentDims)
{
  modelica_integer tmp1;
  modelica_integer _parentDims;
  modelica_metatype _binding = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _binding = omc_NFTyping_getRecordElementBinding(threadData, _component, tmp1, &_parentDims);
  /* skip box _binding; NFBinding */
  if (out_parentDims) { *out_parentDims = mmc_mk_icon(_parentDims); }
  return _binding;
}

DLLDirection
modelica_metatype omc_NFTyping_makeDimension(threadData_t *threadData, modelica_metatype _dimExp, modelica_metatype _unevaledExp, modelica_integer _variability)
{
  modelica_metatype _outDimension = NULL;
  modelica_metatype _exp = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outDimension has no default value.
  _exp = _dimExp;
  if(omc_NFExpression_isArray(threadData, _exp))
  {
    if(omc_NFExpression_arrayAllEqual(threadData, _exp))
    {
      _exp = omc_NFExpression_arrayFirstScalar(threadData, _exp);
    }
  }

  _outDimension = omc_NFDimension_fromExp(threadData, _exp, (modelica_integer)_variability);
  _return: OMC_LABEL_UNUSED
  return _outDimension;
}
modelica_metatype boxptr_NFTyping_makeDimension(threadData_t *threadData, modelica_metatype _dimExp, modelica_metatype _unevaledExp, modelica_metatype _variability)
{
  modelica_integer tmp1;
  modelica_metatype _outDimension = NULL;
  tmp1 = mmc_unbox_integer(_variability);
  _outDimension = omc_NFTyping_makeDimension(threadData, _dimExp, _unevaledExp, tmp1);
  /* skip box _outDimension; NFDimension */
  return _outDimension;
}

DLLDirection
modelica_metatype omc_NFTyping_simplifyDimExp(threadData_t *threadData, modelica_metatype __omcQ_24in_5FdimExp)
{
  modelica_metatype _dimExp = NULL;
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _dimExp = __omcQ_24in_5FdimExp;
  // _exp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _dimExp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_NFExpression_arrayAllEqual(threadData, _dimExp)) goto tmp3_end;
          tmpMeta1 = omc_NFExpression_arrayFirstScalar(threadData, _dimExp);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmp7 = mmc_unbox_integer(tmpMeta6);
          if (1 /* true */ != tmp7) goto tmp3_end;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(omc_NFExpression_isArray(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dimExp), 2)))) && omc_NFExpression_arrayAllEqual(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dimExp), 2)))))) goto tmp3_end;
          tmpMeta1 = omc_NFExpression_arrayFirstScalar(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dimExp), 2))));
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _dimExp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _dimExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _dimExp;
}

DLLDirection
modelica_metatype omc_NFTyping_subscriptDimExp(threadData_t *threadData, modelica_metatype __omcQ_24in_5FdimExp, modelica_metatype _component)
{
  modelica_metatype _dimExp = NULL;
  modelica_integer _exp_dims;
  modelica_integer _parent_dims;
  modelica_metatype _parent = NULL;
  modelica_metatype _subs = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_integer tmp4;
  modelica_integer tmp5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _dimExp = __omcQ_24in_5FdimExp;
  // _exp_dims has no default value.
  // _parent_dims has no default value.
  // _parent has no default value.
  // _subs has no default value.
  _exp_dims = omc_NFExpression_dimensionCount(threadData, _dimExp);

  if((_exp_dims == ((modelica_integer) 0)))
  {
    goto _return;
  }

  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _subs = tmpMeta1;

  _parent = omc_NFInstNode_InstNode_instanceParent(threadData, _component);

  while(1)
  {
    if(!((_exp_dims > ((modelica_integer) 0)) && (!omc_NFInstNode_InstNode_isEmpty(threadData, _parent)))) break;
    _parent_dims = omc_NFInstNode_InstNode_dimensionCount(threadData, _parent);

    tmp3 = _parent_dims; tmp4 = ((modelica_integer) -1); tmp5 = ((modelica_integer) 1);
    if(!(((tmp4 > 0) && (tmp3 > tmp5)) || ((tmp4 < 0) && (tmp3 < tmp5))))
    {
      modelica_integer _i;
      for(_i = _parent_dims; in_range_integer(_i, tmp3, tmp5); _i += tmp4)
      {
        tmpMeta2 = mmc_mk_cons(omc_NFSubscript_makeSplitIndex(threadData, _parent, _i), _subs);
        _subs = tmpMeta2;

        _exp_dims = ((modelica_integer) -1) + _exp_dims;

        if((_exp_dims == ((modelica_integer) 0)))
        {
          break;
        }
      }
    }

    _parent = omc_NFInstNode_InstNode_instanceParent(threadData, _parent);
  }

  _dimExp = omc_NFExpression_applySubscripts(threadData, _subs, _dimExp, 0 /* false */);
  _return: OMC_LABEL_UNUSED
  return _dimExp;
}

DLLDirection
modelica_metatype omc_NFTyping_deduceDimensionFromExp(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _ty, modelica_integer _index, modelica_integer _parentDims, modelica_metatype _component, modelica_integer _context, modelica_metatype _info, modelica_metatype *out_error)
{
  modelica_metatype _dim = NULL;
  modelica_metatype _error = NULL;
  modelica_metatype _oe = NULL;
  modelica_metatype _e = NULL;
  modelica_integer _dim_index;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _dim has no default value.
  // _error has no default value.
  // _oe has no default value.
  // _e has no default value.
  // _dim_index has no default value.
  _dim_index = _index + _parentDims;

  if(isSome(_ty))
  {
    _dim = omc_NFTyping_nthDimensionBoundsChecked(threadData, omc_Util_getOption(threadData, _ty), _dim_index, ((modelica_integer) 0) ,&_error);

    _oe = mmc_mk_none();
  }
  else
  {
    _dim = omc_NFTyping_typeExpDim(threadData, _exp, _dim_index, omc_NFInstContext_set(threadData, _context, ((modelica_integer) 262144)), _info ,&_oe ,&_error);
  }

  if((omc_NFDimension_isUnknown(threadData, _dim) && (!omc_NFTyping_TypingError_isError(threadData, _error))))
  {
    _e = (isSome(_oe)?omc_Util_getOption(threadData, _oe):_exp);

    if(omc_NFInstContext_inRelaxed(threadData, _context))
    {
      _e = omc_NFCeval_tryEvalExp(threadData, _e);
    }
    else
    {
      tmpMeta1 = mmc_mk_box4(3, &NFCeval_EvalTargetData_DIMENSION__DATA__desc, _component, mmc_mk_integer(_index), _e);
      _e = omc_NFCeval_evalExp(threadData, _e, omc_NFCeval_EvalTarget_new(threadData, _info, _context, mmc_mk_some(tmpMeta1)));
    }

    _dim = omc_NFTyping_nthDimensionBoundsChecked(threadData, omc_NFExpression_typeOf(threadData, _e), _dim_index, ((modelica_integer) 0) ,&_error);
  }
  _return: OMC_LABEL_UNUSED
  if (out_error) { *out_error = _error; }
  return _dim;
}
modelica_metatype boxptr_NFTyping_deduceDimensionFromExp(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _ty, modelica_metatype _index, modelica_metatype _parentDims, modelica_metatype _component, modelica_metatype _context, modelica_metatype _info, modelica_metatype *out_error)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer tmp3;
  modelica_metatype _dim = NULL;
  tmp1 = mmc_unbox_integer(_index);
  tmp2 = mmc_unbox_integer(_parentDims);
  tmp3 = mmc_unbox_integer(_context);
  _dim = omc_NFTyping_deduceDimensionFromExp(threadData, _exp, _ty, tmp1, tmp2, _component, tmp3, _info, out_error);
  /* skip box _dim; NFDimension */
  /* skip box _error; NFTyping.TypingError */
  return _dim;
}

static modelica_metatype closure15_NFExpression_filterSplitIndices(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_metatype node = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_filterSplitIndices(thData, $in_exp, node);
}
DLLDirection
modelica_metatype omc_NFTyping_typeDimension(threadData_t *threadData, modelica_metatype _dimensions, modelica_integer _index, modelica_metatype _component, modelica_metatype _binding, modelica_integer _context, modelica_metatype _info)
{
  modelica_metatype _dimension = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _dimension = arrayGet(_dimensions,_index) /* DAE.ASUB */;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _dimension;
    {
      modelica_metatype _exp = NULL;
      modelica_integer _var;
      modelica_metatype _dim = NULL;
      modelica_metatype _b = NULL;
      modelica_metatype _ty = NULL;
      modelica_metatype _ty_err = NULL;
      modelica_integer _parent_dims;
      modelica_metatype _target = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _exp has no default value.
      // _var has no default value.
      // _dim has no default value.
      // _b has no default value.
      // _ty has no default value.
      // _ty_err has no default value.
      // _parent_dims has no default value.
      // _target has no default value.
      tmp4 = 0;
      for (; tmp4 < 6; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmp7 = mmc_unbox_integer(tmpMeta6);
          if (1 /* true */ != tmp7) goto tmp3_end;
          /* Pattern matching succeeded */
          if(omc_NFInstContext_inFunction(threadData, _context))
          {
            _dim = _OMC_LIT206;

            arrayUpdate(_dimensions, _index, _dim);
          }
          else
          {
            _dim = _dimension;
          }
          tmpMeta1 = _dim;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta8 = mmc_mk_box3(4, &NFDimension_UNTYPED__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dimension), 2))), mmc_mk_boolean(1 /* true */));
          arrayUpdate(_dimensions, _index, tmpMeta8);

          _exp = omc_NFTyping_typeExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dimension), 2))), omc_NFInstContext_set(threadData, _context, ((modelica_integer) 262144)), _info, 0 /* false */ ,&_ty ,&_var, NULL);

          omc_NFTypeCheck_checkDimensionType(threadData, _exp, _ty, _info);

          if((!omc_NFInstContext_inFunction(threadData, _context)))
          {
            if(((modelica_integer)_var <= 3))
            {
              if(omc_NFInstContext_inRelaxed(threadData, _context))
              {
                _exp = omc_NFCeval_tryEvalExp(threadData, _exp);

                omc_NFExpression_isLiteral(threadData, _exp);
              }
              else
              {
                tmpMeta9 = mmc_mk_box4(3, &NFCeval_EvalTargetData_DIMENSION__DATA__desc, _component, mmc_mk_integer(_index), _exp);
                _target = omc_NFCeval_EvalTarget_new(threadData, _info, _context, mmc_mk_some(tmpMeta9));

                _exp = omc_NFCeval_evalExp(threadData, _exp, _target);
              }
            }
            else
            {
              if((!((modelica_integer)_var == 4)))
              {
                tmpMeta10 = mmc_mk_cons(omc_NFExpression_toString(threadData, _exp), MMC_REFSTRUCTLIT(mmc_nil));
                omc_Error_addSourceMessage(threadData, _OMC_LIT250, tmpMeta10, _info);

                goto goto_2;
              }
            }
          }
          else
          {
            if((((modelica_integer)_var <= 2) && (!omc_NFExpression_contains(threadData, _exp, boxvar_NFExpression_isFunctionInputCref))))
            {
              _exp = omc_NFCeval_tryEvalExp(threadData, _exp);
            }
          }

          _exp = omc_NFTyping_subscriptDimExp(threadData, _exp, _component);

          _dim = omc_NFDimension_fromExp(threadData, _exp, (modelica_integer)_var);

          arrayUpdate(_dimensions, _index, _dim);
          tmpMeta1 = _dim;
          goto tmp3_done;
        }
        case 2: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(omc_NFInstContext_inFunction(threadData, _context) && ((omc_NFBinding_isUnbound(threadData, _binding) && omc_NFInstNode_InstNode_isOutput(threadData, _component)) || (!omc_NFInstNode_InstNode_isOutput(threadData, _component))))) goto tmp3_end;
          tmpMeta1 = _dimension;
          goto tmp3_done;
        }
        case 3: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!((omc_NFInstContext_inFunction(threadData, _context) && omc_NFBinding_hasExp(threadData, _binding)) && omc_NFExpression_contains(threadData, omc_NFBinding_getExp(threadData, _binding), boxvar_NFExpression_isCref))) goto tmp3_end;
          tmpMeta1 = _dimension;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta25;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          _b = _binding;

          _parent_dims = ((modelica_integer) 0);

          arrayUpdate(_dimensions, _index, _OMC_LIT256);

          if(omc_NFBinding_isUnbound(threadData, _binding))
          {
            _b = omc_NFTyping_getRecordElementBinding(threadData, _component, _context ,&_parent_dims);

            if(omc_NFBinding_isUnbound(threadData, _b))
            {
              _parent_dims = ((modelica_integer) 0);

              _b = omc_NFClass_lookupAttributeBinding(threadData, _OMC_LIT257, omc_NFInstNode_InstNode_getClass(threadData, _component));

              tmpMeta11 = mmc_mk_box1(0, _component);
              _b = omc_NFBinding_mapExp(threadData, _b, (modelica_fnptr) mmc_mk_box2(0,closure15_NFExpression_filterSplitIndices,tmpMeta11));
            }
          }

          
          
          { /* match expression */
            modelica_metatype tmp15_1;
            tmp15_1 = _b;
            {
              volatile mmc_switch_type tmp15;
              int tmp16;
              tmp15 = 0;
              for (; tmp15 < 4; tmp15++) {
                switch (MMC_SWITCH_CAST(tmp15)) {
                case 0: {
                  modelica_metatype tmpMeta17;
                  modelica_string tmp18;
                  if (mmc__uniontype__metarecord__typedef__equal(tmp15_1,0,0) == 0) goto tmp14_end;
                  /* Pattern matching succeeded */
                  /* Check guard condition after assignments */
                  if (!(!omc_NFInstContext_inRelaxed(threadData, _context))) goto tmp14_end;
                  tmp18 = modelica_integer_to_modelica_string(_index, ((modelica_integer) 0), 1 /* true */);
                  tmpMeta17 = mmc_mk_cons(tmp18, mmc_mk_cons(omc_NFInstNode_InstNode_name(threadData, _component), MMC_REFSTRUCTLIT(mmc_nil)));
                  omc_Error_addSourceMessage(threadData, _OMC_LIT260, tmpMeta17, _info);
                  goto goto_13;
                  goto tmp14_done;
                }
                case 1: {
                  if (mmc__uniontype__metarecord__typedef__equal(tmp15_1,2,6) == 0) goto tmp14_end;
                  
                  /* Pattern matching succeeded */
                  tmpMeta[0+0] = omc_NFTyping_deduceDimensionFromExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_b), 2))), mmc_mk_none(), _index, _parent_dims, _component, _context, _info, &tmpMeta[0+1]);
                  goto tmp14_done;
                }
                case 2: {
                  if (mmc__uniontype__metarecord__typedef__equal(tmp15_1,3,9) == 0) goto tmp14_end;
                  
                  /* Pattern matching succeeded */
                  tmpMeta[0+0] = omc_NFTyping_deduceDimensionFromExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_b), 2))), mmc_mk_some((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_b), 3)))), _index, _parent_dims, _component, _context, _info, &tmpMeta[0+1]);
                  goto tmp14_done;
                }
                case 3: {
                  
                  /* Pattern matching succeeded */
                  tmpMeta[0+0] = _dimension;
                  tmpMeta[0+1] = _OMC_LIT205;
                  goto tmp14_done;
                }
                }
                goto tmp14_end;
                tmp14_end: ;
              }
              goto goto_13;
              goto_13:;
              goto goto_2;
              goto tmp14_done;
              tmp14_done:;
            }
          }
          _dim = tmpMeta[0+0];
          _ty_err = tmpMeta[0+1];

          { /* match expression */
            modelica_metatype tmp21_1;
            tmp21_1 = _ty_err;
            {
              volatile mmc_switch_type tmp21;
              int tmp22;
              tmp21 = 0;
              for (; tmp21 < 2; tmp21++) {
                switch (MMC_SWITCH_CAST(tmp21)) {
                case 0: {
                  modelica_metatype tmpMeta23;
                  modelica_string tmp24;
                  if (mmc__uniontype__metarecord__typedef__equal(tmp21_1,1,1) == 0) goto tmp20_end;
                  
                  /* Pattern matching succeeded */
                  /* Check guard condition after assignments */
                  if (!(!omc_NFInstContext_inRelaxed(threadData, _context))) goto tmp20_end;
                  tmp24 = modelica_integer_to_modelica_string(_index, ((modelica_integer) 0), 1 /* true */);
                  tmpMeta23 = mmc_mk_cons(tmp24, mmc_mk_cons(omc_NFInstNode_InstNode_name(threadData, _component), mmc_mk_cons(omc_NFBinding_toString(threadData, _b, _OMC_LIT27), MMC_REFSTRUCTLIT(mmc_nil))));
                  omc_Error_addSourceMessage(threadData, _OMC_LIT263, tmpMeta23, _info);
                  goto goto_19;
                  goto tmp20_done;
                }
                case 1: {
                  
                  /* Pattern matching succeeded */
                  goto tmp20_done;
                }
                }
                goto tmp20_end;
                tmp20_end: ;
              }
              goto goto_19;
              goto_19:;
              goto goto_2;
              goto tmp20_done;
              tmp20_done:;
            }
          }
          ;

          { /* match expression */
            modelica_metatype tmp28_1;
            tmp28_1 = _dim;
            {
              volatile mmc_switch_type tmp28;
              int tmp29;
              tmp28 = 0;
              for (; tmp28 < 3; tmp28++) {
                switch (MMC_SWITCH_CAST(tmp28)) {
                case 0: {
                  modelica_metatype tmpMeta30;
                  modelica_metatype tmpMeta31;
                  if (mmc__uniontype__metarecord__typedef__equal(tmp28_1,5,2) == 0) goto tmp27_end;
                  tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp28_1), 2));
                  
                  _exp = tmpMeta30;
                  /* Pattern matching succeeded */
                  omc_NFStructural_markExp(threadData, _exp);

                  if(omc_NFInstContext_inRelaxed(threadData, _context))
                  {
                    _exp = omc_NFCeval_tryEvalExp(threadData, _exp);
                  }
                  else
                  {
                    tmpMeta31 = mmc_mk_box4(3, &NFCeval_EvalTargetData_DIMENSION__DATA__desc, _component, mmc_mk_integer(_index), _exp);
                    _target = omc_NFCeval_EvalTarget_new(threadData, _info, _context, mmc_mk_some(tmpMeta31));

                    _exp = omc_NFCeval_evalExp(threadData, _exp, _target);
                  }

                  _exp = omc_NFTyping_subscriptDimExp(threadData, _exp, _component);
                  tmpMeta25 = omc_NFDimension_fromExp(threadData, _exp, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dim), 3)))));
                  goto tmp27_done;
                }
                case 1: {
                  if (mmc__uniontype__metarecord__typedef__equal(tmp28_1,7,0) == 0) goto tmp27_end;
                  /* Pattern matching succeeded */
                  /* Check guard condition after assignments */
                  if (!(!omc_NFInstContext_inRelaxed(threadData, _context))) goto tmp27_end;
                  omc_Error_addInternalError(threadData, _OMC_LIT264, _info);
                  goto goto_26;
                  goto tmp27_done;
                }
                case 2: {
                  
                  /* Pattern matching succeeded */
                  tmpMeta25 = _dim;
                  goto tmp27_done;
                }
                }
                goto tmp27_end;
                tmp27_end: ;
              }
              goto goto_26;
              goto_26:;
              goto goto_2;
              goto tmp27_done;
              tmp27_done:;
            }
          }
          _dim = tmpMeta25;

          arrayUpdate(_dimensions, _index, _dim);
          tmpMeta1 = _dim;
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _dimension;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _dimension = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _dimension;
}
modelica_metatype boxptr_NFTyping_typeDimension(threadData_t *threadData, modelica_metatype _dimensions, modelica_metatype _index, modelica_metatype _component, modelica_metatype _binding, modelica_metatype _context, modelica_metatype _info)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _dimension = NULL;
  tmp1 = mmc_unbox_integer(_index);
  tmp2 = mmc_unbox_integer(_context);
  _dimension = omc_NFTyping_typeDimension(threadData, _dimensions, tmp1, _component, _binding, tmp2, _info);
  /* skip box _dimension; NFDimension */
  return _dimension;
}

DLLDirection
modelica_metatype omc_NFTyping_typeDimensions(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fdimensions, modelica_metatype _component, modelica_metatype _binding, modelica_integer _context, modelica_metatype _info)
{
  modelica_metatype _dimensions = NULL;
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer tmp3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _dimensions = __omcQ_24in_5Fdimensions;
  tmp1 = ((modelica_integer) 1); tmp2 = 1; tmp3 = arrayLength(_dimensions);
  if(!(((tmp2 > 0) && (tmp1 > tmp3)) || ((tmp2 < 0) && (tmp1 < tmp3))))
  {
    modelica_integer _i;
    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp1, tmp3); _i += tmp2)
    {
      omc_NFTyping_typeDimension(threadData, _dimensions, _i, _component, _binding, _context, _info);
    }
  }
  _return: OMC_LABEL_UNUSED
  return _dimensions;
}
modelica_metatype boxptr_NFTyping_typeDimensions(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fdimensions, modelica_metatype _component, modelica_metatype _binding, modelica_metatype _context, modelica_metatype _info)
{
  modelica_integer tmp1;
  modelica_metatype _dimensions = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _dimensions = omc_NFTyping_typeDimensions(threadData, __omcQ_24in_5Fdimensions, _component, _binding, tmp1, _info);
  /* skip box _dimensions; array<NFDimension> */
  return _dimensions;
}

DLLDirection
modelica_metatype omc_NFTyping_typeIterator(threadData_t *threadData, modelica_metatype _iterator, modelica_metatype _range, modelica_integer _context, modelica_boolean _structural, modelica_metatype *out_ty, modelica_integer *out_var, modelica_integer *out_purity)
{
  modelica_metatype _outRange = NULL;
  modelica_metatype _ty = NULL;
  modelica_integer _var;
  modelica_integer _purity;
  modelica_metatype _c = NULL;
  modelica_metatype _exp = NULL;
  modelica_metatype _info = NULL;
  modelica_integer tmp1_c2 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outRange has no default value.
  // _ty has no default value.
  // _var has no default value.
  // _purity has no default value.
  _c = omc_NFInstNode_InstNode_component(threadData, _iterator);
  // _exp has no default value.
  // _info has no default value.
  
  
  
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _c;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _info = tmpMeta6;
          /* Pattern matching succeeded */
          _exp = omc_NFTyping_typeExp(threadData, _range, omc_NFInstContext_set(threadData, _context, ((modelica_integer) 131072)), _info, 0 /* false */ ,&_ty ,&_var ,&_purity);

          if(((_structural && ((modelica_integer)_var > 3)) && ((!((modelica_integer)_var == 4)) || omc_Flags_isSet(threadData, _OMC_LIT271))))
          {
            tmpMeta7 = mmc_mk_cons(omc_NFExpression_toString(threadData, _exp), MMC_REFSTRUCTLIT(mmc_nil));
            omc_Error_addSourceMessageAndFail(threadData, _OMC_LIT267, tmpMeta7, _info);
          }

          if((!omc_NFType_isVector(threadData, _ty)))
          {
            tmpMeta8 = mmc_mk_cons(omc_NFExpression_toString(threadData, _exp), mmc_mk_cons(omc_NFType_toString(threadData, _ty), MMC_REFSTRUCTLIT(mmc_nil)));
            omc_Error_addSourceMessageAndFail(threadData, _OMC_LIT274, tmpMeta8, _info);
          }

          tmpMeta9 = mmc_mk_box4(5, &NFComponent_ITERATOR__desc, omc_NFType_arrayElementType(threadData, _ty), mmc_mk_integer((modelica_integer)_var), _info);
          _c = tmpMeta9;

          omc_NFInstNode_InstNode_updateComponent(threadData, _c, _iterator);
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = _ty;
          tmp1_c2 = (modelica_integer)_var;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta10;
          
          /* Pattern matching succeeded */
          tmpMeta10 = stringAppend(_OMC_LIT275,omc_NFInstNode_InstNode_name(threadData, _iterator));
          omc_Error_assertion(threadData, 0 /* false */, tmpMeta10, _OMC_LIT276);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outRange = tmpMeta[0+0];
  _ty = tmpMeta[0+1];
  _var = tmp1_c2;
  _return: OMC_LABEL_UNUSED
  if (out_ty) { *out_ty = _ty; }
  if (out_var) { *out_var = _var; }
  if (out_purity) { *out_purity = _purity; }
  return _outRange;
}
modelica_metatype boxptr_NFTyping_typeIterator(threadData_t *threadData, modelica_metatype _iterator, modelica_metatype _range, modelica_metatype _context, modelica_metatype _structural, modelica_metatype *out_ty, modelica_metatype *out_var, modelica_metatype *out_purity)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer _var;
  modelica_integer _purity;
  modelica_metatype _outRange = NULL;
  tmp1 = mmc_unbox_integer(_context);
  tmp2 = mmc_unbox_integer(_structural);
  _outRange = omc_NFTyping_typeIterator(threadData, _iterator, _range, tmp1, tmp2, out_ty, &_var, &_purity);
  /* skip box _outRange; NFExpression */
  /* skip box _ty; NFType */
  if (out_var) { *out_var = mmc_mk_icon(_var); }
  if (out_purity) { *out_purity = mmc_mk_icon(_purity); }
  return _outRange;
}

DLLDirection
void omc_NFTyping_checkComponentStreamAttribute(threadData_t *threadData, modelica_integer _cty, modelica_metatype _ty, modelica_metatype _component)
{
  modelica_metatype _ety = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _ety has no default value.
  if(omc_NFPrefixes_ConnectorType_isFlowOrStream(threadData, _cty))
  {
    _ety = omc_NFType_arrayElementType(threadData, _ty);

    if((!(omc_NFType_isReal(threadData, _ety) || omc_NFType_isComplex(threadData, _ety))))
    {
      tmpMeta1 = mmc_mk_cons(omc_NFPrefixes_ConnectorType_toString(threadData, _cty), mmc_mk_cons(omc_NFInstNode_InstNode_name(threadData, _component), MMC_REFSTRUCTLIT(mmc_nil)));
      omc_Error_addSourceMessageAndFail(threadData, _OMC_LIT279, tmpMeta1, omc_NFInstNode_InstNode_info(threadData, _component));
    }
  }
  _return: OMC_LABEL_UNUSED
  return;
}
void boxptr_NFTyping_checkComponentStreamAttribute(threadData_t *threadData, modelica_metatype _cty, modelica_metatype _ty, modelica_metatype _component)
{
  modelica_integer tmp1;
  tmp1 = mmc_unbox_integer(_cty);
  omc_NFTyping_checkComponentStreamAttribute(threadData, tmp1, _ty, _component);
  return;
}

DLLDirection
void omc_NFTyping_typeComponentTry(threadData_t *threadData, modelica_metatype _componentNode, modelica_integer _context)
{
  modelica_metatype _comp = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _comp has no default value.
  omc_ErrorExt_setCheckpoint(threadData, _OMC_LIT280);

  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp2_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          /* Pattern matching succeeded */
          omc_NFTyping_typeComponent(threadData, _componentNode, _context, 1 /* true */);
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta5;
          /* Pattern matching succeeded */
          _comp = omc_NFInstNode_InstNode_component(threadData, _componentNode);

          tmpMeta5 = mmc_mk_box3(8, &NFComponent_INVALID__COMPONENT__desc, _comp, omc_ErrorExt_printCheckpointMessagesStr(threadData, 0 /* false */));
          _comp = tmpMeta5;

          omc_NFInstNode_InstNode_updateComponent(threadData, _comp, _componentNode);
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      tmp2_done:
      (void)tmp3;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp2_done2;
      goto_1:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp3 < 2) {
        goto tmp2_top;
      }
      MMC_THROW_INTERNAL();
      tmp2_done2:;
    }
  }
  ;

  omc_ErrorExt_delCheckpoint(threadData, _OMC_LIT280);
  _return: OMC_LABEL_UNUSED
  return;
}
void boxptr_NFTyping_typeComponentTry(threadData_t *threadData, modelica_metatype _componentNode, modelica_metatype _context)
{
  modelica_integer tmp1;
  tmp1 = mmc_unbox_integer(_context);
  omc_NFTyping_typeComponentTry(threadData, _componentNode, tmp1);
  return;
}

DLLDirection
modelica_metatype omc_NFTyping_typeComponent(threadData_t *threadData, modelica_metatype _component, modelica_integer _context, modelica_boolean _typeChildren)
{
  modelica_metatype _ty = NULL;
  modelica_metatype _node = NULL;
  modelica_metatype _c = NULL;
  modelica_metatype _cond = NULL;
  modelica_boolean _is_deleted;
  modelica_metatype _dims = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _ty has no default value.
  _node = omc_NFInstNode_InstNode_resolveOuter(threadData, _component);
  _c = omc_NFInstNode_InstNode_component(threadData, _node);
  // _cond has no default value.
  // _is_deleted has no default value.
  // _dims has no default value.
  if(omc_NFInstNode_InstNode_isOnlyOuter(threadData, _component))
  {
    goto _return;
  }

  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _c;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 6; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,8) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,17,2) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
          
          _dims = tmpMeta7;
          /* Pattern matching succeeded */
          omc_NFTyping_typeDimensions(threadData, _dims, _node, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 4))), _context, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 9))));

          if(omc_NFInstNode_InstNode_isEmpty(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 2)))))
          {
            _ty = _OMC_LIT8;
          }
          else
          {
            _ty = omc_NFTyping_typeClassType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 4))), _context, _component);
          }

          _ty = omc_NFType_liftArrayLeftList(threadData, _ty, arrayList(_dims));

          if(omc_NFBinding_isBound(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 5)))))
          {
            tmpMeta8 = MMC_TAGPTR(mmc_alloc_words(10));
            memcpy(MMC_UNTAGPTR(tmpMeta8), MMC_UNTAGPTR(_c), 10*sizeof(modelica_metatype));
            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta8))[5] = omc_NFTyping_typeComponentCondition(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 5))), _context, 1 /* true */);
            _c = tmpMeta8;

            _is_deleted = omc_NFExpression_isFalse(threadData, omc_NFBinding_getExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 5)))));
          }
          else
          {
            _is_deleted = 0 /* false */;
          }

          if(_typeChildren)
          {
            tmpMeta9 = MMC_TAGPTR(mmc_alloc_words(10));
            memcpy(MMC_UNTAGPTR(tmpMeta9), MMC_UNTAGPTR(_c), 10*sizeof(modelica_metatype));
            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta9))[3] = _ty;
            _c = tmpMeta9;

            tmpMeta10 = MMC_TAGPTR(mmc_alloc_words(10));
            memcpy(MMC_UNTAGPTR(tmpMeta10), MMC_UNTAGPTR(_c), 10*sizeof(modelica_metatype));
            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta10))[8] = mmc_mk_integer(3);
            _c = tmpMeta10;

            omc_NFInstNode_InstNode_updateComponent(threadData, _c, _node);

            if(((!_is_deleted) && (!omc_NFInstNode_InstNode_isEmpty(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 2)))))))
            {
              omc_NFTyping_checkComponentStreamAttribute(threadData, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 6)))), 2)))), _ty, _component);

              omc_NFTyping_typeComponents(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 2))), _context, 0 /* false */);

              omc_NFTyping_checkConnectorTypeBalance(threadData, _node);
            }
          }
          tmpMeta1 = _ty;
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,8) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 3)));
          goto tmp3_done;
        }
        case 2: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 2)));
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,4,3) == 0) goto tmp3_end;
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
          
          _ty = tmpMeta12;
          /* Pattern matching succeeded */
          tmpMeta1 = _ty;
          goto tmp3_done;
        }
        case 4: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFComponent_getType(threadData, _c);
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta13;
          
          /* Pattern matching succeeded */
          tmpMeta13 = stringAppend(_OMC_LIT281,omc_NFInstNode_InstNode_name(threadData, _component));
          omc_Error_assertion(threadData, 0 /* false */, tmpMeta13, _OMC_LIT282);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _ty = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _ty;
}
modelica_metatype boxptr_NFTyping_typeComponent(threadData_t *threadData, modelica_metatype _component, modelica_metatype _context, modelica_metatype _typeChildren)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _ty = NULL;
  tmp1 = mmc_unbox_integer(_context);
  tmp2 = mmc_unbox_integer(_typeChildren);
  _ty = omc_NFTyping_typeComponent(threadData, _component, tmp1, tmp2);
  /* skip box _ty; NFType */
  return _ty;
}

DLLDirection
modelica_metatype omc_NFTyping_makeRecordType(threadData_t *threadData, modelica_metatype _constructor)
{
  modelica_metatype _recordTy = NULL;
  modelica_metatype _cache = NULL;
  modelica_metatype _fn = NULL;
  modelica_metatype _fields = NULL;
  modelica_metatype _indexMap = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _recordTy has no default value.
  // _cache has no default value.
  // _fn has no default value.
  // _fields has no default value.
  // _indexMap has no default value.
  _cache = omc_NFInstNode_InstNode_getFuncCache(threadData, _constructor);

  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _cache;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (listEmpty(tmpMeta6)) goto tmp3_end;
          tmpMeta7 = MMC_CAR(tmpMeta6);
          tmpMeta8 = MMC_CDR(tmpMeta6);
          
          _fn = tmpMeta7;
          /* Pattern matching succeeded */
          _fields = omc_NFRecord_collectRecordFields(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fn), 3))) ,&_indexMap);
          tmpMeta9 = mmc_mk_box4(7, &NFComplexType_RECORD__desc, _constructor, _fields, _indexMap);
          tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          omc_Error_assertion(threadData, 0 /* false */, _OMC_LIT283, _OMC_LIT284);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _recordTy = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _recordTy;
}

DLLDirection
void omc_NFTyping_checkConnectorTypeBalance(threadData_t *threadData, modelica_metatype _component)
{
  modelica_integer _pots;
  modelica_integer _flows;
  modelica_integer _streams;
  modelica_boolean _known_size;
  modelica_metatype _comp = NULL;
  modelica_metatype _parent = NULL;
  modelica_metatype tmpMeta1;
  modelica_string tmp2;
  modelica_string tmp3;
  modelica_metatype tmpMeta4;
  modelica_string tmp5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _pots has no default value.
  // _flows has no default value.
  // _streams has no default value.
  // _known_size has no default value.
  // _comp has no default value.
  // _parent has no default value.
  _comp = omc_NFInstNode_InstNode_component(threadData, _component);

  if((!omc_NFPrefixes_ConnectorType_isConnector(threadData, omc_NFComponent_connectorType(threadData, _comp))))
  {
    goto _return;
  }

  _parent = omc_NFInstNode_InstNode_instanceParent(threadData, _component);

  if((omc_NFInstNode_InstNode_isComponent(threadData, _parent) && omc_NFComponent_isConnector(threadData, omc_NFInstNode_InstNode_component(threadData, _parent))))
  {
    goto _return;
  }

  _pots = omc_NFComponent_countConnectorVars(threadData, _comp, 1 /* true */ ,&_flows ,&_streams ,&_known_size);

  if((!_known_size))
  {
    goto _return;
  }

  if(((_pots != _flows) && (!omc_Flags_isConfigFlagSet(threadData, _OMC_LIT339, _OMC_LIT318))))
  {
    tmp2 = modelica_integer_to_modelica_string(_pots, ((modelica_integer) 0), 1 /* true */);
    tmp3 = modelica_integer_to_modelica_string(_flows, ((modelica_integer) 0), 1 /* true */);
    tmpMeta1 = mmc_mk_cons(omc_NFInstNode_InstNode_name(threadData, _component), mmc_mk_cons(tmp2, mmc_mk_cons(tmp3, MMC_REFSTRUCTLIT(mmc_nil))));
    omc_Error_addStrictMessage(threadData, _OMC_LIT287, tmpMeta1, omc_NFInstNode_InstNode_info(threadData, _component));
  }

  if(((_streams > ((modelica_integer) 0)) && (_flows != ((modelica_integer) 1))))
  {
    tmp5 = modelica_integer_to_modelica_string(_flows, ((modelica_integer) 0), 1 /* true */);
    tmpMeta4 = mmc_mk_cons(omc_NFInstNode_InstNode_name(threadData, _component), mmc_mk_cons(tmp5, MMC_REFSTRUCTLIT(mmc_nil)));
    omc_Error_addSourceMessage(threadData, _OMC_LIT342, tmpMeta4, omc_NFInstNode_InstNode_info(threadData, _component));

    MMC_THROW_INTERNAL();
  }
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
modelica_metatype omc_NFTyping_makeConnectorType(threadData_t *threadData, modelica_metatype _ctree, modelica_boolean _isExpandable)
{
  modelica_metatype _connectorTy = NULL;
  modelica_metatype _pots = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _flows = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype _streams = NULL;
  modelica_metatype tmpMeta3;
  modelica_metatype _exps = NULL;
  modelica_metatype tmpMeta4;
  modelica_integer _cty;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  modelica_metatype tmpMeta16;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _connectorTy has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _pots = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _flows = tmpMeta2;
  tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
  _streams = tmpMeta3;
  tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
  _exps = tmpMeta4;
  // _cty has no default value.
  if(_isExpandable)
  {
    {
      modelica_metatype _c;
      for (tmpMeta5 = omc_NFClassTree_ClassTree_enumerateComponents(threadData, _ctree); !listEmpty(tmpMeta5); tmpMeta5=MMC_CDR(tmpMeta5))
      {
        _c = MMC_CAR(tmpMeta5);
        _cty = omc_NFComponent_connectorType(threadData, omc_NFInstNode_InstNode_component(threadData, omc_NFInstNode_InstNode_resolveInner(threadData, _c)));

        if((((_cty) & (((modelica_integer) 64))) > ((modelica_integer) 0)))
        {
          tmpMeta6 = mmc_mk_cons(_c, _exps);
          _exps = tmpMeta6;
        }
        else
        {
          tmpMeta7 = mmc_mk_cons(_c, _pots);
          _pots = tmpMeta7;
        }
      }
    }

    tmpMeta9 = mmc_mk_box3(6, &NFComplexType_EXPANDABLE__CONNECTOR__desc, _pots, _exps);
    _connectorTy = tmpMeta9;
  }
  else
  {
    {
      modelica_metatype _c;
      for (tmpMeta10 = omc_NFClassTree_ClassTree_enumerateComponents(threadData, _ctree); !listEmpty(tmpMeta10); tmpMeta10=MMC_CDR(tmpMeta10))
      {
        _c = MMC_CAR(tmpMeta10);
        _cty = omc_NFComponent_connectorType(threadData, omc_NFInstNode_InstNode_component(threadData, omc_NFInstNode_InstNode_resolveInner(threadData, _c)));

        if((((_cty) & (((modelica_integer) 2))) > ((modelica_integer) 0)))
        {
          tmpMeta11 = mmc_mk_cons(_c, _flows);
          _flows = tmpMeta11;
        }
        else
        {
          if((((_cty) & (((modelica_integer) 4))) > ((modelica_integer) 0)))
          {
            tmpMeta12 = mmc_mk_cons(_c, _streams);
            _streams = tmpMeta12;
          }
          else
          {
            if((((_cty) & (((modelica_integer) 1))) > ((modelica_integer) 0)))
            {
              tmpMeta13 = mmc_mk_cons(_c, _pots);
              _pots = tmpMeta13;
            }
            else
            {
              tmpMeta14 = stringAppend(_OMC_LIT343,omc_NFInstNode_InstNode_name(threadData, _c));
              omc_Error_addInternalError(threadData, tmpMeta14, omc_NFInstNode_InstNode_info(threadData, _c));

              MMC_THROW_INTERNAL();
            }
          }
        }
      }
    }

    tmpMeta16 = mmc_mk_box4(5, &NFComplexType_CONNECTOR__desc, _pots, _flows, _streams);
    _connectorTy = tmpMeta16;

    if((!listEmpty(_streams)))
    {
      omc_System_setHasStreamConnectors(threadData, 1 /* true */);
    }
  }
  _return: OMC_LABEL_UNUSED
  return _connectorTy;
}
modelica_metatype boxptr_NFTyping_makeConnectorType(threadData_t *threadData, modelica_metatype _ctree, modelica_metatype _isExpandable)
{
  modelica_integer tmp1;
  modelica_metatype _connectorTy = NULL;
  tmp1 = mmc_unbox_integer(_isExpandable);
  _connectorTy = omc_NFTyping_makeConnectorType(threadData, _ctree, tmp1);
  /* skip box _connectorTy; NFComplexType */
  return _connectorTy;
}

DLLDirection
modelica_metatype omc_NFTyping_typeClassType(threadData_t *threadData, modelica_metatype _clsNode, modelica_metatype _componentBinding, modelica_integer _context, modelica_metatype _instanceNode)
{
  modelica_metatype _ty = NULL;
  modelica_metatype _cls = NULL;
  modelica_metatype _ty_cls = NULL;
  modelica_metatype _node = NULL;
  modelica_metatype _ty_node = NULL;
  modelica_metatype _fn = NULL;
  modelica_boolean _is_expandable;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _ty has no default value.
  // _cls has no default value.
  // _ty_cls has no default value.
  // _node has no default value.
  // _ty_node has no default value.
  // _fn has no default value.
  // _is_expandable has no default value.
  _cls = omc_NFInstNode_InstNode_getClass(threadData, _clsNode);

  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _cls;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 9; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_integer tmp8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,5) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,3,1) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          tmp8 = mmc_unbox_integer(tmpMeta7);
          _is_expandable = tmp8  /* pattern as ty=Boolean */;
          /* Pattern matching succeeded */
          tmpMeta9 = mmc_mk_box3(14, &NFType_COMPLEX__desc, _clsNode, omc_NFTyping_makeConnectorType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 3))), _is_expandable));
          _ty = tmpMeta9;

          tmpMeta10 = MMC_TAGPTR(mmc_alloc_words(7));
          memcpy(MMC_UNTAGPTR(tmpMeta10), MMC_UNTAGPTR(_cls), 7*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta10))[2] = _ty;
          _cls = tmpMeta10;

          omc_NFInstNode_InstNode_updateClass(threadData, _cls, _clsNode);
          tmpMeta1 = _ty;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,5) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,11,2) == 0) goto tmp3_end;
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,4,3) == 0) goto tmp3_end;
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
          
          _ty_node = tmpMeta12;
          _node = tmpMeta14;
          /* Pattern matching succeeded */
          tmpMeta15 = mmc_mk_box3(14, &NFType_COMPLEX__desc, _ty_node, omc_NFTyping_makeRecordType(threadData, _node));
          _ty = tmpMeta15;

          tmpMeta16 = MMC_TAGPTR(mmc_alloc_words(7));
          memcpy(MMC_UNTAGPTR(tmpMeta16), MMC_UNTAGPTR(_cls), 7*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta16))[2] = _ty;
          _cls = tmpMeta16;

          omc_NFInstNode_InstNode_updateClass(threadData, _cls, _clsNode);
          tmpMeta1 = _ty;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,5) == 0) goto tmp3_end;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,11,2) == 0) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta18,1,1) == 0) goto tmp3_end;
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
          
          _node = tmpMeta19;
          /* Pattern matching succeeded */
          _ty = omc_NFTyping_typeClassType(threadData, _node, _componentBinding, _context, _instanceNode);

          tmpMeta20 = MMC_TAGPTR(mmc_alloc_words(7));
          memcpy(MMC_UNTAGPTR(tmpMeta20), MMC_UNTAGPTR(_cls), 7*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta20))[2] = _ty;
          _cls = tmpMeta20;

          omc_NFInstNode_InstNode_updateClass(threadData, _cls, _clsNode);
          tmpMeta1 = _ty;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,5) == 0) goto tmp3_end;
          tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta21,6,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_NFInstNode_InstNode_isComponent(threadData, _instanceNode)) goto tmp3_end;
          /* Pattern-matching assignment */
          tmpMeta22 = omc_NFFunction_Function_typeNodeCache(threadData, _clsNode, ((modelica_integer) 16));
          if (listEmpty(tmpMeta22)) goto goto_2;
          tmpMeta23 = MMC_CAR(tmpMeta22);
          tmpMeta24 = MMC_CDR(tmpMeta22);
          _fn = tmpMeta23;

          tmpMeta25 = mmc_mk_box3(15, &NFType_FUNCTION__desc, _fn, mmc_mk_integer(1));
          _ty = tmpMeta25;

          tmpMeta26 = MMC_TAGPTR(mmc_alloc_words(7));
          memcpy(MMC_UNTAGPTR(tmpMeta26), MMC_UNTAGPTR(_cls), 7*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta26))[2] = _ty;
          _cls = tmpMeta26;

          omc_NFInstNode_InstNode_updateClass(threadData, _cls, _clsNode);
          tmpMeta1 = _ty;
          goto tmp3_done;
        }
        case 4: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,5) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 2)));
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta27;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,7) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          omc_NFTyping_typeDimensions(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 5))), _clsNode, _componentBinding, _context, omc_NFInstNode_InstNode_info(threadData, _clsNode));

          _ty = omc_NFTyping_typeClassType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 2))), _componentBinding, _context, _instanceNode);

          _ty = omc_NFType_liftArrayLeftList(threadData, _ty, arrayList((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 5)))));

          tmpMeta27 = mmc_mk_box4(10, &NFClass_TYPED__DERIVED__desc, _ty, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 8))));
          _ty_cls = tmpMeta27;

          omc_NFInstNode_InstNode_updateClass(threadData, _ty_cls, _clsNode);
          tmpMeta1 = _ty;
          goto tmp3_done;
        }
        case 6: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 2)));
          goto tmp3_done;
        }
        case 7: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 2)));
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta28;
          
          /* Pattern matching succeeded */
          tmpMeta28 = stringAppend(_OMC_LIT344,omc_NFInstNode_InstNode_name(threadData, _clsNode));
          omc_Error_assertion(threadData, 0 /* false */, tmpMeta28, _OMC_LIT345);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _ty = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _ty;
}
modelica_metatype boxptr_NFTyping_typeClassType(threadData_t *threadData, modelica_metatype _clsNode, modelica_metatype _componentBinding, modelica_metatype _context, modelica_metatype _instanceNode)
{
  modelica_integer tmp1;
  modelica_metatype _ty = NULL;
  tmp1 = mmc_unbox_integer(_context);
  _ty = omc_NFTyping_typeClassType(threadData, _clsNode, _componentBinding, tmp1, _instanceNode);
  /* skip box _ty; NFType */
  return _ty;
}

DLLDirection
void omc_NFTyping_typeStructor(threadData_t *threadData, modelica_metatype _node)
{
  modelica_metatype _cache = NULL;
  modelica_metatype _fnl = NULL;
  modelica_integer _context;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _cache has no default value.
  // _fnl has no default value.
  // _context has no default value.
  _cache = omc_NFInstNode_InstNode_getFuncCache(threadData, _node);

  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _cache;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta16;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,3) == 0) goto tmp2_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
          tmp7 = mmc_unbox_integer(tmpMeta6);
          if (0 /* false */ != tmp7) goto tmp2_end;
          
          _fnl = tmpMeta5;
          /* Pattern matching succeeded */
          _context = omc_NFInstContext_set(threadData, ((modelica_integer) 16), ((modelica_integer) 1));

          {
            modelica_metatype __omcQ_24tmpVar27;
            modelica_metatype* tmp9;
            modelica_metatype tmpMeta10;
            modelica_metatype __omcQ_24tmpVar26;
            modelica_integer tmp11;
            modelica_metatype _fn_loopVar = 0;
            modelica_metatype _fn;
            _fn_loopVar = _fnl;
            tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar27 = tmpMeta10; /* defaultValue */
            tmp9 = &__omcQ_24tmpVar27;
            while(1) {
              tmp11 = 1;
              if (!listEmpty(_fn_loopVar)) {
                _fn = MMC_CAR(_fn_loopVar);
                _fn_loopVar = MMC_CDR(_fn_loopVar);
                tmp11--;
              }
              if (tmp11 == 0) {
                __omcQ_24tmpVar26 = omc_NFFunction_Function_typeFunction(threadData, _fn, _context);
                *tmp9 = mmc_mk_cons(__omcQ_24tmpVar26,0);
                tmp9 = &MMC_CDR(*tmp9);
              } else if (tmp11 == 1) {
                break;
              } else {
                goto goto_1;
              }
            }
            *tmp9 = mmc_mk_nil();
            tmpMeta8 = __omcQ_24tmpVar27;
          }
          _fnl = tmpMeta8;

          {
            modelica_metatype __omcQ_24tmpVar29;
            modelica_metatype* tmp13;
            modelica_metatype tmpMeta14;
            modelica_metatype __omcQ_24tmpVar28;
            modelica_integer tmp15;
            modelica_metatype _fn_loopVar = 0;
            modelica_metatype _fn;
            _fn_loopVar = _fnl;
            tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar29 = tmpMeta14; /* defaultValue */
            tmp13 = &__omcQ_24tmpVar29;
            while(1) {
              tmp15 = 1;
              if (!listEmpty(_fn_loopVar)) {
                _fn = MMC_CAR(_fn_loopVar);
                _fn_loopVar = MMC_CDR(_fn_loopVar);
                tmp15--;
              }
              if (tmp15 == 0) {
                __omcQ_24tmpVar28 = omc_NFOperatorOverloading_patchOperatorRecordConstructorBinding(threadData, _fn);
                *tmp13 = mmc_mk_cons(__omcQ_24tmpVar28,0);
                tmp13 = &MMC_CDR(*tmp13);
              } else if (tmp15 == 1) {
                break;
              } else {
                goto goto_1;
              }
            }
            *tmp13 = mmc_mk_nil();
            tmpMeta12 = __omcQ_24tmpVar29;
          }
          _fnl = tmpMeta12;

          tmpMeta16 = mmc_mk_box4(5, &NFInstNode_CachedData_FUNCTION__desc, _fnl, mmc_mk_boolean(1 /* true */), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cache), 4))));
          omc_NFInstNode_InstNode_setFuncCache(threadData, _node, tmpMeta16);
          goto tmp2_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
void omc_NFTyping_typeComponents(threadData_t *threadData, modelica_metatype _cls, modelica_integer _context, modelica_boolean _preserveDerived)
{
  modelica_metatype _c = NULL;
  modelica_metatype _c2 = NULL;
  modelica_metatype _cls_tree = NULL;
  modelica_metatype _ext_node = NULL;
  modelica_metatype _con = NULL;
  modelica_metatype _de = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _c = omc_NFInstNode_InstNode_getClass(threadData, _cls);
  // _c2 has no default value.
  // _cls_tree has no default value.
  // _ext_node has no default value.
  // _con has no default value.
  // _de has no default value.
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _c;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 7; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,5) == 0) goto tmp2_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta5,12,0) == 0) goto tmp2_end;
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_integer tmp9;
          modelica_integer tmp10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_integer tmp13;
          modelica_integer tmp14;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,5) == 0) goto tmp2_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,3,5) == 0) goto tmp2_end;
          
          _cls_tree = tmpMeta6;
          /* Pattern matching succeeded */
          if(omc_NFInstContext_inInstanceAPI(threadData, _context))
          {
            {
              modelica_metatype _c;
              for (tmpMeta7 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls_tree), 4))), tmp10 = arrayLength(tmpMeta7), tmp9 = 1; tmp9 <= tmp10; tmp9++)
              {
                _c = arrayGet(tmpMeta7,tmp9);
                omc_NFTyping_typeComponentTry(threadData, _c, _context);
              }
            }
          }
          else
          {
            {
              modelica_metatype _c;
              for (tmpMeta11 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls_tree), 4))), tmp14 = arrayLength(tmpMeta11), tmp13 = 1; tmp13 <= tmp14; tmp13++)
              {
                _c = arrayGet(tmpMeta11,tmp13);
                omc_NFTyping_typeComponent(threadData, _c, _context, 1 /* true */);
              }
            }
          }

          { /* match expression */
            modelica_metatype tmp17_1;
            tmp17_1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 2)));
            {
              volatile mmc_switch_type tmp17;
              int tmp18;
              tmp17 = 0;
              for (; tmp17 < 2; tmp17++) {
                switch (MMC_SWITCH_CAST(tmp17)) {
                case 0: {
                  modelica_metatype tmpMeta19;
                  modelica_metatype tmpMeta20;
                  if (mmc__uniontype__metarecord__typedef__equal(tmp17_1,11,2) == 0) goto tmp16_end;
                  tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp17_1), 3));
                  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,4,3) == 0) goto tmp16_end;
                  tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 2));
                  
                  _con = tmpMeta20;
                  /* Pattern matching succeeded */
                  omc_NFTyping_typeStructor(threadData, _con);
                  goto tmp16_done;
                }
                case 1: {
                  
                  /* Pattern matching succeeded */
                  goto tmp16_done;
                }
                }
                goto tmp16_end;
                tmp16_end: ;
              }
              goto goto_15;
              goto_15:;
              goto goto_1;
              goto tmp16_done;
              tmp16_done:;
            }
          }
          ;
          goto tmp2_done;
        }
        case 2: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(_preserveDerived || omc_NFType_isArray(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 2)))))) goto tmp2_end;
          /* Tail recursive call */
          _cls = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 3)));
          _preserveDerived = 0 /* false */;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          ;
          goto tmp2_done;
        }
        case 3: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          omc_NFTyping_typeComponents(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 3))), _context, 0 /* false */);

          if((!omc_NFInstContext_inInstanceAPI(threadData, _context)))
          {
            _c2 = omc_NFInstNode_InstNode_getClass(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 3))));

            _c2 = omc_NFClass_setRestriction(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 4))), _c2);

            omc_NFInstNode_InstNode_updateClass(threadData, _c2, _cls);
          }
          goto tmp2_done;
        }
        case 4: {
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,3) == 0) goto tmp2_end;
          tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta21,11,2) == 0) goto tmp2_end;
          tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta22,5,2) == 0) goto tmp2_end;
          tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 2));
          tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 3));
          
          _con = tmpMeta23;
          _de = tmpMeta24;
          /* Pattern matching succeeded */
          omc_NFTyping_typeStructor(threadData, _con);

          omc_NFTyping_typeStructor(threadData, _de);
          goto tmp2_done;
        }
        case 5: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,3) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        case 6: {
          modelica_metatype tmpMeta25;
          
          /* Pattern matching succeeded */
          tmpMeta25 = stringAppend(_OMC_LIT346,omc_NFInstNode_InstNode_name(threadData, _cls));
          omc_Error_assertion(threadData, 0 /* false */, tmpMeta25, _OMC_LIT347);
          goto goto_1;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return;
}
void boxptr_NFTyping_typeComponents(threadData_t *threadData, modelica_metatype _cls, modelica_metatype _context, modelica_metatype _preserveDerived)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  tmp1 = mmc_unbox_integer(_context);
  tmp2 = mmc_unbox_integer(_preserveDerived);
  omc_NFTyping_typeComponents(threadData, _cls, tmp1, tmp2);
  return;
}

DLLDirection
void omc_NFTyping_typeClass(threadData_t *threadData, modelica_metatype _cls, modelica_integer _context)
{
  modelica_integer _next_context;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _next_context has no default value.
  _next_context = omc_NFInstContext_set(threadData, _context, ((modelica_integer) 8));

  omc_NFTyping_typeClassType(threadData, _cls, _OMC_LIT247, _next_context, _cls);

  omc_NFTyping_typeComponents(threadData, _cls, _next_context, 0 /* false */);

  omc_ExecStat_execStat(threadData, _OMC_LIT348);

  omc_NFTyping_typeBindings(threadData, _cls, _next_context);

  omc_ExecStat_execStat(threadData, _OMC_LIT349);

  omc_NFTyping_typeClassSections(threadData, _cls, _next_context);

  omc_ExecStat_execStat(threadData, _OMC_LIT350);
  _return: OMC_LABEL_UNUSED
  return;
}
void boxptr_NFTyping_typeClass(threadData_t *threadData, modelica_metatype _cls, modelica_metatype _context)
{
  modelica_integer tmp1;
  tmp1 = mmc_unbox_integer(_context);
  omc_NFTyping_typeClass(threadData, _cls, tmp1);
  return;
}

DLLDirection
modelica_boolean omc_NFTyping_TypingError_isError(threadData_t *threadData, modelica_metatype _error)
{
  modelica_boolean _isError;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isError has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _error;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isError = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isError;
}
modelica_metatype boxptr_NFTyping_TypingError_isError(threadData_t *threadData, modelica_metatype _error)
{
  modelica_boolean _isError;
  modelica_metatype out_isError;
  _isError = omc_NFTyping_TypingError_isError(threadData, _error);
  out_isError = mmc_mk_icon(_isError);
  return out_isError;
}

