#include "omc_simulation_settings.h"
#include "NBResizable.h"
#define _OMC_LIT0_data ""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT0,0,_OMC_LIT0_data);
#define _OMC_LIT0 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT0)
#define _OMC_LIT1_data "{"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT1,1,_OMC_LIT1_data);
#define _OMC_LIT1 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT1)
#define _OMC_LIT2_data ", "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT2,2,_OMC_LIT2_data);
#define _OMC_LIT2 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT2)
#define _OMC_LIT3_data "}"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT3,1,_OMC_LIT3_data);
#define _OMC_LIT3 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT3)
#define _OMC_LIT4_data ":"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT4,1,_OMC_LIT4_data);
#define _OMC_LIT4 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT4)
#define _OMC_LIT5_data ": {"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT5,3,_OMC_LIT5_data);
#define _OMC_LIT5 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT5)
#define _OMC_LIT6_data "}\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT6,2,_OMC_LIT6_data);
#define _OMC_LIT6 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT6)
#define _OMC_LIT7_data "[dumpResizable] Evaluated Optimal Resizable Parameter Values:"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT7,61,_OMC_LIT7_data);
#define _OMC_LIT7 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT7)
#define _OMC_LIT8_data "\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT8,1,_OMC_LIT8_data);
#define _OMC_LIT8 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT8)
#define _OMC_LIT9_data "/home/adrpo33/OpenModelica/OMCompiler/Compiler/NBackEnd/Util/NBResizable.mo"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT9,75,_OMC_LIT9_data);
#define _OMC_LIT9 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT9)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT10_6,1.758197185e9);
#define _OMC_LIT10_6 MMC_REFREALLIT(_OMC_LIT_STRUCT10_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT10,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT9,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(912)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7)),MMC_IMMEDIATE(MMC_TAGFIXNUM(912)),MMC_IMMEDIATE(MMC_TAGFIXNUM(86)),_OMC_LIT10_6}};
#define _OMC_LIT10 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT10)
#define _OMC_LIT11_data "  "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT11,2,_OMC_LIT11_data);
#define _OMC_LIT11 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT11)
#define _OMC_LIT12_data " "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT12,1,_OMC_LIT12_data);
#define _OMC_LIT12 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT12)
#define _OMC_LIT13_data "."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT13,1,_OMC_LIT13_data);
#define _OMC_LIT13 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT13)
#define _OMC_LIT14_data " OPTIMAL: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT14,10,_OMC_LIT14_data);
#define _OMC_LIT14 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT14)
#define _OMC_LIT15_data " (ORIGINAL: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT15,12,_OMC_LIT15_data);
#define _OMC_LIT15 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT15)
#define _OMC_LIT16_data ")\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT16,2,_OMC_LIT16_data);
#define _OMC_LIT16 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT16)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT17,2,3) {&NFExpression_INTEGER__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT17 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT17)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT18,1,5) {&NBEquation_Iterator_EMPTY__desc,}};
#define _OMC_LIT18 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT18)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT19,1,5) {&NFFlatten_FunctionTreeImpl_Tree_EMPTY__desc,}};
#define _OMC_LIT19 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT19)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT20_6,1.758197185e9);
#define _OMC_LIT20_6 MMC_REFREALLIT(_OMC_LIT_STRUCT20_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT20,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT9,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(818)),MMC_IMMEDIATE(MMC_TAGFIXNUM(19)),MMC_IMMEDIATE(MMC_TAGFIXNUM(818)),MMC_IMMEDIATE(MMC_TAGFIXNUM(96)),_OMC_LIT20_6}};
#define _OMC_LIT20 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT20)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT21_6,1.758197185e9);
#define _OMC_LIT21_6 MMC_REFREALLIT(_OMC_LIT_STRUCT21_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT21,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT9,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(822)),MMC_IMMEDIATE(MMC_TAGFIXNUM(19)),MMC_IMMEDIATE(MMC_TAGFIXNUM(827)),MMC_IMMEDIATE(MMC_TAGFIXNUM(26)),_OMC_LIT21_6}};
#define _OMC_LIT21 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT21)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT22_6,1.758197185e9);
#define _OMC_LIT22_6 MMC_REFREALLIT(_OMC_LIT_STRUCT22_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT22,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT9,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(761)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(761)),MMC_IMMEDIATE(MMC_TAGFIXNUM(94)),_OMC_LIT22_6}};
#define _OMC_LIT22 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT22)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT23_6,1.758197185e9);
#define _OMC_LIT23_6 MMC_REFREALLIT(_OMC_LIT_STRUCT23_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT23,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT9,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(723)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7)),MMC_IMMEDIATE(MMC_TAGFIXNUM(723)),MMC_IMMEDIATE(MMC_TAGFIXNUM(73)),_OMC_LIT23_6}};
#define _OMC_LIT23 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT23)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT24_6,1.758197185e9);
#define _OMC_LIT24_6 MMC_REFREALLIT(_OMC_LIT_STRUCT24_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT24,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT9,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(707)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7)),MMC_IMMEDIATE(MMC_TAGFIXNUM(707)),MMC_IMMEDIATE(MMC_TAGFIXNUM(73)),_OMC_LIT24_6}};
#define _OMC_LIT24 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT24)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT25_6,1.758197185e9);
#define _OMC_LIT25_6 MMC_REFREALLIT(_OMC_LIT_STRUCT25_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT25,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT9,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(604)),MMC_IMMEDIATE(MMC_TAGFIXNUM(5)),MMC_IMMEDIATE(MMC_TAGFIXNUM(604)),MMC_IMMEDIATE(MMC_TAGFIXNUM(79)),_OMC_LIT25_6}};
#define _OMC_LIT25 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT25)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT26,1,3) {&NFType_INTEGER__desc,}};
#define _OMC_LIT26 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT26)
#define _OMC_LIT27_data "variable"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT27,8,_OMC_LIT27_data);
#define _OMC_LIT27 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT27)
#define _OMC_LIT28_data ">="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT28,2,_OMC_LIT28_data);
#define _OMC_LIT28 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT28)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT29,1,5) {&ErrorTypes_MessageType_TRANSLATION__desc,}};
#define _OMC_LIT29 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT29)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT30,1,4) {&ErrorTypes_Severity_ERROR__desc,}};
#define _OMC_LIT30 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT30)
#define _OMC_LIT31_data "Internal error %s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT31,17,_OMC_LIT31_data);
#define _OMC_LIT31 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT31)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT32,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT31}};
#define _OMC_LIT32 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT32)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT33,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(63)),_OMC_LIT29,_OMC_LIT30,_OMC_LIT32}};
#define _OMC_LIT33 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT33)
#define _OMC_LIT34_data "NBResizable.addVariableConstraint failed.\nViolation of implicit constraint `"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT34,76,_OMC_LIT34_data);
#define _OMC_LIT34 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT34)
#define _OMC_LIT35_data " >= "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT35,4,_OMC_LIT35_data);
#define _OMC_LIT35 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT35)
#define _OMC_LIT36_data "` for component reference `"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT36,27,_OMC_LIT36_data);
#define _OMC_LIT36 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT36)
#define _OMC_LIT37_data "` of variable `"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT37,15,_OMC_LIT37_data);
#define _OMC_LIT37 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT37)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT38_6,1.758197185e9);
#define _OMC_LIT38_6 MMC_REFREALLIT(_OMC_LIT_STRUCT38_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT38,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT9,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(619)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(620)),MMC_IMMEDIATE(MMC_TAGFIXNUM(222)),_OMC_LIT38_6}};
#define _OMC_LIT38 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT38)
#define _OMC_LIT39_data "`\nin equation:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT39,15,_OMC_LIT39_data);
#define _OMC_LIT39 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT39)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT40,1,1) {MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT40 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT40)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT41_6,1.758197185e9);
#define _OMC_LIT41_6 MMC_REFREALLIT(_OMC_LIT_STRUCT41_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT41,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT9,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(496)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7)),MMC_IMMEDIATE(MMC_TAGFIXNUM(496)),MMC_IMMEDIATE(MMC_TAGFIXNUM(68)),_OMC_LIT41_6}};
#define _OMC_LIT41 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT41)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT42,2,3) {&NFExpression_INTEGER__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1))}};
#define _OMC_LIT42 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT42)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT43_6,1.758197185e9);
#define _OMC_LIT43_6 MMC_REFREALLIT(_OMC_LIT_STRUCT43_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT43,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT9,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(452)),MMC_IMMEDIATE(MMC_TAGFIXNUM(12)),MMC_IMMEDIATE(MMC_TAGFIXNUM(452)),MMC_IMMEDIATE(MMC_TAGFIXNUM(30)),_OMC_LIT43_6}};
#define _OMC_LIT43 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT43)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT44_6,1.758197185e9);
#define _OMC_LIT44_6 MMC_REFREALLIT(_OMC_LIT_STRUCT44_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT44,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT9,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(441)),MMC_IMMEDIATE(MMC_TAGFIXNUM(5)),MMC_IMMEDIATE(MMC_TAGFIXNUM(441)),MMC_IMMEDIATE(MMC_TAGFIXNUM(88)),_OMC_LIT44_6}};
#define _OMC_LIT44 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT44)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT45_6,1.758197185e9);
#define _OMC_LIT45_6 MMC_REFREALLIT(_OMC_LIT_STRUCT45_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT45,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT9,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(390)),MMC_IMMEDIATE(MMC_TAGFIXNUM(12)),MMC_IMMEDIATE(MMC_TAGFIXNUM(390)),MMC_IMMEDIATE(MMC_TAGFIXNUM(30)),_OMC_LIT45_6}};
#define _OMC_LIT45 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT45)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT46_6,1.758197185e9);
#define _OMC_LIT46_6 MMC_REFREALLIT(_OMC_LIT_STRUCT46_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT46,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT9,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(378)),MMC_IMMEDIATE(MMC_TAGFIXNUM(32)),MMC_IMMEDIATE(MMC_TAGFIXNUM(379)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),_OMC_LIT46_6}};
#define _OMC_LIT46 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT46)
#define _OMC_LIT47_data "max"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT47,3,_OMC_LIT47_data);
#define _OMC_LIT47 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT47)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT48,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT47}};
#define _OMC_LIT48 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT48)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT49,1,11) {&NFInstNode_InstNode_EMPTY__NODE__desc,}};
#define _OMC_LIT49 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT49)
#define _OMC_LIT50_data "i"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT50,1,_OMC_LIT50_data);
#define _OMC_LIT50 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT50)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT51,1,3) {&NFBinding_UNBOUND__desc,}};
#define _OMC_LIT51 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT51)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT52,1,4) {&NFPrefixes_Replaceable_NOT__REPLACEABLE__desc,}};
#define _OMC_LIT52 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT52)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT53,10,3) {&NFAttributes_ATTRIBUTES__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT52,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */))}};
#define _OMC_LIT53 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT53)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT54,3,3) {&SCode_Comment_COMMENT__desc,MMC_REFSTRUCTLIT(mmc_none),MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT54 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT54)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT55,0.0);
#define _OMC_LIT55 MMC_REFREALLIT(_OMC_LIT_STRUCT55)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT56,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT0,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT55}};
#define _OMC_LIT56 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT56)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT57,9,4) {&NFComponent_COMPONENT__desc,_OMC_LIT49,_OMC_LIT26,_OMC_LIT51,_OMC_LIT51,_OMC_LIT53,_OMC_LIT54,MMC_IMMEDIATE(MMC_TAGFIXNUM(4)),_OMC_LIT56}};
#define _OMC_LIT57 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT57)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT58,1,1) {_OMC_LIT57}};
#define _OMC_LIT58 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT58)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT59,1,9) {&NFInstNode_InstNodeType_NORMAL__COMP__desc,}};
#define _OMC_LIT59 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT59)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT60,7,4) {&NFInstNode_InstNode_COMPONENT__NODE__desc,_OMC_LIT50,MMC_REFSTRUCTLIT(mmc_none),MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),_OMC_LIT58,_OMC_LIT49,_OMC_LIT59}};
#define _OMC_LIT60 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT60)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT61,2,1) {_OMC_LIT60,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT61 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT61)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT62,2,1) {_OMC_LIT60,_OMC_LIT61}};
#define _OMC_LIT62 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT62)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT63,1,7) {&DAE_InlineType_NO__INLINE__desc,}};
#define _OMC_LIT63 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT63)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT64,3,4) {&DAE_FunctionBuiltin_FUNCTION__BUILTIN__desc,MMC_REFSTRUCTLIT(mmc_none),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */))}};
#define _OMC_LIT64 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT64)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT65,1,3) {&DAE_FunctionParallelism_FP__NON__PARALLEL__desc,}};
#define _OMC_LIT65 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT65)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT66,7,3) {&DAE_FunctionAttributes_FUNCTION__ATTRIBUTES__desc,_OMC_LIT63,MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT64,_OMC_LIT65}};
#define _OMC_LIT66 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT66)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT67,1,1) {MMC_IMMEDIATE(MMC_TAGFIXNUM(1))}};
#define _OMC_LIT67 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT67)
#define _OMC_LIT68_data "array dimension"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT68,15,_OMC_LIT68_data);
#define _OMC_LIT68 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT68)
#define _OMC_LIT69_data "="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT69,1,_OMC_LIT69_data);
#define _OMC_LIT69 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT69)
#define _OMC_LIT70_data "NBResizable.findOptimalResizableValues failed.\nViolation of implicit constraint `"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT70,81,_OMC_LIT70_data);
#define _OMC_LIT70 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT70)
#define _OMC_LIT71_data " = "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT71,3,_OMC_LIT71_data);
#define _OMC_LIT71 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT71)
#define _OMC_LIT72_data "` for LHS and RHS type dimensions in equation:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT72,47,_OMC_LIT72_data);
#define _OMC_LIT72 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT72)
#define _OMC_LIT73_data "INDEPENDENT"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT73,11,_OMC_LIT73_data);
#define _OMC_LIT73 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT73)
#define _OMC_LIT74_data "FORWARD"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT74,7,_OMC_LIT74_data);
#define _OMC_LIT74 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT74)
#define _OMC_LIT75_data "BACKWARD"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT75,8,_OMC_LIT75_data);
#define _OMC_LIT75 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT75)
#define _OMC_LIT76_data "FAILED"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT76,6,_OMC_LIT76_data);
#define _OMC_LIT76 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT76)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT77_6,1.758197185e9);
#define _OMC_LIT77_6 MMC_REFREALLIT(_OMC_LIT_STRUCT77_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT77,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT9,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(139)),MMC_IMMEDIATE(MMC_TAGFIXNUM(5)),MMC_IMMEDIATE(MMC_TAGFIXNUM(139)),MMC_IMMEDIATE(MMC_TAGFIXNUM(85)),_OMC_LIT77_6}};
#define _OMC_LIT77 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT77)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT78_6,1.758197185e9);
#define _OMC_LIT78_6 MMC_REFREALLIT(_OMC_LIT_STRUCT78_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT78,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT9,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(174)),MMC_IMMEDIATE(MMC_TAGFIXNUM(19)),MMC_IMMEDIATE(MMC_TAGFIXNUM(174)),MMC_IMMEDIATE(MMC_TAGFIXNUM(74)),_OMC_LIT78_6}};
#define _OMC_LIT78 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT78)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT79,1,4) {&NFComponentRef_EMPTY__desc,}};
#define _OMC_LIT79 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT79)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT80,2,1) {_OMC_LIT79,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT80 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT80)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT81,2,1) {MMC_IMMEDIATE(MMC_TAGFIXNUM(4)),MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT81 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT81)
#define _OMC_LIT82_data "dumpResizable"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT82,13,_OMC_LIT82_data);
#define _OMC_LIT82 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT82)
#define _OMC_LIT83_data "Dumps information about resizable paremeter handling."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT83,53,_OMC_LIT83_data);
#define _OMC_LIT83 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT83)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT84,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT83}};
#define _OMC_LIT84 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT84)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT85,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(194)),_OMC_LIT82,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT84}};
#define _OMC_LIT85 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT85)
#define _OMC_LIT86_data "[dumpResizable] No resizable parameters were detected in the model."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT86,67,_OMC_LIT86_data);
#define _OMC_LIT86 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT86)
#include "util/modelica.h"

#include "NBResizable_includes.h"


/* default, do not make protected functions static */
#if !defined(PROTECTED_FUNCTION_STATIC)
#define PROTECTED_FUNCTION_STATIC
#endif
PROTECTED_FUNCTION_STATIC modelica_string omc_NBResizable_constraintsToString(threadData_t *threadData, modelica_metatype _constraints);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_constraintsToString,2,0) {(void*) boxptr_NBResizable_constraintsToString,0}};
#define boxvar_NBResizable_constraintsToString MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_constraintsToString)
PROTECTED_FUNCTION_STATIC modelica_string omc_NBResizable_parametersToString(threadData_t *threadData, modelica_metatype _parameters);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_parametersToString,2,0) {(void*) boxptr_NBResizable_parametersToString,0}};
#define boxvar_NBResizable_parametersToString MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_parametersToString)
PROTECTED_FUNCTION_STATIC modelica_string omc_NBResizable_distancesToString(threadData_t *threadData, modelica_metatype _tpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_distancesToString,2,0) {(void*) boxptr_NBResizable_distancesToString,0}};
#define boxvar_NBResizable_distancesToString MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_distancesToString)
PROTECTED_FUNCTION_STATIC modelica_string omc_NBResizable_occurencesToString(threadData_t *threadData, modelica_metatype _occs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_occurencesToString,2,0) {(void*) boxptr_NBResizable_occurencesToString,0}};
#define boxvar_NBResizable_occurencesToString MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_occurencesToString)
PROTECTED_FUNCTION_STATIC modelica_string omc_NBResizable_optimalValuesToString(threadData_t *threadData, modelica_metatype _optimal_values, modelica_string __omcQ_24in_5Fstr);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_optimalValuesToString,2,0) {(void*) boxptr_NBResizable_optimalValuesToString,0}};
#define boxvar_NBResizable_optimalValuesToString MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_optimalValuesToString)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_updateDimension(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fdim, modelica_metatype _optimal_values);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_updateDimension,2,0) {(void*) boxptr_NBResizable_updateDimension,0}};
#define boxvar_NBResizable_updateDimension MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_updateDimension)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_checkConstraint(threadData_t *threadData, modelica_metatype _constraint, modelica_metatype _optimal_values);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_checkConstraint,2,0) {(void*) boxptr_NBResizable_checkConstraint,0}};
#define boxvar_NBResizable_checkConstraint MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_checkConstraint)
PROTECTED_FUNCTION_STATIC void omc_NBResizable_fixConstraints(threadData_t *threadData, modelica_metatype _optimal_values, modelica_metatype _c2p, modelica_metatype _p2c, modelica_metatype _failed_parameters, modelica_fnptr _func);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_fixConstraints,2,0) {(void*) boxptr_NBResizable_fixConstraints,0}};
#define boxvar_NBResizable_fixConstraints MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_fixConstraints)
PROTECTED_FUNCTION_STATIC void omc_NBResizable_computeOptimalValues(threadData_t *threadData, modelica_metatype _optimal_values, modelica_metatype _c2pi, modelica_metatype _p2ci, modelica_metatype _c2pe, modelica_metatype _p2ce);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_computeOptimalValues,2,0) {(void*) boxptr_NBResizable_computeOptimalValues,0}};
#define boxvar_NBResizable_computeOptimalValues MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_computeOptimalValues)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_invertConstraintParameterMap(threadData_t *threadData, modelica_metatype _c2p, modelica_metatype _parameters);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_invertConstraintParameterMap,2,0) {(void*) boxptr_NBResizable_invertConstraintParameterMap,0}};
#define boxvar_NBResizable_invertConstraintParameterMap MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_invertConstraintParameterMap)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_setInitialValues(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcref, modelica_metatype _min_parameters, modelica_metatype _optimal_values);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_setInitialValues,2,0) {(void*) boxptr_NBResizable_setInitialValues,0}};
#define boxvar_NBResizable_setInitialValues MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_setInitialValues)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_getInitialValues(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcref, modelica_metatype _target, modelica_metatype _args, modelica_metatype _min_parameters, modelica_metatype _optimal_values);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_getInitialValues,2,0) {(void*) boxptr_NBResizable_getInitialValues,0}};
#define boxvar_NBResizable_getInitialValues MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_getInitialValues)
PROTECTED_FUNCTION_STATIC void omc_NBResizable_addConstraint(threadData_t *threadData, modelica_metatype _old_const, modelica_metatype _replacements, modelica_metatype _c2p, modelica_fnptr _func, modelica_string _const_kind, modelica_string _eq_kind);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_addConstraint,2,0) {(void*) boxptr_NBResizable_addConstraint,0}};
#define boxvar_NBResizable_addConstraint MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_addConstraint)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_addVariableConstraint(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _eqn, modelica_metatype _replacements, modelica_metatype __omcQ_24in_5Fc2pi);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_addVariableConstraint,2,0) {(void*) boxptr_NBResizable_addVariableConstraint,0}};
#define boxvar_NBResizable_addVariableConstraint MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_addVariableConstraint)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_getDistance(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _exp, modelica_metatype _args, modelica_metatype __omcQ_24in_5Fopt_5Ffactor, modelica_integer __omcQ_24in_5Fmin_5Fdistance, modelica_integer __omcQ_24in_5Fmax_5Fdistance, modelica_integer *out_min_distance, modelica_integer *out_max_distance);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBResizable_getDistance(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _exp, modelica_metatype _args, modelica_metatype __omcQ_24in_5Fopt_5Ffactor, modelica_metatype __omcQ_24in_5Fmin_5Fdistance, modelica_metatype __omcQ_24in_5Fmax_5Fdistance, modelica_metatype *out_min_distance, modelica_metatype *out_max_distance);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_getDistance,2,0) {(void*) boxptr_NBResizable_getDistance,0}};
#define boxvar_NBResizable_getDistance MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_getDistance)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_getShift(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _cref);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_getShift,2,0) {(void*) boxptr_NBResizable_getShift,0}};
#define boxvar_NBResizable_getShift MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_getShift)
PROTECTED_FUNCTION_STATIC modelica_integer omc_NBResizable_getFactor(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _args, modelica_metatype _opt_factor);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBResizable_getFactor(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _args, modelica_metatype _opt_factor);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_getFactor,2,0) {(void*) boxptr_NBResizable_getFactor,0}};
#define boxvar_NBResizable_getFactor MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_getFactor)
PROTECTED_FUNCTION_STATIC void omc_NBResizable_findOptimalValue(threadData_t *threadData, modelica_metatype _eqn, modelica_metatype _occs, modelica_metatype _resizables, modelica_metatype _parameters, modelica_metatype _min_parameters, modelica_metatype _optimal_values, modelica_metatype _c2pi);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_findOptimalValue,2,0) {(void*) boxptr_NBResizable_findOptimalValue,0}};
#define boxvar_NBResizable_findOptimalValue MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_findOptimalValue)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_collectVars(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_fnptr _func, modelica_metatype _collector);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_collectVars,2,0) {(void*) boxptr_NBResizable_collectVars,0}};
#define boxvar_NBResizable_collectVars MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_collectVars)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_addOccurence(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fiter, modelica_metatype _subExp, modelica_metatype _occs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_addOccurence,2,0) {(void*) boxptr_NBResizable_addOccurence,0}};
#define boxvar_NBResizable_addOccurence MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_addOccurence)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_collectOccurencesSubscriptExp(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _occs, modelica_metatype _acc);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_collectOccurencesSubscriptExp,2,0) {(void*) boxptr_NBResizable_collectOccurencesSubscriptExp,0}};
#define boxvar_NBResizable_collectOccurencesSubscriptExp MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_collectOccurencesSubscriptExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_collectOccurencesSubscript(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fsub, modelica_metatype _occs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_collectOccurencesSubscript,2,0) {(void*) boxptr_NBResizable_collectOccurencesSubscript,0}};
#define boxvar_NBResizable_collectOccurencesSubscript MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_collectOccurencesSubscript)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_collectOccurences(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _occs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_collectOccurences,2,0) {(void*) boxptr_NBResizable_collectOccurences,0}};
#define boxvar_NBResizable_collectOccurences MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_collectOccurences)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_collectResizables(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _collector);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_collectResizables,2,0) {(void*) boxptr_NBResizable_collectResizables,0}};
#define boxvar_NBResizable_collectResizables MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_collectResizables)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_NBResizable_expContainsResizable(threadData_t *threadData, modelica_metatype _exp, modelica_boolean __omcQ_24in_5Fb);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBResizable_expContainsResizable(threadData_t *threadData, modelica_metatype _exp, modelica_metatype __omcQ_24in_5Fb);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_expContainsResizable,2,0) {(void*) boxptr_NBResizable_expContainsResizable,0}};
#define boxvar_NBResizable_expContainsResizable MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_expContainsResizable)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_NBResizable_iteratorIsResizable(threadData_t *threadData, modelica_metatype _range);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBResizable_iteratorIsResizable(threadData_t *threadData, modelica_metatype _range);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_iteratorIsResizable,2,0) {(void*) boxptr_NBResizable_iteratorIsResizable,0}};
#define boxvar_NBResizable_iteratorIsResizable MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_iteratorIsResizable)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_getVarReplacements(threadData_t *threadData, modelica_metatype _iter);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_getVarReplacements,2,0) {(void*) boxptr_NBResizable_getVarReplacements,0}};
#define boxvar_NBResizable_getVarReplacements MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_getVarReplacements)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_getResizableIterators(threadData_t *threadData, modelica_metatype _iter);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_getResizableIterators,2,0) {(void*) boxptr_NBResizable_getResizableIterators,0}};
#define boxvar_NBResizable_getResizableIterators MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_getResizableIterators)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_findOptimalResizableValues(threadData_t *threadData, modelica_metatype __omcQ_24in_5Feqn, modelica_metatype _parameters, modelica_metatype _min_parameters, modelica_metatype _optimal_values, modelica_metatype _c2pi, modelica_metatype _c2pe);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NBResizable_findOptimalResizableValues,2,0) {(void*) boxptr_NBResizable_findOptimalResizableValues,0}};
#define boxvar_NBResizable_findOptimalResizableValues MMC_REFSTRUCTLIT(boxvar_lit_NBResizable_findOptimalResizableValues)

PROTECTED_FUNCTION_STATIC modelica_string omc_NBResizable_constraintsToString(threadData_t *threadData, modelica_metatype _constraints)
{
  modelica_string _str = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _str = omc_List_toString(threadData, _constraints, boxvar_NFExpression_toString, _OMC_LIT0, _OMC_LIT1, _OMC_LIT2, _OMC_LIT3, 1 /* true */, ((modelica_integer) 0));
  _return: OMC_LABEL_UNUSED
  return _str;
}

PROTECTED_FUNCTION_STATIC modelica_string omc_NBResizable_parametersToString(threadData_t *threadData, modelica_metatype _parameters)
{
  modelica_string _str = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _str = omc_List_toString(threadData, _parameters, boxvar_NFComponentRef_toString, _OMC_LIT0, _OMC_LIT1, _OMC_LIT2, _OMC_LIT3, 1 /* true */, ((modelica_integer) 0));
  _return: OMC_LABEL_UNUSED
  return _str;
}

PROTECTED_FUNCTION_STATIC modelica_string omc_NBResizable_distancesToString(threadData_t *threadData, modelica_metatype _tpl)
{
  modelica_string _str = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = stringAppend(omc_NFComponentRef_toString(threadData, omc_Util_tuple21(threadData, _tpl)),_OMC_LIT4);
  tmpMeta2 = stringAppend(tmpMeta1,intString(mmc_unbox_integer(omc_Util_tuple22(threadData, _tpl))));
  _str = tmpMeta2;
  _return: OMC_LABEL_UNUSED
  return _str;
}

PROTECTED_FUNCTION_STATIC modelica_string omc_NBResizable_occurencesToString(threadData_t *threadData, modelica_metatype _occs)
{
  modelica_string _str = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _str = _OMC_LIT0;
  {
    modelica_metatype _tpl;
    for (tmpMeta1 = omc_UnorderedMap_toList(threadData, _occs); !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _tpl = MMC_CAR(tmpMeta1);
      tmpMeta2 = stringAppend(omc_NFComponentRef_toString(threadData, omc_Util_tuple21(threadData, _tpl)),_OMC_LIT5);
      tmpMeta3 = stringAppend(tmpMeta2,omc_UnorderedSet_toString(threadData, omc_Util_tuple22(threadData, _tpl), boxvar_NFExpression_toString, _OMC_LIT2));
      tmpMeta4 = stringAppend(tmpMeta3,_OMC_LIT6);
      _str = tmpMeta4;
    }
  }
  _return: OMC_LABEL_UNUSED
  return _str;
}

PROTECTED_FUNCTION_STATIC modelica_string omc_NBResizable_optimalValuesToString(threadData_t *threadData, modelica_metatype _optimal_values, modelica_string __omcQ_24in_5Fstr)
{
  modelica_string _str = NULL;
  modelica_metatype _param = NULL;
  modelica_metatype _value = NULL;
  modelica_metatype _var = NULL;
  modelica_metatype _names = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _old_vals = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype _new_vals = NULL;
  modelica_metatype tmpMeta3;
  modelica_string _name = NULL;
  modelica_string _old = NULL;
  modelica_string _new = NULL;
  modelica_integer _names_len;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_integer tmp12;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  modelica_metatype tmpMeta16;
  modelica_metatype tmpMeta17;
  modelica_metatype tmpMeta18;
  modelica_metatype tmpMeta19;
  modelica_metatype tmpMeta20;
  modelica_metatype tmpMeta21;
  modelica_metatype tmpMeta22;
  modelica_metatype tmpMeta23;
  modelica_metatype tmpMeta24;
  modelica_metatype tmpMeta25;
  modelica_metatype tmpMeta26;
  modelica_metatype tmpMeta27;
  modelica_metatype tmpMeta28;
  modelica_metatype tmpMeta29;
  modelica_metatype tmpMeta30;
  modelica_metatype tmpMeta31;
  modelica_metatype tmpMeta32;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _str = __omcQ_24in_5Fstr;
  // _param has no default value.
  // _value has no default value.
  // _var has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _names = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _old_vals = tmpMeta2;
  tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
  _new_vals = tmpMeta3;
  // _name has no default value.
  // _old has no default value.
  // _new has no default value.
  // _names_len has no default value.
  {
    modelica_metatype _tpl;
    for (tmpMeta4 = omc_UnorderedMap_toList(threadData, _optimal_values); !listEmpty(tmpMeta4); tmpMeta4=MMC_CDR(tmpMeta4))
    {
      _tpl = MMC_CAR(tmpMeta4);
      /* Pattern-matching assignment */
      tmpMeta5 = _tpl;
      tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 1));
      tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 2));
      _param = tmpMeta6;
      _value = tmpMeta7;

      _var = omc_Pointer_access(threadData, omc_NBVariable_getVarPointer(threadData, _param, _OMC_LIT10));

      tmpMeta8 = mmc_mk_cons(omc_NFComponentRef_toString(threadData, _param), _names);
      _names = tmpMeta8;

      tmpMeta9 = mmc_mk_cons(omc_NFExpression_toString(threadData, _value), _new_vals);
      _new_vals = tmpMeta9;

      tmpMeta10 = mmc_mk_cons(omc_NFBinding_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_var), 4))), _OMC_LIT0), _old_vals);
      _old_vals = tmpMeta10;
    }
  }

  {
    modelica_integer __omcQ_24tmpVar1;
    modelica_integer __omcQ_24tmpVar0;
    modelica_integer tmp13;
    modelica_metatype _n_loopVar = 0;
    modelica_metatype _n;
    _n_loopVar = _names;
    __omcQ_24tmpVar1 = ((modelica_integer) -4611686018427387903); /* defaultValue */
    while(1) {
      tmp13 = 1;
      if (!listEmpty(_n_loopVar)) {
        _n = MMC_CAR(_n_loopVar);
        _n_loopVar = MMC_CDR(_n_loopVar);
        tmp13--;
      }
      if (tmp13 == 0) {
        __omcQ_24tmpVar0 = stringLength(_n);
        __omcQ_24tmpVar1 = modelica_integer_max((modelica_integer)(__omcQ_24tmpVar0),(modelica_integer)(__omcQ_24tmpVar1));
      } else if (tmp13 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    tmp12 = __omcQ_24tmpVar1;
  }
  _names_len = tmp12;

  while(1)
  {
    if(!(!listEmpty(_names))) break;
    /* Pattern-matching assignment */
    tmpMeta14 = _names;
    if (listEmpty(tmpMeta14)) MMC_THROW_INTERNAL();
    tmpMeta15 = MMC_CAR(tmpMeta14);
    tmpMeta16 = MMC_CDR(tmpMeta14);
    _name = tmpMeta15;
    _names = tmpMeta16;

    /* Pattern-matching assignment */
    tmpMeta17 = _new_vals;
    if (listEmpty(tmpMeta17)) MMC_THROW_INTERNAL();
    tmpMeta18 = MMC_CAR(tmpMeta17);
    tmpMeta19 = MMC_CDR(tmpMeta17);
    _new = tmpMeta18;
    _new_vals = tmpMeta19;

    /* Pattern-matching assignment */
    tmpMeta20 = _old_vals;
    if (listEmpty(tmpMeta20)) MMC_THROW_INTERNAL();
    tmpMeta21 = MMC_CAR(tmpMeta20);
    tmpMeta22 = MMC_CDR(tmpMeta20);
    _old = tmpMeta21;
    _old_vals = tmpMeta22;

    tmpMeta23 = stringAppend(_str,_OMC_LIT11);
    tmpMeta24 = stringAppend(tmpMeta23,_name);
    tmpMeta25 = stringAppend(tmpMeta24,_OMC_LIT12);
    tmpMeta26 = stringAppend(tmpMeta25,omc_StringUtil_repeat(threadData, _OMC_LIT13, ((modelica_integer) 5) + _names_len - stringLength(_name)));
    tmpMeta27 = stringAppend(tmpMeta26,_OMC_LIT14);
    tmpMeta28 = stringAppend(tmpMeta27,_new);
    tmpMeta29 = stringAppend(tmpMeta28,_OMC_LIT15);
    tmpMeta30 = stringAppend(tmpMeta29,_old);
    tmpMeta31 = stringAppend(tmpMeta30,_OMC_LIT16);
    _str = tmpMeta31;
  }

  tmpMeta32 = stringAppend(_str,_OMC_LIT8);
  _str = tmpMeta32;
  _return: OMC_LABEL_UNUSED
  return _str;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_updateDimension(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fdim, modelica_metatype _optimal_values)
{
  modelica_metatype _dim = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _dim = __omcQ_24in_5Fdim;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _dim;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta6 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta6), MMC_UNTAGPTR(_dim), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta6))[3] = omc_NBResizable_checkConstraint(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dim), 4))), _optimal_values);
          _dim = tmpMeta6;
          tmpMeta1 = _dim;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _dim;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _dim = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _dim;
}

static modelica_metatype closure0_NBReplacements_applySimpleExp(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_metatype replacements = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NBReplacements_applySimpleExp(thData, $in_exp, replacements);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_checkConstraint(threadData_t *threadData, modelica_metatype _constraint, modelica_metatype _optimal_values)
{
  modelica_metatype _value = NULL;
  modelica_metatype _replaced = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _value has no default value.
  // _replaced has no default value.
  tmpMeta1 = mmc_mk_box1(0, _optimal_values);
  _replaced = omc_NFExpression_map(threadData, _constraint, (modelica_fnptr) mmc_mk_box2(0,closure0_NBReplacements_applySimpleExp,tmpMeta1));

  _replaced = omc_NFSimplifyExp_simplify(threadData, _replaced, 0 /* false */);

  { /* match expression */
    modelica_metatype tmp5_1;
    tmp5_1 = _replaced;
    {
      volatile mmc_switch_type tmp5;
      int tmp6;
      tmp5 = 0;
      for (; tmp5 < 2; tmp5++) {
        switch (MMC_SWITCH_CAST(tmp5)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,0,1) == 0) goto tmp4_end;
          
          /* Pattern matching succeeded */
          tmpMeta2 = mmc_mk_some((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_replaced), 2))));
          goto tmp4_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta2 = mmc_mk_none();
          goto tmp4_done;
        }
        }
        goto tmp4_end;
        tmp4_end: ;
      }
      goto goto_3;
      goto_3:;
      MMC_THROW_INTERNAL();
      goto tmp4_done;
      tmp4_done:;
    }
  }
  _value = tmpMeta2;
  _return: OMC_LABEL_UNUSED
  return _value;
}

PROTECTED_FUNCTION_STATIC void omc_NBResizable_fixConstraints(threadData_t *threadData, modelica_metatype _optimal_values, modelica_metatype _c2p, modelica_metatype _p2c, modelica_metatype _failed_parameters, modelica_fnptr _func)
{
  modelica_metatype _parsed_constraints = NULL;
  modelica_metatype _constraint = NULL;
  modelica_metatype _replaced = NULL;
  modelica_metatype _old_optimal_value = NULL;
  modelica_metatype _crefs = NULL;
  modelica_metatype _eqn = NULL;
  modelica_metatype _solved_eqn = NULL;
  modelica_integer _status;
  modelica_integer _value;
  modelica_boolean _failed;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta26;
  modelica_metatype tmpMeta27;
  modelica_metatype tmpMeta28;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _parsed_constraints = omc_UnorderedSet_new(threadData, boxvar_NFExpression_hash, boxvar_NFExpression_isEqual, ((modelica_integer) 13));
  // _constraint has no default value.
  // _replaced has no default value.
  // _old_optimal_value has no default value.
  // _crefs has no default value.
  // _eqn has no default value.
  // _solved_eqn has no default value.
  // _status has no default value.
  // _value has no default value.
  // _failed has no default value.
  {
    modelica_metatype _tpl;
    for (tmpMeta1 = omc_UnorderedMap_toList(threadData, _c2p); !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _tpl = MMC_CAR(tmpMeta1);
      /* Pattern-matching assignment */
      tmpMeta2 = _tpl;
      tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 1));
      tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
      _constraint = tmpMeta3;
      _crefs = tmpMeta4;

      { /* match expression */
        modelica_metatype tmp7_1;
        tmp7_1 = omc_NBResizable_checkConstraint(threadData, _constraint, _optimal_values);
        {
          volatile mmc_switch_type tmp7;
          int tmp8;
          tmp7 = 0;
          for (; tmp7 < 3; tmp7++) {
            switch (MMC_SWITCH_CAST(tmp7)) {
            case 0: {
              modelica_metatype tmpMeta9;
              modelica_integer tmp10;
              if (optionNone(tmp7_1)) goto tmp6_end;
              tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 1));
              tmp10 = mmc_unbox_integer(tmpMeta9);
              _value = tmp10  /* pattern as ty=Integer */;
              /* Pattern matching succeeded */
              /* Check guard condition after assignments */
              if (!mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), mmc_mk_integer(_value)) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, mmc_mk_integer(_value)))) goto tmp6_end;
              goto tmp6_done;
            }
            case 1: {
              modelica_metatype tmpMeta11;
              modelica_integer tmp12;
              modelica_metatype tmpMeta13;
              modelica_metatype tmpMeta23;
              if (optionNone(tmp7_1)) goto tmp6_end;
              tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 1));
              tmp12 = mmc_unbox_integer(tmpMeta11);
              _value = tmp12  /* pattern as ty=Integer */;
              /* Pattern matching succeeded */
              _eqn = omc_NBEquation_Equation_makeAssignmentEqn(threadData, _constraint, _OMC_LIT17, _OMC_LIT18, omc_NBEquation_default(threadData, 2, 0 /* false */, mmc_mk_none()));

              {
                modelica_metatype _cref;
                for (tmpMeta13 = _crefs; !listEmpty(tmpMeta13); tmpMeta13=MMC_CDR(tmpMeta13))
                {
                  _cref = MMC_CAR(tmpMeta13);
                  _failed = 0 /* false */;

                  _solved_eqn = omc_NBSolve_solveBody(threadData, _eqn, _cref, _OMC_LIT19 ,NULL ,&_status ,NULL);

                  if(((modelica_integer)_status == 2))
                  {
                    { /* match expression */
                      modelica_metatype tmp16_1;
                      tmp16_1 = omc_NBResizable_checkConstraint(threadData, omc_NBEquation_Equation_getRHS(threadData, _solved_eqn), _optimal_values);
                      {
                        volatile mmc_switch_type tmp16;
                        int tmp17;
                        tmp16 = 0;
                        for (; tmp16 < 2; tmp16++) {
                          switch (MMC_SWITCH_CAST(tmp16)) {
                          case 0: {
                            modelica_metatype tmpMeta18;
                            modelica_integer tmp19;
                            modelica_metatype tmpMeta20;
                            modelica_metatype tmpMeta21;
                            modelica_metatype tmpMeta22;
                            if (optionNone(tmp16_1)) goto tmp15_end;
                            tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp16_1), 1));
                            tmp19 = mmc_unbox_integer(tmpMeta18);
                            _value = tmp19  /* pattern as ty=Integer */;
                            /* Pattern matching succeeded */
                            _old_optimal_value = omc_UnorderedMap_getSafe(threadData, _cref, _optimal_values, _OMC_LIT20);

                            tmpMeta20 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer(_value));
                            omc_UnorderedMap_add(threadData, _cref, tmpMeta20, _optimal_values);

                            {
                              modelica_metatype _cons;
                              for (tmpMeta21 = omc_UnorderedMap_getSafe(threadData, _cref, _p2c, _OMC_LIT21); !listEmpty(tmpMeta21); tmpMeta21=MMC_CDR(tmpMeta21))
                              {
                                _cons = MMC_CAR(tmpMeta21);
                                if((omc_UnorderedSet_contains(threadData, _constraint, _parsed_constraints) && (!mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), omc_Util_getOptionOrDefault(threadData, omc_NBResizable_checkConstraint(threadData, _cons, _optimal_values), mmc_mk_integer(((modelica_integer) 1)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, omc_Util_getOptionOrDefault(threadData, omc_NBResizable_checkConstraint(threadData, _cons, _optimal_values), mmc_mk_integer(((modelica_integer) 1))))))))
                                {
                                  _failed = 1 /* true */;

                                  break;
                                }
                              }
                            }

                            if(_failed)
                            {
                              omc_UnorderedMap_add(threadData, _cref, _old_optimal_value, _optimal_values);
                            }
                            goto tmp15_done;
                          }
                          case 1: {
                            
                            /* Pattern matching succeeded */
                            goto tmp15_done;
                          }
                          }
                          goto tmp15_end;
                          tmp15_end: ;
                        }
                        goto goto_14;
                        goto_14:;
                        goto goto_5;
                        goto tmp15_done;
                        tmp15_done:;
                      }
                    }
                    ;
                  }
                  else
                  {
                    _failed = 1 /* true */;
                  }

                  if((!_failed))
                  {
                    omc_UnorderedSet_add(threadData, _constraint, _parsed_constraints);

                    break;
                  }
                }
              }
              goto tmp6_done;
            }
            case 2: {
              modelica_metatype tmpMeta24;
              modelica_metatype tmpMeta25;
              
              /* Pattern matching succeeded */
              {
                modelica_metatype _cref;
                for (tmpMeta24 = _crefs; !listEmpty(tmpMeta24); tmpMeta24=MMC_CDR(tmpMeta24))
                {
                  _cref = MMC_CAR(tmpMeta24);
                  omc_UnorderedSet_add(threadData, _cref, _failed_parameters);
                }
              }
              goto tmp6_done;
            }
            }
            goto tmp6_end;
            tmp6_end: ;
          }
          goto goto_5;
          goto_5:;
          MMC_THROW_INTERNAL();
          goto tmp6_done;
          tmp6_done:;
        }
      }
      ;

      if(_failed)
      {
        {
          modelica_metatype _cref;
          for (tmpMeta26 = _crefs; !listEmpty(tmpMeta26); tmpMeta26=MMC_CDR(tmpMeta26))
          {
            _cref = MMC_CAR(tmpMeta26);
            omc_UnorderedSet_add(threadData, _cref, _failed_parameters);
          }
        }
      }
    }
  }
  _return: OMC_LABEL_UNUSED
  return;
}

static modelica_metatype closure1_intLe(threadData_t *thData, modelica_metatype closure, modelica_metatype i1)
{
  modelica_metatype i2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_intLe(thData, i1, i2);
}static modelica_metatype closure2_intEq(threadData_t *thData, modelica_metatype closure, modelica_metatype i1)
{
  modelica_metatype i2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_intEq(thData, i1, i2);
}
PROTECTED_FUNCTION_STATIC void omc_NBResizable_computeOptimalValues(threadData_t *threadData, modelica_metatype _optimal_values, modelica_metatype _c2pi, modelica_metatype _p2ci, modelica_metatype _c2pe, modelica_metatype _p2ce)
{
  modelica_metatype _failed_parameters = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _failed_parameters = omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13));
  tmpMeta1 = mmc_mk_box1(0, mmc_mk_integer(((modelica_integer) 0)));
  omc_NBResizable_fixConstraints(threadData, _optimal_values, _c2pi, _p2ci, _failed_parameters, (modelica_fnptr) mmc_mk_box2(0,closure1_intLe,tmpMeta1));

  tmpMeta2 = mmc_mk_box1(0, mmc_mk_integer(((modelica_integer) 0)));
  omc_NBResizable_fixConstraints(threadData, _optimal_values, _c2pe, _p2ce, _failed_parameters, (modelica_fnptr) mmc_mk_box2(0,closure2_intEq,tmpMeta2));
  _return: OMC_LABEL_UNUSED
  return;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_invertConstraintParameterMap(threadData_t *threadData, modelica_metatype _c2p, modelica_metatype _parameters)
{
  modelica_metatype _p2c = NULL;
  modelica_metatype _const = NULL;
  modelica_metatype _params = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _p2c = omc_UnorderedMap_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 1));
  // _const has no default value.
  // _params has no default value.
  {
    modelica_metatype _param;
    for (tmpMeta1 = omc_UnorderedSet_toList(threadData, _parameters); !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _param = MMC_CAR(tmpMeta1);
      tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
      omc_UnorderedMap_add(threadData, _param, tmpMeta2, _p2c);
    }
  }

  {
    modelica_metatype _tpl;
    for (tmpMeta4 = omc_UnorderedMap_toList(threadData, _c2p); !listEmpty(tmpMeta4); tmpMeta4=MMC_CDR(tmpMeta4))
    {
      _tpl = MMC_CAR(tmpMeta4);
      /* Pattern-matching assignment */
      tmpMeta5 = _tpl;
      tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 1));
      tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 2));
      _const = tmpMeta6;
      _params = tmpMeta7;

      {
        modelica_metatype _param;
        for (tmpMeta8 = _params; !listEmpty(tmpMeta8); tmpMeta8=MMC_CDR(tmpMeta8))
        {
          _param = MMC_CAR(tmpMeta8);
          tmpMeta9 = mmc_mk_cons(_const, omc_UnorderedMap_getSafe(threadData, _param, _p2c, _OMC_LIT22));
          omc_UnorderedMap_add(threadData, _param, tmpMeta9, _p2c);
        }
      }
    }
  }
  _return: OMC_LABEL_UNUSED
  return _p2c;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_setInitialValues(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcref, modelica_metatype _min_parameters, modelica_metatype _optimal_values)
{
  modelica_metatype _cref = NULL;
  modelica_metatype _var = NULL;
  modelica_metatype _attributes = NULL;
  modelica_metatype _value = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _cref = __omcQ_24in_5Fcref;
  // _var has no default value.
  // _attributes has no default value.
  // _value has no default value.
  if((!omc_UnorderedMap_contains(threadData, _cref, _optimal_values)))
  {
    _var = omc_Pointer_access(threadData, omc_NBVariable_getVarPointer(threadData, _cref, _OMC_LIT23));

    { /* match expression */
      modelica_metatype tmp4_1;
      tmp4_1 = _var;
      {
        volatile mmc_switch_type tmp4;
        int tmp5;
        tmp4 = 0;
        for (; tmp4 < 2; tmp4++) {
          switch (MMC_SWITCH_CAST(tmp4)) {
          case 0: {
            modelica_metatype tmpMeta6;
            modelica_metatype tmpMeta7;
            modelica_metatype tmpMeta8;
            modelica_metatype tmpMeta9;
            modelica_metatype tmpMeta10;
            modelica_metatype tmpMeta11;
            if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,10) == 0) goto tmp3_end;
            tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 11));
            if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,7) == 0) goto tmp3_end;
            tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
            if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,11) == 0) goto tmp3_end;
            
            _attributes = tmpMeta7;
            /* Pattern matching succeeded */
            if(omc_UnorderedSet_contains(threadData, _cref, _min_parameters))
            {
              if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_attributes), 3)))))
              {
                /* Pattern-matching assignment */
                tmpMeta8 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_attributes), 3)));
                if (optionNone(tmpMeta8)) goto goto_2;
                tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
                _value = tmpMeta9;
              }
              else
              {
                _value = _OMC_LIT17;
              }
            }
            else
            {
              if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_attributes), 4)))))
              {
                /* Pattern-matching assignment */
                tmpMeta10 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_attributes), 4)));
                if (optionNone(tmpMeta10)) goto goto_2;
                tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 1));
                _value = tmpMeta11;
              }
              else
              {
                _value = _OMC_LIT17;
              }
            }
            tmpMeta1 = _value;
            goto tmp3_done;
          }
          case 1: {
            
            /* Pattern matching succeeded */
            tmpMeta1 = _OMC_LIT17;
            goto tmp3_done;
          }
          }
          goto tmp3_end;
          tmp3_end: ;
        }
        goto goto_2;
        goto_2:;
        MMC_THROW_INTERNAL();
        goto tmp3_done;
        tmp3_done:;
      }
    }
    _value = tmpMeta1;

    omc_UnorderedMap_add(threadData, _cref, _value, _optimal_values);
  }
  _return: OMC_LABEL_UNUSED
  return _cref;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_getInitialValues(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcref, modelica_metatype _target, modelica_metatype _args, modelica_metatype _min_parameters, modelica_metatype _optimal_values)
{
  modelica_metatype _cref = NULL;
  modelica_metatype _diff = NULL;
  modelica_metatype _binding = NULL;
  modelica_boolean _failed;
  modelica_metatype _var = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _cref = __omcQ_24in_5Fcref;
  // _diff has no default value.
  // _binding has no default value.
  _failed = 0 /* false */;
  // _var has no default value.
  tmpMeta1 = MMC_TAGPTR(mmc_alloc_words(8));
  memcpy(MMC_UNTAGPTR(tmpMeta1), MMC_UNTAGPTR(_args), 8*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta1))[2] = _cref;
  _args = tmpMeta1;

  _diff = omc_NBDifferentiate_differentiateExpression(threadData, _target, _args, NULL);

  _diff = omc_NFSimplifyExp_simplify(threadData, _diff, 0 /* false */);

  if(omc_NFExpression_isPositive(threadData, _diff))
  {
    omc_UnorderedSet_add(threadData, _cref, _min_parameters);
  }
  else
  {
    if(omc_NFExpression_isNegative(threadData, _diff))
    {
    }
    else
    {
      _var = omc_Pointer_access(threadData, omc_NBVariable_getVarPointer(threadData, _cref, _OMC_LIT24));

      _binding = omc_NFBinding_getExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_var), 4))));

      omc_UnorderedMap_add(threadData, _cref, _binding, _optimal_values);
    }
  }
  _return: OMC_LABEL_UNUSED
  return _cref;
}

static modelica_metatype closure3_NBReplacements_applySimpleExp(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_metatype replacements = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NBReplacements_applySimpleExp(thData, $in_exp, replacements);
}static modelica_metatype closure4_NBResizable_collectResizables(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_metatype collector = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NBResizable_collectResizables(thData, $in_exp, collector);
}static modelica_metatype closure5_NBReplacements_applySimpleExp(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_metatype replacements = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NBReplacements_applySimpleExp(thData, $in_exp, replacements);
}
PROTECTED_FUNCTION_STATIC void omc_NBResizable_addConstraint(threadData_t *threadData, modelica_metatype _old_const, modelica_metatype _replacements, modelica_metatype _c2p, modelica_fnptr _func, modelica_string _const_kind, modelica_string _eq_kind)
{
  modelica_metatype _const = NULL;
  modelica_metatype _diff = NULL;
  modelica_metatype _parameters = NULL;
  modelica_metatype _params = NULL;
  modelica_boolean _redundant;
  modelica_metatype _args = NULL;
  modelica_metatype _zero_replacements = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _const has no default value.
  // _diff has no default value.
  // _parameters has no default value.
  // _params has no default value.
  // _redundant has no default value.
  // _args has no default value.
  // _zero_replacements has no default value.
  if(isSome(_replacements))
  {
    tmpMeta1 = mmc_mk_box1(0, omc_Util_getOption(threadData, _replacements));
    _const = omc_NFExpression_map(threadData, _old_const, (modelica_fnptr) mmc_mk_box2(0,closure3_NBReplacements_applySimpleExp,tmpMeta1));
  }
  else
  {
    _const = _old_const;
  }

  _parameters = omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13));

  tmpMeta2 = mmc_mk_box1(0, _parameters);
  omc_NFExpression_map(threadData, _const, (modelica_fnptr) mmc_mk_box2(0,closure4_NBResizable_collectResizables,tmpMeta2));

  _params = omc_UnorderedSet_toList(threadData, _parameters);

  _redundant = 1 /* true */;

  {
    modelica_metatype _p;
    for (tmpMeta3 = _params; !listEmpty(tmpMeta3); tmpMeta3=MMC_CDR(tmpMeta3))
    {
      _p = MMC_CAR(tmpMeta3);
      _args = omc_NBDifferentiate_DifferentiationArguments_simpleCref(threadData, _p, _OMC_LIT19);

      _diff = omc_NBDifferentiate_differentiateExpression(threadData, _const, _args, NULL);

      _diff = omc_NFSimplifyExp_simplify(threadData, _diff, 0 /* false */);

      if((!omc_NFExpression_isZero(threadData, _diff)))
      {
        _redundant = 0 /* false */;

        break;
      }
    }
  }

  if((!_redundant))
  {
    omc_UnorderedMap_add(threadData, _const, _params, _c2p);
  }
  else
  {
    _zero_replacements = omc_UnorderedMap_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 1));

    {
      modelica_metatype _p;
      for (tmpMeta5 = _params; !listEmpty(tmpMeta5); tmpMeta5=MMC_CDR(tmpMeta5))
      {
        _p = MMC_CAR(tmpMeta5);
        omc_UnorderedMap_add(threadData, _p, _OMC_LIT17, _zero_replacements);
      }
    }

    tmpMeta7 = mmc_mk_box1(0, _zero_replacements);
    _const = omc_NFExpression_map(threadData, _const, (modelica_fnptr) mmc_mk_box2(0,closure5_NBReplacements_applySimpleExp,tmpMeta7));

    _const = omc_NFSimplifyExp_simplify(threadData, _const, 0 /* false */);

    if((!mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _const) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _const))))
    {
      MMC_THROW_INTERNAL();
    }
  }
  _return: OMC_LABEL_UNUSED
  return;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_addVariableConstraint(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _eqn, modelica_metatype _replacements, modelica_metatype __omcQ_24in_5Fc2pi)
{
  modelica_metatype _c2pi = NULL;
  modelica_metatype _var = NULL;
  modelica_metatype _dims = NULL;
  modelica_metatype _subs = NULL;
  modelica_metatype _dim = NULL;
  modelica_metatype _sub = NULL;
  modelica_metatype _sub_exp = NULL;
  modelica_metatype _const = NULL;
  modelica_metatype _op = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta22;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _c2pi = __omcQ_24in_5Fc2pi;
  _var = omc_Pointer_access(threadData, omc_NBVariable_getVarPointer(threadData, _cref, _OMC_LIT25));
  _dims = omc_NFType_arrayDims(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_var), 3))));
  _subs = omc_NFComponentRef_subscriptsAllWithWholeFlat(threadData, _cref);
  // _dim has no default value.
  // _sub has no default value.
  // _sub_exp has no default value.
  // _const has no default value.
  _op = omc_NFOperator_makeAdd(threadData, _OMC_LIT26);
  {
    modelica_metatype _tpl;
    for (tmpMeta1 = omc_List_zip(threadData, _dims, _subs); !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _tpl = MMC_CAR(tmpMeta1);
      /* Pattern-matching assignment */
      tmpMeta2 = _tpl;
      tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 1));
      tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
      _dim = tmpMeta3;
      _sub = tmpMeta4;

      _sub_exp = omc_NFSubscript_toExp(threadData, _sub);

      tmpMeta5 = mmc_mk_cons(_sub_exp, MMC_REFSTRUCTLIT(mmc_nil));
      tmpMeta6 = mmc_mk_cons(omc_NFDimension_sizeExp(threadData, _dim), MMC_REFSTRUCTLIT(mmc_nil));
      tmpMeta7 = mmc_mk_box4(24, &NFExpression_MULTARY__desc, tmpMeta5, tmpMeta6, _op);
      _const = tmpMeta7;

      { /* matchcontinue expression */
        {
          volatile mmc_switch_type tmp10;
          int tmp11;
          tmp10 = 0;
          MMC_TRY_INTERNAL(mmc_jumper)
          tmp9_top:
          threadData->mmc_jumper = &new_mmc_jumper;
          for (; tmp10 < 2; tmp10++) {
            switch (MMC_SWITCH_CAST(tmp10)) {
            case 0: {
              /* Pattern matching succeeded */
              omc_NBResizable_addConstraint(threadData, _const, _replacements, _c2pi, boxvar_NFExpression_isNonPositive, _OMC_LIT27, _OMC_LIT28);
              goto tmp9_done;
            }
            case 1: {
              modelica_metatype tmpMeta12;
              modelica_metatype tmpMeta13;
              modelica_metatype tmpMeta14;
              modelica_metatype tmpMeta15;
              modelica_metatype tmpMeta16;
              modelica_metatype tmpMeta17;
              modelica_metatype tmpMeta18;
              modelica_metatype tmpMeta19;
              modelica_metatype tmpMeta20;
              modelica_metatype tmpMeta21;
              /* Pattern matching succeeded */
              tmpMeta13 = stringAppend(_OMC_LIT34,omc_NFDimension_toString(threadData, _dim));
              tmpMeta14 = stringAppend(tmpMeta13,_OMC_LIT35);
              tmpMeta15 = stringAppend(tmpMeta14,omc_NFSubscript_toString(threadData, _sub));
              tmpMeta16 = stringAppend(tmpMeta15,_OMC_LIT36);
              tmpMeta17 = stringAppend(tmpMeta16,omc_NFComponentRef_toString(threadData, _cref));
              tmpMeta18 = stringAppend(tmpMeta17,_OMC_LIT37);
              tmpMeta19 = stringAppend(tmpMeta18,omc_NFVariable_toString(threadData, omc_Pointer_access(threadData, omc_NBVariable_getVarPointer(threadData, _cref, _OMC_LIT38)), _OMC_LIT0, 0 /* false */));
              tmpMeta20 = stringAppend(tmpMeta19,_OMC_LIT39);
              tmpMeta21 = stringAppend(tmpMeta20,omc_NBEquation_Equation_toString(threadData, _eqn, _OMC_LIT0));
              tmpMeta12 = mmc_mk_cons(tmpMeta21, MMC_REFSTRUCTLIT(mmc_nil));
              omc_Error_addMessage(threadData, _OMC_LIT33, tmpMeta12);

              goto goto_8;
              goto tmp9_done;
            }
            }
            goto tmp9_end;
            tmp9_end: ;
          }
          goto goto_8;
          tmp9_done:
          (void)tmp10;
          MMC_RESTORE_INTERNAL(mmc_jumper);
          goto tmp9_done2;
          goto_8:;
          MMC_CATCH_INTERNAL(mmc_jumper);
          if (++tmp10 < 2) {
            goto tmp9_top;
          }
          MMC_THROW_INTERNAL();
          tmp9_done2:;
        }
      }
      ;
    }
  }
  _return: OMC_LABEL_UNUSED
  return _c2pi;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_getDistance(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _exp, modelica_metatype _args, modelica_metatype __omcQ_24in_5Fopt_5Ffactor, modelica_integer __omcQ_24in_5Fmin_5Fdistance, modelica_integer __omcQ_24in_5Fmax_5Fdistance, modelica_integer *out_min_distance, modelica_integer *out_max_distance)
{
  modelica_metatype _opt_factor = NULL;
  modelica_integer _min_distance;
  modelica_integer _max_distance;
  modelica_metatype _shift = NULL;
  modelica_integer _factor;
  modelica_integer _distance;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _opt_factor = __omcQ_24in_5Fopt_5Ffactor;
  _min_distance = __omcQ_24in_5Fmin_5Fdistance;
  _max_distance = __omcQ_24in_5Fmax_5Fdistance;
  // _shift has no default value.
  // _factor has no default value.
  // _distance has no default value.
  if((isNone(_opt_factor) || (mmc_unbox_integer(omc_Util_getOption(threadData, _opt_factor)) != ((modelica_integer) 0))))
  {
    _factor = omc_NBResizable_getFactor(threadData, _exp, _args, _opt_factor);

    if((_factor != ((modelica_integer) 0)))
    {
      _shift = omc_NBResizable_getShift(threadData, _exp, _cref);

      { /* matchcontinue expression */
        {
          volatile mmc_switch_type tmp3;
          int tmp4;
          tmp3 = 0;
          MMC_TRY_INTERNAL(mmc_jumper)
          tmp2_top:
          threadData->mmc_jumper = &new_mmc_jumper;
          for (; tmp3 < 2; tmp3++) {
            switch (MMC_SWITCH_CAST(tmp3)) {
            case 0: {
              modelica_metatype tmpMeta5;
              modelica_metatype tmpMeta6;
              modelica_integer tmp7;
              /* Pattern matching succeeded */
              /* Pattern-matching assignment */
              tmpMeta5 = _shift;
              if (mmc__uniontype__metarecord__typedef__equal(tmpMeta5,0,1) == 0) goto goto_1;
              tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 2));
              tmp7 = mmc_unbox_integer(tmpMeta6);
              _distance = tmp7  /* pattern as ty=Integer */;

              if(isNone(_opt_factor))
              {
                _min_distance = _distance;

                _max_distance = _distance;

                _opt_factor = mmc_mk_some(mmc_mk_integer(_factor));
              }
              else
              {
                _min_distance = modelica_integer_min((modelica_integer)(_distance),(modelica_integer)(_min_distance));

                _max_distance = modelica_integer_max((modelica_integer)(_distance),(modelica_integer)(_max_distance));
              }
              goto tmp2_done;
            }
            case 1: {
              /* Pattern matching succeeded */
              _min_distance = ((modelica_integer) 0);

              _max_distance = ((modelica_integer) 0);

              _opt_factor = _OMC_LIT40;
              goto tmp2_done;
            }
            }
            goto tmp2_end;
            tmp2_end: ;
          }
          goto goto_1;
          tmp2_done:
          (void)tmp3;
          MMC_RESTORE_INTERNAL(mmc_jumper);
          goto tmp2_done2;
          goto_1:;
          MMC_CATCH_INTERNAL(mmc_jumper);
          if (++tmp3 < 2) {
            goto tmp2_top;
          }
          MMC_THROW_INTERNAL();
          tmp2_done2:;
        }
      }
      ;
    }
    else
    {
      _min_distance = ((modelica_integer) 0);

      _max_distance = ((modelica_integer) 0);

      _opt_factor = _OMC_LIT40;
    }
  }
  _return: OMC_LABEL_UNUSED
  if (out_min_distance) { *out_min_distance = _min_distance; }
  if (out_max_distance) { *out_max_distance = _max_distance; }
  return _opt_factor;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBResizable_getDistance(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _exp, modelica_metatype _args, modelica_metatype __omcQ_24in_5Fopt_5Ffactor, modelica_metatype __omcQ_24in_5Fmin_5Fdistance, modelica_metatype __omcQ_24in_5Fmax_5Fdistance, modelica_metatype *out_min_distance, modelica_metatype *out_max_distance)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer _min_distance;
  modelica_integer _max_distance;
  modelica_metatype _opt_factor = NULL;
  tmp1 = mmc_unbox_integer(__omcQ_24in_5Fmin_5Fdistance);
  tmp2 = mmc_unbox_integer(__omcQ_24in_5Fmax_5Fdistance);
  _opt_factor = omc_NBResizable_getDistance(threadData, _cref, _exp, _args, __omcQ_24in_5Fopt_5Ffactor, tmp1, tmp2, &_min_distance, &_max_distance);
  /* skip box _opt_factor; Option<#Integer> */
  if (out_min_distance) { *out_min_distance = mmc_mk_icon(_min_distance); }
  if (out_max_distance) { *out_max_distance = mmc_mk_icon(_max_distance); }
  return _opt_factor;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_getShift(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _cref)
{
  modelica_metatype _shift = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _shift has no default value.
  tmpMeta1 = mmc_mk_box3(9, &NFExpression_CREF__desc, _OMC_LIT26, _cref);
  _shift = omc_NBReplacements_single(threadData, _exp, tmpMeta1, _OMC_LIT17);

  _shift = omc_NFSimplifyExp_simplify(threadData, _shift, 0 /* false */);
  _return: OMC_LABEL_UNUSED
  return _shift;
}

PROTECTED_FUNCTION_STATIC modelica_integer omc_NBResizable_getFactor(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _args, modelica_metatype _opt_factor)
{
  modelica_integer _factor;
  modelica_metatype _diff = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _factor has no default value.
  // _diff has no default value.
  _diff = omc_NBDifferentiate_differentiateExpression(threadData, _exp, _args, NULL);

  _diff = omc_NFSimplifyExp_simplify(threadData, _diff, 0 /* false */);

  _factor = omc_NFExpression_integerValueOrDefault(threadData, _diff, ((modelica_integer) 0));

  if((isSome(_opt_factor) && (_factor != mmc_unbox_integer(omc_Util_getOption(threadData, _opt_factor)))))
  {
    _factor = ((modelica_integer) 0);
  }
  _return: OMC_LABEL_UNUSED
  return _factor;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBResizable_getFactor(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _args, modelica_metatype _opt_factor)
{
  modelica_integer _factor;
  modelica_metatype out_factor;
  _factor = omc_NBResizable_getFactor(threadData, _exp, _args, _opt_factor);
  out_factor = mmc_mk_icon(_factor);
  return out_factor;
}

static modelica_metatype closure6_NBResizable_collectResizables(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_metatype collector = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NBResizable_collectResizables(thData, $in_exp, collector);
}static modelica_metatype closure7_NBResizable_collectResizables(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_metatype collector = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NBResizable_collectResizables(thData, $in_exp, collector);
}static modelica_metatype closure8_NBResizable_getInitialValues(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_cref)
{
  modelica_metatype target = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype args = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  modelica_metatype min_parameters = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),3));
  modelica_metatype optimal_values = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),4));
  return boxptr_NBResizable_getInitialValues(thData, $in_cref, target, args, min_parameters, optimal_values);
}
PROTECTED_FUNCTION_STATIC void omc_NBResizable_findOptimalValue(threadData_t *threadData, modelica_metatype _eqn, modelica_metatype _occs, modelica_metatype _resizables, modelica_metatype _parameters, modelica_metatype _min_parameters, modelica_metatype _optimal_values, modelica_metatype _c2pi)
{
  modelica_metatype _opt_factor = NULL;
  modelica_integer _min_distance;
  modelica_integer _max_distance;
  modelica_integer _distance;
  modelica_metatype _cref = NULL;
  modelica_metatype _occ = NULL;
  modelica_metatype _args = NULL;
  modelica_metatype _optimal_distances = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _failed_crefs = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype _failed_iters = NULL;
  modelica_metatype tmpMeta3;
  modelica_metatype _range = NULL;
  modelica_metatype _step = NULL;
  modelica_metatype _target = NULL;
  modelica_metatype _distance_const = NULL;
  modelica_metatype _local_parameters = NULL;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  modelica_metatype tmpMeta16;
  modelica_metatype tmpMeta17;
  modelica_integer tmp18;
  modelica_metatype tmpMeta19;
  modelica_metatype tmpMeta36;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _opt_factor = mmc_mk_none();
  _min_distance = ((modelica_integer) 0);
  _max_distance = ((modelica_integer) 0);
  // _distance has no default value.
  // _cref has no default value.
  // _occ has no default value.
  // _args has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _optimal_distances = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _failed_crefs = tmpMeta2;
  tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
  _failed_iters = tmpMeta3;
  // _range has no default value.
  // _step has no default value.
  // _target has no default value.
  // _distance_const has no default value.
  // _local_parameters has no default value.
  {
    modelica_metatype _tpl;
    for (tmpMeta4 = omc_UnorderedMap_toList(threadData, _occs); !listEmpty(tmpMeta4); tmpMeta4=MMC_CDR(tmpMeta4))
    {
      _tpl = MMC_CAR(tmpMeta4);
      /* Pattern-matching assignment */
      tmpMeta5 = _tpl;
      tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 1));
      tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 2));
      _cref = tmpMeta6;
      _occ = tmpMeta7;

      {
        modelica_metatype _exp;
        for (tmpMeta8 = omc_UnorderedSet_toList(threadData, _occ); !listEmpty(tmpMeta8); tmpMeta8=MMC_CDR(tmpMeta8))
        {
          _exp = MMC_CAR(tmpMeta8);
          _args = omc_NBDifferentiate_DifferentiationArguments_simpleCref(threadData, _cref, _OMC_LIT19);

          _opt_factor = omc_NBResizable_getDistance(threadData, _cref, _exp, _args, _opt_factor, _min_distance, _max_distance ,&_min_distance ,&_max_distance);
        }
      }

      if((isSome(_opt_factor) && (mmc_unbox_integer(omc_Util_getOption(threadData, _opt_factor)) != ((modelica_integer) 0))))
      {
        tmpMeta11 = mmc_mk_box2(0, _cref, mmc_mk_integer(_max_distance - _min_distance));
        tmpMeta10 = mmc_mk_cons(tmpMeta11, _optimal_distances);
        _optimal_distances = tmpMeta10;
      }
      else
      {
        tmpMeta12 = mmc_mk_cons(_cref, _failed_crefs);
        _failed_crefs = tmpMeta12;
      }
    }
  }

  {
    modelica_metatype _tpl;
    for (tmpMeta14 = _optimal_distances; !listEmpty(tmpMeta14); tmpMeta14=MMC_CDR(tmpMeta14))
    {
      _tpl = MMC_CAR(tmpMeta14);
      /* Pattern-matching assignment */
      tmpMeta15 = _tpl;
      tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 1));
      tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
      tmp18 = mmc_unbox_integer(tmpMeta17);
      _cref = tmpMeta16;
      _distance = tmp18  /* pattern as ty=Integer */;

      _range = omc_UnorderedMap_getSafe(threadData, _cref, _resizables, _OMC_LIT41);

      tmpMeta19 = mmc_mk_box1(0, _parameters);
      omc_NFExpression_map(threadData, _range, (modelica_fnptr) mmc_mk_box2(0,closure6_NBResizable_collectResizables,tmpMeta19));

      { /* match expression */
        modelica_metatype tmp22_1;
        tmp22_1 = _range;
        {
          volatile mmc_switch_type tmp22;
          int tmp23;
          tmp22 = 0;
          for (; tmp22 < 2; tmp22++) {
            switch (MMC_SWITCH_CAST(tmp22)) {
            case 0: {
              modelica_metatype tmpMeta24;
              modelica_metatype tmpMeta25;
              modelica_metatype tmpMeta26;
              modelica_metatype tmpMeta27;
              modelica_metatype tmpMeta28;
              modelica_metatype tmpMeta29;
              modelica_metatype tmpMeta30;
              modelica_metatype tmpMeta31;
              modelica_metatype tmpMeta32;
              modelica_metatype tmpMeta33;
              modelica_metatype tmpMeta34;
              modelica_metatype tmpMeta35;
              if (mmc__uniontype__metarecord__typedef__equal(tmp22_1,10,4) == 0) goto tmp21_end;
              
              /* Pattern matching succeeded */
              _step = omc_Util_getOptionOrDefault(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 4))), _OMC_LIT42);

              _local_parameters = omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13));

              tmpMeta24 = mmc_mk_box1(0, _local_parameters);
              omc_NFExpression_map(threadData, _range, (modelica_fnptr) mmc_mk_box2(0,closure7_NBResizable_collectResizables,tmpMeta24));

              omc_UnorderedSet_merge(threadData, _parameters, _local_parameters);

              tmpMeta25 = mmc_mk_cons((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 5))), MMC_REFSTRUCTLIT(mmc_nil));
              tmpMeta26 = mmc_mk_cons((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 3))), MMC_REFSTRUCTLIT(mmc_nil));
              tmpMeta27 = mmc_mk_box4(24, &NFExpression_MULTARY__desc, tmpMeta25, tmpMeta26, omc_NFOperator_makeAdd(threadData, _OMC_LIT26));
              _target = tmpMeta27;

              _target = omc_NFSimplifyExp_simplify(threadData, _target, 0 /* false */);

              tmpMeta28 = mmc_mk_box4(0, _target, _args, _min_parameters, _optimal_values);
              omc_UnorderedSet_apply(threadData, _local_parameters, (modelica_fnptr) mmc_mk_box2(0,closure8_NBResizable_getInitialValues,tmpMeta28));

              tmpMeta30 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer(_distance));
              tmpMeta29 = mmc_mk_cons(tmpMeta30, MMC_REFSTRUCTLIT(mmc_nil));
              tmpMeta32 = mmc_mk_cons(_target, MMC_REFSTRUCTLIT(mmc_nil));
              tmpMeta33 = mmc_mk_cons(_step, MMC_REFSTRUCTLIT(mmc_nil));
              tmpMeta34 = mmc_mk_box4(24, &NFExpression_MULTARY__desc, tmpMeta32, tmpMeta33, omc_NFOperator_makeMul(threadData, _OMC_LIT26));
              tmpMeta31 = mmc_mk_cons(tmpMeta34, MMC_REFSTRUCTLIT(mmc_nil));
              tmpMeta35 = mmc_mk_box4(24, &NFExpression_MULTARY__desc, tmpMeta29, tmpMeta31, omc_NFOperator_makeAdd(threadData, _OMC_LIT26));
              _distance_const = tmpMeta35;

              _distance_const = omc_NFSimplifyExp_simplify(threadData, _distance_const, 0 /* false */);

              _distance_const = omc_NFSimplifyExp_combineBinaries(threadData, _distance_const);

              _distance_const = omc_NFSimplifyExp_simplify(threadData, _distance_const, 0 /* false */);

              omc_UnorderedMap_add(threadData, _distance_const, omc_UnorderedSet_toList(threadData, _local_parameters), _c2pi);
              goto tmp21_done;
            }
            case 1: {
              
              /* Pattern matching succeeded */
              goto tmp21_done;
            }
            }
            goto tmp21_end;
            tmp21_end: ;
          }
          goto goto_20;
          goto_20:;
          MMC_THROW_INTERNAL();
          goto tmp21_done;
          tmp21_done:;
        }
      }
      ;
    }
  }
  _return: OMC_LABEL_UNUSED
  return;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_collectVars(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_fnptr _func, modelica_metatype _collector)
{
  modelica_metatype _exp = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _exp;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), omc_NBVariable_getVarPointer(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _OMC_LIT43)) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, omc_NBVariable_getVarPointer(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _OMC_LIT43)))) goto tmp2_end;
          omc_UnorderedSet_add(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _collector);
          goto tmp2_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_addOccurence(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fiter, modelica_metatype _subExp, modelica_metatype _occs)
{
  modelica_metatype _iter = NULL;
  modelica_metatype _local_occ = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _iter = __omcQ_24in_5Fiter;
  _local_occ = omc_UnorderedMap_getSafe(threadData, _iter, _occs, _OMC_LIT44);
  omc_UnorderedSet_add(threadData, _subExp, _local_occ);
  _return: OMC_LABEL_UNUSED
  return _iter;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_collectOccurencesSubscriptExp(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _occs, modelica_metatype _acc)
{
  modelica_metatype _exp = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _exp;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_UnorderedMap_contains(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _occs)) goto tmp2_end;
          omc_UnorderedSet_add(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _acc);
          goto tmp2_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

static modelica_metatype closure9_NBResizable_collectOccurencesSubscriptExp(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_metatype occs = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype acc = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NBResizable_collectOccurencesSubscriptExp(thData, $in_exp, occs, acc);
}static modelica_metatype closure10_NBResizable_addOccurence(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_iter)
{
  modelica_metatype subExp = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype occs = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NBResizable_addOccurence(thData, $in_iter, subExp, occs);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_collectOccurencesSubscript(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fsub, modelica_metatype _occs)
{
  modelica_metatype _sub = NULL;
  modelica_metatype _acc = NULL;
  modelica_metatype _subExp = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _sub = __omcQ_24in_5Fsub;
  _acc = omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13));
  // _subExp has no default value.
  tmpMeta1 = mmc_mk_box2(0, _occs, _acc);
  omc_NFSubscript_mapExp(threadData, _sub, (modelica_fnptr) mmc_mk_box2(0,closure9_NBResizable_collectOccurencesSubscriptExp,tmpMeta1));

  if((!omc_UnorderedSet_isEmpty(threadData, _acc)))
  {
    _subExp = omc_NFSubscript_toExp(threadData, _sub);

    tmpMeta2 = mmc_mk_box2(0, _subExp, _occs);
    omc_UnorderedSet_apply(threadData, _acc, (modelica_fnptr) mmc_mk_box2(0,closure10_NBResizable_addOccurence,tmpMeta2));
  }
  _return: OMC_LABEL_UNUSED
  return _sub;
}

static modelica_metatype closure11_NBResizable_collectOccurencesSubscript(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_sub)
{
  modelica_metatype occs = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NBResizable_collectOccurencesSubscript(thData, $in_sub, occs);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_collectOccurences(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _occs)
{
  modelica_metatype _exp = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _exp;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          tmpMeta5 = mmc_mk_box1(0, _occs);
          omc_NFComponentRef_mapSubscripts(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (modelica_fnptr) mmc_mk_box2(0,closure11_NBResizable_collectOccurencesSubscript,tmpMeta5), 0 /* false */);
          goto tmp2_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_collectResizables(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _collector)
{
  modelica_metatype _exp = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _exp;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_NBVariable_checkCref(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), boxvar_NBVariable_isResizableParameter, _OMC_LIT45)) goto tmp2_end;
          omc_UnorderedSet_add(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _collector);
          goto tmp2_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

PROTECTED_FUNCTION_STATIC modelica_boolean omc_NBResizable_expContainsResizable(threadData_t *threadData, modelica_metatype _exp, modelica_boolean __omcQ_24in_5Fb)
{
  modelica_boolean _b;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _b = __omcQ_24in_5Fb;
  if((!_b))
  {
    { /* match expression */
      modelica_metatype tmp4_1;
      tmp4_1 = _exp;
      {
        volatile mmc_switch_type tmp4;
        int tmp5;
        tmp4 = 0;
        for (; tmp4 < 2; tmp4++) {
          switch (MMC_SWITCH_CAST(tmp4)) {
          case 0: {
            if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
            
            /* Pattern matching succeeded */
            tmp1 = omc_NBVariable_checkCref(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), boxvar_NBVariable_isResizableParameter, _OMC_LIT46);
            goto tmp3_done;
          }
          case 1: {
            
            /* Pattern matching succeeded */
            tmp1 = 0 /* false */;
            goto tmp3_done;
          }
          }
          goto tmp3_end;
          tmp3_end: ;
        }
        goto goto_2;
        goto_2:;
        MMC_THROW_INTERNAL();
        goto tmp3_done;
        tmp3_done:;
      }
    }
    _b = tmp1;
  }
  _return: OMC_LABEL_UNUSED
  return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBResizable_expContainsResizable(threadData_t *threadData, modelica_metatype _exp, modelica_metatype __omcQ_24in_5Fb)
{
  modelica_integer tmp1;
  modelica_boolean _b;
  modelica_metatype out_b;
  tmp1 = mmc_unbox_integer(__omcQ_24in_5Fb);
  _b = omc_NBResizable_expContainsResizable(threadData, _exp, tmp1);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

PROTECTED_FUNCTION_STATIC modelica_boolean omc_NBResizable_iteratorIsResizable(threadData_t *threadData, modelica_metatype _range)
{
  modelica_boolean _b;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _b = mmc_unbox_boolean(omc_NFExpression_fold(threadData, _range, boxvar_NBResizable_expContainsResizable, mmc_mk_boolean(0 /* false */)));
  _return: OMC_LABEL_UNUSED
  return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NBResizable_iteratorIsResizable(threadData_t *threadData, modelica_metatype _range)
{
  modelica_boolean _b;
  modelica_metatype out_b;
  _b = omc_NBResizable_iteratorIsResizable(threadData, _range);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_getVarReplacements(threadData_t *threadData, modelica_metatype _iter)
{
  modelica_metatype _replacements = NULL;
  modelica_metatype _names = NULL;
  modelica_metatype _ranges = NULL;
  modelica_metatype _name = NULL;
  modelica_metatype _range = NULL;
  modelica_metatype _max_call = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta23;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _replacements = omc_UnorderedMap_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 1));
  // _names has no default value.
  // _ranges has no default value.
  // _name has no default value.
  // _range has no default value.
  // _max_call has no default value.
  _names = omc_NBEquation_Iterator_getFrames(threadData, _iter ,&_ranges, NULL);

  {
    modelica_metatype _tpl;
    for (tmpMeta1 = omc_List_zip(threadData, _names, _ranges); !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _tpl = MMC_CAR(tmpMeta1);
      /* Pattern-matching assignment */
      tmpMeta2 = _tpl;
      tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 1));
      tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
      _name = tmpMeta3;
      _range = tmpMeta4;

      { /* match expression */
        modelica_metatype tmp7_1;
        tmp7_1 = _range;
        {
          volatile mmc_switch_type tmp7;
          int tmp8;
          tmp7 = 0;
          for (; tmp7 < 2; tmp7++) {
            switch (MMC_SWITCH_CAST(tmp7)) {
            case 0: {
              modelica_metatype tmpMeta9;
              modelica_metatype tmpMeta10;
              modelica_metatype tmpMeta11;
              modelica_metatype tmpMeta12;
              modelica_metatype tmpMeta13;
              modelica_metatype tmpMeta14;
              modelica_metatype tmpMeta15;
              modelica_metatype tmpMeta16;
              modelica_metatype tmpMeta17;
              modelica_metatype tmpMeta18;
              modelica_metatype tmpMeta19;
              modelica_metatype tmpMeta20;
              modelica_metatype tmpMeta21;
              modelica_metatype tmpMeta22;
              if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,10,4) == 0) goto tmp6_end;
              
              /* Pattern matching succeeded */
              if((isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 4)))) && omc_NFExpression_isNegative(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 4)))))))
              {
                omc_UnorderedMap_add(threadData, _name, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 3))), _replacements);
              }
              else
              {
                if((isNone((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 4)))) || omc_NFExpression_isPositive(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 4)))))))
                {
                  omc_UnorderedMap_add(threadData, _name, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 5))), _replacements);
                }
                else
                {
                  tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
                  tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
                  tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
                  tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
                  tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
                  tmpMeta14 = mmc_mk_box14(3, &NFFunction_Function_FUNCTION__desc, _OMC_LIT48, _OMC_LIT49, _OMC_LIT62, _OMC_LIT61, tmpMeta9, tmpMeta10, _OMC_LIT26, _OMC_LIT66, tmpMeta11, tmpMeta12, listArray(tmpMeta13), _OMC_LIT67, _OMC_LIT40);
                  tmpMeta15 = mmc_mk_cons((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 3))), mmc_mk_cons((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 5))), MMC_REFSTRUCTLIT(mmc_nil)));
                  tmpMeta16 = MMC_REFSTRUCTLIT(mmc_nil);
                  tmpMeta17 = MMC_REFSTRUCTLIT(mmc_nil);
                  tmpMeta18 = MMC_REFSTRUCTLIT(mmc_nil);
                  tmpMeta19 = MMC_REFSTRUCTLIT(mmc_nil);
                  tmpMeta20 = MMC_REFSTRUCTLIT(mmc_nil);
                  tmpMeta21 = mmc_mk_box14(3, &NFFunction_Function_FUNCTION__desc, _OMC_LIT48, _OMC_LIT49, _OMC_LIT62, _OMC_LIT61, tmpMeta16, tmpMeta17, _OMC_LIT26, _OMC_LIT66, tmpMeta18, tmpMeta19, listArray(tmpMeta20), _OMC_LIT67, _OMC_LIT40);
                  tmpMeta22 = mmc_mk_box2(16, &NFExpression_CALL__desc, omc_NFCall_makeTypedCall(threadData, tmpMeta14, tmpMeta15, omc_NFExpression_variability(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 3)))), 1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 8)))));
                  _max_call = tmpMeta22;

                  omc_UnorderedMap_add(threadData, _name, _max_call, _replacements);
                }
              }
              goto tmp6_done;
            }
            case 1: {
              
              /* Pattern matching succeeded */
              goto tmp6_done;
            }
            }
            goto tmp6_end;
            tmp6_end: ;
          }
          goto goto_5;
          goto_5:;
          MMC_THROW_INTERNAL();
          goto tmp6_done;
          tmp6_done:;
        }
      }
      ;
    }
  }
  _return: OMC_LABEL_UNUSED
  return _replacements;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_getResizableIterators(threadData_t *threadData, modelica_metatype _iter)
{
  modelica_metatype _resizables = NULL;
  modelica_metatype _names = NULL;
  modelica_metatype _ranges = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _resizables = omc_UnorderedMap_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 1));
  // _names has no default value.
  // _ranges has no default value.
  _names = omc_NBEquation_Iterator_getFrames(threadData, _iter ,&_ranges, NULL);

  {
    modelica_metatype _tpl;
    for (tmpMeta1 = omc_List_zip(threadData, _names, _ranges); !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _tpl = MMC_CAR(tmpMeta1);
      if(omc_NBResizable_iteratorIsResizable(threadData, omc_Util_tuple22(threadData, _tpl)))
      {
        omc_UnorderedMap_add(threadData, omc_Util_tuple21(threadData, _tpl), omc_Util_tuple22(threadData, _tpl), _resizables);
      }
    }
  }
  _return: OMC_LABEL_UNUSED
  return _resizables;
}

static modelica_metatype closure12_NBResizable_collectOccurences(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_metatype occs = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NBResizable_collectOccurences(thData, $in_exp, occs);
}static modelica_metatype closure13_NBResizable_collectVars(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype collector = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NBResizable_collectVars(thData, $in_exp, func, collector);
}static modelica_metatype closure14_NBResizable_addVariableConstraint(threadData_t *thData, modelica_metatype closure, modelica_metatype cref, modelica_metatype $in_c2pi)
{
  modelica_metatype eqn = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype replacements = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NBResizable_addVariableConstraint(thData, cref, eqn, replacements, $in_c2pi);
}static modelica_metatype closure15_NBResizable_collectVars(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype collector = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NBResizable_collectVars(thData, $in_exp, func, collector);
}static modelica_metatype closure16_NBResizable_addVariableConstraint(threadData_t *thData, modelica_metatype closure, modelica_metatype cref, modelica_metatype $in_c2pi)
{
  modelica_metatype eqn = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype replacements = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NBResizable_addVariableConstraint(thData, cref, eqn, replacements, $in_c2pi);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NBResizable_findOptimalResizableValues(threadData_t *threadData, modelica_metatype __omcQ_24in_5Feqn, modelica_metatype _parameters, modelica_metatype _min_parameters, modelica_metatype _optimal_values, modelica_metatype _c2pi, modelica_metatype _c2pe)
{
  modelica_metatype _eqn = NULL;
  modelica_metatype _resizables = NULL;
  modelica_metatype _replacements = NULL;
  modelica_metatype _occs = NULL;
  modelica_metatype _constrained_vars = NULL;
  modelica_metatype _lhs_dim = NULL;
  modelica_metatype _rhs_dim = NULL;
  modelica_metatype _const = NULL;
  modelica_metatype _local_parameters = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _eqn = __omcQ_24in_5Feqn;
  // _resizables has no default value.
  // _replacements has no default value.
  // _occs has no default value.
  _constrained_vars = omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13));
  // _lhs_dim has no default value.
  // _rhs_dim has no default value.
  // _const has no default value.
  // _local_parameters has no default value.
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _eqn;
    {
      int tmp3;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
        case 8: {
          modelica_metatype tmpMeta4;
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          
          /* Pattern matching succeeded */
          _resizables = omc_NBResizable_getResizableIterators(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqn), 3))));

          _replacements = omc_NBResizable_getVarReplacements(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqn), 3))));

          _occs = omc_UnorderedMap_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 1));

          {
            modelica_metatype _res;
            for (tmpMeta4 = omc_UnorderedMap_keyList(threadData, _resizables); !listEmpty(tmpMeta4); tmpMeta4=MMC_CDR(tmpMeta4))
            {
              _res = MMC_CAR(tmpMeta4);
              omc_UnorderedMap_add(threadData, _res, omc_UnorderedSet_new(threadData, boxvar_NFExpression_hash, boxvar_NFExpression_isEqual, ((modelica_integer) 13)), _occs);
            }
          }

          {
            modelica_metatype _body;
            for (tmpMeta6 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqn), 4))); !listEmpty(tmpMeta6); tmpMeta6=MMC_CDR(tmpMeta6))
            {
              _body = MMC_CAR(tmpMeta6);
              tmpMeta7 = mmc_mk_box1(0, _occs);
              omc_NBEquation_Equation_map(threadData, _body, (modelica_fnptr) mmc_mk_box2(0,closure12_NBResizable_collectOccurences,tmpMeta7), mmc_mk_none(), boxvar_NFExpression_map);

              tmpMeta8 = mmc_mk_box2(0, boxvar_NBVariable_isArray, _constrained_vars);
              omc_NBEquation_Equation_map(threadData, _body, (modelica_fnptr) mmc_mk_box2(0,closure13_NBResizable_collectVars,tmpMeta8), mmc_mk_none(), boxvar_NFExpression_map);
            }
          }

          omc_NBResizable_findOptimalValue(threadData, _eqn, _occs, _resizables, _parameters, _min_parameters, _optimal_values, _c2pi);

          tmpMeta10 = mmc_mk_box2(0, _eqn, mmc_mk_some(_replacements));
          omc_UnorderedSet_fold(threadData, _constrained_vars, (modelica_fnptr) mmc_mk_box2(0,closure14_NBResizable_addVariableConstraint,tmpMeta10), _c2pi);
          goto tmp2_done;
        }
        case 4: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta28;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _tpl;
            for (tmpMeta11 = omc_List_zip(threadData, omc_NFType_arrayDims(threadData, omc_NFExpression_typeOf(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqn), 3))))), omc_NFType_arrayDims(threadData, omc_NFExpression_typeOf(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqn), 4)))))); !listEmpty(tmpMeta11); tmpMeta11=MMC_CDR(tmpMeta11))
            {
              _tpl = MMC_CAR(tmpMeta11);
              /* Pattern-matching assignment */
              tmpMeta12 = _tpl;
              tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 1));
              tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
              _lhs_dim = tmpMeta13;
              _rhs_dim = tmpMeta14;

              if((omc_NFDimension_isResizable(threadData, _lhs_dim) || omc_NFDimension_isResizable(threadData, _rhs_dim)))
              {
                tmpMeta15 = mmc_mk_cons(omc_NFDimension_sizeExp(threadData, _lhs_dim), MMC_REFSTRUCTLIT(mmc_nil));
                tmpMeta16 = mmc_mk_cons(omc_NFDimension_sizeExp(threadData, _rhs_dim), MMC_REFSTRUCTLIT(mmc_nil));
                tmpMeta17 = mmc_mk_box4(24, &NFExpression_MULTARY__desc, tmpMeta15, tmpMeta16, omc_NFOperator_makeAdd(threadData, _OMC_LIT26));
                _const = tmpMeta17;

                { /* matchcontinue expression */
                  {
                    volatile mmc_switch_type tmp20;
                    int tmp21;
                    tmp20 = 0;
                    MMC_TRY_INTERNAL(mmc_jumper)
                    tmp19_top:
                    threadData->mmc_jumper = &new_mmc_jumper;
                    for (; tmp20 < 2; tmp20++) {
                      switch (MMC_SWITCH_CAST(tmp20)) {
                      case 0: {
                        /* Pattern matching succeeded */
                        omc_NBResizable_addConstraint(threadData, _const, mmc_mk_none(), _c2pe, boxvar_NFExpression_isZero, _OMC_LIT68, _OMC_LIT69);
                        goto tmp19_done;
                      }
                      case 1: {
                        modelica_metatype tmpMeta22;
                        modelica_metatype tmpMeta23;
                        modelica_metatype tmpMeta24;
                        modelica_metatype tmpMeta25;
                        modelica_metatype tmpMeta26;
                        modelica_metatype tmpMeta27;
                        /* Pattern matching succeeded */
                        tmpMeta23 = stringAppend(_OMC_LIT70,omc_NFDimension_toString(threadData, _lhs_dim));
                        tmpMeta24 = stringAppend(tmpMeta23,_OMC_LIT71);
                        tmpMeta25 = stringAppend(tmpMeta24,omc_NFDimension_toString(threadData, _rhs_dim));
                        tmpMeta26 = stringAppend(tmpMeta25,_OMC_LIT72);
                        tmpMeta27 = stringAppend(tmpMeta26,omc_NBEquation_Equation_toString(threadData, _eqn, _OMC_LIT0));
                        tmpMeta22 = mmc_mk_cons(tmpMeta27, MMC_REFSTRUCTLIT(mmc_nil));
                        omc_Error_addMessage(threadData, _OMC_LIT33, tmpMeta22);

                        goto goto_18;
                        goto tmp19_done;
                      }
                      }
                      goto tmp19_end;
                      tmp19_end: ;
                    }
                    goto goto_18;
                    tmp19_done:
                    (void)tmp20;
                    MMC_RESTORE_INTERNAL(mmc_jumper);
                    goto tmp19_done2;
                    goto_18:;
                    MMC_CATCH_INTERNAL(mmc_jumper);
                    if (++tmp20 < 2) {
                      goto tmp19_top;
                    }
                    goto goto_1;
                    tmp19_done2:;
                  }
                }
                ;
              }
            }
          }
          goto tmp2_done;
        }
        default:
        tmp2_default: OMC_LABEL_UNUSED; {
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          
          /* Pattern matching succeeded */
          tmpMeta29 = mmc_mk_box2(0, boxvar_NBVariable_isResizable, _constrained_vars);
          omc_NBEquation_Equation_map(threadData, _eqn, (modelica_fnptr) mmc_mk_box2(0,closure15_NBResizable_collectVars,tmpMeta29), mmc_mk_none(), boxvar_NFExpression_map);

          tmpMeta30 = mmc_mk_box2(0, _eqn, mmc_mk_none());
          omc_UnorderedSet_fold(threadData, _constrained_vars, (modelica_fnptr) mmc_mk_box2(0,closure16_NBResizable_addVariableConstraint,tmpMeta30), _c2pi);
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _eqn;
}

DLLDirection
modelica_string omc_NBResizable_orderString(threadData_t *threadData, modelica_integer _eo)
{
  modelica_string _str = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _str has no default value.
  { /* match expression */
    modelica_integer tmp4_1;
    tmp4_1 = (modelica_integer)_eo;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 4; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (1 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT73;
          goto tmp3_done;
        }
        case 1: {
          if (2 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT74;
          goto tmp3_done;
        }
        case 2: {
          if (3 != tmp4_1) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT75;
          goto tmp3_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT76;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _str = tmp1;
  _return: OMC_LABEL_UNUSED
  return _str;
}
modelica_metatype boxptr_NBResizable_orderString(threadData_t *threadData, modelica_metatype _eo)
{
  modelica_integer tmp1;
  modelica_string _str = NULL;
  tmp1 = mmc_unbox_integer(_eo);
  _str = omc_NBResizable_orderString(threadData, tmp1);
  /* skip box _str; String */
  return _str;
}

DLLDirection
modelica_boolean omc_NBResizable_orderFailed(threadData_t *threadData, modelica_integer _eo)
{
  modelica_boolean _b;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _b = ((modelica_integer)_eo == 4);
  _return: OMC_LABEL_UNUSED
  return _b;
}
modelica_metatype boxptr_NBResizable_orderFailed(threadData_t *threadData, modelica_metatype _eo)
{
  modelica_integer tmp1;
  modelica_boolean _b;
  modelica_metatype out_b;
  tmp1 = mmc_unbox_integer(_eo);
  _b = omc_NBResizable_orderFailed(threadData, tmp1);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

static modelica_metatype closure18_NBVariable_equalName(threadData_t *thData, modelica_metatype closure, modelica_metatype var_ptr1)
{
  modelica_metatype var_ptr2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NBVariable_equalName(thData, var_ptr1, var_ptr2);
}static modelica_metatype closure17_NBResizable_collectVars(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype collector = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NBResizable_collectVars(thData, $in_exp, func, collector);
}static modelica_metatype closure19_NBResizable_collectVars(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype collector = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NBResizable_collectVars(thData, $in_exp, func, collector);
}
DLLDirection
modelica_metatype omc_NBResizable_detect(threadData_t *threadData, modelica_metatype _eqn, modelica_metatype _cref_to_solve)
{
  modelica_metatype _order = NULL;
  modelica_metatype _var_ptr = NULL;
  modelica_metatype _var_occurences = NULL;
  modelica_metatype _ite_occurences = NULL;
  modelica_metatype _occ_lst = NULL;
  modelica_metatype _iterators = NULL;
  modelica_metatype _subs = NULL;
  modelica_metatype _subs_to_solve = NULL;
  modelica_metatype _local_subs = NULL;
  modelica_metatype _sub_to_solve = NULL;
  modelica_metatype _iter = NULL;
  modelica_metatype _args = NULL;
  modelica_metatype _opt_factor = NULL;
  modelica_integer _factor;
  modelica_metatype _shift = NULL;
  modelica_integer _shift_value;
  modelica_integer _v2;
  modelica_integer _eval;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _order has no default value.
  _var_ptr = omc_NBVariable_getVarPointer(threadData, _cref_to_solve, _OMC_LIT77);
  _var_occurences = omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13));
  // _ite_occurences has no default value.
  // _occ_lst has no default value.
  // _iterators has no default value.
  // _subs has no default value.
  // _subs_to_solve has no default value.
  // _local_subs has no default value.
  // _sub_to_solve has no default value.
  // _iter has no default value.
  // _args has no default value.
  // _opt_factor has no default value.
  // _factor has no default value.
  // _shift has no default value.
  // _shift_value has no default value.
  // _v2 has no default value.
  // _eval has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _eqn;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta57;
          modelica_metatype tmpMeta58;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,5) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _body;
            for (tmpMeta6 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_eqn), 4))); !listEmpty(tmpMeta6); tmpMeta6=MMC_CDR(tmpMeta6))
            {
              _body = MMC_CAR(tmpMeta6);
              tmpMeta8 = mmc_mk_box1(0, _var_ptr);
              tmpMeta7 = mmc_mk_box2(0, (modelica_fnptr) mmc_mk_box2(0,closure18_NBVariable_equalName,tmpMeta8), _var_occurences);
              omc_NBEquation_Equation_map(threadData, _body, (modelica_fnptr) mmc_mk_box2(0,closure17_NBResizable_collectVars,tmpMeta7), mmc_mk_none(), boxvar_NFExpression_map);

              _occ_lst = omc_UnorderedSet_toList(threadData, _var_occurences);

              _iterators = omc_NBEquation_Iterator_getFrames(threadData, omc_NBEquation_Equation_getForIterator(threadData, _eqn), NULL, NULL);

              {
                modelica_metatype __omcQ_24tmpVar3;
                modelica_metatype* tmp10;
                modelica_metatype tmpMeta11;
                modelica_metatype __omcQ_24tmpVar2;
                modelica_integer tmp12;
                modelica_metatype _i_loopVar = 0;
                modelica_metatype _i;
                _i_loopVar = _iterators;
                tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
                __omcQ_24tmpVar3 = tmpMeta11; /* defaultValue */
                tmp10 = &__omcQ_24tmpVar3;
                while(1) {
                  tmp12 = 1;
                  if (!listEmpty(_i_loopVar)) {
                    _i = MMC_CAR(_i_loopVar);
                    _i_loopVar = MMC_CDR(_i_loopVar);
                    tmp12--;
                  }
                  if (tmp12 == 0) {
                    __omcQ_24tmpVar2 = mmc_mk_integer(1);
                    *tmp10 = mmc_mk_cons(__omcQ_24tmpVar2,0);
                    tmp10 = &MMC_CDR(*tmp10);
                  } else if (tmp12 == 1) {
                    break;
                  } else {
                    goto goto_2;
                  }
                }
                *tmp10 = mmc_mk_nil();
                tmpMeta9 = __omcQ_24tmpVar3;
              }
              _order = omc_UnorderedMap_fromLists(threadData, _iterators, tmpMeta9, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual);

              if((listLength(_occ_lst) != ((modelica_integer) 1)))
              {
                {
                  modelica_metatype __omcQ_24tmpVar5;
                  modelica_metatype* tmp14;
                  modelica_metatype tmpMeta15;
                  modelica_metatype __omcQ_24tmpVar4;
                  modelica_integer tmp16;
                  modelica_metatype _cref_loopVar = 0;
                  modelica_metatype _cref;
                  _cref_loopVar = _occ_lst;
                  tmpMeta15 = MMC_REFSTRUCTLIT(mmc_nil);
                  __omcQ_24tmpVar5 = tmpMeta15; /* defaultValue */
                  tmp14 = &__omcQ_24tmpVar5;
                  while(1) {
                    tmp16 = 1;
                    if (!listEmpty(_cref_loopVar)) {
                      _cref = MMC_CAR(_cref_loopVar);
                      _cref_loopVar = MMC_CDR(_cref_loopVar);
                      tmp16--;
                    }
                    if (tmp16 == 0) {
                      __omcQ_24tmpVar4 = omc_NFComponentRef_subscriptsAllWithWholeFlat(threadData, _cref);
                      *tmp14 = mmc_mk_cons(__omcQ_24tmpVar4,0);
                      tmp14 = &MMC_CDR(*tmp14);
                    } else if (tmp16 == 1) {
                      break;
                    } else {
                      goto goto_2;
                    }
                  }
                  *tmp14 = mmc_mk_nil();
                  tmpMeta13 = __omcQ_24tmpVar5;
                }
                _subs = tmpMeta13;

                _subs = omc_List_transposeList(threadData, _subs);

                _subs_to_solve = omc_NFComponentRef_subscriptsAllWithWholeFlat(threadData, _cref_to_solve);

                {
                  modelica_metatype _dim;
                  for (tmpMeta17 = omc_List_zip(threadData, _subs, _subs_to_solve); !listEmpty(tmpMeta17); tmpMeta17=MMC_CDR(tmpMeta17))
                  {
                    _dim = MMC_CAR(tmpMeta17);
                    /* Pattern-matching assignment */
                    tmpMeta18 = _dim;
                    tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 1));
                    tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
                    _local_subs = tmpMeta19;
                    _sub_to_solve = tmpMeta20;

                    _ite_occurences = omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13));

                    {
                      modelica_metatype _sub;
                      for (tmpMeta21 = _local_subs; !listEmpty(tmpMeta21); tmpMeta21=MMC_CDR(tmpMeta21))
                      {
                        _sub = MMC_CAR(tmpMeta21);
                        tmpMeta22 = mmc_mk_box2(0, boxvar_NBVariable_isIterator, _ite_occurences);
                        omc_NFSubscript_mapExp(threadData, _sub, (modelica_fnptr) mmc_mk_box2(0,closure19_NBResizable_collectVars,tmpMeta22));
                      }
                    }

                    _iterators = omc_UnorderedSet_toList(threadData, _ite_occurences);

                    { /* match expression */
                      modelica_metatype tmp26_1;
                      tmp26_1 = _iterators;
                      {
                        volatile mmc_switch_type tmp26;
                        int tmp27;
                        tmp26 = 0;
                        for (; tmp26 < 2; tmp26++) {
                          switch (MMC_SWITCH_CAST(tmp26)) {
                          case 0: {
                            modelica_metatype tmpMeta28;
                            modelica_metatype tmpMeta29;
                            modelica_metatype tmpMeta30;
                            modelica_metatype tmpMeta31;
                            if (listEmpty(tmp26_1)) goto tmp25_end;
                            tmpMeta28 = MMC_CAR(tmp26_1);
                            tmpMeta29 = MMC_CDR(tmp26_1);
                            if (!listEmpty(tmpMeta29)) goto tmp25_end;
                            _iter = tmpMeta28;
                            /* Pattern matching succeeded */
                            _eval = mmc_unbox_integer(omc_UnorderedMap_getSafe(threadData, _iter, _order, _OMC_LIT78));

                            if(((modelica_integer)_eval < 4))
                            {
                              _args = omc_NBDifferentiate_DifferentiationArguments_simpleCref(threadData, _iter, _OMC_LIT19);

                              _opt_factor = mmc_mk_none();

                              {
                                modelica_metatype _sub;
                                for (tmpMeta30 = _local_subs; !listEmpty(tmpMeta30); tmpMeta30=MMC_CDR(tmpMeta30))
                                {
                                  _sub = MMC_CAR(tmpMeta30);
                                  _factor = omc_NBResizable_getFactor(threadData, omc_NFSubscript_toExp(threadData, _sub), _args, _opt_factor);

                                  _opt_factor = mmc_mk_some(mmc_mk_integer(_factor));
                                }
                              }

                              { /* match expression */
                                modelica_metatype tmp34_1;
                                tmp34_1 = _opt_factor;
                                {
                                  volatile mmc_switch_type tmp34;
                                  int tmp35;
                                  tmp34 = 0;
                                  for (; tmp34 < 2; tmp34++) {
                                    switch (MMC_SWITCH_CAST(tmp34)) {
                                    case 0: {
                                      modelica_metatype tmpMeta36;
                                      modelica_integer tmp37;
                                      if (optionNone(tmp34_1)) goto tmp33_end;
                                      tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp34_1), 1));
                                      tmp37 = mmc_unbox_integer(tmpMeta36);
                                      _factor = tmp37  /* pattern as ty=Integer */;
                                      /* Pattern matching succeeded */
                                      /* Check guard condition after assignments */
                                      if (!(_factor != ((modelica_integer) 0))) goto tmp33_end;
                                      { /* matchcontinue expression */
                                        {
                                          volatile mmc_switch_type tmp40;
                                          int tmp41;
                                          tmp40 = 0;
                                          MMC_TRY_INTERNAL(mmc_jumper)
                                          tmp39_top:
                                          threadData->mmc_jumper = &new_mmc_jumper;
                                          for (; tmp40 < 2; tmp40++) {
                                            switch (MMC_SWITCH_CAST(tmp40)) {
                                            case 0: {
                                              modelica_metatype tmpMeta42;
                                              modelica_metatype tmpMeta43;
                                              modelica_integer tmp44;
                                              modelica_metatype tmpMeta45;
                                              modelica_metatype tmpMeta46;
                                              modelica_metatype tmpMeta47;
                                              modelica_integer tmp48;
                                              modelica_integer tmp49 = 0;
                                              modelica_metatype tmpMeta54;
                                              /* Pattern matching succeeded */
                                              /* Pattern-matching assignment */
                                              tmpMeta42 = omc_NBResizable_getShift(threadData, omc_NFSubscript_toExp(threadData, _sub_to_solve), _iter);
                                              if (mmc__uniontype__metarecord__typedef__equal(tmpMeta42,0,1) == 0) goto goto_38;
                                              tmpMeta43 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta42), 2));
                                              tmp44 = mmc_unbox_integer(tmpMeta43);
                                              _shift_value = tmp44  /* pattern as ty=Integer */;

                                              {
                                                modelica_metatype _sub;
                                                for (tmpMeta45 = _local_subs; !listEmpty(tmpMeta45); tmpMeta45=MMC_CDR(tmpMeta45))
                                                {
                                                  _sub = MMC_CAR(tmpMeta45);
                                                  /* Pattern-matching assignment */
                                                  tmpMeta46 = omc_NBResizable_getShift(threadData, omc_NFSubscript_toExp(threadData, _sub), _iter);
                                                  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta46,0,1) == 0) goto goto_38;
                                                  tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta46), 2));
                                                  tmp48 = mmc_unbox_integer(tmpMeta47);
                                                  _v2 = tmp48  /* pattern as ty=Integer */;

                                                  { /* match expression */
                                                    modelica_integer tmp52_1;
                                                    tmp52_1 = (modelica_integer)_eval;
                                                    {
                                                      volatile mmc_switch_type tmp52;
                                                      int tmp53;
                                                      tmp52 = 0;
                                                      for (; tmp52 < 6; tmp52++) {
                                                        switch (MMC_SWITCH_CAST(tmp52)) {
                                                        case 0: {
                                                          if (1 != tmp52_1) goto tmp51_end;
                                                          /* Pattern matching succeeded */
                                                          /* Check guard condition after assignments */
                                                          if (!(_shift_value == _v2)) goto tmp51_end;
                                                          tmp49 = 1;
                                                          goto tmp51_done;
                                                        }
                                                        case 1: {
                                                          if (1 != tmp52_1) goto tmp51_end;
                                                          /* Pattern matching succeeded */
                                                          /* Check guard condition after assignments */
                                                          if (!(_shift_value > _v2)) goto tmp51_end;
                                                          tmp49 = 2;
                                                          goto tmp51_done;
                                                        }
                                                        case 2: {
                                                          if (1 != tmp52_1) goto tmp51_end;
                                                          /* Pattern matching succeeded */
                                                          /* Check guard condition after assignments */
                                                          if (!(_shift_value < _v2)) goto tmp51_end;
                                                          tmp49 = 3;
                                                          goto tmp51_done;
                                                        }
                                                        case 3: {
                                                          if (2 != tmp52_1) goto tmp51_end;
                                                          /* Pattern matching succeeded */
                                                          /* Check guard condition after assignments */
                                                          if (!(_shift_value >= _v2)) goto tmp51_end;
                                                          tmp49 = 2;
                                                          goto tmp51_done;
                                                        }
                                                        case 4: {
                                                          if (3 != tmp52_1) goto tmp51_end;
                                                          /* Pattern matching succeeded */
                                                          /* Check guard condition after assignments */
                                                          if (!(_shift_value <= _v2)) goto tmp51_end;
                                                          tmp49 = 3;
                                                          goto tmp51_done;
                                                        }
                                                        case 5: {
                                                          
                                                          /* Pattern matching succeeded */
                                                          tmp49 = 4;
                                                          goto tmp51_done;
                                                        }
                                                        }
                                                        goto tmp51_end;
                                                        tmp51_end: ;
                                                      }
                                                      goto goto_50;
                                                      goto_50:;
                                                      goto goto_38;
                                                      goto tmp51_done;
                                                      tmp51_done:;
                                                    }
                                                  }
                                                  _eval = tmp49;
                                                }
                                              }

                                              if(((modelica_integer)_eval == 4))
                                              {
                                                break;
                                              }
                                              goto tmp39_done;
                                            }
                                            case 1: {
                                              /* Pattern matching succeeded */
                                              _eval = 4;
                                              goto tmp39_done;
                                            }
                                            }
                                            goto tmp39_end;
                                            tmp39_end: ;
                                          }
                                          goto goto_38;
                                          tmp39_done:
                                          (void)tmp40;
                                          MMC_RESTORE_INTERNAL(mmc_jumper);
                                          goto tmp39_done2;
                                          goto_38:;
                                          MMC_CATCH_INTERNAL(mmc_jumper);
                                          if (++tmp40 < 2) {
                                            goto tmp39_top;
                                          }
                                          goto goto_32;
                                          tmp39_done2:;
                                        }
                                      }
                                      ;

                                      omc_UnorderedMap_add(threadData, _iter, mmc_mk_integer((modelica_integer)_eval), _order);
                                      goto tmp33_done;
                                    }
                                    case 1: {
                                      
                                      /* Pattern matching succeeded */
                                      goto tmp33_done;
                                    }
                                    }
                                    goto tmp33_end;
                                    tmp33_end: ;
                                  }
                                  goto goto_32;
                                  goto_32:;
                                  goto goto_24;
                                  goto tmp33_done;
                                  tmp33_done:;
                                }
                              }
                              ;
                            }
                            goto tmp25_done;
                          }
                          case 1: {
                            modelica_metatype tmpMeta55;
                            modelica_metatype tmpMeta56;
                            
                            /* Pattern matching succeeded */
                            {
                              modelica_metatype _it;
                              for (tmpMeta55 = _iterators; !listEmpty(tmpMeta55); tmpMeta55=MMC_CDR(tmpMeta55))
                              {
                                _it = MMC_CAR(tmpMeta55);
                                omc_UnorderedMap_add(threadData, _it, mmc_mk_integer(4), _order);
                              }
                            }

                            break;
                            goto tmp25_done;
                          }
                          }
                          goto tmp25_end;
                          tmp25_end: ;
                        }
                        goto goto_24;
                        goto_24:;
                        goto goto_2;
                        goto tmp25_done;
                        tmp25_done:;
                      }
                    }
                    ;
                  }
                }
              }
            }
          }
          tmpMeta1 = _order;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_UnorderedMap_fromLists(threadData, _OMC_LIT80, _OMC_LIT81, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _order = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _order;
}

static modelica_metatype closure20_NBResizable_findOptimalResizableValues(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_eqn)
{
  modelica_metatype parameters = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype min_parameters = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  modelica_metatype optimal_values = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),3));
  modelica_metatype c2pi = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),4));
  modelica_metatype c2pe = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),5));
  return boxptr_NBResizable_findOptimalResizableValues(thData, $in_eqn, parameters, min_parameters, optimal_values, c2pi, c2pe);
}static modelica_metatype closure21_NBResizable_setInitialValues(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_cref)
{
  modelica_metatype min_parameters = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype optimal_values = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NBResizable_setInitialValues(thData, $in_cref, min_parameters, optimal_values);
}static modelica_metatype closure23_NBResizable_updateDimension(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_dim)
{
  modelica_metatype optimal_values = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NBResizable_updateDimension(thData, $in_dim, optimal_values);
}static modelica_metatype closure22_NFType_applyToDims(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_ty)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFType_applyToDims(thData, $in_ty, func);
}static modelica_metatype closure24_NFVariable_applyToType(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_var)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFVariable_applyToType(thData, $in_var, func);
}static void closure25_NBVariable_updateResizableParameter(threadData_t *thData, modelica_metatype closure, modelica_metatype var_ptr)
{
  modelica_metatype optimal_values = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  boxptr_NBVariable_updateResizableParameter(thData, var_ptr, optimal_values);
}static modelica_metatype closure27_NFExpression_applyToType(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_applyToType(thData, $in_exp, func);
}static void closure26_NBVariable_mapExp(threadData_t *thData, modelica_metatype closure, modelica_metatype var_ptr)
{
  modelica_fnptr funcExp = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_fnptr mapFunc = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  boxptr_NBVariable_mapExp(thData, var_ptr, funcExp, mapFunc);
}static modelica_metatype closure28_NBEquation_Equation_applyToType(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_eqn_ptr)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NBEquation_Equation_applyToType(thData, $in_eqn_ptr, func);
}static modelica_metatype closure29_NFExpression_applyToType(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_applyToType(thData, $in_exp, func);
}static void closure30_NBVariable_applyToType(threadData_t *thData, modelica_metatype closure, modelica_metatype var_ptr)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  boxptr_NBVariable_applyToType(thData, var_ptr, func);
}
DLLDirection
modelica_metatype omc_NBResizable_resize(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fequations, modelica_metatype __omcQ_24in_5FvarData, modelica_metatype *out_varData)
{
  modelica_metatype _equations = NULL;
  modelica_metatype _varData = NULL;
  modelica_metatype _parameters = NULL;
  modelica_metatype _min_parameters = NULL;
  modelica_metatype _optimal_values = NULL;
  modelica_metatype _c2pi = NULL;
  modelica_metatype _c2pe = NULL;
  modelica_metatype _p2ci = NULL;
  modelica_metatype _p2ce = NULL;
  modelica_fnptr _func;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _equations = __omcQ_24in_5Fequations;
  _varData = __omcQ_24in_5FvarData;
  // _parameters has no default value.
  // _min_parameters has no default value.
  // _optimal_values has no default value.
  // _c2pi has no default value.
  // _c2pe has no default value.
  // _p2ci has no default value.
  // _p2ce has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _varData;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,23) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(omc_NBVariable_VariablePointers_size(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_varData), 18)))) > ((modelica_integer) 0))) goto tmp3_end;
          _parameters = omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13));

          _min_parameters = omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13));

          _optimal_values = omc_UnorderedMap_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 1));

          _c2pi = omc_UnorderedMap_new(threadData, boxvar_NFExpression_hash, boxvar_NFExpression_isEqual, ((modelica_integer) 1));

          _c2pe = omc_UnorderedMap_new(threadData, boxvar_NFExpression_hash, boxvar_NFExpression_isEqual, ((modelica_integer) 1));

          tmpMeta6 = mmc_mk_box5(0, _parameters, _min_parameters, _optimal_values, _c2pi, _c2pe);
          omc_NBEquation_EquationPointers_map(threadData, _equations, (modelica_fnptr) mmc_mk_box2(0,closure20_NBResizable_findOptimalResizableValues,tmpMeta6));

          tmpMeta7 = mmc_mk_box2(0, _min_parameters, _optimal_values);
          omc_UnorderedSet_apply(threadData, _parameters, (modelica_fnptr) mmc_mk_box2(0,closure21_NBResizable_setInitialValues,tmpMeta7));

          _p2ci = omc_NBResizable_invertConstraintParameterMap(threadData, _c2pi, _parameters);

          _p2ce = omc_NBResizable_invertConstraintParameterMap(threadData, _c2pe, _parameters);

          omc_NBResizable_computeOptimalValues(threadData, _optimal_values, _c2pi, _p2ci, _c2pe, _p2ce);

          tmpMeta9 = mmc_mk_box1(0, _optimal_values);
          tmpMeta8 = mmc_mk_box1(0, (modelica_fnptr) mmc_mk_box2(0,closure23_NBResizable_updateDimension,tmpMeta9));
          _func = (modelica_fnptr) (modelica_fnptr) mmc_mk_box2(0,closure22_NFType_applyToDims,tmpMeta8);

          tmpMeta11 = mmc_mk_box1(0, ((modelica_fnptr) _func));
          tmpMeta10 = MMC_TAGPTR(mmc_alloc_words(25));
          memcpy(MMC_UNTAGPTR(tmpMeta10), MMC_UNTAGPTR(_varData), 25*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta10))[2] = omc_NBVariable_VariablePointers_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_varData), 2))), (modelica_fnptr) mmc_mk_box2(0,closure24_NFVariable_applyToType,tmpMeta11));
          _varData = tmpMeta10;

          tmpMeta13 = mmc_mk_box1(0, _optimal_values);
          tmpMeta12 = MMC_TAGPTR(mmc_alloc_words(25));
          memcpy(MMC_UNTAGPTR(tmpMeta12), MMC_UNTAGPTR(_varData), 25*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta12))[2] = omc_NBVariable_VariablePointers_mapPtr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_varData), 2))), (modelica_fnptr) mmc_mk_box2(0,closure25_NBVariable_updateResizableParameter,tmpMeta13));
          _varData = tmpMeta12;

          tmpMeta16 = mmc_mk_box1(0, ((modelica_fnptr) _func));
          tmpMeta15 = mmc_mk_box2(0, (modelica_fnptr) mmc_mk_box2(0,closure27_NFExpression_applyToType,tmpMeta16), boxvar_NFExpression_map);
          tmpMeta14 = MMC_TAGPTR(mmc_alloc_words(25));
          memcpy(MMC_UNTAGPTR(tmpMeta14), MMC_UNTAGPTR(_varData), 25*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta14))[2] = omc_NBVariable_VariablePointers_mapPtr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_varData), 2))), (modelica_fnptr) mmc_mk_box2(0,closure26_NBVariable_mapExp,tmpMeta15));
          _varData = tmpMeta14;

          tmpMeta17 = mmc_mk_box1(0, ((modelica_fnptr) _func));
          omc_NBEquation_EquationPointers_mapPtr(threadData, _equations, (modelica_fnptr) mmc_mk_box2(0,closure28_NBEquation_Equation_applyToType,tmpMeta17));

          tmpMeta18 = mmc_mk_box1(0, ((modelica_fnptr) _func));
          _equations = omc_NBEquation_EquationPointers_mapExp(threadData, _equations, (modelica_fnptr) mmc_mk_box2(0,closure29_NFExpression_applyToType,tmpMeta18), mmc_mk_none());

          tmpMeta19 = mmc_mk_box1(0, ((modelica_fnptr) _func));
          omc_NBEquation_EquationPointers_mapRes(threadData, _equations, (modelica_fnptr) mmc_mk_box2(0,closure30_NBVariable_applyToType,tmpMeta19));

          if(omc_Flags_isSet(threadData, _OMC_LIT85))
          {
            tmpMeta20 = stringAppend(omc_StringUtil_headline__2(threadData, _OMC_LIT7),_OMC_LIT8);
            fputs(MMC_STRINGDATA(omc_NBResizable_optimalValuesToString(threadData, _optimal_values, tmpMeta20)),stdout);
          }
          tmpMeta1 = _varData;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          if(omc_Flags_isSet(threadData, _OMC_LIT85))
          {
            fputs(MMC_STRINGDATA(omc_StringUtil_headline__2(threadData, _OMC_LIT86)),stdout);
          }
          tmpMeta1 = _varData;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _varData = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  if (out_varData) { *out_varData = _varData; }
  return _equations;
}

