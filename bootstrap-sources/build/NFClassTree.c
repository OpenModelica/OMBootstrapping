#include "omc_simulation_settings.h"
#include "NFClassTree.h"
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT0,1,5) {&ErrorTypes_MessageType_TRANSLATION__desc,}};
#define _OMC_LIT0 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT0)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT1,1,4) {&ErrorTypes_Severity_ERROR__desc,}};
#define _OMC_LIT1 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT1)
#define _OMC_LIT2_data "Modifier '%s' found on outer element %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT2,40,_OMC_LIT2_data);
#define _OMC_LIT2 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT2)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT3,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT2}};
#define _OMC_LIT3 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT3)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT4,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(307)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT3}};
#define _OMC_LIT4 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT4)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT5,10,3) {&SCodeDump_SCodeDumpOptions_OPTIONS__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */))}};
#define _OMC_LIT5 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT5)
#define _OMC_LIT6_data "Illegal outer class %s, outer classes may only be declared using short-class definitions."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT6,89,_OMC_LIT6_data);
#define _OMC_LIT6 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT7,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT6}};
#define _OMC_LIT7 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT7)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT8,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(308)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT7}};
#define _OMC_LIT8 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT8)
#define _OMC_LIT9_data "Found inner %s %s instead of expected %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT9,41,_OMC_LIT9_data);
#define _OMC_LIT9 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT9)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT10,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT9}};
#define _OMC_LIT10 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT10)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT11,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(305)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT10}};
#define _OMC_LIT11 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT11)
#define _OMC_LIT12_data "Illegal redeclare of element %s, no inherited element with that name exists."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT12,76,_OMC_LIT12_data);
#define _OMC_LIT12 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT12)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT13,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT12}};
#define _OMC_LIT13 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT13)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT14,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(228)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT13}};
#define _OMC_LIT14 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT14)
#define _OMC_LIT15_data "Base class targeted by class extends %s not found in the inherited classes."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT15,75,_OMC_LIT15_data);
#define _OMC_LIT15 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT15)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT16,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT15}};
#define _OMC_LIT16 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT16)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT17,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(579)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT16}};
#define _OMC_LIT17 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT17)
#define _OMC_LIT18_data "An element with name %s is already declared in this scope."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT18,58,_OMC_LIT18_data);
#define _OMC_LIT18 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT18)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT19,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT18}};
#define _OMC_LIT19 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT19)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT20,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(161)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT19}};
#define _OMC_LIT20 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT20)
#define _OMC_LIT21_data "NFClassTree.ClassTree.findLocalConflictElement got invalid entry index"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT21,70,_OMC_LIT21_data);
#define _OMC_LIT21 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT21)
#define _OMC_LIT22_data "/home/adrpo33/OpenModelica/OMCompiler/Compiler/NFFrontEnd/NFClassTree.mo"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT22,72,_OMC_LIT22_data);
#define _OMC_LIT22 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT22)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT23_6,1.758197185e9);
#define _OMC_LIT23_6 MMC_REFREALLIT(_OMC_LIT_STRUCT23_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT23,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT22,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1687)),MMC_IMMEDIATE(MMC_TAGFIXNUM(13)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1687)),MMC_IMMEDIATE(MMC_TAGFIXNUM(108)),_OMC_LIT23_6}};
#define _OMC_LIT23 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT23)
#define _OMC_LIT24_data "NFClassTree.ClassTree.findLocalConflictElement got invalid entry"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT24,64,_OMC_LIT24_data);
#define _OMC_LIT24 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT24)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT25_6,1.758197185e9);
#define _OMC_LIT25_6 MMC_REFREALLIT(_OMC_LIT_STRUCT25_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT25,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT22,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1693)),MMC_IMMEDIATE(MMC_TAGFIXNUM(13)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1693)),MMC_IMMEDIATE(MMC_TAGFIXNUM(91)),_OMC_LIT25_6}};
#define _OMC_LIT25 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT25)
#define _OMC_LIT26_data "NFClassTree.ClassTree.getRedeclaredNode failed on "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT26,50,_OMC_LIT26_data);
#define _OMC_LIT26 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT26)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT27_6,1.758197185e9);
#define _OMC_LIT27_6 MMC_REFREALLIT(_OMC_LIT_STRUCT27_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT27,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT22,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1386)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1386)),MMC_IMMEDIATE(MMC_TAGFIXNUM(87)),_OMC_LIT27_6}};
#define _OMC_LIT27 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT27)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT28,1,11) {&NFInstNode_InstNode_EMPTY__NODE__desc,}};
#define _OMC_LIT28 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT28)
#define _OMC_LIT29_data "NFClassTree.ClassTree.appendComponentsToFlatTree failed for non-flat tree."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT29,74,_OMC_LIT29_data);
#define _OMC_LIT29 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT29)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT30_6,1.758197185e9);
#define _OMC_LIT30_6 MMC_REFREALLIT(_OMC_LIT_STRUCT30_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT30,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT22,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(782)),MMC_IMMEDIATE(MMC_TAGFIXNUM(13)),MMC_IMMEDIATE(MMC_TAGFIXNUM(782)),MMC_IMMEDIATE(MMC_TAGFIXNUM(99)),_OMC_LIT30_6}};
#define _OMC_LIT30 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT30)
#define _OMC_LIT31_data "NFClassTree.ClassTree.appendComponentsToInstTree failed for non-instantiated tree."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT31,82,_OMC_LIT31_data);
#define _OMC_LIT31 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT31)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT32_6,1.758197185e9);
#define _OMC_LIT32_6 MMC_REFREALLIT(_OMC_LIT_STRUCT32_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT32,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT22,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(759)),MMC_IMMEDIATE(MMC_TAGFIXNUM(13)),MMC_IMMEDIATE(MMC_TAGFIXNUM(759)),MMC_IMMEDIATE(MMC_TAGFIXNUM(107)),_OMC_LIT32_6}};
#define _OMC_LIT32 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT32)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT33,1,5) {&NFLookupTree_Tree_EMPTY__desc,}};
#define _OMC_LIT33 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT33)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT34,1,5) {&NFDuplicateTree_Tree_EMPTY__desc,}};
#define _OMC_LIT34 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT34)
#define _OMC_LIT35_data "nfAPI"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT35,5,_OMC_LIT35_data);
#define _OMC_LIT35 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT35)
#define _OMC_LIT36_data "Enables experimental new instantiation use in the OMC API."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT36,58,_OMC_LIT36_data);
#define _OMC_LIT36 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT36)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT37,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT36}};
#define _OMC_LIT37 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT37)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT38,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(171)),_OMC_LIT35,MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */)),_OMC_LIT37}};
#define _OMC_LIT38 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT38)
#define _OMC_LIT39_data "NFClassTree.ClassTree.instantiate miscounted components in "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT39,59,_OMC_LIT39_data);
#define _OMC_LIT39 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT39)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT40_6,1.758197185e9);
#define _OMC_LIT40_6 MMC_REFREALLIT(_OMC_LIT_STRUCT40_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT40,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT22,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(596)),MMC_IMMEDIATE(MMC_TAGFIXNUM(15)),MMC_IMMEDIATE(MMC_TAGFIXNUM(597)),MMC_IMMEDIATE(MMC_TAGFIXNUM(54)),_OMC_LIT40_6}};
#define _OMC_LIT40 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT40)
#define _OMC_LIT41_data "NFClassTree.ClassTree.instantiate miscounted classes in "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT41,56,_OMC_LIT41_data);
#define _OMC_LIT41 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT41)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT42_6,1.758197185e9);
#define _OMC_LIT42_6 MMC_REFREALLIT(_OMC_LIT_STRUCT42_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT42,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT22,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(601)),MMC_IMMEDIATE(MMC_TAGFIXNUM(15)),MMC_IMMEDIATE(MMC_TAGFIXNUM(602)),MMC_IMMEDIATE(MMC_TAGFIXNUM(54)),_OMC_LIT42_6}};
#define _OMC_LIT42 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT42)
#define _OMC_LIT43_data "extends %s causes an instantiation loop."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT43,40,_OMC_LIT43_data);
#define _OMC_LIT43 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT43)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT44,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT43}};
#define _OMC_LIT44 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT44)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT45,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(19)),_OMC_LIT0,_OMC_LIT1,_OMC_LIT44}};
#define _OMC_LIT45 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT45)
#define _OMC_LIT46_data "NFClassTree.ClassTree.instantiate got invalid class"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT46,51,_OMC_LIT46_data);
#define _OMC_LIT46 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT46)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT47_6,1.758197185e9);
#define _OMC_LIT47_6 MMC_REFREALLIT(_OMC_LIT_STRUCT47_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT47,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT22,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(643)),MMC_IMMEDIATE(MMC_TAGFIXNUM(13)),MMC_IMMEDIATE(MMC_TAGFIXNUM(643)),MMC_IMMEDIATE(MMC_TAGFIXNUM(91)),_OMC_LIT47_6}};
#define _OMC_LIT47 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT47)
#define _OMC_LIT48_data "NFClassTree.ClassTree.expand got invalid component"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT48,50,_OMC_LIT48_data);
#define _OMC_LIT48 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT48)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT49_6,1.758197185e9);
#define _OMC_LIT49_6 MMC_REFREALLIT(_OMC_LIT_STRUCT49_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT49,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT22,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(401)),MMC_IMMEDIATE(MMC_TAGFIXNUM(15)),MMC_IMMEDIATE(MMC_TAGFIXNUM(401)),MMC_IMMEDIATE(MMC_TAGFIXNUM(97)),_OMC_LIT49_6}};
#define _OMC_LIT49 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT49)
#define _OMC_LIT50_data "min"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT50,3,_OMC_LIT50_data);
#define _OMC_LIT50 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT50)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT51,2,4) {&NFLookupTree_Entry_COMPONENT__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(2))}};
#define _OMC_LIT51 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT51)
#define _OMC_LIT52_data "max"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT52,3,_OMC_LIT52_data);
#define _OMC_LIT52 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT52)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT53,2,4) {&NFLookupTree_Entry_COMPONENT__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(3))}};
#define _OMC_LIT53 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT53)
#define _OMC_LIT54_data "fixed"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT54,5,_OMC_LIT54_data);
#define _OMC_LIT54 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT54)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT55,2,4) {&NFLookupTree_Entry_COMPONENT__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(5))}};
#define _OMC_LIT55 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT55)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT56,3,4) {&NFLookupTree_Tree_LEAF__desc,_OMC_LIT54,_OMC_LIT55}};
#define _OMC_LIT56 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT56)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT57,6,3) {&NFLookupTree_Tree_NODE__desc,_OMC_LIT52,_OMC_LIT53,MMC_IMMEDIATE(MMC_TAGFIXNUM(2)),_OMC_LIT56,_OMC_LIT33}};
#define _OMC_LIT57 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT57)
#define _OMC_LIT58_data "quantity"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT58,8,_OMC_LIT58_data);
#define _OMC_LIT58 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT58)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT59,2,4) {&NFLookupTree_Entry_COMPONENT__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1))}};
#define _OMC_LIT59 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT59)
#define _OMC_LIT60_data "start"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT60,5,_OMC_LIT60_data);
#define _OMC_LIT60 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT60)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT61,2,4) {&NFLookupTree_Entry_COMPONENT__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(4))}};
#define _OMC_LIT61 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT61)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT62,3,4) {&NFLookupTree_Tree_LEAF__desc,_OMC_LIT60,_OMC_LIT61}};
#define _OMC_LIT62 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT62)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT63,6,3) {&NFLookupTree_Tree_NODE__desc,_OMC_LIT58,_OMC_LIT59,MMC_IMMEDIATE(MMC_TAGFIXNUM(2)),_OMC_LIT33,_OMC_LIT62}};
#define _OMC_LIT63 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT63)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT64,6,3) {&NFLookupTree_Tree_NODE__desc,_OMC_LIT50,_OMC_LIT51,MMC_IMMEDIATE(MMC_TAGFIXNUM(3)),_OMC_LIT57,_OMC_LIT63}};
#define _OMC_LIT64 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT64)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT65,1,5) {&NFType_STRING__desc,}};
#define _OMC_LIT65 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT65)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT66,1,5) {&NFModifier_Modifier_NOMOD__desc,}};
#define _OMC_LIT66 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT66)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT67,3,7) {&NFComponent_TYPE__ATTRIBUTE__desc,_OMC_LIT65,_OMC_LIT66}};
#define _OMC_LIT67 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT67)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT68,1,6) {&NFType_BOOLEAN__desc,}};
#define _OMC_LIT68 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT68)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT69,3,7) {&NFComponent_TYPE__ATTRIBUTE__desc,_OMC_LIT68,_OMC_LIT66}};
#define _OMC_LIT69 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT69)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT70,2,6) {&NFInstNode_InstNode_REF__NODE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1))}};
#define _OMC_LIT70 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT70)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT71,1,3) {&NFInstNode_InstNodeType_NORMAL__CLASS__desc,}};
#define _OMC_LIT71 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT71)
#include "util/modelica.h"

#include "NFClassTree_includes.h"


/* default, do not make protected functions static */
#if !defined(PROTECTED_FUNCTION_STATIC)
#define PROTECTED_FUNCTION_STATIC
#endif
PROTECTED_FUNCTION_STATIC void omc_NFClassTree_ClassTree_checkOuterClass(threadData_t *threadData, modelica_metatype _outerCls);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_checkOuterClass,2,0) {(void*) boxptr_NFClassTree_ClassTree_checkOuterClass,0}};
#define boxvar_NFClassTree_ClassTree_checkOuterClass MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_checkOuterClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_linkInnerOuter(threadData_t *threadData, modelica_metatype _outerNode, modelica_metatype _scope);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_linkInnerOuter,2,0) {(void*) boxptr_NFClassTree_ClassTree_linkInnerOuter,0}};
#define boxvar_NFClassTree_ClassTree_linkInnerOuter MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_linkInnerOuter)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_replaceDuplicates4(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fentry, modelica_metatype _node);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_replaceDuplicates4,2,0) {(void*) boxptr_NFClassTree_ClassTree_replaceDuplicates4,0}};
#define boxvar_NFClassTree_ClassTree_replaceDuplicates4 MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_replaceDuplicates4)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_replaceDuplicates3(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fentry, modelica_metatype _kept, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_replaceDuplicates3,2,0) {(void*) boxptr_NFClassTree_ClassTree_replaceDuplicates3,0}};
#define boxvar_NFClassTree_ClassTree_replaceDuplicates3 MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_replaceDuplicates3)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_replaceDuplicates2(threadData_t *threadData, modelica_string _name, modelica_metatype __omcQ_24in_5Fentry, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_replaceDuplicates2,2,0) {(void*) boxptr_NFClassTree_ClassTree_replaceDuplicates2,0}};
#define boxvar_NFClassTree_ClassTree_replaceDuplicates2 MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_replaceDuplicates2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_getRedeclareChain(threadData_t *threadData, modelica_metatype _entry, modelica_metatype _tree, modelica_metatype __omcQ_24in_5Fchain);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_getRedeclareChain,2,0) {(void*) boxptr_NFClassTree_ClassTree_getRedeclareChain,0}};
#define boxvar_NFClassTree_ClassTree_getRedeclareChain MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_getRedeclareChain)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_mapRedeclareChain(threadData_t *threadData, modelica_string _name, modelica_metatype __omcQ_24in_5Fentry, modelica_fnptr _func, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_mapRedeclareChain,2,0) {(void*) boxptr_NFClassTree_ClassTree_mapRedeclareChain,0}};
#define boxvar_NFClassTree_ClassTree_mapRedeclareChain MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_mapRedeclareChain)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_enumerateDuplicates4(threadData_t *threadData, modelica_metatype _entry, modelica_metatype __omcQ_24in_5Fclasses, modelica_metatype __omcQ_24in_5Fcomponents, modelica_metatype *out_components);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_enumerateDuplicates4,2,0) {(void*) boxptr_NFClassTree_ClassTree_enumerateDuplicates4,0}};
#define boxvar_NFClassTree_ClassTree_enumerateDuplicates4 MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_enumerateDuplicates4)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_enumerateDuplicates3(threadData_t *threadData, modelica_metatype _entry, modelica_metatype __omcQ_24in_5Fclasses, modelica_metatype __omcQ_24in_5Fcomponents, modelica_metatype *out_components);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_enumerateDuplicates3,2,0) {(void*) boxptr_NFClassTree_ClassTree_enumerateDuplicates3,0}};
#define boxvar_NFClassTree_ClassTree_enumerateDuplicates3 MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_enumerateDuplicates3)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_enumerateDuplicates2(threadData_t *threadData, modelica_string _name, modelica_metatype _entry, modelica_metatype __omcQ_24in_5Fclasses, modelica_metatype __omcQ_24in_5Fcomponents, modelica_metatype *out_components);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_enumerateDuplicates2,2,0) {(void*) boxptr_NFClassTree_ClassTree_enumerateDuplicates2,0}};
#define boxvar_NFClassTree_ClassTree_enumerateDuplicates2 MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_enumerateDuplicates2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_enumerateDuplicates(threadData_t *threadData, modelica_metatype _duplicates, modelica_metatype *out_components);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_enumerateDuplicates,2,0) {(void*) boxptr_NFClassTree_ClassTree_enumerateDuplicates,0}};
#define boxvar_NFClassTree_ClassTree_enumerateDuplicates MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_enumerateDuplicates)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_joinDuplicates(threadData_t *threadData, modelica_metatype _newEntry, modelica_metatype _oldEntry, modelica_string _name);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_joinDuplicates,2,0) {(void*) boxptr_NFClassTree_ClassTree_joinDuplicates,0}};
#define boxvar_NFClassTree_ClassTree_joinDuplicates MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_joinDuplicates)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_offsetDuplicate(threadData_t *threadData, modelica_metatype _entry, modelica_integer _classOffset, modelica_integer _componentOffset);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_offsetDuplicate(threadData_t *threadData, modelica_metatype _entry, modelica_metatype _classOffset, modelica_metatype _componentOffset);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_offsetDuplicate,2,0) {(void*) boxptr_NFClassTree_ClassTree_offsetDuplicate,0}};
#define boxvar_NFClassTree_ClassTree_offsetDuplicate MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_offsetDuplicate)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_offsetDuplicates(threadData_t *threadData, modelica_string _name, modelica_metatype _entry, modelica_integer _classOffset, modelica_integer _componentOffset);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_offsetDuplicates(threadData_t *threadData, modelica_metatype _name, modelica_metatype _entry, modelica_metatype _classOffset, modelica_metatype _componentOffset);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_offsetDuplicates,2,0) {(void*) boxptr_NFClassTree_ClassTree_offsetDuplicates,0}};
#define boxvar_NFClassTree_ClassTree_offsetDuplicates MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_offsetDuplicates)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_addInheritedElementConflict(threadData_t *threadData, modelica_metatype _newEntry, modelica_metatype _oldEntry, modelica_string _name, modelica_metatype _duplicates, modelica_metatype _extDuplicates);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_addInheritedElementConflict,2,0) {(void*) boxptr_NFClassTree_ClassTree_addInheritedElementConflict,0}};
#define boxvar_NFClassTree_ClassTree_addInheritedElementConflict MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_addInheritedElementConflict)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_addInheritedElement(threadData_t *threadData, modelica_string _name, modelica_metatype _entry, modelica_integer _classOffset, modelica_integer _componentOffset, modelica_fnptr _conflictFunc, modelica_metatype __omcQ_24in_5Ftree);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_addInheritedElement(threadData_t *threadData, modelica_metatype _name, modelica_metatype _entry, modelica_metatype _classOffset, modelica_metatype _componentOffset, modelica_fnptr _conflictFunc, modelica_metatype __omcQ_24in_5Ftree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_addInheritedElement,2,0) {(void*) boxptr_NFClassTree_ClassTree_addInheritedElement,0}};
#define boxvar_NFClassTree_ClassTree_addInheritedElement MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_addInheritedElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_expandExtends(threadData_t *threadData, modelica_metatype _extendsNode, modelica_metatype __omcQ_24in_5Ftree, modelica_integer _classOffset, modelica_integer _componentOffset, modelica_metatype _duplicates);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_expandExtends(threadData_t *threadData, modelica_metatype _extendsNode, modelica_metatype __omcQ_24in_5Ftree, modelica_metatype _classOffset, modelica_metatype _componentOffset, modelica_metatype _duplicates);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_expandExtends,2,0) {(void*) boxptr_NFClassTree_ClassTree_expandExtends,0}};
#define boxvar_NFClassTree_ClassTree_expandExtends MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_expandExtends)
PROTECTED_FUNCTION_STATIC modelica_integer omc_NFClassTree_ClassTree_countInheritedElements(threadData_t *threadData, modelica_metatype _extendsNode, modelica_integer __omcQ_24in_5FclassCount, modelica_integer __omcQ_24in_5FcomponentCount, modelica_integer *out_componentCount);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_countInheritedElements(threadData_t *threadData, modelica_metatype _extendsNode, modelica_metatype __omcQ_24in_5FclassCount, modelica_metatype __omcQ_24in_5FcomponentCount, modelica_metatype *out_componentCount);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_countInheritedElements,2,0) {(void*) boxptr_NFClassTree_ClassTree_countInheritedElements,0}};
#define boxvar_NFClassTree_ClassTree_countInheritedElements MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_countInheritedElements)
PROTECTED_FUNCTION_STATIC modelica_integer omc_NFClassTree_ClassTree_countElements(threadData_t *threadData, modelica_metatype _elements, modelica_integer *out_compCount, modelica_integer *out_extCount);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_countElements(threadData_t *threadData, modelica_metatype _elements, modelica_metatype *out_compCount, modelica_metatype *out_extCount);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_countElements,2,0) {(void*) boxptr_NFClassTree_ClassTree_countElements,0}};
#define boxvar_NFClassTree_ClassTree_countElements MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_countElements)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_resolveImport(threadData_t *threadData, modelica_integer _index, modelica_metatype _tree);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_resolveImport(threadData_t *threadData, modelica_metatype _index, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_resolveImport,2,0) {(void*) boxptr_NFClassTree_ClassTree_resolveImport,0}};
#define boxvar_NFClassTree_ClassTree_resolveImport MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_resolveImport)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_resolveComponent(threadData_t *threadData, modelica_integer _index, modelica_metatype _tree);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_resolveComponent(threadData_t *threadData, modelica_metatype _index, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_resolveComponent,2,0) {(void*) boxptr_NFClassTree_ClassTree_resolveComponent,0}};
#define boxvar_NFClassTree_ClassTree_resolveComponent MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_resolveComponent)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_resolveClass(threadData_t *threadData, modelica_integer _index, modelica_metatype _tree);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_resolveClass(threadData_t *threadData, modelica_metatype _index, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_resolveClass,2,0) {(void*) boxptr_NFClassTree_ClassTree_resolveClass,0}};
#define boxvar_NFClassTree_ClassTree_resolveClass MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_resolveClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_resolveDuplicateEntriesPtr(threadData_t *threadData, modelica_metatype _entry, modelica_metatype _tree, modelica_metatype __omcQ_24in_5Felements);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_resolveDuplicateEntriesPtr,2,0) {(void*) boxptr_NFClassTree_ClassTree_resolveDuplicateEntriesPtr,0}};
#define boxvar_NFClassTree_ClassTree_resolveDuplicateEntriesPtr MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_resolveDuplicateEntriesPtr)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_resolveEntryPtr(threadData_t *threadData, modelica_metatype _entry, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_resolveEntryPtr,2,0) {(void*) boxptr_NFClassTree_ClassTree_resolveEntryPtr,0}};
#define boxvar_NFClassTree_ClassTree_resolveEntryPtr MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_resolveEntryPtr)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_resolveEntry(threadData_t *threadData, modelica_metatype _entry, modelica_metatype _tree, modelica_boolean *out_isImport);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_resolveEntry(threadData_t *threadData, modelica_metatype _entry, modelica_metatype _tree, modelica_metatype *out_isImport);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_resolveEntry,2,0) {(void*) boxptr_NFClassTree_ClassTree_resolveEntry,0}};
#define boxvar_NFClassTree_ClassTree_resolveEntry MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_resolveEntry)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_addDuplicateConflict(threadData_t *threadData, modelica_metatype _newEntry, modelica_metatype _oldEntry, modelica_string _name);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_addDuplicateConflict,2,0) {(void*) boxptr_NFClassTree_ClassTree_addDuplicateConflict,0}};
#define boxvar_NFClassTree_ClassTree_addDuplicateConflict MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_addDuplicateConflict)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_addDuplicate(threadData_t *threadData, modelica_string _name, modelica_metatype _duplicateEntry, modelica_metatype _keptEntry, modelica_metatype __omcQ_24in_5Fduplicates);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_addDuplicate,2,0) {(void*) boxptr_NFClassTree_ClassTree_addDuplicate,0}};
#define boxvar_NFClassTree_ClassTree_addDuplicate MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_addDuplicate)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_addImportConflict(threadData_t *threadData, modelica_metatype _newEntry, modelica_metatype _oldEntry, modelica_string _name, modelica_metatype _imports);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_addImportConflict,2,0) {(void*) boxptr_NFClassTree_ClassTree_addImportConflict,0}};
#define boxvar_NFClassTree_ClassTree_addImportConflict MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_addImportConflict)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_addImport(threadData_t *threadData, modelica_metatype _imp, modelica_integer _index, modelica_metatype __omcQ_24in_5Ftree, modelica_metatype _imports);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_addImport(threadData_t *threadData, modelica_metatype _imp, modelica_metatype _index, modelica_metatype __omcQ_24in_5Ftree, modelica_metatype _imports);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_addImport,2,0) {(void*) boxptr_NFClassTree_ClassTree_addImport,0}};
#define boxvar_NFClassTree_ClassTree_addImport MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_addImport)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_addEnumConflict(threadData_t *threadData, modelica_metatype _newEntry, modelica_metatype _oldEntry, modelica_string _name, modelica_metatype _literal);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_addEnumConflict,2,0) {(void*) boxptr_NFClassTree_ClassTree_addEnumConflict,0}};
#define boxvar_NFClassTree_ClassTree_addEnumConflict MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_addEnumConflict)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_findLocalConflictElement(threadData_t *threadData, modelica_metatype _entry, modelica_metatype _classTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_findLocalConflictElement,2,0) {(void*) boxptr_NFClassTree_ClassTree_findLocalConflictElement,0}};
#define boxvar_NFClassTree_ClassTree_findLocalConflictElement MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_findLocalConflictElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_addLocalElementConflict(threadData_t *threadData, modelica_metatype _newEntry, modelica_metatype _oldEntry, modelica_string _name, modelica_metatype _classTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_addLocalElementConflict,2,0) {(void*) boxptr_NFClassTree_ClassTree_addLocalElementConflict,0}};
#define boxvar_NFClassTree_ClassTree_addLocalElementConflict MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_addLocalElementConflict)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_addLocalElement(threadData_t *threadData, modelica_string _name, modelica_metatype _entry, modelica_metatype _classTree, modelica_metatype __omcQ_24in_5Ftree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_addLocalElement,2,0) {(void*) boxptr_NFClassTree_ClassTree_addLocalElement,0}};
#define boxvar_NFClassTree_ClassTree_addLocalElement MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_addLocalElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_lookupTree(threadData_t *threadData, modelica_metatype _ctree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_lookupTree,2,0) {(void*) boxptr_NFClassTree_ClassTree_lookupTree,0}};
#define boxvar_NFClassTree_ClassTree_lookupTree MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_lookupTree)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_getDuplicates(threadData_t *threadData, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_getDuplicates,2,0) {(void*) boxptr_NFClassTree_ClassTree_getDuplicates,0}};
#define boxvar_NFClassTree_ClassTree_getDuplicates MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_getDuplicates)
PROTECTED_FUNCTION_STATIC modelica_integer omc_NFClassTree_ClassTree_instExtendsComps(threadData_t *threadData, modelica_metatype _extNode, modelica_metatype _comps, modelica_integer __omcQ_24in_5Findex);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_instExtendsComps(threadData_t *threadData, modelica_metatype _extNode, modelica_metatype _comps, modelica_metatype __omcQ_24in_5Findex);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_instExtendsComps,2,0) {(void*) boxptr_NFClassTree_ClassTree_instExtendsComps,0}};
#define boxvar_NFClassTree_ClassTree_instExtendsComps MMC_REFSTRUCTLIT(boxvar_lit_NFClassTree_ClassTree_instExtendsComps)

PROTECTED_FUNCTION_STATIC void omc_NFClassTree_ClassTree_checkOuterClass(threadData_t *threadData, modelica_metatype _outerCls)
{
  modelica_metatype _def = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _def has no default value.
  if(omc_NFInstNode_InstNode_isOnlyOuter(threadData, _outerCls))
  {
    _def = omc_SCodeUtil_getClassDef(threadData, omc_NFInstNode_InstNode_definition(threadData, _outerCls));

    { /* match expression */
      modelica_metatype tmp3_1;
      tmp3_1 = _def;
      {
        volatile mmc_switch_type tmp3;
        int tmp4;
        tmp3 = 0;
        for (; tmp3 < 3; tmp3++) {
          switch (MMC_SWITCH_CAST(tmp3)) {
          case 0: {
            modelica_metatype tmpMeta5;
            if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,3) == 0) goto tmp2_end;
            tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
            if (mmc__uniontype__metarecord__typedef__equal(tmpMeta5,2,0) == 0) goto tmp2_end;
            
            /* Pattern matching succeeded */
            goto tmp2_done;
          }
          case 1: {
            modelica_metatype tmpMeta6;
            if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,3) == 0) goto tmp2_end;
            
            /* Pattern matching succeeded */
            tmpMeta6 = mmc_mk_cons(omc_SCodeDump_printModStr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_def), 3))), _OMC_LIT5), mmc_mk_cons(omc_NFInstNode_InstNode_name(threadData, _outerCls), MMC_REFSTRUCTLIT(mmc_nil)));
            omc_Error_addSourceMessage(threadData, _OMC_LIT4, tmpMeta6, omc_NFInstNode_InstNode_info(threadData, _outerCls));
            goto goto_1;
            goto tmp2_done;
          }
          case 2: {
            modelica_metatype tmpMeta7;
            
            /* Pattern matching succeeded */
            tmpMeta7 = mmc_mk_cons(omc_NFInstNode_InstNode_name(threadData, _outerCls), MMC_REFSTRUCTLIT(mmc_nil));
            omc_Error_addSourceMessage(threadData, _OMC_LIT8, tmpMeta7, omc_NFInstNode_InstNode_info(threadData, _outerCls));
            goto goto_1;
            goto tmp2_done;
          }
          }
          goto tmp2_end;
          tmp2_end: ;
        }
        goto goto_1;
        goto_1:;
        MMC_THROW_INTERNAL();
        goto tmp2_done;
        tmp2_done:;
      }
    }
    ;
  }
  _return: OMC_LABEL_UNUSED
  return;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_linkInnerOuter(threadData_t *threadData, modelica_metatype _outerNode, modelica_metatype _scope)
{
  modelica_metatype _innerOuterNode = NULL;
  modelica_metatype _inner_node = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _innerOuterNode has no default value.
  // _inner_node has no default value.
  _inner_node = omc_NFLookup_lookupInner(threadData, _outerNode, _scope);

  if((valueConstructor(_outerNode) != valueConstructor(_inner_node)))
  {
    tmpMeta1 = mmc_mk_cons(omc_NFInstNode_InstNode_typeName(threadData, _inner_node), mmc_mk_cons(omc_NFInstNode_InstNode_name(threadData, _outerNode), mmc_mk_cons(omc_NFInstNode_InstNode_typeName(threadData, _outerNode), MMC_REFSTRUCTLIT(mmc_nil))));
    tmpMeta2 = mmc_mk_cons(omc_NFInstNode_InstNode_info(threadData, _outerNode), mmc_mk_cons(omc_NFInstNode_InstNode_info(threadData, _inner_node), MMC_REFSTRUCTLIT(mmc_nil)));
    omc_Error_addMultiSourceMessage(threadData, _OMC_LIT11, tmpMeta1, tmpMeta2);

    MMC_THROW_INTERNAL();
  }

  tmpMeta3 = mmc_mk_box3(5, &NFInstNode_InstNode_INNER__OUTER__NODE__desc, _inner_node, _outerNode);
  _innerOuterNode = tmpMeta3;
  _return: OMC_LABEL_UNUSED
  return _innerOuterNode;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_replaceDuplicates4(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fentry, modelica_metatype _node)
{
  modelica_metatype _entry = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _entry = __omcQ_24in_5Fentry;
  tmpMeta1 = MMC_TAGPTR(mmc_alloc_words(6));
  memcpy(MMC_UNTAGPTR(tmpMeta1), MMC_UNTAGPTR(_entry), 6*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta1))[3] = mmc_mk_some(_node);
  _entry = tmpMeta1;

  {
    modelica_metatype __omcQ_24tmpVar1;
    modelica_metatype* tmp4;
    modelica_metatype tmpMeta5;
    modelica_metatype __omcQ_24tmpVar0;
    modelica_integer tmp6;
    modelica_metatype _c_loopVar = 0;
    modelica_metatype _c;
    _c_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 4)));
    tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar1 = tmpMeta5; /* defaultValue */
    tmp4 = &__omcQ_24tmpVar1;
    while(1) {
      tmp6 = 1;
      if (!listEmpty(_c_loopVar)) {
        _c = MMC_CAR(_c_loopVar);
        _c_loopVar = MMC_CDR(_c_loopVar);
        tmp6--;
      }
      if (tmp6 == 0) {
        __omcQ_24tmpVar0 = omc_NFClassTree_ClassTree_replaceDuplicates4(threadData, _c, _node);
        *tmp4 = mmc_mk_cons(__omcQ_24tmpVar0,0);
        tmp4 = &MMC_CDR(*tmp4);
      } else if (tmp6 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp4 = mmc_mk_nil();
    tmpMeta3 = __omcQ_24tmpVar1;
  }
  tmpMeta2 = MMC_TAGPTR(mmc_alloc_words(6));
  memcpy(MMC_UNTAGPTR(tmpMeta2), MMC_UNTAGPTR(_entry), 6*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta2))[4] = tmpMeta3;
  _entry = tmpMeta2;
  _return: OMC_LABEL_UNUSED
  return _entry;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_replaceDuplicates3(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fentry, modelica_metatype _kept, modelica_metatype _tree)
{
  modelica_metatype _entry = NULL;
  modelica_metatype _node_ptr = NULL;
  modelica_metatype _node = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _entry = __omcQ_24in_5Fentry;
  // _node_ptr has no default value.
  // _node has no default value.
  _node_ptr = omc_NFClassTree_ClassTree_resolveEntryPtr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2))), _tree);

  _node = omc_Mutable_access(threadData, _node_ptr);

  tmpMeta1 = MMC_TAGPTR(mmc_alloc_words(6));
  memcpy(MMC_UNTAGPTR(tmpMeta1), MMC_UNTAGPTR(_entry), 6*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta1))[3] = mmc_mk_some(_node);
  _entry = tmpMeta1;

  omc_Mutable_update(threadData, _node_ptr, _kept);

  {
    modelica_metatype __omcQ_24tmpVar3;
    modelica_metatype* tmp4;
    modelica_metatype tmpMeta5;
    modelica_metatype __omcQ_24tmpVar2;
    modelica_integer tmp6;
    modelica_metatype _c_loopVar = 0;
    modelica_metatype _c;
    _c_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 4)));
    tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar3 = tmpMeta5; /* defaultValue */
    tmp4 = &__omcQ_24tmpVar3;
    while(1) {
      tmp6 = 1;
      if (!listEmpty(_c_loopVar)) {
        _c = MMC_CAR(_c_loopVar);
        _c_loopVar = MMC_CDR(_c_loopVar);
        tmp6--;
      }
      if (tmp6 == 0) {
        __omcQ_24tmpVar2 = omc_NFClassTree_ClassTree_replaceDuplicates3(threadData, _c, _kept, _tree);
        *tmp4 = mmc_mk_cons(__omcQ_24tmpVar2,0);
        tmp4 = &MMC_CDR(*tmp4);
      } else if (tmp6 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp4 = mmc_mk_nil();
    tmpMeta3 = __omcQ_24tmpVar3;
  }
  tmpMeta2 = MMC_TAGPTR(mmc_alloc_words(6));
  memcpy(MMC_UNTAGPTR(tmpMeta2), MMC_UNTAGPTR(_entry), 6*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta2))[4] = tmpMeta3;
  _entry = tmpMeta2;
  _return: OMC_LABEL_UNUSED
  return _entry;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_replaceDuplicates2(threadData_t *threadData, modelica_string _name, modelica_metatype __omcQ_24in_5Fentry, modelica_metatype _tree)
{
  modelica_metatype _entry = NULL;
  modelica_metatype _kept = NULL;
  modelica_metatype _node_ptr = NULL;
  modelica_metatype _children = NULL;
  modelica_metatype _kept_entry = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _entry = __omcQ_24in_5Fentry;
  // _kept has no default value.
  // _node_ptr has no default value.
  // _children has no default value.
  // _kept_entry has no default value.
  _node_ptr = omc_NFClassTree_ClassTree_resolveEntryPtr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2))), _tree);

  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 5)));
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 3; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_integer tmp5;
          tmp5 = mmc_unbox_integer(tmp3_1);
          if (2 != tmp5) goto tmp2_end;
          /* Pattern matching succeeded */
          _kept = omc_Mutable_access(threadData, omc_NFClassTree_ClassTree_resolveEntryPtr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2))), _tree));

          _entry = omc_NFClassTree_ClassTree_replaceDuplicates4(threadData, _entry, _kept);
          goto tmp2_done;
        }
        case 1: {
          modelica_integer tmp6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          tmp6 = mmc_unbox_integer(tmp3_1);
          if (1 != tmp6) goto tmp2_end;
          /* Pattern matching succeeded */
          _kept = omc_Mutable_access(threadData, _node_ptr);

          tmpMeta7 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta7), MMC_UNTAGPTR(_entry), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta7))[3] = mmc_mk_some(_kept);
          _entry = tmpMeta7;

          {
            modelica_metatype __omcQ_24tmpVar5;
            modelica_metatype* tmp10;
            modelica_metatype tmpMeta11;
            modelica_metatype __omcQ_24tmpVar4;
            modelica_integer tmp12;
            modelica_metatype _c_loopVar = 0;
            modelica_metatype _c;
            _c_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 4)));
            tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar5 = tmpMeta11; /* defaultValue */
            tmp10 = &__omcQ_24tmpVar5;
            while(1) {
              tmp12 = 1;
              if (!listEmpty(_c_loopVar)) {
                _c = MMC_CAR(_c_loopVar);
                _c_loopVar = MMC_CDR(_c_loopVar);
                tmp12--;
              }
              if (tmp12 == 0) {
                __omcQ_24tmpVar4 = omc_NFClassTree_ClassTree_replaceDuplicates3(threadData, _c, _kept, _tree);
                *tmp10 = mmc_mk_cons(__omcQ_24tmpVar4,0);
                tmp10 = &MMC_CDR(*tmp10);
              } else if (tmp12 == 1) {
                break;
              } else {
                goto goto_1;
              }
            }
            *tmp10 = mmc_mk_nil();
            tmpMeta9 = __omcQ_24tmpVar5;
          }
          tmpMeta8 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta8), MMC_UNTAGPTR(_entry), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta8))[4] = tmpMeta9;
          _entry = tmpMeta8;
          goto tmp2_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _entry;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_getRedeclareChain(threadData_t *threadData, modelica_metatype _entry, modelica_metatype _tree, modelica_metatype __omcQ_24in_5Fchain)
{
  modelica_metatype _chain = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _chain = __omcQ_24in_5Fchain;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 5)));
    {
      modelica_metatype _node_ptr = NULL;
      modelica_metatype _node = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _node_ptr has no default value.
      // _node has no default value.
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_integer tmp6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          tmp6 = mmc_unbox_integer(tmp4_1);
          if (2 != tmp6) goto tmp3_end;
          /* Pattern matching succeeded */
          _node_ptr = omc_NFClassTree_ClassTree_resolveEntryPtr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2))), _tree);

          if(listEmpty((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 4)))))
          {
            _node = omc_Mutable_access(threadData, _node_ptr);

            if(omc_SCodeUtil_isClassExtends(threadData, omc_NFInstNode_InstNode_definition(threadData, _node)))
            {
              tmpMeta7 = mmc_mk_cons(omc_NFInstNode_InstNode_name(threadData, _node), MMC_REFSTRUCTLIT(mmc_nil));
              omc_Error_addSourceMessage(threadData, _OMC_LIT17, tmpMeta7, omc_NFInstNode_InstNode_info(threadData, _node));
            }
            else
            {
              tmpMeta8 = mmc_mk_cons(omc_NFInstNode_InstNode_name(threadData, _node), MMC_REFSTRUCTLIT(mmc_nil));
              omc_Error_addSourceMessage(threadData, _OMC_LIT14, tmpMeta8, omc_NFInstNode_InstNode_info(threadData, _node));
            }

            goto goto_2;
          }
          tmpMeta9 = mmc_mk_cons(_node_ptr, _chain);
          /* Tail recursive call */
          _entry = listHead((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 4))));
          __omcQ_24in_5Fchain = tmpMeta9;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 1: {
          modelica_integer tmp10;
          modelica_metatype tmpMeta11;
          tmp10 = mmc_unbox_integer(tmp4_1);
          if (3 != tmp10) goto tmp3_end;
          /* Pattern matching succeeded */
          _node_ptr = omc_NFClassTree_ClassTree_resolveEntryPtr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2))), _tree);
          tmpMeta11 = mmc_mk_cons(_node_ptr, _chain);
          tmpMeta1 = tmpMeta11;
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _chain;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _chain = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _chain;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_mapRedeclareChain(threadData_t *threadData, modelica_string _name, modelica_metatype __omcQ_24in_5Fentry, modelica_fnptr _func, modelica_metatype _tree)
{
  modelica_metatype _entry = NULL;
  modelica_metatype _chain = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _entry = __omcQ_24in_5Fentry;
  // _chain has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _chain = omc_NFClassTree_ClassTree_getRedeclareChain(threadData, _entry, _tree, tmpMeta1);

  if((!listEmpty(_chain)))
  {
    (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _chain) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _chain);
  }
  _return: OMC_LABEL_UNUSED
  return _entry;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_enumerateDuplicates4(threadData_t *threadData, modelica_metatype _entry, modelica_metatype __omcQ_24in_5Fclasses, modelica_metatype __omcQ_24in_5Fcomponents, modelica_metatype *out_components)
{
  modelica_metatype _classes = NULL;
  modelica_metatype _components = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _classes = __omcQ_24in_5Fclasses;
  _components = __omcQ_24in_5Fcomponents;
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _entry;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta5;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          tmpMeta5 = mmc_mk_cons((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2))), _components);
          _components = tmpMeta5;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  if (out_components) { *out_components = _components; }
  return _classes;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_enumerateDuplicates3(threadData_t *threadData, modelica_metatype _entry, modelica_metatype __omcQ_24in_5Fclasses, modelica_metatype __omcQ_24in_5Fcomponents, modelica_metatype *out_components)
{
  modelica_metatype _classes = NULL;
  modelica_metatype _components = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _classes = __omcQ_24in_5Fclasses;
  _components = __omcQ_24in_5Fcomponents;
  _classes = omc_NFClassTree_ClassTree_enumerateDuplicates4(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2))), _classes, _components ,&_components);

  {
    modelica_metatype _c;
    for (tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 4))); !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _c = MMC_CAR(tmpMeta1);
      _classes = omc_NFClassTree_ClassTree_enumerateDuplicates3(threadData, _c, _classes, _components ,&_components);
    }
  }
  _return: OMC_LABEL_UNUSED
  if (out_components) { *out_components = _components; }
  return _classes;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_enumerateDuplicates2(threadData_t *threadData, modelica_string _name, modelica_metatype _entry, modelica_metatype __omcQ_24in_5Fclasses, modelica_metatype __omcQ_24in_5Fcomponents, modelica_metatype *out_components)
{
  modelica_metatype _classes = NULL;
  modelica_metatype _components = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _classes = __omcQ_24in_5Fclasses;
  _components = __omcQ_24in_5Fcomponents;
  {
    modelica_metatype _c;
    for (tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 4))); !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _c = MMC_CAR(tmpMeta1);
      _classes = omc_NFClassTree_ClassTree_enumerateDuplicates3(threadData, _c, _classes, _components ,&_components);
    }
  }
  _return: OMC_LABEL_UNUSED
  if (out_components) { *out_components = _components; }
  return _classes;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_enumerateDuplicates(threadData_t *threadData, modelica_metatype _duplicates, modelica_metatype *out_components)
{
  modelica_metatype _classes = NULL;
  modelica_metatype _components = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _classes has no default value.
  // _components has no default value.
  if(omc_NFDuplicateTree_isEmpty(threadData, _duplicates))
  {
    tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
    _classes = tmpMeta1;

    tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
    _components = tmpMeta2;
  }
  else
  {
    tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
    tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
    _classes = omc_NFDuplicateTree_fold__2(threadData, _duplicates, boxvar_NFClassTree_ClassTree_enumerateDuplicates2, tmpMeta3, tmpMeta4 ,&_components);

    _classes = omc_List_sort(threadData, _classes, boxvar_intGt);

    _components = omc_List_sort(threadData, _components, boxvar_intGt);
  }
  _return: OMC_LABEL_UNUSED
  if (out_components) { *out_components = _components; }
  return _classes;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_joinDuplicates(threadData_t *threadData, modelica_metatype _newEntry, modelica_metatype _oldEntry, modelica_string _name)
{
  modelica_metatype _entry = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _entry = _oldEntry;
  tmpMeta2 = mmc_mk_cons(_newEntry, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 4))));
  tmpMeta1 = MMC_TAGPTR(mmc_alloc_words(6));
  memcpy(MMC_UNTAGPTR(tmpMeta1), MMC_UNTAGPTR(_entry), 6*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta1))[4] = tmpMeta2;
  _entry = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _entry;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_offsetDuplicate(threadData_t *threadData, modelica_metatype _entry, modelica_integer _classOffset, modelica_integer _componentOffset)
{
  modelica_metatype _offsetEntry = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _offsetEntry has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _entry;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta6 = mmc_mk_box2(3, &NFLookupTree_Entry_CLASS__desc, mmc_mk_integer(mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2)))) + _classOffset));
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta7 = mmc_mk_box2(4, &NFLookupTree_Entry_COMPONENT__desc, mmc_mk_integer(mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2)))) + _componentOffset));
          tmpMeta1 = tmpMeta7;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _offsetEntry = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _offsetEntry;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_offsetDuplicate(threadData_t *threadData, modelica_metatype _entry, modelica_metatype _classOffset, modelica_metatype _componentOffset)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _offsetEntry = NULL;
  tmp1 = mmc_unbox_integer(_classOffset);
  tmp2 = mmc_unbox_integer(_componentOffset);
  _offsetEntry = omc_NFClassTree_ClassTree_offsetDuplicate(threadData, _entry, tmp1, tmp2);
  /* skip box _offsetEntry; NFLookupTree.Entry */
  return _offsetEntry;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_offsetDuplicates(threadData_t *threadData, modelica_string _name, modelica_metatype _entry, modelica_integer _classOffset, modelica_integer _componentOffset)
{
  modelica_metatype _offsetEntry = NULL;
  modelica_metatype _parent = NULL;
  modelica_metatype _children = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _offsetEntry has no default value.
  // _parent has no default value.
  // _children has no default value.
  _parent = omc_NFClassTree_ClassTree_offsetDuplicate(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2))), _classOffset, _componentOffset);

  {
    modelica_metatype __omcQ_24tmpVar7;
    modelica_metatype* tmp2;
    modelica_metatype tmpMeta3;
    modelica_metatype __omcQ_24tmpVar6;
    modelica_integer tmp4;
    modelica_metatype _c_loopVar = 0;
    modelica_metatype _c;
    _c_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 4)));
    tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar7 = tmpMeta3; /* defaultValue */
    tmp2 = &__omcQ_24tmpVar7;
    while(1) {
      tmp4 = 1;
      if (!listEmpty(_c_loopVar)) {
        _c = MMC_CAR(_c_loopVar);
        _c_loopVar = MMC_CDR(_c_loopVar);
        tmp4--;
      }
      if (tmp4 == 0) {
        __omcQ_24tmpVar6 = omc_NFClassTree_ClassTree_offsetDuplicates(threadData, _name, _c, _classOffset, _componentOffset);
        *tmp2 = mmc_mk_cons(__omcQ_24tmpVar6,0);
        tmp2 = &MMC_CDR(*tmp2);
      } else if (tmp4 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp2 = mmc_mk_nil();
    tmpMeta1 = __omcQ_24tmpVar7;
  }
  _children = tmpMeta1;

  tmpMeta5 = mmc_mk_box5(3, &NFDuplicateTree_Entry_ENTRY__desc, _parent, mmc_mk_none(), _children, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 5))));
  _offsetEntry = tmpMeta5;
  _return: OMC_LABEL_UNUSED
  return _offsetEntry;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_offsetDuplicates(threadData_t *threadData, modelica_metatype _name, modelica_metatype _entry, modelica_metatype _classOffset, modelica_metatype _componentOffset)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _offsetEntry = NULL;
  tmp1 = mmc_unbox_integer(_classOffset);
  tmp2 = mmc_unbox_integer(_componentOffset);
  _offsetEntry = omc_NFClassTree_ClassTree_offsetDuplicates(threadData, _name, _entry, tmp1, tmp2);
  /* skip box _offsetEntry; NFDuplicateTree.Entry */
  return _offsetEntry;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_addInheritedElementConflict(threadData_t *threadData, modelica_metatype _newEntry, modelica_metatype _oldEntry, modelica_string _name, modelica_metatype _duplicates, modelica_metatype _extDuplicates)
{
  modelica_metatype _entry = NULL;
  modelica_metatype _dups = NULL;
  modelica_metatype _opt_dup_entry = NULL;
  modelica_metatype _dup_entry = NULL;
  modelica_integer _new_id;
  modelica_integer _old_id;
  modelica_integer _ty;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _entry has no default value.
  // _dups has no default value.
  // _opt_dup_entry has no default value.
  // _dup_entry has no default value.
  _new_id = omc_NFLookupTree_Entry_index(threadData, _newEntry);
  _old_id = omc_NFLookupTree_Entry_index(threadData, _oldEntry);
  // _ty has no default value.
  if(omc_NFLookupTree_Entry_isImport(threadData, _oldEntry))
  {
    _entry = _newEntry;

    goto _return;
  }

  _dups = omc_Mutable_access(threadData, _duplicates);

  _opt_dup_entry = omc_NFDuplicateTree_getOpt(threadData, _dups, _name);

  if(isNone(_opt_dup_entry))
  {
    if((_new_id < _old_id))
    {
      _entry = _newEntry;

      _dup_entry = omc_NFDuplicateTree_newDuplicate(threadData, _newEntry, _oldEntry);
    }
    else
    {
      _entry = _oldEntry;

      _dup_entry = omc_NFDuplicateTree_newDuplicate(threadData, _oldEntry, _newEntry);
    }

    _dups = omc_NFDuplicateTree_add(threadData, _dups, _name, _dup_entry, boxvar_NFDuplicateTree_addConflictDefault);

    omc_Mutable_update(threadData, _duplicates, _dups);
  }
  else
  {
    /* Pattern-matching assignment */
    tmpMeta1 = _opt_dup_entry;
    if (optionNone(tmpMeta1)) MMC_THROW_INTERNAL();
    tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
    _dup_entry = tmpMeta2;

    _ty = mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dup_entry), 5))));

    if((!omc_NFDuplicateTree_idExistsInEntry(threadData, _newEntry, _dup_entry)))
    {
      if(((modelica_integer)_ty == 2))
      {
        _entry = _newEntry;

        tmpMeta4 = mmc_mk_cons(omc_NFDuplicateTree_newEntry(threadData, _newEntry), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dup_entry), 4))));
        tmpMeta3 = MMC_TAGPTR(mmc_alloc_words(6));
        memcpy(MMC_UNTAGPTR(tmpMeta3), MMC_UNTAGPTR(_dup_entry), 6*sizeof(modelica_metatype));
        ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta3))[4] = tmpMeta4;
        _dup_entry = tmpMeta3;
      }
      else
      {
        if((_new_id < _old_id))
        {
          _entry = _newEntry;

          tmpMeta5 = mmc_mk_cons(omc_NFDuplicateTree_newEntry(threadData, _oldEntry), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dup_entry), 4))));
          tmpMeta6 = mmc_mk_box5(3, &NFDuplicateTree_Entry_ENTRY__desc, _newEntry, mmc_mk_none(), tmpMeta5, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dup_entry), 5))));
          _dup_entry = tmpMeta6;
        }
        else
        {
          _entry = _oldEntry;

          tmpMeta8 = mmc_mk_cons(omc_NFDuplicateTree_newEntry(threadData, _newEntry), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dup_entry), 4))));
          tmpMeta7 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta7), MMC_UNTAGPTR(_dup_entry), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta7))[4] = tmpMeta8;
          _dup_entry = tmpMeta7;
        }
      }

      _dups = omc_NFDuplicateTree_update(threadData, _dups, _name, _dup_entry);

      omc_Mutable_update(threadData, _duplicates, _dups);
    }
    else
    {
      if((!omc_NFDuplicateTree_idExistsInEntry(threadData, _oldEntry, _dup_entry)))
      {
        if((((modelica_integer)_ty == 2) || (_new_id < _old_id)))
        {
          _entry = _newEntry;

          tmpMeta10 = mmc_mk_cons(omc_NFDuplicateTree_newEntry(threadData, _oldEntry), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dup_entry), 4))));
          tmpMeta9 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta9), MMC_UNTAGPTR(_dup_entry), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta9))[4] = tmpMeta10;
          _dup_entry = tmpMeta9;
        }
        else
        {
          _entry = _newEntry;

          tmpMeta11 = mmc_mk_cons(omc_NFDuplicateTree_newEntry(threadData, _oldEntry), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dup_entry), 4))));
          tmpMeta12 = mmc_mk_box5(3, &NFDuplicateTree_Entry_ENTRY__desc, _newEntry, mmc_mk_none(), tmpMeta11, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dup_entry), 5))));
          _dup_entry = tmpMeta12;
        }

        _dups = omc_NFDuplicateTree_update(threadData, _dups, _name, _dup_entry);

        omc_Mutable_update(threadData, _duplicates, _dups);
      }
      else
      {
        _entry = ((_new_id < _old_id)?_newEntry:_oldEntry);
      }
    }
  }
  _return: OMC_LABEL_UNUSED
  return _entry;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_addInheritedElement(threadData_t *threadData, modelica_string _name, modelica_metatype _entry, modelica_integer _classOffset, modelica_integer _componentOffset, modelica_fnptr _conflictFunc, modelica_metatype __omcQ_24in_5Ftree)
{
  modelica_metatype _tree = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = __omcQ_24in_5Ftree;
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _entry;
    {
      int tmp3;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
        case 3: {
          modelica_metatype tmpMeta4;
          
          /* Pattern matching succeeded */
          tmpMeta4 = MMC_TAGPTR(mmc_alloc_words(3));
          memcpy(MMC_UNTAGPTR(tmpMeta4), MMC_UNTAGPTR(_entry), 3*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta4))[2] = mmc_mk_integer(mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2)))) + _classOffset);
          _entry = tmpMeta4;

          _tree = omc_NFLookupTree_add(threadData, _tree, _name, _entry, ((modelica_fnptr) _conflictFunc));
          goto tmp2_done;
        }
        case 4: {
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          tmpMeta5 = MMC_TAGPTR(mmc_alloc_words(3));
          memcpy(MMC_UNTAGPTR(tmpMeta5), MMC_UNTAGPTR(_entry), 3*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta5))[2] = mmc_mk_integer(mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2)))) + _componentOffset);
          _entry = tmpMeta5;

          _tree = omc_NFLookupTree_add(threadData, _tree, _name, _entry, ((modelica_fnptr) _conflictFunc));
          goto tmp2_done;
        }
        default:
        tmp2_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _tree;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_addInheritedElement(threadData_t *threadData, modelica_metatype _name, modelica_metatype _entry, modelica_metatype _classOffset, modelica_metatype _componentOffset, modelica_fnptr _conflictFunc, modelica_metatype __omcQ_24in_5Ftree)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _tree = NULL;
  tmp1 = mmc_unbox_integer(_classOffset);
  tmp2 = mmc_unbox_integer(_componentOffset);
  _tree = omc_NFClassTree_ClassTree_addInheritedElement(threadData, _name, _entry, tmp1, tmp2, _conflictFunc, __omcQ_24in_5Ftree);
  /* skip box _tree; NFLookupTree.Tree */
  return _tree;
}

static modelica_metatype closure0_NFClassTree_ClassTree_offsetDuplicates(threadData_t *thData, modelica_metatype closure, modelica_string name, modelica_metatype entry)
{
  modelica_metatype classOffset = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype componentOffset = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NFClassTree_ClassTree_offsetDuplicates(thData, name, entry, classOffset, componentOffset);
}static modelica_metatype closure1_NFClassTree_ClassTree_addInheritedElementConflict(threadData_t *thData, modelica_metatype closure, modelica_metatype newEntry, modelica_metatype oldEntry, modelica_string name)
{
  modelica_metatype duplicates = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype extDuplicates = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NFClassTree_ClassTree_addInheritedElementConflict(thData, newEntry, oldEntry, name, duplicates, extDuplicates);
}static modelica_metatype closure2_NFClassTree_ClassTree_addInheritedElement(threadData_t *thData, modelica_metatype closure, modelica_string name, modelica_metatype entry, modelica_metatype $in_tree)
{
  modelica_metatype classOffset = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype componentOffset = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  modelica_fnptr conflictFunc = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),3));
  return boxptr_NFClassTree_ClassTree_addInheritedElement(thData, name, entry, classOffset, componentOffset, conflictFunc, $in_tree);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_expandExtends(threadData_t *threadData, modelica_metatype _extendsNode, modelica_metatype __omcQ_24in_5Ftree, modelica_integer _classOffset, modelica_integer _componentOffset, modelica_metatype _duplicates)
{
  modelica_metatype _tree = NULL;
  modelica_metatype _cls_tree = NULL;
  modelica_metatype _ext_tree = NULL;
  modelica_metatype _ext_dups = NULL;
  modelica_metatype _dups = NULL;
  modelica_fnptr _conf_func;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = __omcQ_24in_5Ftree;
  // _cls_tree has no default value.
  // _ext_tree has no default value.
  // _ext_dups has no default value.
  // _dups has no default value.
  _cls_tree = omc_NFClass_classTree(threadData, omc_NFInstNode_InstNode_getClass(threadData, _extendsNode));

  
  
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _cls_tree;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls_tree), 2)));
          tmpMeta[0+1] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls_tree), 7)));
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls_tree), 2)));
          tmpMeta[0+1] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls_tree), 6)));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          goto _return;
          tmpMeta[0+0] = _tree;
          tmpMeta[0+1] = omc_NFDuplicateTree_new(threadData);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _ext_tree = tmpMeta[0+0];
  _ext_dups = tmpMeta[0+1];

  if((!omc_NFDuplicateTree_isEmpty(threadData, _ext_dups)))
  {
    tmpMeta5 = mmc_mk_box2(0, mmc_mk_integer(_classOffset), mmc_mk_integer(_componentOffset));
    _dups = omc_NFDuplicateTree_map(threadData, _ext_dups, (modelica_fnptr) mmc_mk_box2(0,closure0_NFClassTree_ClassTree_offsetDuplicates,tmpMeta5));

    _dups = omc_NFDuplicateTree_join(threadData, omc_Mutable_access(threadData, _duplicates), _dups, boxvar_NFClassTree_ClassTree_joinDuplicates);

    omc_Mutable_update(threadData, _duplicates, _dups);
  }

  tmpMeta6 = mmc_mk_box2(0, _duplicates, _ext_dups);
  _conf_func = (modelica_fnptr) (modelica_fnptr) mmc_mk_box2(0,closure1_NFClassTree_ClassTree_addInheritedElementConflict,tmpMeta6);

  tmpMeta7 = mmc_mk_box3(0, mmc_mk_integer(_classOffset), mmc_mk_integer(_componentOffset), ((modelica_fnptr) _conf_func));
  _tree = omc_NFLookupTree_fold(threadData, _ext_tree, (modelica_fnptr) mmc_mk_box2(0,closure2_NFClassTree_ClassTree_addInheritedElement,tmpMeta7), _tree);
  _return: OMC_LABEL_UNUSED
  return _tree;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_expandExtends(threadData_t *threadData, modelica_metatype _extendsNode, modelica_metatype __omcQ_24in_5Ftree, modelica_metatype _classOffset, modelica_metatype _componentOffset, modelica_metatype _duplicates)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _tree = NULL;
  tmp1 = mmc_unbox_integer(_classOffset);
  tmp2 = mmc_unbox_integer(_componentOffset);
  _tree = omc_NFClassTree_ClassTree_expandExtends(threadData, _extendsNode, __omcQ_24in_5Ftree, tmp1, tmp2, _duplicates);
  /* skip box _tree; NFLookupTree.Tree */
  return _tree;
}

PROTECTED_FUNCTION_STATIC modelica_integer omc_NFClassTree_ClassTree_countInheritedElements(threadData_t *threadData, modelica_metatype _extendsNode, modelica_integer __omcQ_24in_5FclassCount, modelica_integer __omcQ_24in_5FcomponentCount, modelica_integer *out_componentCount)
{
  modelica_integer _classCount;
  modelica_integer _componentCount;
  modelica_metatype _clss = NULL;
  modelica_metatype _comps = NULL;
  modelica_metatype _exts = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _classCount = __omcQ_24in_5FclassCount;
  _componentCount = __omcQ_24in_5FcomponentCount;
  // _clss has no default value.
  // _comps has no default value.
  // _exts has no default value.
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = omc_NFClass_classTree(threadData, omc_NFInstNode_InstNode_getClass(threadData, _extendsNode));
    {
      int tmp3;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
        case 4: {
          modelica_metatype tmpMeta4;
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_integer tmp9;
          modelica_integer tmp10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,6) == 0) goto tmp2_end;
          tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
          
          _clss = tmpMeta4;
          _comps = tmpMeta5;
          _exts = tmpMeta6;
          /* Pattern matching succeeded */
          _componentCount = _componentCount + arrayLength(_comps) - arrayLength(_exts);

          _classCount = _classCount + arrayLength(_clss);

          {
            modelica_metatype _ext;
            for (tmpMeta7 = _exts, tmp10 = arrayLength(tmpMeta7), tmp9 = 1; tmp9 <= tmp10; tmp9++)
            {
              _ext = arrayGet(tmpMeta7,tmp9);
              _classCount = omc_NFClassTree_ClassTree_countInheritedElements(threadData, _ext, _classCount, _componentCount ,&_componentCount);
            }
          }
          goto tmp2_done;
        }
        case 6: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,5) == 0) goto tmp2_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
          
          _clss = tmpMeta11;
          _comps = tmpMeta12;
          /* Pattern matching succeeded */
          _componentCount = _componentCount + arrayLength(_comps);

          _classCount = _classCount + arrayLength(_clss);
          goto tmp2_done;
        }
        default:
        tmp2_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  if (out_componentCount) { *out_componentCount = _componentCount; }
  return _classCount;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_countInheritedElements(threadData_t *threadData, modelica_metatype _extendsNode, modelica_metatype __omcQ_24in_5FclassCount, modelica_metatype __omcQ_24in_5FcomponentCount, modelica_metatype *out_componentCount)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer _componentCount;
  modelica_integer _classCount;
  modelica_metatype out_classCount;
  tmp1 = mmc_unbox_integer(__omcQ_24in_5FclassCount);
  tmp2 = mmc_unbox_integer(__omcQ_24in_5FcomponentCount);
  _classCount = omc_NFClassTree_ClassTree_countInheritedElements(threadData, _extendsNode, tmp1, tmp2, &_componentCount);
  out_classCount = mmc_mk_icon(_classCount);
  if (out_componentCount) { *out_componentCount = mmc_mk_icon(_componentCount); }
  return out_classCount;
}

PROTECTED_FUNCTION_STATIC modelica_integer omc_NFClassTree_ClassTree_countElements(threadData_t *threadData, modelica_metatype _elements, modelica_integer *out_compCount, modelica_integer *out_extCount)
{
  modelica_integer _classCount;
  modelica_integer _compCount;
  modelica_integer _extCount;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _classCount = ((modelica_integer) 0);
  _compCount = ((modelica_integer) 0);
  _extCount = ((modelica_integer) 0);
  {
    modelica_metatype _e;
    for (tmpMeta1 = _elements; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _e = MMC_CAR(tmpMeta1);
      { /* match expression */
        modelica_metatype tmp4_1;
        tmp4_1 = _e;
        {
          int tmp4;
          {
            switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
            case 5: {
              
              /* Pattern matching succeeded */
              _classCount = ((modelica_integer) 1) + _classCount;
              goto tmp3_done;
            }
            case 6: {
              
              /* Pattern matching succeeded */
              _compCount = ((modelica_integer) 1) + _compCount;
              goto tmp3_done;
            }
            case 4: {
              
              /* Pattern matching succeeded */
              _extCount = ((modelica_integer) 1) + _extCount;
              goto tmp3_done;
            }
            default:
            tmp3_default: OMC_LABEL_UNUSED; {
              
              /* Pattern matching succeeded */
              goto tmp3_done;
            }
            }
            goto tmp3_end;
            tmp3_end: ;
          }
          goto goto_2;
          goto_2:;
          MMC_THROW_INTERNAL();
          goto tmp3_done;
          tmp3_done:;
        }
      }
      ;
    }
  }
  _return: OMC_LABEL_UNUSED
  if (out_compCount) { *out_compCount = _compCount; }
  if (out_extCount) { *out_extCount = _extCount; }
  return _classCount;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_countElements(threadData_t *threadData, modelica_metatype _elements, modelica_metatype *out_compCount, modelica_metatype *out_extCount)
{
  modelica_integer _compCount;
  modelica_integer _extCount;
  modelica_integer _classCount;
  modelica_metatype out_classCount;
  _classCount = omc_NFClassTree_ClassTree_countElements(threadData, _elements, &_compCount, &_extCount);
  out_classCount = mmc_mk_icon(_classCount);
  if (out_compCount) { *out_compCount = mmc_mk_icon(_compCount); }
  if (out_extCount) { *out_extCount = mmc_mk_icon(_extCount); }
  return out_classCount;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_resolveImport(threadData_t *threadData, modelica_integer _index, modelica_metatype _tree)
{
  modelica_metatype _element = NULL;
  modelica_metatype _imports = NULL;
  modelica_metatype _imp = NULL;
  modelica_boolean _changed;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _element has no default value.
  // _imports has no default value.
  // _imp has no default value.
  // _changed has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 6)));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 6)));
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 7)));
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 5)));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _imports = tmpMeta1;

  _element = omc_NFImport_resolve(threadData, arrayGet(_imports,_index) /* DAE.ASUB */ ,&_changed ,&_imp);

  if(_changed)
  {
    arrayUpdate(_imports, _index, _imp);
  }
  _return: OMC_LABEL_UNUSED
  return _element;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_resolveImport(threadData_t *threadData, modelica_metatype _index, modelica_metatype _tree)
{
  modelica_integer tmp1;
  modelica_metatype _element = NULL;
  tmp1 = mmc_unbox_integer(_index);
  _element = omc_NFClassTree_ClassTree_resolveImport(threadData, tmp1, _tree);
  /* skip box _element; NFInstNode.InstNode */
  return _element;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_resolveComponent(threadData_t *threadData, modelica_integer _index, modelica_metatype _tree)
{
  modelica_metatype _element = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _element has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,7) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_Mutable_access(threadData, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), _index));
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,5) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), _index);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _element = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _element;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_resolveComponent(threadData_t *threadData, modelica_metatype _index, modelica_metatype _tree)
{
  modelica_integer tmp1;
  modelica_metatype _element = NULL;
  tmp1 = mmc_unbox_integer(_index);
  _element = omc_NFClassTree_ClassTree_resolveComponent(threadData, tmp1, _tree);
  /* skip box _element; NFInstNode.InstNode */
  return _element;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_resolveClass(threadData_t *threadData, modelica_integer _index, modelica_metatype _tree)
{
  modelica_metatype _element = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _element has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), _index);
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), _index);
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_Mutable_access(threadData, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), _index));
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), _index);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _element = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _element;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_resolveClass(threadData_t *threadData, modelica_metatype _index, modelica_metatype _tree)
{
  modelica_integer tmp1;
  modelica_metatype _element = NULL;
  tmp1 = mmc_unbox_integer(_index);
  _element = omc_NFClassTree_ClassTree_resolveClass(threadData, tmp1, _tree);
  /* skip box _element; NFInstNode.InstNode */
  return _element;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_resolveDuplicateEntriesPtr(threadData_t *threadData, modelica_metatype _entry, modelica_metatype _tree, modelica_metatype __omcQ_24in_5Felements)
{
  modelica_metatype _elements = NULL;
  modelica_metatype _node_ptr = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _elements = __omcQ_24in_5Felements;
  // _node_ptr has no default value.
  _node_ptr = omc_NFClassTree_ClassTree_resolveEntryPtr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2))), _tree);

  tmpMeta1 = mmc_mk_cons(_node_ptr, _elements);
  _elements = tmpMeta1;

  {
    modelica_metatype _child;
    for (tmpMeta2 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 4))); !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
    {
      _child = MMC_CAR(tmpMeta2);
      _elements = omc_NFClassTree_ClassTree_resolveDuplicateEntriesPtr(threadData, _child, _tree, _elements);
    }
  }
  _return: OMC_LABEL_UNUSED
  return _elements;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_resolveEntryPtr(threadData_t *threadData, modelica_metatype _entry, modelica_metatype _tree)
{
  modelica_metatype _element = NULL;
  modelica_metatype _elems = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _element has no default value.
  // _elems has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _entry;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta6 = _tree;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,2,7) == 0) goto goto_2;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
          _elems = tmpMeta7;
          tmpMeta1 = arrayGet(_elems, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2)))));
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta8 = _tree;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,2,7) == 0) goto goto_2;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 4));
          _elems = tmpMeta9;
          tmpMeta1 = arrayGet(_elems, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2)))));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _element = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _element;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_resolveEntry(threadData_t *threadData, modelica_metatype _entry, modelica_metatype _tree, modelica_boolean *out_isImport)
{
  modelica_metatype _element = NULL;
  modelica_boolean _isImport;
  modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _element has no default value.
  // _isImport has no default value.
  
  
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _entry;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_NFClassTree_ClassTree_resolveClass(threadData, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2)))), _tree);
          tmp1_c1 = 0 /* false */;
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_NFClassTree_ClassTree_resolveComponent(threadData, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2)))), _tree);
          tmp1_c1 = 0 /* false */;
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = omc_NFClassTree_ClassTree_resolveImport(threadData, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2)))), _tree);
          tmp1_c1 = 1 /* true */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _element = tmpMeta[0+0];
  _isImport = tmp1_c1;
  _return: OMC_LABEL_UNUSED
  if (out_isImport) { *out_isImport = _isImport; }
  return _element;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_resolveEntry(threadData_t *threadData, modelica_metatype _entry, modelica_metatype _tree, modelica_metatype *out_isImport)
{
  modelica_boolean _isImport;
  modelica_metatype _element = NULL;
  _element = omc_NFClassTree_ClassTree_resolveEntry(threadData, _entry, _tree, &_isImport);
  /* skip box _element; NFInstNode.InstNode */
  if (out_isImport) { *out_isImport = mmc_mk_icon(_isImport); }
  return _element;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_addDuplicateConflict(threadData_t *threadData, modelica_metatype _newEntry, modelica_metatype _oldEntry, modelica_string _name)
{
  modelica_metatype _entry = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _entry has no default value.
  tmpMeta1 = mmc_mk_cons(listHead((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_newEntry), 4)))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_oldEntry), 4))));
  tmpMeta2 = mmc_mk_box5(3, &NFDuplicateTree_Entry_ENTRY__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_newEntry), 2))), mmc_mk_none(), tmpMeta1, mmc_mk_integer(1));
  _entry = tmpMeta2;
  _return: OMC_LABEL_UNUSED
  return _entry;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_addDuplicate(threadData_t *threadData, modelica_string _name, modelica_metatype _duplicateEntry, modelica_metatype _keptEntry, modelica_metatype __omcQ_24in_5Fduplicates)
{
  modelica_metatype _duplicates = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _duplicates = __omcQ_24in_5Fduplicates;
  omc_Mutable_update(threadData, _duplicates, omc_NFDuplicateTree_add(threadData, omc_Mutable_access(threadData, _duplicates), _name, omc_NFDuplicateTree_newDuplicate(threadData, _keptEntry, _duplicateEntry), boxvar_NFClassTree_ClassTree_addDuplicateConflict));
  _return: OMC_LABEL_UNUSED
  return _duplicates;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_addImportConflict(threadData_t *threadData, modelica_metatype _newEntry, modelica_metatype _oldEntry, modelica_string _name, modelica_metatype _imports)
{
  modelica_metatype _entry = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _entry has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _newEntry;
    tmp4_2 = _oldEntry;
    {
      modelica_metatype _imp1 = NULL;
      modelica_metatype _imp2 = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _imp1 has no default value.
      // _imp2 has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _imp1 = arrayGet(_imports,mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_newEntry), 2))))) /* DAE.ASUB */;

          _imp2 = arrayGet(_imports,mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_oldEntry), 2))))) /* DAE.ASUB */;
          { /* match expression */
            modelica_metatype tmp9_1;modelica_metatype tmp9_2;
            tmp9_1 = _imp1;
            tmp9_2 = _imp2;
            {
              volatile mmc_switch_type tmp9;
              int tmp10;
              tmp9 = 0;
              for (; tmp9 < 4; tmp9++) {
                switch (MMC_SWITCH_CAST(tmp9)) {
                case 0: {
                  modelica_metatype tmpMeta11;
                  if (mmc__uniontype__metarecord__typedef__equal(tmp9_1,0,3) == 0) goto tmp8_end;
                  if (mmc__uniontype__metarecord__typedef__equal(tmp9_2,0,3) == 0) goto tmp8_end;
                  
                  /* Pattern matching succeeded */
                  tmpMeta11 = mmc_mk_box3(5, &NFImport_CONFLICTING__IMPORT__desc, _imp1, _imp2);
                  arrayUpdate(_imports, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_oldEntry), 2)))), tmpMeta11);
                  tmpMeta6 = _oldEntry;
                  goto tmp8_done;
                }
                case 1: {
                  modelica_metatype tmpMeta12;
                  if (mmc__uniontype__metarecord__typedef__equal(tmp9_1,1,3) == 0) goto tmp8_end;
                  if (mmc__uniontype__metarecord__typedef__equal(tmp9_2,1,3) == 0) goto tmp8_end;
                  
                  /* Pattern matching succeeded */
                  tmpMeta12 = mmc_mk_box3(5, &NFImport_CONFLICTING__IMPORT__desc, _imp1, _imp2);
                  arrayUpdate(_imports, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_oldEntry), 2)))), tmpMeta12);
                  tmpMeta6 = _oldEntry;
                  goto tmp8_done;
                }
                case 2: {
                  if (mmc__uniontype__metarecord__typedef__equal(tmp9_1,0,3) == 0) goto tmp8_end;
                  
                  /* Pattern matching succeeded */
                  tmpMeta6 = _newEntry;
                  goto tmp8_done;
                }
                case 3: {
                  
                  /* Pattern matching succeeded */
                  tmpMeta6 = _oldEntry;
                  goto tmp8_done;
                }
                }
                goto tmp8_end;
                tmp8_end: ;
              }
              goto goto_7;
              goto_7:;
              goto goto_2;
              goto tmp8_done;
              tmp8_done:;
            }
          }tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _oldEntry;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _entry = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _entry;
}

static modelica_metatype closure3_NFClassTree_ClassTree_addImportConflict(threadData_t *thData, modelica_metatype closure, modelica_metatype newEntry, modelica_metatype oldEntry, modelica_string name)
{
  modelica_metatype imports = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFClassTree_ClassTree_addImportConflict(thData, newEntry, oldEntry, name, imports);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_addImport(threadData_t *threadData, modelica_metatype _imp, modelica_integer _index, modelica_metatype __omcQ_24in_5Ftree, modelica_metatype _imports)
{
  modelica_metatype _tree = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = __omcQ_24in_5Ftree;
  tmpMeta1 = mmc_mk_box2(5, &NFLookupTree_Entry_IMPORT__desc, mmc_mk_integer(_index));
  tmpMeta2 = mmc_mk_box1(0, _imports);
  _tree = omc_NFLookupTree_add(threadData, _tree, omc_NFImport_name(threadData, _imp), tmpMeta1, (modelica_fnptr) mmc_mk_box2(0,closure3_NFClassTree_ClassTree_addImportConflict,tmpMeta2));
  _return: OMC_LABEL_UNUSED
  return _tree;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_addImport(threadData_t *threadData, modelica_metatype _imp, modelica_metatype _index, modelica_metatype __omcQ_24in_5Ftree, modelica_metatype _imports)
{
  modelica_integer tmp1;
  modelica_metatype _tree = NULL;
  tmp1 = mmc_unbox_integer(_index);
  _tree = omc_NFClassTree_ClassTree_addImport(threadData, _imp, tmp1, __omcQ_24in_5Ftree, _imports);
  /* skip box _tree; NFLookupTree.Tree */
  return _tree;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_addEnumConflict(threadData_t *threadData, modelica_metatype _newEntry, modelica_metatype _oldEntry, modelica_string _name, modelica_metatype _literal)
{
  modelica_metatype _entry = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _entry has no default value.
  tmpMeta1 = mmc_mk_cons(omc_NFInstNode_InstNode_name(threadData, _literal), MMC_REFSTRUCTLIT(mmc_nil));
  omc_Error_addSourceMessage(threadData, _OMC_LIT20, tmpMeta1, omc_NFInstNode_InstNode_info(threadData, _literal));

  MMC_THROW_INTERNAL();
  _return: OMC_LABEL_UNUSED
  return _entry;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_findLocalConflictElement(threadData_t *threadData, modelica_metatype _entry, modelica_metatype _classTree)
{
  modelica_metatype _node = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _node has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _entry;
    {
      modelica_metatype _comps = NULL;
      modelica_metatype _exts = NULL;
      modelica_integer _i;
      int tmp4;
      // _comps has no default value.
      // _exts has no default value.
      // _i has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFClassTree_ClassTree_resolveClass(threadData, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2)))), _classTree);
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_integer tmp9 = 0;
          modelica_metatype tmpMeta14;
          modelica_integer tmp15;
          modelica_integer tmp16;
          
          /* Pattern matching succeeded */
          _i = ((modelica_integer) 0);

          /* Pattern-matching assignment */
          tmpMeta5 = _classTree;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta5,0,6) == 0) goto goto_2;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 4));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 5));
          _comps = tmpMeta6;
          _exts = tmpMeta7;

          {
            modelica_metatype _c;
            for (tmpMeta8 = _comps, tmp16 = arrayLength(tmpMeta8), tmp15 = 1; tmp15 <= tmp16; tmp15++)
            {
              _c = arrayGet(tmpMeta8,tmp15);
              { /* match expression */
                modelica_metatype tmp12_1;
                tmp12_1 = _c;
                {
                  volatile mmc_switch_type tmp12;
                  int tmp13;
                  tmp12 = 0;
                  for (; tmp12 < 2; tmp12++) {
                    switch (MMC_SWITCH_CAST(tmp12)) {
                    case 0: {
                      if (mmc__uniontype__metarecord__typedef__equal(tmp12_1,1,6) == 0) goto tmp11_end;
                      
                      /* Pattern matching succeeded */
                      tmp9 = ((modelica_integer) 1) + _i;
                      goto tmp11_done;
                    }
                    case 1: {
                      if (mmc__uniontype__metarecord__typedef__equal(tmp12_1,3,1) == 0) goto tmp11_end;
                      
                      /* Pattern matching succeeded */
                      omc_NFClassTree_ClassTree_countInheritedElements(threadData, arrayGet(_exts,mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 2))))) /* DAE.ASUB */, ((modelica_integer) 0), _i ,&_i);
                      tmp9 = _i;
                      goto tmp11_done;
                    }
                    }
                    goto tmp11_end;
                    tmp11_end: ;
                  }
                  goto goto_10;
                  goto_10:;
                  goto goto_2;
                  goto tmp11_done;
                  tmp11_done:;
                }
              }
              _i = tmp9;

              if((_i == mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2))))))
              {
                _node = _c;

                break;
              }
            }
          }

          omc_Error_assertion(threadData, (_i == mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2))))), _OMC_LIT21, _OMC_LIT23);
          tmpMeta1 = _node;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          omc_Error_assertion(threadData, 0 /* false */, _OMC_LIT24, _OMC_LIT25);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _node = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _node;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_addLocalElementConflict(threadData_t *threadData, modelica_metatype _newEntry, modelica_metatype _oldEntry, modelica_string _name, modelica_metatype _classTree)
{
  modelica_metatype _entry = NULL;
  modelica_metatype _n1 = NULL;
  modelica_metatype _n2 = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _entry has no default value.
  // _n1 has no default value.
  // _n2 has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _oldEntry;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = _newEntry;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          
          /* Pattern matching succeeded */
          _n1 = omc_NFClassTree_ClassTree_findLocalConflictElement(threadData, _newEntry, _classTree);

          _n2 = omc_NFClassTree_ClassTree_findLocalConflictElement(threadData, _oldEntry, _classTree);

          tmpMeta6 = mmc_mk_cons(_name, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta7 = mmc_mk_cons(omc_NFInstNode_InstNode_info(threadData, _n2), mmc_mk_cons(omc_NFInstNode_InstNode_info(threadData, _n1), MMC_REFSTRUCTLIT(mmc_nil)));
          omc_Error_addMultiSourceMessage(threadData, _OMC_LIT20, tmpMeta6, tmpMeta7);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _entry = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _entry;
}

static modelica_metatype closure4_NFClassTree_ClassTree_addLocalElementConflict(threadData_t *thData, modelica_metatype closure, modelica_metatype newEntry, modelica_metatype oldEntry, modelica_string name)
{
  modelica_metatype classTree = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFClassTree_ClassTree_addLocalElementConflict(thData, newEntry, oldEntry, name, classTree);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_addLocalElement(threadData_t *threadData, modelica_string _name, modelica_metatype _entry, modelica_metatype _classTree, modelica_metatype __omcQ_24in_5Ftree)
{
  modelica_metatype _tree = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = __omcQ_24in_5Ftree;
  tmpMeta1 = mmc_mk_box1(0, _classTree);
  _tree = omc_NFLookupTree_add(threadData, _tree, _name, _entry, (modelica_fnptr) mmc_mk_box2(0,closure4_NFClassTree_ClassTree_addLocalElementConflict,tmpMeta1));
  _return: OMC_LABEL_UNUSED
  return _tree;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_lookupTree(threadData_t *threadData, modelica_metatype _ctree)
{
  modelica_metatype _ltree = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _ltree has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _ctree;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_ctree), 2)));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_ctree), 2)));
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_ctree), 2)));
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_ctree), 2)));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _ltree = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _ltree;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFClassTree_ClassTree_getDuplicates(threadData_t *threadData, modelica_metatype _tree)
{
  modelica_metatype _duplicates = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _duplicates has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 7)));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 7)));
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 8)));
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 6)));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _duplicates = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _duplicates;
}

PROTECTED_FUNCTION_STATIC modelica_integer omc_NFClassTree_ClassTree_instExtendsComps(threadData_t *threadData, modelica_metatype _extNode, modelica_metatype _comps, modelica_integer __omcQ_24in_5Findex)
{
  modelica_integer _index;
  modelica_metatype _ext_comps_ptrs = NULL;
  modelica_metatype _ext_comps = NULL;
  modelica_integer _comp_count;
  modelica_metatype _ext_comp = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _index = __omcQ_24in_5Findex;
  // _ext_comps_ptrs has no default value.
  // _ext_comps has no default value.
  // _comp_count has no default value.
  // _ext_comp has no default value.
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = omc_NFClass_classTree(threadData, omc_NFInstNode_InstNode_getClass(threadData, _extNode));
    {
      int tmp3;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
        case 5: {
          modelica_metatype tmpMeta4;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,7) == 0) goto tmp2_end;
          tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
          
          _ext_comps_ptrs = tmpMeta4;
          /* Pattern matching succeeded */
          _comp_count = arrayLength(_ext_comps_ptrs);

          if((_comp_count > ((modelica_integer) 0)))
          {
            omc_Array_copyRange(threadData, _ext_comps_ptrs, _comps, ((modelica_integer) 1), _comp_count, _index);

            _index = _index + _comp_count;
          }
          goto tmp2_done;
        }
        case 6: {
          modelica_metatype tmpMeta5;
          modelica_integer tmp6;
          modelica_integer tmp7;
          modelica_integer tmp8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,5) == 0) goto tmp2_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
          
          _ext_comps = tmpMeta5;
          /* Pattern matching succeeded */
          _comp_count = arrayLength(_ext_comps);

          if((_comp_count > ((modelica_integer) 0)))
          {
            tmp6 = _index; tmp7 = 1; tmp8 = ((modelica_integer) -1) + _index + _comp_count;
            if(!(((tmp7 > 0) && (tmp6 > tmp8)) || ((tmp7 < 0) && (tmp6 < tmp8))))
            {
              modelica_integer _i;
              for(_i = _index; in_range_integer(_i, tmp6, tmp8); _i += tmp7)
              {
                arrayUpdate(_comps, _i, omc_Mutable_create(threadData, arrayGet(_ext_comps,_i) /* DAE.ASUB */));
              }
            }

            _index = _index + _comp_count;
          }
          goto tmp2_done;
        }
        default:
        tmp2_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _index;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFClassTree_ClassTree_instExtendsComps(threadData_t *threadData, modelica_metatype _extNode, modelica_metatype _comps, modelica_metatype __omcQ_24in_5Findex)
{
  modelica_integer tmp1;
  modelica_integer _index;
  modelica_metatype out_index;
  tmp1 = mmc_unbox_integer(__omcQ_24in_5Findex);
  _index = omc_NFClassTree_ClassTree_instExtendsComps(threadData, _extNode, _comps, tmp1);
  out_index = mmc_mk_icon(_index);
  return out_index;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_replaceClass(threadData_t *threadData, modelica_metatype _node, modelica_metatype __omcQ_24in_5Ftree)
{
  modelica_metatype _tree = NULL;
  modelica_integer _index;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = __omcQ_24in_5Ftree;
  // _index has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = omc_NFLookupTree_get(threadData, omc_NFClassTree_ClassTree_lookupTree(threadData, _tree), omc_NFInstNode_InstNode_name(threadData, _node));
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,0,1) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmp3 = mmc_unbox_integer(tmpMeta2);
  _index = tmp3  /* pattern as ty=Integer */;

  arrayUpdate(omc_NFClassTree_ClassTree_getClasses(threadData, _tree), _index, _node);
  _return: OMC_LABEL_UNUSED
  return _tree;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_appendClasses2(threadData_t *threadData, modelica_metatype _clsNodes, modelica_metatype __omcQ_24in_5Ftree, modelica_metatype __omcQ_24in_5Fclasses, modelica_metatype *out_classes)
{
  modelica_metatype _tree = NULL;
  modelica_metatype _classes = NULL;
  modelica_integer _index;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = __omcQ_24in_5Ftree;
  _classes = __omcQ_24in_5Fclasses;
  // _index has no default value.
  _index = arrayLength(_classes);

  _classes = omc_Array_appendList(threadData, _classes, _clsNodes);

  {
    modelica_metatype _c;
    for (tmpMeta1 = _clsNodes; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _c = MMC_CAR(tmpMeta1);
      _index = ((modelica_integer) 1) + _index;

      tmpMeta2 = mmc_mk_box2(3, &NFLookupTree_Entry_CLASS__desc, mmc_mk_integer(_index));
      _tree = omc_NFLookupTree_add(threadData, _tree, omc_NFInstNode_InstNode_name(threadData, _c), tmpMeta2, boxvar_NFLookupTree_addConflictDefault);
    }
  }
  _return: OMC_LABEL_UNUSED
  if (out_classes) { *out_classes = _classes; }
  return _tree;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_appendClasses(threadData_t *threadData, modelica_metatype _clsNodes, modelica_metatype __omcQ_24in_5Ftree)
{
  modelica_metatype _tree = NULL;
  modelica_metatype _classes = NULL;
  modelica_metatype _ltree = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = __omcQ_24in_5Ftree;
  // _classes has no default value.
  // _ltree has no default value.
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _tree;
    {
      int tmp3;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
        case 3: {
          modelica_metatype tmpMeta4;
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          _ltree = omc_NFClassTree_ClassTree_appendClasses2(threadData, _clsNodes, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))) ,&_classes);

          tmpMeta4 = MMC_TAGPTR(mmc_alloc_words(8));
          memcpy(MMC_UNTAGPTR(tmpMeta4), MMC_UNTAGPTR(_tree), 8*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta4))[2] = _ltree;
          _tree = tmpMeta4;

          tmpMeta5 = MMC_TAGPTR(mmc_alloc_words(8));
          memcpy(MMC_UNTAGPTR(tmpMeta5), MMC_UNTAGPTR(_tree), 8*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta5))[3] = _classes;
          _tree = tmpMeta5;
          goto tmp2_done;
        }
        case 4: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          
          /* Pattern matching succeeded */
          _ltree = omc_NFClassTree_ClassTree_appendClasses2(threadData, _clsNodes, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))) ,&_classes);

          tmpMeta6 = MMC_TAGPTR(mmc_alloc_words(8));
          memcpy(MMC_UNTAGPTR(tmpMeta6), MMC_UNTAGPTR(_tree), 8*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta6))[2] = _ltree;
          _tree = tmpMeta6;

          tmpMeta7 = MMC_TAGPTR(mmc_alloc_words(8));
          memcpy(MMC_UNTAGPTR(tmpMeta7), MMC_UNTAGPTR(_tree), 8*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta7))[3] = _classes;
          _tree = tmpMeta7;
          goto tmp2_done;
        }
        case 6: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          
          /* Pattern matching succeeded */
          _ltree = omc_NFClassTree_ClassTree_appendClasses2(threadData, _clsNodes, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))) ,&_classes);

          tmpMeta8 = MMC_TAGPTR(mmc_alloc_words(7));
          memcpy(MMC_UNTAGPTR(tmpMeta8), MMC_UNTAGPTR(_tree), 7*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta8))[2] = _ltree;
          _tree = tmpMeta8;

          tmpMeta9 = MMC_TAGPTR(mmc_alloc_words(7));
          memcpy(MMC_UNTAGPTR(tmpMeta9), MMC_UNTAGPTR(_tree), 7*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta9))[3] = _classes;
          _tree = tmpMeta9;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _tree;
}

DLLDirection
modelica_boolean omc_NFClassTree_ClassTree_isEmptyTree(threadData_t *threadData, modelica_metatype _tree)
{
  modelica_boolean _isEmpty;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isEmpty has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isEmpty = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isEmpty;
}
modelica_metatype boxptr_NFClassTree_ClassTree_isEmptyTree(threadData_t *threadData, modelica_metatype _tree)
{
  modelica_boolean _isEmpty;
  modelica_metatype out_isEmpty;
  _isEmpty = omc_NFClassTree_ClassTree_isEmptyTree(threadData, _tree);
  out_isEmpty = mmc_mk_icon(_isEmpty);
  return out_isEmpty;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_getImports(threadData_t *threadData, modelica_metatype _tree)
{
  modelica_metatype _imps = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _imps has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 6)));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 6)));
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 7)));
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 5)));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _imps = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _imps;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_getComponents(threadData_t *threadData, modelica_metatype _tree)
{
  modelica_metatype _comps = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _comps has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4)));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4)));
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4)));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _comps = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _comps;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_getExtends(threadData_t *threadData, modelica_metatype _tree)
{
  modelica_metatype _exts = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _exts has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 5)));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 5)));
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 6)));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta1 = listArray(tmpMeta5);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exts = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exts;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_getClasses(threadData_t *threadData, modelica_metatype _tree)
{
  modelica_metatype _clss = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _clss has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3)));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3)));
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3)));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _clss = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _clss;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_enumerateComponents2(threadData_t *threadData, modelica_string _name, modelica_metatype _entry, modelica_metatype _comps, modelica_metatype __omcQ_24in_5Fcomponents)
{
  modelica_metatype _components = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _components = __omcQ_24in_5Fcomponents;
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _entry;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          tmpMeta5 = mmc_mk_cons(arrayGet(_comps,mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2))))) /* DAE.ASUB */, _components);
          _components = tmpMeta5;
          goto tmp2_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _components;
}

static modelica_metatype closure5_NFClassTree_ClassTree_enumerateComponents2(threadData_t *thData, modelica_metatype closure, modelica_string name, modelica_metatype entry, modelica_metatype $in_components)
{
  modelica_metatype comps = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFClassTree_ClassTree_enumerateComponents2(thData, name, entry, comps, $in_components);
}
DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_enumerateComponents(threadData_t *threadData, modelica_metatype _tree)
{
  modelica_metatype _components = NULL;
  modelica_metatype _ltree = NULL;
  modelica_metatype _comps = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _components has no default value.
  // _ltree has no default value.
  // _comps has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _tree;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,3,5) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 4));
  _ltree = tmpMeta2;
  _comps = tmpMeta3;

  tmpMeta4 = mmc_mk_box1(0, _comps);
  tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
  _components = omc_NFLookupTree_fold(threadData, _ltree, (modelica_fnptr) mmc_mk_box2(0,closure5_NFClassTree_ClassTree_enumerateComponents2,tmpMeta4), tmpMeta5);
  _return: OMC_LABEL_UNUSED
  return _components;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_setClassExtends(threadData_t *threadData, modelica_metatype _extNode, modelica_metatype __omcQ_24in_5Ftree)
{
  modelica_metatype _tree = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = __omcQ_24in_5Ftree;
  arrayUpdate(omc_NFClassTree_ClassTree_getExtends(threadData, _tree), ((modelica_integer) 1), _extNode);
  _return: OMC_LABEL_UNUSED
  return _tree;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_getRedeclaredNode(threadData_t *threadData, modelica_string _name, modelica_metatype _tree)
{
  modelica_metatype _node = NULL;
  modelica_metatype _entry = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _node has no default value.
  // _entry has no default value.
  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp2_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          /* Pattern matching succeeded */
          _entry = omc_NFDuplicateTree_get(threadData, omc_NFClassTree_ClassTree_getDuplicates(threadData, _tree), _name);

          _entry = listHead((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 4))));

          if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 3)))))
          {
            /* Pattern-matching assignment */
            tmpMeta5 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 3)));
            if (optionNone(tmpMeta5)) goto goto_1;
            tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 1));
            _node = tmpMeta6;
          }
          else
          {
            _node = omc_NFClassTree_ClassTree_resolveEntry(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2))), _tree, NULL);
          }
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          /* Pattern matching succeeded */
          tmpMeta7 = stringAppend(_OMC_LIT26,_name);
          omc_Error_assertion(threadData, 0 /* false */, tmpMeta7, _OMC_LIT27);
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      tmp2_done:
      (void)tmp3;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp2_done2;
      goto_1:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp3 < 2) {
        goto tmp2_top;
      }
      MMC_THROW_INTERNAL();
      tmp2_done2:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _node;
}

DLLDirection
modelica_boolean omc_NFClassTree_ClassTree_isIdentical(threadData_t *threadData, modelica_metatype _tree1, modelica_metatype _tree2)
{
  modelica_boolean _identical;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _identical has no default value.
  _identical = 1 /* true */;
  _return: OMC_LABEL_UNUSED
  return _identical;
}
modelica_metatype boxptr_NFClassTree_ClassTree_isIdentical(threadData_t *threadData, modelica_metatype _tree1, modelica_metatype _tree2)
{
  modelica_boolean _identical;
  modelica_metatype out_identical;
  _identical = omc_NFClassTree_ClassTree_isIdentical(threadData, _tree1, _tree2);
  out_identical = mmc_mk_icon(_identical);
  return out_identical;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_checkDuplicates2(threadData_t *threadData, modelica_string _name, modelica_metatype _entry, modelica_metatype __omcQ_24in_5Ftree)
{
  modelica_metatype _tree = NULL;
  modelica_metatype _kept = NULL;
  modelica_metatype _dup = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = __omcQ_24in_5Ftree;
  // _kept has no default value.
  // _dup has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 3)));
  if (optionNone(tmpMeta1)) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
  _kept = tmpMeta2;

  { /* match expression */
    modelica_metatype tmp5_1;
    tmp5_1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 5)));
    {
      volatile mmc_switch_type tmp5;
      int tmp6;
      tmp5 = 0;
      for (; tmp5 < 2; tmp5++) {
        switch (MMC_SWITCH_CAST(tmp5)) {
        case 0: {
          modelica_integer tmp7;
          tmp7 = mmc_unbox_integer(tmp5_1);
          if (2 != tmp7) goto tmp4_end;
          /* Pattern matching succeeded */
          goto tmp4_done;
        }
        case 1: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _c;
            for (tmpMeta8 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 4))); !listEmpty(tmpMeta8); tmpMeta8=MMC_CDR(tmpMeta8))
            {
              _c = MMC_CAR(tmpMeta8);
              /* Pattern-matching assignment */
              tmpMeta9 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 3)));
              if (optionNone(tmpMeta9)) goto goto_3;
              tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 1));
              _dup = tmpMeta10;

              omc_NFInstNode_InstNode_checkIdentical(threadData, _kept, _dup);
            }
          }
          goto tmp4_done;
        }
        }
        goto tmp4_end;
        tmp4_end: ;
      }
      goto goto_3;
      goto_3:;
      MMC_THROW_INTERNAL();
      goto tmp4_done;
      tmp4_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _tree;
}

DLLDirection
void omc_NFClassTree_ClassTree_checkDuplicates(threadData_t *threadData, modelica_metatype _tree)
{
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _tree;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,7) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(!omc_NFDuplicateTree_isEmpty(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 8)))))) goto tmp2_end;
          omc_NFDuplicateTree_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 8))), boxvar_NFClassTree_ClassTree_checkDuplicates2, _tree);
          goto tmp2_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
modelica_integer omc_NFClassTree_ClassTree_recursiveElementCount(threadData_t *threadData, modelica_metatype _tree)
{
  modelica_integer _count;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_integer tmp4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _count has no default value.
  _count = omc_NFClassTree_ClassTree_classCount(threadData, _tree) + omc_NFClassTree_ClassTree_componentCount(threadData, _tree);

  {
    modelica_metatype _ext;
    for (tmpMeta1 = omc_NFClassTree_ClassTree_getExtends(threadData, _tree), tmp4 = arrayLength(tmpMeta1), tmp3 = 1; tmp3 <= tmp4; tmp3++)
    {
      _ext = arrayGet(tmpMeta1,tmp3);
      _count = _count + omc_NFClassTree_ClassTree_recursiveElementCount(threadData, omc_NFClass_classTree(threadData, omc_NFInstNode_InstNode_getClass(threadData, _ext)));
    }
  }
  _return: OMC_LABEL_UNUSED
  return _count;
}
modelica_metatype boxptr_NFClassTree_ClassTree_recursiveElementCount(threadData_t *threadData, modelica_metatype _tree)
{
  modelica_integer _count;
  modelica_metatype out_count;
  _count = omc_NFClassTree_ClassTree_recursiveElementCount(threadData, _tree);
  out_count = mmc_mk_icon(_count);
  return out_count;
}

DLLDirection
modelica_integer omc_NFClassTree_ClassTree_extendsCount(threadData_t *threadData, modelica_metatype _tree)
{
  modelica_integer _count;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _count = arrayLength(omc_NFClassTree_ClassTree_getExtends(threadData, _tree));
  _return: OMC_LABEL_UNUSED
  return _count;
}
modelica_metatype boxptr_NFClassTree_ClassTree_extendsCount(threadData_t *threadData, modelica_metatype _tree)
{
  modelica_integer _count;
  modelica_metatype out_count;
  _count = omc_NFClassTree_ClassTree_extendsCount(threadData, _tree);
  out_count = mmc_mk_icon(_count);
  return out_count;
}

DLLDirection
modelica_integer omc_NFClassTree_ClassTree_componentCount(threadData_t *threadData, modelica_metatype _tree)
{
  modelica_integer _count;
  modelica_integer tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _count has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4)))) - arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 5))));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4)))) - arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 5))));
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmp1 = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))));
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmp1 = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 0);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _count = tmp1;
  _return: OMC_LABEL_UNUSED
  return _count;
}
modelica_metatype boxptr_NFClassTree_ClassTree_componentCount(threadData_t *threadData, modelica_metatype _tree)
{
  modelica_integer _count;
  modelica_metatype out_count;
  _count = omc_NFClassTree_ClassTree_componentCount(threadData, _tree);
  out_count = mmc_mk_icon(_count);
  return out_count;
}

DLLDirection
modelica_integer omc_NFClassTree_ClassTree_classCount(threadData_t *threadData, modelica_metatype _tree)
{
  modelica_integer _count;
  modelica_integer tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _count has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))));
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmp1 = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))));
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmp1 = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 0);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _count = tmp1;
  _return: OMC_LABEL_UNUSED
  return _count;
}
modelica_metatype boxptr_NFClassTree_ClassTree_classCount(threadData_t *threadData, modelica_metatype _tree)
{
  modelica_integer _count;
  modelica_metatype out_count;
  _count = omc_NFClassTree_ClassTree_classCount(threadData, _tree);
  out_count = mmc_mk_icon(_count);
  return out_count;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_findComponent(threadData_t *threadData, modelica_metatype _tree, modelica_fnptr _func)
{
  modelica_metatype _component = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _component = mmc_mk_none();
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _tree;
    {
      int tmp3;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
        case 3: {
          modelica_metatype tmpMeta4;
          modelica_metatype tmpMeta5;
          modelica_integer tmp6;
          modelica_integer tmp7;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _c;
            for (tmpMeta4 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), tmp7 = arrayLength(tmpMeta4), tmp6 = 1; tmp6 <= tmp7; tmp6++)
            {
              _c = arrayGet(tmpMeta4,tmp6);
              if(mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _c) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _c)))
              {
                _component = mmc_mk_some(_c);

                break;
              }
            }
          }
          goto tmp2_done;
        }
        case 4: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_integer tmp10;
          modelica_integer tmp11;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _c;
            for (tmpMeta8 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), tmp11 = arrayLength(tmpMeta8), tmp10 = 1; tmp10 <= tmp11; tmp10++)
            {
              _c = arrayGet(tmpMeta8,tmp10);
              if(mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _c) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _c)))
              {
                _component = mmc_mk_some(_c);

                break;
              }
            }
          }
          goto tmp2_done;
        }
        case 5: {
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_integer tmp14;
          modelica_integer tmp15;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _c;
            for (tmpMeta12 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), tmp15 = arrayLength(tmpMeta12), tmp14 = 1; tmp14 <= tmp15; tmp14++)
            {
              _c = arrayGet(tmpMeta12,tmp14);
              if(mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), omc_Mutable_access(threadData, _c)) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, omc_Mutable_access(threadData, _c))))
              {
                _component = mmc_mk_some(omc_Mutable_access(threadData, _c));

                break;
              }
            }
          }
          goto tmp2_done;
        }
        case 6: {
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_integer tmp18;
          modelica_integer tmp19;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _c;
            for (tmpMeta16 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), tmp19 = arrayLength(tmpMeta16), tmp18 = 1; tmp18 <= tmp19; tmp18++)
            {
              _c = arrayGet(tmpMeta16,tmp18);
              if(mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _c) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _c)))
              {
                _component = mmc_mk_some(_c);

                break;
              }
            }
          }
          goto tmp2_done;
        }
        default:
        tmp2_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _component;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_foldComponents(threadData_t *threadData, modelica_metatype _tree, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Farg)
{
  modelica_metatype _arg = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _arg = __omcQ_24in_5Farg;
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _tree;
    {
      int tmp3;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
        case 3: {
          modelica_metatype tmpMeta4;
          modelica_metatype tmpMeta5;
          modelica_integer tmp6;
          modelica_integer tmp7;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _c;
            for (tmpMeta4 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), tmp7 = arrayLength(tmpMeta4), tmp6 = 1; tmp6 <= tmp7; tmp6++)
            {
              _c = arrayGet(tmpMeta4,tmp6);
              _arg = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _c, _arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _c, _arg);
            }
          }
          goto tmp2_done;
        }
        case 4: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_integer tmp10;
          modelica_integer tmp11;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _c;
            for (tmpMeta8 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), tmp11 = arrayLength(tmpMeta8), tmp10 = 1; tmp10 <= tmp11; tmp10++)
            {
              _c = arrayGet(tmpMeta8,tmp10);
              _arg = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _c, _arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _c, _arg);
            }
          }
          goto tmp2_done;
        }
        case 5: {
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_integer tmp14;
          modelica_integer tmp15;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _c;
            for (tmpMeta12 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), tmp15 = arrayLength(tmpMeta12), tmp14 = 1; tmp14 <= tmp15; tmp14++)
            {
              _c = arrayGet(tmpMeta12,tmp14);
              _arg = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), omc_Mutable_access(threadData, _c), _arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, omc_Mutable_access(threadData, _c), _arg);
            }
          }
          goto tmp2_done;
        }
        case 6: {
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_integer tmp18;
          modelica_integer tmp19;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _c;
            for (tmpMeta16 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), tmp19 = arrayLength(tmpMeta16), tmp18 = 1; tmp18 <= tmp19; tmp18++)
            {
              _c = arrayGet(tmpMeta16,tmp18);
              _arg = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _c, _arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _c, _arg);
            }
          }
          goto tmp2_done;
        }
        default:
        tmp2_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _arg;
}

DLLDirection
void omc_NFClassTree_ClassTree_applyComponents(threadData_t *threadData, modelica_metatype _tree, modelica_fnptr _func)
{
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _tree;
    {
      int tmp3;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
        case 3: {
          modelica_metatype tmpMeta4;
          modelica_metatype tmpMeta5;
          modelica_integer tmp6;
          modelica_integer tmp7;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _c;
            for (tmpMeta4 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), tmp7 = arrayLength(tmpMeta4), tmp6 = 1; tmp6 <= tmp7; tmp6++)
            {
              _c = arrayGet(tmpMeta4,tmp6);
              (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _c) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _c);
            }
          }
          goto tmp2_done;
        }
        case 4: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_integer tmp10;
          modelica_integer tmp11;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _c;
            for (tmpMeta8 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), tmp11 = arrayLength(tmpMeta8), tmp10 = 1; tmp10 <= tmp11; tmp10++)
            {
              _c = arrayGet(tmpMeta8,tmp10);
              (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _c) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _c);
            }
          }
          goto tmp2_done;
        }
        case 5: {
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_integer tmp14;
          modelica_integer tmp15;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _c;
            for (tmpMeta12 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), tmp15 = arrayLength(tmpMeta12), tmp14 = 1; tmp14 <= tmp15; tmp14++)
            {
              _c = arrayGet(tmpMeta12,tmp14);
              (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), omc_Mutable_access(threadData, _c)) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, omc_Mutable_access(threadData, _c));
            }
          }
          goto tmp2_done;
        }
        case 6: {
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_integer tmp18;
          modelica_integer tmp19;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _c;
            for (tmpMeta16 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), tmp19 = arrayLength(tmpMeta16), tmp18 = 1; tmp18 <= tmp19; tmp18++)
            {
              _c = arrayGet(tmpMeta16,tmp18);
              (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _c) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _c);
            }
          }
          goto tmp2_done;
        }
        default:
        tmp2_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
void omc_NFClassTree_ClassTree_applyLocalComponents(threadData_t *threadData, modelica_metatype _tree, modelica_fnptr _func)
{
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _tree;
    {
      int tmp3;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
        case 5: {
          modelica_metatype tmpMeta4;
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _i;
            for (tmpMeta4 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 5))); !listEmpty(tmpMeta4); tmpMeta4=MMC_CDR(tmpMeta4))
            {
              _i = MMC_CAR(tmpMeta4);
              (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), omc_Mutable_access(threadData, arrayGetNoBoundsChecking((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), mmc_unbox_integer(_i)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, omc_Mutable_access(threadData, arrayGetNoBoundsChecking((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), mmc_unbox_integer(_i))));
            }
          }
          goto tmp2_done;
        }
        case 3: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_integer tmp8;
          modelica_integer tmp9;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _c;
            for (tmpMeta6 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), tmp9 = arrayLength(tmpMeta6), tmp8 = 1; tmp8 <= tmp9; tmp8++)
            {
              _c = arrayGet(tmpMeta6,tmp8);
              (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _c) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _c);
            }
          }
          goto tmp2_done;
        }
        case 4: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_integer tmp12;
          modelica_integer tmp13;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _c;
            for (tmpMeta10 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), tmp13 = arrayLength(tmpMeta10), tmp12 = 1; tmp12 <= tmp13; tmp12++)
            {
              _c = arrayGet(tmpMeta10,tmp12);
              (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _c) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _c);
            }
          }
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_mapFoldExtends(threadData_t *threadData, modelica_metatype _tree, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Farg)
{
  modelica_metatype _arg = NULL;
  modelica_metatype _exts = NULL;
  modelica_metatype _ext = NULL;
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer tmp3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _arg = __omcQ_24in_5Farg;
  _exts = omc_NFClassTree_ClassTree_getExtends(threadData, _tree);
  // _ext has no default value.
  tmp1 = ((modelica_integer) 1); tmp2 = 1; tmp3 = arrayLength(_exts);
  if(!(((tmp2 > 0) && (tmp1 > tmp3)) || ((tmp2 < 0) && (tmp1 < tmp3))))
  {
    modelica_integer _i;
    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp1, tmp3); _i += tmp2)
    {
      _ext = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), arrayGetNoBoundsChecking(_exts, _i), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, arrayGetNoBoundsChecking(_exts, _i), _arg ,&_arg);

      arrayUpdateNoBoundsChecking(_exts, _i, _ext);
    }
  }
  _return: OMC_LABEL_UNUSED
  return _arg;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_foldExtends(threadData_t *threadData, modelica_metatype _tree, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Farg)
{
  modelica_metatype _arg = NULL;
  modelica_metatype _exts = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_integer tmp4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _arg = __omcQ_24in_5Farg;
  _exts = omc_NFClassTree_ClassTree_getExtends(threadData, _tree);
  {
    modelica_metatype _ext;
    for (tmpMeta1 = _exts, tmp4 = arrayLength(tmpMeta1), tmp3 = 1; tmp3 <= tmp4; tmp3++)
    {
      _ext = arrayGet(tmpMeta1,tmp3);
      _arg = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _ext, _arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _ext, _arg);
    }
  }
  _return: OMC_LABEL_UNUSED
  return _arg;
}

DLLDirection
void omc_NFClassTree_ClassTree_mapExtends(threadData_t *threadData, modelica_metatype _tree, modelica_fnptr _func)
{
  modelica_metatype _exts = NULL;
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer tmp3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exts = omc_NFClassTree_ClassTree_getExtends(threadData, _tree);
  tmp1 = ((modelica_integer) 1); tmp2 = 1; tmp3 = arrayLength(_exts);
  if(!(((tmp2 > 0) && (tmp1 > tmp3)) || ((tmp2 < 0) && (tmp1 < tmp3))))
  {
    modelica_integer _i;
    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp1, tmp3); _i += tmp2)
    {
      arrayUpdateNoBoundsChecking(_exts, _i, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), arrayGetNoBoundsChecking(_exts, _i)) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, arrayGetNoBoundsChecking(_exts, _i)));
    }
  }
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
void omc_NFClassTree_ClassTree_applyExtends(threadData_t *threadData, modelica_metatype _tree, modelica_fnptr _func)
{
  modelica_metatype _exts = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_integer tmp4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exts = omc_NFClassTree_ClassTree_getExtends(threadData, _tree);
  {
    modelica_metatype _ext;
    for (tmpMeta1 = _exts, tmp4 = arrayLength(tmpMeta1), tmp3 = 1; tmp3 <= tmp4; tmp3++)
    {
      _ext = arrayGet(tmpMeta1,tmp3);
      (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _ext) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _ext);
    }
  }
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_foldClasses(threadData_t *threadData, modelica_metatype _tree, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Farg)
{
  modelica_metatype _arg = NULL;
  modelica_metatype _clss = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_integer tmp4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _arg = __omcQ_24in_5Farg;
  _clss = omc_NFClassTree_ClassTree_getClasses(threadData, _tree);
  {
    modelica_metatype _cls;
    for (tmpMeta1 = _clss, tmp4 = arrayLength(tmpMeta1), tmp3 = 1; tmp3 <= tmp4; tmp3++)
    {
      _cls = arrayGet(tmpMeta1,tmp3);
      _arg = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _cls, _arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _cls, _arg);
    }
  }
  _return: OMC_LABEL_UNUSED
  return _arg;
}

DLLDirection
void omc_NFClassTree_ClassTree_mapClasses(threadData_t *threadData, modelica_metatype _tree, modelica_fnptr _func)
{
  modelica_metatype _clss = NULL;
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer tmp3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _clss = omc_NFClassTree_ClassTree_getClasses(threadData, _tree);
  tmp1 = ((modelica_integer) 1); tmp2 = 1; tmp3 = arrayLength(_clss);
  if(!(((tmp2 > 0) && (tmp1 > tmp3)) || ((tmp2 < 0) && (tmp1 < tmp3))))
  {
    modelica_integer _i;
    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp1, tmp3); _i += tmp2)
    {
      arrayUpdateNoBoundsChecking(_clss, _i, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), arrayGetNoBoundsChecking(_clss, _i)) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, arrayGetNoBoundsChecking(_clss, _i)));
    }
  }
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_nthComponent(threadData_t *threadData, modelica_integer _index, modelica_metatype _tree)
{
  modelica_metatype _component = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _component has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), _index);
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), _index);
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_Mutable_access(threadData, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), _index));
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), _index);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _component = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _component;
}
modelica_metatype boxptr_NFClassTree_ClassTree_nthComponent(threadData_t *threadData, modelica_metatype _index, modelica_metatype _tree)
{
  modelica_integer tmp1;
  modelica_metatype _component = NULL;
  tmp1 = mmc_unbox_integer(_index);
  _component = omc_NFClassTree_ClassTree_nthComponent(threadData, tmp1, _tree);
  /* skip box _component; NFInstNode.InstNode */
  return _component;
}

DLLDirection
modelica_integer omc_NFClassTree_ClassTree_lookupComponentIndex(threadData_t *threadData, modelica_string _name, modelica_metatype _tree)
{
  modelica_integer _index;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _index has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = omc_NFLookupTree_get(threadData, omc_NFClassTree_ClassTree_lookupTree(threadData, _tree), _name);
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,1,1) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmp3 = mmc_unbox_integer(tmpMeta2);
  _index = tmp3  /* pattern as ty=Integer */;
  _return: OMC_LABEL_UNUSED
  return _index;
}
modelica_metatype boxptr_NFClassTree_ClassTree_lookupComponentIndex(threadData_t *threadData, modelica_metatype _name, modelica_metatype _tree)
{
  modelica_integer _index;
  modelica_metatype out_index;
  _index = omc_NFClassTree_ClassTree_lookupComponentIndex(threadData, _name, _tree);
  out_index = mmc_mk_icon(_index);
  return out_index;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_lookupElementsPtr(threadData_t *threadData, modelica_string _name, modelica_metatype _tree)
{
  modelica_metatype _elements = NULL;
  modelica_metatype _dup_entry = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _elements has no default value.
  // _dup_entry has no default value.
  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp2_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          /* Pattern matching succeeded */
          _dup_entry = omc_NFDuplicateTree_get(threadData, omc_NFClassTree_ClassTree_getDuplicates(threadData, _tree), _name);

          tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
          _elements = omc_NFClassTree_ClassTree_resolveDuplicateEntriesPtr(threadData, _dup_entry, _tree, tmpMeta5);
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          /* Pattern matching succeeded */
          tmpMeta6 = mmc_mk_cons(omc_NFClassTree_ClassTree_lookupElementPtr(threadData, _name, _tree), MMC_REFSTRUCTLIT(mmc_nil));
          _elements = tmpMeta6;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      tmp2_done:
      (void)tmp3;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp2_done2;
      goto_1:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp3 < 2) {
        goto tmp2_top;
      }
      MMC_THROW_INTERNAL();
      tmp2_done2:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _elements;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_lookupElementPtr(threadData_t *threadData, modelica_string _name, modelica_metatype _tree)
{
  modelica_metatype _element = NULL;
  modelica_metatype _entry = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _element has no default value.
  // _entry has no default value.
  _entry = omc_NFLookupTree_get(threadData, omc_NFClassTree_ClassTree_lookupTree(threadData, _tree), _name);

  _element = omc_NFClassTree_ClassTree_resolveEntryPtr(threadData, _entry, _tree);
  _return: OMC_LABEL_UNUSED
  return _element;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_lookupElement(threadData_t *threadData, modelica_string _name, modelica_metatype _tree, modelica_boolean *out_isImport)
{
  modelica_metatype _element = NULL;
  modelica_boolean _isImport;
  modelica_metatype _entry = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _element has no default value.
  // _isImport has no default value.
  // _entry has no default value.
  _entry = omc_NFLookupTree_get(threadData, omc_NFClassTree_ClassTree_lookupTree(threadData, _tree), _name);

  _element = omc_NFClassTree_ClassTree_resolveEntry(threadData, _entry, _tree ,&_isImport);
  _return: OMC_LABEL_UNUSED
  if (out_isImport) { *out_isImport = _isImport; }
  return _element;
}
modelica_metatype boxptr_NFClassTree_ClassTree_lookupElement(threadData_t *threadData, modelica_metatype _name, modelica_metatype _tree, modelica_metatype *out_isImport)
{
  modelica_boolean _isImport;
  modelica_metatype _element = NULL;
  _element = omc_NFClassTree_ClassTree_lookupElement(threadData, _name, _tree, &_isImport);
  /* skip box _element; NFInstNode.InstNode */
  if (out_isImport) { *out_isImport = mmc_mk_icon(_isImport); }
  return _element;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_flattenLookupTree2(threadData_t *threadData, modelica_string _key, modelica_metatype _entry, modelica_metatype _offsets)
{
  modelica_metatype _outEntry = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outEntry has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _entry;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta6 = mmc_mk_box2(4, &NFLookupTree_Entry_COMPONENT__desc, mmc_mk_integer(mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2)))) - (mmc_unbox_integer(arrayGetNoBoundsChecking(_offsets, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_entry), 2)))))))));
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _entry;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outEntry = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outEntry;
}

static modelica_metatype closure6_NFClassTree_ClassTree_flattenLookupTree2(threadData_t *thData, modelica_metatype closure, modelica_string key, modelica_metatype entry)
{
  modelica_metatype offsets = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFClassTree_ClassTree_flattenLookupTree2(thData, key, entry, offsets);
}
DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_flattenLookupTree(threadData_t *threadData, modelica_metatype __omcQ_24in_5Ftree, modelica_metatype _offsets)
{
  modelica_metatype _tree = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = __omcQ_24in_5Ftree;
  tmpMeta1 = mmc_mk_box1(0, _offsets);
  _tree = omc_NFLookupTree_map(threadData, _tree, (modelica_fnptr) mmc_mk_box2(0,closure6_NFClassTree_ClassTree_flattenLookupTree2,tmpMeta1));
  _return: OMC_LABEL_UNUSED
  return _tree;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_createFlatOffsets(threadData_t *threadData, modelica_integer _elementCount, modelica_metatype _duplicates)
{
  modelica_metatype _offsets = NULL;
  modelica_integer _offset;
  modelica_integer _dup;
  modelica_metatype _rest_dups = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_integer tmp4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_integer tmp8;
  modelica_integer tmp9;
  modelica_integer tmp10;
  modelica_integer tmp11;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _offsets has no default value.
  _offset = ((modelica_integer) 0);
  // _dup has no default value.
  // _rest_dups has no default value.
  _offsets = arrayCreateNoInit(_elementCount, mmc_mk_integer(((modelica_integer) 0)));

  /* Pattern-matching assignment */
  tmpMeta1 = _duplicates;
  if (listEmpty(tmpMeta1)) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_CAR(tmpMeta1);
  tmpMeta3 = MMC_CDR(tmpMeta1);
  tmp4 = mmc_unbox_integer(tmpMeta2);
  _dup = tmp4  /* pattern as ty=Integer */;
  _rest_dups = tmpMeta3;

  tmp9 = ((modelica_integer) 1); tmp10 = 1; tmp11 = _elementCount;
  if(!(((tmp10 > 0) && (tmp9 > tmp11)) || ((tmp10 < 0) && (tmp9 < tmp11))))
  {
    modelica_integer _i;
    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp9, tmp11); _i += tmp10)
    {
      if((_i == _dup))
      {
        if(listEmpty(_rest_dups))
        {
          _dup = ((modelica_integer) 0);
        }
        else
        {
          /* Pattern-matching assignment */
          tmpMeta5 = _rest_dups;
          if (listEmpty(tmpMeta5)) MMC_THROW_INTERNAL();
          tmpMeta6 = MMC_CAR(tmpMeta5);
          tmpMeta7 = MMC_CDR(tmpMeta5);
          tmp8 = mmc_unbox_integer(tmpMeta6);
          _dup = tmp8  /* pattern as ty=Integer */;
          _rest_dups = tmpMeta7;
        }

        _offset = ((modelica_integer) 1) + _offset;

        arrayUpdateNoBoundsChecking(_offsets, _i, mmc_mk_integer(((modelica_integer) -1)));
      }
      else
      {
        arrayUpdateNoBoundsChecking(_offsets, _i, mmc_mk_integer(_offset));
      }
    }
  }
  _return: OMC_LABEL_UNUSED
  return _offsets;
}
modelica_metatype boxptr_NFClassTree_ClassTree_createFlatOffsets(threadData_t *threadData, modelica_metatype _elementCount, modelica_metatype _duplicates)
{
  modelica_integer tmp1;
  modelica_metatype _offsets = NULL;
  tmp1 = mmc_unbox_integer(_elementCount);
  _offsets = omc_NFClassTree_ClassTree_createFlatOffsets(threadData, tmp1, _duplicates);
  /* skip box _offsets; array<#Integer> */
  return _offsets;
}

DLLDirection
void omc_NFClassTree_ClassTree_flattenElementsWithOffset(threadData_t *threadData, modelica_metatype _elements, modelica_metatype _flatElements, modelica_metatype _offsets)
{
  modelica_integer _offset;
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer tmp3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _offset has no default value.
  tmp1 = ((modelica_integer) 1); tmp2 = 1; tmp3 = arrayLength(_elements);
  if(!(((tmp2 > 0) && (tmp1 > tmp3)) || ((tmp2 < 0) && (tmp1 < tmp3))))
  {
    modelica_integer _i;
    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp1, tmp3); _i += tmp2)
    {
      _offset = mmc_unbox_integer(arrayGetNoBoundsChecking(_offsets, _i));

      if((_offset >= ((modelica_integer) 0)))
      {
        arrayUpdateNoBoundsChecking(_flatElements, _i - _offset, omc_Mutable_access(threadData, arrayGetNoBoundsChecking(_elements, _i)));
      }
    }
  }
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
void omc_NFClassTree_ClassTree_flattenElements(threadData_t *threadData, modelica_metatype _elements, modelica_metatype _flatElements)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer tmp3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmp1 = ((modelica_integer) 1); tmp2 = 1; tmp3 = arrayLength(_elements);
  if(!(((tmp2 > 0) && (tmp1 > tmp3)) || ((tmp2 < 0) && (tmp1 < tmp3))))
  {
    modelica_integer _i;
    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp1, tmp3); _i += tmp2)
    {
      arrayUpdateNoBoundsChecking(_flatElements, _i, omc_Mutable_access(threadData, arrayGetNoBoundsChecking(_elements, _i)));
    }
  }
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_flatten(threadData_t *threadData, modelica_metatype __omcQ_24in_5Ftree)
{
  modelica_metatype _tree = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = __omcQ_24in_5Ftree;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      modelica_metatype _clss = NULL;
      modelica_metatype _comps = NULL;
      modelica_metatype _comp_offsets = NULL;
      modelica_integer _clsc;
      modelica_integer _compc;
      modelica_metatype _dup_comp = NULL;
      modelica_metatype _ltree = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _clss has no default value.
      // _comps has no default value.
      // _comp_offsets has no default value.
      // _clsc has no default value.
      // _compc has no default value.
      // _dup_comp has no default value.
      // _ltree has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,7) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          omc_NFClassTree_ClassTree_enumerateDuplicates(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 8))) ,&_dup_comp);

          _clsc = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))));

          _compc = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4)))) - listLength(_dup_comp);

          _clss = arrayCreateNoInit(_clsc, _OMC_LIT28);

          _comps = arrayCreateNoInit(_compc, _OMC_LIT28);

          omc_NFClassTree_ClassTree_flattenElements(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))), _clss);

          if(listEmpty(_dup_comp))
          {
            omc_NFClassTree_ClassTree_flattenElements(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), _comps);

            _ltree = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2)));
          }
          else
          {
            _comp_offsets = omc_NFClassTree_ClassTree_createFlatOffsets(threadData, arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4)))), _dup_comp);

            omc_NFClassTree_ClassTree_flattenElementsWithOffset(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), _comps, _comp_offsets);

            _ltree = omc_NFClassTree_ClassTree_flattenLookupTree(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2))), _comp_offsets);
          }
          tmpMeta6 = mmc_mk_box6(6, &NFClassTree_ClassTree_FLAT__TREE__desc, _ltree, _clss, _comps, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 7))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 8))));
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _tree;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _tree = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _tree;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_appendComponentsToFlatTree(threadData_t *threadData, modelica_metatype _components, modelica_metatype __omcQ_24in_5Ftree)
{
  modelica_metatype _tree = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = __omcQ_24in_5Ftree;
  if(listEmpty(_components))
  {
    goto _return;
  }
  else
  {
    { /* match expression */
      modelica_metatype tmp3_1;
      tmp3_1 = _tree;
      {
        volatile mmc_switch_type tmp3;
        int tmp4;
        tmp3 = 0;
        for (; tmp3 < 2; tmp3++) {
          switch (MMC_SWITCH_CAST(tmp3)) {
          case 0: {
            modelica_metatype tmpMeta5;
            if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,5) == 0) goto tmp2_end;
            
            /* Pattern matching succeeded */
            tmpMeta5 = MMC_TAGPTR(mmc_alloc_words(7));
            memcpy(MMC_UNTAGPTR(tmpMeta5), MMC_UNTAGPTR(_tree), 7*sizeof(modelica_metatype));
            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta5))[4] = omc_Array_appendList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), _components);
            _tree = tmpMeta5;
            goto tmp2_done;
          }
          case 1: {
            
            /* Pattern matching succeeded */
            omc_Error_assertion(threadData, 0 /* false */, _OMC_LIT29, _OMC_LIT30);
            goto goto_1;
            goto tmp2_done;
          }
          }
          goto tmp2_end;
          tmp2_end: ;
        }
        goto goto_1;
        goto_1:;
        MMC_THROW_INTERNAL();
        goto tmp2_done;
        tmp2_done:;
      }
    }
    ;
  }
  _return: OMC_LABEL_UNUSED
  return _tree;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_appendComponentsToInstTree(threadData_t *threadData, modelica_metatype _components, modelica_metatype __omcQ_24in_5Ftree)
{
  modelica_metatype _tree = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = __omcQ_24in_5Ftree;
  if(listEmpty(_components))
  {
    goto _return;
  }
  else
  {
    { /* match expression */
      modelica_metatype tmp3_1;
      tmp3_1 = _tree;
      {
        modelica_integer _comp_idx;
        modelica_metatype _local_comps = NULL;
        volatile mmc_switch_type tmp3;
        int tmp4;
        // _comp_idx has no default value.
        // _local_comps has no default value.
        tmp3 = 0;
        for (; tmp3 < 2; tmp3++) {
          switch (MMC_SWITCH_CAST(tmp3)) {
          case 0: {
            modelica_metatype tmpMeta5;
            modelica_metatype tmpMeta6;
            modelica_integer tmp7;
            modelica_integer tmp8;
            modelica_integer tmp9;
            modelica_metatype tmpMeta10;
            if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,7) == 0) goto tmp2_end;
            
            /* Pattern matching succeeded */
            _comp_idx = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))));

            tmpMeta5 = MMC_TAGPTR(mmc_alloc_words(9));
            memcpy(MMC_UNTAGPTR(tmpMeta5), MMC_UNTAGPTR(_tree), 9*sizeof(modelica_metatype));
            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta5))[4] = omc_Array_appendList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), _components);
            _tree = tmpMeta5;

            _local_comps = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 5)));

            tmp7 = ((modelica_integer) 1) + _comp_idx; tmp8 = 1; tmp9 = _comp_idx + listLength(_components);
            if(!(((tmp8 > 0) && (tmp7 > tmp9)) || ((tmp8 < 0) && (tmp7 < tmp9))))
            {
              modelica_integer _i;
              for(_i = ((modelica_integer) 1) + _comp_idx; in_range_integer(_i, tmp7, tmp9); _i += tmp8)
              {
                tmpMeta6 = mmc_mk_cons(mmc_mk_integer(_i), _local_comps);
                _local_comps = tmpMeta6;
              }
            }

            tmpMeta10 = MMC_TAGPTR(mmc_alloc_words(9));
            memcpy(MMC_UNTAGPTR(tmpMeta10), MMC_UNTAGPTR(_tree), 9*sizeof(modelica_metatype));
            ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta10))[5] = _local_comps;
            _tree = tmpMeta10;
            goto tmp2_done;
          }
          case 1: {
            
            /* Pattern matching succeeded */
            omc_Error_assertion(threadData, 0 /* false */, _OMC_LIT31, _OMC_LIT32);
            goto goto_1;
            goto tmp2_done;
          }
          }
          goto tmp2_end;
          tmp2_end: ;
        }
        goto goto_1;
        goto_1:;
        MMC_THROW_INTERNAL();
        goto tmp2_done;
        tmp2_done:;
      }
    }
    ;
  }
  _return: OMC_LABEL_UNUSED
  return _tree;
}

static modelica_metatype closure7_NFClassTree_ClassTree_replaceDuplicates2(threadData_t *thData, modelica_metatype closure, modelica_string name, modelica_metatype $in_entry)
{
  modelica_metatype tree = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFClassTree_ClassTree_replaceDuplicates2(thData, name, $in_entry, tree);
}
DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_replaceDuplicates(threadData_t *threadData, modelica_metatype __omcQ_24in_5Ftree)
{
  modelica_metatype _tree = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = __omcQ_24in_5Ftree;
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _tree;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,7) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(!omc_NFDuplicateTree_isEmpty(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 8)))))) goto tmp2_end;
          tmpMeta6 = mmc_mk_box1(0, _tree);
          tmpMeta5 = MMC_TAGPTR(mmc_alloc_words(9));
          memcpy(MMC_UNTAGPTR(tmpMeta5), MMC_UNTAGPTR(_tree), 9*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta5))[8] = omc_NFDuplicateTree_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 8))), (modelica_fnptr) mmc_mk_box2(0,closure7_NFClassTree_ClassTree_replaceDuplicates2,tmpMeta6));
          _tree = tmpMeta5;
          goto tmp2_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _tree;
}

static modelica_metatype closure8_NFClassTree_ClassTree_mapRedeclareChain(threadData_t *thData, modelica_metatype closure, modelica_string name, modelica_metatype $in_entry)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype tree = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NFClassTree_ClassTree_mapRedeclareChain(thData, name, $in_entry, func, tree);
}
DLLDirection
void omc_NFClassTree_ClassTree_mapRedeclareChains(threadData_t *threadData, modelica_metatype _tree, modelica_fnptr _func)
{
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _tree;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,7) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(!omc_NFDuplicateTree_isEmpty(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 8)))))) goto tmp2_end;
          tmpMeta5 = mmc_mk_box2(0, ((modelica_fnptr) _func), _tree);
          omc_NFDuplicateTree_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 8))), (modelica_fnptr) mmc_mk_box2(0,closure8_NFClassTree_ClassTree_mapRedeclareChain,tmpMeta5));
          goto tmp2_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_clone(threadData_t *threadData, modelica_metatype _tree)
{
  modelica_metatype _outTree = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outTree has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _tree;
    {
      modelica_metatype _clss = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _clss has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,6) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _clss = arrayCopy((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 3))));

          _clss = omc_Array_mapNoCopy(threadData, _clss, boxvar_NFInstNode_InstNode_clone);
          tmpMeta6 = mmc_mk_box7(4, &NFClassTree_ClassTree_EXPANDED__TREE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 2))), _clss, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 5))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 6))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_tree), 7))));
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _tree;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outTree = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outTree;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_fromRecordConstructor(threadData_t *threadData, modelica_metatype _fields, modelica_metatype _out)
{
  modelica_metatype _tree = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype _ltree = NULL;
  modelica_integer _i;
  modelica_metatype _comps = NULL;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta5 = mmc_mk_box7(3, &NFClassTree_ClassTree_PARTIAL__TREE__desc, _OMC_LIT33, listArray(tmpMeta1), listArray(tmpMeta2), listArray(tmpMeta3), listArray(tmpMeta4), _OMC_LIT34);
  _tree = tmpMeta5;
  _ltree = omc_NFLookupTree_new(threadData);
  _i = ((modelica_integer) 1);
  // _comps has no default value.
  _comps = arrayCreateNoInit(((modelica_integer) 1) + listLength(_fields), _OMC_LIT28);

  {
    modelica_metatype _ci;
    for (tmpMeta6 = _fields; !listEmpty(tmpMeta6); tmpMeta6=MMC_CDR(tmpMeta6))
    {
      _ci = MMC_CAR(tmpMeta6);
      arrayUpdate(_comps,_i,_ci);

      tmpMeta7 = mmc_mk_box2(4, &NFLookupTree_Entry_COMPONENT__desc, mmc_mk_integer(_i));
      _ltree = omc_NFClassTree_ClassTree_addLocalElement(threadData, omc_NFInstNode_InstNode_name(threadData, _ci), tmpMeta7, _tree, _ltree);

      _i = ((modelica_integer) 1) + _i;
    }
  }

  arrayUpdate(_comps,_i,_out);

  tmpMeta9 = mmc_mk_box2(4, &NFLookupTree_Entry_COMPONENT__desc, mmc_mk_integer(_i));
  _ltree = omc_NFClassTree_ClassTree_addLocalElement(threadData, omc_NFInstNode_InstNode_name(threadData, _out), tmpMeta9, _tree, _ltree);

  tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta12 = mmc_mk_box6(6, &NFClassTree_ClassTree_FLAT__TREE__desc, _ltree, listArray(tmpMeta10), _comps, listArray(tmpMeta11), omc_NFDuplicateTree_new(threadData));
  _tree = tmpMeta12;
  _return: OMC_LABEL_UNUSED
  return _tree;
}

static modelica_metatype closure9_NFInstNode_InstNode_cloneComponent(threadData_t *thData, modelica_metatype closure, modelica_metatype component)
{
  modelica_metatype newParent = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFInstNode_InstNode_cloneComponent(thData, component, newParent);
}
DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_instantiate(threadData_t *threadData, modelica_metatype __omcQ_24in_5FclsNode, modelica_metatype __omcQ_24in_5Finstance, modelica_metatype _scope, modelica_metatype *out_instance, modelica_integer *out_classCount, modelica_integer *out_compCount)
{
  modelica_metatype _clsNode = NULL;
  modelica_metatype _instance = NULL;
  modelica_integer _classCount;
  modelica_integer _compCount;
  modelica_metatype _cls = NULL;
  modelica_metatype _tree = NULL;
  modelica_metatype _ext_tree = NULL;
  modelica_metatype _ltree = NULL;
  modelica_metatype _exts = NULL;
  modelica_metatype _old_clss = NULL;
  modelica_metatype _old_comps = NULL;
  modelica_metatype _imps = NULL;
  modelica_metatype _clss = NULL;
  modelica_metatype _comps = NULL;
  modelica_metatype _ext_clss = NULL;
  modelica_metatype _local_comps = NULL;
  modelica_metatype tmpMeta1;
  modelica_integer _cls_idx;
  modelica_integer _comp_idx;
  modelica_integer _cls_count;
  modelica_integer _comp_count;
  modelica_metatype _node = NULL;
  modelica_metatype _parent_scope = NULL;
  modelica_metatype _inner_node = NULL;
  modelica_metatype _inst_scope = NULL;
  modelica_metatype _dups = NULL;
  modelica_metatype _comp = NULL;
  modelica_metatype _ext_def = NULL;
  modelica_boolean _is_typish;
  modelica_metatype _inst_ty = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _clsNode = __omcQ_24in_5FclsNode;
  _instance = __omcQ_24in_5Finstance;
  _classCount = ((modelica_integer) 0);
  _compCount = ((modelica_integer) 0);
  // _cls has no default value.
  // _tree has no default value.
  // _ext_tree has no default value.
  // _ltree has no default value.
  // _exts has no default value.
  // _old_clss has no default value.
  // _old_comps has no default value.
  // _imps has no default value.
  // _clss has no default value.
  // _comps has no default value.
  // _ext_clss has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _local_comps = tmpMeta1;
  _cls_idx = ((modelica_integer) 1);
  _comp_idx = ((modelica_integer) 1);
  // _cls_count has no default value.
  // _comp_count has no default value.
  // _node has no default value.
  // _parent_scope has no default value.
  // _inner_node has no default value.
  // _inst_scope has no default value.
  // _dups has no default value.
  // _comp has no default value.
  // _ext_def has no default value.
  // _is_typish has no default value.
  // _inst_ty has no default value.
  _cls = omc_NFInstNode_InstNode_getClass(threadData, _clsNode);

  _clsNode = omc_NFInstNode_InstNode_replaceClass(threadData, _cls, _clsNode);

  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _cls;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 7; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,5) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,2,7) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_integer tmp18;
          modelica_integer tmp19;
          modelica_integer tmp20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_integer tmp23;
          modelica_integer tmp24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta31;
          modelica_integer tmp32;
          modelica_integer tmp33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta44;
          modelica_integer tmp45;
          modelica_integer tmp46;
          modelica_metatype tmpMeta47;
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta49;
          modelica_metatype tmpMeta50;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,5) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          if(omc_NFInstNode_InstNode_isEmpty(threadData, _instance))
          {
            _instance = _clsNode;

            _parent_scope = omc_NFInstNode_InstNode_instanceParent(threadData, _clsNode);
          }
          else
          {
            _parent_scope = _instance;

            _inst_scope = _scope;
          }

          _inst_scope = (omc_NFInstNode_InstNode_isEmpty(threadData, _scope)?_instance:_scope);

          /* Pattern-matching assignment */
          tmpMeta7 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 2)));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,6) == 0) goto goto_2;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 5));
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 6));
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 7));
          _ltree = tmpMeta8;
          _old_clss = tmpMeta9;
          _old_comps = tmpMeta10;
          _exts = tmpMeta11;
          _imps = tmpMeta12;
          _dups = tmpMeta13;

          _classCount = arrayLength(_old_clss);

          _compCount = arrayLength(_old_comps) - arrayLength(_exts);

          _exts = arrayCopy(_exts);

          tmp18 = ((modelica_integer) 1); tmp19 = 1; tmp20 = arrayLength(_exts);
          if(!(((tmp19 > 0) && (tmp18 > tmp20)) || ((tmp19 < 0) && (tmp18 < tmp20))))
          {
            modelica_integer _i;
            for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp18, tmp20); _i += tmp19)
            {
              _node = arrayGet(_exts,_i) /* DAE.ASUB */;

              /* Pattern-matching assignment */
              tmpMeta14 = omc_NFInstNode_InstNode_nodeType(threadData, _node);
              if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,1,3) == 0) goto goto_2;
              tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
              tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
              _ext_def = tmpMeta15;
              _inst_ty = tmpMeta16;

              tmpMeta17 = mmc_mk_box4(4, &NFInstNode_InstNodeType_BASE__CLASS__desc, _instance, _ext_def, _inst_ty);
              _node = omc_NFInstNode_InstNode_setNodeType(threadData, tmpMeta17, _node);

              _node = omc_NFClassTree_ClassTree_instantiate(threadData, _node, _OMC_LIT28, _inst_scope ,NULL ,&_cls_count ,&_comp_count);

              arrayUpdate(_exts,_i,_node);

              _classCount = _cls_count + _classCount;

              _compCount = _comp_count + _compCount;
            }
          }

          _comps = arrayCreateNoInit(_compCount, omc_Mutable_create(threadData, _OMC_LIT28));

          _clss = arrayCreateNoInit(_classCount, omc_Mutable_create(threadData, _OMC_LIT28));

          _is_typish = ((omc_NFRestriction_isType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 6)))) || omc_NFRestriction_isOperatorRecord(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 6))))) || omc_NFRestriction_isOperator(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 6)))));

          {
            modelica_metatype _c;
            for (tmpMeta21 = _old_clss, tmp24 = arrayLength(tmpMeta21), tmp23 = 1; tmp23 <= tmp24; tmp23++)
            {
              _c = arrayGet(tmpMeta21,tmp23);
              if(_is_typish)
              {
                _c = omc_NFInstNode_InstNode_setParent(threadData, _clsNode, _c);
              }
              else
              {
                _c = omc_NFInstNode_InstNode_clone(threadData, _c);

                _c = omc_NFInstNode_InstNode_setParent(threadData, _instance, _c);
              }

              if(omc_NFInstNode_InstNode_isOuter(threadData, _c))
              {
                omc_NFClassTree_ClassTree_checkOuterClass(threadData, _c);

                _c = omc_NFClassTree_ClassTree_linkInnerOuter(threadData, _c, _parent_scope);
              }

              arrayUpdateNoBoundsChecking(_clss, _cls_idx, omc_Mutable_create(threadData, _c));

              _cls_idx = ((modelica_integer) 1) + _cls_idx;
            }
          }

          {
            modelica_metatype _ext;
            for (tmpMeta25 = _exts, tmp33 = arrayLength(tmpMeta25), tmp32 = 1; tmp32 <= tmp33; tmp32++)
            {
              _ext = arrayGet(tmpMeta25,tmp32);
              { /* match expression */
                modelica_metatype tmp28_1;
                tmp28_1 = omc_NFClass_classTree(threadData, omc_NFInstNode_InstNode_getClass(threadData, _ext));
                {
                  volatile mmc_switch_type tmp28;
                  int tmp29;
                  tmp28 = 0;
                  for (; tmp28 < 2; tmp28++) {
                    switch (MMC_SWITCH_CAST(tmp28)) {
                    case 0: {
                      modelica_metatype tmpMeta30;
                      if (mmc__uniontype__metarecord__typedef__equal(tmp28_1,2,7) == 0) goto tmp27_end;
                      tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp28_1), 3));
                      
                      _ext_clss = tmpMeta30;
                      /* Pattern matching succeeded */
                      _cls_count = arrayLength(_ext_clss);

                      if((_cls_count > ((modelica_integer) 0)))
                      {
                        omc_Array_copyRange(threadData, _ext_clss, _clss, ((modelica_integer) 1), _cls_count, _cls_idx);

                        _cls_idx = _cls_idx + _cls_count;
                      }
                      goto tmp27_done;
                    }
                    case 1: {
                      
                      /* Pattern matching succeeded */
                      goto tmp27_done;
                    }
                    }
                    goto tmp27_end;
                    tmp27_end: ;
                  }
                  goto goto_26;
                  goto_26:;
                  goto goto_2;
                  goto tmp27_done;
                  tmp27_done:;
                }
              }
              ;
            }
          }

          {
            modelica_metatype _c;
            for (tmpMeta34 = _old_comps, tmp46 = arrayLength(tmpMeta34), tmp45 = 1; tmp45 <= tmp46; tmp45++)
            {
              _c = arrayGet(tmpMeta34,tmp45);
              { /* match expression */
                modelica_metatype tmp37_1;
                tmp37_1 = _c;
                {
                  volatile mmc_switch_type tmp37;
                  int tmp38;
                  tmp37 = 0;
                  for (; tmp37 < 2; tmp37++) {
                    switch (MMC_SWITCH_CAST(tmp37)) {
                    case 0: {
                      modelica_metatype tmpMeta43;
                      if (mmc__uniontype__metarecord__typedef__equal(tmp37_1,1,6) == 0) goto tmp36_end;
                      
                      /* Pattern matching succeeded */
                      _node = omc_NFInstNode_InstNode_cloneComponent(threadData, _c, _instance);

                      if(omc_NFInstNode_InstNode_isOuter(threadData, _node))
                      {
                        { /* matchcontinue expression */
                          {
                            volatile mmc_switch_type tmp41;
                            int tmp42;
                            tmp41 = 0;
                            MMC_TRY_INTERNAL(mmc_jumper)
                            tmp40_top:
                            threadData->mmc_jumper = &new_mmc_jumper;
                            for (; tmp41 < 2; tmp41++) {
                              switch (MMC_SWITCH_CAST(tmp41)) {
                              case 0: {
                                /* Pattern matching succeeded */
                                _node = omc_NFClassTree_ClassTree_linkInnerOuter(threadData, _node, _inst_scope);
                                goto tmp40_done;
                              }
                              case 1: {
                                /* Pattern matching succeeded */
                                if((!omc_Flags_isSet(threadData, _OMC_LIT38)))
                                {
                                  goto goto_39;
                                }
                                goto tmp40_done;
                              }
                              }
                              goto tmp40_end;
                              tmp40_end: ;
                            }
                            goto goto_39;
                            tmp40_done:
                            (void)tmp41;
                            MMC_RESTORE_INTERNAL(mmc_jumper);
                            goto tmp40_done2;
                            goto_39:;
                            MMC_CATCH_INTERNAL(mmc_jumper);
                            if (++tmp41 < 2) {
                              goto tmp40_top;
                            }
                            goto goto_35;
                            tmp40_done2:;
                          }
                        }
                        ;
                      }

                      arrayUpdateNoBoundsChecking(_comps, _comp_idx, omc_Mutable_create(threadData, _node));

                      tmpMeta43 = mmc_mk_cons(mmc_mk_integer(_comp_idx), _local_comps);
                      _local_comps = tmpMeta43;

                      _comp_idx = ((modelica_integer) 1) + _comp_idx;
                      goto tmp36_done;
                    }
                    case 1: {
                      if (mmc__uniontype__metarecord__typedef__equal(tmp37_1,3,1) == 0) goto tmp36_end;
                      
                      /* Pattern matching succeeded */
                      _comp_idx = omc_NFClassTree_ClassTree_instExtendsComps(threadData, arrayGet(_exts,mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 2))))) /* DAE.ASUB */, _comps, _comp_idx);
                      goto tmp36_done;
                    }
                    }
                    goto tmp36_end;
                    tmp36_end: ;
                  }
                  goto goto_35;
                  goto_35:;
                  goto goto_2;
                  goto tmp36_done;
                  tmp36_done:;
                }
              }
              ;
            }
          }

          if((_comp_idx != ((modelica_integer) 1) + _compCount))
          {
            tmpMeta47 = stringAppend(_OMC_LIT39,omc_NFInstNode_InstNode_name(threadData, _clsNode));
            omc_Error_assertion(threadData, 0 /* false */, tmpMeta47, _OMC_LIT40);
          }

          if((_cls_idx != ((modelica_integer) 1) + _classCount))
          {
            tmpMeta48 = stringAppend(_OMC_LIT41,omc_NFInstNode_InstNode_name(threadData, _clsNode));
            omc_Error_assertion(threadData, 0 /* false */, tmpMeta48, _OMC_LIT42);
          }

          _local_comps = listReverseInPlace(_local_comps);

          tmpMeta50 = mmc_mk_box8(5, &NFClassTree_ClassTree_INSTANTIATED__TREE__desc, _ltree, _clss, _comps, _local_comps, _exts, _imps, _dups);
          tmpMeta49 = MMC_TAGPTR(mmc_alloc_words(7));
          memcpy(MMC_UNTAGPTR(tmpMeta49), MMC_UNTAGPTR(_cls), 7*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta49))[2] = tmpMeta50;
          _cls = tmpMeta49;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta51;
          modelica_metatype tmpMeta52;
          modelica_metatype tmpMeta53;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,7) == 0) goto tmp3_end;
          tmpMeta51 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _node = tmpMeta51;
          /* Pattern matching succeeded */
          tmpMeta52 = mmc_mk_box4(4, &NFInstNode_InstNodeType_BASE__CLASS__desc, _clsNode, omc_NFInstNode_InstNode_definition(threadData, _node), omc_NFInstNode_InstNode_nodeType(threadData, _node));
          _node = omc_NFInstNode_InstNode_setNodeType(threadData, tmpMeta52, _node);

          _node = omc_NFClassTree_ClassTree_instantiate(threadData, _node, _instance, _scope ,&_instance ,&_classCount ,&_compCount);

          tmpMeta53 = MMC_TAGPTR(mmc_alloc_words(9));
          memcpy(MMC_UNTAGPTR(tmpMeta53), MMC_UNTAGPTR(_cls), 9*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta53))[2] = _node;
          _cls = tmpMeta53;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta54;
          modelica_metatype tmpMeta55;
          modelica_metatype tmpMeta56;
          modelica_metatype tmpMeta57;
          modelica_metatype tmpMeta58;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,5) == 0) goto tmp3_end;
          tmpMeta54 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta54,3,5) == 0) goto tmp3_end;
          tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta54), 4));
          
          _tree = tmpMeta54;
          _old_comps = tmpMeta55;
          /* Pattern matching succeeded */
          _instance = (omc_NFInstNode_InstNode_isEmpty(threadData, _instance)?_clsNode:_instance);

          tmpMeta57 = mmc_mk_box1(0, _instance);
          tmpMeta56 = MMC_TAGPTR(mmc_alloc_words(7));
          memcpy(MMC_UNTAGPTR(tmpMeta56), MMC_UNTAGPTR(_tree), 7*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta56))[4] = omc_Array_map(threadData, _old_comps, (modelica_fnptr) mmc_mk_box2(0,closure9_NFInstNode_InstNode_cloneComponent,tmpMeta57));
          _tree = tmpMeta56;

          tmpMeta58 = MMC_TAGPTR(mmc_alloc_words(7));
          memcpy(MMC_UNTAGPTR(tmpMeta58), MMC_UNTAGPTR(_cls), 7*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta58))[3] = _tree;
          _cls = tmpMeta58;

          _compCount = arrayLength(_old_comps);
          goto tmp3_done;
        }
        case 4: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,5) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta59;
          modelica_metatype tmpMeta60;
          modelica_metatype tmpMeta61;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,5) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_NFInstNode_InstNode_isBaseClass(threadData, _clsNode)) goto tmp3_end;
          /* Pattern-matching assignment */
          tmpMeta59 = omc_NFInstNode_InstNode_nodeType(threadData, _clsNode);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta59,1,3) == 0) goto goto_2;
          tmpMeta60 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta59), 3));
          _ext_def = tmpMeta60;

          tmpMeta61 = mmc_mk_cons(omc_SCodeUtil_getElementName(threadData, _ext_def), MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addSourceMessage(threadData, _OMC_LIT45, tmpMeta61, omc_NFInstNode_InstNode_info(threadData, _clsNode));
          goto goto_2;
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          omc_Error_assertion(threadData, 0 /* false */, _OMC_LIT46, _OMC_LIT47);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  ;

  omc_NFInstNode_InstNode_updateClass(threadData, _cls, _clsNode);
  _return: OMC_LABEL_UNUSED
  if (out_instance) { *out_instance = _instance; }
  if (out_classCount) { *out_classCount = _classCount; }
  if (out_compCount) { *out_compCount = _compCount; }
  return _clsNode;
}
modelica_metatype boxptr_NFClassTree_ClassTree_instantiate(threadData_t *threadData, modelica_metatype __omcQ_24in_5FclsNode, modelica_metatype __omcQ_24in_5Finstance, modelica_metatype _scope, modelica_metatype *out_instance, modelica_metatype *out_classCount, modelica_metatype *out_compCount)
{
  modelica_integer _classCount;
  modelica_integer _compCount;
  modelica_metatype _clsNode = NULL;
  _clsNode = omc_NFClassTree_ClassTree_instantiate(threadData, __omcQ_24in_5FclsNode, __omcQ_24in_5Finstance, _scope, out_instance, &_classCount, &_compCount);
  /* skip box _clsNode; NFInstNode.InstNode */
  /* skip box _instance; NFInstNode.InstNode */
  if (out_classCount) { *out_classCount = mmc_mk_icon(_classCount); }
  if (out_compCount) { *out_compCount = mmc_mk_icon(_compCount); }
  return _clsNode;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_expand(threadData_t *threadData, modelica_metatype __omcQ_24in_5Ftree)
{
  modelica_metatype _tree = NULL;
  modelica_metatype _ltree = NULL;
  modelica_metatype _lentry = NULL;
  modelica_metatype _exts = NULL;
  modelica_metatype _clss = NULL;
  modelica_metatype _comps = NULL;
  modelica_metatype _imps = NULL;
  modelica_metatype _ext_idxs = NULL;
  modelica_metatype tmpMeta1;
  modelica_integer _ccount;
  modelica_integer _cls_idx;
  modelica_integer _comp_idx;
  modelica_metatype _dups = NULL;
  modelica_metatype _dups_ptr = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta16;
  modelica_integer tmp17;
  modelica_integer tmp18;
  modelica_metatype tmpMeta19;
  modelica_metatype tmpMeta20;
  modelica_metatype tmpMeta21;
  modelica_metatype tmpMeta22;
  modelica_metatype tmpMeta23;
  modelica_integer tmp24;
  modelica_metatype tmpMeta25;
  modelica_integer tmp26;
  modelica_metatype tmpMeta27;
  modelica_integer tmp28;
  modelica_integer tmp29;
  modelica_metatype tmpMeta30;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = __omcQ_24in_5Ftree;
  // _ltree has no default value.
  // _lentry has no default value.
  // _exts has no default value.
  // _clss has no default value.
  // _comps has no default value.
  // _imps has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _ext_idxs = tmpMeta1;
  // _ccount has no default value.
  // _cls_idx has no default value.
  _comp_idx = ((modelica_integer) 1);
  // _dups has no default value.
  // _dups_ptr has no default value.
  /* Pattern-matching assignment */
  tmpMeta2 = _tree;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta2,0,6) == 0) MMC_THROW_INTERNAL();
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 3));
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 4));
  tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 5));
  tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 6));
  tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 7));
  _ltree = tmpMeta3;
  _clss = tmpMeta4;
  _comps = tmpMeta5;
  _exts = tmpMeta6;
  _imps = tmpMeta7;
  _dups = tmpMeta8;

  _cls_idx = ((modelica_integer) 1) + arrayLength(_clss);

  {
    modelica_metatype _c;
    for (tmpMeta9 = _comps, tmp18 = arrayLength(tmpMeta9), tmp17 = 1; tmp17 <= tmp18; tmp17++)
    {
      _c = arrayGet(tmpMeta9,tmp17);
      { /* match expression */
        modelica_metatype tmp12_1;
        tmp12_1 = _c;
        {
          int tmp12;
          {
            switch (MMC_SWITCH_CAST(valueConstructor(tmp12_1))) {
            case 4: {
              modelica_metatype tmpMeta13;
              
              /* Pattern matching succeeded */
              tmpMeta13 = mmc_mk_box2(4, &NFLookupTree_Entry_COMPONENT__desc, mmc_mk_integer(_comp_idx));
              _lentry = tmpMeta13;

              _ltree = omc_NFClassTree_ClassTree_addLocalElement(threadData, omc_NFInstNode_InstNode_name(threadData, _c), _lentry, _tree, _ltree);

              if(omc_NFInstNode_InstNode_isRedeclare(threadData, _c))
              {
                _dups = omc_NFDuplicateTree_add(threadData, _dups, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 2))), omc_NFDuplicateTree_newRedeclare(threadData, _lentry), boxvar_NFDuplicateTree_addConflictDefault);
              }

              _comp_idx = ((modelica_integer) 1) + _comp_idx;
              goto tmp11_done;
            }
            case 6: {
              modelica_metatype tmpMeta14;
              modelica_metatype tmpMeta15;
              
              /* Pattern matching succeeded */
              tmpMeta15 = mmc_mk_box2(0, mmc_mk_integer(((modelica_integer) -1) + _cls_idx), mmc_mk_integer(((modelica_integer) -1) + _comp_idx));
              tmpMeta14 = mmc_mk_cons(tmpMeta15, _ext_idxs);
              _ext_idxs = tmpMeta14;

              _cls_idx = omc_NFClassTree_ClassTree_countInheritedElements(threadData, arrayGet(_exts,mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 2))))) /* DAE.ASUB */, _cls_idx, _comp_idx ,&_comp_idx);
              goto tmp11_done;
            }
            default:
            tmp11_default: OMC_LABEL_UNUSED; {
              
              /* Pattern matching succeeded */
              omc_Error_assertion(threadData, 0 /* false */, _OMC_LIT48, _OMC_LIT49);
              goto goto_10;
              goto tmp11_done;
            }
            }
            goto tmp11_end;
            tmp11_end: ;
          }
          goto goto_10;
          goto_10:;
          MMC_THROW_INTERNAL();
          goto tmp11_done;
          tmp11_done:;
        }
      }
      ;
    }
  }

  _dups_ptr = omc_Mutable_create(threadData, _dups);

  if((!listEmpty(_ext_idxs)))
  {
    _ext_idxs = listReverseInPlace(_ext_idxs);

    {
      modelica_metatype _ext;
      for (tmpMeta19 = _exts, tmp29 = arrayLength(tmpMeta19), tmp28 = 1; tmp28 <= tmp29; tmp28++)
      {
        _ext = arrayGet(tmpMeta19,tmp28);
        /* Pattern-matching assignment */
        tmpMeta20 = _ext_idxs;
        if (listEmpty(tmpMeta20)) MMC_THROW_INTERNAL();
        tmpMeta21 = MMC_CAR(tmpMeta20);
        tmpMeta22 = MMC_CDR(tmpMeta20);
        tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 1));
        tmp24 = mmc_unbox_integer(tmpMeta23);
        tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 2));
        tmp26 = mmc_unbox_integer(tmpMeta25);
        _cls_idx = tmp24  /* pattern as ty=Integer */;
        _comp_idx = tmp26  /* pattern as ty=Integer */;
        _ext_idxs = tmpMeta22;

        _ltree = omc_NFClassTree_ClassTree_expandExtends(threadData, _ext, _ltree, _cls_idx, _comp_idx, _dups_ptr);
      }
    }
  }

  tmpMeta30 = mmc_mk_box7(4, &NFClassTree_ClassTree_EXPANDED__TREE__desc, _ltree, _clss, _comps, _exts, _imps, omc_Mutable_access(threadData, _dups_ptr));
  _tree = tmpMeta30;
  _return: OMC_LABEL_UNUSED
  return _tree;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_addElementsToFlatTree(threadData_t *threadData, modelica_metatype _elements, modelica_metatype __omcQ_24in_5Ftree)
{
  modelica_metatype _tree = NULL;
  modelica_metatype _ltree = NULL;
  modelica_metatype _cls_arr = NULL;
  modelica_metatype _comp_arr = NULL;
  modelica_metatype _cls_lst = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _comp_lst = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype _imports = NULL;
  modelica_metatype _duplicates = NULL;
  modelica_integer _cls_idx;
  modelica_integer _comp_idx;
  modelica_metatype _lentry = NULL;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = __omcQ_24in_5Ftree;
  // _ltree has no default value.
  // _cls_arr has no default value.
  // _comp_arr has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _cls_lst = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _comp_lst = tmpMeta2;
  // _imports has no default value.
  // _duplicates has no default value.
  // _cls_idx has no default value.
  // _comp_idx has no default value.
  // _lentry has no default value.
  /* Pattern-matching assignment */
  tmpMeta3 = _tree;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta3,3,5) == 0) MMC_THROW_INTERNAL();
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 2));
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 3));
  tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 4));
  tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 5));
  tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 6));
  _ltree = tmpMeta4;
  _cls_arr = tmpMeta5;
  _comp_arr = tmpMeta6;
  _imports = tmpMeta7;
  _duplicates = tmpMeta8;

  _cls_idx = arrayLength(_cls_arr);

  _comp_idx = arrayLength(_comp_arr);

  {
    modelica_metatype _e;
    for (tmpMeta9 = _elements; !listEmpty(tmpMeta9); tmpMeta9=MMC_CDR(tmpMeta9))
    {
      _e = MMC_CAR(tmpMeta9);
      if(omc_NFInstNode_InstNode_isComponent(threadData, _e))
      {
        _comp_idx = ((modelica_integer) 1) + _comp_idx;

        tmpMeta10 = mmc_mk_box2(4, &NFLookupTree_Entry_COMPONENT__desc, mmc_mk_integer(_comp_idx));
        _lentry = tmpMeta10;

        tmpMeta11 = mmc_mk_cons(_e, _comp_lst);
        _comp_lst = tmpMeta11;
      }
      else
      {
        _cls_idx = ((modelica_integer) 1) + _cls_idx;

        tmpMeta12 = mmc_mk_box2(3, &NFLookupTree_Entry_CLASS__desc, mmc_mk_integer(_cls_idx));
        _lentry = tmpMeta12;

        tmpMeta13 = mmc_mk_cons(_e, _cls_lst);
        _cls_lst = tmpMeta13;
      }

      _ltree = omc_NFClassTree_ClassTree_addLocalElement(threadData, omc_NFInstNode_InstNode_name(threadData, _e), _lentry, _tree, _ltree);
    }
  }

  _cls_arr = omc_Array_appendList(threadData, _cls_arr, listReverseInPlace(_cls_lst));

  _comp_arr = omc_Array_appendList(threadData, _comp_arr, listReverseInPlace(_comp_lst));

  tmpMeta15 = mmc_mk_box6(6, &NFClassTree_ClassTree_FLAT__TREE__desc, _ltree, _cls_arr, _comp_arr, _imports, _duplicates);
  _tree = tmpMeta15;
  _return: OMC_LABEL_UNUSED
  return _tree;
}

static modelica_metatype closure10_NFClassTree_ClassTree_addEnumConflict(threadData_t *thData, modelica_metatype closure, modelica_metatype newEntry, modelica_metatype oldEntry, modelica_string name)
{
  modelica_metatype literal = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFClassTree_ClassTree_addEnumConflict(thData, newEntry, oldEntry, name, literal);
}
DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_fromEnumeration(threadData_t *threadData, modelica_metatype _literals, modelica_metatype _enumType, modelica_metatype _enumClass)
{
  modelica_metatype _tree = NULL;
  modelica_metatype _comps = NULL;
  modelica_integer _attr_count;
  modelica_integer _i;
  modelica_metatype _comp = NULL;
  modelica_metatype _ltree = NULL;
  modelica_string _name = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _tree has no default value.
  // _comps has no default value.
  _attr_count = ((modelica_integer) 5);
  _i = ((modelica_integer) 0);
  // _comp has no default value.
  // _ltree has no default value.
  // _name has no default value.
  _comps = arrayCreateNoInit(listLength(_literals) + _attr_count, _OMC_LIT28);

  _ltree = _OMC_LIT64;

  arrayUpdateNoBoundsChecking(_comps, ((modelica_integer) 1), omc_NFInstNode_InstNode_fromComponent(threadData, _OMC_LIT58, _OMC_LIT67, _enumClass));

  tmpMeta1 = mmc_mk_box3(7, &NFComponent_TYPE__ATTRIBUTE__desc, _enumType, _OMC_LIT66);
  arrayUpdateNoBoundsChecking(_comps, ((modelica_integer) 2), omc_NFInstNode_InstNode_fromComponent(threadData, _OMC_LIT50, tmpMeta1, _enumClass));

  tmpMeta2 = mmc_mk_box3(7, &NFComponent_TYPE__ATTRIBUTE__desc, _enumType, _OMC_LIT66);
  arrayUpdateNoBoundsChecking(_comps, ((modelica_integer) 3), omc_NFInstNode_InstNode_fromComponent(threadData, _OMC_LIT52, tmpMeta2, _enumClass));

  tmpMeta3 = mmc_mk_box3(7, &NFComponent_TYPE__ATTRIBUTE__desc, _enumType, _OMC_LIT66);
  arrayUpdateNoBoundsChecking(_comps, ((modelica_integer) 4), omc_NFInstNode_InstNode_fromComponent(threadData, _OMC_LIT60, tmpMeta3, _enumClass));

  arrayUpdateNoBoundsChecking(_comps, ((modelica_integer) 5), omc_NFInstNode_InstNode_fromComponent(threadData, _OMC_LIT54, _OMC_LIT69, _enumClass));

  {
    modelica_metatype _l;
    for (tmpMeta4 = _literals; !listEmpty(tmpMeta4); tmpMeta4=MMC_CDR(tmpMeta4))
    {
      _l = MMC_CAR(tmpMeta4);
      _name = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_l), 2)));

      _i = ((modelica_integer) 1) + _i;

      _comp = omc_NFInstNode_InstNode_fromComponent(threadData, _name, omc_NFComponent_newEnum(threadData, _enumType, _name, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_l), 3))), _i), _enumClass);

      arrayUpdateNoBoundsChecking(_comps, _i + _attr_count, _comp);

      tmpMeta5 = mmc_mk_box2(4, &NFLookupTree_Entry_COMPONENT__desc, mmc_mk_integer(_i + _attr_count));
      tmpMeta6 = mmc_mk_box1(0, _comp);
      _ltree = omc_NFLookupTree_add(threadData, _ltree, _name, tmpMeta5, (modelica_fnptr) mmc_mk_box2(0,closure10_NFClassTree_ClassTree_addEnumConflict,tmpMeta6));
    }
  }

  tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta10 = mmc_mk_box6(6, &NFClassTree_ClassTree_FLAT__TREE__desc, _ltree, listArray(tmpMeta8), _comps, listArray(tmpMeta9), _OMC_LIT34);
  _tree = tmpMeta10;
  _return: OMC_LABEL_UNUSED
  return _tree;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_initImports(threadData_t *threadData, modelica_metatype __omcQ_24in_5Ftree, modelica_metatype _parent)
{
  modelica_metatype _tree = NULL;
  modelica_metatype _imports = NULL;
  modelica_metatype _init_imports = NULL;
  modelica_metatype _imp = NULL;
  modelica_metatype _ltree = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _tree = __omcQ_24in_5Ftree;
  // _imports has no default value.
  // _init_imports has no default value.
  // _imp has no default value.
  // _ltree has no default value.
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _tree;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta16;
          modelica_integer tmp17;
          modelica_integer tmp18;
          modelica_integer tmp19;
          modelica_integer tmp20;
          modelica_integer tmp21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
          
          _ltree = tmpMeta5;
          _imports = tmpMeta6;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(!(arrayLength(_imports) == ((modelica_integer) 0)))) goto tmp2_end;
          tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
          _init_imports = tmpMeta7;

          {
            modelica_metatype _imp;
            for (tmpMeta8 = _imports, tmp18 = arrayLength(tmpMeta8), tmp17 = 1; tmp17 <= tmp18; tmp17++)
            {
              _imp = arrayGet(tmpMeta8,tmp17);
              { /* match expression */
                modelica_metatype tmp12_1;
                tmp12_1 = _imp;
                {
                  volatile mmc_switch_type tmp12;
                  int tmp13;
                  tmp12 = 0;
                  for (; tmp12 < 2; tmp12++) {
                    switch (MMC_SWITCH_CAST(tmp12)) {
                    case 0: {
                      modelica_metatype tmpMeta14;
                      if (mmc__uniontype__metarecord__typedef__equal(tmp12_1,0,3) == 0) goto tmp11_end;
                      tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp12_1), 2));
                      if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,2,1) == 0) goto tmp11_end;
                      
                      /* Pattern matching succeeded */
                      tmpMeta9 = omc_NFImport_instUnqualified(threadData, _imp, _init_imports);
                      goto tmp11_done;
                    }
                    case 1: {
                      modelica_metatype tmpMeta15;
                      
                      /* Pattern matching succeeded */
                      tmpMeta15 = mmc_mk_cons(_imp, _init_imports);
                      tmpMeta9 = tmpMeta15;
                      goto tmp11_done;
                    }
                    }
                    goto tmp11_end;
                    tmp11_end: ;
                  }
                  goto goto_10;
                  goto_10:;
                  goto goto_1;
                  goto tmp11_done;
                  tmp11_done:;
                }
              }
              _init_imports = tmpMeta9;
            }
          }

          _imports = listArray(_init_imports);

          tmp19 = arrayLength(_imports); tmp20 = ((modelica_integer) -1); tmp21 = ((modelica_integer) 1);
          if(!(((tmp20 > 0) && (tmp19 > tmp21)) || ((tmp20 < 0) && (tmp19 < tmp21))))
          {
            modelica_integer _i;
            for(_i = arrayLength(_imports); in_range_integer(_i, tmp19, tmp21); _i += tmp20)
            {
              _ltree = omc_NFClassTree_ClassTree_addImport(threadData, arrayGet(_imports,_i) /* DAE.ASUB */, _i, _ltree, _imports);
            }
          }

          tmpMeta22 = MMC_TAGPTR(mmc_alloc_words(8));
          memcpy(MMC_UNTAGPTR(tmpMeta22), MMC_UNTAGPTR(_tree), 8*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta22))[6] = _imports;
          _tree = tmpMeta22;

          tmpMeta23 = MMC_TAGPTR(mmc_alloc_words(8));
          memcpy(MMC_UNTAGPTR(tmpMeta23), MMC_UNTAGPTR(_tree), 8*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta23))[2] = _ltree;
          _tree = tmpMeta23;
          goto tmp2_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _tree;
}

DLLDirection
modelica_metatype omc_NFClassTree_ClassTree_fromSCode(threadData_t *threadData, modelica_metatype _elements, modelica_boolean _isClassExtends, modelica_metatype _parent)
{
  modelica_metatype _tree = NULL;
  modelica_metatype _ltree = NULL;
  modelica_metatype _lentry = NULL;
  modelica_integer _clsc;
  modelica_integer _compc;
  modelica_integer _extc;
  modelica_integer _i;
  modelica_metatype _clss = NULL;
  modelica_metatype _comps = NULL;
  modelica_metatype _exts = NULL;
  modelica_integer _cls_idx;
  modelica_integer _ext_idx;
  modelica_integer _comp_idx;
  modelica_metatype _dups = NULL;
  modelica_metatype _imps = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _imps_arr = NULL;
  modelica_metatype _info = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _tree has no default value.
  // _ltree has no default value.
  // _lentry has no default value.
  // _clsc has no default value.
  // _compc has no default value.
  // _extc has no default value.
  // _i has no default value.
  // _clss has no default value.
  // _comps has no default value.
  // _exts has no default value.
  _cls_idx = ((modelica_integer) 0);
  _ext_idx = ((modelica_integer) 0);
  _comp_idx = ((modelica_integer) 0);
  // _dups has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _imps = tmpMeta1;
  // _imps_arr has no default value.
  // _info has no default value.
  _ltree = omc_NFLookupTree_new(threadData);

  _clsc = omc_NFClassTree_ClassTree_countElements(threadData, _elements ,&_compc ,&_extc);

  if(_isClassExtends)
  {
    _extc = ((modelica_integer) 1) + _extc;
  }

  _clss = arrayCreateNoInit(_clsc, _OMC_LIT28);

  _comps = arrayCreateNoInit(_compc + _extc, _OMC_LIT28);

  _exts = arrayCreateNoInit(_extc, _OMC_LIT28);

  _dups = omc_NFDuplicateTree_new(threadData);

  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta3 = mmc_mk_box7(3, &NFClassTree_ClassTree_PARTIAL__TREE__desc, _ltree, _clss, _comps, _exts, listArray(tmpMeta2), _dups);
  _tree = tmpMeta3;

  if(_isClassExtends)
  {
    arrayUpdate(_exts,((modelica_integer) 1),_OMC_LIT28);

    arrayUpdate(_comps,((modelica_integer) 1),_OMC_LIT70);

    _ext_idx = ((modelica_integer) 1) + _ext_idx;

    _comp_idx = ((modelica_integer) 1) + _comp_idx;
  }

  {
    modelica_metatype _e;
    for (tmpMeta4 = _elements; !listEmpty(tmpMeta4); tmpMeta4=MMC_CDR(tmpMeta4))
    {
      _e = MMC_CAR(tmpMeta4);
      { /* match expression */
        modelica_metatype tmp7_1;
        tmp7_1 = _e;
        {
          int tmp7;
          {
            switch (MMC_SWITCH_CAST(valueConstructor(tmp7_1))) {
            case 5: {
              modelica_metatype tmpMeta8;
              
              /* Pattern matching succeeded */
              _cls_idx = ((modelica_integer) 1) + _cls_idx;

              arrayUpdateNoBoundsChecking(_clss, _cls_idx, omc_NFInstNode_InstNode_newClass(threadData, _e, _parent, _OMC_LIT71));

              tmpMeta8 = mmc_mk_box2(3, &NFLookupTree_Entry_CLASS__desc, mmc_mk_integer(_cls_idx));
              _lentry = tmpMeta8;

              _ltree = omc_NFClassTree_ClassTree_addLocalElement(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e), 2))), _lentry, _tree, _ltree);

              if((omc_SCodeUtil_isElementRedeclare(threadData, _e) || omc_SCodeUtil_isClassExtends(threadData, _e)))
              {
                _dups = omc_NFDuplicateTree_add(threadData, _dups, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e), 2))), omc_NFDuplicateTree_newRedeclare(threadData, _lentry), boxvar_NFDuplicateTree_addConflictDefault);
              }
              goto tmp6_done;
            }
            case 6: {
              
              /* Pattern matching succeeded */
              _comp_idx = ((modelica_integer) 1) + _comp_idx;

              arrayUpdateNoBoundsChecking(_comps, _comp_idx, omc_NFInstNode_InstNode_newComponent(threadData, _e, _OMC_LIT28));
              goto tmp6_done;
            }
            case 4: {
              modelica_metatype tmpMeta9;
              
              /* Pattern matching succeeded */
              _ext_idx = ((modelica_integer) 1) + _ext_idx;

              arrayUpdateNoBoundsChecking(_exts, _ext_idx, omc_NFInstNode_InstNode_newExtends(threadData, _e, _parent));

              _comp_idx = ((modelica_integer) 1) + _comp_idx;

              tmpMeta9 = mmc_mk_box2(6, &NFInstNode_InstNode_REF__NODE__desc, mmc_mk_integer(_ext_idx));
              arrayUpdateNoBoundsChecking(_comps, _comp_idx, tmpMeta9);
              goto tmp6_done;
            }
            case 3: {
              modelica_metatype tmpMeta10;
              modelica_metatype tmpMeta11;
              
              /* Pattern matching succeeded */
              tmpMeta11 = mmc_mk_box4(3, &NFImport_UNRESOLVED__IMPORT__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e), 2))), _parent, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e), 4))));
              tmpMeta10 = mmc_mk_cons(tmpMeta11, _imps);
              _imps = tmpMeta10;
              goto tmp6_done;
            }
            }
            goto tmp6_end;
            tmp6_end: ;
          }
          goto goto_5;
          goto_5:;
          MMC_THROW_INTERNAL();
          goto tmp6_done;
          tmp6_done:;
        }
      }
      ;
    }
  }

  tmpMeta13 = mmc_mk_box7(3, &NFClassTree_ClassTree_PARTIAL__TREE__desc, _ltree, _clss, _comps, _exts, listArray(_imps), _dups);
  _tree = tmpMeta13;
  _return: OMC_LABEL_UNUSED
  return _tree;
}
modelica_metatype boxptr_NFClassTree_ClassTree_fromSCode(threadData_t *threadData, modelica_metatype _elements, modelica_metatype _isClassExtends, modelica_metatype _parent)
{
  modelica_integer tmp1;
  modelica_metatype _tree = NULL;
  tmp1 = mmc_unbox_integer(_isClassExtends);
  _tree = omc_NFClassTree_ClassTree_fromSCode(threadData, _elements, tmp1, _parent);
  /* skip box _tree; NFClassTree.ClassTree */
  return _tree;
}

