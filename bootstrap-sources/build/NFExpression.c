#include "omc_simulation_settings.h"
#include "NFExpression.h"
#define _OMC_LIT0_data "name"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT0,4,_OMC_LIT0_data);
#define _OMC_LIT0 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT0)
#define _OMC_LIT1_data "value"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT1,5,_OMC_LIT1_data);
#define _OMC_LIT1 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT1)
#define _OMC_LIT2_data "$kind"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT2,5,_OMC_LIT2_data);
#define _OMC_LIT2 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT2)
#define _OMC_LIT3_data "enum"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT3,4,_OMC_LIT3_data);
#define _OMC_LIT3 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT3)
#define _OMC_LIT4_data "index"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT4,5,_OMC_LIT4_data);
#define _OMC_LIT4 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT4)
#define _OMC_LIT5_data "typename"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT5,8,_OMC_LIT5_data);
#define _OMC_LIT5 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT5)
#define _OMC_LIT6_data "range"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT6,5,_OMC_LIT6_data);
#define _OMC_LIT6 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT6)
#define _OMC_LIT7_data "start"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT7,5,_OMC_LIT7_data);
#define _OMC_LIT7 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT7)
#define _OMC_LIT8_data "step"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT8,4,_OMC_LIT8_data);
#define _OMC_LIT8 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT8)
#define _OMC_LIT9_data "stop"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT9,4,_OMC_LIT9_data);
#define _OMC_LIT9 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT9)
#define _OMC_LIT10_data "tuple"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT10,5,_OMC_LIT10_data);
#define _OMC_LIT10 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT10)
#define _OMC_LIT11_data "elements"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT11,8,_OMC_LIT11_data);
#define _OMC_LIT11 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT11)
#define _OMC_LIT12_data "record"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT12,6,_OMC_LIT12_data);
#define _OMC_LIT12 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT12)
#define _OMC_LIT13_data "."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT13,1,_OMC_LIT13_data);
#define _OMC_LIT13 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT13)
#define _OMC_LIT14_data "call"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT14,4,_OMC_LIT14_data);
#define _OMC_LIT14 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT14)
#define _OMC_LIT15_data "size"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT15,4,_OMC_LIT15_data);
#define _OMC_LIT15 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT15)
#define _OMC_LIT16_data "arguments"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT16,9,_OMC_LIT16_data);
#define _OMC_LIT16 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT16)
#define _OMC_LIT17_data "binary_op"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT17,9,_OMC_LIT17_data);
#define _OMC_LIT17 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT17)
#define _OMC_LIT18_data "lhs"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT18,3,_OMC_LIT18_data);
#define _OMC_LIT18 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT18)
#define _OMC_LIT19_data "op"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT19,2,_OMC_LIT19_data);
#define _OMC_LIT19 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT19)
#define _OMC_LIT20_data ""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT20,0,_OMC_LIT20_data);
#define _OMC_LIT20 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT20)
#define _OMC_LIT21_data "rhs"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT21,3,_OMC_LIT21_data);
#define _OMC_LIT21 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT21)
#define _OMC_LIT22_data "unary_op"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT22,8,_OMC_LIT22_data);
#define _OMC_LIT22 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT22)
#define _OMC_LIT23_data "exp"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT23,3,_OMC_LIT23_data);
#define _OMC_LIT23 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT23)
#define _OMC_LIT24_data "multary_op"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT24,10,_OMC_LIT24_data);
#define _OMC_LIT24 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT24)
#define _OMC_LIT25_data "args"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT25,4,_OMC_LIT25_data);
#define _OMC_LIT25 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT25)
#define _OMC_LIT26_data "inv_args"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT26,8,_OMC_LIT26_data);
#define _OMC_LIT26 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT26)
#define _OMC_LIT27_data "if"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT27,2,_OMC_LIT27_data);
#define _OMC_LIT27 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT27)
#define _OMC_LIT28_data "condition"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT28,9,_OMC_LIT28_data);
#define _OMC_LIT28 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT28)
#define _OMC_LIT29_data "true"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT29,4,_OMC_LIT29_data);
#define _OMC_LIT29 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT29)
#define _OMC_LIT30_data "false"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT30,5,_OMC_LIT30_data);
#define _OMC_LIT30 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT30)
#define _OMC_LIT31_data "sub"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT31,3,_OMC_LIT31_data);
#define _OMC_LIT31 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT31)
#define _OMC_LIT32_data "subscripts"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT32,10,_OMC_LIT32_data);
#define _OMC_LIT32 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT32)
#define _OMC_LIT33_data "tuple_element"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT33,13,_OMC_LIT33_data);
#define _OMC_LIT33 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT33)
#define _OMC_LIT34_data "record_element"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT34,14,_OMC_LIT34_data);
#define _OMC_LIT34 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT34)
#define _OMC_LIT35_data "field"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT35,5,_OMC_LIT35_data);
#define _OMC_LIT35 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT35)
#define _OMC_LIT36_data "function"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT36,8,_OMC_LIT36_data);
#define _OMC_LIT36 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT36)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT37,0.0);
#define _OMC_LIT37 MMC_REFREALLIT(_OMC_LIT_STRUCT37)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT38,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT20,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT37}};
#define _OMC_LIT38 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT38)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT39,4,3) {&NFCeval_EvalTarget_EVAL__TARGET__desc,_OMC_LIT38,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT39 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT39)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT40,2,3) {&NFExpression_INTEGER__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT40 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT40)
#define _OMC_LIT41_data "Connections"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT41,11,_OMC_LIT41_data);
#define _OMC_LIT41 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT41)
#define _OMC_LIT42_data "cardinality"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT42,11,_OMC_LIT42_data);
#define _OMC_LIT42 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT42)
#define _OMC_LIT43_data "Integer"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT43,7,_OMC_LIT43_data);
#define _OMC_LIT43 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT43)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT44,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT43}};
#define _OMC_LIT44 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT44)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT45,1,11) {&NFInstNode_InstNode_EMPTY__NODE__desc,}};
#define _OMC_LIT45 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT45)
#define _OMC_LIT46_data "e"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT46,1,_OMC_LIT46_data);
#define _OMC_LIT46 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT46)
#define _OMC_LIT47_data ":"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT47,1,_OMC_LIT47_data);
#define _OMC_LIT47 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT47)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT48,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT47}};
#define _OMC_LIT48 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT48)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT49,3,8) {&NFType_ENUMERATION__desc,_OMC_LIT48,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT49 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT49)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT50,1,3) {&NFBinding_UNBOUND__desc,}};
#define _OMC_LIT50 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT50)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT51,1,4) {&NFPrefixes_Replaceable_NOT__REPLACEABLE__desc,}};
#define _OMC_LIT51 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT51)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT52,10,3) {&NFAttributes_ATTRIBUTES__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT51,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */))}};
#define _OMC_LIT52 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT52)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT53,3,3) {&SCode_Comment_COMMENT__desc,MMC_REFSTRUCTLIT(mmc_none),MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT53 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT53)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT54,9,4) {&NFComponent_COMPONENT__desc,_OMC_LIT45,_OMC_LIT49,_OMC_LIT50,_OMC_LIT50,_OMC_LIT52,_OMC_LIT53,MMC_IMMEDIATE(MMC_TAGFIXNUM(4)),_OMC_LIT38}};
#define _OMC_LIT54 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT54)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT55,1,1) {_OMC_LIT54}};
#define _OMC_LIT55 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT55)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT56,1,9) {&NFInstNode_InstNodeType_NORMAL__COMP__desc,}};
#define _OMC_LIT56 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT56)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT57,7,4) {&NFInstNode_InstNode_COMPONENT__NODE__desc,_OMC_LIT46,MMC_REFSTRUCTLIT(mmc_none),MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),_OMC_LIT55,_OMC_LIT45,_OMC_LIT56}};
#define _OMC_LIT57 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT57)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT58,2,1) {_OMC_LIT57,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT58 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT58)
#define _OMC_LIT59_data "i"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT59,1,_OMC_LIT59_data);
#define _OMC_LIT59 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT59)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT60,1,3) {&NFType_INTEGER__desc,}};
#define _OMC_LIT60 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT60)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT61,9,4) {&NFComponent_COMPONENT__desc,_OMC_LIT45,_OMC_LIT60,_OMC_LIT50,_OMC_LIT50,_OMC_LIT52,_OMC_LIT53,MMC_IMMEDIATE(MMC_TAGFIXNUM(4)),_OMC_LIT38}};
#define _OMC_LIT61 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT61)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT62,1,1) {_OMC_LIT61}};
#define _OMC_LIT62 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT62)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT63,7,4) {&NFInstNode_InstNode_COMPONENT__NODE__desc,_OMC_LIT59,MMC_REFSTRUCTLIT(mmc_none),MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),_OMC_LIT62,_OMC_LIT45,_OMC_LIT56}};
#define _OMC_LIT63 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT63)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT64,2,1) {_OMC_LIT63,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT64 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT64)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT65,1,7) {&DAE_InlineType_NO__INLINE__desc,}};
#define _OMC_LIT65 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT65)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT66,3,4) {&DAE_FunctionBuiltin_FUNCTION__BUILTIN__desc,MMC_REFSTRUCTLIT(mmc_none),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */))}};
#define _OMC_LIT66 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT66)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT67,1,3) {&DAE_FunctionParallelism_FP__NON__PARALLEL__desc,}};
#define _OMC_LIT67 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT67)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT68,7,3) {&DAE_FunctionAttributes_FUNCTION__ATTRIBUTES__desc,_OMC_LIT65,MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT66,_OMC_LIT67}};
#define _OMC_LIT68 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT68)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT69,1,1) {MMC_IMMEDIATE(MMC_TAGFIXNUM(1))}};
#define _OMC_LIT69 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT69)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT70,1,1) {MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT70 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT70)
#define _OMC_LIT71_data "NFExpression.purity got unknown expression."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT71,43,_OMC_LIT71_data);
#define _OMC_LIT71 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT71)
#define _OMC_LIT72_data "/home/adrpo33/OpenModelica/OMCompiler/Compiler/NFFrontEnd/NFExpression.mo"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT72,73,_OMC_LIT72_data);
#define _OMC_LIT72 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT72)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT73_6,1.758197185e9);
#define _OMC_LIT73_6 MMC_REFREALLIT(_OMC_LIT_STRUCT73_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT73,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT72,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(5496)),MMC_IMMEDIATE(MMC_TAGFIXNUM(11)),MMC_IMMEDIATE(MMC_TAGFIXNUM(5496)),MMC_IMMEDIATE(MMC_TAGFIXNUM(95)),_OMC_LIT73_6}};
#define _OMC_LIT73 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT73)
#define _OMC_LIT74_data "NFExpression.variability got unknown expression."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT74,48,_OMC_LIT74_data);
#define _OMC_LIT74 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT74)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT75_6,1.758197185e9);
#define _OMC_LIT75_6 MMC_REFREALLIT(_OMC_LIT_STRUCT75_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT75,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT72,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(5415)),MMC_IMMEDIATE(MMC_TAGFIXNUM(11)),MMC_IMMEDIATE(MMC_TAGFIXNUM(5415)),MMC_IMMEDIATE(MMC_TAGFIXNUM(95)),_OMC_LIT75_6}};
#define _OMC_LIT75 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT75)
#define _OMC_LIT76_data "promote"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT76,7,_OMC_LIT76_data);
#define _OMC_LIT76 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT76)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT77,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT76}};
#define _OMC_LIT77 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT77)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT78,1,13) {&NFType_UNKNOWN__desc,}};
#define _OMC_LIT78 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT78)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT79,1,5) {&ErrorTypes_MessageType_TRANSLATION__desc,}};
#define _OMC_LIT79 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT79)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT80,1,4) {&ErrorTypes_Severity_ERROR__desc,}};
#define _OMC_LIT80 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT80)
#define _OMC_LIT81_data "Internal error %s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT81,17,_OMC_LIT81_data);
#define _OMC_LIT81 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT81)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT82,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT81}};
#define _OMC_LIT82 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT82)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT83,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(63)),_OMC_LIT79,_OMC_LIT80,_OMC_LIT82}};
#define _OMC_LIT83 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT83)
#define _OMC_LIT84_data "NFExpression.sliceRange failed because expression is not a range:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT84,66,_OMC_LIT84_data);
#define _OMC_LIT84 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT84)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT85,2,3) {&NFExpression_INTEGER__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(-1))}};
#define _OMC_LIT85 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT85)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT86,1,1) {_OMC_LIT85}};
#define _OMC_LIT86 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT86)
#define _OMC_LIT87_data "NFExpression.revertRange failed because expression is not a range:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT87,67,_OMC_LIT87_data);
#define _OMC_LIT87 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT87)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT88,2,4) {&NFExpression_REAL__desc,_OMC_LIT37}};
#define _OMC_LIT88 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT88)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT89,2,5) {&NFExpression_STRING__desc,_OMC_LIT20}};
#define _OMC_LIT89 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT89)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT90,2,6) {&NFExpression_BOOLEAN__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */))}};
#define _OMC_LIT90 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT90)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT91,2,6) {&NFExpression_BOOLEAN__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */))}};
#define _OMC_LIT91 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT91)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT92,-1.0);
#define _OMC_LIT92 MMC_REFREALLIT(_OMC_LIT_STRUCT92)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT93,2,4) {&NFExpression_REAL__desc,_OMC_LIT92}};
#define _OMC_LIT93 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT93)
#define _OMC_LIT94_data "NFExpression.makeMinusOne failed for: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT94,38,_OMC_LIT94_data);
#define _OMC_LIT94 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT94)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT95,1.0);
#define _OMC_LIT95 MMC_REFREALLIT(_OMC_LIT_STRUCT95)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT96,2,4) {&NFExpression_REAL__desc,_OMC_LIT95}};
#define _OMC_LIT96 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT96)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT97,2,3) {&NFExpression_INTEGER__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1))}};
#define _OMC_LIT97 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT97)
#define _OMC_LIT98_data "NFExpression.makeOne failed for: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT98,33,_OMC_LIT98_data);
#define _OMC_LIT98 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT98)
#define _OMC_LIT99_data "'0'"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT99,3,_OMC_LIT99_data);
#define _OMC_LIT99 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT99)
#define _OMC_LIT100_data "NFExpression.makeOperatorRecordZero failed for: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT100,48,_OMC_LIT100_data);
#define _OMC_LIT100 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT100)
#define _OMC_LIT101_data "NFExpression.makeZero failed for: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT101,34,_OMC_LIT101_data);
#define _OMC_LIT101 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT101)
#define _OMC_LIT102_data "min"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT102,3,_OMC_LIT102_data);
#define _OMC_LIT102 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT102)
#define _OMC_LIT103_data "max"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT103,3,_OMC_LIT103_data);
#define _OMC_LIT103 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT103)
#define _OMC_LIT104_data "NFExpression.toDAEValue got unhandled expression "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT104,49,_OMC_LIT104_data);
#define _OMC_LIT104 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT104)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT105_6,1.758197185e9);
#define _OMC_LIT105_6 MMC_REFREALLIT(_OMC_LIT_STRUCT105_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT105,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT72,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2606)),MMC_IMMEDIATE(MMC_TAGFIXNUM(11)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2606)),MMC_IMMEDIATE(MMC_TAGFIXNUM(113)),_OMC_LIT105_6}};
#define _OMC_LIT105 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT105)
#define _OMC_LIT106_data "NFExpression.toDAEMultaryArgs got unhandled argument list:\n        {"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT106,68,_OMC_LIT106_data);
#define _OMC_LIT106 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT106)
#define _OMC_LIT107_data ", "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT107,2,_OMC_LIT107_data);
#define _OMC_LIT107 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT107)
#define _OMC_LIT108_data "}"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT108,1,_OMC_LIT108_data);
#define _OMC_LIT108 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT108)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT109_6,1.758197185e9);
#define _OMC_LIT109_6 MMC_REFREALLIT(_OMC_LIT_STRUCT109_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT109,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT72,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2535)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2536)),MMC_IMMEDIATE(MMC_TAGFIXNUM(96)),_OMC_LIT109_6}};
#define _OMC_LIT109 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT109)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT110,1,3) {&Flags_FlagVisibility_INTERNAL__desc,}};
#define _OMC_LIT110 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT110)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT111,2,4) {&Flags_FlagData_BOOL__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */))}};
#define _OMC_LIT111 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT111)
#define _OMC_LIT112_data "Is true when building an FMU (so the compiler can look for URIs to package as FMI resources)."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT112,93,_OMC_LIT112_data);
#define _OMC_LIT112 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT112)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT113,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT112}};
#define _OMC_LIT113 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT113)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT114,8,3) {&Flags_ConfigFlag_CONFIG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(114)),_OMC_LIT20,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT110,_OMC_LIT111,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT113}};
#define _OMC_LIT114 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT114)
#define _OMC_LIT115_data "OpenModelica_fmuLoadResource"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT115,28,_OMC_LIT115_data);
#define _OMC_LIT115 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT115)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT116,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT115}};
#define _OMC_LIT116 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT116)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT117,2,5) {&DAE_Type_T__STRING__desc,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT117 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT117)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT118,1,3) {&DAE_TailCall_NO__TAIL__desc,}};
#define _OMC_LIT118 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT118)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT119,8,3) {&DAE_CallAttributes_CALL__ATTR__desc,_OMC_LIT117,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT65,_OMC_LIT118}};
#define _OMC_LIT119 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT119)
#define _OMC_LIT120_data "getInstanceName"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT120,15,_OMC_LIT120_data);
#define _OMC_LIT120 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT120)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT121,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT120}};
#define _OMC_LIT121 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT121)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT122,8,3) {&DAE_CallAttributes_CALL__ATTR__desc,_OMC_LIT117,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),_OMC_LIT65,_OMC_LIT118}};
#define _OMC_LIT122 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT122)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT123,4,16) {&DAE_Exp_CALL__desc,_OMC_LIT121,MMC_REFSTRUCTLIT(mmc_nil),_OMC_LIT122}};
#define _OMC_LIT123 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT123)
#define _OMC_LIT124_data "NFExpression.toDAE got unknown expression '"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT124,43,_OMC_LIT124_data);
#define _OMC_LIT124 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT124)
#define _OMC_LIT125_data "'"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT125,1,_OMC_LIT125_data);
#define _OMC_LIT125 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT125)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT126_6,1.758197185e9);
#define _OMC_LIT126_6 MMC_REFREALLIT(_OMC_LIT_STRUCT126_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT126,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT72,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2474)),MMC_IMMEDIATE(MMC_TAGFIXNUM(11)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2474)),MMC_IMMEDIATE(MMC_TAGFIXNUM(118)),_OMC_LIT126_6}};
#define _OMC_LIT126 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT126)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT127,3,5) {&Absyn_ComponentRef_CREF__IDENT__desc,_OMC_LIT15,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT127 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT127)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT128,1,20) {&Absyn_Exp_END__desc,}};
#define _OMC_LIT128 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT128)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT129,3,5) {&Absyn_ComponentRef_CREF__IDENT__desc,_OMC_LIT120,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT129 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT129)
#define _OMC_LIT130_data "NFExpression.toAbsyn got unknown expression '"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT130,45,_OMC_LIT130_data);
#define _OMC_LIT130 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT130)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT131_6,1.758197185e9);
#define _OMC_LIT131_6 MMC_REFREALLIT(_OMC_LIT_STRUCT131_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT131,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT72,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2362)),MMC_IMMEDIATE(MMC_TAGFIXNUM(11)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2362)),MMC_IMMEDIATE(MMC_TAGFIXNUM(118)),_OMC_LIT131_6}};
#define _OMC_LIT131 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT131)
#define _OMC_LIT132_data " "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT132,1,_OMC_LIT132_data);
#define _OMC_LIT132 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT132)
#define _OMC_LIT133_data "("
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT133,1,_OMC_LIT133_data);
#define _OMC_LIT133 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT133)
#define _OMC_LIT134_data ")"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT134,1,_OMC_LIT134_data);
#define _OMC_LIT134 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT134)
#define _OMC_LIT135_data "\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT135,1,_OMC_LIT135_data);
#define _OMC_LIT135 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT135)
#define _OMC_LIT136_data "fill("
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT136,5,_OMC_LIT136_data);
#define _OMC_LIT136 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT136)
#define _OMC_LIT137_data "{"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT137,1,_OMC_LIT137_data);
#define _OMC_LIT137 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT137)
#define _OMC_LIT138_data "["
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT138,1,_OMC_LIT138_data);
#define _OMC_LIT138 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT138)
#define _OMC_LIT139_data "; "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT139,2,_OMC_LIT139_data);
#define _OMC_LIT139 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT139)
#define _OMC_LIT140_data "]"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT140,1,_OMC_LIT140_data);
#define _OMC_LIT140 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT140)
#define _OMC_LIT141_data "size("
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT141,5,_OMC_LIT141_data);
#define _OMC_LIT141 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT141)
#define _OMC_LIT142_data "end"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT142,3,_OMC_LIT142_data);
#define _OMC_LIT142 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT142)
#define _OMC_LIT143_data "-"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT143,1,_OMC_LIT143_data);
#define _OMC_LIT143 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT143)
#define _OMC_LIT144_data "1/"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT144,2,_OMC_LIT144_data);
#define _OMC_LIT144 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT144)
#define _OMC_LIT145_data "if "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT145,3,_OMC_LIT145_data);
#define _OMC_LIT145 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT145)
#define _OMC_LIT146_data " then "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT146,6,_OMC_LIT146_data);
#define _OMC_LIT146 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT146)
#define _OMC_LIT147_data " else "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT147,6,_OMC_LIT147_data);
#define _OMC_LIT147 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT147)
#define _OMC_LIT148_data ")."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT148,2,_OMC_LIT148_data);
#define _OMC_LIT148 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT148)
#define _OMC_LIT149_data "[literal: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT149,10,_OMC_LIT149_data);
#define _OMC_LIT149 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT149)
#define _OMC_LIT150_data "#EMPTY#"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT150,7,_OMC_LIT150_data);
#define _OMC_LIT150 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT150)
#define _OMC_LIT151_data "function "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT151,9,_OMC_LIT151_data);
#define _OMC_LIT151 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT151)
#define _OMC_LIT152_data " = "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT152,3,_OMC_LIT152_data);
#define _OMC_LIT152 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT152)
#define _OMC_LIT153_data "getInstanceName()"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT153,17,_OMC_LIT153_data);
#define _OMC_LIT153 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT153)
#define _OMC_LIT154_data "nfAPI"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT154,5,_OMC_LIT154_data);
#define _OMC_LIT154 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT154)
#define _OMC_LIT155_data "Enables experimental new instantiation use in the OMC API."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT155,58,_OMC_LIT155_data);
#define _OMC_LIT155 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT155)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT156,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT155}};
#define _OMC_LIT156 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT156)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT157,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(171)),_OMC_LIT154,MMC_IMMEDIATE(MMC_TAGFIXNUM(1 /* true */)),_OMC_LIT156}};
#define _OMC_LIT157 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT157)
#define _OMC_LIT158_data "CAST("
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT158,5,_OMC_LIT158_data);
#define _OMC_LIT158 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT158)
#define _OMC_LIT159_data "BOX("
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT159,4,_OMC_LIT159_data);
#define _OMC_LIT159 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT159)
#define _OMC_LIT160_data "UNBOX("
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT160,6,_OMC_LIT160_data);
#define _OMC_LIT160 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT160)
#define _OMC_LIT161_data "LITERAL("
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT161,8,_OMC_LIT161_data);
#define _OMC_LIT161 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT161)
#define _OMC_LIT162_data "/*"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT162,2,_OMC_LIT162_data);
#define _OMC_LIT162 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT162)
#define _OMC_LIT163_data "*/ "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT163,3,_OMC_LIT163_data);
#define _OMC_LIT163 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT163)
#define _OMC_LIT164_data "Empty dimension list given in arrayFromList."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT164,44,_OMC_LIT164_data);
#define _OMC_LIT164 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT164)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT165_6,1.758197185e9);
#define _OMC_LIT165_6 MMC_REFREALLIT(_OMC_LIT_STRUCT165_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT165,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT72,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1830)),MMC_IMMEDIATE(MMC_TAGFIXNUM(5)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1830)),MMC_IMMEDIATE(MMC_TAGFIXNUM(105)),_OMC_LIT165_6}};
#define _OMC_LIT165 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT165)
#define _OMC_LIT166_data "Length mismatch in arrayFromList."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT166,33,_OMC_LIT166_data);
#define _OMC_LIT166 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT166)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT167_6,1.758197185e9);
#define _OMC_LIT167_6 MMC_REFREALLIT(_OMC_LIT_STRUCT167_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT167,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT72,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1837)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1837)),MMC_IMMEDIATE(MMC_TAGFIXNUM(104)),_OMC_LIT167_6}};
#define _OMC_LIT167 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT167)
#define _OMC_LIT168_data "NFExpression.makeSubscriptedExp: too few dimensions in "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT168,55,_OMC_LIT168_data);
#define _OMC_LIT168 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT168)
#define _OMC_LIT169_data " to apply subscripts "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT169,21,_OMC_LIT169_data);
#define _OMC_LIT169 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT169)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT170_6,1.758197185e9);
#define _OMC_LIT170_6 MMC_REFREALLIT(_OMC_LIT_STRUCT170_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT170,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT72,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1725)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1726)),MMC_IMMEDIATE(MMC_TAGFIXNUM(100)),_OMC_LIT170_6}};
#define _OMC_LIT170 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT170)
#define _OMC_LIT171_data "NFExpression.applySubscriptRange got unknown subscript '"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT171,56,_OMC_LIT171_data);
#define _OMC_LIT171 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT171)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT172_6,1.758197185e9);
#define _OMC_LIT172_6 MMC_REFREALLIT(_OMC_LIT_STRUCT172_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT172,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT72,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1533)),MMC_IMMEDIATE(MMC_TAGFIXNUM(11)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1533)),MMC_IMMEDIATE(MMC_TAGFIXNUM(127)),_OMC_LIT172_6}};
#define _OMC_LIT172 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT172)
#define _OMC_LIT173_data "NFExpression.getInteger cannot be parsed to an integer: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT173,56,_OMC_LIT173_data);
#define _OMC_LIT173 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT173)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT174_6,1.758197185e9);
#define _OMC_LIT174_6 MMC_REFREALLIT(_OMC_LIT_STRUCT174_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT174,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT72,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1229)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1229)),MMC_IMMEDIATE(MMC_TAGFIXNUM(118)),_OMC_LIT174_6}};
#define _OMC_LIT174 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT174)
#define _OMC_LIT175_data "NFExpression.getIntegerRange range could not be parsed to integer values: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT175,74,_OMC_LIT175_data);
#define _OMC_LIT175 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT175)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT176_6,1.758197185e9);
#define _OMC_LIT176_6 MMC_REFREALLIT(_OMC_LIT_STRUCT176_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT176,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT72,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1209)),MMC_IMMEDIATE(MMC_TAGFIXNUM(11)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1209)),MMC_IMMEDIATE(MMC_TAGFIXNUM(135)),_OMC_LIT176_6}};
#define _OMC_LIT176 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT176)
#define _OMC_LIT177_data "NFExpression.getIntegerRange expression not RANGE(): "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT177,53,_OMC_LIT177_data);
#define _OMC_LIT177 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT177)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT178_6,1.758197185e9);
#define _OMC_LIT178_6 MMC_REFREALLIT(_OMC_LIT_STRUCT178_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT178,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT72,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1214)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1214)),MMC_IMMEDIATE(MMC_TAGFIXNUM(112)),_OMC_LIT178_6}};
#define _OMC_LIT178 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT178)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT179,1,4) {&NFType_REAL__desc,}};
#define _OMC_LIT179 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT179)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT180,1,10) {&NFDimension_UNKNOWN__desc,}};
#define _OMC_LIT180 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT180)
#define _OMC_LIT181_data "NFExpression.integerValue failed because expression is not an integer:\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT181,71,_OMC_LIT181_data);
#define _OMC_LIT181 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT181)
#define _OMC_LIT182_data "allowNonStandardModelica"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT182,24,_OMC_LIT182_data);
#define _OMC_LIT182 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT182)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT183,1,4) {&Flags_FlagVisibility_EXTERNAL__desc,}};
#define _OMC_LIT183 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT183)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT184,2,9) {&Flags_FlagData_STRING__LIST__FLAG__desc,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT184 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT184)
#define _OMC_LIT185_data "nonStdMultipleExternalDeclarations"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT185,34,_OMC_LIT185_data);
#define _OMC_LIT185 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT185)
#define _OMC_LIT186_data "Allow several external declarations in functions.\nSee: https://specification.modelica.org/maint/3.5/functions.html#function-as-a-specialized-class"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT186,146,_OMC_LIT186_data);
#define _OMC_LIT186 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT186)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT187,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT186}};
#define _OMC_LIT187 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT187)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT188,2,0) {_OMC_LIT185,_OMC_LIT187}};
#define _OMC_LIT188 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT188)
#define _OMC_LIT189_data "nonStdEnumerationAsIntegers"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT189,27,_OMC_LIT189_data);
#define _OMC_LIT189 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT189)
#define _OMC_LIT190_data "Allow enumeration as integer without casting via Integer(Enum).\nSee: https://specification.modelica.org/maint/3.5/class-predefined-types-and-declarations.html#type-conversion-of-enumeration-values-to-string-or-integer"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT190,217,_OMC_LIT190_data);
#define _OMC_LIT190 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT190)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT191,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT190}};
#define _OMC_LIT191 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT191)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT192,2,0) {_OMC_LIT189,_OMC_LIT191}};
#define _OMC_LIT192 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT192)
#define _OMC_LIT193_data "nonStdIntegersAsEnumeration"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT193,27,_OMC_LIT193_data);
#define _OMC_LIT193 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT193)
#define _OMC_LIT194_data "Allow integer as enumeration without casting via Enum(Integer).\nSee: https://specification.modelica.org/maint/3.5/class-predefined-types-and-declarations.html#type-conversion-of-integer-to-enumeration-values"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT194,207,_OMC_LIT194_data);
#define _OMC_LIT194 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT194)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT195,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT194}};
#define _OMC_LIT195 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT195)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT196,2,0) {_OMC_LIT193,_OMC_LIT195}};
#define _OMC_LIT196 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT196)
#define _OMC_LIT197_data "nonStdDifferentCaseFileVsClassName"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT197,34,_OMC_LIT197_data);
#define _OMC_LIT197 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT197)
#define _OMC_LIT198_data "Allow directory or file with different case in the name than the contained class name.\nSee: https://specification.modelica.org/maint/3.5/packages.html#mapping-package-class-structures-to-a-hierarchical-file-system"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT198,213,_OMC_LIT198_data);
#define _OMC_LIT198 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT198)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT199,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT198}};
#define _OMC_LIT199 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT199)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT200,2,0) {_OMC_LIT197,_OMC_LIT199}};
#define _OMC_LIT200 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT200)
#define _OMC_LIT201_data "nonStdTopLevelOuter"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT201,19,_OMC_LIT201_data);
#define _OMC_LIT201 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT201)
#define _OMC_LIT202_data "Allow top level outer.\nSee: https://specification.modelica.org/maint/3.6/scoping-name-lookup-and-flattening.html#S4.p1"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT202,118,_OMC_LIT202_data);
#define _OMC_LIT202 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT202)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT203,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT202}};
#define _OMC_LIT203 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT203)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT204,2,0) {_OMC_LIT201,_OMC_LIT203}};
#define _OMC_LIT204 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT204)
#define _OMC_LIT205_data "protectedAccess"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT205,15,_OMC_LIT205_data);
#define _OMC_LIT205 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT205)
#define _OMC_LIT206_data "Allow access of protected elements"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT206,34,_OMC_LIT206_data);
#define _OMC_LIT206 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT206)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT207,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT206}};
#define _OMC_LIT207 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT207)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT208,2,0) {_OMC_LIT205,_OMC_LIT207}};
#define _OMC_LIT208 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT208)
#define _OMC_LIT209_data "reinitInAlgorithms"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT209,18,_OMC_LIT209_data);
#define _OMC_LIT209 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT209)
#define _OMC_LIT210_data "Allow reinit in algorithm sections"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT210,34,_OMC_LIT210_data);
#define _OMC_LIT210 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT210)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT211,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT210}};
#define _OMC_LIT211 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT211)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT212,2,0) {_OMC_LIT209,_OMC_LIT211}};
#define _OMC_LIT212 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT212)
#define _OMC_LIT213_data "unbalancedModel"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT213,15,_OMC_LIT213_data);
#define _OMC_LIT213 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT213)
#define _OMC_LIT214_data "Allow models to be locally unbalanced and to have unbalanced connectors"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT214,71,_OMC_LIT214_data);
#define _OMC_LIT214 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT214)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT215,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT214}};
#define _OMC_LIT215 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT215)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT216,2,0) {_OMC_LIT213,_OMC_LIT215}};
#define _OMC_LIT216 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT216)
#define _OMC_LIT217_data "implicitParameterStartAttribute"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT217,31,_OMC_LIT217_data);
#define _OMC_LIT217 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT217)
#define _OMC_LIT218_data "Allow fixed parameters with no binding or start attribute"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT218,57,_OMC_LIT218_data);
#define _OMC_LIT218 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT218)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT219,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT218}};
#define _OMC_LIT219 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT219)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT220,2,0) {_OMC_LIT217,_OMC_LIT219}};
#define _OMC_LIT220 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT220)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT221,2,1) {_OMC_LIT220,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT221 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT221)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT222,2,1) {_OMC_LIT216,_OMC_LIT221}};
#define _OMC_LIT222 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT222)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT223,2,1) {_OMC_LIT212,_OMC_LIT222}};
#define _OMC_LIT223 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT223)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT224,2,1) {_OMC_LIT208,_OMC_LIT223}};
#define _OMC_LIT224 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT224)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT225,2,1) {_OMC_LIT204,_OMC_LIT224}};
#define _OMC_LIT225 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT225)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT226,2,1) {_OMC_LIT200,_OMC_LIT225}};
#define _OMC_LIT226 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT226)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT227,2,1) {_OMC_LIT196,_OMC_LIT226}};
#define _OMC_LIT227 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT227)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT228,2,1) {_OMC_LIT192,_OMC_LIT227}};
#define _OMC_LIT228 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT228)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT229,2,1) {_OMC_LIT188,_OMC_LIT228}};
#define _OMC_LIT229 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT229)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT230,2,4) {&Flags_ValidOptions_STRING__DESC__OPTION__desc,_OMC_LIT229}};
#define _OMC_LIT230 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT230)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT231,1,1) {_OMC_LIT230}};
#define _OMC_LIT231 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT231)
#define _OMC_LIT232_data "Flags to allow non-standard Modelica."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT232,37,_OMC_LIT232_data);
#define _OMC_LIT232 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT232)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT233,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT232}};
#define _OMC_LIT233 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT233)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT234,8,3) {&Flags_ConfigFlag_CONFIG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(143)),_OMC_LIT182,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT183,_OMC_LIT184,_OMC_LIT231,_OMC_LIT233}};
#define _OMC_LIT234 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT234)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT235,1,5) {&NFType_STRING__desc,}};
#define _OMC_LIT235 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT235)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT236,1,6) {&NFType_BOOLEAN__desc,}};
#define _OMC_LIT236 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT236)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT237,1,7) {&NFType_CLOCK__desc,}};
#define _OMC_LIT237 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT237)
#define _OMC_LIT238_data "NFExpression.compare got unknown expression."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT238,44,_OMC_LIT238_data);
#define _OMC_LIT238 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT238)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT239_6,1.758197185e9);
#define _OMC_LIT239_6 MMC_REFREALLIT(_OMC_LIT_STRUCT239_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT239,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT72,MMC_IMMEDIATE(MMC_TAGFIXNUM(0 /* false */)),MMC_IMMEDIATE(MMC_TAGFIXNUM(754)),MMC_IMMEDIATE(MMC_TAGFIXNUM(11)),MMC_IMMEDIATE(MMC_TAGFIXNUM(754)),MMC_IMMEDIATE(MMC_TAGFIXNUM(95)),_OMC_LIT239_6}};
#define _OMC_LIT239 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT239)
#include "util/modelica.h"

#include "NFExpression_includes.h"


/* default, do not make protected functions static */
#if !defined(PROTECTED_FUNCTION_STATIC)
#define PROTECTED_FUNCTION_STATIC
#endif
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFExpression_replaceResizableParameter_replaceWithBinding(threadData_t *threadData, modelica_metatype _cref, modelica_metatype __omcQ_24in_5Fexp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFExpression_replaceResizableParameter_replaceWithBinding,2,0) {(void*) boxptr_NFExpression_replaceResizableParameter_replaceWithBinding,0}};
#define boxvar_NFExpression_replaceResizableParameter_replaceWithBinding MMC_REFSTRUCTLIT(boxvar_lit_NFExpression_replaceResizableParameter_replaceWithBinding)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFExpression_replaceLiteral_replace(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _map, modelica_metatype _idx_ptr);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFExpression_replaceLiteral_replace,2,0) {(void*) boxptr_NFExpression_replaceLiteral_replace,0}};
#define boxvar_NFExpression_replaceLiteral_replace MMC_REFSTRUCTLIT(boxvar_lit_NFExpression_replaceLiteral_replace)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFExpression_toJSON_dump__arg(threadData_t *threadData, modelica_string _name, modelica_metatype _arg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFExpression_toJSON_dump__arg,2,0) {(void*) boxptr_NFExpression_toJSON_dump__arg,0}};
#define boxvar_NFExpression_toJSON_dump__arg MMC_REFSTRUCTLIT(boxvar_lit_NFExpression_toJSON_dump__arg)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_NFExpression_containsIterator_containsIterator2(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _iterator);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFExpression_containsIterator_containsIterator2(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _iterator);
static const MMC_DEFSTRUCTLIT(boxvar_lit_NFExpression_containsIterator_containsIterator2,2,0) {(void*) boxptr_NFExpression_containsIterator_containsIterator2,0}};
#define boxvar_NFExpression_containsIterator_containsIterator2 MMC_REFSTRUCTLIT(boxvar_lit_NFExpression_containsIterator_containsIterator2)

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFExpression_replaceResizableParameter_replaceWithBinding(threadData_t *threadData, modelica_metatype _cref, modelica_metatype __omcQ_24in_5Fexp)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _e = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  // _e has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = omc_NFInstNode_InstNode_getBindingExpOpt(threadData, omc_NFComponentRef_node(threadData, _cref));
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 6; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (optionNone(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,1) == 0) goto tmp3_end;
          
          _e = tmpMeta6;
          /* Pattern matching succeeded */
          tmpMeta1 = _e;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          if (optionNone(tmp4_1)) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,6,2) == 0) goto tmp3_end;
          
          _e = tmpMeta7;
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _cref = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e), 3)));
          __omcQ_24in_5Fexp = _e;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (optionNone(tmp4_1)) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,26,4) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,1) == 0) goto tmp3_end;
          
          _e = tmpMeta9;
          /* Pattern matching succeeded */
          tmpMeta1 = _e;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          if (optionNone(tmp4_1)) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,26,4) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,6,2) == 0) goto tmp3_end;
          
          _e = tmpMeta11;
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _cref = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e), 3)));
          __omcQ_24in_5Fexp = _e;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta12;
          if (optionNone(tmp4_1)) goto tmp3_end;
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
          _e = tmpMeta12;
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_map(threadData, _e, boxvar_NFExpression_replaceResizableParameter);
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_replaceResizableParameter(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _var = NULL;
      modelica_integer _v;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _var has no default value.
      // _v has no default value.
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,7,2) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
          
          _var = tmpMeta8;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_NFComponentRef_isResizable(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))))) goto tmp3_end;
          { /* match expression */
            modelica_metatype tmp12_1;
            tmp12_1 = omc_Pointer_access(threadData, _var);
            {
              volatile mmc_switch_type tmp12;
              int tmp13;
              tmp12 = 0;
              for (; tmp12 < 2; tmp12++) {
                switch (MMC_SWITCH_CAST(tmp12)) {
                case 0: {
                  modelica_metatype tmpMeta14;
                  modelica_metatype tmpMeta15;
                  modelica_metatype tmpMeta16;
                  modelica_metatype tmpMeta17;
                  modelica_integer tmp18;
                  modelica_metatype tmpMeta19;
                  if (mmc__uniontype__metarecord__typedef__equal(tmp12_1,0,10) == 0) goto tmp11_end;
                  tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp12_1), 11));
                  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,7) == 0) goto tmp11_end;
                  tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
                  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,11,1) == 0) goto tmp11_end;
                  tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
                  if (optionNone(tmpMeta16)) goto tmp11_end;
                  tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 1));
                  tmp18 = mmc_unbox_integer(tmpMeta17);
                  
                  _v = tmp18  /* pattern as ty=Integer */;
                  /* Pattern matching succeeded */
                  tmpMeta19 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer(_v));
                  tmpMeta9 = tmpMeta19;
                  goto tmp11_done;
                }
                case 1: {
                  
                  /* Pattern matching succeeded */
                  tmpMeta9 = omc_NFExpression_replaceResizableParameter_replaceWithBinding(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _exp);
                  goto tmp11_done;
                }
                }
                goto tmp11_end;
                tmp11_end: ;
              }
              goto goto_10;
              goto_10:;
              goto goto_2;
              goto tmp11_done;
              tmp11_done:;
            }
          }tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_NFComponentRef_isResizable(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))))) goto tmp3_end;
          tmpMeta1 = omc_NFExpression_replaceResizableParameter_replaceWithBinding(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _exp);
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

static modelica_metatype closure0_NFExpression_replaceLiteralArrayElements(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_metatype map = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype idx_ptr = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NFExpression_replaceLiteralArrayElements(thData, $in_exp, map, idx_ptr);
}
DLLDirection
modelica_metatype omc_NFExpression_replaceLiteralArrayElements(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _map, modelica_metatype _idx_ptr)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta7 = mmc_mk_box2(0, _map, _idx_ptr);
          tmpMeta6 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta6), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta6))[3] = omc_Array_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (modelica_fnptr) mmc_mk_box2(0,closure0_NFExpression_replaceLiteralArrayElements,tmpMeta7));
          _exp = tmpMeta6;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_replaceLiteral(threadData, _exp, _map, _idx_ptr);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFExpression_replaceLiteral_replace(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _map, modelica_metatype _idx_ptr)
{
  modelica_metatype _exp = NULL;
  modelica_integer _idx;
  modelica_metatype _idx_opt = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  // _idx has no default value.
  // _idx_opt has no default value.
  _idx_opt = omc_UnorderedMap_get(threadData, _exp, _map);

  if(isSome(_idx_opt))
  {
    _idx = mmc_unbox_integer(omc_Util_getOption(threadData, _idx_opt));
  }
  else
  {
    _idx = mmc_unbox_integer(omc_Pointer_access(threadData, _idx_ptr));

    omc_Pointer_update(threadData, _idx_ptr, mmc_mk_integer(((modelica_integer) 1) + _idx));

    omc_UnorderedMap_add(threadData, _exp, mmc_mk_integer(_idx), _map);
  }

  tmpMeta1 = mmc_mk_box3(36, &NFExpression_SHARED__LITERAL__desc, mmc_mk_integer(_idx), _exp);
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

static modelica_metatype closure1_NFExpression_replaceLiteral(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_metatype map = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype idx_ptr = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NFExpression_replaceLiteral(thData, $in_exp, map, idx_ptr);
}
DLLDirection
modelica_metatype omc_NFExpression_replaceLiteral(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _map, modelica_metatype _idx_ptr)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 5; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,33,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_NFExpression_isLiteralReplace(threadData, _exp)) goto tmp3_end;
          tmpMeta1 = omc_NFExpression_replaceLiteral_replace(threadData, omc_NFExpression_replaceLiteralArrayElements(threadData, _exp, _map, _idx_ptr), _map, _idx_ptr);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_NFExpression_isLiteralReplace(threadData, _exp)) goto tmp3_end;
          {
            modelica_metatype __omcQ_24tmpVar1;
            modelica_metatype* tmp8;
            modelica_metatype tmpMeta9;
            modelica_metatype __omcQ_24tmpVar0;
            modelica_integer tmp10;
            modelica_metatype _elem_loopVar = 0;
            modelica_metatype _elem;
            _elem_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)));
            tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar1 = tmpMeta9; /* defaultValue */
            tmp8 = &__omcQ_24tmpVar1;
            while(1) {
              tmp10 = 1;
              if (!listEmpty(_elem_loopVar)) {
                _elem = MMC_CAR(_elem_loopVar);
                _elem_loopVar = MMC_CDR(_elem_loopVar);
                tmp10--;
              }
              if (tmp10 == 0) {
                __omcQ_24tmpVar0 = omc_NFExpression_replaceLiteral(threadData, _elem, _map, _idx_ptr);
                *tmp8 = mmc_mk_cons(__omcQ_24tmpVar0,0);
                tmp8 = &MMC_CDR(*tmp8);
              } else if (tmp10 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp8 = mmc_mk_nil();
            tmpMeta7 = __omcQ_24tmpVar1;
          }
          tmpMeta6 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta6), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta6))[4] = tmpMeta7;
          _exp = tmpMeta6;
          tmpMeta1 = omc_NFExpression_replaceLiteral_replace(threadData, _exp, _map, _idx_ptr);
          goto tmp3_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_NFExpression_isLiteralReplace(threadData, _exp)) goto tmp3_end;
          tmpMeta1 = omc_NFExpression_replaceLiteral_replace(threadData, _exp, _map, _idx_ptr);
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta11;
          
          /* Pattern matching succeeded */
          tmpMeta11 = mmc_mk_box2(0, _map, _idx_ptr);
          tmpMeta1 = omc_NFExpression_mapShallow(threadData, _exp, (modelica_fnptr) mmc_mk_box2(0,closure1_NFExpression_replaceLiteral,tmpMeta11));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_makeUnary(threadData_t *threadData, modelica_metatype _op, modelica_metatype _exp)
{
  modelica_metatype _unaryExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _unaryExp has no default value.
  if((mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_op), 3)))) == 1))
  {
    _unaryExp = _exp;
  }
  else
  {
    if((mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_op), 3)))) == 26))
    {
      _unaryExp = omc_NFExpression_negate(threadData, _exp);
    }
    else
    {
      tmpMeta1 = mmc_mk_box3(20, &NFExpression_UNARY__desc, _op, _exp);
      _unaryExp = tmpMeta1;
    }
  }
  _return: OMC_LABEL_UNUSED
  return _unaryExp;
}

DLLDirection
modelica_metatype omc_NFExpression_repairOperator(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 19: {
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          tmpMeta5 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta5), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta5))[3] = omc_NFOperator_repairBinary(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), omc_NFExpression_typeOf(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), omc_NFExpression_typeOf(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))));
          _exp = tmpMeta5;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 24: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar3;
            modelica_metatype* tmp8;
            modelica_metatype tmpMeta9;
            modelica_metatype __omcQ_24tmpVar2;
            modelica_integer tmp10;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = listAppend((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
            tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar3 = tmpMeta9; /* defaultValue */
            tmp8 = &__omcQ_24tmpVar3;
            while(1) {
              tmp10 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp10--;
              }
              if (tmp10 == 0) {
                __omcQ_24tmpVar2 = omc_NFExpression_typeOf(threadData, _e);
                *tmp8 = mmc_mk_cons(__omcQ_24tmpVar2,0);
                tmp8 = &MMC_CDR(*tmp8);
              } else if (tmp10 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp8 = mmc_mk_nil();
            tmpMeta7 = __omcQ_24tmpVar3;
          }
          tmpMeta6 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta6), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta6))[4] = omc_NFOperator_repairMultary(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), tmpMeta7);
          _exp = tmpMeta6;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_wrapCall(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_fnptr _fun)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta6 = MMC_TAGPTR(mmc_alloc_words(3));
          memcpy(MMC_UNTAGPTR(tmpMeta6), MMC_UNTAGPTR(_exp), 3*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta6))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fun), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fun), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fun), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fun), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          _exp = tmpMeta6;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_tupleElements(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_metatype _expl = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _expl has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          tmpMeta6 = mmc_mk_cons(_exp, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _expl = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _expl;
}

PROTECTED_FUNCTION_STATIC modelica_metatype omc_NFExpression_toJSON_dump__arg(threadData_t *threadData, modelica_string _name, modelica_metatype _arg)
{
  modelica_metatype _json = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _json = omc_JSON_emptyListObject(threadData);
  _json = omc_JSON_addPair(threadData, _OMC_LIT0, omc_JSON_makeString(threadData, _name), _json);

  _json = omc_JSON_addPair(threadData, _OMC_LIT1, omc_NFExpression_toJSON(threadData, _arg), _json);
  _return: OMC_LABEL_UNUSED
  return _json;
}

DLLDirection
modelica_metatype omc_NFExpression_toJSON(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_metatype _json = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _json has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_JSON_makeInteger(threadData, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_JSON_makeNumber(threadData, mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_JSON_makeString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_JSON_makeBoolean(threadData, mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          goto tmp3_done;
        }
        case 7: {
          
          /* Pattern matching succeeded */
          _json = omc_JSON_emptyListObject(threadData);

          _json = omc_JSON_addPair(threadData, _OMC_LIT2, omc_JSON_makeString(threadData, _OMC_LIT3), _json);

          _json = omc_JSON_addPair(threadData, _OMC_LIT0, omc_JSON_makeString(threadData, omc_NFExpression_toString(threadData, _exp)), _json);
          tmpMeta1 = omc_JSON_addPair(threadData, _OMC_LIT4, omc_JSON_makeInteger(threadData, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))))), _json);
          goto tmp3_done;
        }
        case 8: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFClockKind_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 9: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFComponentRef_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp3_done;
        }
        case 10: {
          
          /* Pattern matching succeeded */
          _json = omc_JSON_emptyListObject(threadData);

          _json = omc_JSON_addPair(threadData, _OMC_LIT2, omc_JSON_makeString(threadData, _OMC_LIT5), _json);
          tmpMeta1 = omc_JSON_addPair(threadData, _OMC_LIT0, omc_JSON_makeString(threadData, omc_NFType_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))), _json);
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          modelica_integer tmp8;
          
          /* Pattern matching succeeded */
          _json = omc_JSON_emptyArray(threadData, arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));

          {
            modelica_metatype _e;
            for (tmpMeta5 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), tmp8 = arrayLength(tmpMeta5), tmp7 = 1; tmp7 <= tmp8; tmp7++)
            {
              _e = arrayGet(tmpMeta5,tmp7);
              _json = omc_JSON_addElement(threadData, omc_NFExpression_toJSON(threadData, _e), _json);
            }
          }
          tmpMeta1 = _json;
          goto tmp3_done;
        }
        case 13: {
          
          /* Pattern matching succeeded */
          _json = omc_JSON_emptyListObject(threadData);

          _json = omc_JSON_addPair(threadData, _OMC_LIT2, omc_JSON_makeString(threadData, _OMC_LIT6), _json);

          _json = omc_JSON_addPair(threadData, _OMC_LIT7, omc_NFExpression_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), _json);

          if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))))
          {
            _json = omc_JSON_addPair(threadData, _OMC_LIT8, omc_NFExpression_toJSON(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))))), _json);
          }
          tmpMeta1 = omc_JSON_addPair(threadData, _OMC_LIT9, omc_NFExpression_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)))), _json);
          goto tmp3_done;
        }
        case 14: {
          modelica_metatype tmpMeta9;
          
          /* Pattern matching succeeded */
          _json = omc_JSON_emptyListObject(threadData);

          _json = omc_JSON_addPair(threadData, _OMC_LIT2, omc_JSON_makeString(threadData, _OMC_LIT10), _json);
          {
            modelica_metatype __omcQ_24tmpVar5;
            modelica_metatype* tmp10;
            modelica_metatype tmpMeta11;
            modelica_metatype __omcQ_24tmpVar4;
            modelica_integer tmp12;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar5 = tmpMeta11; /* defaultValue */
            tmp10 = &__omcQ_24tmpVar5;
            while(1) {
              tmp12 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp12--;
              }
              if (tmp12 == 0) {
                __omcQ_24tmpVar4 = omc_NFExpression_toJSON(threadData, _e);
                *tmp10 = mmc_mk_cons(__omcQ_24tmpVar4,0);
                tmp10 = &MMC_CDR(*tmp10);
              } else if (tmp12 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp10 = mmc_mk_nil();
            tmpMeta9 = __omcQ_24tmpVar5;
          }
          tmpMeta1 = omc_JSON_addPair(threadData, _OMC_LIT11, omc_JSON_makeArray(threadData, tmpMeta9), _json);
          goto tmp3_done;
        }
        case 15: {
          modelica_metatype tmpMeta13;
          
          /* Pattern matching succeeded */
          _json = omc_JSON_emptyListObject(threadData);

          _json = omc_JSON_addPair(threadData, _OMC_LIT2, omc_JSON_makeString(threadData, _OMC_LIT12), _json);

          _json = omc_JSON_addPair(threadData, _OMC_LIT0, omc_JSON_makeString(threadData, omc_AbsynUtil_pathString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _OMC_LIT13, 1 /* true */, 0 /* false */)), _json);
          {
            modelica_metatype __omcQ_24tmpVar7;
            modelica_metatype* tmp14;
            modelica_metatype tmpMeta15;
            modelica_metatype __omcQ_24tmpVar6;
            modelica_integer tmp16;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)));
            tmpMeta15 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar7 = tmpMeta15; /* defaultValue */
            tmp14 = &__omcQ_24tmpVar7;
            while(1) {
              tmp16 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp16--;
              }
              if (tmp16 == 0) {
                __omcQ_24tmpVar6 = omc_NFExpression_toJSON(threadData, _e);
                *tmp14 = mmc_mk_cons(__omcQ_24tmpVar6,0);
                tmp14 = &MMC_CDR(*tmp14);
              } else if (tmp16 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp14 = mmc_mk_nil();
            tmpMeta13 = __omcQ_24tmpVar7;
          }
          tmpMeta1 = omc_JSON_addPair(threadData, _OMC_LIT11, omc_JSON_makeArray(threadData, tmpMeta13), _json);
          goto tmp3_done;
        }
        case 16: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFCall_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 17: {
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          
          /* Pattern matching succeeded */
          _json = omc_JSON_emptyListObject(threadData);

          _json = omc_JSON_addPair(threadData, _OMC_LIT2, omc_JSON_makeString(threadData, _OMC_LIT14), _json);

          _json = omc_JSON_addPair(threadData, _OMC_LIT0, omc_JSON_makeString(threadData, _OMC_LIT15), _json);

          if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))))
          {
            tmpMeta17 = mmc_mk_cons(omc_NFExpression_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), mmc_mk_cons(omc_NFExpression_toJSON(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))))), MMC_REFSTRUCTLIT(mmc_nil)));
            _json = omc_JSON_addPair(threadData, _OMC_LIT16, omc_JSON_makeArray(threadData, tmpMeta17), _json);
          }
          else
          {
            tmpMeta18 = mmc_mk_cons(omc_NFExpression_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), MMC_REFSTRUCTLIT(mmc_nil));
            _json = omc_JSON_addPair(threadData, _OMC_LIT16, omc_JSON_makeArray(threadData, tmpMeta18), _json);
          }
          tmpMeta1 = _json;
          goto tmp3_done;
        }
        case 19: {
          
          /* Pattern matching succeeded */
          _json = omc_JSON_emptyListObject(threadData);

          _json = omc_JSON_addPair(threadData, _OMC_LIT2, omc_JSON_makeString(threadData, _OMC_LIT17), _json);

          _json = omc_JSON_addPair(threadData, _OMC_LIT18, omc_NFExpression_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), _json);

          _json = omc_JSON_addPair(threadData, _OMC_LIT19, omc_JSON_makeString(threadData, omc_NFOperator_symbol(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _OMC_LIT20)), _json);
          tmpMeta1 = omc_JSON_addPair(threadData, _OMC_LIT21, omc_NFExpression_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))), _json);
          goto tmp3_done;
        }
        case 20: {
          
          /* Pattern matching succeeded */
          _json = omc_JSON_emptyListObject(threadData);

          _json = omc_JSON_addPair(threadData, _OMC_LIT2, omc_JSON_makeString(threadData, _OMC_LIT22), _json);

          _json = omc_JSON_addPair(threadData, _OMC_LIT19, omc_JSON_makeString(threadData, omc_NFOperator_symbol(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _OMC_LIT20)), _json);
          tmpMeta1 = omc_JSON_addPair(threadData, _OMC_LIT23, omc_NFExpression_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), _json);
          goto tmp3_done;
        }
        case 21: {
          
          /* Pattern matching succeeded */
          _json = omc_JSON_emptyListObject(threadData);

          _json = omc_JSON_addPair(threadData, _OMC_LIT2, omc_JSON_makeString(threadData, _OMC_LIT17), _json);

          _json = omc_JSON_addPair(threadData, _OMC_LIT18, omc_NFExpression_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), _json);

          _json = omc_JSON_addPair(threadData, _OMC_LIT19, omc_JSON_makeString(threadData, omc_NFOperator_symbol(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _OMC_LIT20)), _json);
          tmpMeta1 = omc_JSON_addPair(threadData, _OMC_LIT21, omc_NFExpression_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))), _json);
          goto tmp3_done;
        }
        case 22: {
          
          /* Pattern matching succeeded */
          _json = omc_JSON_emptyListObject(threadData);

          _json = omc_JSON_addPair(threadData, _OMC_LIT2, omc_JSON_makeString(threadData, _OMC_LIT22), _json);

          _json = omc_JSON_addPair(threadData, _OMC_LIT19, omc_JSON_makeString(threadData, omc_NFOperator_symbol(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _OMC_LIT20)), _json);
          tmpMeta1 = omc_JSON_addPair(threadData, _OMC_LIT23, omc_NFExpression_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), _json);
          goto tmp3_done;
        }
        case 23: {
          
          /* Pattern matching succeeded */
          _json = omc_JSON_emptyListObject(threadData);

          _json = omc_JSON_addPair(threadData, _OMC_LIT2, omc_JSON_makeString(threadData, _OMC_LIT17), _json);

          _json = omc_JSON_addPair(threadData, _OMC_LIT18, omc_NFExpression_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), _json);

          _json = omc_JSON_addPair(threadData, _OMC_LIT19, omc_JSON_makeString(threadData, omc_NFOperator_symbol(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _OMC_LIT20)), _json);
          tmpMeta1 = omc_JSON_addPair(threadData, _OMC_LIT21, omc_NFExpression_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))), _json);
          goto tmp3_done;
        }
        case 24: {
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta23;
          
          /* Pattern matching succeeded */
          _json = omc_JSON_emptyListObject(threadData);

          _json = omc_JSON_addPair(threadData, _OMC_LIT2, omc_JSON_makeString(threadData, _OMC_LIT24), _json);

          {
            modelica_metatype __omcQ_24tmpVar9;
            modelica_metatype* tmp20;
            modelica_metatype tmpMeta21;
            modelica_metatype __omcQ_24tmpVar8;
            modelica_integer tmp22;
            modelica_metatype _a_loopVar = 0;
            modelica_metatype _a;
            _a_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
            tmpMeta21 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar9 = tmpMeta21; /* defaultValue */
            tmp20 = &__omcQ_24tmpVar9;
            while(1) {
              tmp22 = 1;
              if (!listEmpty(_a_loopVar)) {
                _a = MMC_CAR(_a_loopVar);
                _a_loopVar = MMC_CDR(_a_loopVar);
                tmp22--;
              }
              if (tmp22 == 0) {
                __omcQ_24tmpVar8 = omc_NFExpression_toJSON(threadData, _a);
                *tmp20 = mmc_mk_cons(__omcQ_24tmpVar8,0);
                tmp20 = &MMC_CDR(*tmp20);
              } else if (tmp22 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp20 = mmc_mk_nil();
            tmpMeta19 = __omcQ_24tmpVar9;
          }
          _json = omc_JSON_addPair(threadData, _OMC_LIT25, omc_JSON_makeArray(threadData, tmpMeta19), _json);

          {
            modelica_metatype __omcQ_24tmpVar11;
            modelica_metatype* tmp24;
            modelica_metatype tmpMeta25;
            modelica_metatype __omcQ_24tmpVar10;
            modelica_integer tmp26;
            modelica_metatype _a_loopVar = 0;
            modelica_metatype _a;
            _a_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta25 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar11 = tmpMeta25; /* defaultValue */
            tmp24 = &__omcQ_24tmpVar11;
            while(1) {
              tmp26 = 1;
              if (!listEmpty(_a_loopVar)) {
                _a = MMC_CAR(_a_loopVar);
                _a_loopVar = MMC_CDR(_a_loopVar);
                tmp26--;
              }
              if (tmp26 == 0) {
                __omcQ_24tmpVar10 = omc_NFExpression_toJSON(threadData, _a);
                *tmp24 = mmc_mk_cons(__omcQ_24tmpVar10,0);
                tmp24 = &MMC_CDR(*tmp24);
              } else if (tmp26 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp24 = mmc_mk_nil();
            tmpMeta23 = __omcQ_24tmpVar11;
          }
          _json = omc_JSON_addPair(threadData, _OMC_LIT26, omc_JSON_makeArray(threadData, tmpMeta23), _json);
          tmpMeta1 = omc_JSON_addPair(threadData, _OMC_LIT19, omc_JSON_makeString(threadData, omc_NFOperator_symbol(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _OMC_LIT20)), _json);
          goto tmp3_done;
        }
        case 25: {
          
          /* Pattern matching succeeded */
          _json = omc_JSON_emptyListObject(threadData);

          _json = omc_JSON_addPair(threadData, _OMC_LIT2, omc_JSON_makeString(threadData, _OMC_LIT27), _json);

          _json = omc_JSON_addPair(threadData, _OMC_LIT28, omc_NFExpression_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), _json);

          _json = omc_JSON_addPair(threadData, _OMC_LIT29, omc_NFExpression_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))), _json);
          tmpMeta1 = omc_JSON_addPair(threadData, _OMC_LIT30, omc_NFExpression_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)))), _json);
          goto tmp3_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 27: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 28: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 29: {
          
          /* Pattern matching succeeded */
          _json = omc_JSON_emptyListObject(threadData);

          _json = omc_JSON_addPair(threadData, _OMC_LIT2, omc_JSON_makeString(threadData, _OMC_LIT31), _json);

          _json = omc_JSON_addPair(threadData, _OMC_LIT23, omc_NFExpression_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), _json);
          tmpMeta1 = omc_JSON_addPair(threadData, _OMC_LIT32, omc_NFSubscript_toJSONList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), _json);
          goto tmp3_done;
        }
        case 30: {
          
          /* Pattern matching succeeded */
          _json = omc_JSON_emptyListObject(threadData);

          _json = omc_JSON_addPair(threadData, _OMC_LIT2, omc_JSON_makeString(threadData, _OMC_LIT33), _json);

          _json = omc_JSON_addPair(threadData, _OMC_LIT23, omc_NFExpression_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), _json);
          tmpMeta1 = omc_JSON_addPair(threadData, _OMC_LIT4, omc_JSON_makeInteger(threadData, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))))), _json);
          goto tmp3_done;
        }
        case 31: {
          
          /* Pattern matching succeeded */
          _json = omc_JSON_emptyListObject(threadData);

          _json = omc_JSON_addPair(threadData, _OMC_LIT2, omc_JSON_makeString(threadData, _OMC_LIT34), _json);

          _json = omc_JSON_addPair(threadData, _OMC_LIT23, omc_NFExpression_toJSON(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), _json);

          _json = omc_JSON_addPair(threadData, _OMC_LIT4, omc_JSON_makeInteger(threadData, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))))), _json);
          tmpMeta1 = omc_JSON_addPair(threadData, _OMC_LIT35, omc_JSON_makeString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))), _json);
          goto tmp3_done;
        }
        case 34: {
          modelica_metatype tmpMeta27;
          
          /* Pattern matching succeeded */
          _json = omc_JSON_emptyListObject(threadData);

          _json = omc_JSON_addPair(threadData, _OMC_LIT2, omc_JSON_makeString(threadData, _OMC_LIT36), _json);

          _json = omc_JSON_addPair(threadData, _OMC_LIT0, omc_JSON_makeString(threadData, omc_NFComponentRef_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))), _json);
          {
            modelica_metatype __omcQ_24tmpVar13;
            modelica_metatype* tmp28;
            modelica_metatype tmpMeta29;
            modelica_metatype __omcQ_24tmpVar12;
            modelica_integer tmp30;
            modelica_metatype _arg_loopVar = 0;
            modelica_metatype _arg;
            modelica_metatype _name_loopVar = 0;
            modelica_metatype _name;
            _arg_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            _name_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)));
            tmpMeta29 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar13 = tmpMeta29; /* defaultValue */
            tmp28 = &__omcQ_24tmpVar13;
            while(1) {
              tmp30 = 2;
              if (!listEmpty(_arg_loopVar)) {
                _arg = MMC_CAR(_arg_loopVar);
                _arg_loopVar = MMC_CDR(_arg_loopVar);
                tmp30--;
              }if (!listEmpty(_name_loopVar)) {
                _name = MMC_CAR(_name_loopVar);
                _name_loopVar = MMC_CDR(_name_loopVar);
                tmp30--;
              }
              if (tmp30 == 0) {
                __omcQ_24tmpVar12 = omc_NFExpression_toJSON_dump__arg(threadData, _name, _arg);
                *tmp28 = mmc_mk_cons(__omcQ_24tmpVar12,0);
                tmp28 = &MMC_CDR(*tmp28);
              } else if (tmp30 == 2) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp28 = mmc_mk_nil();
            tmpMeta27 = __omcQ_24tmpVar13;
          }
          tmpMeta1 = omc_JSON_addPair(threadData, _OMC_LIT16, omc_JSON_makeArray(threadData, tmpMeta27), _json);
          goto tmp3_done;
        }
        case 35: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_JSON_makeString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_JSON_makeString(threadData, omc_NFExpression_toString(threadData, _exp));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _json = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _json;
}

DLLDirection
modelica_metatype omc_NFExpression_clone(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp)
{
  modelica_metatype _exp = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _exp;
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,3) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          tmpMeta5 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta5), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta5))[3] = arrayCopy((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          _exp = tmpMeta5;
          goto tmp2_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_boolean omc_NFExpression_isComponentExpression(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _res;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _res has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = (omc_NFComponentRef_isCref(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) && omc_NFInstNode_InstNode_isComponent(threadData, omc_NFComponentRef_node(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))))));
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _res = tmp1;
  _return: OMC_LABEL_UNUSED
  return _res;
}
modelica_metatype boxptr_NFExpression_isComponentExpression(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _res;
  modelica_metatype out_res;
  _res = omc_NFExpression_isComponentExpression(threadData, _exp);
  out_res = mmc_mk_icon(_res);
  return out_res;
}

DLLDirection
modelica_boolean omc_NFExpression_isConnector(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _res;
  modelica_metatype _node = NULL;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _res has no default value.
  // _node has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _node = omc_NFComponentRef_node(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          tmp1 = (omc_NFInstNode_InstNode_isComponent(threadData, _node) && omc_NFInstNode_InstNode_isConnector(threadData, _node));
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _res = tmp1;
  _return: OMC_LABEL_UNUSED
  return _res;
}
modelica_metatype boxptr_NFExpression_isConnector(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _res;
  modelica_metatype out_res;
  _res = omc_NFExpression_isConnector(threadData, _exp);
  out_res = mmc_mk_icon(_res);
  return out_res;
}

DLLDirection
modelica_boolean omc_NFExpression_isFunctionPointer(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _res;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _res has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,12,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,31,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _res = tmp1;
  _return: OMC_LABEL_UNUSED
  return _res;
}
modelica_metatype boxptr_NFExpression_isFunctionPointer(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _res;
  modelica_metatype out_res;
  _res = omc_NFExpression_isFunctionPointer(threadData, _exp);
  out_res = mmc_mk_icon(_res);
  return out_res;
}

static modelica_metatype closure2_NFExpression_mapCrefScalars2(threadData_t *thData, modelica_metatype closure, modelica_metatype exp)
{
  modelica_fnptr mapFn = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_mapCrefScalars2(thData, exp, mapFn);
}
DLLDirection
modelica_metatype omc_NFExpression_mapCrefScalars2(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _mapFn)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _expl = NULL;
  modelica_metatype _ty = NULL;
  modelica_boolean _literal;
  modelica_metatype _cref = NULL;
  modelica_metatype _arr = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _expl has no default value.
  // _ty has no default value.
  // _literal has no default value.
  // _cref has no default value.
  // _arr has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(!(arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) == ((modelica_integer) 0)))) goto tmp3_end;
          tmpMeta6 = mmc_mk_box1(0, ((modelica_fnptr) _mapFn));
          _arr = omc_Array_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (modelica_fnptr) mmc_mk_box2(0,closure2_NFExpression_mapCrefScalars2,tmpMeta6));

          _ty = omc_NFExpression_typeOf(threadData, arrayGet(_arr, ((modelica_integer) 1)));

          _literal = omc_Array_all(threadData, _arr, boxvar_NFExpression_isLiteral);
          tmpMeta1 = omc_NFExpression_makeExpArray(threadData, _arr, _ty, _literal);
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapFn), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapFn), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapFn), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapFn), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_mapCrefScalars(threadData_t *threadData, modelica_metatype _crefExp, modelica_fnptr _mapFn)
{
  modelica_metatype _outExp = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  _outExp = omc_NFExpandExp_expand(threadData, _crefExp, 0 /* false */, NULL);

  _outExp = omc_NFExpression_mapCrefScalars2(threadData, _outExp, ((modelica_fnptr) _mapFn));
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_mapSplitExpressions3(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _subs = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  // _subs has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 32: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 29: {
          modelica_metatype tmpMeta5;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
          tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _subs = tmpMeta5;
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_applySubscripts(threadData, _subs, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), 0 /* false */);
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_mapSplitExpressions2(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _dimSizes, modelica_metatype _subExps, modelica_fnptr _func)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _dim_size = NULL;
  modelica_metatype _rest_dims = NULL;
  modelica_integer _dim_size_int;
  modelica_metatype _sub_exp = NULL;
  modelica_metatype _rest_subs = NULL;
  modelica_metatype _expl = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_integer tmp8;
  modelica_integer tmp9;
  modelica_integer tmp10;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _dim_size has no default value.
  // _rest_dims has no default value.
  // _dim_size_int has no default value.
  // _sub_exp has no default value.
  // _rest_subs has no default value.
  // _expl has no default value.
  // _ty has no default value.
  if(listEmpty(_dimSizes))
  {
    _outExp = omc_NFExpression_map(threadData, _exp, boxvar_NFExpression_mapSplitExpressions3);

    _outExp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _outExp) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _outExp);
  }
  else
  {
    /* Pattern-matching assignment */
    tmpMeta1 = _dimSizes;
    if (listEmpty(tmpMeta1)) MMC_THROW_INTERNAL();
    tmpMeta2 = MMC_CAR(tmpMeta1);
    tmpMeta3 = MMC_CDR(tmpMeta1);
    _dim_size = tmpMeta2;
    _rest_dims = tmpMeta3;

    _dim_size_int = omc_NFExpression_toInteger(threadData, omc_NFCeval_evalExp(threadData, _dim_size, _OMC_LIT39));

    /* Pattern-matching assignment */
    tmpMeta4 = _subExps;
    if (listEmpty(tmpMeta4)) MMC_THROW_INTERNAL();
    tmpMeta5 = MMC_CAR(tmpMeta4);
    tmpMeta6 = MMC_CDR(tmpMeta4);
    _sub_exp = tmpMeta5;
    _rest_subs = tmpMeta6;

    _expl = arrayCreateNoInit(_dim_size_int, _exp);

    tmp8 = ((modelica_integer) 1); tmp9 = 1; tmp10 = _dim_size_int;
    if(!(((tmp9 > 0) && (tmp8 > tmp10)) || ((tmp9 < 0) && (tmp8 < tmp10))))
    {
      modelica_integer _i;
      for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp8, tmp10); _i += tmp9)
      {
        tmpMeta7 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer(_i));
        omc_NFExpression_updateMutable(threadData, _sub_exp, tmpMeta7);

        arrayUpdateNoBoundsChecking(_expl, _i, omc_NFExpression_mapSplitExpressions2(threadData, _exp, _rest_dims, _rest_subs, ((modelica_fnptr) _func)));
      }
    }

    _ty = omc_NFExpression_typeOf(threadData, ((arrayLength(_expl) == ((modelica_integer) 0))?_exp:arrayGet(_expl, ((modelica_integer) 1))));

    _outExp = omc_NFExpression_makeExpArray(threadData, _expl, _ty, omc_Array_all(threadData, _expl, boxvar_NFExpression_isLiteral));
  }
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_replaceSplitSubscripts2(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fsubscript, modelica_metatype __omcQ_24in_5FsubRepls, modelica_metatype *out_subRepls)
{
  modelica_metatype _subscript = NULL;
  modelica_metatype _subRepls = NULL;
  modelica_metatype _sub_exp = NULL;
  modelica_metatype _sub_repls = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _subscript = __omcQ_24in_5Fsubscript;
  _subRepls = __omcQ_24in_5FsubRepls;
  // _sub_exp has no default value.
  // _sub_repls has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _subscript;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          if(isSome(_subRepls))
          {
            /* Pattern-matching assignment */
            tmpMeta6 = _subRepls;
            if (optionNone(tmpMeta6)) goto goto_2;
            tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
            _sub_repls = tmpMeta7;
          }
          else
          {
            _sub_repls = omc_UnorderedMap_new(threadData, boxvar_NFSubscript_hash, boxvar_NFSubscript_isEqual, ((modelica_integer) 1));

            _subRepls = mmc_mk_some(_sub_repls);
          }

          _sub_exp = omc_NFExpression_makeMutable(threadData, _OMC_LIT40);

          _sub_exp = omc_UnorderedMap_tryAdd(threadData, _subscript, _sub_exp, _sub_repls);
          tmpMeta8 = mmc_mk_box2(5, &NFSubscript_INDEX__desc, _sub_exp);
          tmpMeta1 = tmpMeta8;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _subscript;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _subscript = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  if (out_subRepls) { *out_subRepls = _subRepls; }
  return _subscript;
}

DLLDirection
modelica_metatype omc_NFExpression_replaceSplitSubscripts(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype __omcQ_24in_5FsubRepls, modelica_metatype *out_subRepls)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _subRepls = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  _subRepls = __omcQ_24in_5FsubRepls;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _subs = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _subs has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmp7 = mmc_unbox_integer(tmpMeta6);
          if (1 /* true */ != tmp7) goto tmp3_end;
          /* Pattern matching succeeded */
          _subs = omc_List_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), boxvar_NFExpression_replaceSplitSubscripts2, _subRepls ,&_subRepls);
          tmpMeta1 = omc_NFExpression_applySubscripts(threadData, _subs, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), 0 /* false */);
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  if (out_subRepls) { *out_subRepls = _subRepls; }
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_mapSplitExpressions(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _osub_repls = NULL;
  modelica_metatype _sub_repls = NULL;
  modelica_metatype _subs = NULL;
  modelica_metatype _sub_exps = NULL;
  modelica_metatype _dim_sizes = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta7;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _osub_repls has no default value.
  // _sub_repls has no default value.
  // _subs has no default value.
  // _sub_exps has no default value.
  // _dim_sizes has no default value.
  _outExp = omc_NFExpression_mapFold(threadData, _exp, boxvar_NFExpression_replaceSplitSubscripts, mmc_mk_none() ,&_osub_repls);

  if(isNone(_osub_repls))
  {
    _outExp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _exp) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _exp);
  }
  else
  {
    /* Pattern-matching assignment */
    tmpMeta1 = _osub_repls;
    if (optionNone(tmpMeta1)) MMC_THROW_INTERNAL();
    tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
    _sub_repls = tmpMeta2;

    _subs = omc_UnorderedMap_keyList(threadData, _sub_repls);

    _sub_exps = omc_UnorderedMap_valueList(threadData, _sub_repls);

    {
      modelica_metatype __omcQ_24tmpVar15;
      modelica_metatype* tmp4;
      modelica_metatype tmpMeta5;
      modelica_metatype __omcQ_24tmpVar14;
      modelica_integer tmp6;
      modelica_metatype _s_loopVar = 0;
      modelica_metatype _s;
      _s_loopVar = _subs;
      tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
      __omcQ_24tmpVar15 = tmpMeta5; /* defaultValue */
      tmp4 = &__omcQ_24tmpVar15;
      while(1) {
        tmp6 = 1;
        if (!listEmpty(_s_loopVar)) {
          _s = MMC_CAR(_s_loopVar);
          _s_loopVar = MMC_CDR(_s_loopVar);
          tmp6--;
        }
        if (tmp6 == 0) {
          __omcQ_24tmpVar14 = omc_NFSubscript_splitIndexDimExp(threadData, _s);
          *tmp4 = mmc_mk_cons(__omcQ_24tmpVar14,0);
          tmp4 = &MMC_CDR(*tmp4);
        } else if (tmp6 == 1) {
          break;
        } else {
          MMC_THROW_INTERNAL();
        }
      }
      *tmp4 = mmc_mk_nil();
      tmpMeta3 = __omcQ_24tmpVar15;
    }
    _dim_sizes = tmpMeta3;

    {
      modelica_metatype __omcQ_24tmpVar17;
      modelica_metatype* tmp8;
      modelica_metatype tmpMeta9;
      modelica_metatype __omcQ_24tmpVar16;
      modelica_integer tmp10;
      modelica_metatype _d_loopVar = 0;
      modelica_metatype _d;
      _d_loopVar = _dim_sizes;
      tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
      __omcQ_24tmpVar17 = tmpMeta9; /* defaultValue */
      tmp8 = &__omcQ_24tmpVar17;
      while(1) {
        tmp10 = 1;
        if (!listEmpty(_d_loopVar)) {
          _d = MMC_CAR(_d_loopVar);
          _d_loopVar = MMC_CDR(_d_loopVar);
          tmp10--;
        }
        if (tmp10 == 0) {
          __omcQ_24tmpVar16 = omc_NFExpression_replaceSplitSubscripts(threadData, _d, mmc_mk_some(_sub_repls), NULL);
          *tmp8 = mmc_mk_cons(__omcQ_24tmpVar16,0);
          tmp8 = &MMC_CDR(*tmp8);
        } else if (tmp10 == 1) {
          break;
        } else {
          MMC_THROW_INTERNAL();
        }
      }
      *tmp8 = mmc_mk_nil();
      tmpMeta7 = __omcQ_24tmpVar17;
    }
    _dim_sizes = tmpMeta7;

    _outExp = omc_NFExpression_mapSplitExpressions2(threadData, _outExp, _dim_sizes, _sub_exps, ((modelica_fnptr) _func));

    _outExp = omc_NFExpression_applySubscripts(threadData, _subs, _outExp, 0 /* false */);
  }
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_boolean omc_NFExpression_isSplitSubscriptedExp(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _split;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _split has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmp7 = mmc_unbox_integer(tmpMeta6);
          _split = tmp7  /* pattern as ty=Boolean */;
          /* Pattern matching succeeded */
          tmp1 = _split;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _split = tmp1;
  _return: OMC_LABEL_UNUSED
  return _split;
}
modelica_metatype boxptr_NFExpression_isSplitSubscriptedExp(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _split;
  modelica_metatype out_split;
  _split = omc_NFExpression_isSplitSubscriptedExp(threadData, _exp);
  out_split = mmc_mk_icon(_split);
  return out_split;
}

DLLDirection
modelica_metatype omc_NFExpression_expandNonListedSplitIndices(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _indicesToKeep)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmp7 = mmc_unbox_integer(tmpMeta6);
          if (1 /* true */ != tmp7) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_applySubscripts(threadData, omc_NFSubscript_expandSplitIndices(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _indicesToKeep), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), 0 /* false */);
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_expandSplitIndices(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 29: {
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta1 = omc_NFExpression_applySubscripts(threadData, omc_NFSubscript_expandSplitIndices(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), tmpMeta5), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), 0 /* false */);
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          tmpMeta6 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta6), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta6))[3] = omc_NFComponentRef_expandSplitSubscripts(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          _exp = tmpMeta6;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_boolean omc_NFExpression_filterSplitIndices2(threadData_t *threadData, modelica_metatype _sub, modelica_metatype _node)
{
  modelica_boolean _matching;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _matching has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _sub;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 10: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFInstNode_InstNode_refEqual(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sub), 2))), _node);
          goto tmp3_done;
        }
        case 9: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFInstNode_InstNode_refEqual(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sub), 3))), _node);
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _matching = tmp1;
  _return: OMC_LABEL_UNUSED
  return _matching;
}
modelica_metatype boxptr_NFExpression_filterSplitIndices2(threadData_t *threadData, modelica_metatype _sub, modelica_metatype _node)
{
  modelica_boolean _matching;
  modelica_metatype out_matching;
  _matching = omc_NFExpression_filterSplitIndices2(threadData, _sub, _node);
  out_matching = mmc_mk_icon(_matching);
  return out_matching;
}

DLLDirection
modelica_metatype omc_NFExpression_filterSplitIndices(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _node)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _e = NULL;
  modelica_metatype _subs = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  // _e has no default value.
  // _subs has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta12;
          modelica_boolean tmp13;
          modelica_metatype tmpMeta14;
          modelica_boolean tmp15;
          modelica_metatype tmpMeta16;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _e = tmpMeta6;
          _subs = tmpMeta7;
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar19;
            modelica_metatype* tmp9;
            modelica_metatype tmpMeta10;
            modelica_metatype __omcQ_24tmpVar18;
            modelica_integer tmp11;
            modelica_metatype _s_loopVar = 0;
            modelica_metatype _s;
            _s_loopVar = _subs;
            tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar19 = tmpMeta10; /* defaultValue */
            tmp9 = &__omcQ_24tmpVar19;
            while(1) {
              tmp11 = 1;
              while (!listEmpty(_s_loopVar)) {
                _s = MMC_CAR(_s_loopVar);
                _s_loopVar = MMC_CDR(_s_loopVar);
                if ((!omc_NFExpression_filterSplitIndices2(threadData, _s, _node))) {
                  tmp11--;
                  break;
                }
              }
              if (tmp11 == 0) {
                __omcQ_24tmpVar18 = _s;
                *tmp9 = mmc_mk_cons(__omcQ_24tmpVar18,0);
                tmp9 = &MMC_CDR(*tmp9);
              } else if (tmp11 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp9 = mmc_mk_nil();
            tmpMeta8 = __omcQ_24tmpVar19;
          }
          _subs = tmpMeta8;
          tmp15 = (modelica_boolean)listEmpty(_subs);
          if(tmp15)
          {
            tmpMeta16 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          }
          else
          {
            tmp13 = (modelica_boolean)omc_NFType_isUnknown(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
            if(tmp13)
            {
              tmpMeta12 = mmc_mk_box5(29, &NFExpression_SUBSCRIPTED__EXP__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _subs, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), mmc_mk_boolean(omc_List_any(threadData, _subs, boxvar_NFSubscript_isSplit)));
              tmpMeta14 = tmpMeta12;
            }
            else
            {
              tmpMeta14 = omc_NFExpression_applySubscripts(threadData, _subs, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), 0 /* false */);
            }
            tmpMeta16 = tmpMeta14;
          }
          tmpMeta1 = tmpMeta16;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_boolean omc_NFExpression_isCrefEqualSet(threadData_t *threadData, modelica_metatype _exp, modelica_boolean __omcQ_24in_5Fb, modelica_metatype _set)
{
  modelica_boolean _b;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _b = __omcQ_24in_5Fb;
  { /* match expression */
    modelica_boolean tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _b;
    tmp4_2 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (0 /* false */ != tmp4_1) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_UnorderedSet_contains(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _set);
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = _b;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _b = tmp1;
  _return: OMC_LABEL_UNUSED
  return _b;
}
modelica_metatype boxptr_NFExpression_isCrefEqualSet(threadData_t *threadData, modelica_metatype _exp, modelica_metatype __omcQ_24in_5Fb, modelica_metatype _set)
{
  modelica_integer tmp1;
  modelica_boolean _b;
  modelica_metatype out_b;
  tmp1 = mmc_unbox_integer(__omcQ_24in_5Fb);
  _b = omc_NFExpression_isCrefEqualSet(threadData, _exp, tmp1, _set);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

static modelica_metatype closure3_NFExpression_isCrefEqualSet(threadData_t *thData, modelica_metatype closure, modelica_metatype exp, modelica_metatype $in_b)
{
  modelica_metatype set = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_isCrefEqualSet(thData, exp, $in_b, set);
}
DLLDirection
modelica_boolean omc_NFExpression_containsCrefSet(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _set)
{
  modelica_boolean _b;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _b has no default value.
  tmpMeta1 = mmc_mk_box1(0, _set);
  _b = mmc_unbox_boolean(omc_NFExpression_fold(threadData, _exp, (modelica_fnptr) mmc_mk_box2(0,closure3_NFExpression_isCrefEqualSet,tmpMeta1), mmc_mk_boolean(0 /* false */)));
  _return: OMC_LABEL_UNUSED
  return _b;
}
modelica_metatype boxptr_NFExpression_containsCrefSet(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _set)
{
  modelica_boolean _b;
  modelica_metatype out_b;
  _b = omc_NFExpression_containsCrefSet(threadData, _exp, _set);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

DLLDirection
modelica_boolean omc_NFExpression_isCrefEqual(threadData_t *threadData, modelica_metatype _exp, modelica_boolean __omcQ_24in_5Fb, modelica_metatype _cref)
{
  modelica_boolean _b;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _b = __omcQ_24in_5Fb;
  { /* match expression */
    modelica_boolean tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _b;
    tmp4_2 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (0 /* false */ != tmp4_1) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFComponentRef_isEqual(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _cref);
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = _b;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _b = tmp1;
  _return: OMC_LABEL_UNUSED
  return _b;
}
modelica_metatype boxptr_NFExpression_isCrefEqual(threadData_t *threadData, modelica_metatype _exp, modelica_metatype __omcQ_24in_5Fb, modelica_metatype _cref)
{
  modelica_integer tmp1;
  modelica_boolean _b;
  modelica_metatype out_b;
  tmp1 = mmc_unbox_integer(__omcQ_24in_5Fb);
  _b = omc_NFExpression_isCrefEqual(threadData, _exp, tmp1, _cref);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

static modelica_metatype closure4_NFExpression_isCrefEqual(threadData_t *thData, modelica_metatype closure, modelica_metatype exp, modelica_metatype $in_b)
{
  modelica_metatype cref = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_isCrefEqual(thData, exp, $in_b, cref);
}
DLLDirection
modelica_boolean omc_NFExpression_containsCref(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _cref)
{
  modelica_boolean _b;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _b has no default value.
  tmpMeta1 = mmc_mk_box1(0, _cref);
  _b = mmc_unbox_boolean(omc_NFExpression_fold(threadData, _exp, (modelica_fnptr) mmc_mk_box2(0,closure4_NFExpression_isCrefEqual,tmpMeta1), mmc_mk_boolean(0 /* false */)));
  _return: OMC_LABEL_UNUSED
  return _b;
}
modelica_metatype boxptr_NFExpression_containsCref(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _cref)
{
  modelica_boolean _b;
  modelica_metatype out_b;
  _b = omc_NFExpression_containsCref(threadData, _exp, _cref);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

DLLDirection
modelica_boolean omc_NFExpression_isPure(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isPure;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isPure has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 9: {
          
          /* Pattern matching succeeded */
          tmp1 = (!omc_NFComponentRef_isIterator(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          goto tmp3_done;
        }
        case 16: {
          modelica_boolean tmp5 = 0;
          
          /* Pattern matching succeeded */
          { /* match expression */
            modelica_string tmp8_1;
            tmp8_1 = omc_AbsynUtil_pathFirstIdent(threadData, omc_NFCall_functionName(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
            {
              volatile mmc_switch_type tmp8;
              int tmp9;
              tmp8 = 0;
              for (; tmp8 < 3; tmp8++) {
                switch (MMC_SWITCH_CAST(tmp8)) {
                case 0: {
                  if (11 != MMC_STRLEN(tmp8_1) || strcmp(MMC_STRINGDATA(_OMC_LIT41), MMC_STRINGDATA(tmp8_1)) != 0) goto tmp7_end;
                  /* Pattern matching succeeded */
                  tmp5 = 0 /* false */;
                  goto tmp7_done;
                }
                case 1: {
                  if (11 != MMC_STRLEN(tmp8_1) || strcmp(MMC_STRINGDATA(_OMC_LIT42), MMC_STRINGDATA(tmp8_1)) != 0) goto tmp7_end;
                  /* Pattern matching succeeded */
                  tmp5 = 0 /* false */;
                  goto tmp7_done;
                }
                case 2: {
                  
                  /* Pattern matching succeeded */
                  tmp5 = (!omc_NFCall_isImpure(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
                  goto tmp7_done;
                }
                }
                goto tmp7_end;
                tmp7_end: ;
              }
              goto goto_6;
              goto_6:;
              goto goto_2;
              goto tmp7_done;
              tmp7_done:;
            }
          }tmp1 = tmp5;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isPure = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isPure;
}
modelica_metatype boxptr_NFExpression_isPure(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isPure;
  modelica_metatype out_isPure;
  _isPure = omc_NFExpression_isPure(threadData, _exp);
  out_isPure = mmc_mk_icon(_isPure);
  return out_isPure;
}

DLLDirection
modelica_metatype omc_NFExpression_foldReduction2(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _ranges, modelica_metatype _iterators, modelica_metatype _foldExp, modelica_fnptr _mapFn, modelica_fnptr _foldFn)
{
  modelica_metatype _result = NULL;
  modelica_metatype _range = NULL;
  modelica_metatype _value = NULL;
  modelica_metatype _ranges_rest = NULL;
  modelica_metatype _el = NULL;
  modelica_metatype _iter = NULL;
  modelica_metatype _iters_rest = NULL;
  modelica_metatype _range_iter = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _result has no default value.
  // _range has no default value.
  // _value has no default value.
  // _ranges_rest has no default value.
  // _el has no default value.
  // _iter has no default value.
  // _iters_rest has no default value.
  // _range_iter has no default value.
  if(listEmpty(_ranges))
  {
    _result = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_foldFn), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_foldFn), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_foldFn), 2))), _foldExp, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapFn), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapFn), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapFn), 2))), _exp) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapFn), 1)))) (threadData, _exp)) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_foldFn), 1)))) (threadData, _foldExp, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapFn), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapFn), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapFn), 2))), _exp) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mapFn), 1)))) (threadData, _exp));
  }
  else
  {
    /* Pattern-matching assignment */
    tmpMeta1 = _ranges;
    if (listEmpty(tmpMeta1)) MMC_THROW_INTERNAL();
    tmpMeta2 = MMC_CAR(tmpMeta1);
    tmpMeta3 = MMC_CDR(tmpMeta1);
    _range = tmpMeta2;
    _ranges_rest = tmpMeta3;

    _range = omc_NFCeval_evalExp(threadData, _range, _OMC_LIT39);

    /* Pattern-matching assignment */
    tmpMeta4 = _iterators;
    if (listEmpty(tmpMeta4)) MMC_THROW_INTERNAL();
    tmpMeta5 = MMC_CAR(tmpMeta4);
    tmpMeta6 = MMC_CDR(tmpMeta4);
    _iter = tmpMeta5;
    _iters_rest = tmpMeta6;

    _range_iter = omc_NFExpressionIterator_fromExp(threadData, _range, 0 /* false */);

    _result = _foldExp;

    while(1)
    {
      if(!omc_NFExpressionIterator_hasNext(threadData, _range_iter)) break;
      _range_iter = omc_NFExpressionIterator_next(threadData, _range_iter ,&_value);

      omc_Mutable_update(threadData, _iter, _value);

      _result = omc_NFExpression_foldReduction2(threadData, _exp, _ranges_rest, _iters_rest, _result, ((modelica_fnptr) _mapFn), ((modelica_fnptr) _foldFn));
    }
  }
  _return: OMC_LABEL_UNUSED
  return _result;
}

DLLDirection
modelica_metatype omc_NFExpression_foldReduction(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _iterators, modelica_metatype _foldExp, modelica_fnptr _mapFn, modelica_fnptr _foldFn)
{
  modelica_metatype _result = NULL;
  modelica_metatype _node = NULL;
  modelica_metatype _e = NULL;
  modelica_metatype _range = NULL;
  modelica_metatype _iter = NULL;
  modelica_metatype _ranges = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _iters = NULL;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _result has no default value.
  // _node has no default value.
  // _e has no default value.
  // _range has no default value.
  // _iter has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _ranges = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _iters = tmpMeta2;
  _e = omc_NFExpression_createIterationRanges(threadData, _exp, _iterators ,&_ranges ,&_iters);

  _result = omc_NFExpression_foldReduction2(threadData, _e, _ranges, _iters, _foldExp, ((modelica_fnptr) _mapFn), ((modelica_fnptr) _foldFn));
  _return: OMC_LABEL_UNUSED
  return _result;
}

DLLDirection
modelica_metatype omc_NFExpression_createIterationRanges(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _iterators, modelica_metatype *out_ranges, modelica_metatype *out_iters)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _ranges = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _iters = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype _node = NULL;
  modelica_metatype _range = NULL;
  modelica_metatype _iter = NULL;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _ranges = tmpMeta1;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _iters = tmpMeta2;
  // _node has no default value.
  // _range has no default value.
  // _iter has no default value.
  {
    modelica_metatype _i;
    for (tmpMeta3 = _iterators; !listEmpty(tmpMeta3); tmpMeta3=MMC_CDR(tmpMeta3))
    {
      _i = MMC_CAR(tmpMeta3);
      /* Pattern-matching assignment */
      tmpMeta4 = _i;
      tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta4), 1));
      tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta4), 2));
      _node = tmpMeta5;
      _range = tmpMeta6;

      _iter = omc_Mutable_create(threadData, _OMC_LIT40);

      {
        modelica_metatype __omcQ_24tmpVar21;
        modelica_metatype* tmp8;
        modelica_metatype tmpMeta9;
        modelica_metatype tmpMeta10;
        modelica_metatype __omcQ_24tmpVar20;
        modelica_integer tmp11;
        modelica_metatype _r_loopVar = 0;
        modelica_metatype _r;
        _r_loopVar = _ranges;
        tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
        __omcQ_24tmpVar21 = tmpMeta9; /* defaultValue */
        tmp8 = &__omcQ_24tmpVar21;
        while(1) {
          tmp11 = 1;
          if (!listEmpty(_r_loopVar)) {
            _r = MMC_CAR(_r_loopVar);
            _r_loopVar = MMC_CDR(_r_loopVar);
            tmp11--;
          }
          if (tmp11 == 0) {
            tmpMeta10 = mmc_mk_box2(32, &NFExpression_MUTABLE__desc, _iter);
            __omcQ_24tmpVar20 = omc_NFExpression_replaceIterator(threadData, _r, _node, tmpMeta10);
            *tmp8 = mmc_mk_cons(__omcQ_24tmpVar20,0);
            tmp8 = &MMC_CDR(*tmp8);
          } else if (tmp11 == 1) {
            break;
          } else {
            MMC_THROW_INTERNAL();
          }
        }
        *tmp8 = mmc_mk_nil();
        tmpMeta7 = __omcQ_24tmpVar21;
      }
      _ranges = tmpMeta7;

      tmpMeta12 = mmc_mk_box2(32, &NFExpression_MUTABLE__desc, _iter);
      _exp = omc_NFExpression_replaceIterator(threadData, _exp, _node, tmpMeta12);

      tmpMeta13 = mmc_mk_cons(_iter, _iters);
      _iters = tmpMeta13;

      tmpMeta14 = mmc_mk_cons(_range, _ranges);
      _ranges = tmpMeta14;
    }
  }
  _return: OMC_LABEL_UNUSED
  if (out_ranges) { *out_ranges = _ranges; }
  if (out_iters) { *out_iters = _iters; }
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_nthEnumLiteral(threadData_t *threadData, modelica_metatype _ty, modelica_integer _n)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _exp has no default value.
  tmpMeta1 = mmc_mk_box4(7, &NFExpression_ENUM__LITERAL__desc, _ty, omc_NFType_nthEnumLiteral(threadData, _ty, _n), mmc_mk_integer(_n));
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}
modelica_metatype boxptr_NFExpression_nthEnumLiteral(threadData_t *threadData, modelica_metatype _ty, modelica_metatype _n)
{
  modelica_integer tmp1;
  modelica_metatype _exp = NULL;
  tmp1 = mmc_unbox_integer(_n);
  _exp = omc_NFExpression_nthEnumLiteral(threadData, _ty, tmp1);
  /* skip box _exp; NFExpression */
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_retype(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp)
{
  modelica_metatype _exp = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _exp;
    {
      modelica_metatype _ty = NULL;
      volatile mmc_switch_type tmp3;
      int tmp4;
      // _ty has no default value.
      tmp3 = 0;
      for (; tmp3 < 3; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,10,4) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          tmpMeta5 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta5), MMC_UNTAGPTR(_exp), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta5))[2] = omc_NFTypeCheck_getRangeType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), omc_NFExpression_typeOf(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), _OMC_LIT38);
          _exp = tmpMeta5;
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,13,1) == 0) goto tmp2_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,4,5) == 0) goto tmp2_end;
          
          /* Pattern matching succeeded */
          tmpMeta7 = MMC_TAGPTR(mmc_alloc_words(3));
          memcpy(MMC_UNTAGPTR(tmpMeta7), MMC_UNTAGPTR(_exp), 3*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta7))[2] = omc_NFCall_retype(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          _exp = tmpMeta7;
          goto tmp2_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          _ty = omc_NFExpression_typeOf(threadData, _exp);

          if(omc_NFType_isConditionalArray(threadData, _ty))
          {
            _ty = omc_NFType_simplifyConditionalArray(threadData, _ty);

            _exp = omc_NFExpression_setType(threadData, _ty, _exp);
          }
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_getRecordElements(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_metatype _elements = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _ty = NULL;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _elements = tmpMeta1;
  _ty = omc_NFType_arrayElementType(threadData, omc_NFExpression_typeOf(threadData, _exp));
  { /* match expression */
    modelica_metatype tmp5_1;
    tmp5_1 = _ty;
    {
      modelica_metatype _complexTy = NULL;
      volatile mmc_switch_type tmp5;
      int tmp6;
      // _complexTy has no default value.
      tmp5 = 0;
      for (; tmp5 < 2; tmp5++) {
        switch (MMC_SWITCH_CAST(tmp5)) {
        case 0: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_integer tmp9;
          modelica_integer tmp10;
          modelica_integer tmp11;
          if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,11,2) == 0) goto tmp4_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,4,3) == 0) goto tmp4_end;
          
          _complexTy = tmpMeta7;
          /* Pattern matching succeeded */
          tmp9 = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_complexTy), 3)))); tmp10 = ((modelica_integer) -1); tmp11 = ((modelica_integer) 1);
          if(!(((tmp10 > 0) && (tmp9 > tmp11)) || ((tmp10 < 0) && (tmp9 < tmp11))))
          {
            modelica_integer _i;
            for(_i = arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_complexTy), 3)))); in_range_integer(_i, tmp9, tmp11); _i += tmp10)
            {
              tmpMeta8 = mmc_mk_cons(omc_NFExpression_recordElement(threadData, omc_NFRecord_Field_name(threadData, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_complexTy), 3))),_i) /* DAE.ASUB */), _exp), _elements);
              _elements = tmpMeta8;
            }
          }
          tmpMeta2 = _elements;
          goto tmp4_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta2 = _elements;
          goto tmp4_done;
        }
        }
        goto tmp4_end;
        tmp4_end: ;
      }
      goto goto_3;
      goto_3:;
      MMC_THROW_INTERNAL();
      goto tmp4_done;
      tmp4_done:;
    }
  }
  _elements = tmpMeta2;
  _return: OMC_LABEL_UNUSED
  return _elements;
}

static modelica_metatype closure5_NFExpression_nthRecordElement(threadData_t *thData, modelica_metatype closure, modelica_metatype recordExp)
{
  modelica_metatype index = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_nthRecordElement(thData, index, recordExp);
}
DLLDirection
modelica_metatype omc_NFExpression_nthRecordElement(threadData_t *threadData, modelica_integer _index, modelica_metatype _recordExp)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _recordExp;
    {
      modelica_metatype _node = NULL;
      modelica_metatype _ty = NULL;
      modelica_metatype _arr = NULL;
      modelica_metatype _trueBranch = NULL;
      modelica_metatype _falseBranch = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _node has no default value.
      // _ty has no default value.
      // _arr has no default value.
      // _trueBranch has no default value.
      // _falseBranch has no default value.
      tmp4 = 0;
      for (; tmp4 < 8; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = listGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 4))), _index);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta6 = omc_NFType_arrayElementType(threadData, omc_NFExpression_typeOf(threadData, _recordExp));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,11,2) == 0) goto goto_2;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          _node = tmpMeta7;

          _node = omc_NFClass_nthComponent(threadData, _index, omc_NFInstNode_InstNode_getClass(threadData, _node));
          tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta1 = omc_NFExpression_fromCref(threadData, omc_NFComponentRef_prefixCref(threadData, _node, omc_NFInstNode_InstNode_getType(threadData, _node), tmpMeta8, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 3)))), 0 /* false */);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,7,2) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,11,2) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
          
          _node = tmpMeta11;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 3)))) == ((modelica_integer) 0))) goto tmp3_end;
          tmpMeta1 = omc_NFExpression_makeEmptyArray(threadData, omc_NFInstNode_InstNode_getType(threadData, omc_NFClass_nthComponent(threadData, _index, omc_NFInstNode_InstNode_getClass(threadData, _node))));
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta12;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta12 = mmc_mk_box1(0, mmc_mk_integer(_index));
          _arr = omc_Array_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 3))), (modelica_fnptr) mmc_mk_box2(0,closure5_NFExpression_nthRecordElement,tmpMeta12));

          _ty = omc_NFType_liftArrayLeft(threadData, omc_NFExpression_typeOf(threadData, arrayGet(_arr, ((modelica_integer) 1))), listHead(omc_NFType_arrayDims(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 2))))));
          tmpMeta1 = omc_NFExpression_makeArray(threadData, _ty, _arr, 0 /* false */);
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,28,4) == 0) goto tmp3_end;
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,7,2) == 0) goto tmp3_end;
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,11,2) == 0) goto tmp3_end;
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
          
          _node = tmpMeta15;
          /* Pattern matching succeeded */
          _node = omc_NFClass_nthComponent(threadData, _index, omc_NFInstNode_InstNode_getClass(threadData, _node));
          tmpMeta16 = mmc_mk_box5(31, &NFExpression_RECORD__ELEMENT__desc, _recordExp, mmc_mk_integer(_index), omc_NFInstNode_InstNode_name(threadData, _node), omc_NFType_liftArrayLeftList(threadData, omc_NFInstNode_InstNode_getType(threadData, _node), omc_NFType_arrayDims(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 5))))));
          tmpMeta1 = tmpMeta16;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta17;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _outExp = omc_NFExpression_nthRecordElement(threadData, _index, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 2))));

          _ty = omc_NFType_subscript(threadData, omc_NFExpression_typeOf(threadData, _outExp), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 3))), 1 /* true */);
          tmpMeta17 = mmc_mk_box5(29, &NFExpression_SUBSCRIPTED__EXP__desc, _outExp, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 3))), _ty, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 5))));
          tmpMeta1 = tmpMeta17;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta18;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _trueBranch = omc_NFExpression_nthRecordElement(threadData, _index, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 4))));

          _falseBranch = omc_NFExpression_nthRecordElement(threadData, _index, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 5))));
          tmpMeta18 = mmc_mk_box5(25, &NFExpression_IF__desc, omc_NFExpression_typeOf(threadData, _trueBranch), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 3))), _trueBranch, _falseBranch);
          tmpMeta1 = tmpMeta18;
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta19 = omc_NFExpression_typeOf(threadData, _recordExp);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,11,2) == 0) goto goto_2;
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 2));
          _node = tmpMeta20;

          _node = omc_NFClass_nthComponent(threadData, _index, omc_NFInstNode_InstNode_getClass(threadData, _node));
          tmpMeta21 = mmc_mk_box5(31, &NFExpression_RECORD__ELEMENT__desc, _recordExp, mmc_mk_integer(_index), omc_NFInstNode_InstNode_name(threadData, _node), omc_NFInstNode_InstNode_getType(threadData, _node));
          tmpMeta1 = tmpMeta21;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}
modelica_metatype boxptr_NFExpression_nthRecordElement(threadData_t *threadData, modelica_metatype _index, modelica_metatype _recordExp)
{
  modelica_integer tmp1;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_index);
  _outExp = omc_NFExpression_nthRecordElement(threadData, tmp1, _recordExp);
  /* skip box _outExp; NFExpression */
  return _outExp;
}

static modelica_metatype closure6_NFExpression_nthRecordElement(threadData_t *thData, modelica_metatype closure, modelica_metatype recordExp)
{
  modelica_metatype index = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_nthRecordElement(thData, index, recordExp);
}
DLLDirection
modelica_metatype omc_NFExpression_recordElement(threadData_t *threadData, modelica_string _elementName, modelica_metatype _recordExp)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _recordExp;
    {
      modelica_metatype _node = NULL;
      modelica_metatype _cls = NULL;
      modelica_metatype _cls_tree = NULL;
      modelica_metatype _ty = NULL;
      modelica_integer _index;
      modelica_metatype _cref = NULL;
      modelica_metatype _arr = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _node has no default value.
      // _cls has no default value.
      // _cls_tree has no default value.
      // _ty has no default value.
      // _index has no default value.
      // _cref has no default value.
      // _arr has no default value.
      tmp4 = 0;
      for (; tmp4 < 7; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,11,2) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          
          _node = tmpMeta7;
          /* Pattern matching succeeded */
          _cls = omc_NFInstNode_InstNode_getClass(threadData, _node);

          _index = omc_NFClass_lookupComponentIndex(threadData, _elementName, _cls);
          tmpMeta1 = listGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 4))), _index);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_boolean tmp10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta8 = omc_NFType_arrayElementType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 2))));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,11,2) == 0) goto goto_2;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
          _node = tmpMeta9;

          _cls_tree = omc_NFClass_classTree(threadData, omc_NFInstNode_InstNode_getClass(threadData, _node));

          /* Pattern-matching tuple assignment */
          tmpMeta11 = omc_NFClassTree_ClassTree_lookupElement(threadData, _elementName, _cls_tree, &tmp10);
          _node = tmpMeta11;
          if (0 /* false */ != tmp10) goto goto_2;

          _ty = omc_NFInstNode_InstNode_getType(threadData, _node);

          tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
          _cref = omc_NFComponentRef_prefixCref(threadData, _node, _ty, tmpMeta12, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 3))));

          _ty = omc_NFType_liftArrayLeftList(threadData, _ty, omc_NFType_arrayDims(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 2)))));
          tmpMeta13 = mmc_mk_box3(9, &NFExpression_CREF__desc, _ty, _cref);
          tmpMeta1 = tmpMeta13;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,7,2) == 0) goto tmp3_end;
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,11,2) == 0) goto tmp3_end;
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
          
          _node = tmpMeta16;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 3)))) == ((modelica_integer) 0))) goto tmp3_end;
          _cls = omc_NFInstNode_InstNode_getClass(threadData, _node);

          _index = omc_NFClass_lookupComponentIndex(threadData, _elementName, _cls);

          _ty = omc_NFInstNode_InstNode_getType(threadData, omc_NFClass_nthComponent(threadData, _index, _cls));

          _ty = omc_NFType_liftArrayLeftList(threadData, _ty, omc_NFType_arrayDims(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 2)))));
          tmpMeta1 = omc_NFExpression_makeEmptyArray(threadData, _ty);
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,7,2) == 0) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta18,11,2) == 0) goto tmp3_end;
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
          
          _node = tmpMeta19;
          /* Pattern matching succeeded */
          _index = omc_NFClass_lookupComponentIndex(threadData, _elementName, omc_NFInstNode_InstNode_getClass(threadData, _node));

          tmpMeta20 = mmc_mk_box1(0, mmc_mk_integer(_index));
          _arr = omc_Array_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 3))), (modelica_fnptr) mmc_mk_box2(0,closure6_NFExpression_nthRecordElement,tmpMeta20));

          _ty = omc_NFType_liftArrayLeft(threadData, omc_NFExpression_typeOf(threadData, arrayGet(_arr, ((modelica_integer) 1))), omc_NFDimension_fromInteger(threadData, arrayLength(_arr), 1));
          tmpMeta1 = omc_NFExpression_makeArray(threadData, _ty, _arr, mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 4)))));
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta21;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _outExp = omc_NFExpression_recordElement(threadData, _elementName, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 2))));

          _ty = omc_NFType_subscript(threadData, omc_NFExpression_typeOf(threadData, _outExp), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 3))), 1 /* true */);
          tmpMeta21 = mmc_mk_box5(29, &NFExpression_SUBSCRIPTED__EXP__desc, _outExp, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 3))), _ty, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_recordExp), 5))));
          tmpMeta1 = tmpMeta21;
          goto tmp3_done;
        }
        case 5: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,30,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          goto goto_2;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          
          /* Pattern matching succeeded */
          _ty = omc_NFExpression_typeOf(threadData, _recordExp);

          /* Pattern-matching assignment */
          tmpMeta22 = omc_NFType_arrayElementType(threadData, _ty);
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta22,11,2) == 0) goto goto_2;
          tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 2));
          _node = tmpMeta23;

          _cls = omc_NFInstNode_InstNode_getClass(threadData, _node);

          _index = omc_NFClass_lookupComponentIndex(threadData, _elementName, _cls);

          _ty = omc_NFType_liftArrayLeftList(threadData, omc_NFInstNode_InstNode_getType(threadData, omc_NFClass_nthComponent(threadData, _index, _cls)), omc_NFType_arrayDims(threadData, _ty));
          tmpMeta24 = mmc_mk_box5(31, &NFExpression_RECORD__ELEMENT__desc, _recordExp, mmc_mk_integer(_index), _elementName, _ty);
          tmpMeta1 = tmpMeta24;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

static modelica_metatype closure7_NFExpression_tupleElement(threadData_t *thData, modelica_metatype closure, modelica_metatype exp)
{
  modelica_metatype ty = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype index = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NFExpression_tupleElement(thData, exp, ty, index);
}static modelica_metatype closure8_NFExpression_tupleElement(threadData_t *thData, modelica_metatype closure, modelica_metatype exp)
{
  modelica_metatype ty = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype index = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NFExpression_tupleElement(thData, exp, ty, index);
}
DLLDirection
modelica_metatype omc_NFExpression_tupleElement(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _ty, modelica_integer _index)
{
  modelica_metatype _tupleElem = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _tupleElem has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _ety = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _ety has no default value.
      tmp4 = 0;
      for (; tmp4 < 4; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = listGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _index);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _ety = omc_NFType_unliftArray(threadData, _ty);

          tmpMeta7 = mmc_mk_box2(0, _ety, mmc_mk_integer(_index));
          tmpMeta6 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta6), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta6))[3] = omc_Array_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (modelica_fnptr) mmc_mk_box2(0,closure7_NFExpression_tupleElement,tmpMeta7));
          _exp = tmpMeta6;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta8;
          modelica_integer tmp9;
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
          tmp9 = mmc_unbox_integer(tmpMeta8);
          if (1 /* true */ != tmp9) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta10 = mmc_mk_box2(0, _ty, mmc_mk_integer(_index));
          tmpMeta1 = omc_NFExpression_mapSplitExpressions(threadData, _exp, (modelica_fnptr) mmc_mk_box2(0,closure8_NFExpression_tupleElement,tmpMeta10));
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta11;
          
          /* Pattern matching succeeded */
          tmpMeta11 = mmc_mk_box4(30, &NFExpression_TUPLE__ELEMENT__desc, _exp, mmc_mk_integer(_index), _ty);
          tmpMeta1 = tmpMeta11;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _tupleElem = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _tupleElem;
}
modelica_metatype boxptr_NFExpression_tupleElement(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _ty, modelica_metatype _index)
{
  modelica_integer tmp1;
  modelica_metatype _tupleElem = NULL;
  tmp1 = mmc_unbox_integer(_index);
  _tupleElem = omc_NFExpression_tupleElement(threadData, _exp, _ty, tmp1);
  /* skip box _tupleElem; NFExpression */
  return _tupleElem;
}

DLLDirection
modelica_metatype omc_NFExpression_toScalar(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) == ((modelica_integer) 1))) goto tmp3_end;
          /* Tail recursive call */
          _exp = arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_integer) 1));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_enumIndexExp(threadData_t *threadData, modelica_metatype _enumExp)
{
  modelica_metatype _indexExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _indexExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _enumExp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta6 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_enumExp), 4))));
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          
          /* Pattern matching succeeded */
          tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta12 = mmc_mk_box14(3, &NFFunction_Function_FUNCTION__desc, _OMC_LIT44, _OMC_LIT45, _OMC_LIT58, _OMC_LIT64, tmpMeta7, tmpMeta8, _OMC_LIT60, _OMC_LIT68, tmpMeta9, tmpMeta10, listArray(tmpMeta11), _OMC_LIT69, _OMC_LIT70);
          tmpMeta13 = mmc_mk_cons(_enumExp, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta15 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta16 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta17 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta18 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta19 = mmc_mk_box14(3, &NFFunction_Function_FUNCTION__desc, _OMC_LIT44, _OMC_LIT45, _OMC_LIT58, _OMC_LIT64, tmpMeta14, tmpMeta15, _OMC_LIT60, _OMC_LIT68, tmpMeta16, tmpMeta17, listArray(tmpMeta18), _OMC_LIT69, _OMC_LIT70);
          tmpMeta20 = mmc_mk_box2(16, &NFExpression_CALL__desc, omc_NFCall_makeTypedCall(threadData, tmpMeta12, tmpMeta13, omc_NFExpression_variability(threadData, _enumExp), 1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 8)))));
          tmpMeta1 = tmpMeta20;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _indexExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _indexExp;
}

DLLDirection
modelica_boolean omc_NFExpression_isEnd(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isend;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isend has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isend = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isend;
}
modelica_metatype boxptr_NFExpression_isEnd(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isend;
  modelica_metatype out_isend;
  _isend = omc_NFExpression_isEnd(threadData, _exp);
  out_isend = mmc_mk_icon(_isend);
  return out_isend;
}

DLLDirection
modelica_boolean omc_NFExpression_isEmpty(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _empty;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _empty has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,30,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _empty = tmp1;
  _return: OMC_LABEL_UNUSED
  return _empty;
}
modelica_metatype boxptr_NFExpression_isEmpty(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _empty;
  modelica_metatype out_empty;
  _empty = omc_NFExpression_isEmpty(threadData, _exp);
  out_empty = mmc_mk_icon(_empty);
  return out_empty;
}

DLLDirection
void omc_NFExpression_applyMutable(threadData_t *threadData, modelica_metatype _mutableExp, modelica_fnptr _func)
{
  modelica_metatype _exp_ptr = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _exp_ptr has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _mutableExp;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,29,1) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  _exp_ptr = tmpMeta2;

  omc_Mutable_update(threadData, _exp_ptr, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), omc_Mutable_access(threadData, _exp_ptr)) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, omc_Mutable_access(threadData, _exp_ptr)));
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
void omc_NFExpression_updateMutable(threadData_t *threadData, modelica_metatype _mutableExp, modelica_metatype _value)
{
  modelica_metatype _exp_ptr = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _exp_ptr has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _mutableExp;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,29,1) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  _exp_ptr = tmpMeta2;

  omc_Mutable_update(threadData, _exp_ptr, _value);
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
modelica_boolean omc_NFExpression_isMutable(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isMutable;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isMutable has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,29,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isMutable = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isMutable;
}
modelica_metatype boxptr_NFExpression_isMutable(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isMutable;
  modelica_metatype out_isMutable;
  _isMutable = omc_NFExpression_isMutable(threadData, _exp);
  out_isMutable = mmc_mk_icon(_isMutable);
  return out_isMutable;
}

DLLDirection
modelica_metatype omc_NFExpression_makeImmutable(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,29,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_makeMutable(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  tmpMeta1 = mmc_mk_box2(32, &NFExpression_MUTABLE__desc, omc_Mutable_create(threadData, _exp));
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_integer omc_NFExpression_purityList(threadData_t *threadData, modelica_metatype _expl, modelica_integer __omcQ_24in_5Fpur)
{
  modelica_integer _pur;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _pur = (modelica_integer)__omcQ_24in_5Fpur;
  {
    modelica_metatype _e;
    for (tmpMeta1 = _expl; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _e = MMC_CAR(tmpMeta1);
      _pur = omc_NFPrefixes_purityMin(threadData, (modelica_integer)_pur, omc_NFExpression_purity(threadData, _e));
    }
  }
  _return: OMC_LABEL_UNUSED
  return _pur;
}
modelica_metatype boxptr_NFExpression_purityList(threadData_t *threadData, modelica_metatype _expl, modelica_metatype __omcQ_24in_5Fpur)
{
  modelica_integer tmp1;
  modelica_integer _pur;
  modelica_metatype out_pur;
  tmp1 = mmc_unbox_integer(__omcQ_24in_5Fpur);
  _pur = omc_NFExpression_purityList(threadData, _expl, tmp1);
  out_pur = mmc_mk_icon(_pur);
  return out_pur;
}

DLLDirection
modelica_integer omc_NFExpression_purityArray(threadData_t *threadData, modelica_metatype _expl, modelica_integer __omcQ_24in_5Fpur)
{
  modelica_integer _pur;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_integer tmp4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _pur = (modelica_integer)__omcQ_24in_5Fpur;
  {
    modelica_metatype _e;
    for (tmpMeta1 = _expl, tmp4 = arrayLength(tmpMeta1), tmp3 = 1; tmp3 <= tmp4; tmp3++)
    {
      _e = arrayGet(tmpMeta1,tmp3);
      _pur = omc_NFPrefixes_purityMin(threadData, (modelica_integer)_pur, omc_NFExpression_purity(threadData, _e));
    }
  }
  _return: OMC_LABEL_UNUSED
  return _pur;
}
modelica_metatype boxptr_NFExpression_purityArray(threadData_t *threadData, modelica_metatype _expl, modelica_metatype __omcQ_24in_5Fpur)
{
  modelica_integer tmp1;
  modelica_integer _pur;
  modelica_metatype out_pur;
  tmp1 = mmc_unbox_integer(__omcQ_24in_5Fpur);
  _pur = omc_NFExpression_purityArray(threadData, _expl, tmp1);
  out_pur = mmc_mk_icon(_pur);
  return out_pur;
}

DLLDirection
modelica_integer omc_NFExpression_purity(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_integer _pur;
  modelica_integer tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _pur has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        case 7: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        case 8: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        case 9: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFComponentRef_purity(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp3_done;
        }
        case 10: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        case 11: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_purityArray(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), 1);
          goto tmp3_done;
        }
        case 12: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_integer(omc_List_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), boxvar_NFExpression_purityList, mmc_mk_integer(1)));
          goto tmp3_done;
        }
        case 13: {
          
          /* Pattern matching succeeded */
          _pur = omc_NFExpression_purity(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));

          _pur = omc_NFPrefixes_purityMin(threadData, (modelica_integer)_pur, omc_NFExpression_purity(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)))));

          if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))))
          {
            _pur = omc_NFPrefixes_purityMin(threadData, (modelica_integer)_pur, omc_NFExpression_purity(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))))));
          }
          tmp1 = (modelica_integer)_pur;
          goto tmp3_done;
        }
        case 14: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_purityList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), 1);
          goto tmp3_done;
        }
        case 15: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_purityList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), 1);
          goto tmp3_done;
        }
        case 16: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFCall_purity(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 17: {
          modelica_boolean tmp5;
          modelica_integer tmp6;
          
          /* Pattern matching succeeded */
          tmp5 = (modelica_boolean)isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          if(tmp5)
          {
            /* Tail recursive call */
            _exp = omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
            goto _tailrecursive;
            /* TODO: Make sure any eventual dead code below is never generated */
          }
          else
          {
            tmp6 = 1;
          }
          tmp1 = tmp6;
          goto tmp3_done;
        }
        case 18: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        case 19: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFPrefixes_purityMin(threadData, omc_NFExpression_purity(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), omc_NFExpression_purity(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))));
          goto tmp3_done;
        }
        case 20: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 21: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFPrefixes_purityMin(threadData, omc_NFExpression_purity(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), omc_NFExpression_purity(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))));
          goto tmp3_done;
        }
        case 22: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 23: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFPrefixes_purityMin(threadData, omc_NFExpression_purity(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), omc_NFExpression_purity(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))));
          goto tmp3_done;
        }
        case 24: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFPrefixes_purityMin(threadData, omc_NFExpression_purityList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), 1), omc_NFExpression_purityList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), 1));
          goto tmp3_done;
        }
        case 25: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFPrefixes_purityMin(threadData, omc_NFExpression_purity(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), omc_NFPrefixes_purityMin(threadData, omc_NFExpression_purity(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))), omc_NFExpression_purity(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))))));
          goto tmp3_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 27: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 28: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 29: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFPrefixes_purityMin(threadData, omc_NFExpression_purity(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), omc_NFSubscript_purityList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          goto tmp3_done;
        }
        case 30: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 31: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 32: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 36: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 33: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        case 34: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        case 35: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        case 37: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          omc_Error_assertion(threadData, 0 /* false */, _OMC_LIT71, _OMC_LIT73);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _pur = tmp1;
  _return: OMC_LABEL_UNUSED
  return _pur;
}
modelica_metatype boxptr_NFExpression_purity(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_integer _pur;
  modelica_metatype out_pur;
  _pur = omc_NFExpression_purity(threadData, _exp);
  out_pur = mmc_mk_icon(_pur);
  return out_pur;
}

DLLDirection
modelica_integer omc_NFExpression_variabilityList(threadData_t *threadData, modelica_metatype _expl, modelica_integer __omcQ_24in_5Fvar)
{
  modelica_integer _var;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _var = (modelica_integer)__omcQ_24in_5Fvar;
  {
    modelica_metatype _e;
    for (tmpMeta1 = _expl; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _e = MMC_CAR(tmpMeta1);
      _var = omc_NFPrefixes_variabilityMax(threadData, (modelica_integer)_var, omc_NFExpression_variability(threadData, _e));
    }
  }
  _return: OMC_LABEL_UNUSED
  return _var;
}
modelica_metatype boxptr_NFExpression_variabilityList(threadData_t *threadData, modelica_metatype _expl, modelica_metatype __omcQ_24in_5Fvar)
{
  modelica_integer tmp1;
  modelica_integer _var;
  modelica_metatype out_var;
  tmp1 = mmc_unbox_integer(__omcQ_24in_5Fvar);
  _var = omc_NFExpression_variabilityList(threadData, _expl, tmp1);
  out_var = mmc_mk_icon(_var);
  return out_var;
}

DLLDirection
modelica_integer omc_NFExpression_variabilityArray(threadData_t *threadData, modelica_metatype _expl, modelica_integer __omcQ_24in_5Fvar)
{
  modelica_integer _var;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_integer tmp4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _var = (modelica_integer)__omcQ_24in_5Fvar;
  {
    modelica_metatype _e;
    for (tmpMeta1 = _expl, tmp4 = arrayLength(tmpMeta1), tmp3 = 1; tmp3 <= tmp4; tmp3++)
    {
      _e = arrayGet(tmpMeta1,tmp3);
      _var = omc_NFPrefixes_variabilityMax(threadData, (modelica_integer)_var, omc_NFExpression_variability(threadData, _e));
    }
  }
  _return: OMC_LABEL_UNUSED
  return _var;
}
modelica_metatype boxptr_NFExpression_variabilityArray(threadData_t *threadData, modelica_metatype _expl, modelica_metatype __omcQ_24in_5Fvar)
{
  modelica_integer tmp1;
  modelica_integer _var;
  modelica_metatype out_var;
  tmp1 = mmc_unbox_integer(__omcQ_24in_5Fvar);
  _var = omc_NFExpression_variabilityArray(threadData, _expl, tmp1);
  out_var = mmc_mk_icon(_var);
  return out_var;
}

DLLDirection
modelica_integer omc_NFExpression_variability(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_integer _var;
  modelica_integer tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _var has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        case 7: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        case 8: {
          
          /* Pattern matching succeeded */
          tmp1 = 5;
          goto tmp3_done;
        }
        case 9: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFComponentRef_variability(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp3_done;
        }
        case 10: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        case 11: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_variabilityArray(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), 1);
          goto tmp3_done;
        }
        case 12: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_integer(omc_List_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), boxvar_NFExpression_variabilityList, mmc_mk_integer(1)));
          goto tmp3_done;
        }
        case 13: {
          
          /* Pattern matching succeeded */
          _var = omc_NFExpression_variability(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));

          _var = omc_NFPrefixes_variabilityMax(threadData, (modelica_integer)_var, omc_NFExpression_variability(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)))));

          if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))))
          {
            _var = omc_NFPrefixes_variabilityMax(threadData, (modelica_integer)_var, omc_NFExpression_variability(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))))));
          }
          tmp1 = (modelica_integer)_var;
          goto tmp3_done;
        }
        case 14: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_variabilityList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), 1);
          goto tmp3_done;
        }
        case 15: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_variabilityList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), 1);
          goto tmp3_done;
        }
        case 16: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFCall_variability(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 17: {
          
          /* Pattern matching succeeded */
          if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))))
          {
            _var = omc_NFPrefixes_variabilityMax(threadData, 3, omc_NFExpression_variability(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))))));
          }
          else
          {
            _var = 3;
          }
          tmp1 = (modelica_integer)_var;
          goto tmp3_done;
        }
        case 18: {
          
          /* Pattern matching succeeded */
          tmp1 = 3;
          goto tmp3_done;
        }
        case 24: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFPrefixes_variabilityMax(threadData, omc_NFExpression_variabilityList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), 1), omc_NFExpression_variabilityList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), 1));
          goto tmp3_done;
        }
        case 19: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFPrefixes_variabilityMax(threadData, omc_NFExpression_variability(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), omc_NFExpression_variability(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))));
          goto tmp3_done;
        }
        case 20: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 21: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFPrefixes_variabilityMax(threadData, omc_NFExpression_variability(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), omc_NFExpression_variability(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))));
          goto tmp3_done;
        }
        case 22: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 23: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFPrefixes_variabilityMin(threadData, omc_NFPrefixes_variabilityMax(threadData, omc_NFExpression_variability(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), omc_NFExpression_variability(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))))), 5);
          goto tmp3_done;
        }
        case 25: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFPrefixes_variabilityMax(threadData, omc_NFExpression_variability(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), omc_NFPrefixes_variabilityMax(threadData, omc_NFExpression_variability(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))), omc_NFExpression_variability(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))))));
          goto tmp3_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 27: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 28: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 29: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFPrefixes_variabilityMax(threadData, omc_NFExpression_variability(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), omc_NFSubscript_variabilityList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          goto tmp3_done;
        }
        case 30: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 31: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 32: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 36: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 33: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        case 34: {
          
          /* Pattern matching succeeded */
          tmp1 = 7;
          goto tmp3_done;
        }
        case 35: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        case 37: {
          
          /* Pattern matching succeeded */
          tmp1 = 1;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          omc_Error_assertion(threadData, 0 /* false */, _OMC_LIT74, _OMC_LIT75);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _var = tmp1;
  _return: OMC_LABEL_UNUSED
  return _var;
}
modelica_metatype boxptr_NFExpression_variability(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_integer _var;
  modelica_metatype out_var;
  _var = omc_NFExpression_variability(threadData, _exp);
  out_var = mmc_mk_icon(_var);
  return out_var;
}

static modelica_metatype closure9_NFExpression_promote2(threadData_t *thData, modelica_metatype closure, modelica_metatype exp)
{
  modelica_metatype isArray = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype dims = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  modelica_metatype types = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),3));
  return boxptr_NFExpression_promote2(thData, exp, isArray, dims, types);
}
DLLDirection
modelica_metatype omc_NFExpression_promote2(threadData_t *threadData, modelica_metatype _exp, modelica_boolean _isArray, modelica_integer _dims, modelica_metatype _types)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _exp;
    tmp4_2 = _types;
    {
      modelica_metatype _ty = NULL;
      modelica_metatype _rest_ty = NULL;
      modelica_boolean _expanded;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _ty has no default value.
      // _rest_ty has no default value.
      // _expanded has no default value.
      tmp4 = 0;
      for (; tmp4 < 4; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_2)) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          if (listEmpty(tmp4_2)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_2);
          tmpMeta7 = MMC_CDR(tmp4_2);
          _ty = tmpMeta6;
          _rest_ty = tmpMeta7;
          /* Pattern matching succeeded */
          tmpMeta8 = mmc_mk_box3(0, mmc_mk_boolean(0 /* false */), mmc_mk_integer(_dims), _rest_ty);
          tmpMeta1 = omc_NFExpression_makeArray(threadData, _ty, omc_Array_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (modelica_fnptr) mmc_mk_box2(0,closure9_NFExpression_promote2,tmpMeta8)), 0 /* false */);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!_isArray) goto tmp3_end;
          _outExp = omc_NFExpandExp_expand(threadData, _exp, 0 /* false */ ,&_expanded);

          if(_expanded)
          {
            _outExp = omc_NFExpression_promote2(threadData, _outExp, 1 /* true */, _dims, _types);
          }
          else
          {
            tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
            tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
            tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
            tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
            tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
            tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
            tmpMeta15 = MMC_REFSTRUCTLIT(mmc_nil);
            tmpMeta16 = mmc_mk_box14(3, &NFFunction_Function_FUNCTION__desc, _OMC_LIT77, _OMC_LIT45, tmpMeta9, tmpMeta10, tmpMeta11, tmpMeta12, _OMC_LIT78, _OMC_LIT68, tmpMeta13, tmpMeta14, listArray(tmpMeta15), _OMC_LIT69, _OMC_LIT70);
            tmpMeta18 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer(_dims));
            tmpMeta17 = mmc_mk_cons(_exp, mmc_mk_cons(tmpMeta18, MMC_REFSTRUCTLIT(mmc_nil)));
            tmpMeta19 = mmc_mk_box2(16, &NFExpression_CALL__desc, omc_NFCall_makeTypedCall(threadData, tmpMeta16, tmpMeta17, omc_NFExpression_variability(threadData, _exp), omc_NFExpression_purity(threadData, _exp), listHead(_types)));
            _outExp = tmpMeta19;
          }
          tmpMeta1 = _outExp;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          
          /* Pattern matching succeeded */
          _outExp = _exp;

          {
            modelica_metatype _ty;
            for (tmpMeta20 = listReverse(_types); !listEmpty(tmpMeta20); tmpMeta20=MMC_CDR(tmpMeta20))
            {
              _ty = MMC_CAR(tmpMeta20);
              _outExp = omc_NFExpression_makeArray(threadData, _ty, arrayCreate(((modelica_integer) 1), _outExp), 0 /* false */);
            }
          }
          tmpMeta1 = _outExp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}
modelica_metatype boxptr_NFExpression_promote2(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _isArray, modelica_metatype _dims, modelica_metatype _types)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_isArray);
  tmp2 = mmc_unbox_integer(_dims);
  _outExp = omc_NFExpression_promote2(threadData, _exp, tmp1, tmp2, _types);
  /* skip box _outExp; NFExpression */
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_promote(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fe, modelica_metatype __omcQ_24in_5Fty, modelica_integer _n, modelica_metatype *out_ty)
{
  modelica_metatype _e = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _dims = NULL;
  modelica_metatype _ety = NULL;
  modelica_metatype _tys = NULL;
  modelica_metatype tmpMeta1;
  modelica_boolean _is_array;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta8;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _e = __omcQ_24in_5Fe;
  _ty = __omcQ_24in_5Fty;
  // _dims has no default value.
  // _ety has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _tys = tmpMeta1;
  // _is_array has no default value.
  {
    modelica_metatype __omcQ_24tmpVar23;
    modelica_metatype* tmp3;
    modelica_metatype tmpMeta4;
    modelica_metatype __omcQ_24tmpVar22;
    modelica_integer tmp5;
    modelica_integer tmp6;
    modelica_integer tmp7;
    modelica_integer _i;
    tmp6 = 1 /* Range step-value */;
    tmp7 = ((modelica_integer) -1) + _n /* Range stop-value */;
    _i = omc_NFType_dimensionCount(threadData, _ty) /* Range start-value */;
    _i = (omc_NFType_dimensionCount(threadData, _ty) /* Range start-value */)-tmp6;
    tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar23 = tmpMeta4; /* defaultValue */
    tmp3 = &__omcQ_24tmpVar23;
    while(1) {
      tmp5 = 1;
      if (tmp6 > 0 ? _i+tmp6 <= tmp7 : _i+tmp6 >= tmp7) {
        _i += tmp6;
        tmp5--;
      }
      if (tmp5 == 0) {
        __omcQ_24tmpVar22 = omc_NFDimension_fromInteger(threadData, ((modelica_integer) 1), 1);
        *tmp3 = mmc_mk_cons(__omcQ_24tmpVar22,0);
        tmp3 = &MMC_CDR(*tmp3);
      } else if (tmp5 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp3 = mmc_mk_nil();
    tmpMeta2 = __omcQ_24tmpVar23;
  }
  _dims = tmpMeta2;

  if((!listEmpty(_dims)))
  {
    _dims = listAppend(omc_NFType_arrayDims(threadData, _ty), _dims);

    _is_array = omc_NFType_isArray(threadData, _ty);

    _ety = omc_NFType_arrayElementType(threadData, _ty);

    _ty = omc_NFType_liftArrayLeftList(threadData, _ety, _dims);

    while(1)
    {
      if(!(!listEmpty(_dims))) break;
      tmpMeta8 = mmc_mk_cons(omc_NFType_liftArrayLeftList(threadData, _ety, _dims), _tys);
      _tys = tmpMeta8;

      _dims = listRest(_dims);
    }

    _e = omc_NFExpression_promote2(threadData, _e, _is_array, _n, listReverse(_tys));
  }
  _return: OMC_LABEL_UNUSED
  if (out_ty) { *out_ty = _ty; }
  return _e;
}
modelica_metatype boxptr_NFExpression_promote(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fe, modelica_metatype __omcQ_24in_5Fty, modelica_metatype _n, modelica_metatype *out_ty)
{
  modelica_integer tmp1;
  modelica_metatype _e = NULL;
  tmp1 = mmc_unbox_integer(_n);
  _e = omc_NFExpression_promote(threadData, __omcQ_24in_5Fe, __omcQ_24in_5Fty, tmp1, out_ty);
  /* skip box _e; NFExpression */
  /* skip box _ty; NFType */
  return _e;
}

DLLDirection
modelica_metatype omc_NFExpression_makeIdentityMatrix(threadData_t *threadData, modelica_integer _n, modelica_metatype _elementType)
{
  modelica_metatype _matrix = NULL;
  modelica_metatype _row = NULL;
  modelica_metatype _rows = NULL;
  modelica_metatype _zero = NULL;
  modelica_metatype _one = NULL;
  modelica_metatype _row_ty = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_integer tmp4;
  modelica_integer tmp5;
  modelica_integer tmp6;
  modelica_integer tmp7;
  modelica_integer tmp8;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _matrix has no default value.
  // _row has no default value.
  // _rows has no default value.
  // _zero has no default value.
  // _one has no default value.
  // _row_ty has no default value.
  _zero = omc_NFExpression_makeZero(threadData, _elementType);

  _one = omc_NFExpression_makeOne(threadData, _elementType);

  _rows = arrayCreateNoInit(_n, _zero);

  tmpMeta1 = mmc_mk_cons(omc_NFDimension_fromInteger(threadData, _n, 1), MMC_REFSTRUCTLIT(mmc_nil));
  tmpMeta2 = mmc_mk_box3(10, &NFType_ARRAY__desc, _elementType, tmpMeta1);
  _row_ty = tmpMeta2;

  tmp6 = ((modelica_integer) 1); tmp7 = 1; tmp8 = _n;
  if(!(((tmp7 > 0) && (tmp6 > tmp8)) || ((tmp7 < 0) && (tmp6 < tmp8))))
  {
    modelica_integer _i;
    for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp6, tmp8); _i += tmp7)
    {
      _row = arrayCreateNoInit(_n, _zero);

      tmp3 = ((modelica_integer) 1); tmp4 = 1; tmp5 = _n;
      if(!(((tmp4 > 0) && (tmp3 > tmp5)) || ((tmp4 < 0) && (tmp3 < tmp5))))
      {
        modelica_integer _j;
        for(_j = ((modelica_integer) 1); in_range_integer(_j, tmp3, tmp5); _j += tmp4)
        {
          arrayUpdateNoBoundsChecking(_row, _j, ((_i == _j)?_one:_zero));
        }
      }

      arrayUpdateNoBoundsChecking(_rows, _i, omc_NFExpression_makeArray(threadData, _row_ty, _row, 1 /* true */));
    }
  }

  _matrix = omc_NFExpression_makeExpArray(threadData, _rows, _row_ty, 1 /* true */);
  _return: OMC_LABEL_UNUSED
  return _matrix;
}
modelica_metatype boxptr_NFExpression_makeIdentityMatrix(threadData_t *threadData, modelica_metatype _n, modelica_metatype _elementType)
{
  modelica_integer tmp1;
  modelica_metatype _matrix = NULL;
  tmp1 = mmc_unbox_integer(_n);
  _matrix = omc_NFExpression_makeIdentityMatrix(threadData, tmp1, _elementType);
  /* skip box _matrix; NFExpression */
  return _matrix;
}

static modelica_metatype closure10_NFExpression_makeArray(threadData_t *thData, modelica_metatype closure, modelica_metatype expl)
{
  modelica_metatype ty = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype literal = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NFExpression_makeArray(thData, ty, expl, literal);
}
DLLDirection
modelica_metatype omc_NFExpression_transposeArray(threadData_t *threadData, modelica_metatype _arrayExp)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _dim1 = NULL;
  modelica_metatype _dim2 = NULL;
  modelica_metatype _rest_dims = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _row_ty = NULL;
  modelica_metatype _expl = NULL;
  modelica_metatype _matrix = NULL;
  modelica_boolean _literal;
  modelica_metatype _arr = NULL;
  modelica_metatype _matrix_arr = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _dim1 has no default value.
  // _dim2 has no default value.
  // _rest_dims has no default value.
  // _ty has no default value.
  // _row_ty has no default value.
  // _expl has no default value.
  // _matrix has no default value.
  // _literal has no default value.
  // _arr has no default value.
  // _matrix_arr has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _arrayExp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_integer tmp15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,7,2) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
          if (listEmpty(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_CAR(tmpMeta8);
          tmpMeta10 = MMC_CDR(tmpMeta8);
          if (listEmpty(tmpMeta10)) goto tmp3_end;
          tmpMeta11 = MMC_CAR(tmpMeta10);
          tmpMeta12 = MMC_CDR(tmpMeta10);
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmp15 = mmc_unbox_integer(tmpMeta14);
          _ty = tmpMeta7;
          _dim1 = tmpMeta9;
          _dim2 = tmpMeta11;
          _rest_dims = tmpMeta12;
          _arr = tmpMeta13;
          _literal = tmp15  /* pattern as ty=Boolean */;
          /* Pattern matching succeeded */
          if((!(arrayLength(_arr) == ((modelica_integer) 0))))
          {
            tmpMeta16 = mmc_mk_cons(_dim1, _rest_dims);
            tmpMeta17 = mmc_mk_box3(10, &NFType_ARRAY__desc, _ty, tmpMeta16);
            _row_ty = tmpMeta17;

            _matrix_arr = omc_Array_map(threadData, _arr, boxvar_NFExpression_arrayElements);

            _matrix_arr = omc_Array_transpose(threadData, _matrix_arr);

            tmpMeta18 = mmc_mk_box2(0, _row_ty, mmc_mk_boolean(_literal));
            _arr = omc_Array_map(threadData, _matrix_arr, (modelica_fnptr) mmc_mk_box2(0,closure10_NFExpression_makeArray,tmpMeta18));
          }
          tmpMeta20 = mmc_mk_cons(_dim1, _rest_dims);
          tmpMeta19 = mmc_mk_cons(_dim2, tmpMeta20);
          tmpMeta21 = mmc_mk_box3(10, &NFType_ARRAY__desc, _ty, tmpMeta19);
          tmpMeta1 = omc_NFExpression_makeArray(threadData, tmpMeta21, _arr, _literal);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_boolean omc_NFExpression_hasArrayCall2(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _hasArrayCall;
  modelica_metatype _call = NULL;
  modelica_metatype _ty = NULL;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _hasArrayCall has no default value.
  // _call has no default value.
  // _ty has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          _call = tmpMeta6;
          /* Pattern matching succeeded */
          _ty = omc_NFCall_typeOf(threadData, _call);
          tmp1 = (omc_NFType_isArray(threadData, _ty) && omc_NFCall_isVectorizeable(threadData, _call));
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,3) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,13,1) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
          
          _call = tmpMeta8;
          /* Pattern matching succeeded */
          _ty = omc_NFType_nthTupleType(threadData, omc_NFCall_typeOf(threadData, _call), mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          tmp1 = (omc_NFType_isArray(threadData, _ty) && omc_NFCall_isVectorizeable(threadData, _call));
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _hasArrayCall = tmp1;
  _return: OMC_LABEL_UNUSED
  return _hasArrayCall;
}
modelica_metatype boxptr_NFExpression_hasArrayCall2(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _hasArrayCall;
  modelica_metatype out_hasArrayCall;
  _hasArrayCall = omc_NFExpression_hasArrayCall2(threadData, _exp);
  out_hasArrayCall = mmc_mk_icon(_hasArrayCall);
  return out_hasArrayCall;
}

DLLDirection
modelica_boolean omc_NFExpression_hasArrayCall(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _hasArrayCall;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _hasArrayCall has no default value.
  _hasArrayCall = omc_NFExpression_contains(threadData, _exp, boxvar_NFExpression_hasArrayCall2);
  _return: OMC_LABEL_UNUSED
  return _hasArrayCall;
}
modelica_metatype boxptr_NFExpression_hasArrayCall(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _hasArrayCall;
  modelica_metatype out_hasArrayCall;
  _hasArrayCall = omc_NFExpression_hasArrayCall(threadData, _exp);
  out_hasArrayCall = mmc_mk_icon(_hasArrayCall);
  return out_hasArrayCall;
}

DLLDirection
modelica_metatype omc_NFExpression_arrayScalarElement(threadData_t *threadData, modelica_metatype _arrayExp)
{
  modelica_metatype _scalarExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _scalarExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _arrayExp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_arrayExp), 3)))) == ((modelica_integer) 1))) goto tmp3_end;
          tmpMeta1 = arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_arrayExp), 3))), ((modelica_integer) 1));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _scalarExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _scalarExp;
}

DLLDirection
modelica_metatype omc_NFExpression_arrayScalarElements__impl(threadData_t *threadData, modelica_metatype _exp, modelica_metatype __omcQ_24in_5Felements)
{
  modelica_metatype _elements = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _elements = __omcQ_24in_5Felements;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_integer tmp8;
          modelica_integer tmp9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _e;
            for (tmpMeta6 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), tmp9 = arrayLength(tmpMeta6), tmp8 = 1; tmp8 <= tmp9; tmp8++)
            {
              _e = arrayGet(tmpMeta6,tmp8);
              _elements = omc_NFExpression_arrayScalarElements__impl(threadData, _e, _elements);
            }
          }
          tmpMeta1 = _elements;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta10;
          
          /* Pattern matching succeeded */
          tmpMeta10 = mmc_mk_cons(_exp, _elements);
          tmpMeta1 = tmpMeta10;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _elements = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _elements;
}

DLLDirection
modelica_metatype omc_NFExpression_arrayScalarElements(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_metatype _elements = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _elements has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _elements = listReverseInPlace(omc_NFExpression_arrayScalarElements__impl(threadData, _exp, tmpMeta1));
  _return: OMC_LABEL_UNUSED
  return _elements;
}

DLLDirection
modelica_metatype omc_NFExpression_arrayElementList(threadData_t *threadData, modelica_metatype _array)
{
  modelica_metatype _elements = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _elements has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _array;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 1; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = arrayList((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_array), 3))));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _elements = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _elements;
}

DLLDirection
modelica_metatype omc_NFExpression_arrayElements(threadData_t *threadData, modelica_metatype _array)
{
  modelica_metatype _elements = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _elements has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _array;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,8,3) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  _elements = tmpMeta2;
  _return: OMC_LABEL_UNUSED
  return _elements;
}

DLLDirection
modelica_metatype omc_NFExpression_sliceRange(threadData_t *threadData, modelica_metatype __omcQ_24in_5Frange, modelica_metatype _slice)
{
  modelica_metatype _range = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _range = __omcQ_24in_5Frange;
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _range;
    tmp4_2 = _slice;
    {
      modelica_integer _start;
      modelica_integer _step;
      modelica_integer _stop;
      modelica_integer _slice_start;
      modelica_integer _slice_step;
      modelica_integer _slice_stop;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _start has no default value.
      // _step has no default value.
      // _stop has no default value.
      // _slice_start has no default value.
      // _slice_step has no default value.
      // _slice_stop has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          modelica_metatype tmpMeta8;
          modelica_integer tmp9;
          modelica_metatype tmpMeta10;
          modelica_integer tmp11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          tmp7 = mmc_unbox_integer(tmpMeta6);
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
          tmp9 = mmc_unbox_integer(tmpMeta8);
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          tmp11 = mmc_unbox_integer(tmpMeta10);
          _slice_start = tmp7  /* pattern as ty=Integer */;
          _slice_step = tmp9  /* pattern as ty=Integer */;
          _slice_stop = tmp11  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          _step = mmc_unbox_integer(omc_Util_applyOptionOrDefault(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 4))), boxvar_NFExpression_integerValue, mmc_mk_integer(((modelica_integer) 1))));

          _start = omc_NFExpression_integerValue(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 3))));

          _stop = _start + (_slice_stop) * (_step);

          _start = _start + (_slice_start) * (_step);

          _step = (_slice_step) * (_step);

          tmpMeta12 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer(_start));
          tmpMeta13 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer(_step));
          tmpMeta14 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer(_stop));
          tmpMeta15 = mmc_mk_box5(13, &NFExpression_RANGE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 2))), tmpMeta12, mmc_mk_some(tmpMeta13), tmpMeta14);
          _range = tmpMeta15;
          tmpMeta1 = omc_NFExpression_retype(threadData, _range);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          
          /* Pattern matching succeeded */
          tmpMeta17 = stringAppend(_OMC_LIT84,omc_NFExpression_toString(threadData, _range));
          tmpMeta16 = mmc_mk_cons(tmpMeta17, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT83, tmpMeta16);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _range = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _range;
}

DLLDirection
modelica_metatype omc_NFExpression_revertRange(threadData_t *threadData, modelica_metatype __omcQ_24in_5Frange)
{
  modelica_metatype _range = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _range = __omcQ_24in_5Frange;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _range;
    {
      modelica_metatype _step = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _step has no default value.
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          if (optionNone(tmpMeta6)) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
          
          _step = tmpMeta7;
          /* Pattern matching succeeded */
          tmpMeta8 = mmc_mk_box5(13, &NFExpression_RANGE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 5))), mmc_mk_some(omc_NFExpression_negate(threadData, _step)), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 3))));
          tmpMeta1 = tmpMeta8;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta9 = mmc_mk_box5(13, &NFExpression_RANGE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 5))), _OMC_LIT86, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 3))));
          tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          
          /* Pattern matching succeeded */
          tmpMeta11 = stringAppend(_OMC_LIT87,omc_NFExpression_toString(threadData, _range));
          tmpMeta10 = mmc_mk_cons(tmpMeta11, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT83, tmpMeta10);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _range = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _range;
}

DLLDirection
modelica_metatype omc_NFExpression_logicNegate(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 6: {
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          tmpMeta5 = mmc_mk_box2(6, &NFExpression_BOOLEAN__desc, mmc_mk_boolean((!mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))))));
          tmpMeta1 = tmpMeta5;
          goto tmp3_done;
        }
        case 22: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          tmpMeta6 = mmc_mk_box3(22, &NFExpression_LUNARY__desc, omc_NFOperator_makeNot(threadData, omc_NFExpression_typeOf(threadData, _exp)), _exp);
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_negate(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          tmpMeta5 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer((-(mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))))));
          tmpMeta1 = tmpMeta5;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          tmpMeta6 = mmc_mk_box2(4, &NFExpression_REAL__desc, mmc_mk_real((-(mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))))));
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 26: {
          modelica_metatype tmpMeta7;
          
          /* Pattern matching succeeded */
          tmpMeta7 = mmc_mk_box3(26, &NFExpression_CAST__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), omc_NFExpression_negate(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          tmpMeta1 = tmpMeta7;
          goto tmp3_done;
        }
        case 20: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          modelica_metatype tmpMeta8;
          
          /* Pattern matching succeeded */
          tmpMeta8 = mmc_mk_box3(20, &NFExpression_UNARY__desc, omc_NFOperator_makeUMinus(threadData, omc_NFExpression_typeOf(threadData, _exp)), _exp);
          tmpMeta1 = tmpMeta8;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_boolean omc_NFExpression_isNegated(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _negated;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _negated has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) < ((modelica_integer) 0));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) < 0.0);
          goto tmp3_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 20: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _negated = tmp1;
  _return: OMC_LABEL_UNUSED
  return _negated;
}
modelica_metatype boxptr_NFExpression_isNegated(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _negated;
  modelica_metatype out_negated;
  _negated = omc_NFExpression_isNegated(threadData, _exp);
  out_negated = mmc_mk_icon(_negated);
  return out_negated;
}

DLLDirection
modelica_metatype omc_NFExpression_unbox(threadData_t *threadData, modelica_metatype _boxedExp)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _exp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _boxedExp;
    {
      modelica_metatype _ty = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _ty has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_boxedExp), 2)));
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          modelica_boolean tmp7;
          modelica_metatype tmpMeta8;
          
          /* Pattern matching succeeded */
          _ty = omc_NFExpression_typeOf(threadData, _boxedExp);
          tmp7 = (modelica_boolean)omc_NFType_isBoxed(threadData, _ty);
          if(tmp7)
          {
            tmpMeta6 = mmc_mk_box3(28, &NFExpression_UNBOX__desc, _boxedExp, omc_NFType_unbox(threadData, _ty));
            tmpMeta8 = tmpMeta6;
          }
          else
          {
            tmpMeta8 = _boxedExp;
          }
          tmpMeta1 = tmpMeta8;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_box(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_metatype _boxedExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _boxedExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 15: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta9;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar25;
            modelica_metatype* tmp6;
            modelica_metatype tmpMeta7;
            modelica_metatype __omcQ_24tmpVar24;
            modelica_integer tmp8;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)));
            tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar25 = tmpMeta7; /* defaultValue */
            tmp6 = &__omcQ_24tmpVar25;
            while(1) {
              tmp8 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp8--;
              }
              if (tmp8 == 0) {
                __omcQ_24tmpVar24 = omc_NFExpression_box(threadData, _e);
                *tmp6 = mmc_mk_cons(__omcQ_24tmpVar24,0);
                tmp6 = &MMC_CDR(*tmp6);
              } else if (tmp8 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp6 = mmc_mk_nil();
            tmpMeta5 = __omcQ_24tmpVar25;
          }
          tmpMeta9 = mmc_mk_box4(15, &NFExpression_RECORD__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), omc_NFType_box(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), tmpMeta5);
          tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        case 27: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 35: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          modelica_metatype tmpMeta10;
          
          /* Pattern matching succeeded */
          tmpMeta10 = mmc_mk_box2(27, &NFExpression_BOX__desc, _exp);
          tmpMeta1 = tmpMeta10;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _boxedExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _boxedExp;
}

DLLDirection
modelica_metatype omc_NFExpression_makeDefaultValue(threadData_t *threadData, modelica_metatype _ty, modelica_metatype _min, modelica_metatype _max)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _exp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _ty;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          
          /* Pattern matching succeeded */
          if((isSome(_min) && omc_NFExpression_isNonNegative(threadData, omc_Util_getOption(threadData, _min))))
          {
            /* Pattern-matching assignment */
            tmpMeta5 = _min;
            if (optionNone(tmpMeta5)) goto goto_2;
            tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 1));
            _exp = tmpMeta6;
          }
          else
          {
            if((isSome(_max) && omc_NFExpression_isNonPositive(threadData, omc_Util_getOption(threadData, _max))))
            {
              /* Pattern-matching assignment */
              tmpMeta7 = _max;
              if (optionNone(tmpMeta7)) goto goto_2;
              tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
              _exp = tmpMeta8;
            }
            else
            {
              _exp = _OMC_LIT40;
            }
          }
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          
          /* Pattern matching succeeded */
          if((isSome(_min) && omc_NFExpression_isNonNegative(threadData, omc_Util_getOption(threadData, _min))))
          {
            /* Pattern-matching assignment */
            tmpMeta9 = _min;
            if (optionNone(tmpMeta9)) goto goto_2;
            tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 1));
            _exp = tmpMeta10;
          }
          else
          {
            if((isSome(_max) && omc_NFExpression_isNonPositive(threadData, omc_Util_getOption(threadData, _max))))
            {
              /* Pattern-matching assignment */
              tmpMeta11 = _max;
              if (optionNone(tmpMeta11)) goto goto_2;
              tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 1));
              _exp = tmpMeta12;
            }
            else
            {
              _exp = _OMC_LIT88;
            }
          }
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT89;
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT90;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          
          /* Pattern matching succeeded */
          if(isSome(_min))
          {
            /* Pattern-matching assignment */
            tmpMeta13 = _min;
            if (optionNone(tmpMeta13)) goto goto_2;
            tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 1));
            _exp = tmpMeta14;
          }
          else
          {
            tmpMeta15 = mmc_mk_box4(7, &NFExpression_ENUM__LITERAL__desc, _ty, listHead((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_ty), 3)))), mmc_mk_integer(((modelica_integer) 1)));
            _exp = tmpMeta15;
          }
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 10: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_fillType(threadData, _ty, omc_NFExpression_makeDefaultValue(threadData, omc_NFType_arrayElementType(threadData, _ty), mmc_mk_none(), mmc_mk_none()));
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta20;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar27;
            modelica_metatype* tmp17;
            modelica_metatype tmpMeta18;
            modelica_metatype __omcQ_24tmpVar26;
            modelica_integer tmp19;
            modelica_metatype _t_loopVar = 0;
            modelica_metatype _t;
            _t_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_ty), 2)));
            tmpMeta18 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar27 = tmpMeta18; /* defaultValue */
            tmp17 = &__omcQ_24tmpVar27;
            while(1) {
              tmp19 = 1;
              if (!listEmpty(_t_loopVar)) {
                _t = MMC_CAR(_t_loopVar);
                _t_loopVar = MMC_CDR(_t_loopVar);
                tmp19--;
              }
              if (tmp19 == 0) {
                __omcQ_24tmpVar26 = omc_NFExpression_makeDefaultValue(threadData, _t, mmc_mk_none(), mmc_mk_none());
                *tmp17 = mmc_mk_cons(__omcQ_24tmpVar26,0);
                tmp17 = &MMC_CDR(*tmp17);
              } else if (tmp19 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp17 = mmc_mk_nil();
            tmpMeta16 = __omcQ_24tmpVar27;
          }
          tmpMeta20 = mmc_mk_box3(14, &NFExpression_TUPLE__desc, _ty, tmpMeta16);
          tmpMeta1 = tmpMeta20;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_makeMinValue(threadData_t *threadData, modelica_metatype _ty)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _exp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _ty;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 4: {
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          tmpMeta5 = mmc_mk_box2(4, &NFExpression_REAL__desc, mmc_mk_real((-realMaxLit())));
          tmpMeta1 = tmpMeta5;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          tmpMeta6 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer((-intMaxLit())));
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT90;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta7;
          
          /* Pattern matching succeeded */
          tmpMeta7 = mmc_mk_box4(7, &NFExpression_ENUM__LITERAL__desc, _ty, listHead((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_ty), 3)))), mmc_mk_integer(((modelica_integer) 1)));
          tmpMeta1 = tmpMeta7;
          goto tmp3_done;
        }
        case 10: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_fillType(threadData, _ty, omc_NFExpression_makeMinValue(threadData, omc_NFType_arrayElementType(threadData, _ty)));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          modelica_metatype tmpMeta8;
          
          /* Pattern matching succeeded */
          tmpMeta8 = mmc_mk_box2(4, &NFExpression_REAL__desc, mmc_mk_real((-realMaxLit())));
          tmpMeta1 = tmpMeta8;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_makeMaxValue(threadData_t *threadData, modelica_metatype _ty)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _exp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _ty;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 4: {
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          tmpMeta5 = mmc_mk_box2(4, &NFExpression_REAL__desc, mmc_mk_real(realMaxLit()));
          tmpMeta1 = tmpMeta5;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          tmpMeta6 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer(intMaxLit()));
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT91;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta7;
          
          /* Pattern matching succeeded */
          tmpMeta7 = mmc_mk_box4(7, &NFExpression_ENUM__LITERAL__desc, _ty, omc_List_last(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_ty), 3)))), mmc_mk_integer(listLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_ty), 3))))));
          tmpMeta1 = tmpMeta7;
          goto tmp3_done;
        }
        case 10: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_fillType(threadData, _ty, omc_NFExpression_makeMaxValue(threadData, omc_NFType_arrayElementType(threadData, _ty)));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          modelica_metatype tmpMeta8;
          
          /* Pattern matching succeeded */
          tmpMeta8 = mmc_mk_box2(4, &NFExpression_REAL__desc, mmc_mk_real(realMaxLit()));
          tmpMeta1 = tmpMeta8;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_makeNaN(threadData_t *threadData, modelica_metatype _ty)
{
  modelica_metatype _nan = NULL;
  modelica_metatype _zero = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _nan has no default value.
  _zero = omc_NFExpression_makeZero(threadData, _ty);
  tmpMeta1 = mmc_mk_box4(19, &NFExpression_BINARY__desc, _zero, omc_NFOperator_makeDiv(threadData, _ty), _zero);
  _nan = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _nan;
}

DLLDirection
modelica_metatype omc_NFExpression_makeMinusOne(threadData_t *threadData, modelica_metatype _ty)
{
  modelica_metatype _oneExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oneExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _ty;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT93;
          goto tmp3_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT85;
          goto tmp3_done;
        }
        case 10: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_fillType(threadData, _ty, omc_NFExpression_makeMinusOne(threadData, omc_NFType_arrayElementType(threadData, _ty)));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          tmpMeta6 = stringAppend(_OMC_LIT94,omc_NFType_toString(threadData, _ty));
          tmpMeta5 = mmc_mk_cons(tmpMeta6, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT83, tmpMeta5);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _oneExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _oneExp;
}

DLLDirection
modelica_metatype omc_NFExpression_makeOne(threadData_t *threadData, modelica_metatype _ty)
{
  modelica_metatype _oneExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _oneExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _ty;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT96;
          goto tmp3_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT97;
          goto tmp3_done;
        }
        case 10: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_fillType(threadData, _ty, omc_NFExpression_makeOne(threadData, omc_NFType_arrayElementType(threadData, _ty)));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          tmpMeta6 = stringAppend(_OMC_LIT98,omc_NFType_toString(threadData, _ty));
          tmpMeta5 = mmc_mk_cons(tmpMeta6, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT83, tmpMeta5);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _oneExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _oneExp;
}

DLLDirection
modelica_metatype omc_NFExpression_makeOperatorRecordZero(threadData_t *threadData, modelica_metatype _recordNode)
{
  modelica_metatype _zeroExp = NULL;
  modelica_metatype _op_node = NULL;
  modelica_metatype _fn = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _zeroExp has no default value.
  // _op_node has no default value.
  // _fn has no default value.
  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp2_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          /* Pattern matching succeeded */
          _op_node = omc_NFClass_lookupElement(threadData, _OMC_LIT99, omc_NFInstNode_InstNode_getClass(threadData, _recordNode), NULL);

          omc_NFFunction_Function_instFunctionNode(threadData, _op_node, ((modelica_integer) 0), omc_NFInstNode_InstNode_info(threadData, omc_NFInstNode_InstNode_parent(threadData, _op_node)));

          /* Pattern-matching assignment */
          tmpMeta5 = omc_NFFunction_Function_typeNodeCache(threadData, _op_node, ((modelica_integer) 16));
          if (listEmpty(tmpMeta5)) goto goto_1;
          tmpMeta6 = MMC_CAR(tmpMeta5);
          tmpMeta7 = MMC_CDR(tmpMeta5);
          if (!listEmpty(tmpMeta7)) goto goto_1;
          _fn = tmpMeta6;

          tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta9 = mmc_mk_box2(16, &NFExpression_CALL__desc, omc_NFCall_makeTypedCall(threadData, _fn, tmpMeta8, 1, 1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fn), 8)))));
          _zeroExp = tmpMeta9;

          _zeroExp = omc_NFCeval_evalExp(threadData, _zeroExp, _OMC_LIT39);
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          /* Pattern matching succeeded */
          tmpMeta11 = stringAppend(_OMC_LIT100,omc_NFInstNode_InstNode_toString(threadData, _recordNode));
          tmpMeta10 = mmc_mk_cons(tmpMeta11, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT83, tmpMeta10);

          goto goto_1;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      tmp2_done:
      (void)tmp3;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp2_done2;
      goto_1:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp3 < 2) {
        goto tmp2_top;
      }
      MMC_THROW_INTERNAL();
      tmp2_done2:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _zeroExp;
}

DLLDirection
modelica_metatype omc_NFExpression_makeZero(threadData_t *threadData, modelica_metatype _ty)
{
  modelica_metatype _zeroExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _zeroExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _ty;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT88;
          goto tmp3_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT40;
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT90;
          goto tmp3_done;
        }
        case 10: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_fillType(threadData, _ty, omc_NFExpression_makeZero(threadData, omc_NFType_arrayElementType(threadData, _ty)));
          goto tmp3_done;
        }
        case 14: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_makeOperatorRecordZero(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_ty), 2))));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          tmpMeta6 = stringAppend(_OMC_LIT101,omc_NFType_toString(threadData, _ty));
          tmpMeta5 = mmc_mk_cons(tmpMeta6, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT83, tmpMeta5);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _zeroExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _zeroExp;
}

DLLDirection
modelica_metatype omc_NFExpression_liftArrayList(threadData_t *threadData, modelica_metatype _dims, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype *out_arrayType)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _arrayType = NULL;
  modelica_boolean _is_literal;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  _arrayType = omc_NFExpression_typeOf(threadData, _exp);
  _is_literal = omc_NFExpression_isLiteral(threadData, _exp);
  {
    modelica_metatype _dim;
    for (tmpMeta1 = listReverse(_dims); !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _dim = MMC_CAR(tmpMeta1);
      _exp = omc_NFExpression_fillArray__impl(threadData, omc_NFDimension_size(threadData, _dim, 0 /* false */), _exp, _arrayType, _is_literal ,&_arrayType);
    }
  }
  _return: OMC_LABEL_UNUSED
  if (out_arrayType) { *out_arrayType = _arrayType; }
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_liftArray(threadData_t *threadData, modelica_metatype _dim, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype *out_arrayType)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _arrayType = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  _arrayType = omc_NFExpression_typeOf(threadData, _exp);
  _exp = omc_NFExpression_fillArray__impl(threadData, omc_NFDimension_size(threadData, _dim, 0 /* false */), _exp, _arrayType, omc_NFExpression_isLiteral(threadData, _exp) ,&_arrayType);
  _return: OMC_LABEL_UNUSED
  if (out_arrayType) { *out_arrayType = _arrayType; }
  return _exp;
}

static modelica_metatype closure11_NFExpression_clone(threadData_t *thData, modelica_metatype closure)
{
  modelica_metatype $in_exp = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_clone(thData, $in_exp);
}
DLLDirection
modelica_metatype omc_NFExpression_fillArray__impl(threadData_t *threadData, modelica_integer _n, modelica_metatype _fillExp, modelica_metatype _ty, modelica_boolean _isLiteral, modelica_metatype *out_resultType)
{
  modelica_metatype _result = NULL;
  modelica_metatype _resultType = NULL;
  modelica_metatype _arr = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _result has no default value.
  // _resultType has no default value.
  // _arr has no default value.
  tmpMeta1 = mmc_mk_box1(0, _fillExp);
  _arr = omc_Array_generate(threadData, _n, (modelica_fnptr) mmc_mk_box2(0,closure11_NFExpression_clone,tmpMeta1));

  _resultType = omc_NFType_liftArrayLeft(threadData, _ty, omc_NFDimension_fromInteger(threadData, _n, 1));

  _result = omc_NFExpression_makeArray(threadData, _resultType, _arr, _isLiteral);
  _return: OMC_LABEL_UNUSED
  if (out_resultType) { *out_resultType = _resultType; }
  return _result;
}
modelica_metatype boxptr_NFExpression_fillArray__impl(threadData_t *threadData, modelica_metatype _n, modelica_metatype _fillExp, modelica_metatype _ty, modelica_metatype _isLiteral, modelica_metatype *out_resultType)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_metatype _result = NULL;
  tmp1 = mmc_unbox_integer(_n);
  tmp2 = mmc_unbox_integer(_isLiteral);
  _result = omc_NFExpression_fillArray__impl(threadData, tmp1, _fillExp, _ty, tmp2, out_resultType);
  /* skip box _result; NFExpression */
  /* skip box _resultType; NFType */
  return _result;
}

DLLDirection
modelica_metatype omc_NFExpression_fillArray(threadData_t *threadData, modelica_integer _n, modelica_metatype _fillExp)
{
  modelica_metatype _result = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _result has no default value.
  _result = omc_NFExpression_fillArray__impl(threadData, _n, _fillExp, omc_NFExpression_typeOf(threadData, _fillExp), omc_NFExpression_isLiteral(threadData, _fillExp), NULL);
  _return: OMC_LABEL_UNUSED
  return _result;
}
modelica_metatype boxptr_NFExpression_fillArray(threadData_t *threadData, modelica_metatype _n, modelica_metatype _fillExp)
{
  modelica_integer tmp1;
  modelica_metatype _result = NULL;
  tmp1 = mmc_unbox_integer(_n);
  _result = omc_NFExpression_fillArray(threadData, tmp1, _fillExp);
  /* skip box _result; NFExpression */
  return _result;
}

DLLDirection
modelica_metatype omc_NFExpression_fillArgs(threadData_t *threadData, modelica_metatype _fillExp, modelica_metatype _dims)
{
  modelica_metatype _result = NULL;
  modelica_metatype _arr_ty = NULL;
  modelica_boolean _is_literal;
  modelica_metatype _d_resizable = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _result = _fillExp;
  _arr_ty = omc_NFExpression_typeOf(threadData, _result);
  _is_literal = omc_NFExpression_isLiteral(threadData, _fillExp);
  // _d_resizable has no default value.
  {
    modelica_metatype _d;
    for (tmpMeta1 = listReverse(_dims); !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _d = MMC_CAR(tmpMeta1);
      _d_resizable = omc_NFExpression_map(threadData, _d, boxvar_NFExpression_replaceResizableParameter);

      _result = omc_NFExpression_fillArray__impl(threadData, omc_NFExpression_toInteger(threadData, _d_resizable), _result, _arr_ty, _is_literal ,&_arr_ty);
    }
  }
  _return: OMC_LABEL_UNUSED
  return _result;
}

DLLDirection
modelica_metatype omc_NFExpression_fillType(threadData_t *threadData, modelica_metatype _ty, modelica_metatype _fillExp)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _dims = NULL;
  modelica_metatype _arr_ty = NULL;
  modelica_boolean _is_literal;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = _fillExp;
  _dims = omc_NFType_arrayDims(threadData, _ty);
  _arr_ty = omc_NFType_arrayElementType(threadData, _ty);
  _is_literal = omc_NFExpression_isLiteral(threadData, _exp);
  {
    modelica_metatype _dim;
    for (tmpMeta1 = listReverse(_dims); !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _dim = MMC_CAR(tmpMeta1);
      _exp = omc_NFExpression_fillArray__impl(threadData, omc_NFDimension_size(threadData, _dim, 0 /* false */), _exp, _arr_ty, _is_literal ,&_arr_ty);
    }
  }
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_boolean omc_NFExpression_isRecordOrRecordArray(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isRecord;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isRecord has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 15: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 11: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_Array_all(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), boxvar_NFExpression_isRecordOrRecordArray);
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isRecord = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isRecord;
}
modelica_metatype boxptr_NFExpression_isRecordOrRecordArray(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isRecord;
  modelica_metatype out_isRecord;
  _isRecord = omc_NFExpression_isRecordOrRecordArray(threadData, _exp);
  out_isRecord = mmc_mk_icon(_isRecord);
  return out_isRecord;
}

DLLDirection
modelica_boolean omc_NFExpression_isRecord(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isRecord;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isRecord has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isRecord = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isRecord;
}
modelica_metatype boxptr_NFExpression_isRecord(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isRecord;
  modelica_metatype out_isRecord;
  _isRecord = omc_NFExpression_isRecord(threadData, _exp);
  out_isRecord = mmc_mk_icon(_isRecord);
  return out_isRecord;
}

DLLDirection
modelica_boolean omc_NFExpression_isBoolean(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isBool;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isBool has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isBool = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isBool;
}
modelica_metatype boxptr_NFExpression_isBoolean(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isBool;
  modelica_metatype out_isBool;
  _isBool = omc_NFExpression_isBoolean(threadData, _exp);
  out_isBool = mmc_mk_icon(_isBool);
  return out_isBool;
}

DLLDirection
modelica_boolean omc_NFExpression_isConstNumber(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _b;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _b has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 20: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _b = tmp1;
  _return: OMC_LABEL_UNUSED
  return _b;
}
modelica_metatype boxptr_NFExpression_isConstNumber(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _b;
  modelica_metatype out_b;
  _b = omc_NFExpression_isConstNumber(threadData, _exp);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

DLLDirection
modelica_boolean omc_NFExpression_isReal(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isReal;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isReal has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isReal = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isReal;
}
modelica_metatype boxptr_NFExpression_isReal(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isReal;
  modelica_metatype out_isReal;
  _isReal = omc_NFExpression_isReal(threadData, _exp);
  out_isReal = mmc_mk_icon(_isReal);
  return out_isReal;
}

DLLDirection
modelica_boolean omc_NFExpression_isInteger(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isInteger;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isInteger has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isInteger = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isInteger;
}
modelica_metatype boxptr_NFExpression_isInteger(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isInteger;
  modelica_metatype out_isInteger;
  _isInteger = omc_NFExpression_isInteger(threadData, _exp);
  out_isInteger = mmc_mk_icon(_isInteger);
  return out_isInteger;
}

DLLDirection
modelica_boolean omc_NFExpression_isKnownSizeFill(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _literal;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _literal has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFCall_isKnownSizeFill(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _literal = tmp1;
  _return: OMC_LABEL_UNUSED
  return _literal;
}
modelica_metatype boxptr_NFExpression_isKnownSizeFill(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _literal;
  modelica_metatype out_literal;
  _literal = omc_NFExpression_isKnownSizeFill(threadData, _exp);
  out_literal = mmc_mk_icon(_literal);
  return out_literal;
}

DLLDirection
modelica_boolean omc_NFExpression_isLiteralReplace(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _b;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _b has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 5; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,1) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,2,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 2: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_isLiteral(threadData, _exp);
          goto tmp3_done;
        }
        case 3: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_isLiteral(threadData, _exp);
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _b = tmp1;
  _return: OMC_LABEL_UNUSED
  return _b;
}
modelica_metatype boxptr_NFExpression_isLiteralReplace(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _b;
  modelica_metatype out_b;
  _b = omc_NFExpression_isLiteralReplace(threadData, _exp);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

DLLDirection
modelica_boolean omc_NFExpression_isLiteral(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _literal;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _literal has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 7: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 11: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))) || omc_Array_all(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), boxvar_NFExpression_isLiteral));
          goto tmp3_done;
        }
        case 15: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_List_all(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), boxvar_NFExpression_isLiteral);
          goto tmp3_done;
        }
        case 13: {
          
          /* Pattern matching succeeded */
          tmp1 = ((omc_NFExpression_isLiteral(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) && omc_NFExpression_isLiteral(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))))) && mmc_unbox_boolean(omc_Util_applyOptionOrDefault(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), boxvar_NFExpression_isLiteral, mmc_mk_boolean(1 /* true */))));
          goto tmp3_done;
        }
        case 35: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _literal = tmp1;
  _return: OMC_LABEL_UNUSED
  return _literal;
}
modelica_metatype boxptr_NFExpression_isLiteral(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _literal;
  modelica_metatype out_literal;
  _literal = omc_NFExpression_isLiteral(threadData, _exp);
  out_literal = mmc_mk_icon(_literal);
  return out_literal;
}

DLLDirection
modelica_boolean omc_NFExpression_isScalarLiteral(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _literal;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _literal has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 7: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 35: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _literal = tmp1;
  _return: OMC_LABEL_UNUSED
  return _literal;
}
modelica_metatype boxptr_NFExpression_isScalarLiteral(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _literal;
  modelica_metatype out_literal;
  _literal = omc_NFExpression_isScalarLiteral(threadData, _exp);
  out_literal = mmc_mk_icon(_literal);
  return out_literal;
}

DLLDirection
modelica_boolean omc_NFExpression_isScalar(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _scalar;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _scalar = omc_NFType_isScalar(threadData, omc_NFExpression_typeOf(threadData, _exp));
  _return: OMC_LABEL_UNUSED
  return _scalar;
}
modelica_metatype boxptr_NFExpression_isScalar(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _scalar;
  modelica_metatype out_scalar;
  _scalar = omc_NFExpression_isScalar(threadData, _exp);
  out_scalar = mmc_mk_icon(_scalar);
  return out_scalar;
}

static modelica_metatype closure12_NFExpression_isGreaterOrEqual(threadData_t *thData, modelica_metatype closure, modelica_metatype lhs)
{
  modelica_metatype rhs = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_isGreaterOrEqual(thData, lhs, rhs);
}static modelica_metatype closure13_NFExpression_isGreaterOrEqual(threadData_t *thData, modelica_metatype closure, modelica_metatype rhs)
{
  modelica_metatype lhs = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_isGreaterOrEqual(thData, lhs, rhs);
}
DLLDirection
modelica_boolean omc_NFExpression_isGreaterOrEqual(threadData_t *threadData, modelica_metatype _lhs, modelica_metatype _rhs)
{
  modelica_boolean _res;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _res has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _lhs;
    tmp4_2 = _rhs;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 6; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_lhs), 2)))) >= mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rhs), 2)))));
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta6 = mmc_mk_box1(0, _rhs);
          tmp1 = mmc_unbox_boolean(omc_Util_applyOptionOrDefault(threadData, omc_NFComponentRef_lookupVarAttr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_lhs), 3))), _OMC_LIT102), (modelica_fnptr) mmc_mk_box2(0,closure12_NFExpression_isGreaterOrEqual,tmpMeta6), mmc_mk_boolean(0 /* false */)));
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta7 = mmc_mk_box1(0, _lhs);
          tmp1 = mmc_unbox_boolean(omc_Util_applyOptionOrDefault(threadData, omc_NFComponentRef_lookupVarAttr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rhs), 3))), _OMC_LIT103), (modelica_fnptr) mmc_mk_box2(0,closure13_NFExpression_isGreaterOrEqual,tmpMeta7), mmc_mk_boolean(0 /* false */)));
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,2) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          tmpMeta9 = omc_NFExpression_negate(threadData, _rhs);
          _rhs = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_lhs), 3)));
          _lhs = tmpMeta9;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,17,2) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          tmpMeta11 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rhs), 3)));
          _rhs = omc_NFExpression_negate(threadData, _lhs);
          _lhs = tmpMeta11;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _res = tmp1;
  _return: OMC_LABEL_UNUSED
  return _res;
}
modelica_metatype boxptr_NFExpression_isGreaterOrEqual(threadData_t *threadData, modelica_metatype _lhs, modelica_metatype _rhs)
{
  modelica_boolean _res;
  modelica_metatype out_res;
  _res = omc_NFExpression_isGreaterOrEqual(threadData, _lhs, _rhs);
  out_res = mmc_mk_icon(_res);
  return out_res;
}

DLLDirection
modelica_boolean omc_NFExpression_isNonNegative(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _res;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _res has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) >= ((modelica_integer) 0));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) >= 0.0);
          goto tmp3_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 20: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_isNonPositive(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp3_done;
        }
        case 9: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_boolean(omc_Util_applyOptionOrDefault(threadData, omc_NFComponentRef_lookupVarAttr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _OMC_LIT102), boxvar_NFExpression_isNonNegative, mmc_mk_boolean(0 /* false */)));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _res = tmp1;
  _return: OMC_LABEL_UNUSED
  return _res;
}
modelica_metatype boxptr_NFExpression_isNonNegative(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _res;
  modelica_metatype out_res;
  _res = omc_NFExpression_isNonNegative(threadData, _exp);
  out_res = mmc_mk_icon(_res);
  return out_res;
}

DLLDirection
modelica_boolean omc_NFExpression_isNonPositive(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _res;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _res has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) <= ((modelica_integer) 0));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) <= 0.0);
          goto tmp3_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 20: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_isNonNegative(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp3_done;
        }
        case 9: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_boolean(omc_Util_applyOptionOrDefault(threadData, omc_NFComponentRef_lookupVarAttr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _OMC_LIT103), boxvar_NFExpression_isNonPositive, mmc_mk_boolean(0 /* false */)));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _res = tmp1;
  _return: OMC_LABEL_UNUSED
  return _res;
}
modelica_metatype boxptr_NFExpression_isNonPositive(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _res;
  modelica_metatype out_res;
  _res = omc_NFExpression_isNonPositive(threadData, _exp);
  out_res = mmc_mk_icon(_res);
  return out_res;
}

DLLDirection
modelica_boolean omc_NFExpression_isNegative(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _negative;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _negative has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) < ((modelica_integer) 0));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) < 0.0);
          goto tmp3_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 20: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_isPositive(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp3_done;
        }
        case 9: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_boolean(omc_Util_applyOptionOrDefault(threadData, omc_NFComponentRef_lookupVarAttr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _OMC_LIT103), boxvar_NFExpression_isNegative, mmc_mk_boolean(0 /* false */)));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _negative = tmp1;
  _return: OMC_LABEL_UNUSED
  return _negative;
}
modelica_metatype boxptr_NFExpression_isNegative(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _negative;
  modelica_metatype out_negative;
  _negative = omc_NFExpression_isNegative(threadData, _exp);
  out_negative = mmc_mk_icon(_negative);
  return out_negative;
}

DLLDirection
modelica_boolean omc_NFExpression_isPositive(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _positive;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _positive has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) > ((modelica_integer) 0));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) > 0.0);
          goto tmp3_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 20: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_isNegative(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp3_done;
        }
        case 9: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_boolean(omc_Util_applyOptionOrDefault(threadData, omc_NFComponentRef_lookupVarAttr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _OMC_LIT102), boxvar_NFExpression_isPositive, mmc_mk_boolean(0 /* false */)));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _positive = tmp1;
  _return: OMC_LABEL_UNUSED
  return _positive;
}
modelica_metatype boxptr_NFExpression_isPositive(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _positive;
  modelica_metatype out_positive;
  _positive = omc_NFExpression_isPositive(threadData, _exp);
  out_positive = mmc_mk_icon(_positive);
  return out_positive;
}

DLLDirection
modelica_boolean omc_NFExpression_isNaN(threadData_t *threadData, modelica_metatype _nan)
{
  modelica_boolean _b;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _b has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _nan;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = (((omc_NFOperator_getMathClassification(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_nan), 3)))) == 4) && omc_NFExpression_isZero(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_nan), 2))))) && omc_NFExpression_isZero(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_nan), 4)))));
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _b = tmp1;
  _return: OMC_LABEL_UNUSED
  return _b;
}
modelica_metatype boxptr_NFExpression_isNaN(threadData_t *threadData, modelica_metatype _nan)
{
  modelica_boolean _b;
  modelica_metatype out_b;
  _b = omc_NFExpression_isNaN(threadData, _nan);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

DLLDirection
modelica_boolean omc_NFExpression_isMinusOne(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isOne;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isOne has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) == ((modelica_integer) -1));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) == -1.0);
          goto tmp3_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 20: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_isOne(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isOne = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isOne;
}
modelica_metatype boxptr_NFExpression_isMinusOne(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isOne;
  modelica_metatype out_isOne;
  _isOne = omc_NFExpression_isMinusOne(threadData, _exp);
  out_isOne = mmc_mk_icon(_isOne);
  return out_isOne;
}

DLLDirection
modelica_boolean omc_NFExpression_isOne(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isOne;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isOne has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) == ((modelica_integer) 1));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) == 1.0);
          goto tmp3_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 20: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_isMinusOne(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isOne = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isOne;
}
modelica_metatype boxptr_NFExpression_isOne(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isOne;
  modelica_metatype out_isOne;
  _isOne = omc_NFExpression_isOne(threadData, _exp);
  out_isOne = mmc_mk_icon(_isOne);
  return out_isOne;
}

DLLDirection
modelica_boolean omc_NFExpression_isNonZero(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _res;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _res = (omc_NFExpression_isPositive(threadData, _exp) || omc_NFExpression_isNegative(threadData, _exp));
  _return: OMC_LABEL_UNUSED
  return _res;
}
modelica_metatype boxptr_NFExpression_isNonZero(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _res;
  modelica_metatype out_res;
  _res = omc_NFExpression_isNonZero(threadData, _exp);
  out_res = mmc_mk_icon(_res);
  return out_res;
}

DLLDirection
modelica_boolean omc_NFExpression_isZero(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _b;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _b has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) == ((modelica_integer) 0));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) == 0.0);
          goto tmp3_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 20: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 11: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_Array_all(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), boxvar_NFExpression_isZero);
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _b = tmp1;
  _return: OMC_LABEL_UNUSED
  return _b;
}
modelica_metatype boxptr_NFExpression_isZero(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _b;
  modelica_metatype out_b;
  _b = omc_NFExpression_isZero(threadData, _exp);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

DLLDirection
modelica_boolean omc_NFExpression_isSubstitute(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _b;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _b has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFComponentRef_isSubstitute(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _b = tmp1;
  _return: OMC_LABEL_UNUSED
  return _b;
}
modelica_metatype boxptr_NFExpression_isSubstitute(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _b;
  modelica_metatype out_b;
  _b = omc_NFExpression_isSubstitute(threadData, _exp);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

DLLDirection
modelica_boolean omc_NFExpression_isTime(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _b;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _b has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFComponentRef_isTime(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _b = tmp1;
  _return: OMC_LABEL_UNUSED
  return _b;
}
modelica_metatype boxptr_NFExpression_isTime(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _b;
  modelica_metatype out_b;
  _b = omc_NFExpression_isTime(threadData, _exp);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

DLLDirection
modelica_boolean omc_NFExpression_containsAnyIterator(threadData_t *threadData, modelica_metatype _exp, modelica_integer _context)
{
  modelica_boolean _iter;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _iter has no default value.
  if(omc_NFInstContext_inFor(threadData, _context))
  {
    _iter = omc_NFExpression_contains(threadData, _exp, boxvar_NFExpression_isIterator);
  }
  else
  {
    _iter = 0 /* false */;
  }
  _return: OMC_LABEL_UNUSED
  return _iter;
}
modelica_metatype boxptr_NFExpression_containsAnyIterator(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _context)
{
  modelica_integer tmp1;
  modelica_boolean _iter;
  modelica_metatype out_iter;
  tmp1 = mmc_unbox_integer(_context);
  _iter = omc_NFExpression_containsAnyIterator(threadData, _exp, tmp1);
  out_iter = mmc_mk_icon(_iter);
  return out_iter;
}

DLLDirection
modelica_boolean omc_NFExpression_isIterator(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isIterator;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isIterator has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFComponentRef_isIterator(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isIterator = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isIterator;
}
modelica_metatype boxptr_NFExpression_isIterator(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isIterator;
  modelica_metatype out_isIterator;
  _isIterator = omc_NFExpression_isIterator(threadData, _exp);
  out_isIterator = mmc_mk_icon(_isIterator);
  return out_isIterator;
}

DLLDirection
modelica_boolean omc_NFExpression_isResizableCref(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _b;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _b has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFComponentRef_isResizable(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _b = tmp1;
  _return: OMC_LABEL_UNUSED
  return _b;
}
modelica_metatype boxptr_NFExpression_isResizableCref(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _b;
  modelica_metatype out_b;
  _b = omc_NFExpression_isResizableCref(threadData, _exp);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

DLLDirection
modelica_metatype omc_NFExpression_extractCref(threadData_t *threadData, modelica_metatype _exp, modelica_metatype __omcQ_24in_5Fcrefs)
{
  modelica_metatype _crefs = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _crefs = __omcQ_24in_5Fcrefs;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          omc_UnorderedSet_add(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _crefs);
          tmpMeta1 = _crefs;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _crefs;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _crefs = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _crefs;
}

DLLDirection
modelica_metatype omc_NFExpression_extractCrefs(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_metatype _crefs = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _crefs = omc_NFExpression_fold(threadData, _exp, boxvar_NFExpression_extractCref, omc_UnorderedSet_new(threadData, boxvar_NFComponentRef_hash, boxvar_NFComponentRef_isEqual, ((modelica_integer) 13)));
  _return: OMC_LABEL_UNUSED
  return _crefs;
}

DLLDirection
modelica_metatype omc_NFExpression_toCref(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_metatype _cref = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _cref has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _exp;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,6,2) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  _cref = tmpMeta2;
  _return: OMC_LABEL_UNUSED
  return _cref;
}

DLLDirection
modelica_metatype omc_NFExpression_fromCref(threadData_t *threadData, modelica_metatype _cref, modelica_boolean _includeScope)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _exp has no default value.
  tmpMeta1 = mmc_mk_box3(9, &NFExpression_CREF__desc, omc_NFComponentRef_getSubscriptedType(threadData, _cref, _includeScope), _cref);
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}
modelica_metatype boxptr_NFExpression_fromCref(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _includeScope)
{
  modelica_integer tmp1;
  modelica_metatype _exp = NULL;
  tmp1 = mmc_unbox_integer(_includeScope);
  _exp = omc_NFExpression_fromCref(threadData, _cref, tmp1);
  /* skip box _exp; NFExpression */
  return _exp;
}

static modelica_metatype closure14_NFExpression_arrayAllEqual2(threadData_t *thData, modelica_metatype closure, modelica_metatype arrayExp)
{
  modelica_metatype element = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_arrayAllEqual2(thData, arrayExp, element);
}static modelica_metatype closure15_NFExpression_isEqual(threadData_t *thData, modelica_metatype closure, modelica_metatype exp1)
{
  modelica_metatype exp2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_isEqual(thData, exp1, exp2);
}
DLLDirection
modelica_boolean omc_NFExpression_arrayAllEqual2(threadData_t *threadData, modelica_metatype _arrayExp, modelica_metatype _element)
{
  modelica_boolean _allEqual;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _allEqual has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _arrayExp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!((!(arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_arrayExp), 3)))) == ((modelica_integer) 0))) && omc_NFExpression_isArray(threadData, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_arrayExp), 3))), ((modelica_integer) 1))))) goto tmp3_end;
          tmpMeta6 = mmc_mk_box1(0, _element);
          tmp1 = omc_Array_all(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_arrayExp), 3))), (modelica_fnptr) mmc_mk_box2(0,closure14_NFExpression_arrayAllEqual2,tmpMeta6));
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta7 = mmc_mk_box1(0, _element);
          tmp1 = omc_Array_all(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_arrayExp), 3))), (modelica_fnptr) mmc_mk_box2(0,closure15_NFExpression_isEqual,tmpMeta7));
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _allEqual = tmp1;
  _return: OMC_LABEL_UNUSED
  return _allEqual;
}
modelica_metatype boxptr_NFExpression_arrayAllEqual2(threadData_t *threadData, modelica_metatype _arrayExp, modelica_metatype _element)
{
  modelica_boolean _allEqual;
  modelica_metatype out_allEqual;
  _allEqual = omc_NFExpression_arrayAllEqual2(threadData, _arrayExp, _element);
  out_allEqual = mmc_mk_icon(_allEqual);
  return out_allEqual;
}

DLLDirection
modelica_boolean omc_NFExpression_arrayAllEqual(threadData_t *threadData, modelica_metatype _arrayExp)
{
  modelica_boolean _allEqual;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _allEqual has no default value.
  { /* matchcontinue expression */
    volatile modelica_metatype tmp4_1;
    tmp4_1 = _arrayExp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp3_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_arrayAllEqual2(threadData, _arrayExp, omc_NFExpression_arrayFirstScalar(threadData, _arrayExp));
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      tmp3_done:
      (void)tmp4;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp3_done2;
      goto_2:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp4 < 2) {
        goto tmp3_top;
      }
      MMC_THROW_INTERNAL();
      tmp3_done2:;
    }
  }
  _allEqual = tmp1;
  _return: OMC_LABEL_UNUSED
  return _allEqual;
}
modelica_metatype boxptr_NFExpression_arrayAllEqual(threadData_t *threadData, modelica_metatype _arrayExp)
{
  modelica_boolean _allEqual;
  modelica_metatype out_allEqual;
  _allEqual = omc_NFExpression_arrayAllEqual(threadData, _arrayExp);
  out_allEqual = mmc_mk_icon(_allEqual);
  return out_allEqual;
}

DLLDirection
modelica_metatype omc_NFExpression_arrayFirstScalar(threadData_t *threadData, modelica_metatype _arrayExp)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _exp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _arrayExp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _arrayExp = arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_arrayExp), 3))), ((modelica_integer) 1));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _arrayExp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_boolean omc_NFExpression_containsShallow(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func)
{
  modelica_boolean _res;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _res has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 8: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFClockKind_containsExpShallow(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          goto tmp3_done;
        }
        case 9: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFComponentRef_containsExpShallow(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp3_done;
        }
        case 11: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_Array_any(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp3_done;
        }
        case 12: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          _res = 0 /* false */;

          {
            modelica_metatype _row;
            for (tmpMeta5 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))); !listEmpty(tmpMeta5); tmpMeta5=MMC_CDR(tmpMeta5))
            {
              _row = MMC_CAR(tmpMeta5);
              if(omc_List_any(threadData, _row, ((modelica_fnptr) _func)))
              {
                _res = 1 /* true */;

                break;
              }
            }
          }
          tmp1 = _res;
          goto tmp3_done;
        }
        case 13: {
          
          /* Pattern matching succeeded */
          tmp1 = ((mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))))) || mmc_unbox_boolean(omc_Util_applyOptionOrDefault(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func), mmc_mk_boolean(0 /* false */)))) || mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))))));
          goto tmp3_done;
        }
        case 14: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_List_any(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp3_done;
        }
        case 15: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_List_any(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func));
          goto tmp3_done;
        }
        case 16: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFCall_containsExpShallow(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          goto tmp3_done;
        }
        case 17: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_boolean(omc_Util_applyOptionOrDefault(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), mmc_mk_boolean(0 /* false */))) || mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))));
          goto tmp3_done;
        }
        case 19: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))) || mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))))));
          goto tmp3_done;
        }
        case 24: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          
          /* Pattern matching succeeded */
          _res = 0 /* false */;

          {
            modelica_metatype _arg;
            for (tmpMeta7 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))); !listEmpty(tmpMeta7); tmpMeta7=MMC_CDR(tmpMeta7))
            {
              _arg = MMC_CAR(tmpMeta7);
              if(_res)
              {
                break;
              }

              _res = mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _arg));
            }
          }

          {
            modelica_metatype _arg;
            for (tmpMeta9 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))); !listEmpty(tmpMeta9); tmpMeta9=MMC_CDR(tmpMeta9))
            {
              _arg = MMC_CAR(tmpMeta9);
              if(_res)
              {
                break;
              }

              _res = mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _arg));
            }
          }
          tmp1 = _res;
          goto tmp3_done;
        }
        case 20: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          goto tmp3_done;
        }
        case 21: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))) || mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))))));
          goto tmp3_done;
        }
        case 22: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          goto tmp3_done;
        }
        case 23: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))) || mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))))));
          goto tmp3_done;
        }
        case 25: {
          
          /* Pattern matching succeeded */
          tmp1 = ((mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))))) || mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))))) || mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))))));
          goto tmp3_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          goto tmp3_done;
        }
        case 27: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          goto tmp3_done;
        }
        case 28: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          goto tmp3_done;
        }
        case 29: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))) || omc_NFSubscript_listContainsExpShallow(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func)));
          goto tmp3_done;
        }
        case 30: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          goto tmp3_done;
        }
        case 31: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          goto tmp3_done;
        }
        case 32: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))));
          goto tmp3_done;
        }
        case 36: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          goto tmp3_done;
        }
        case 34: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_listContains(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _res = tmp1;
  _return: OMC_LABEL_UNUSED
  return _res;
}
modelica_metatype boxptr_NFExpression_containsShallow(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func)
{
  modelica_boolean _res;
  modelica_metatype out_res;
  _res = omc_NFExpression_containsShallow(threadData, _exp, _func);
  out_res = mmc_mk_icon(_res);
  return out_res;
}

DLLDirection
modelica_boolean omc_NFExpression_listContains(threadData_t *threadData, modelica_metatype _expl, modelica_fnptr _func)
{
  modelica_boolean _res;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _res has no default value.
  {
    modelica_metatype _e;
    for (tmpMeta1 = _expl; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _e = MMC_CAR(tmpMeta1);
      if(omc_NFExpression_contains(threadData, _e, ((modelica_fnptr) _func)))
      {
        _res = 1 /* true */;

        goto _return;
      }
    }
  }

  _res = 0 /* false */;
  _return: OMC_LABEL_UNUSED
  return _res;
}
modelica_metatype boxptr_NFExpression_listContains(threadData_t *threadData, modelica_metatype _expl, modelica_fnptr _func)
{
  modelica_boolean _res;
  modelica_metatype out_res;
  _res = omc_NFExpression_listContains(threadData, _expl, _func);
  out_res = mmc_mk_icon(_res);
  return out_res;
}

DLLDirection
modelica_boolean omc_NFExpression_arrayContains(threadData_t *threadData, modelica_metatype _expl, modelica_fnptr _func)
{
  modelica_boolean _res;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_integer tmp4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _res has no default value.
  {
    modelica_metatype _e;
    for (tmpMeta1 = _expl, tmp4 = arrayLength(tmpMeta1), tmp3 = 1; tmp3 <= tmp4; tmp3++)
    {
      _e = arrayGet(tmpMeta1,tmp3);
      if(omc_NFExpression_contains(threadData, _e, ((modelica_fnptr) _func)))
      {
        _res = 1 /* true */;

        goto _return;
      }
    }
  }

  _res = 0 /* false */;
  _return: OMC_LABEL_UNUSED
  return _res;
}
modelica_metatype boxptr_NFExpression_arrayContains(threadData_t *threadData, modelica_metatype _expl, modelica_fnptr _func)
{
  modelica_boolean _res;
  modelica_metatype out_res;
  _res = omc_NFExpression_arrayContains(threadData, _expl, _func);
  out_res = mmc_mk_icon(_res);
  return out_res;
}

DLLDirection
modelica_boolean omc_NFExpression_contains(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func)
{
  modelica_boolean _res;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _res has no default value.
  if(mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _exp) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _exp)))
  {
    _res = 1 /* true */;

    goto _return;
  }

  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 8: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFClockKind_containsExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          goto tmp3_done;
        }
        case 9: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFComponentRef_containsExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp3_done;
        }
        case 11: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_arrayContains(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp3_done;
        }
        case 12: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          _res = 0 /* false */;

          {
            modelica_metatype _row;
            for (tmpMeta5 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))); !listEmpty(tmpMeta5); tmpMeta5=MMC_CDR(tmpMeta5))
            {
              _row = MMC_CAR(tmpMeta5);
              if(omc_NFExpression_listContains(threadData, _row, ((modelica_fnptr) _func)))
              {
                _res = 1 /* true */;

                break;
              }
            }
          }
          tmp1 = _res;
          goto tmp3_done;
        }
        case 13: {
          
          /* Pattern matching succeeded */
          tmp1 = ((omc_NFExpression_contains(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func)) || omc_NFExpression_containsOpt(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func))) || omc_NFExpression_contains(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), ((modelica_fnptr) _func)));
          goto tmp3_done;
        }
        case 14: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_listContains(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp3_done;
        }
        case 15: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_listContains(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func));
          goto tmp3_done;
        }
        case 16: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFCall_containsExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          goto tmp3_done;
        }
        case 17: {
          
          /* Pattern matching succeeded */
          tmp1 = (omc_NFExpression_containsOpt(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func)) || omc_NFExpression_contains(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func)));
          goto tmp3_done;
        }
        case 19: {
          
          /* Pattern matching succeeded */
          tmp1 = (omc_NFExpression_contains(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func)) || omc_NFExpression_contains(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func)));
          goto tmp3_done;
        }
        case 24: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          
          /* Pattern matching succeeded */
          _res = 0 /* false */;

          {
            modelica_metatype _arg;
            for (tmpMeta7 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))); !listEmpty(tmpMeta7); tmpMeta7=MMC_CDR(tmpMeta7))
            {
              _arg = MMC_CAR(tmpMeta7);
              if(_res)
              {
                break;
              }

              _res = omc_NFExpression_contains(threadData, _arg, ((modelica_fnptr) _func));
            }
          }

          {
            modelica_metatype _arg;
            for (tmpMeta9 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))); !listEmpty(tmpMeta9); tmpMeta9=MMC_CDR(tmpMeta9))
            {
              _arg = MMC_CAR(tmpMeta9);
              if(_res)
              {
                break;
              }

              _res = omc_NFExpression_contains(threadData, _arg, ((modelica_fnptr) _func));
            }
          }
          tmp1 = _res;
          goto tmp3_done;
        }
        case 20: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 21: {
          
          /* Pattern matching succeeded */
          tmp1 = (omc_NFExpression_contains(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func)) || omc_NFExpression_contains(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func)));
          goto tmp3_done;
        }
        case 22: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 23: {
          
          /* Pattern matching succeeded */
          tmp1 = (omc_NFExpression_contains(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func)) || omc_NFExpression_contains(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func)));
          goto tmp3_done;
        }
        case 25: {
          
          /* Pattern matching succeeded */
          tmp1 = ((omc_NFExpression_contains(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func)) || omc_NFExpression_contains(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func))) || omc_NFExpression_contains(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), ((modelica_fnptr) _func)));
          goto tmp3_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 27: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 28: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 29: {
          
          /* Pattern matching succeeded */
          tmp1 = (omc_NFExpression_contains(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func)) || omc_NFSubscript_listContainsExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func)));
          goto tmp3_done;
        }
        case 30: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 31: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 32: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 36: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 34: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_listContains(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _res = tmp1;
  _return: OMC_LABEL_UNUSED
  return _res;
}
modelica_metatype boxptr_NFExpression_contains(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func)
{
  modelica_boolean _res;
  modelica_metatype out_res;
  _res = omc_NFExpression_contains(threadData, _exp, _func);
  out_res = mmc_mk_icon(_res);
  return out_res;
}

DLLDirection
modelica_boolean omc_NFExpression_containsOpt(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func)
{
  modelica_boolean _res;
  modelica_metatype _e = NULL;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _res has no default value.
  // _e has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (optionNone(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
          _e = tmpMeta6;
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_contains(threadData, _e, ((modelica_fnptr) _func));
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _res = tmp1;
  _return: OMC_LABEL_UNUSED
  return _res;
}
modelica_metatype boxptr_NFExpression_containsOpt(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func)
{
  modelica_boolean _res;
  modelica_metatype out_res;
  _res = omc_NFExpression_containsOpt(threadData, _exp, _func);
  out_res = mmc_mk_icon(_res);
  return out_res;
}

DLLDirection
modelica_metatype omc_NFExpression_mapFoldOptShallow(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Farg, modelica_metatype *out_arg)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _arg = NULL;
  modelica_metatype _e1 = NULL;
  modelica_metatype _e2 = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  _arg = __omcQ_24in_5Farg;
  // _e1 has no default value.
  // _e2 has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (optionNone(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
          _e1 = tmpMeta6;
          /* Pattern matching succeeded */
          _e2 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _e1, _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _e1, _arg ,&_arg);
          tmpMeta1 = (referenceEq(_e1, _e2)?_exp:mmc_mk_some(_e2));
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  if (out_arg) { *out_arg = _arg; }
  return _outExp;
}

static modelica_metatype closure16_NFSubscript_mapFoldExpShallow(threadData_t *thData, modelica_metatype closure, modelica_metatype subscript, modelica_metatype $in_arg, modelica_metatype tmp55)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFSubscript_mapFoldExpShallow(thData, subscript, func, $in_arg, tmp55);
}
DLLDirection
modelica_metatype omc_NFExpression_mapFoldShallow(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Farg, modelica_metatype *out_arg)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _arg = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  _arg = __omcQ_24in_5Farg;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _e3 = NULL;
      modelica_metatype _oe = NULL;
      modelica_metatype _cr = NULL;
      modelica_metatype _expl = NULL;
      modelica_metatype _call = NULL;
      modelica_metatype _subs = NULL;
      modelica_metatype _ck = NULL;
      modelica_metatype _mat = NULL;
      modelica_metatype _arr = NULL;
      int tmp4;
      // _e1 has no default value.
      // _e2 has no default value.
      // _e3 has no default value.
      // _oe has no default value.
      // _cr has no default value.
      // _expl has no default value.
      // _call has no default value.
      // _subs has no default value.
      // _ck has no default value.
      // _mat has no default value.
      // _arr has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 8: {
          modelica_metatype tmpMeta5;
          modelica_boolean tmp6;
          modelica_metatype tmpMeta7;
          
          /* Pattern matching succeeded */
          _ck = omc_NFClockKind_mapFoldExpShallow(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmp6 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _ck);
          if(tmp6)
          {
            tmpMeta7 = _exp;
          }
          else
          {
            tmpMeta5 = mmc_mk_box2(8, &NFExpression_CLKCONST__desc, _ck);
            tmpMeta7 = tmpMeta5;
          }
          tmpMeta1 = tmpMeta7;
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta8;
          modelica_boolean tmp9;
          modelica_metatype tmpMeta10;
          
          /* Pattern matching succeeded */
          _cr = omc_NFComponentRef_mapFoldExpShallow(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmp9 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _cr);
          if(tmp9)
          {
            tmpMeta10 = _exp;
          }
          else
          {
            tmpMeta8 = mmc_mk_box3(9, &NFExpression_CREF__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _cr);
            tmpMeta10 = tmpMeta8;
          }
          tmpMeta1 = tmpMeta10;
          goto tmp3_done;
        }
        case 11: {
          
          /* Pattern matching succeeded */
          _arr = omc_Array_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmpMeta1 = omc_NFExpression_makeArray(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _arr, mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))));
          goto tmp3_done;
        }
        case 12: {
          modelica_metatype tmpMeta11;
          
          /* Pattern matching succeeded */
          _mat = omc_List_mapFoldList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmpMeta11 = mmc_mk_box2(12, &NFExpression_MATRIX__desc, _mat);
          tmpMeta1 = tmpMeta11;
          goto tmp3_done;
        }
        case 13: {
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_boolean tmp14;
          modelica_metatype tmpMeta15;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          
          _oe = tmpMeta12;
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _arg ,&_arg);

          _oe = omc_NFExpression_mapFoldOptShallow(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func), _arg ,&_arg);

          _e3 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _arg ,&_arg);
          tmp14 = (modelica_boolean)((referenceEq(_e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) && referenceEq(_oe, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))))) && referenceEq(_e3, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)))));
          if(tmp14)
          {
            tmpMeta15 = _exp;
          }
          else
          {
            tmpMeta13 = mmc_mk_box5(13, &NFExpression_RANGE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1, _oe, _e3);
            tmpMeta15 = tmpMeta13;
          }
          tmpMeta1 = tmpMeta15;
          goto tmp3_done;
        }
        case 14: {
          modelica_metatype tmpMeta16;
          
          /* Pattern matching succeeded */
          _expl = omc_List_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmpMeta16 = mmc_mk_box3(14, &NFExpression_TUPLE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _expl);
          tmpMeta1 = tmpMeta16;
          goto tmp3_done;
        }
        case 15: {
          modelica_metatype tmpMeta17;
          
          /* Pattern matching succeeded */
          _expl = omc_List_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmpMeta17 = mmc_mk_box4(15, &NFExpression_RECORD__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _expl);
          tmpMeta1 = tmpMeta17;
          goto tmp3_done;
        }
        case 16: {
          modelica_metatype tmpMeta18;
          modelica_boolean tmp19;
          modelica_metatype tmpMeta20;
          
          /* Pattern matching succeeded */
          _call = omc_NFCall_mapFoldExpShallow(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmp19 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _call);
          if(tmp19)
          {
            tmpMeta20 = _exp;
          }
          else
          {
            tmpMeta18 = mmc_mk_box2(16, &NFExpression_CALL__desc, _call);
            tmpMeta20 = tmpMeta18;
          }
          tmpMeta1 = tmpMeta20;
          goto tmp3_done;
        }
        case 17: {
          modelica_metatype tmpMeta21;
          modelica_boolean tmp22;
          modelica_metatype tmpMeta23;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _arg ,&_arg);

          _oe = omc_NFExpression_mapFoldOptShallow(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmp22 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _oe));
          if(tmp22)
          {
            tmpMeta23 = _exp;
          }
          else
          {
            tmpMeta21 = mmc_mk_box3(17, &NFExpression_SIZE__desc, _e1, _oe);
            tmpMeta23 = tmpMeta21;
          }
          tmpMeta1 = tmpMeta23;
          goto tmp3_done;
        }
        case 19: {
          modelica_metatype tmpMeta24;
          modelica_boolean tmp25;
          modelica_metatype tmpMeta26;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _arg ,&_arg);

          _e2 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _arg ,&_arg);
          tmp25 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _e2));
          if(tmp25)
          {
            tmpMeta26 = _exp;
          }
          else
          {
            tmpMeta24 = mmc_mk_box4(19, &NFExpression_BINARY__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e2);
            tmpMeta26 = tmpMeta24;
          }
          tmpMeta1 = tmpMeta26;
          goto tmp3_done;
        }
        case 24: {
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          
          /* Pattern matching succeeded */
          tmpMeta27 = MMC_REFSTRUCTLIT(mmc_nil);
          _expl = tmpMeta27;

          {
            modelica_metatype _argument;
            for (tmpMeta28 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))); !listEmpty(tmpMeta28); tmpMeta28=MMC_CDR(tmpMeta28))
            {
              _argument = MMC_CAR(tmpMeta28);
              _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _argument, _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _argument, _arg ,&_arg);

              tmpMeta29 = mmc_mk_cons(_e1, _expl);
              _expl = tmpMeta29;
            }
          }

          tmpMeta31 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta31), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta31))[2] = listReverse(_expl);
          _exp = tmpMeta31;

          tmpMeta32 = MMC_REFSTRUCTLIT(mmc_nil);
          _expl = tmpMeta32;

          {
            modelica_metatype _argument;
            for (tmpMeta33 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))); !listEmpty(tmpMeta33); tmpMeta33=MMC_CDR(tmpMeta33))
            {
              _argument = MMC_CAR(tmpMeta33);
              _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _argument, _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _argument, _arg ,&_arg);

              tmpMeta34 = mmc_mk_cons(_e1, _expl);
              _expl = tmpMeta34;
            }
          }

          tmpMeta36 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta36), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta36))[3] = listReverse(_expl);
          _exp = tmpMeta36;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 20: {
          modelica_metatype tmpMeta37;
          modelica_boolean tmp38;
          modelica_metatype tmpMeta39;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _arg ,&_arg);
          tmp38 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1);
          if(tmp38)
          {
            tmpMeta39 = _exp;
          }
          else
          {
            tmpMeta37 = mmc_mk_box3(20, &NFExpression_UNARY__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
            tmpMeta39 = tmpMeta37;
          }
          tmpMeta1 = tmpMeta39;
          goto tmp3_done;
        }
        case 21: {
          modelica_metatype tmpMeta40;
          modelica_boolean tmp41;
          modelica_metatype tmpMeta42;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _arg ,&_arg);

          _e2 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _arg ,&_arg);
          tmp41 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _e2));
          if(tmp41)
          {
            tmpMeta42 = _exp;
          }
          else
          {
            tmpMeta40 = mmc_mk_box4(21, &NFExpression_LBINARY__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e2);
            tmpMeta42 = tmpMeta40;
          }
          tmpMeta1 = tmpMeta42;
          goto tmp3_done;
        }
        case 22: {
          modelica_metatype tmpMeta43;
          modelica_boolean tmp44;
          modelica_metatype tmpMeta45;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _arg ,&_arg);
          tmp44 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1);
          if(tmp44)
          {
            tmpMeta45 = _exp;
          }
          else
          {
            tmpMeta43 = mmc_mk_box3(22, &NFExpression_LUNARY__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
            tmpMeta45 = tmpMeta43;
          }
          tmpMeta1 = tmpMeta45;
          goto tmp3_done;
        }
        case 23: {
          modelica_metatype tmpMeta46;
          modelica_boolean tmp47;
          modelica_metatype tmpMeta48;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _arg ,&_arg);

          _e2 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _arg ,&_arg);
          tmp47 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _e2));
          if(tmp47)
          {
            tmpMeta48 = _exp;
          }
          else
          {
            tmpMeta46 = mmc_mk_box5(23, &NFExpression_RELATION__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e2, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
            tmpMeta48 = tmpMeta46;
          }
          tmpMeta1 = tmpMeta48;
          goto tmp3_done;
        }
        case 25: {
          modelica_metatype tmpMeta49;
          modelica_boolean tmp50;
          modelica_metatype tmpMeta51;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _arg ,&_arg);

          _e2 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _arg ,&_arg);

          _e3 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _arg ,&_arg);
          tmp50 = (modelica_boolean)((referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _e2)) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _e3));
          if(tmp50)
          {
            tmpMeta51 = _exp;
          }
          else
          {
            tmpMeta49 = mmc_mk_box5(25, &NFExpression_IF__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1, _e2, _e3);
            tmpMeta51 = tmpMeta49;
          }
          tmpMeta1 = tmpMeta51;
          goto tmp3_done;
        }
        case 26: {
          modelica_metatype tmpMeta52;
          modelica_boolean tmp53;
          modelica_metatype tmpMeta54;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _arg ,&_arg);
          tmp53 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1);
          if(tmp53)
          {
            tmpMeta54 = _exp;
          }
          else
          {
            tmpMeta52 = mmc_mk_box3(26, &NFExpression_CAST__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
            tmpMeta54 = tmpMeta52;
          }
          tmpMeta1 = tmpMeta54;
          goto tmp3_done;
        }
        case 27: {
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _arg ,&_arg);
          tmpMeta1 = (referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1)?_exp:omc_NFExpression_box(threadData, _e1));
          goto tmp3_done;
        }
        case 28: {
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _arg ,&_arg);
          tmpMeta1 = (referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1)?_exp:omc_NFExpression_unbox(threadData, _e1));
          goto tmp3_done;
        }
        case 29: {
          modelica_metatype tmpMeta56;
          modelica_metatype tmpMeta57;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _arg ,&_arg);

          tmpMeta56 = mmc_mk_box1(0, ((modelica_fnptr) _func));
          _subs = omc_List_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (modelica_fnptr) mmc_mk_box2(0,closure16_NFSubscript_mapFoldExpShallow,tmpMeta56), _arg ,&_arg);
          tmpMeta57 = mmc_mk_box5(29, &NFExpression_SUBSCRIPTED__EXP__desc, _e1, _subs, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
          tmpMeta1 = tmpMeta57;
          goto tmp3_done;
        }
        case 30: {
          modelica_metatype tmpMeta58;
          modelica_boolean tmp59;
          modelica_metatype tmpMeta60;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _arg ,&_arg);
          tmp59 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
          if(tmp59)
          {
            tmpMeta60 = _exp;
          }
          else
          {
            tmpMeta58 = mmc_mk_box4(30, &NFExpression_TUPLE__ELEMENT__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
            tmpMeta60 = tmpMeta58;
          }
          tmpMeta1 = tmpMeta60;
          goto tmp3_done;
        }
        case 31: {
          modelica_metatype tmpMeta61;
          modelica_boolean tmp62;
          modelica_metatype tmpMeta63;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _arg ,&_arg);
          tmp62 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
          if(tmp62)
          {
            tmpMeta63 = _exp;
          }
          else
          {
            tmpMeta61 = mmc_mk_box5(31, &NFExpression_RECORD__ELEMENT__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
            tmpMeta63 = tmpMeta61;
          }
          tmpMeta1 = tmpMeta63;
          goto tmp3_done;
        }
        case 32: {
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), _arg ,&_arg);

          omc_Mutable_update(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 36: {
          modelica_metatype tmpMeta64;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _arg ,&_arg);

          tmpMeta64 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta64), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta64))[3] = _e1;
          _exp = tmpMeta64;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 34: {
          modelica_metatype tmpMeta65;
          
          /* Pattern matching succeeded */
          _expl = omc_List_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg ,&_arg);

          tmpMeta65 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta65), MMC_UNTAGPTR(_exp), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta65))[3] = _expl;
          _exp = tmpMeta65;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  if (out_arg) { *out_arg = _arg; }
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_mapFoldOpt(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Farg, modelica_metatype *out_arg)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _arg = NULL;
  modelica_metatype _e = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  _arg = __omcQ_24in_5Farg;
  // _e has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (optionNone(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
          _e = tmpMeta6;
          /* Pattern matching succeeded */
          _e = omc_NFExpression_mapFold(threadData, _e, ((modelica_fnptr) _func), _arg ,&_arg);
          tmpMeta1 = mmc_mk_some(_e);
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  if (out_arg) { *out_arg = _arg; }
  return _outExp;
}

static modelica_metatype closure17_NFExpression_mapFold(threadData_t *thData, modelica_metatype closure, modelica_metatype exp, modelica_metatype $in_arg, modelica_metatype tmp12)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_mapFold(thData, exp, func, $in_arg, tmp12);
}static modelica_metatype closure18_NFExpression_mapFold(threadData_t *thData, modelica_metatype closure, modelica_metatype exp, modelica_metatype $in_arg, modelica_metatype tmp14)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_mapFold(thData, exp, func, $in_arg, tmp14);
}static modelica_metatype closure19_NFSubscript_mapFoldExp(threadData_t *thData, modelica_metatype closure, modelica_metatype subscript, modelica_metatype $in_arg, modelica_metatype tmp69)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFSubscript_mapFoldExp(thData, subscript, func, $in_arg, tmp69);
}
DLLDirection
modelica_metatype omc_NFExpression_mapFold(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Farg, modelica_metatype *out_arg)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _arg = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  _arg = __omcQ_24in_5Farg;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _e3 = NULL;
      modelica_metatype _e4 = NULL;
      modelica_metatype _cr = NULL;
      modelica_metatype _expl = NULL;
      modelica_metatype _call = NULL;
      modelica_metatype _subs = NULL;
      modelica_metatype _ck = NULL;
      modelica_metatype _mat = NULL;
      modelica_metatype _arr = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e1 has no default value.
      // _e2 has no default value.
      // _e3 has no default value.
      // _e4 has no default value.
      // _cr has no default value.
      // _expl has no default value.
      // _call has no default value.
      // _subs has no default value.
      // _ck has no default value.
      // _mat has no default value.
      // _arr has no default value.
      tmp4 = 0;
      for (; tmp4 < 28; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_boolean tmp7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _ck = omc_NFClockKind_mapFoldExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmp7 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _ck);
          if(tmp7)
          {
            tmpMeta8 = _exp;
          }
          else
          {
            tmpMeta6 = mmc_mk_box2(8, &NFExpression_CLKCONST__desc, _ck);
            tmpMeta8 = tmpMeta6;
          }
          tmpMeta1 = tmpMeta8;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta9;
          modelica_boolean tmp10;
          modelica_metatype tmpMeta11;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _cr = omc_NFComponentRef_mapFoldExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmp10 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _cr);
          if(tmp10)
          {
            tmpMeta11 = _exp;
          }
          else
          {
            tmpMeta9 = mmc_mk_box3(9, &NFExpression_CREF__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _cr);
            tmpMeta11 = tmpMeta9;
          }
          tmpMeta1 = tmpMeta11;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta13;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta13 = mmc_mk_box1(0, ((modelica_fnptr) _func));
          _arr = omc_Array_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (modelica_fnptr) mmc_mk_box2(0,closure17_NFExpression_mapFold,tmpMeta13), _arg ,&_arg);
          tmpMeta1 = omc_NFExpression_makeArray(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _arr, mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))));
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta15 = mmc_mk_box1(0, ((modelica_fnptr) _func));
          _mat = omc_List_mapFoldList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), (modelica_fnptr) mmc_mk_box2(0,closure18_NFExpression_mapFold,tmpMeta15), _arg ,&_arg);
          tmpMeta16 = mmc_mk_box2(12, &NFExpression_MATRIX__desc, _mat);
          tmpMeta1 = tmpMeta16;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_boolean tmp20;
          modelica_metatype tmpMeta21;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          if (optionNone(tmpMeta17)) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 1));
          
          _e2 = tmpMeta18;
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg ,&_arg);

          _e4 = omc_NFExpression_mapFold(threadData, _e2, ((modelica_fnptr) _func), _arg ,&_arg);

          _e3 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmp20 = (modelica_boolean)((referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1) && referenceEq(_e2, _e4)) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _e3));
          if(tmp20)
          {
            tmpMeta21 = _exp;
          }
          else
          {
            tmpMeta19 = mmc_mk_box5(13, &NFExpression_RANGE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1, mmc_mk_some(_e4), _e3);
            tmpMeta21 = tmpMeta19;
          }
          tmpMeta1 = tmpMeta21;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta22;
          modelica_boolean tmp23;
          modelica_metatype tmpMeta24;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg ,&_arg);

          _e3 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmp23 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _e3));
          if(tmp23)
          {
            tmpMeta24 = _exp;
          }
          else
          {
            tmpMeta22 = mmc_mk_box5(13, &NFExpression_RANGE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1, mmc_mk_none(), _e3);
            tmpMeta24 = tmpMeta22;
          }
          tmpMeta1 = tmpMeta24;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta25;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _expl = omc_List_map1Fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), boxvar_NFExpression_mapFold, ((modelica_fnptr) _func), _arg ,&_arg);
          tmpMeta25 = mmc_mk_box3(14, &NFExpression_TUPLE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _expl);
          tmpMeta1 = tmpMeta25;
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta26;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _expl = omc_List_map1Fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), boxvar_NFExpression_mapFold, ((modelica_fnptr) _func), _arg ,&_arg);
          tmpMeta26 = mmc_mk_box4(15, &NFExpression_RECORD__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _expl);
          tmpMeta1 = tmpMeta26;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta27;
          modelica_boolean tmp28;
          modelica_metatype tmpMeta29;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _call = omc_NFCall_mapFoldExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmp28 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _call);
          if(tmp28)
          {
            tmpMeta29 = _exp;
          }
          else
          {
            tmpMeta27 = mmc_mk_box2(16, &NFExpression_CALL__desc, _call);
            tmpMeta29 = tmpMeta27;
          }
          tmpMeta1 = tmpMeta29;
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          modelica_boolean tmp33;
          modelica_metatype tmpMeta34;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,2) == 0) goto tmp3_end;
          tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (optionNone(tmpMeta30)) goto tmp3_end;
          tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta30), 1));
          _e2 = tmpMeta31;
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg ,&_arg);

          _e3 = omc_NFExpression_mapFold(threadData, _e2, ((modelica_fnptr) _func), _arg ,&_arg);
          tmp33 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1) && referenceEq(_e2, _e3));
          if(tmp33)
          {
            tmpMeta34 = _exp;
          }
          else
          {
            tmpMeta32 = mmc_mk_box3(17, &NFExpression_SIZE__desc, _e1, mmc_mk_some(_e3));
            tmpMeta34 = tmpMeta32;
          }
          tmpMeta1 = tmpMeta34;
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta35;
          modelica_boolean tmp36;
          modelica_metatype tmpMeta37;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmp36 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
          if(tmp36)
          {
            tmpMeta37 = _exp;
          }
          else
          {
            tmpMeta35 = mmc_mk_box3(17, &NFExpression_SIZE__desc, _e1, mmc_mk_none());
            tmpMeta37 = tmpMeta35;
          }
          tmpMeta1 = tmpMeta37;
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta38;
          modelica_boolean tmp39;
          modelica_metatype tmpMeta40;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg ,&_arg);

          _e2 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmp39 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _e2));
          if(tmp39)
          {
            tmpMeta40 = _exp;
          }
          else
          {
            tmpMeta38 = mmc_mk_box4(19, &NFExpression_BINARY__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e2);
            tmpMeta40 = tmpMeta38;
          }
          tmpMeta1 = tmpMeta40;
          goto tmp3_done;
        }
        case 12: {
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          modelica_metatype tmpMeta44;
          modelica_metatype tmpMeta45;
          modelica_metatype tmpMeta46;
          modelica_metatype tmpMeta47;
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta49;
          modelica_metatype tmpMeta50;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta41 = MMC_REFSTRUCTLIT(mmc_nil);
          _expl = tmpMeta41;

          {
            modelica_metatype _argument;
            for (tmpMeta42 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))); !listEmpty(tmpMeta42); tmpMeta42=MMC_CDR(tmpMeta42))
            {
              _argument = MMC_CAR(tmpMeta42);
              _e1 = omc_NFExpression_mapFold(threadData, _argument, ((modelica_fnptr) _func), _arg ,&_arg);

              tmpMeta43 = mmc_mk_cons(_e1, _expl);
              _expl = tmpMeta43;
            }
          }

          tmpMeta45 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta45), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta45))[2] = listReverse(_expl);
          _exp = tmpMeta45;

          tmpMeta46 = MMC_REFSTRUCTLIT(mmc_nil);
          _expl = tmpMeta46;

          {
            modelica_metatype _argument;
            for (tmpMeta47 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))); !listEmpty(tmpMeta47); tmpMeta47=MMC_CDR(tmpMeta47))
            {
              _argument = MMC_CAR(tmpMeta47);
              _e1 = omc_NFExpression_mapFold(threadData, _argument, ((modelica_fnptr) _func), _arg ,&_arg);

              tmpMeta48 = mmc_mk_cons(_e1, _expl);
              _expl = tmpMeta48;
            }
          }

          tmpMeta50 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta50), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta50))[3] = listReverse(_expl);
          _exp = tmpMeta50;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 13: {
          modelica_metatype tmpMeta51;
          modelica_boolean tmp52;
          modelica_metatype tmpMeta53;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmp52 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1);
          if(tmp52)
          {
            tmpMeta53 = _exp;
          }
          else
          {
            tmpMeta51 = mmc_mk_box3(20, &NFExpression_UNARY__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
            tmpMeta53 = tmpMeta51;
          }
          tmpMeta1 = tmpMeta53;
          goto tmp3_done;
        }
        case 14: {
          modelica_metatype tmpMeta54;
          modelica_boolean tmp55;
          modelica_metatype tmpMeta56;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg ,&_arg);

          _e2 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmp55 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _e2));
          if(tmp55)
          {
            tmpMeta56 = _exp;
          }
          else
          {
            tmpMeta54 = mmc_mk_box4(21, &NFExpression_LBINARY__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e2);
            tmpMeta56 = tmpMeta54;
          }
          tmpMeta1 = tmpMeta56;
          goto tmp3_done;
        }
        case 15: {
          modelica_metatype tmpMeta57;
          modelica_boolean tmp58;
          modelica_metatype tmpMeta59;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmp58 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1);
          if(tmp58)
          {
            tmpMeta59 = _exp;
          }
          else
          {
            tmpMeta57 = mmc_mk_box3(22, &NFExpression_LUNARY__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
            tmpMeta59 = tmpMeta57;
          }
          tmpMeta1 = tmpMeta59;
          goto tmp3_done;
        }
        case 16: {
          modelica_metatype tmpMeta60;
          modelica_boolean tmp61;
          modelica_metatype tmpMeta62;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg ,&_arg);

          _e2 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmp61 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _e2));
          if(tmp61)
          {
            tmpMeta62 = _exp;
          }
          else
          {
            tmpMeta60 = mmc_mk_box5(23, &NFExpression_RELATION__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e2, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
            tmpMeta62 = tmpMeta60;
          }
          tmpMeta1 = tmpMeta62;
          goto tmp3_done;
        }
        case 17: {
          modelica_metatype tmpMeta63;
          modelica_boolean tmp64;
          modelica_metatype tmpMeta65;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg ,&_arg);

          _e2 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func), _arg ,&_arg);

          _e3 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmp64 = (modelica_boolean)((referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _e2)) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _e3));
          if(tmp64)
          {
            tmpMeta65 = _exp;
          }
          else
          {
            tmpMeta63 = mmc_mk_box5(25, &NFExpression_IF__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1, _e2, _e3);
            tmpMeta65 = tmpMeta63;
          }
          tmpMeta1 = tmpMeta65;
          goto tmp3_done;
        }
        case 18: {
          modelica_metatype tmpMeta66;
          modelica_boolean tmp67;
          modelica_metatype tmpMeta68;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,23,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmp67 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1);
          if(tmp67)
          {
            tmpMeta68 = _exp;
          }
          else
          {
            tmpMeta66 = mmc_mk_box3(26, &NFExpression_CAST__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
            tmpMeta68 = tmpMeta66;
          }
          tmpMeta1 = tmpMeta68;
          goto tmp3_done;
        }
        case 19: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmpMeta1 = (referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1)?_exp:omc_NFExpression_box(threadData, _e1));
          goto tmp3_done;
        }
        case 20: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,25,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmpMeta1 = (referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1)?_exp:omc_NFExpression_unbox(threadData, _e1));
          goto tmp3_done;
        }
        case 21: {
          modelica_metatype tmpMeta70;
          modelica_metatype tmpMeta71;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg ,&_arg);

          tmpMeta70 = mmc_mk_box1(0, ((modelica_fnptr) _func));
          _subs = omc_List_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (modelica_fnptr) mmc_mk_box2(0,closure19_NFSubscript_mapFoldExp,tmpMeta70), _arg ,&_arg);
          tmpMeta71 = mmc_mk_box5(29, &NFExpression_SUBSCRIPTED__EXP__desc, _e1, _subs, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
          tmpMeta1 = tmpMeta71;
          goto tmp3_done;
        }
        case 22: {
          modelica_metatype tmpMeta72;
          modelica_boolean tmp73;
          modelica_metatype tmpMeta74;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmp73 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
          if(tmp73)
          {
            tmpMeta74 = _exp;
          }
          else
          {
            tmpMeta72 = mmc_mk_box4(30, &NFExpression_TUPLE__ELEMENT__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
            tmpMeta74 = tmpMeta72;
          }
          tmpMeta1 = tmpMeta74;
          goto tmp3_done;
        }
        case 23: {
          modelica_metatype tmpMeta75;
          modelica_boolean tmp76;
          modelica_metatype tmpMeta77;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,28,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg ,&_arg);
          tmp76 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
          if(tmp76)
          {
            tmpMeta77 = _exp;
          }
          else
          {
            tmpMeta75 = mmc_mk_box5(31, &NFExpression_RECORD__ELEMENT__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
            tmpMeta77 = tmpMeta75;
          }
          tmpMeta1 = tmpMeta77;
          goto tmp3_done;
        }
        case 24: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,29,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapFold(threadData, omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), ((modelica_fnptr) _func), _arg ,&_arg);

          omc_Mutable_update(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 25: {
          modelica_metatype tmpMeta78;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,33,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapFold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg ,&_arg);

          tmpMeta78 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta78), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta78))[3] = _e1;
          _exp = tmpMeta78;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 26: {
          modelica_metatype tmpMeta79;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,31,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _expl = omc_List_map1Fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), boxvar_NFExpression_mapFold, ((modelica_fnptr) _func), _arg ,&_arg);

          tmpMeta79 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta79), MMC_UNTAGPTR(_exp), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta79))[3] = _expl;
          _exp = tmpMeta79;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 27: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;

  _outExp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _outExp, _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _outExp, _arg ,&_arg);
  _return: OMC_LABEL_UNUSED
  if (out_arg) { *out_arg = _arg; }
  return _outExp;
}

DLLDirection
void omc_NFExpression_applyShallowOpt(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func)
{
  modelica_metatype _e = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _e has no default value.
  if(isSome(_exp))
  {
    /* Pattern-matching assignment */
    tmpMeta1 = _exp;
    if (optionNone(tmpMeta1)) MMC_THROW_INTERNAL();
    tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
    _e = tmpMeta2;

    (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _e) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _e);
  }
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
void omc_NFExpression_applyShallow(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func)
{
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _exp;
    {
      int tmp3;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
        case 8: {
          
          /* Pattern matching succeeded */
          omc_NFClockKind_applyExpShallow(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 9: {
          
          /* Pattern matching succeeded */
          omc_NFComponentRef_applyExpShallow(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 11: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_applyArrayShallow(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 12: {
          modelica_metatype tmpMeta4;
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _row;
            for (tmpMeta4 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))); !listEmpty(tmpMeta4); tmpMeta4=MMC_CDR(tmpMeta4))
            {
              _row = MMC_CAR(tmpMeta4);
              omc_NFExpression_applyListShallow(threadData, _row, ((modelica_fnptr) _func));
            }
          }
          goto tmp2_done;
        }
        case 13: {
          
          /* Pattern matching succeeded */
          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));

          omc_NFExpression_applyShallowOpt(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func));

          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
          goto tmp2_done;
        }
        case 14: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_applyListShallow(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 15: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_applyListShallow(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 16: {
          
          /* Pattern matching succeeded */
          omc_NFCall_applyExpShallow(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 17: {
          
          /* Pattern matching succeeded */
          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));

          omc_NFExpression_applyShallowOpt(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 19: {
          
          /* Pattern matching succeeded */
          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));

          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          goto tmp2_done;
        }
        case 24: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _arg;
            for (tmpMeta6 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))); !listEmpty(tmpMeta6); tmpMeta6=MMC_CDR(tmpMeta6))
            {
              _arg = MMC_CAR(tmpMeta6);
              (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _arg) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _arg);
            }
          }

          {
            modelica_metatype _arg;
            for (tmpMeta8 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))); !listEmpty(tmpMeta8); tmpMeta8=MMC_CDR(tmpMeta8))
            {
              _arg = MMC_CAR(tmpMeta8);
              (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _arg) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _arg);
            }
          }
          goto tmp2_done;
        }
        case 20: {
          
          /* Pattern matching succeeded */
          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp2_done;
        }
        case 21: {
          
          /* Pattern matching succeeded */
          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));

          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          goto tmp2_done;
        }
        case 22: {
          
          /* Pattern matching succeeded */
          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp2_done;
        }
        case 23: {
          
          /* Pattern matching succeeded */
          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));

          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          goto tmp2_done;
        }
        case 25: {
          
          /* Pattern matching succeeded */
          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));

          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));

          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
          goto tmp2_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp2_done;
        }
        case 27: {
          
          /* Pattern matching succeeded */
          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp2_done;
        }
        case 28: {
          
          /* Pattern matching succeeded */
          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp2_done;
        }
        case 29: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          
          /* Pattern matching succeeded */
          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));

          {
            modelica_metatype _s;
            for (tmpMeta10 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))); !listEmpty(tmpMeta10); tmpMeta10=MMC_CDR(tmpMeta10))
            {
              _s = MMC_CAR(tmpMeta10);
              omc_NFSubscript_applyExpShallow(threadData, _s, ((modelica_fnptr) _func));
            }
          }
          goto tmp2_done;
        }
        case 30: {
          
          /* Pattern matching succeeded */
          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp2_done;
        }
        case 31: {
          
          /* Pattern matching succeeded */
          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp2_done;
        }
        case 32: {
          
          /* Pattern matching succeeded */
          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          goto tmp2_done;
        }
        case 36: {
          
          /* Pattern matching succeeded */
          (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp2_done;
        }
        case 34: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_applyListShallow(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        default:
        tmp2_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
void omc_NFExpression_applyListShallow(threadData_t *threadData, modelica_metatype _expl, modelica_fnptr _func)
{
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  {
    modelica_metatype _e;
    for (tmpMeta1 = _expl; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _e = MMC_CAR(tmpMeta1);
      (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _e) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _e);
    }
  }
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
void omc_NFExpression_applyArrayShallow(threadData_t *threadData, modelica_metatype _expl, modelica_fnptr _func)
{
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_integer tmp4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  {
    modelica_metatype _e;
    for (tmpMeta1 = _expl, tmp4 = arrayLength(tmpMeta1), tmp3 = 1; tmp3 <= tmp4; tmp3++)
    {
      _e = arrayGet(tmpMeta1,tmp3);
      (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _e) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _e);
    }
  }
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
void omc_NFExpression_apply(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func)
{
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  { /* match expression */
    modelica_metatype tmp3_1;
    tmp3_1 = _exp;
    {
      int tmp3;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
        case 8: {
          
          /* Pattern matching succeeded */
          omc_NFClockKind_applyExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 9: {
          
          /* Pattern matching succeeded */
          omc_NFComponentRef_applyExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 11: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_applyArray(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 12: {
          modelica_metatype tmpMeta4;
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _row;
            for (tmpMeta4 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))); !listEmpty(tmpMeta4); tmpMeta4=MMC_CDR(tmpMeta4))
            {
              _row = MMC_CAR(tmpMeta4);
              omc_NFExpression_applyList(threadData, _row, ((modelica_fnptr) _func));
            }
          }
          goto tmp2_done;
        }
        case 13: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));

          omc_NFExpression_applyOpt(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func));

          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 14: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_applyList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 15: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_applyList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 16: {
          
          /* Pattern matching succeeded */
          omc_NFCall_applyExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 17: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));

          omc_NFExpression_applyOpt(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 19: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));

          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 24: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype _arg;
            for (tmpMeta6 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))); !listEmpty(tmpMeta6); tmpMeta6=MMC_CDR(tmpMeta6))
            {
              _arg = MMC_CAR(tmpMeta6);
              omc_NFExpression_apply(threadData, _arg, ((modelica_fnptr) _func));
            }
          }

          {
            modelica_metatype _arg;
            for (tmpMeta8 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))); !listEmpty(tmpMeta8); tmpMeta8=MMC_CDR(tmpMeta8))
            {
              _arg = MMC_CAR(tmpMeta8);
              omc_NFExpression_apply(threadData, _arg, ((modelica_fnptr) _func));
            }
          }
          goto tmp2_done;
        }
        case 20: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 21: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));

          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 22: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 23: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));

          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 25: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));

          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func));

          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 27: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 28: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 29: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          
          /* Pattern matching succeeded */
          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));

          {
            modelica_metatype _s;
            for (tmpMeta10 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))); !listEmpty(tmpMeta10); tmpMeta10=MMC_CDR(tmpMeta10))
            {
              _s = MMC_CAR(tmpMeta10);
              omc_NFSubscript_applyExp(threadData, _s, ((modelica_fnptr) _func));
            }
          }
          goto tmp2_done;
        }
        case 30: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 31: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 32: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_apply(threadData, omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 36: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_apply(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        case 34: {
          
          /* Pattern matching succeeded */
          omc_NFExpression_applyList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          goto tmp2_done;
        }
        default:
        tmp2_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      goto_1:;
      MMC_THROW_INTERNAL();
      goto tmp2_done;
      tmp2_done:;
    }
  }
  ;

  (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((void(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _exp) : ((void(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _exp);
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
void omc_NFExpression_applyOpt(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func)
{
  modelica_metatype _e = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _e has no default value.
  if(isSome(_exp))
  {
    /* Pattern-matching assignment */
    tmpMeta1 = _exp;
    if (optionNone(tmpMeta1)) MMC_THROW_INTERNAL();
    tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
    _e = tmpMeta2;

    omc_NFExpression_apply(threadData, _e, ((modelica_fnptr) _func));
  }
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
void omc_NFExpression_applyList(threadData_t *threadData, modelica_metatype _expl, modelica_fnptr _func)
{
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  {
    modelica_metatype _e;
    for (tmpMeta1 = _expl; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _e = MMC_CAR(tmpMeta1);
      omc_NFExpression_apply(threadData, _e, ((modelica_fnptr) _func));
    }
  }
  _return: OMC_LABEL_UNUSED
  return;
}

DLLDirection
void omc_NFExpression_applyArray(threadData_t *threadData, modelica_metatype _expl, modelica_fnptr _func)
{
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_integer tmp4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  {
    modelica_metatype _e;
    for (tmpMeta1 = _expl, tmp4 = arrayLength(tmpMeta1), tmp3 = 1; tmp3 <= tmp4; tmp3++)
    {
      _e = arrayGet(tmpMeta1,tmp3);
      omc_NFExpression_apply(threadData, _e, ((modelica_fnptr) _func));
    }
  }
  _return: OMC_LABEL_UNUSED
  return;
}

static modelica_metatype closure20_NFSubscript_foldExp(threadData_t *thData, modelica_metatype closure, modelica_metatype subscript, modelica_metatype arg)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFSubscript_foldExp(thData, subscript, func, arg);
}
DLLDirection
modelica_metatype omc_NFExpression_fold(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func, modelica_metatype _arg)
{
  modelica_metatype _result = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _result has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _e = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e has no default value.
      tmp4 = 0;
      for (; tmp4 < 27; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFClockKind_foldExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg);
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFComponentRef_foldExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg);
          goto tmp3_done;
        }
        case 2: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_foldArray(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg);
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _result = _arg;

          {
            modelica_metatype _row;
            for (tmpMeta6 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))); !listEmpty(tmpMeta6); tmpMeta6=MMC_CDR(tmpMeta6))
            {
              _row = MMC_CAR(tmpMeta6);
              _result = omc_NFExpression_foldList(threadData, _row, ((modelica_fnptr) _func), _result);
            }
          }
          tmpMeta1 = _result;
          goto tmp3_done;
        }
        case 4: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _result = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg);

          _result = omc_NFExpression_foldOpt(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func), _result);
          tmpMeta1 = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), ((modelica_fnptr) _func), _result);
          goto tmp3_done;
        }
        case 5: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_foldList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg);
          goto tmp3_done;
        }
        case 6: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_foldList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func), _arg);
          goto tmp3_done;
        }
        case 7: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFCall_foldExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg);
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,2) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (optionNone(tmpMeta8)) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
          _e = tmpMeta9;
          /* Pattern matching succeeded */
          _result = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg);
          tmpMeta1 = omc_NFExpression_fold(threadData, _e, ((modelica_fnptr) _func), _result);
          goto tmp3_done;
        }
        case 9: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg);
          goto tmp3_done;
        }
        case 10: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _result = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg);
          tmpMeta1 = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func), _result);
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _result = _arg;

          {
            modelica_metatype _argument;
            for (tmpMeta10 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))); !listEmpty(tmpMeta10); tmpMeta10=MMC_CDR(tmpMeta10))
            {
              _argument = MMC_CAR(tmpMeta10);
              _result = omc_NFExpression_fold(threadData, _argument, ((modelica_fnptr) _func), _result);
            }
          }

          {
            modelica_metatype _argument;
            for (tmpMeta12 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))); !listEmpty(tmpMeta12); tmpMeta12=MMC_CDR(tmpMeta12))
            {
              _argument = MMC_CAR(tmpMeta12);
              _result = omc_NFExpression_fold(threadData, _argument, ((modelica_fnptr) _func), _result);
            }
          }
          tmpMeta1 = _result;
          goto tmp3_done;
        }
        case 12: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg);
          goto tmp3_done;
        }
        case 13: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _result = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg);
          tmpMeta1 = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func), _result);
          goto tmp3_done;
        }
        case 14: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg);
          goto tmp3_done;
        }
        case 15: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _result = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg);
          tmpMeta1 = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func), _result);
          goto tmp3_done;
        }
        case 16: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _result = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg);

          _result = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func), _result);
          tmpMeta1 = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), ((modelica_fnptr) _func), _result);
          goto tmp3_done;
        }
        case 17: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,23,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg);
          goto tmp3_done;
        }
        case 18: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg);
          goto tmp3_done;
        }
        case 19: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,25,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg);
          goto tmp3_done;
        }
        case 20: {
          modelica_metatype tmpMeta14;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _result = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg);
          tmpMeta14 = mmc_mk_box1(0, ((modelica_fnptr) _func));
          tmpMeta1 = omc_List_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (modelica_fnptr) mmc_mk_box2(0,closure20_NFSubscript_foldExp,tmpMeta14), _result);
          goto tmp3_done;
        }
        case 21: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg);
          goto tmp3_done;
        }
        case 22: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,28,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func), _arg);
          goto tmp3_done;
        }
        case 23: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,29,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_fold(threadData, omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), ((modelica_fnptr) _func), _arg);
          goto tmp3_done;
        }
        case 24: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,33,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg);
          goto tmp3_done;
        }
        case 25: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,31,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_foldList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func), _arg);
          goto tmp3_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _arg;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _result = tmpMeta1;

  _result = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _exp, _result) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _exp, _result);
  _return: OMC_LABEL_UNUSED
  return _result;
}

DLLDirection
modelica_metatype omc_NFExpression_foldOpt(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func, modelica_metatype _arg)
{
  modelica_metatype _result = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _result has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _e = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (optionNone(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
          _e = tmpMeta6;
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _e, _arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _e, _arg);
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _arg;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _result = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _result;
}

DLLDirection
modelica_metatype omc_NFExpression_foldList(threadData_t *threadData, modelica_metatype _expl, modelica_fnptr _func, modelica_metatype _arg)
{
  modelica_metatype _result = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _result = _arg;
  {
    modelica_metatype _e;
    for (tmpMeta1 = _expl; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
    {
      _e = MMC_CAR(tmpMeta1);
      _result = omc_NFExpression_fold(threadData, _e, ((modelica_fnptr) _func), _result);
    }
  }
  _return: OMC_LABEL_UNUSED
  return _result;
}

DLLDirection
modelica_metatype omc_NFExpression_foldArray(threadData_t *threadData, modelica_metatype _expl, modelica_fnptr _func, modelica_metatype _arg)
{
  modelica_metatype _result = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_integer tmp3;
  modelica_integer tmp4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _result = _arg;
  {
    modelica_metatype _e;
    for (tmpMeta1 = _expl, tmp4 = arrayLength(tmpMeta1), tmp3 = 1; tmp3 <= tmp4; tmp3++)
    {
      _e = arrayGet(tmpMeta1,tmp3);
      _result = omc_NFExpression_fold(threadData, _e, ((modelica_fnptr) _func), _result);
    }
  }
  _return: OMC_LABEL_UNUSED
  return _result;
}

static modelica_metatype closure21_NFExpression_mapArrayElements(threadData_t *thData, modelica_metatype closure, modelica_metatype exp)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_mapArrayElements(thData, exp, func);
}
DLLDirection
modelica_metatype omc_NFExpression_mapArrayElements(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta7 = mmc_mk_box1(0, ((modelica_fnptr) _func));
          tmpMeta6 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta6), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta6))[3] = omc_Array_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (modelica_fnptr) mmc_mk_box2(0,closure21_NFExpression_mapArrayElements,tmpMeta7));
          _exp = tmpMeta6;

          tmpMeta8 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta8), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta8))[4] = mmc_mk_boolean(omc_Array_all(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), boxvar_NFExpression_isLiteral));
          _exp = tmpMeta8;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _exp) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _exp);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_mapShallowOpt(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _e = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _e has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (optionNone(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
          _e = tmpMeta6;
          /* Pattern matching succeeded */
          tmpMeta1 = mmc_mk_some((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _e) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _e));
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_mapShallow(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _e3 = NULL;
      modelica_metatype _e4 = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e1 has no default value.
      // _e2 has no default value.
      // _e3 has no default value.
      // _e4 has no default value.
      tmp4 = 0;
      for (; tmp4 < 28; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta6 = mmc_mk_box2(8, &NFExpression_CLKCONST__desc, omc_NFClockKind_mapExpShallow(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func)));
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta7 = mmc_mk_box3(9, &NFExpression_CREF__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), omc_NFComponentRef_mapExpShallow(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func)));
          tmpMeta1 = tmpMeta7;
          goto tmp3_done;
        }
        case 2: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(!mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))))) goto tmp3_end;
          tmpMeta1 = omc_NFExpression_makeArray(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), omc_Array_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func)), mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))));
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta16;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar31;
            modelica_metatype* tmp9;
            modelica_metatype tmpMeta10;
            modelica_metatype tmpMeta11;
            modelica_metatype __omcQ_24tmpVar30;
            modelica_integer tmp15;
            modelica_metatype _row_loopVar = 0;
            modelica_metatype _row;
            _row_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
            tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar31 = tmpMeta10; /* defaultValue */
            tmp9 = &__omcQ_24tmpVar31;
            while(1) {
              tmp15 = 1;
              if (!listEmpty(_row_loopVar)) {
                _row = MMC_CAR(_row_loopVar);
                _row_loopVar = MMC_CDR(_row_loopVar);
                tmp15--;
              }
              if (tmp15 == 0) {
                {
                  modelica_metatype __omcQ_24tmpVar29;
                  modelica_metatype* tmp12;
                  modelica_metatype tmpMeta13;
                  modelica_metatype __omcQ_24tmpVar28;
                  modelica_integer tmp14;
                  modelica_metatype _e_loopVar = 0;
                  modelica_metatype _e;
                  _e_loopVar = _row;
                  tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
                  __omcQ_24tmpVar29 = tmpMeta13; /* defaultValue */
                  tmp12 = &__omcQ_24tmpVar29;
                  while(1) {
                    tmp14 = 1;
                    if (!listEmpty(_e_loopVar)) {
                      _e = MMC_CAR(_e_loopVar);
                      _e_loopVar = MMC_CDR(_e_loopVar);
                      tmp14--;
                    }
                    if (tmp14 == 0) {
                      __omcQ_24tmpVar28 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _e) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _e);
                      *tmp12 = mmc_mk_cons(__omcQ_24tmpVar28,0);
                      tmp12 = &MMC_CDR(*tmp12);
                    } else if (tmp14 == 1) {
                      break;
                    } else {
                      goto goto_2;
                    }
                  }
                  *tmp12 = mmc_mk_nil();
                  tmpMeta11 = __omcQ_24tmpVar29;
                }
                __omcQ_24tmpVar30 = tmpMeta11;
                *tmp9 = mmc_mk_cons(__omcQ_24tmpVar30,0);
                tmp9 = &MMC_CDR(*tmp9);
              } else if (tmp15 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp9 = mmc_mk_nil();
            tmpMeta8 = __omcQ_24tmpVar31;
          }
          tmpMeta16 = mmc_mk_box2(12, &NFExpression_MATRIX__desc, tmpMeta8);
          tmpMeta1 = tmpMeta16;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_boolean tmp20;
          modelica_metatype tmpMeta21;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          if (optionNone(tmpMeta17)) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 1));
          
          _e2 = tmpMeta18;
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));

          _e4 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _e2) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _e2);

          _e3 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
          tmp20 = (modelica_boolean)((referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1) && referenceEq(_e2, _e4)) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _e3));
          if(tmp20)
          {
            tmpMeta21 = _exp;
          }
          else
          {
            tmpMeta19 = mmc_mk_box5(13, &NFExpression_RANGE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1, mmc_mk_some(_e4), _e3);
            tmpMeta21 = tmpMeta19;
          }
          tmpMeta1 = tmpMeta21;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta22;
          modelica_boolean tmp23;
          modelica_metatype tmpMeta24;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));

          _e3 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
          tmp23 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _e3));
          if(tmp23)
          {
            tmpMeta24 = _exp;
          }
          else
          {
            tmpMeta22 = mmc_mk_box5(13, &NFExpression_RANGE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1, mmc_mk_none(), _e3);
            tmpMeta24 = tmpMeta22;
          }
          tmpMeta1 = tmpMeta24;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta29;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar33;
            modelica_metatype* tmp26;
            modelica_metatype tmpMeta27;
            modelica_metatype __omcQ_24tmpVar32;
            modelica_integer tmp28;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta27 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar33 = tmpMeta27; /* defaultValue */
            tmp26 = &__omcQ_24tmpVar33;
            while(1) {
              tmp28 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp28--;
              }
              if (tmp28 == 0) {
                __omcQ_24tmpVar32 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _e) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _e);
                *tmp26 = mmc_mk_cons(__omcQ_24tmpVar32,0);
                tmp26 = &MMC_CDR(*tmp26);
              } else if (tmp28 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp26 = mmc_mk_nil();
            tmpMeta25 = __omcQ_24tmpVar33;
          }
          tmpMeta29 = mmc_mk_box3(14, &NFExpression_TUPLE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), tmpMeta25);
          tmpMeta1 = tmpMeta29;
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta34;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar35;
            modelica_metatype* tmp31;
            modelica_metatype tmpMeta32;
            modelica_metatype __omcQ_24tmpVar34;
            modelica_integer tmp33;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)));
            tmpMeta32 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar35 = tmpMeta32; /* defaultValue */
            tmp31 = &__omcQ_24tmpVar35;
            while(1) {
              tmp33 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp33--;
              }
              if (tmp33 == 0) {
                __omcQ_24tmpVar34 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _e) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _e);
                *tmp31 = mmc_mk_cons(__omcQ_24tmpVar34,0);
                tmp31 = &MMC_CDR(*tmp31);
              } else if (tmp33 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp31 = mmc_mk_nil();
            tmpMeta30 = __omcQ_24tmpVar35;
          }
          tmpMeta34 = mmc_mk_box4(15, &NFExpression_RECORD__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), tmpMeta30);
          tmpMeta1 = tmpMeta34;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta35;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta35 = mmc_mk_box2(16, &NFExpression_CALL__desc, omc_NFCall_mapExpShallow(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func)));
          tmpMeta1 = tmpMeta35;
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta36;
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          modelica_boolean tmp39;
          modelica_metatype tmpMeta40;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,2) == 0) goto tmp3_end;
          tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (optionNone(tmpMeta36)) goto tmp3_end;
          tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta36), 1));
          _e2 = tmpMeta37;
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));

          _e3 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _e2) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _e2);
          tmp39 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1) && referenceEq(_e2, _e3));
          if(tmp39)
          {
            tmpMeta40 = _exp;
          }
          else
          {
            tmpMeta38 = mmc_mk_box3(17, &NFExpression_SIZE__desc, _e1, mmc_mk_some(_e3));
            tmpMeta40 = tmpMeta38;
          }
          tmpMeta1 = tmpMeta40;
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta41;
          modelica_boolean tmp42;
          modelica_metatype tmpMeta43;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          tmp42 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
          if(tmp42)
          {
            tmpMeta43 = _exp;
          }
          else
          {
            tmpMeta41 = mmc_mk_box3(17, &NFExpression_SIZE__desc, _e1, mmc_mk_none());
            tmpMeta43 = tmpMeta41;
          }
          tmpMeta1 = tmpMeta43;
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta44;
          modelica_boolean tmp45;
          modelica_metatype tmpMeta46;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));

          _e2 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          tmp45 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _e2));
          if(tmp45)
          {
            tmpMeta46 = _exp;
          }
          else
          {
            tmpMeta44 = mmc_mk_box4(19, &NFExpression_BINARY__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e2);
            tmpMeta46 = tmpMeta44;
          }
          tmpMeta1 = tmpMeta46;
          goto tmp3_done;
        }
        case 12: {
          modelica_metatype tmpMeta47;
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta52;
          modelica_metatype tmpMeta53;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar37;
            modelica_metatype* tmp49;
            modelica_metatype tmpMeta50;
            modelica_metatype __omcQ_24tmpVar36;
            modelica_integer tmp51;
            modelica_metatype _arg_loopVar = 0;
            modelica_metatype _arg;
            _arg_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
            tmpMeta50 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar37 = tmpMeta50; /* defaultValue */
            tmp49 = &__omcQ_24tmpVar37;
            while(1) {
              tmp51 = 1;
              if (!listEmpty(_arg_loopVar)) {
                _arg = MMC_CAR(_arg_loopVar);
                _arg_loopVar = MMC_CDR(_arg_loopVar);
                tmp51--;
              }
              if (tmp51 == 0) {
                __omcQ_24tmpVar36 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _arg);
                *tmp49 = mmc_mk_cons(__omcQ_24tmpVar36,0);
                tmp49 = &MMC_CDR(*tmp49);
              } else if (tmp51 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp49 = mmc_mk_nil();
            tmpMeta48 = __omcQ_24tmpVar37;
          }
          tmpMeta47 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta47), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta47))[2] = tmpMeta48;
          _exp = tmpMeta47;

          {
            modelica_metatype __omcQ_24tmpVar39;
            modelica_metatype* tmp54;
            modelica_metatype tmpMeta55;
            modelica_metatype __omcQ_24tmpVar38;
            modelica_integer tmp56;
            modelica_metatype _arg_loopVar = 0;
            modelica_metatype _arg;
            _arg_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta55 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar39 = tmpMeta55; /* defaultValue */
            tmp54 = &__omcQ_24tmpVar39;
            while(1) {
              tmp56 = 1;
              if (!listEmpty(_arg_loopVar)) {
                _arg = MMC_CAR(_arg_loopVar);
                _arg_loopVar = MMC_CDR(_arg_loopVar);
                tmp56--;
              }
              if (tmp56 == 0) {
                __omcQ_24tmpVar38 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _arg);
                *tmp54 = mmc_mk_cons(__omcQ_24tmpVar38,0);
                tmp54 = &MMC_CDR(*tmp54);
              } else if (tmp56 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp54 = mmc_mk_nil();
            tmpMeta53 = __omcQ_24tmpVar39;
          }
          tmpMeta52 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta52), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta52))[3] = tmpMeta53;
          _exp = tmpMeta52;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 13: {
          modelica_metatype tmpMeta57;
          modelica_boolean tmp58;
          modelica_metatype tmpMeta59;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          tmp58 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1);
          if(tmp58)
          {
            tmpMeta59 = _exp;
          }
          else
          {
            tmpMeta57 = mmc_mk_box3(20, &NFExpression_UNARY__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
            tmpMeta59 = tmpMeta57;
          }
          tmpMeta1 = tmpMeta59;
          goto tmp3_done;
        }
        case 14: {
          modelica_metatype tmpMeta60;
          modelica_boolean tmp61;
          modelica_metatype tmpMeta62;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));

          _e2 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          tmp61 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _e2));
          if(tmp61)
          {
            tmpMeta62 = _exp;
          }
          else
          {
            tmpMeta60 = mmc_mk_box4(21, &NFExpression_LBINARY__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e2);
            tmpMeta62 = tmpMeta60;
          }
          tmpMeta1 = tmpMeta62;
          goto tmp3_done;
        }
        case 15: {
          modelica_metatype tmpMeta63;
          modelica_boolean tmp64;
          modelica_metatype tmpMeta65;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          tmp64 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1);
          if(tmp64)
          {
            tmpMeta65 = _exp;
          }
          else
          {
            tmpMeta63 = mmc_mk_box3(22, &NFExpression_LUNARY__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
            tmpMeta65 = tmpMeta63;
          }
          tmpMeta1 = tmpMeta65;
          goto tmp3_done;
        }
        case 16: {
          modelica_metatype tmpMeta66;
          modelica_boolean tmp67;
          modelica_metatype tmpMeta68;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));

          _e2 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          tmp67 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _e2));
          if(tmp67)
          {
            tmpMeta68 = _exp;
          }
          else
          {
            tmpMeta66 = mmc_mk_box5(23, &NFExpression_RELATION__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e2, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
            tmpMeta68 = tmpMeta66;
          }
          tmpMeta1 = tmpMeta68;
          goto tmp3_done;
        }
        case 17: {
          modelica_metatype tmpMeta69;
          modelica_boolean tmp70;
          modelica_metatype tmpMeta71;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));

          _e2 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));

          _e3 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
          tmp70 = (modelica_boolean)((referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _e2)) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _e3));
          if(tmp70)
          {
            tmpMeta71 = _exp;
          }
          else
          {
            tmpMeta69 = mmc_mk_box5(25, &NFExpression_IF__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1, _e2, _e3);
            tmpMeta71 = tmpMeta69;
          }
          tmpMeta1 = tmpMeta71;
          goto tmp3_done;
        }
        case 18: {
          modelica_metatype tmpMeta72;
          modelica_boolean tmp73;
          modelica_metatype tmpMeta74;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,23,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          tmp73 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1);
          if(tmp73)
          {
            tmpMeta74 = _exp;
          }
          else
          {
            tmpMeta72 = mmc_mk_box3(26, &NFExpression_CAST__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
            tmpMeta74 = tmpMeta72;
          }
          tmpMeta1 = tmpMeta74;
          goto tmp3_done;
        }
        case 19: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          tmpMeta1 = (referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1)?_exp:omc_NFExpression_box(threadData, _e1));
          goto tmp3_done;
        }
        case 20: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,25,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          tmpMeta1 = (referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1)?_exp:omc_NFExpression_unbox(threadData, _e1));
          goto tmp3_done;
        }
        case 21: {
          modelica_metatype tmpMeta75;
          modelica_metatype tmpMeta79;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar41;
            modelica_metatype* tmp76;
            modelica_metatype tmpMeta77;
            modelica_metatype __omcQ_24tmpVar40;
            modelica_integer tmp78;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta77 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar41 = tmpMeta77; /* defaultValue */
            tmp76 = &__omcQ_24tmpVar41;
            while(1) {
              tmp78 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp78--;
              }
              if (tmp78 == 0) {
                __omcQ_24tmpVar40 = omc_NFSubscript_mapShallowExp(threadData, _e, ((modelica_fnptr) _func));
                *tmp76 = mmc_mk_cons(__omcQ_24tmpVar40,0);
                tmp76 = &MMC_CDR(*tmp76);
              } else if (tmp78 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp76 = mmc_mk_nil();
            tmpMeta75 = __omcQ_24tmpVar41;
          }
          tmpMeta79 = mmc_mk_box5(29, &NFExpression_SUBSCRIPTED__EXP__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), tmpMeta75, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
          tmpMeta1 = tmpMeta79;
          goto tmp3_done;
        }
        case 22: {
          modelica_metatype tmpMeta80;
          modelica_boolean tmp81;
          modelica_metatype tmpMeta82;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          tmp81 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
          if(tmp81)
          {
            tmpMeta82 = _exp;
          }
          else
          {
            tmpMeta80 = mmc_mk_box4(30, &NFExpression_TUPLE__ELEMENT__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
            tmpMeta82 = tmpMeta80;
          }
          tmpMeta1 = tmpMeta82;
          goto tmp3_done;
        }
        case 23: {
          modelica_metatype tmpMeta83;
          modelica_boolean tmp84;
          modelica_metatype tmpMeta85;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,28,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          tmp84 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
          if(tmp84)
          {
            tmpMeta85 = _exp;
          }
          else
          {
            tmpMeta83 = mmc_mk_box5(31, &NFExpression_RECORD__ELEMENT__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
            tmpMeta85 = tmpMeta83;
          }
          tmpMeta1 = tmpMeta85;
          goto tmp3_done;
        }
        case 24: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,29,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          omc_Mutable_update(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))));
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 25: {
          modelica_metatype tmpMeta86;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,33,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta86 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta86), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta86))[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          _exp = tmpMeta86;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 26: {
          modelica_metatype tmpMeta87;
          modelica_metatype tmpMeta88;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,31,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar43;
            modelica_metatype* tmp89;
            modelica_metatype tmpMeta90;
            modelica_metatype __omcQ_24tmpVar42;
            modelica_integer tmp91;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta90 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar43 = tmpMeta90; /* defaultValue */
            tmp89 = &__omcQ_24tmpVar43;
            while(1) {
              tmp91 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp91--;
              }
              if (tmp91 == 0) {
                __omcQ_24tmpVar42 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _e) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _e);
                *tmp89 = mmc_mk_cons(__omcQ_24tmpVar42,0);
                tmp89 = &MMC_CDR(*tmp89);
              } else if (tmp91 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp89 = mmc_mk_nil();
            tmpMeta88 = __omcQ_24tmpVar43;
          }
          tmpMeta87 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta87), MMC_UNTAGPTR(_exp), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta87))[3] = tmpMeta88;
          _exp = tmpMeta87;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 27: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

static modelica_metatype closure22_NFExpression_mapReverse(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_mapReverse(thData, $in_exp, func);
}
DLLDirection
modelica_metatype omc_NFExpression_mapReverse(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_fnptr _func)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _exp) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _exp);

  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _e3 = NULL;
      modelica_metatype _e4 = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e1 has no default value.
      // _e2 has no default value.
      // _e3 has no default value.
      // _e4 has no default value.
      tmp4 = 0;
      for (; tmp4 < 28; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta6 = mmc_mk_box2(8, &NFExpression_CLKCONST__desc, omc_NFClockKind_mapExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func)));
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta7 = mmc_mk_box3(9, &NFExpression_CREF__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), omc_NFComponentRef_mapExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func)));
          tmpMeta1 = tmpMeta7;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(!mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))))) goto tmp3_end;
          tmpMeta8 = mmc_mk_box1(0, ((modelica_fnptr) _func));
          tmpMeta1 = omc_NFExpression_makeArray(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), omc_Array_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (modelica_fnptr) mmc_mk_box2(0,closure22_NFExpression_mapReverse,tmpMeta8)), mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))));
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta17;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar47;
            modelica_metatype* tmp10;
            modelica_metatype tmpMeta11;
            modelica_metatype tmpMeta12;
            modelica_metatype __omcQ_24tmpVar46;
            modelica_integer tmp16;
            modelica_metatype _row_loopVar = 0;
            modelica_metatype _row;
            _row_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
            tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar47 = tmpMeta11; /* defaultValue */
            tmp10 = &__omcQ_24tmpVar47;
            while(1) {
              tmp16 = 1;
              if (!listEmpty(_row_loopVar)) {
                _row = MMC_CAR(_row_loopVar);
                _row_loopVar = MMC_CDR(_row_loopVar);
                tmp16--;
              }
              if (tmp16 == 0) {
                {
                  modelica_metatype __omcQ_24tmpVar45;
                  modelica_metatype* tmp13;
                  modelica_metatype tmpMeta14;
                  modelica_metatype __omcQ_24tmpVar44;
                  modelica_integer tmp15;
                  modelica_metatype _e_loopVar = 0;
                  modelica_metatype _e;
                  _e_loopVar = _row;
                  tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
                  __omcQ_24tmpVar45 = tmpMeta14; /* defaultValue */
                  tmp13 = &__omcQ_24tmpVar45;
                  while(1) {
                    tmp15 = 1;
                    if (!listEmpty(_e_loopVar)) {
                      _e = MMC_CAR(_e_loopVar);
                      _e_loopVar = MMC_CDR(_e_loopVar);
                      tmp15--;
                    }
                    if (tmp15 == 0) {
                      __omcQ_24tmpVar44 = omc_NFExpression_mapReverse(threadData, _e, ((modelica_fnptr) _func));
                      *tmp13 = mmc_mk_cons(__omcQ_24tmpVar44,0);
                      tmp13 = &MMC_CDR(*tmp13);
                    } else if (tmp15 == 1) {
                      break;
                    } else {
                      goto goto_2;
                    }
                  }
                  *tmp13 = mmc_mk_nil();
                  tmpMeta12 = __omcQ_24tmpVar45;
                }
                __omcQ_24tmpVar46 = tmpMeta12;
                *tmp10 = mmc_mk_cons(__omcQ_24tmpVar46,0);
                tmp10 = &MMC_CDR(*tmp10);
              } else if (tmp16 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp10 = mmc_mk_nil();
            tmpMeta9 = __omcQ_24tmpVar47;
          }
          tmpMeta17 = mmc_mk_box2(12, &NFExpression_MATRIX__desc, tmpMeta9);
          tmpMeta1 = tmpMeta17;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_boolean tmp21;
          modelica_metatype tmpMeta22;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          if (optionNone(tmpMeta18)) goto tmp3_end;
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 1));
          
          _e2 = tmpMeta19;
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));

          _e4 = omc_NFExpression_mapReverse(threadData, _e2, ((modelica_fnptr) _func));

          _e3 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), ((modelica_fnptr) _func));
          tmp21 = (modelica_boolean)((referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1) && referenceEq(_e2, _e4)) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _e3));
          if(tmp21)
          {
            tmpMeta22 = _exp;
          }
          else
          {
            tmpMeta20 = mmc_mk_box5(13, &NFExpression_RANGE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1, mmc_mk_some(_e4), _e3);
            tmpMeta22 = tmpMeta20;
          }
          tmpMeta1 = tmpMeta22;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta23;
          modelica_boolean tmp24;
          modelica_metatype tmpMeta25;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));

          _e3 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), ((modelica_fnptr) _func));
          tmp24 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _e3));
          if(tmp24)
          {
            tmpMeta25 = _exp;
          }
          else
          {
            tmpMeta23 = mmc_mk_box5(13, &NFExpression_RANGE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1, mmc_mk_none(), _e3);
            tmpMeta25 = tmpMeta23;
          }
          tmpMeta1 = tmpMeta25;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta30;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar49;
            modelica_metatype* tmp27;
            modelica_metatype tmpMeta28;
            modelica_metatype __omcQ_24tmpVar48;
            modelica_integer tmp29;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta28 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar49 = tmpMeta28; /* defaultValue */
            tmp27 = &__omcQ_24tmpVar49;
            while(1) {
              tmp29 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp29--;
              }
              if (tmp29 == 0) {
                __omcQ_24tmpVar48 = omc_NFExpression_mapReverse(threadData, _e, ((modelica_fnptr) _func));
                *tmp27 = mmc_mk_cons(__omcQ_24tmpVar48,0);
                tmp27 = &MMC_CDR(*tmp27);
              } else if (tmp29 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp27 = mmc_mk_nil();
            tmpMeta26 = __omcQ_24tmpVar49;
          }
          tmpMeta30 = mmc_mk_box3(14, &NFExpression_TUPLE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), tmpMeta26);
          tmpMeta1 = tmpMeta30;
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta35;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar51;
            modelica_metatype* tmp32;
            modelica_metatype tmpMeta33;
            modelica_metatype __omcQ_24tmpVar50;
            modelica_integer tmp34;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)));
            tmpMeta33 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar51 = tmpMeta33; /* defaultValue */
            tmp32 = &__omcQ_24tmpVar51;
            while(1) {
              tmp34 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp34--;
              }
              if (tmp34 == 0) {
                __omcQ_24tmpVar50 = omc_NFExpression_mapReverse(threadData, _e, ((modelica_fnptr) _func));
                *tmp32 = mmc_mk_cons(__omcQ_24tmpVar50,0);
                tmp32 = &MMC_CDR(*tmp32);
              } else if (tmp34 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp32 = mmc_mk_nil();
            tmpMeta31 = __omcQ_24tmpVar51;
          }
          tmpMeta35 = mmc_mk_box4(15, &NFExpression_RECORD__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), tmpMeta31);
          tmpMeta1 = tmpMeta35;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta36;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta36 = mmc_mk_box2(16, &NFExpression_CALL__desc, omc_NFCall_mapExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func)));
          tmpMeta1 = tmpMeta36;
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          modelica_boolean tmp40;
          modelica_metatype tmpMeta41;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,2) == 0) goto tmp3_end;
          tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (optionNone(tmpMeta37)) goto tmp3_end;
          tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 1));
          _e2 = tmpMeta38;
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));

          _e3 = omc_NFExpression_mapReverse(threadData, _e2, ((modelica_fnptr) _func));
          tmp40 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1) && referenceEq(_e2, _e3));
          if(tmp40)
          {
            tmpMeta41 = _exp;
          }
          else
          {
            tmpMeta39 = mmc_mk_box3(17, &NFExpression_SIZE__desc, _e1, mmc_mk_some(_e3));
            tmpMeta41 = tmpMeta39;
          }
          tmpMeta1 = tmpMeta41;
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta42;
          modelica_boolean tmp43;
          modelica_metatype tmpMeta44;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          tmp43 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
          if(tmp43)
          {
            tmpMeta44 = _exp;
          }
          else
          {
            tmpMeta42 = mmc_mk_box3(17, &NFExpression_SIZE__desc, _e1, mmc_mk_none());
            tmpMeta44 = tmpMeta42;
          }
          tmpMeta1 = tmpMeta44;
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta45;
          modelica_boolean tmp46;
          modelica_metatype tmpMeta47;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));

          _e2 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func));
          tmp46 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _e2));
          if(tmp46)
          {
            tmpMeta47 = _exp;
          }
          else
          {
            tmpMeta45 = mmc_mk_box4(19, &NFExpression_BINARY__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e2);
            tmpMeta47 = tmpMeta45;
          }
          tmpMeta1 = tmpMeta47;
          goto tmp3_done;
        }
        case 12: {
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta49;
          modelica_metatype tmpMeta53;
          modelica_metatype tmpMeta54;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar53;
            modelica_metatype* tmp50;
            modelica_metatype tmpMeta51;
            modelica_metatype __omcQ_24tmpVar52;
            modelica_integer tmp52;
            modelica_metatype _arg_loopVar = 0;
            modelica_metatype _arg;
            _arg_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
            tmpMeta51 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar53 = tmpMeta51; /* defaultValue */
            tmp50 = &__omcQ_24tmpVar53;
            while(1) {
              tmp52 = 1;
              if (!listEmpty(_arg_loopVar)) {
                _arg = MMC_CAR(_arg_loopVar);
                _arg_loopVar = MMC_CDR(_arg_loopVar);
                tmp52--;
              }
              if (tmp52 == 0) {
                __omcQ_24tmpVar52 = omc_NFExpression_mapReverse(threadData, _arg, ((modelica_fnptr) _func));
                *tmp50 = mmc_mk_cons(__omcQ_24tmpVar52,0);
                tmp50 = &MMC_CDR(*tmp50);
              } else if (tmp52 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp50 = mmc_mk_nil();
            tmpMeta49 = __omcQ_24tmpVar53;
          }
          tmpMeta48 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta48), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta48))[2] = tmpMeta49;
          _exp = tmpMeta48;

          {
            modelica_metatype __omcQ_24tmpVar55;
            modelica_metatype* tmp55;
            modelica_metatype tmpMeta56;
            modelica_metatype __omcQ_24tmpVar54;
            modelica_integer tmp57;
            modelica_metatype _arg_loopVar = 0;
            modelica_metatype _arg;
            _arg_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta56 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar55 = tmpMeta56; /* defaultValue */
            tmp55 = &__omcQ_24tmpVar55;
            while(1) {
              tmp57 = 1;
              if (!listEmpty(_arg_loopVar)) {
                _arg = MMC_CAR(_arg_loopVar);
                _arg_loopVar = MMC_CDR(_arg_loopVar);
                tmp57--;
              }
              if (tmp57 == 0) {
                __omcQ_24tmpVar54 = omc_NFExpression_mapReverse(threadData, _arg, ((modelica_fnptr) _func));
                *tmp55 = mmc_mk_cons(__omcQ_24tmpVar54,0);
                tmp55 = &MMC_CDR(*tmp55);
              } else if (tmp57 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp55 = mmc_mk_nil();
            tmpMeta54 = __omcQ_24tmpVar55;
          }
          tmpMeta53 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta53), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta53))[3] = tmpMeta54;
          _exp = tmpMeta53;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 13: {
          modelica_metatype tmpMeta58;
          modelica_boolean tmp59;
          modelica_metatype tmpMeta60;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          tmp59 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1);
          if(tmp59)
          {
            tmpMeta60 = _exp;
          }
          else
          {
            tmpMeta58 = mmc_mk_box3(20, &NFExpression_UNARY__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
            tmpMeta60 = tmpMeta58;
          }
          tmpMeta1 = tmpMeta60;
          goto tmp3_done;
        }
        case 14: {
          modelica_metatype tmpMeta61;
          modelica_boolean tmp62;
          modelica_metatype tmpMeta63;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));

          _e2 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func));
          tmp62 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _e2));
          if(tmp62)
          {
            tmpMeta63 = _exp;
          }
          else
          {
            tmpMeta61 = mmc_mk_box4(21, &NFExpression_LBINARY__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e2);
            tmpMeta63 = tmpMeta61;
          }
          tmpMeta1 = tmpMeta63;
          goto tmp3_done;
        }
        case 15: {
          modelica_metatype tmpMeta64;
          modelica_boolean tmp65;
          modelica_metatype tmpMeta66;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          tmp65 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1);
          if(tmp65)
          {
            tmpMeta66 = _exp;
          }
          else
          {
            tmpMeta64 = mmc_mk_box3(22, &NFExpression_LUNARY__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
            tmpMeta66 = tmpMeta64;
          }
          tmpMeta1 = tmpMeta66;
          goto tmp3_done;
        }
        case 16: {
          modelica_metatype tmpMeta67;
          modelica_boolean tmp68;
          modelica_metatype tmpMeta69;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));

          _e2 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func));
          tmp68 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _e2));
          if(tmp68)
          {
            tmpMeta69 = _exp;
          }
          else
          {
            tmpMeta67 = mmc_mk_box5(23, &NFExpression_RELATION__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e2, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
            tmpMeta69 = tmpMeta67;
          }
          tmpMeta1 = tmpMeta69;
          goto tmp3_done;
        }
        case 17: {
          modelica_metatype tmpMeta70;
          modelica_boolean tmp71;
          modelica_metatype tmpMeta72;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));

          _e2 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func));

          _e3 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), ((modelica_fnptr) _func));
          tmp71 = (modelica_boolean)((referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _e2)) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _e3));
          if(tmp71)
          {
            tmpMeta72 = _exp;
          }
          else
          {
            tmpMeta70 = mmc_mk_box5(25, &NFExpression_IF__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1, _e2, _e3);
            tmpMeta72 = tmpMeta70;
          }
          tmpMeta1 = tmpMeta72;
          goto tmp3_done;
        }
        case 18: {
          modelica_metatype tmpMeta73;
          modelica_boolean tmp74;
          modelica_metatype tmpMeta75;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,23,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          tmp74 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1);
          if(tmp74)
          {
            tmpMeta75 = _exp;
          }
          else
          {
            tmpMeta73 = mmc_mk_box3(26, &NFExpression_CAST__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
            tmpMeta75 = tmpMeta73;
          }
          tmpMeta1 = tmpMeta75;
          goto tmp3_done;
        }
        case 19: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          tmpMeta1 = (referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1)?_exp:omc_NFExpression_box(threadData, _e1));
          goto tmp3_done;
        }
        case 20: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,25,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          tmpMeta1 = (referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1)?_exp:omc_NFExpression_unbox(threadData, _e1));
          goto tmp3_done;
        }
        case 21: {
          modelica_metatype tmpMeta76;
          modelica_metatype tmpMeta80;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar57;
            modelica_metatype* tmp77;
            modelica_metatype tmpMeta78;
            modelica_metatype __omcQ_24tmpVar56;
            modelica_integer tmp79;
            modelica_metatype _s_loopVar = 0;
            modelica_metatype _s;
            _s_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta78 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar57 = tmpMeta78; /* defaultValue */
            tmp77 = &__omcQ_24tmpVar57;
            while(1) {
              tmp79 = 1;
              if (!listEmpty(_s_loopVar)) {
                _s = MMC_CAR(_s_loopVar);
                _s_loopVar = MMC_CDR(_s_loopVar);
                tmp79--;
              }
              if (tmp79 == 0) {
                __omcQ_24tmpVar56 = omc_NFSubscript_mapExp(threadData, _s, ((modelica_fnptr) _func));
                *tmp77 = mmc_mk_cons(__omcQ_24tmpVar56,0);
                tmp77 = &MMC_CDR(*tmp77);
              } else if (tmp79 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp77 = mmc_mk_nil();
            tmpMeta76 = __omcQ_24tmpVar57;
          }
          tmpMeta80 = mmc_mk_box5(29, &NFExpression_SUBSCRIPTED__EXP__desc, omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func)), tmpMeta76, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
          tmpMeta1 = tmpMeta80;
          goto tmp3_done;
        }
        case 22: {
          modelica_metatype tmpMeta81;
          modelica_boolean tmp82;
          modelica_metatype tmpMeta83;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          tmp82 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
          if(tmp82)
          {
            tmpMeta83 = _exp;
          }
          else
          {
            tmpMeta81 = mmc_mk_box4(30, &NFExpression_TUPLE__ELEMENT__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
            tmpMeta83 = tmpMeta81;
          }
          tmpMeta1 = tmpMeta83;
          goto tmp3_done;
        }
        case 23: {
          modelica_metatype tmpMeta84;
          modelica_boolean tmp85;
          modelica_metatype tmpMeta86;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,28,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          tmp85 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
          if(tmp85)
          {
            tmpMeta86 = _exp;
          }
          else
          {
            tmpMeta84 = mmc_mk_box5(31, &NFExpression_RECORD__ELEMENT__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
            tmpMeta86 = tmpMeta84;
          }
          tmpMeta1 = tmpMeta86;
          goto tmp3_done;
        }
        case 24: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,29,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          omc_Mutable_update(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), omc_NFExpression_mapReverse(threadData, omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), ((modelica_fnptr) _func)));
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 25: {
          modelica_metatype tmpMeta87;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,33,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta87 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta87), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta87))[3] = omc_NFExpression_mapReverse(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          _exp = tmpMeta87;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 26: {
          modelica_metatype tmpMeta88;
          modelica_metatype tmpMeta89;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,31,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar59;
            modelica_metatype* tmp90;
            modelica_metatype tmpMeta91;
            modelica_metatype __omcQ_24tmpVar58;
            modelica_integer tmp92;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta91 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar59 = tmpMeta91; /* defaultValue */
            tmp90 = &__omcQ_24tmpVar59;
            while(1) {
              tmp92 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp92--;
              }
              if (tmp92 == 0) {
                __omcQ_24tmpVar58 = omc_NFExpression_mapReverse(threadData, _e, ((modelica_fnptr) _func));
                *tmp90 = mmc_mk_cons(__omcQ_24tmpVar58,0);
                tmp90 = &MMC_CDR(*tmp90);
              } else if (tmp92 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp90 = mmc_mk_nil();
            tmpMeta89 = __omcQ_24tmpVar59;
          }
          tmpMeta88 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta88), MMC_UNTAGPTR(_exp), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta88))[3] = tmpMeta89;
          _exp = tmpMeta88;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 27: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_mapOpt(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _e = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _e has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (optionNone(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
          _e = tmpMeta6;
          /* Pattern matching succeeded */
          tmpMeta1 = mmc_mk_some(omc_NFExpression_map(threadData, _e, ((modelica_fnptr) _func)));
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_fakeMap(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func)
{
  modelica_metatype _outExp = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _outExp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _exp) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _exp);
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

static modelica_metatype closure23_NFExpression_map(threadData_t *thData, modelica_metatype closure, modelica_metatype exp)
{
  modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_map(thData, exp, func);
}
DLLDirection
modelica_metatype omc_NFExpression_map(threadData_t *threadData, modelica_metatype _exp, modelica_fnptr _func)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _e3 = NULL;
      modelica_metatype _e4 = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e1 has no default value.
      // _e2 has no default value.
      // _e3 has no default value.
      // _e4 has no default value.
      tmp4 = 0;
      for (; tmp4 < 28; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta6 = mmc_mk_box2(8, &NFExpression_CLKCONST__desc, omc_NFClockKind_mapExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func)));
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta7 = mmc_mk_box3(9, &NFExpression_CREF__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), omc_NFComponentRef_mapExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func)));
          tmpMeta1 = tmpMeta7;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(!mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))))) goto tmp3_end;
          tmpMeta8 = mmc_mk_box1(0, ((modelica_fnptr) _func));
          tmpMeta1 = omc_NFExpression_makeArray(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), omc_Array_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (modelica_fnptr) mmc_mk_box2(0,closure23_NFExpression_map,tmpMeta8)), mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))));
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta17;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar63;
            modelica_metatype* tmp10;
            modelica_metatype tmpMeta11;
            modelica_metatype tmpMeta12;
            modelica_metatype __omcQ_24tmpVar62;
            modelica_integer tmp16;
            modelica_metatype _row_loopVar = 0;
            modelica_metatype _row;
            _row_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
            tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar63 = tmpMeta11; /* defaultValue */
            tmp10 = &__omcQ_24tmpVar63;
            while(1) {
              tmp16 = 1;
              if (!listEmpty(_row_loopVar)) {
                _row = MMC_CAR(_row_loopVar);
                _row_loopVar = MMC_CDR(_row_loopVar);
                tmp16--;
              }
              if (tmp16 == 0) {
                {
                  modelica_metatype __omcQ_24tmpVar61;
                  modelica_metatype* tmp13;
                  modelica_metatype tmpMeta14;
                  modelica_metatype __omcQ_24tmpVar60;
                  modelica_integer tmp15;
                  modelica_metatype _e_loopVar = 0;
                  modelica_metatype _e;
                  _e_loopVar = _row;
                  tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
                  __omcQ_24tmpVar61 = tmpMeta14; /* defaultValue */
                  tmp13 = &__omcQ_24tmpVar61;
                  while(1) {
                    tmp15 = 1;
                    if (!listEmpty(_e_loopVar)) {
                      _e = MMC_CAR(_e_loopVar);
                      _e_loopVar = MMC_CDR(_e_loopVar);
                      tmp15--;
                    }
                    if (tmp15 == 0) {
                      __omcQ_24tmpVar60 = omc_NFExpression_map(threadData, _e, ((modelica_fnptr) _func));
                      *tmp13 = mmc_mk_cons(__omcQ_24tmpVar60,0);
                      tmp13 = &MMC_CDR(*tmp13);
                    } else if (tmp15 == 1) {
                      break;
                    } else {
                      goto goto_2;
                    }
                  }
                  *tmp13 = mmc_mk_nil();
                  tmpMeta12 = __omcQ_24tmpVar61;
                }
                __omcQ_24tmpVar62 = tmpMeta12;
                *tmp10 = mmc_mk_cons(__omcQ_24tmpVar62,0);
                tmp10 = &MMC_CDR(*tmp10);
              } else if (tmp16 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp10 = mmc_mk_nil();
            tmpMeta9 = __omcQ_24tmpVar63;
          }
          tmpMeta17 = mmc_mk_box2(12, &NFExpression_MATRIX__desc, tmpMeta9);
          tmpMeta1 = tmpMeta17;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_boolean tmp21;
          modelica_metatype tmpMeta22;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          if (optionNone(tmpMeta18)) goto tmp3_end;
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 1));
          
          _e2 = tmpMeta19;
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));

          _e4 = omc_NFExpression_map(threadData, _e2, ((modelica_fnptr) _func));

          _e3 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), ((modelica_fnptr) _func));
          tmp21 = (modelica_boolean)((referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1) && referenceEq(_e2, _e4)) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _e3));
          if(tmp21)
          {
            tmpMeta22 = _exp;
          }
          else
          {
            tmpMeta20 = mmc_mk_box5(13, &NFExpression_RANGE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1, mmc_mk_some(_e4), _e3);
            tmpMeta22 = tmpMeta20;
          }
          tmpMeta1 = tmpMeta22;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta23;
          modelica_boolean tmp24;
          modelica_metatype tmpMeta25;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));

          _e3 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), ((modelica_fnptr) _func));
          tmp24 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _e3));
          if(tmp24)
          {
            tmpMeta25 = _exp;
          }
          else
          {
            tmpMeta23 = mmc_mk_box5(13, &NFExpression_RANGE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1, mmc_mk_none(), _e3);
            tmpMeta25 = tmpMeta23;
          }
          tmpMeta1 = tmpMeta25;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta26;
          modelica_metatype tmpMeta30;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar65;
            modelica_metatype* tmp27;
            modelica_metatype tmpMeta28;
            modelica_metatype __omcQ_24tmpVar64;
            modelica_integer tmp29;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta28 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar65 = tmpMeta28; /* defaultValue */
            tmp27 = &__omcQ_24tmpVar65;
            while(1) {
              tmp29 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp29--;
              }
              if (tmp29 == 0) {
                __omcQ_24tmpVar64 = omc_NFExpression_map(threadData, _e, ((modelica_fnptr) _func));
                *tmp27 = mmc_mk_cons(__omcQ_24tmpVar64,0);
                tmp27 = &MMC_CDR(*tmp27);
              } else if (tmp29 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp27 = mmc_mk_nil();
            tmpMeta26 = __omcQ_24tmpVar65;
          }
          tmpMeta30 = mmc_mk_box3(14, &NFExpression_TUPLE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), tmpMeta26);
          tmpMeta1 = tmpMeta30;
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta35;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar67;
            modelica_metatype* tmp32;
            modelica_metatype tmpMeta33;
            modelica_metatype __omcQ_24tmpVar66;
            modelica_integer tmp34;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)));
            tmpMeta33 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar67 = tmpMeta33; /* defaultValue */
            tmp32 = &__omcQ_24tmpVar67;
            while(1) {
              tmp34 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp34--;
              }
              if (tmp34 == 0) {
                __omcQ_24tmpVar66 = omc_NFExpression_map(threadData, _e, ((modelica_fnptr) _func));
                *tmp32 = mmc_mk_cons(__omcQ_24tmpVar66,0);
                tmp32 = &MMC_CDR(*tmp32);
              } else if (tmp34 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp32 = mmc_mk_nil();
            tmpMeta31 = __omcQ_24tmpVar67;
          }
          tmpMeta35 = mmc_mk_box4(15, &NFExpression_RECORD__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), tmpMeta31);
          tmpMeta1 = tmpMeta35;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta36;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta36 = mmc_mk_box2(16, &NFExpression_CALL__desc, omc_NFCall_mapExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func)));
          tmpMeta1 = tmpMeta36;
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta39;
          modelica_boolean tmp40;
          modelica_metatype tmpMeta41;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,2) == 0) goto tmp3_end;
          tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (optionNone(tmpMeta37)) goto tmp3_end;
          tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 1));
          _e2 = tmpMeta38;
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));

          _e3 = omc_NFExpression_map(threadData, _e2, ((modelica_fnptr) _func));
          tmp40 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1) && referenceEq(_e2, _e3));
          if(tmp40)
          {
            tmpMeta41 = _exp;
          }
          else
          {
            tmpMeta39 = mmc_mk_box3(17, &NFExpression_SIZE__desc, _e1, mmc_mk_some(_e3));
            tmpMeta41 = tmpMeta39;
          }
          tmpMeta1 = tmpMeta41;
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta42;
          modelica_boolean tmp43;
          modelica_metatype tmpMeta44;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          tmp43 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
          if(tmp43)
          {
            tmpMeta44 = _exp;
          }
          else
          {
            tmpMeta42 = mmc_mk_box3(17, &NFExpression_SIZE__desc, _e1, mmc_mk_none());
            tmpMeta44 = tmpMeta42;
          }
          tmpMeta1 = tmpMeta44;
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta45;
          modelica_boolean tmp46;
          modelica_metatype tmpMeta47;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));

          _e2 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func));
          tmp46 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _e2));
          if(tmp46)
          {
            tmpMeta47 = _exp;
          }
          else
          {
            tmpMeta45 = mmc_mk_box4(19, &NFExpression_BINARY__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e2);
            tmpMeta47 = tmpMeta45;
          }
          tmpMeta1 = tmpMeta47;
          goto tmp3_done;
        }
        case 12: {
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta49;
          modelica_metatype tmpMeta53;
          modelica_metatype tmpMeta54;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar69;
            modelica_metatype* tmp50;
            modelica_metatype tmpMeta51;
            modelica_metatype __omcQ_24tmpVar68;
            modelica_integer tmp52;
            modelica_metatype _arg_loopVar = 0;
            modelica_metatype _arg;
            _arg_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
            tmpMeta51 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar69 = tmpMeta51; /* defaultValue */
            tmp50 = &__omcQ_24tmpVar69;
            while(1) {
              tmp52 = 1;
              if (!listEmpty(_arg_loopVar)) {
                _arg = MMC_CAR(_arg_loopVar);
                _arg_loopVar = MMC_CDR(_arg_loopVar);
                tmp52--;
              }
              if (tmp52 == 0) {
                __omcQ_24tmpVar68 = omc_NFExpression_map(threadData, _arg, ((modelica_fnptr) _func));
                *tmp50 = mmc_mk_cons(__omcQ_24tmpVar68,0);
                tmp50 = &MMC_CDR(*tmp50);
              } else if (tmp52 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp50 = mmc_mk_nil();
            tmpMeta49 = __omcQ_24tmpVar69;
          }
          tmpMeta48 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta48), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta48))[2] = tmpMeta49;
          _exp = tmpMeta48;

          {
            modelica_metatype __omcQ_24tmpVar71;
            modelica_metatype* tmp55;
            modelica_metatype tmpMeta56;
            modelica_metatype __omcQ_24tmpVar70;
            modelica_integer tmp57;
            modelica_metatype _arg_loopVar = 0;
            modelica_metatype _arg;
            _arg_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta56 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar71 = tmpMeta56; /* defaultValue */
            tmp55 = &__omcQ_24tmpVar71;
            while(1) {
              tmp57 = 1;
              if (!listEmpty(_arg_loopVar)) {
                _arg = MMC_CAR(_arg_loopVar);
                _arg_loopVar = MMC_CDR(_arg_loopVar);
                tmp57--;
              }
              if (tmp57 == 0) {
                __omcQ_24tmpVar70 = omc_NFExpression_map(threadData, _arg, ((modelica_fnptr) _func));
                *tmp55 = mmc_mk_cons(__omcQ_24tmpVar70,0);
                tmp55 = &MMC_CDR(*tmp55);
              } else if (tmp57 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp55 = mmc_mk_nil();
            tmpMeta54 = __omcQ_24tmpVar71;
          }
          tmpMeta53 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta53), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta53))[3] = tmpMeta54;
          _exp = tmpMeta53;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 13: {
          modelica_metatype tmpMeta58;
          modelica_boolean tmp59;
          modelica_metatype tmpMeta60;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          tmp59 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1);
          if(tmp59)
          {
            tmpMeta60 = _exp;
          }
          else
          {
            tmpMeta58 = mmc_mk_box3(20, &NFExpression_UNARY__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
            tmpMeta60 = tmpMeta58;
          }
          tmpMeta1 = tmpMeta60;
          goto tmp3_done;
        }
        case 14: {
          modelica_metatype tmpMeta61;
          modelica_boolean tmp62;
          modelica_metatype tmpMeta63;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));

          _e2 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func));
          tmp62 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _e2));
          if(tmp62)
          {
            tmpMeta63 = _exp;
          }
          else
          {
            tmpMeta61 = mmc_mk_box4(21, &NFExpression_LBINARY__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e2);
            tmpMeta63 = tmpMeta61;
          }
          tmpMeta1 = tmpMeta63;
          goto tmp3_done;
        }
        case 15: {
          modelica_metatype tmpMeta64;
          modelica_boolean tmp65;
          modelica_metatype tmpMeta66;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          tmp65 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1);
          if(tmp65)
          {
            tmpMeta66 = _exp;
          }
          else
          {
            tmpMeta64 = mmc_mk_box3(22, &NFExpression_LUNARY__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
            tmpMeta66 = tmpMeta64;
          }
          tmpMeta1 = tmpMeta66;
          goto tmp3_done;
        }
        case 16: {
          modelica_metatype tmpMeta67;
          modelica_boolean tmp68;
          modelica_metatype tmpMeta69;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));

          _e2 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func));
          tmp68 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _e2));
          if(tmp68)
          {
            tmpMeta69 = _exp;
          }
          else
          {
            tmpMeta67 = mmc_mk_box5(23, &NFExpression_RELATION__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e2, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
            tmpMeta69 = tmpMeta67;
          }
          tmpMeta1 = tmpMeta69;
          goto tmp3_done;
        }
        case 17: {
          modelica_metatype tmpMeta70;
          modelica_boolean tmp71;
          modelica_metatype tmpMeta72;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));

          _e2 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), ((modelica_fnptr) _func));

          _e3 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), ((modelica_fnptr) _func));
          tmp71 = (modelica_boolean)((referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _e2)) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _e3));
          if(tmp71)
          {
            tmpMeta72 = _exp;
          }
          else
          {
            tmpMeta70 = mmc_mk_box5(25, &NFExpression_IF__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1, _e2, _e3);
            tmpMeta72 = tmpMeta70;
          }
          tmpMeta1 = tmpMeta72;
          goto tmp3_done;
        }
        case 18: {
          modelica_metatype tmpMeta73;
          modelica_boolean tmp74;
          modelica_metatype tmpMeta75;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,23,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          tmp74 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1);
          if(tmp74)
          {
            tmpMeta75 = _exp;
          }
          else
          {
            tmpMeta73 = mmc_mk_box3(26, &NFExpression_CAST__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
            tmpMeta75 = tmpMeta73;
          }
          tmpMeta1 = tmpMeta75;
          goto tmp3_done;
        }
        case 19: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          tmpMeta1 = (referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1)?_exp:omc_NFExpression_box(threadData, _e1));
          goto tmp3_done;
        }
        case 20: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,25,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          tmpMeta1 = (referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1)?_exp:omc_NFExpression_unbox(threadData, _e1));
          goto tmp3_done;
        }
        case 21: {
          modelica_metatype tmpMeta76;
          modelica_metatype tmpMeta80;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar73;
            modelica_metatype* tmp77;
            modelica_metatype tmpMeta78;
            modelica_metatype __omcQ_24tmpVar72;
            modelica_integer tmp79;
            modelica_metatype _s_loopVar = 0;
            modelica_metatype _s;
            _s_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta78 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar73 = tmpMeta78; /* defaultValue */
            tmp77 = &__omcQ_24tmpVar73;
            while(1) {
              tmp79 = 1;
              if (!listEmpty(_s_loopVar)) {
                _s = MMC_CAR(_s_loopVar);
                _s_loopVar = MMC_CDR(_s_loopVar);
                tmp79--;
              }
              if (tmp79 == 0) {
                __omcQ_24tmpVar72 = omc_NFSubscript_mapExp(threadData, _s, ((modelica_fnptr) _func));
                *tmp77 = mmc_mk_cons(__omcQ_24tmpVar72,0);
                tmp77 = &MMC_CDR(*tmp77);
              } else if (tmp79 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp77 = mmc_mk_nil();
            tmpMeta76 = __omcQ_24tmpVar73;
          }
          tmpMeta80 = mmc_mk_box5(29, &NFExpression_SUBSCRIPTED__EXP__desc, omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func)), tmpMeta76, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
          tmpMeta1 = tmpMeta80;
          goto tmp3_done;
        }
        case 22: {
          modelica_metatype tmpMeta81;
          modelica_boolean tmp82;
          modelica_metatype tmpMeta83;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          tmp82 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
          if(tmp82)
          {
            tmpMeta83 = _exp;
          }
          else
          {
            tmpMeta81 = mmc_mk_box4(30, &NFExpression_TUPLE__ELEMENT__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
            tmpMeta83 = tmpMeta81;
          }
          tmpMeta1 = tmpMeta83;
          goto tmp3_done;
        }
        case 23: {
          modelica_metatype tmpMeta84;
          modelica_boolean tmp85;
          modelica_metatype tmpMeta86;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,28,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          tmp85 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _e1);
          if(tmp85)
          {
            tmpMeta86 = _exp;
          }
          else
          {
            tmpMeta84 = mmc_mk_box5(31, &NFExpression_RECORD__ELEMENT__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
            tmpMeta86 = tmpMeta84;
          }
          tmpMeta1 = tmpMeta86;
          goto tmp3_done;
        }
        case 24: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,29,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          omc_Mutable_update(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), omc_NFExpression_map(threadData, omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), ((modelica_fnptr) _func)));
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 25: {
          modelica_metatype tmpMeta87;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,33,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta87 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta87), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta87))[3] = omc_NFExpression_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          _exp = tmpMeta87;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 26: {
          modelica_metatype tmpMeta88;
          modelica_metatype tmpMeta89;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,31,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar75;
            modelica_metatype* tmp90;
            modelica_metatype tmpMeta91;
            modelica_metatype __omcQ_24tmpVar74;
            modelica_integer tmp92;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta91 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar75 = tmpMeta91; /* defaultValue */
            tmp90 = &__omcQ_24tmpVar75;
            while(1) {
              tmp92 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp92--;
              }
              if (tmp92 == 0) {
                __omcQ_24tmpVar74 = omc_NFExpression_map(threadData, _e, ((modelica_fnptr) _func));
                *tmp90 = mmc_mk_cons(__omcQ_24tmpVar74,0);
                tmp90 = &MMC_CDR(*tmp90);
              } else if (tmp92 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp90 = mmc_mk_nil();
            tmpMeta89 = __omcQ_24tmpVar75;
          }
          tmpMeta88 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta88), MMC_UNTAGPTR(_exp), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta88))[3] = tmpMeta89;
          _exp = tmpMeta88;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 27: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;

  _outExp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _outExp) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _outExp);
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_dimensions(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_metatype _dims = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _dims has no default value.
  _dims = omc_NFType_arrayDims(threadData, omc_NFExpression_typeOf(threadData, _exp));
  _return: OMC_LABEL_UNUSED
  return _dims;
}

DLLDirection
modelica_integer omc_NFExpression_dimensionCount(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_integer _dimCount;
  modelica_integer tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _dimCount has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 8; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,10,0) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 1) + omc_NFExpression_dimensionCount(threadData, arrayGet((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_integer) 1)));
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFType_dimensionCount(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 2: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFType_dimensionCount(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,2) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (!optionNone(tmpMeta7)) goto tmp3_end;
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 4: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,23,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 5: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFType_dimensionCount(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          goto tmp3_done;
        }
        case 6: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFType_dimensionCount(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          goto tmp3_done;
        }
        case 7: {
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 0);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _dimCount = tmp1;
  _return: OMC_LABEL_UNUSED
  return _dimCount;
}
modelica_metatype boxptr_NFExpression_dimensionCount(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_integer _dimCount;
  modelica_metatype out_dimCount;
  _dimCount = omc_NFExpression_dimensionCount(threadData, _exp);
  out_dimCount = mmc_mk_icon(_dimCount);
  return out_dimCount;
}

DLLDirection
modelica_metatype omc_NFExpression_toDAEValueRecord(threadData_t *threadData, modelica_metatype _ty, modelica_metatype _path, modelica_metatype _args)
{
  modelica_metatype _value = NULL;
  modelica_metatype _field_names = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _arg = NULL;
  modelica_metatype _rest_args = NULL;
  modelica_metatype _values = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _value has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _field_names = tmpMeta1;
  // _arg has no default value.
  _rest_args = _args;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _values = tmpMeta2;
  {
    modelica_metatype _field;
    for (tmpMeta3 = omc_NFType_recordFields(threadData, _ty); !listEmpty(tmpMeta3); tmpMeta3=MMC_CDR(tmpMeta3))
    {
      _field = MMC_CAR(tmpMeta3);
      /* Pattern-matching assignment */
      tmpMeta4 = _rest_args;
      if (listEmpty(tmpMeta4)) MMC_THROW_INTERNAL();
      tmpMeta5 = MMC_CAR(tmpMeta4);
      tmpMeta6 = MMC_CDR(tmpMeta4);
      _arg = tmpMeta5;
      _rest_args = tmpMeta6;

      { /* match expression */
        modelica_metatype tmp9_1;
        tmp9_1 = _field;
        {
          volatile mmc_switch_type tmp9;
          int tmp10;
          tmp9 = 0;
          for (; tmp9 < 2; tmp9++) {
            switch (MMC_SWITCH_CAST(tmp9)) {
            case 0: {
              modelica_metatype tmpMeta11;
              modelica_metatype tmpMeta12;
              if (mmc__uniontype__metarecord__typedef__equal(tmp9_1,0,1) == 0) goto tmp8_end;
              
              /* Pattern matching succeeded */
              tmpMeta11 = mmc_mk_cons((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_field), 2))), _field_names);
              _field_names = tmpMeta11;

              tmpMeta12 = mmc_mk_cons(omc_NFExpression_toDAEValue(threadData, _arg), _values);
              _values = tmpMeta12;
              goto tmp8_done;
            }
            case 1: {
              
              /* Pattern matching succeeded */
              goto tmp8_done;
            }
            }
            goto tmp8_end;
            tmp8_end: ;
          }
          goto goto_7;
          goto_7:;
          MMC_THROW_INTERNAL();
          goto tmp8_done;
          tmp8_done:;
        }
      }
      ;
    }
  }

  _field_names = listReverseInPlace(_field_names);

  _values = listReverseInPlace(_values);

  tmpMeta14 = mmc_mk_box5(13, &Values_Value_RECORD__desc, _path, _values, _field_names, mmc_mk_integer(((modelica_integer) -1)));
  _value = tmpMeta14;
  _return: OMC_LABEL_UNUSED
  return _value;
}

DLLDirection
modelica_metatype omc_NFExpression_toDAEValue(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_metatype _value = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _value has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _ty = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _ty has no default value.
      tmp4 = 0;
      for (; tmp4 < 9; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta6 = mmc_mk_box2(3, &Values_Value_INTEGER__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta7 = mmc_mk_box2(4, &Values_Value_REAL__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          tmpMeta1 = tmpMeta7;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta8 = mmc_mk_box2(5, &Values_Value_STRING__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          tmpMeta1 = tmpMeta8;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta9 = mmc_mk_box2(6, &Values_Value_BOOL__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,3) == 0) goto tmp3_end;
          tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,5,2) == 0) goto tmp3_end;
          
          _ty = tmpMeta10;
          /* Pattern matching succeeded */
          tmpMeta11 = mmc_mk_box3(7, &Values_Value_ENUM__LITERAL__desc, omc_AbsynUtil_suffixPath(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_ty), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          tmpMeta1 = tmpMeta11;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta12;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar77;
            modelica_metatype* tmp13;
            modelica_metatype tmpMeta14;
            modelica_metatype __omcQ_24tmpVar76;
            modelica_integer tmp15;
            modelica_metatype _e_loopVar = 0;
            modelica_integer tmp16;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmp16 = 1;
            tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar77 = tmpMeta14; /* defaultValue */
            tmp13 = &__omcQ_24tmpVar77;
            while(1) {
              tmp15 = 1;
              if (tmp16 <= arrayLength(_e_loopVar)) {
                _e = arrayGet(_e_loopVar, tmp16++);
                tmp15--;
              }
              if (tmp15 == 0) {
                __omcQ_24tmpVar76 = omc_NFExpression_toDAEValue(threadData, _e);
                *tmp13 = mmc_mk_cons(__omcQ_24tmpVar76,0);
                tmp13 = &MMC_CDR(*tmp13);
              } else if (tmp15 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp13 = mmc_mk_nil();
            tmpMeta12 = __omcQ_24tmpVar77;
          }
          tmpMeta1 = omc_ValuesUtil_makeArray(threadData, tmpMeta12);
          goto tmp3_done;
        }
        case 6: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_toDAEValueRecord(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta17;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,32,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta17 = mmc_mk_box2(5, &Values_Value_STRING__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          tmpMeta1 = tmpMeta17;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta18;
          
          /* Pattern matching succeeded */
          tmpMeta18 = stringAppend(_OMC_LIT104,omc_NFExpression_toString(threadData, _exp));
          omc_Error_assertion(threadData, 0 /* false */, tmpMeta18, _OMC_LIT105);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _value = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _value;
}

DLLDirection
modelica_metatype omc_NFExpression_toDAERecord(threadData_t *threadData, modelica_metatype _ty, modelica_metatype _path, modelica_metatype _args)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _field_names = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype _arg = NULL;
  modelica_metatype _rest_args = NULL;
  modelica_metatype _dargs = NULL;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  modelica_metatype tmpMeta16;
  modelica_metatype tmpMeta17;
  modelica_boolean tmp18;
  modelica_metatype tmpMeta19;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _exp has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  _field_names = tmpMeta1;
  // _arg has no default value.
  _rest_args = _args;
  tmpMeta2 = MMC_REFSTRUCTLIT(mmc_nil);
  _dargs = tmpMeta2;
  {
    modelica_metatype _field;
    for (tmpMeta3 = omc_NFType_recordFields(threadData, omc_NFType_unbox(threadData, _ty)); !listEmpty(tmpMeta3); tmpMeta3=MMC_CDR(tmpMeta3))
    {
      _field = MMC_CAR(tmpMeta3);
      /* Pattern-matching assignment */
      tmpMeta4 = _rest_args;
      if (listEmpty(tmpMeta4)) MMC_THROW_INTERNAL();
      tmpMeta5 = MMC_CAR(tmpMeta4);
      tmpMeta6 = MMC_CDR(tmpMeta4);
      _arg = tmpMeta5;
      _rest_args = tmpMeta6;

      { /* match expression */
        modelica_metatype tmp9_1;
        tmp9_1 = _field;
        {
          int tmp9;
          {
            switch (MMC_SWITCH_CAST(valueConstructor(tmp9_1))) {
            case 3: {
              modelica_metatype tmpMeta10;
              modelica_metatype tmpMeta11;
              
              /* Pattern matching succeeded */
              tmpMeta10 = mmc_mk_cons((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_field), 2))), _field_names);
              _field_names = tmpMeta10;

              tmpMeta11 = mmc_mk_cons(omc_NFExpression_toDAE(threadData, _arg), _dargs);
              _dargs = tmpMeta11;
              goto tmp8_done;
            }
            case 4: {
              modelica_metatype tmpMeta12;
              modelica_metatype tmpMeta13;
              
              /* Pattern matching succeeded */
              tmpMeta12 = mmc_mk_cons((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_field), 2))), _field_names);
              _field_names = tmpMeta12;

              tmpMeta13 = mmc_mk_cons(omc_NFExpression_toDAE(threadData, _arg), _dargs);
              _dargs = tmpMeta13;
              goto tmp8_done;
            }
            default:
            tmp8_default: OMC_LABEL_UNUSED; {
              
              /* Pattern matching succeeded */
              goto tmp8_done;
            }
            }
            goto tmp8_end;
            tmp8_end: ;
          }
          goto goto_7;
          goto_7:;
          MMC_THROW_INTERNAL();
          goto tmp8_done;
          tmp8_done:;
        }
      }
      ;
    }
  }

  _field_names = listReverseInPlace(_field_names);

  _dargs = listReverseInPlace(_dargs);

  tmp18 = (modelica_boolean)omc_NFType_isBoxed(threadData, _ty);
  if(tmp18)
  {
    tmpMeta15 = MMC_REFSTRUCTLIT(mmc_nil);
    tmpMeta16 = mmc_mk_box6(35, &DAE_Exp_METARECORDCALL__desc, _path, _dargs, _field_names, mmc_mk_integer(((modelica_integer) -1)), tmpMeta15);
    tmpMeta19 = tmpMeta16;
  }
  else
  {
    tmpMeta17 = mmc_mk_box5(17, &DAE_Exp_RECORD__desc, _path, _dargs, _field_names, omc_NFType_toDAE(threadData, _ty, 1 /* true */));
    tmpMeta19 = tmpMeta17;
  }
  _exp = tmpMeta19;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_toDAEMultaryArgs(threadData_t *threadData, modelica_metatype _arguments, modelica_metatype _operator)
{
  modelica_metatype _daeExp = NULL;
  modelica_metatype _daeOp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _daeExp has no default value.
  // _daeOp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _arguments;
    {
      modelica_metatype _arg = NULL;
      modelica_metatype _rest = NULL;
      modelica_metatype _exp = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _arg has no default value.
      // _rest has no default value.
      // _exp has no default value.
      tmp4 = 0;
      for (; tmp4 < 5; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(omc_NFOperator_getMathClassification(threadData, _operator) == 1)) goto tmp3_end;
          tmpMeta1 = omc_NFExpression_toDAE(threadData, omc_NFExpression_makeZero(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_operator), 2)))));
          goto tmp3_done;
        }
        case 1: {
          if (!listEmpty(tmp4_1)) goto tmp3_end;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(omc_NFOperator_getMathClassification(threadData, _operator) == 3)) goto tmp3_end;
          tmpMeta1 = omc_NFExpression_toDAE(threadData, omc_NFExpression_makeOne(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_operator), 2)))));
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_CAR(tmp4_1);
          tmpMeta7 = MMC_CDR(tmp4_1);
          if (!listEmpty(tmpMeta7)) goto tmp3_end;
          _arg = tmpMeta6;
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_toDAE(threadData, _arg);
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          if (listEmpty(tmp4_1)) goto tmp3_end;
          tmpMeta8 = MMC_CAR(tmp4_1);
          tmpMeta9 = MMC_CDR(tmp4_1);
          _arg = tmpMeta8;
          _rest = tmpMeta9;
          /* Pattern matching succeeded */
          _exp = omc_NFExpression_toDAE(threadData, _arg);

          _daeOp = omc_NFOperator_toDAE(threadData, _operator, NULL, NULL);
          tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta11 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _exp, _daeOp, omc_NFExpression_toDAEMultary(threadData, _rest, tmpMeta10, _operator));
          tmpMeta1 = tmpMeta11;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar79;
            modelica_metatype* tmp13;
            modelica_metatype tmpMeta14;
            modelica_string __omcQ_24tmpVar78;
            modelica_integer tmp15;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = _arguments;
            tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar79 = tmpMeta14; /* defaultValue */
            tmp13 = &__omcQ_24tmpVar79;
            while(1) {
              tmp15 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp15--;
              }
              if (tmp15 == 0) {
                __omcQ_24tmpVar78 = omc_NFExpression_toString(threadData, _e);
                *tmp13 = mmc_mk_cons(__omcQ_24tmpVar78,0);
                tmp13 = &MMC_CDR(*tmp13);
              } else if (tmp15 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp13 = mmc_mk_nil();
            tmpMeta12 = __omcQ_24tmpVar79;
          }
          tmpMeta16 = stringAppend(_OMC_LIT106,stringDelimitList(tmpMeta12, _OMC_LIT107));
          tmpMeta17 = stringAppend(tmpMeta16,_OMC_LIT108);
          omc_Error_assertion(threadData, 0 /* false */, tmpMeta17, _OMC_LIT109);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _daeExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _daeExp;
}

DLLDirection
modelica_metatype omc_NFExpression_toDAEMultary(threadData_t *threadData, modelica_metatype _arguments, modelica_metatype _inv_arguments, modelica_metatype _operator)
{
  modelica_metatype _daeExp = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _daeExp has no default value.
  if(listEmpty(_inv_arguments))
  {
    _daeExp = omc_NFExpression_toDAEMultaryArgs(threadData, _arguments, _operator);
  }
  else
  {
    if(omc_NFType_isBoolean(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_operator), 2)))))
    {
      tmpMeta1 = mmc_mk_box4(12, &DAE_Exp_LBINARY__desc, omc_NFExpression_toDAEMultaryArgs(threadData, _arguments, _operator), omc_NFOperator_toDAE(threadData, omc_NFOperator_invert(threadData, _operator), NULL, NULL), omc_NFExpression_toDAEMultaryArgs(threadData, _inv_arguments, _operator));
      _daeExp = tmpMeta1;
    }
    else
    {
      tmpMeta2 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, omc_NFExpression_toDAEMultaryArgs(threadData, _arguments, _operator), omc_NFOperator_toDAE(threadData, omc_NFOperator_invert(threadData, _operator), NULL, NULL), omc_NFExpression_toDAEMultaryArgs(threadData, _inv_arguments, _operator));
      _daeExp = tmpMeta2;
    }
  }
  _return: OMC_LABEL_UNUSED
  return _daeExp;
}

DLLDirection
modelica_metatype omc_NFExpression_toDAE(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_metatype _dexp = NULL;
  modelica_boolean _changed;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _dexp has no default value.
  _changed = 1 /* true */;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _daeOp = NULL;
      modelica_boolean _swap;
      modelica_boolean _negate;
      modelica_metatype _dae1 = NULL;
      modelica_metatype _dae2 = NULL;
      modelica_metatype _fn = NULL;
      int tmp4;
      // _daeOp has no default value.
      // _swap has no default value.
      // _negate has no default value.
      // _dae1 has no default value.
      // _dae2 has no default value.
      // _fn has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          tmpMeta5 = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          tmpMeta1 = tmpMeta5;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          tmpMeta6 = mmc_mk_box2(4, &DAE_Exp_RCONST__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta7;
          
          /* Pattern matching succeeded */
          tmpMeta7 = mmc_mk_box2(5, &DAE_Exp_SCONST__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          tmpMeta1 = tmpMeta7;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta8;
          
          /* Pattern matching succeeded */
          tmpMeta8 = mmc_mk_box2(6, &DAE_Exp_BCONST__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          tmpMeta1 = tmpMeta8;
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta9;
          
          /* Pattern matching succeeded */
          tmpMeta9 = mmc_mk_box3(8, &DAE_Exp_ENUM__LITERAL__desc, omc_NFExpression_enumLiteralPath(threadData, _exp), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta10;
          
          /* Pattern matching succeeded */
          tmpMeta10 = mmc_mk_box2(7, &DAE_Exp_CLKCONST__desc, omc_NFClockKind_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          tmpMeta1 = tmpMeta10;
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta11;
          
          /* Pattern matching succeeded */
          tmpMeta11 = mmc_mk_box3(9, &DAE_Exp_CREF__desc, omc_NFComponentRef_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), omc_NFType_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), 1 /* true */));
          tmpMeta1 = tmpMeta11;
          goto tmp3_done;
        }
        case 10: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = omc_NFExpandExp_expandTypename(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta17;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar81;
            modelica_metatype* tmp13;
            modelica_metatype tmpMeta14;
            modelica_metatype __omcQ_24tmpVar80;
            modelica_integer tmp15;
            modelica_metatype _e_loopVar = 0;
            modelica_integer tmp16;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmp16 = 1;
            tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar81 = tmpMeta14; /* defaultValue */
            tmp13 = &__omcQ_24tmpVar81;
            while(1) {
              tmp15 = 1;
              if (tmp16 <= arrayLength(_e_loopVar)) {
                _e = arrayGet(_e_loopVar, tmp16++);
                tmp15--;
              }
              if (tmp15 == 0) {
                __omcQ_24tmpVar80 = omc_NFExpression_toDAE(threadData, _e);
                *tmp13 = mmc_mk_cons(__omcQ_24tmpVar80,0);
                tmp13 = &MMC_CDR(*tmp13);
              } else if (tmp15 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp13 = mmc_mk_nil();
            tmpMeta12 = __omcQ_24tmpVar81;
          }
          tmpMeta17 = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, omc_NFType_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), 1 /* true */), mmc_mk_boolean(omc_NFType_isVector(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))), tmpMeta12);
          tmpMeta1 = tmpMeta17;
          goto tmp3_done;
        }
        case 15: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_toDAERecord(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          goto tmp3_done;
        }
        case 13: {
          modelica_metatype tmpMeta18;
          
          /* Pattern matching succeeded */
          tmpMeta18 = mmc_mk_box5(21, &DAE_Exp_RANGE__desc, omc_NFType_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), 1 /* true */), omc_NFExpression_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), (isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))))?mmc_mk_some(omc_NFExpression_toDAE(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))))):mmc_mk_none()), omc_NFExpression_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)))));
          tmpMeta1 = tmpMeta18;
          goto tmp3_done;
        }
        case 14: {
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta23;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar83;
            modelica_metatype* tmp20;
            modelica_metatype tmpMeta21;
            modelica_metatype __omcQ_24tmpVar82;
            modelica_integer tmp22;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta21 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar83 = tmpMeta21; /* defaultValue */
            tmp20 = &__omcQ_24tmpVar83;
            while(1) {
              tmp22 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp22--;
              }
              if (tmp22 == 0) {
                __omcQ_24tmpVar82 = omc_NFExpression_toDAE(threadData, _e);
                *tmp20 = mmc_mk_cons(__omcQ_24tmpVar82,0);
                tmp20 = &MMC_CDR(*tmp20);
              } else if (tmp22 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp20 = mmc_mk_nil();
            tmpMeta19 = __omcQ_24tmpVar83;
          }
          tmpMeta23 = mmc_mk_box2(22, &DAE_Exp_TUPLE__desc, tmpMeta19);
          tmpMeta1 = tmpMeta23;
          goto tmp3_done;
        }
        case 16: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFCall_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 17: {
          modelica_metatype tmpMeta24;
          
          /* Pattern matching succeeded */
          tmpMeta24 = mmc_mk_box3(27, &DAE_Exp_SIZE__desc, omc_NFExpression_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), (isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))))?mmc_mk_some(omc_NFExpression_toDAE(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))))):mmc_mk_none()));
          tmpMeta1 = tmpMeta24;
          goto tmp3_done;
        }
        case 24: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_toDAEMultary(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          goto tmp3_done;
        }
        case 19: {
          modelica_metatype tmpMeta25;
          
          /* Pattern matching succeeded */
          _daeOp = omc_NFOperator_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))) ,&_swap ,&_negate);

          _dae1 = omc_NFExpression_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));

          _dae2 = omc_NFExpression_toDAE(threadData, (_negate?omc_NFExpression_negate(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))):(MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))));
          tmpMeta25 = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, (_swap?_dae2:_dae1), _daeOp, (_swap?_dae1:_dae2));
          tmpMeta1 = tmpMeta25;
          goto tmp3_done;
        }
        case 20: {
          modelica_metatype tmpMeta26;
          
          /* Pattern matching succeeded */
          tmpMeta26 = mmc_mk_box3(11, &DAE_Exp_UNARY__desc, omc_NFOperator_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), NULL, NULL), omc_NFExpression_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          tmpMeta1 = tmpMeta26;
          goto tmp3_done;
        }
        case 21: {
          modelica_metatype tmpMeta27;
          
          /* Pattern matching succeeded */
          tmpMeta27 = mmc_mk_box4(12, &DAE_Exp_LBINARY__desc, omc_NFExpression_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), omc_NFOperator_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), NULL, NULL), omc_NFExpression_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))));
          tmpMeta1 = tmpMeta27;
          goto tmp3_done;
        }
        case 22: {
          modelica_metatype tmpMeta28;
          
          /* Pattern matching succeeded */
          tmpMeta28 = mmc_mk_box3(13, &DAE_Exp_LUNARY__desc, omc_NFOperator_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), NULL, NULL), omc_NFExpression_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          tmpMeta1 = tmpMeta28;
          goto tmp3_done;
        }
        case 23: {
          modelica_metatype tmpMeta29;
          
          /* Pattern matching succeeded */
          tmpMeta29 = mmc_mk_box6(14, &DAE_Exp_RELATION__desc, omc_NFExpression_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), omc_NFOperator_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), NULL, NULL), omc_NFExpression_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), mmc_mk_none());
          tmpMeta1 = tmpMeta29;
          goto tmp3_done;
        }
        case 25: {
          modelica_metatype tmpMeta30;
          
          /* Pattern matching succeeded */
          tmpMeta30 = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, omc_NFExpression_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), omc_NFExpression_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))), omc_NFExpression_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)))));
          tmpMeta1 = tmpMeta30;
          goto tmp3_done;
        }
        case 26: {
          modelica_metatype tmpMeta31;
          
          /* Pattern matching succeeded */
          tmpMeta31 = mmc_mk_box3(23, &DAE_Exp_CAST__desc, omc_NFType_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), 1 /* true */), omc_NFExpression_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          tmpMeta1 = tmpMeta31;
          goto tmp3_done;
        }
        case 27: {
          modelica_metatype tmpMeta32;
          
          /* Pattern matching succeeded */
          tmpMeta32 = mmc_mk_box2(37, &DAE_Exp_BOX__desc, omc_NFExpression_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          tmpMeta1 = tmpMeta32;
          goto tmp3_done;
        }
        case 28: {
          modelica_metatype tmpMeta33;
          
          /* Pattern matching succeeded */
          tmpMeta33 = mmc_mk_box3(38, &DAE_Exp_UNBOX__desc, omc_NFExpression_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), omc_NFType_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), 1 /* true */));
          tmpMeta1 = tmpMeta33;
          goto tmp3_done;
        }
        case 29: {
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta38;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar85;
            modelica_metatype* tmp35;
            modelica_metatype tmpMeta36;
            modelica_metatype __omcQ_24tmpVar84;
            modelica_integer tmp37;
            modelica_metatype _s_loopVar = 0;
            modelica_metatype _s;
            _s_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta36 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar85 = tmpMeta36; /* defaultValue */
            tmp35 = &__omcQ_24tmpVar85;
            while(1) {
              tmp37 = 1;
              if (!listEmpty(_s_loopVar)) {
                _s = MMC_CAR(_s_loopVar);
                _s_loopVar = MMC_CDR(_s_loopVar);
                tmp37--;
              }
              if (tmp37 == 0) {
                __omcQ_24tmpVar84 = omc_NFSubscript_toDAEExp(threadData, _s);
                *tmp35 = mmc_mk_cons(__omcQ_24tmpVar84,0);
                tmp35 = &MMC_CDR(*tmp35);
              } else if (tmp37 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp35 = mmc_mk_nil();
            tmpMeta34 = __omcQ_24tmpVar85;
          }
          tmpMeta38 = mmc_mk_box3(24, &DAE_Exp_ASUB__desc, omc_NFExpression_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), tmpMeta34);
          tmpMeta1 = tmpMeta38;
          goto tmp3_done;
        }
        case 30: {
          modelica_metatype tmpMeta39;
          
          /* Pattern matching succeeded */
          tmpMeta39 = mmc_mk_box4(25, &DAE_Exp_TSUB__desc, omc_NFExpression_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), omc_NFType_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), 1 /* true */));
          tmpMeta1 = tmpMeta39;
          goto tmp3_done;
        }
        case 31: {
          modelica_metatype tmpMeta40;
          
          /* Pattern matching succeeded */
          tmpMeta40 = mmc_mk_box5(26, &DAE_Exp_RSUB__desc, omc_NFExpression_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), mmc_mk_integer(((modelica_integer) -1)), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), omc_NFType_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), 1 /* true */));
          tmpMeta1 = tmpMeta40;
          goto tmp3_done;
        }
        case 34: {
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          modelica_metatype tmpMeta44;
          modelica_metatype tmpMeta48;
          modelica_metatype tmpMeta49;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta41 = omc_NFFunction_Function_typeRefCache(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_integer) 16));
          if (listEmpty(tmpMeta41)) goto goto_2;
          tmpMeta42 = MMC_CAR(tmpMeta41);
          tmpMeta43 = MMC_CDR(tmpMeta41);
          _fn = tmpMeta42;
          {
            modelica_metatype __omcQ_24tmpVar87;
            modelica_metatype* tmp45;
            modelica_metatype tmpMeta46;
            modelica_metatype __omcQ_24tmpVar86;
            modelica_integer tmp47;
            modelica_metatype _arg_loopVar = 0;
            modelica_metatype _arg;
            _arg_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta46 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar87 = tmpMeta46; /* defaultValue */
            tmp45 = &__omcQ_24tmpVar87;
            while(1) {
              tmp47 = 1;
              if (!listEmpty(_arg_loopVar)) {
                _arg = MMC_CAR(_arg_loopVar);
                _arg_loopVar = MMC_CDR(_arg_loopVar);
                tmp47--;
              }
              if (tmp47 == 0) {
                __omcQ_24tmpVar86 = omc_NFExpression_toDAE(threadData, _arg);
                *tmp45 = mmc_mk_cons(__omcQ_24tmpVar86,0);
                tmp45 = &MMC_CDR(*tmp45);
              } else if (tmp47 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp45 = mmc_mk_nil();
            tmpMeta44 = __omcQ_24tmpVar87;
          }
          tmpMeta48 = mmc_mk_box3(15, &NFType_FUNCTION__desc, _fn, mmc_mk_integer(3));
          tmpMeta49 = mmc_mk_box5(18, &DAE_Exp_PARTEVALFUNCTION__desc, omc_NFFunction_Function_nameConsiderBuiltin(threadData, _fn), tmpMeta44, omc_NFType_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), 1 /* true */), omc_NFType_toDAE(threadData, tmpMeta48, 1 /* true */));
          tmpMeta1 = tmpMeta49;
          goto tmp3_done;
        }
        case 32: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 36: {
          modelica_metatype tmpMeta50;
          
          /* Pattern matching succeeded */
          tmpMeta50 = mmc_mk_box3(39, &DAE_Exp_SHARED__LITERAL__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), omc_NFExpression_toDAE(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          tmpMeta1 = tmpMeta50;
          goto tmp3_done;
        }
        case 35: {
          modelica_metatype tmpMeta51;
          modelica_metatype tmpMeta52;
          modelica_metatype tmpMeta53;
          modelica_metatype tmpMeta54;
          modelica_boolean tmp55;
          modelica_metatype tmpMeta56;
          
          /* Pattern matching succeeded */
          tmp55 = (modelica_boolean)omc_Flags_getConfigBool(threadData, _OMC_LIT114);
          if(tmp55)
          {
            tmpMeta52 = mmc_mk_box2(5, &DAE_Exp_SCONST__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
            tmpMeta51 = mmc_mk_cons(tmpMeta52, MMC_REFSTRUCTLIT(mmc_nil));
            tmpMeta53 = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _OMC_LIT116, tmpMeta51, _OMC_LIT119);
            tmpMeta56 = tmpMeta53;
          }
          else
          {
            tmpMeta54 = mmc_mk_box2(5, &DAE_Exp_SCONST__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
            tmpMeta56 = tmpMeta54;
          }
          tmpMeta1 = tmpMeta56;
          goto tmp3_done;
        }
        case 37: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT123;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          modelica_metatype tmpMeta57;
          modelica_metatype tmpMeta58;
          
          /* Pattern matching succeeded */
          tmpMeta57 = stringAppend(_OMC_LIT124,omc_NFExpression_toString(threadData, _exp));
          tmpMeta58 = stringAppend(tmpMeta57,_OMC_LIT125);
          omc_Error_assertion(threadData, 0 /* false */, tmpMeta58, _OMC_LIT126);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _dexp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _dexp;
}

DLLDirection
modelica_metatype omc_NFExpression_toAbsyn(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_metatype _aexp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _aexp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 31; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta6 = mmc_mk_box2(3, &Absyn_Exp_INTEGER__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 1: {
          modelica_string tmp7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp7 = modelica_real_to_modelica_string(mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), ((modelica_integer) 6), ((modelica_integer) 0), 1 /* true */);
          tmpMeta8 = mmc_mk_box2(4, &Absyn_Exp_REAL__desc, tmp7);
          tmpMeta1 = tmpMeta8;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta9 = mmc_mk_box2(6, &Absyn_Exp_STRING__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta10 = mmc_mk_box2(7, &Absyn_Exp_BOOL__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          tmpMeta1 = tmpMeta10;
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,3) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,5,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta12 = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, omc_AbsynUtil_pathToCref(threadData, omc_NFExpression_enumLiteralPath(threadData, _exp)));
          tmpMeta1 = tmpMeta12;
          goto tmp3_done;
        }
        case 5: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFClockKind_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta13;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta13 = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, omc_NFComponentRef_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          tmpMeta1 = tmpMeta13;
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta15 = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, omc_NFType_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), tmpMeta14);
          tmpMeta16 = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, tmpMeta15);
          tmpMeta1 = tmpMeta16;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta22;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar89;
            modelica_metatype* tmp18;
            modelica_metatype tmpMeta19;
            modelica_metatype __omcQ_24tmpVar88;
            modelica_integer tmp20;
            modelica_metatype _e_loopVar = 0;
            modelica_integer tmp21;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmp21 = 1;
            tmpMeta19 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar89 = tmpMeta19; /* defaultValue */
            tmp18 = &__omcQ_24tmpVar89;
            while(1) {
              tmp20 = 1;
              if (tmp21 <= arrayLength(_e_loopVar)) {
                _e = arrayGet(_e_loopVar, tmp21++);
                tmp20--;
              }
              if (tmp20 == 0) {
                __omcQ_24tmpVar88 = omc_NFExpression_toAbsyn(threadData, _e);
                *tmp18 = mmc_mk_cons(__omcQ_24tmpVar88,0);
                tmp18 = &MMC_CDR(*tmp18);
              } else if (tmp20 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp18 = mmc_mk_nil();
            tmpMeta17 = __omcQ_24tmpVar89;
          }
          tmpMeta22 = mmc_mk_box2(16, &Absyn_Exp_ARRAY__desc, tmpMeta17);
          tmpMeta1 = tmpMeta22;
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta31;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar93;
            modelica_metatype* tmp24;
            modelica_metatype tmpMeta25;
            modelica_metatype tmpMeta26;
            modelica_metatype __omcQ_24tmpVar92;
            modelica_integer tmp30;
            modelica_metatype _l_loopVar = 0;
            modelica_metatype _l;
            _l_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
            tmpMeta25 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar93 = tmpMeta25; /* defaultValue */
            tmp24 = &__omcQ_24tmpVar93;
            while(1) {
              tmp30 = 1;
              if (!listEmpty(_l_loopVar)) {
                _l = MMC_CAR(_l_loopVar);
                _l_loopVar = MMC_CDR(_l_loopVar);
                tmp30--;
              }
              if (tmp30 == 0) {
                {
                  modelica_metatype __omcQ_24tmpVar91;
                  modelica_metatype* tmp27;
                  modelica_metatype tmpMeta28;
                  modelica_metatype __omcQ_24tmpVar90;
                  modelica_integer tmp29;
                  modelica_metatype _e_loopVar = 0;
                  modelica_metatype _e;
                  _e_loopVar = _l;
                  tmpMeta28 = MMC_REFSTRUCTLIT(mmc_nil);
                  __omcQ_24tmpVar91 = tmpMeta28; /* defaultValue */
                  tmp27 = &__omcQ_24tmpVar91;
                  while(1) {
                    tmp29 = 1;
                    if (!listEmpty(_e_loopVar)) {
                      _e = MMC_CAR(_e_loopVar);
                      _e_loopVar = MMC_CDR(_e_loopVar);
                      tmp29--;
                    }
                    if (tmp29 == 0) {
                      __omcQ_24tmpVar90 = omc_NFExpression_toAbsyn(threadData, _e);
                      *tmp27 = mmc_mk_cons(__omcQ_24tmpVar90,0);
                      tmp27 = &MMC_CDR(*tmp27);
                    } else if (tmp29 == 1) {
                      break;
                    } else {
                      goto goto_2;
                    }
                  }
                  *tmp27 = mmc_mk_nil();
                  tmpMeta26 = __omcQ_24tmpVar91;
                }
                __omcQ_24tmpVar92 = tmpMeta26;
                *tmp24 = mmc_mk_cons(__omcQ_24tmpVar92,0);
                tmp24 = &MMC_CDR(*tmp24);
              } else if (tmp30 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp24 = mmc_mk_nil();
            tmpMeta23 = __omcQ_24tmpVar93;
          }
          tmpMeta31 = mmc_mk_box2(17, &Absyn_Exp_MATRIX__desc, tmpMeta23);
          tmpMeta1 = tmpMeta31;
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta32;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta32 = mmc_mk_box4(18, &Absyn_Exp_RANGE__desc, omc_NFExpression_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), omc_Util_applyOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), boxvar_NFExpression_toAbsyn), omc_NFExpression_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)))));
          tmpMeta1 = tmpMeta32;
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta37;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar95;
            modelica_metatype* tmp34;
            modelica_metatype tmpMeta35;
            modelica_metatype __omcQ_24tmpVar94;
            modelica_integer tmp36;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta35 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar95 = tmpMeta35; /* defaultValue */
            tmp34 = &__omcQ_24tmpVar95;
            while(1) {
              tmp36 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp36--;
              }
              if (tmp36 == 0) {
                __omcQ_24tmpVar94 = omc_NFExpression_toAbsyn(threadData, _e);
                *tmp34 = mmc_mk_cons(__omcQ_24tmpVar94,0);
                tmp34 = &MMC_CDR(*tmp34);
              } else if (tmp36 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp34 = mmc_mk_nil();
            tmpMeta33 = __omcQ_24tmpVar95;
          }
          tmpMeta37 = mmc_mk_box2(19, &Absyn_Exp_TUPLE__desc, tmpMeta33);
          tmpMeta1 = tmpMeta37;
          goto tmp3_done;
        }
        case 12: {
          modelica_metatype tmpMeta38;
          modelica_metatype tmpMeta42;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar97;
            modelica_metatype* tmp39;
            modelica_metatype tmpMeta40;
            modelica_metatype __omcQ_24tmpVar96;
            modelica_integer tmp41;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)));
            tmpMeta40 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar97 = tmpMeta40; /* defaultValue */
            tmp39 = &__omcQ_24tmpVar97;
            while(1) {
              tmp41 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp41--;
              }
              if (tmp41 == 0) {
                __omcQ_24tmpVar96 = omc_NFExpression_toAbsyn(threadData, _e);
                *tmp39 = mmc_mk_cons(__omcQ_24tmpVar96,0);
                tmp39 = &MMC_CDR(*tmp39);
              } else if (tmp41 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp39 = mmc_mk_nil();
            tmpMeta38 = __omcQ_24tmpVar97;
          }
          tmpMeta42 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta1 = omc_AbsynUtil_makeCall(threadData, omc_AbsynUtil_pathToCref(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), tmpMeta38, tmpMeta42);
          goto tmp3_done;
        }
        case 13: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFCall_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 14: {
          modelica_metatype tmpMeta43;
          modelica_metatype tmpMeta44;
          modelica_boolean tmp45;
          modelica_metatype tmpMeta46;
          modelica_metatype tmpMeta47;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp45 = (modelica_boolean)isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          if(tmp45)
          {
            tmpMeta43 = mmc_mk_cons(omc_NFExpression_toAbsyn(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))))), MMC_REFSTRUCTLIT(mmc_nil));
            tmpMeta46 = tmpMeta43;
          }
          else
          {
            tmpMeta44 = MMC_REFSTRUCTLIT(mmc_nil);
            tmpMeta46 = tmpMeta44;
          }
          tmpMeta47 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta1 = omc_AbsynUtil_makeCall(threadData, _OMC_LIT127, tmpMeta46, tmpMeta47);
          goto tmp3_done;
        }
        case 15: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT128;
          goto tmp3_done;
        }
        case 16: {
          modelica_metatype tmpMeta48;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta48 = mmc_mk_box4(8, &Absyn_Exp_BINARY__desc, omc_NFExpression_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), omc_NFOperator_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), omc_NFExpression_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))));
          tmpMeta1 = tmpMeta48;
          goto tmp3_done;
        }
        case 17: {
          modelica_metatype tmpMeta49;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta49 = mmc_mk_box3(9, &Absyn_Exp_UNARY__desc, omc_NFOperator_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), omc_NFExpression_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          tmpMeta1 = tmpMeta49;
          goto tmp3_done;
        }
        case 18: {
          modelica_metatype tmpMeta50;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta50 = mmc_mk_box4(10, &Absyn_Exp_LBINARY__desc, omc_NFExpression_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), omc_NFOperator_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), omc_NFExpression_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))));
          tmpMeta1 = tmpMeta50;
          goto tmp3_done;
        }
        case 19: {
          modelica_metatype tmpMeta51;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta51 = mmc_mk_box3(11, &Absyn_Exp_LUNARY__desc, omc_NFOperator_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), omc_NFExpression_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          tmpMeta1 = tmpMeta51;
          goto tmp3_done;
        }
        case 20: {
          modelica_metatype tmpMeta52;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta52 = mmc_mk_box4(12, &Absyn_Exp_RELATION__desc, omc_NFExpression_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), omc_NFOperator_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), omc_NFExpression_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))));
          tmpMeta1 = tmpMeta52;
          goto tmp3_done;
        }
        case 21: {
          modelica_metatype tmpMeta53;
          modelica_metatype tmpMeta54;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta53 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta54 = mmc_mk_box5(13, &Absyn_Exp_IFEXP__desc, omc_NFExpression_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), omc_NFExpression_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))), omc_NFExpression_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)))), tmpMeta53);
          tmpMeta1 = tmpMeta54;
          goto tmp3_done;
        }
        case 22: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,23,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 23: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 24: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,25,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 25: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,29,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 26: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,33,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 27: {
          modelica_metatype tmpMeta55;
          modelica_metatype tmpMeta59;
          modelica_metatype tmpMeta60;
          modelica_metatype tmpMeta61;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,31,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar99;
            modelica_metatype* tmp56;
            modelica_metatype tmpMeta57;
            modelica_metatype __omcQ_24tmpVar98;
            modelica_integer tmp58;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta57 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar99 = tmpMeta57; /* defaultValue */
            tmp56 = &__omcQ_24tmpVar99;
            while(1) {
              tmp58 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp58--;
              }
              if (tmp58 == 0) {
                __omcQ_24tmpVar98 = omc_NFExpression_toAbsyn(threadData, _e);
                *tmp56 = mmc_mk_cons(__omcQ_24tmpVar98,0);
                tmp56 = &MMC_CDR(*tmp56);
              } else if (tmp58 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp56 = mmc_mk_nil();
            tmpMeta55 = __omcQ_24tmpVar99;
          }
          tmpMeta59 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta60 = mmc_mk_box3(3, &Absyn_FunctionArgs_FUNCTIONARGS__desc, tmpMeta55, tmpMeta59);
          tmpMeta61 = mmc_mk_box3(15, &Absyn_Exp_PARTEVALFUNCTION__desc, omc_NFComponentRef_toAbsyn(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), tmpMeta60);
          tmpMeta1 = tmpMeta61;
          goto tmp3_done;
        }
        case 28: {
          modelica_metatype tmpMeta62;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,32,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta62 = mmc_mk_box2(6, &Absyn_Exp_STRING__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          tmpMeta1 = tmpMeta62;
          goto tmp3_done;
        }
        case 29: {
          modelica_metatype tmpMeta63;
          modelica_metatype tmpMeta64;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,34,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta63 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta64 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta1 = omc_AbsynUtil_makeCall(threadData, _OMC_LIT129, tmpMeta63, tmpMeta64);
          goto tmp3_done;
        }
        case 30: {
          modelica_metatype tmpMeta65;
          modelica_metatype tmpMeta66;
          
          /* Pattern matching succeeded */
          tmpMeta65 = stringAppend(_OMC_LIT130,omc_NFExpression_toString(threadData, _exp));
          tmpMeta66 = stringAppend(tmpMeta65,_OMC_LIT125);
          omc_Error_assertion(threadData, 0 /* false */, tmpMeta66, _OMC_LIT131);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _aexp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _aexp;
}

DLLDirection
modelica_metatype omc_NFExpression_computeNominal(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _varPointer = NULL;
      modelica_metatype _nominal = NULL;
      modelica_metatype _operator = NULL;
      modelica_integer _sizeClass;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _varPointer has no default value.
      // _nominal has no default value.
      // _operator has no default value.
      // _sizeClass has no default value.
      tmp4 = 0;
      for (; tmp4 < 7; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,7,2) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
          
          _varPointer = tmpMeta8;
          /* Pattern matching succeeded */
          _nominal = omc_NFVariable_getNominal(threadData, omc_Pointer_access(threadData, _varPointer));
          tmpMeta1 = omc_Util_getOptionOrDefault(threadData, _nominal, _exp);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta9 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer(labs(mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))))));
          tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta10 = mmc_mk_box2(4, &NFExpression_REAL__desc, mmc_mk_real(fabs(mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))))));
          tmpMeta1 = tmpMeta10;
          goto tmp3_done;
        }
        case 3: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_integer tmp14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _operator = tmpMeta11;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(omc_NFOperator_getMathClassification(threadData, _operator) == 2)) goto tmp3_end;
          /* Pattern-matching assignment */
          tmpMeta12 = omc_NFOperator_classify(threadData, _operator);
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
          tmp14 = mmc_unbox_integer(tmpMeta13);
          _sizeClass = tmp14  /* pattern as ty=enumeration(SCALAR, ELEMENT_WISE, ARRAY_SCALAR, SCALAR_ARRAY, MATRIX, VECTOR_MATRIX, MATRIX_VECTOR, LOGICAL, RELATION) */;

          tmpMeta16 = mmc_mk_box2(0, mmc_mk_integer(1), mmc_mk_integer((modelica_integer)_sizeClass));
          tmpMeta15 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta15), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta15))[3] = omc_NFOperator_fromClassification(threadData, tmpMeta16, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_operator), 2))));
          _exp = tmpMeta15;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,3) == 0) goto tmp3_end;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _operator = tmpMeta17;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(omc_NFOperator_getMathClassification(threadData, _operator) == 1)) goto tmp3_end;
          tmpMeta18 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta18), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta18))[2] = listAppend((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          _exp = tmpMeta18;

          tmpMeta20 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta19 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta19), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta19))[3] = tmpMeta20;
          _exp = tmpMeta19;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_getNominal(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp)
{
  modelica_metatype _exp = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  _exp = omc_NFExpression_map(threadData, _exp, boxvar_NFExpression_computeNominal);

  _exp = omc_NFSimplifyExp_simplify(threadData, _exp, 0 /* false */);
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_enumLiteralPath(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_metatype _path = NULL;
  modelica_string _name = NULL;
  modelica_metatype _ty_path = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _path has no default value.
  // _name has no default value.
  // _ty_path has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _exp;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,4,3) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta2,5,2) == 0) MMC_THROW_INTERNAL();
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  _ty_path = tmpMeta3;
  _name = tmpMeta4;

  _path = omc_AbsynUtil_suffixPath(threadData, _ty_path, _name);
  _return: OMC_LABEL_UNUSED
  return _path;
}

DLLDirection
modelica_string omc_NFExpression_getName(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_string _name = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _name has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 15: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_AbsynUtil_pathString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _OMC_LIT13, 1 /* true */, 0 /* false */);
          goto tmp3_done;
        }
        case 16: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_AbsynUtil_pathString(threadData, omc_NFCall_functionName(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), _OMC_LIT13, 1 /* true */, 0 /* false */);
          goto tmp3_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 27: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 28: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 32: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 36: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 34: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFComponentRef_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 37: {
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT120;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_toString(threadData, _exp);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _name = tmp1;
  _return: OMC_LABEL_UNUSED
  return _name;
}

DLLDirection
modelica_boolean omc_NFExpression_isNonAssociativeExp(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isAssociative;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isAssociative has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 19: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFOperator_isNonAssociative(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp3_done;
        }
        case 21: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isAssociative = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isAssociative;
}
modelica_metatype boxptr_NFExpression_isNonAssociativeExp(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isAssociative;
  modelica_metatype out_isAssociative;
  _isAssociative = omc_NFExpression_isNonAssociativeExp(threadData, _exp);
  out_isAssociative = mmc_mk_icon(_isAssociative);
  return out_isAssociative;
}

DLLDirection
modelica_boolean omc_NFExpression_isAssociativeExp(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isAssociative;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isAssociative has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 19: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFOperator_isAssociative(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp3_done;
        }
        case 21: {
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isAssociative = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isAssociative;
}
modelica_metatype boxptr_NFExpression_isAssociativeExp(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isAssociative;
  modelica_metatype out_isAssociative;
  _isAssociative = omc_NFExpression_isAssociativeExp(threadData, _exp);
  out_isAssociative = mmc_mk_icon(_isAssociative);
  return out_isAssociative;
}

DLLDirection
modelica_integer omc_NFExpression_priority(threadData_t *threadData, modelica_metatype _exp, modelica_boolean _lhs)
{
  modelica_integer _priority;
  modelica_integer tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _priority has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = ((mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) < ((modelica_integer) 0))?((modelica_integer) 4):((modelica_integer) 0));
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmp1 = ((mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) < 0.0)?((modelica_integer) 4):((modelica_integer) 0));
          goto tmp3_done;
        }
        case 24: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFOperator_priority(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _lhs);
          goto tmp3_done;
        }
        case 19: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFOperator_priority(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _lhs);
          goto tmp3_done;
        }
        case 20: {
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 4);
          goto tmp3_done;
        }
        case 21: {
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFOperator_priority(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _lhs);
          goto tmp3_done;
        }
        case 22: {
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 7);
          goto tmp3_done;
        }
        case 23: {
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 6);
          goto tmp3_done;
        }
        case 13: {
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 10);
          goto tmp3_done;
        }
        case 25: {
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 11);
          goto tmp3_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 27: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 28: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 0);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _priority = tmp1;
  _return: OMC_LABEL_UNUSED
  return _priority;
}
modelica_metatype boxptr_NFExpression_priority(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _lhs)
{
  modelica_integer tmp1;
  modelica_integer _priority;
  modelica_metatype out_priority;
  tmp1 = mmc_unbox_integer(_lhs);
  _priority = omc_NFExpression_priority(threadData, _exp, tmp1);
  out_priority = mmc_mk_icon(_priority);
  return out_priority;
}

DLLDirection
modelica_string omc_NFExpression_multaryFlatString(threadData_t *threadData, modelica_metatype _arguments, modelica_metatype _exp, modelica_metatype _operator, modelica_metatype _format, modelica_boolean _parenthesize)
{
  modelica_string _str = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _str has no default value.
  {
    modelica_metatype __omcQ_24tmpVar101;
    modelica_metatype* tmp2;
    modelica_metatype tmpMeta3;
    modelica_string __omcQ_24tmpVar100;
    modelica_integer tmp4;
    modelica_metatype _e_loopVar = 0;
    modelica_metatype _e;
    _e_loopVar = _arguments;
    tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar101 = tmpMeta3; /* defaultValue */
    tmp2 = &__omcQ_24tmpVar101;
    while(1) {
      tmp4 = 1;
      if (!listEmpty(_e_loopVar)) {
        _e = MMC_CAR(_e_loopVar);
        _e_loopVar = MMC_CDR(_e_loopVar);
        tmp4--;
      }
      if (tmp4 == 0) {
        __omcQ_24tmpVar100 = omc_NFExpression_operandFlatString(threadData, _e, _exp, 0 /* false */, _format);
        *tmp2 = mmc_mk_cons(__omcQ_24tmpVar100,0);
        tmp2 = &MMC_CDR(*tmp2);
      } else if (tmp4 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp2 = mmc_mk_nil();
    tmpMeta1 = __omcQ_24tmpVar101;
  }
  _str = stringDelimitList(tmpMeta1, omc_NFOperator_symbol(threadData, _operator, _OMC_LIT132));

  if((_parenthesize && (listLength(_arguments) > ((modelica_integer) 1))))
  {
    tmpMeta5 = stringAppend(_OMC_LIT133,_str);
    tmpMeta6 = stringAppend(tmpMeta5,_OMC_LIT134);
    _str = tmpMeta6;
  }
  _return: OMC_LABEL_UNUSED
  return _str;
}
modelica_metatype boxptr_NFExpression_multaryFlatString(threadData_t *threadData, modelica_metatype _arguments, modelica_metatype _exp, modelica_metatype _operator, modelica_metatype _format, modelica_metatype _parenthesize)
{
  modelica_integer tmp1;
  modelica_string _str = NULL;
  tmp1 = mmc_unbox_integer(_parenthesize);
  _str = omc_NFExpression_multaryFlatString(threadData, _arguments, _exp, _operator, _format, tmp1);
  /* skip box _str; String */
  return _str;
}

DLLDirection
modelica_string omc_NFExpression_multaryString(threadData_t *threadData, modelica_metatype _arguments, modelica_metatype _exp, modelica_metatype _operator, modelica_boolean _parenthesize)
{
  modelica_string _str = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _str has no default value.
  {
    modelica_metatype __omcQ_24tmpVar103;
    modelica_metatype* tmp2;
    modelica_metatype tmpMeta3;
    modelica_string __omcQ_24tmpVar102;
    modelica_integer tmp4;
    modelica_metatype _e_loopVar = 0;
    modelica_metatype _e;
    _e_loopVar = _arguments;
    tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar103 = tmpMeta3; /* defaultValue */
    tmp2 = &__omcQ_24tmpVar103;
    while(1) {
      tmp4 = 1;
      if (!listEmpty(_e_loopVar)) {
        _e = MMC_CAR(_e_loopVar);
        _e_loopVar = MMC_CDR(_e_loopVar);
        tmp4--;
      }
      if (tmp4 == 0) {
        __omcQ_24tmpVar102 = omc_NFExpression_operandString(threadData, _e, _exp, 0 /* false */);
        *tmp2 = mmc_mk_cons(__omcQ_24tmpVar102,0);
        tmp2 = &MMC_CDR(*tmp2);
      } else if (tmp4 == 1) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp2 = mmc_mk_nil();
    tmpMeta1 = __omcQ_24tmpVar103;
  }
  _str = stringDelimitList(tmpMeta1, omc_NFOperator_symbol(threadData, _operator, _OMC_LIT132));

  if((_parenthesize && (listLength(_arguments) > ((modelica_integer) 1))))
  {
    tmpMeta5 = stringAppend(_OMC_LIT133,_str);
    tmpMeta6 = stringAppend(tmpMeta5,_OMC_LIT134);
    _str = tmpMeta6;
  }
  _return: OMC_LABEL_UNUSED
  return _str;
}
modelica_metatype boxptr_NFExpression_multaryString(threadData_t *threadData, modelica_metatype _arguments, modelica_metatype _exp, modelica_metatype _operator, modelica_metatype _parenthesize)
{
  modelica_integer tmp1;
  modelica_string _str = NULL;
  tmp1 = mmc_unbox_integer(_parenthesize);
  _str = omc_NFExpression_multaryString(threadData, _arguments, _exp, _operator, tmp1);
  /* skip box _str; String */
  return _str;
}

DLLDirection
modelica_string omc_NFExpression_operandFlatString(threadData_t *threadData, modelica_metatype _operand, modelica_metatype _operator, modelica_boolean _lhs, modelica_metatype _format)
{
  modelica_string _str = NULL;
  modelica_integer _operand_prio;
  modelica_integer _operator_prio;
  modelica_boolean _parenthesize;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _str has no default value.
  // _operand_prio has no default value.
  // _operator_prio has no default value.
  _parenthesize = 0 /* false */;
  _str = omc_NFExpression_toFlatString(threadData, _operand, _format);

  _operand_prio = omc_NFExpression_priority(threadData, _operand, _lhs);

  if((_operand_prio == ((modelica_integer) 4)))
  {
    _parenthesize = 1 /* true */;
  }
  else
  {
    _operator_prio = omc_NFExpression_priority(threadData, _operator, _lhs);

    if((_operand_prio > _operator_prio))
    {
      _parenthesize = 1 /* true */;
    }
    else
    {
      if((_operand_prio == _operator_prio))
      {
        _parenthesize = (_lhs?omc_NFExpression_isNonAssociativeExp(threadData, _operand):(!omc_NFExpression_isAssociativeExp(threadData, _operand)));
      }
    }
  }

  if(_parenthesize)
  {
    tmpMeta1 = stringAppend(_OMC_LIT133,_str);
    tmpMeta2 = stringAppend(tmpMeta1,_OMC_LIT134);
    _str = tmpMeta2;
  }
  _return: OMC_LABEL_UNUSED
  return _str;
}
modelica_metatype boxptr_NFExpression_operandFlatString(threadData_t *threadData, modelica_metatype _operand, modelica_metatype _operator, modelica_metatype _lhs, modelica_metatype _format)
{
  modelica_integer tmp1;
  modelica_string _str = NULL;
  tmp1 = mmc_unbox_integer(_lhs);
  _str = omc_NFExpression_operandFlatString(threadData, _operand, _operator, tmp1, _format);
  /* skip box _str; String */
  return _str;
}

DLLDirection
modelica_string omc_NFExpression_operandString(threadData_t *threadData, modelica_metatype _operand, modelica_metatype _operator, modelica_boolean _lhs)
{
  modelica_string _str = NULL;
  modelica_integer _operand_prio;
  modelica_integer _operator_prio;
  modelica_boolean _parenthesize;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _str has no default value.
  // _operand_prio has no default value.
  // _operator_prio has no default value.
  _parenthesize = 0 /* false */;
  _str = omc_NFExpression_toString(threadData, _operand);

  _operand_prio = omc_NFExpression_priority(threadData, _operand, _lhs);

  if((_operand_prio == ((modelica_integer) 4)))
  {
    _parenthesize = 1 /* true */;
  }
  else
  {
    _operator_prio = omc_NFExpression_priority(threadData, _operator, _lhs);

    if((_operand_prio > _operator_prio))
    {
      _parenthesize = 1 /* true */;
    }
    else
    {
      if((_operand_prio == _operator_prio))
      {
        _parenthesize = (_lhs?omc_NFExpression_isNonAssociativeExp(threadData, _operand):(!omc_NFExpression_isAssociativeExp(threadData, _operand)));
      }
    }
  }

  if(_parenthesize)
  {
    tmpMeta1 = stringAppend(_OMC_LIT133,_str);
    tmpMeta2 = stringAppend(tmpMeta1,_OMC_LIT134);
    _str = tmpMeta2;
  }
  _return: OMC_LABEL_UNUSED
  return _str;
}
modelica_metatype boxptr_NFExpression_operandString(threadData_t *threadData, modelica_metatype _operand, modelica_metatype _operator, modelica_metatype _lhs)
{
  modelica_integer tmp1;
  modelica_string _str = NULL;
  tmp1 = mmc_unbox_integer(_lhs);
  _str = omc_NFExpression_operandString(threadData, _operand, _operator, tmp1);
  /* skip box _str; String */
  return _str;
}

static modelica_metatype closure24_NFExpression_toFlatString(threadData_t *thData, modelica_metatype closure, modelica_metatype exp)
{
  modelica_metatype format = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_toFlatString(thData, exp, format);
}
DLLDirection
modelica_string omc_NFExpression_toFlatString(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _format)
{
  modelica_string _str = NULL;
  modelica_metatype _t = NULL;
  modelica_metatype _clk = NULL;
  modelica_metatype _first = NULL;
  modelica_metatype _rest = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _str has no default value.
  // _t has no default value.
  // _clk has no default value.
  // _first has no default value.
  // _rest has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 39; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = intString(mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = realString(mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta6 = stringAppend(_OMC_LIT135,omc_Util_escapeModelicaStringToCString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          tmpMeta7 = stringAppend(tmpMeta6,_OMC_LIT135);
          tmp1 = tmpMeta7;
          goto tmp3_done;
        }
        case 3: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))?_OMC_LIT29:_OMC_LIT30);
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_boolean tmp13;
          modelica_string tmp14;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,3) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,5,2) == 0) goto tmp3_end;
          
          _t = tmpMeta8;
          /* Pattern matching succeeded */
          tmp13 = (modelica_boolean)omc_NFType_isBuiltinEnumeration(threadData, _t);
          if(tmp13)
          {
            tmpMeta9 = stringAppend(omc_AbsynUtil_pathString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_t), 2))), _OMC_LIT13, 1 /* true */, 0 /* false */),_OMC_LIT13);
            tmpMeta10 = stringAppend(tmpMeta9,(MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
            tmp14 = tmpMeta10;
          }
          else
          {
            tmpMeta11 = stringAppend(omc_Util_makeQuotedIdentifier(threadData, omc_AbsynUtil_pathString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_t), 2))), _OMC_LIT13, 1 /* true */, 0 /* false */)),_OMC_LIT13);
            tmpMeta12 = stringAppend(tmpMeta11,omc_Util_makeQuotedIdentifier(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
            tmp14 = tmpMeta12;
          }
          tmp1 = tmp14;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta15;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,1) == 0) goto tmp3_end;
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          _clk = tmpMeta15;
          /* Pattern matching succeeded */
          tmp1 = omc_NFClockKind_toFlatString(threadData, _clk, _format);
          goto tmp3_done;
        }
        case 6: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFComponentRef_toFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _format);
          goto tmp3_done;
        }
        case 7: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFType_typenameString(threadData, omc_NFType_arrayElementType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          modelica_boolean tmp27;
          modelica_string tmp28;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp27 = (modelica_boolean)(arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) == ((modelica_integer) 0));
          if(tmp27)
          {
            tmpMeta16 = stringAppend(_OMC_LIT136,omc_NFExpression_toFlatString(threadData, omc_NFExpression_makeDefaultValue(threadData, omc_NFType_elementType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), mmc_mk_none(), mmc_mk_none()), _format));
            tmpMeta17 = stringAppend(tmpMeta16,_OMC_LIT107);
            tmpMeta18 = stringAppend(tmpMeta17,omc_NFType_dimensionsToFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _format));
            tmpMeta19 = stringAppend(tmpMeta18,_OMC_LIT134);
            tmp28 = tmpMeta19;
          }
          else
          {
            {
              modelica_metatype __omcQ_24tmpVar105;
              modelica_metatype* tmp21;
              modelica_metatype tmpMeta22;
              modelica_string __omcQ_24tmpVar104;
              modelica_integer tmp23;
              modelica_metatype _e_loopVar = 0;
              modelica_integer tmp24;
              modelica_metatype _e;
              _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
              tmp24 = 1;
              tmpMeta22 = MMC_REFSTRUCTLIT(mmc_nil);
              __omcQ_24tmpVar105 = tmpMeta22; /* defaultValue */
              tmp21 = &__omcQ_24tmpVar105;
              while(1) {
                tmp23 = 1;
                if (tmp24 <= arrayLength(_e_loopVar)) {
                  _e = arrayGet(_e_loopVar, tmp24++);
                  tmp23--;
                }
                if (tmp23 == 0) {
                  __omcQ_24tmpVar104 = omc_NFExpression_toFlatString(threadData, _e, _format);
                  *tmp21 = mmc_mk_cons(__omcQ_24tmpVar104,0);
                  tmp21 = &MMC_CDR(*tmp21);
                } else if (tmp23 == 1) {
                  break;
                } else {
                  goto goto_2;
                }
              }
              *tmp21 = mmc_mk_nil();
              tmpMeta20 = __omcQ_24tmpVar105;
            }
            tmpMeta25 = stringAppend(_OMC_LIT137,stringDelimitList(tmpMeta20, _OMC_LIT107));
            tmpMeta26 = stringAppend(tmpMeta25,_OMC_LIT108);
            tmp28 = tmpMeta26;
          }
          tmp1 = tmp28;
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta29;
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar109;
            modelica_metatype* tmp30;
            modelica_metatype tmpMeta31;
            modelica_metatype tmpMeta32;
            modelica_string __omcQ_24tmpVar108;
            modelica_integer tmp36;
            modelica_metatype _el_loopVar = 0;
            modelica_metatype _el;
            _el_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
            tmpMeta31 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar109 = tmpMeta31; /* defaultValue */
            tmp30 = &__omcQ_24tmpVar109;
            while(1) {
              tmp36 = 1;
              if (!listEmpty(_el_loopVar)) {
                _el = MMC_CAR(_el_loopVar);
                _el_loopVar = MMC_CDR(_el_loopVar);
                tmp36--;
              }
              if (tmp36 == 0) {
                {
                  modelica_metatype __omcQ_24tmpVar107;
                  modelica_metatype* tmp33;
                  modelica_metatype tmpMeta34;
                  modelica_string __omcQ_24tmpVar106;
                  modelica_integer tmp35;
                  modelica_metatype _e_loopVar = 0;
                  modelica_metatype _e;
                  _e_loopVar = _el;
                  tmpMeta34 = MMC_REFSTRUCTLIT(mmc_nil);
                  __omcQ_24tmpVar107 = tmpMeta34; /* defaultValue */
                  tmp33 = &__omcQ_24tmpVar107;
                  while(1) {
                    tmp35 = 1;
                    if (!listEmpty(_e_loopVar)) {
                      _e = MMC_CAR(_e_loopVar);
                      _e_loopVar = MMC_CDR(_e_loopVar);
                      tmp35--;
                    }
                    if (tmp35 == 0) {
                      __omcQ_24tmpVar106 = omc_NFExpression_toFlatString(threadData, _e, _format);
                      *tmp33 = mmc_mk_cons(__omcQ_24tmpVar106,0);
                      tmp33 = &MMC_CDR(*tmp33);
                    } else if (tmp35 == 1) {
                      break;
                    } else {
                      goto goto_2;
                    }
                  }
                  *tmp33 = mmc_mk_nil();
                  tmpMeta32 = __omcQ_24tmpVar107;
                }
                __omcQ_24tmpVar108 = stringDelimitList(tmpMeta32, _OMC_LIT107);
                *tmp30 = mmc_mk_cons(__omcQ_24tmpVar108,0);
                tmp30 = &MMC_CDR(*tmp30);
              } else if (tmp36 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp30 = mmc_mk_nil();
            tmpMeta29 = __omcQ_24tmpVar109;
          }
          tmpMeta37 = stringAppend(_OMC_LIT138,stringDelimitList(tmpMeta29, _OMC_LIT139));
          tmpMeta38 = stringAppend(tmpMeta37,_OMC_LIT140);
          tmp1 = tmpMeta38;
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta39;
          modelica_boolean tmp40;
          modelica_string tmp41;
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          modelica_metatype tmpMeta44;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp40 = (modelica_boolean)isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          if(tmp40)
          {
            tmpMeta39 = stringAppend(_OMC_LIT47,omc_NFExpression_operandFlatString(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))), _exp, 0 /* false */, _format));
            tmp41 = tmpMeta39;
          }
          else
          {
            tmp41 = _OMC_LIT20;
          }
          tmpMeta42 = stringAppend(omc_NFExpression_operandFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _exp, 0 /* false */, _format),tmp41);
          tmpMeta43 = stringAppend(tmpMeta42,_OMC_LIT47);
          tmpMeta44 = stringAppend(tmpMeta43,omc_NFExpression_operandFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _exp, 0 /* false */, _format));
          tmp1 = tmpMeta44;
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta45;
          modelica_metatype tmpMeta49;
          modelica_metatype tmpMeta50;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar111;
            modelica_metatype* tmp46;
            modelica_metatype tmpMeta47;
            modelica_string __omcQ_24tmpVar110;
            modelica_integer tmp48;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta47 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar111 = tmpMeta47; /* defaultValue */
            tmp46 = &__omcQ_24tmpVar111;
            while(1) {
              tmp48 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp48--;
              }
              if (tmp48 == 0) {
                __omcQ_24tmpVar110 = omc_NFExpression_toFlatString(threadData, _e, _format);
                *tmp46 = mmc_mk_cons(__omcQ_24tmpVar110,0);
                tmp46 = &MMC_CDR(*tmp46);
              } else if (tmp48 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp46 = mmc_mk_nil();
            tmpMeta45 = __omcQ_24tmpVar111;
          }
          tmpMeta49 = stringAppend(_OMC_LIT133,stringDelimitList(tmpMeta45, _OMC_LIT107));
          tmpMeta50 = stringAppend(tmpMeta49,_OMC_LIT134);
          tmp1 = tmpMeta50;
          goto tmp3_done;
        }
        case 12: {
          modelica_metatype tmpMeta51;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta51 = mmc_mk_box1(0, _format);
          tmp1 = omc_List_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), (modelica_fnptr) mmc_mk_box2(0,closure24_NFExpression_toFlatString,tmpMeta51), omc_NFType_toFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _format), _OMC_LIT133, _OMC_LIT107, _OMC_LIT134, 1 /* true */, ((modelica_integer) 0));
          goto tmp3_done;
        }
        case 13: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFCall_toFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _format);
          goto tmp3_done;
        }
        case 14: {
          modelica_metatype tmpMeta52;
          modelica_metatype tmpMeta53;
          modelica_boolean tmp54;
          modelica_string tmp55;
          modelica_metatype tmpMeta56;
          modelica_metatype tmpMeta57;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta52 = stringAppend(_OMC_LIT141,omc_NFExpression_toFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _format));
          tmp54 = (modelica_boolean)isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          if(tmp54)
          {
            tmpMeta53 = stringAppend(_OMC_LIT107,omc_NFExpression_toFlatString(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), _format));
            tmp55 = tmpMeta53;
          }
          else
          {
            tmp55 = _OMC_LIT20;
          }
          tmpMeta56 = stringAppend(tmpMeta52,tmp55);
          tmpMeta57 = stringAppend(tmpMeta56,_OMC_LIT134);
          tmp1 = tmpMeta57;
          goto tmp3_done;
        }
        case 15: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT142;
          goto tmp3_done;
        }
        case 16: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!listEmpty((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))))) goto tmp3_end;
          tmp1 = omc_NFExpression_multaryFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _exp, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _format, 0 /* false */);
          goto tmp3_done;
        }
        case 17: {
          modelica_metatype tmpMeta58;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(listEmpty((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) && omc_NFOperator_isDashClassification(threadData, omc_NFOperator_getMathClassification(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))))))) goto tmp3_end;
          tmpMeta58 = stringAppend(_OMC_LIT143,omc_NFExpression_multaryFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _exp, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _format, 1 /* true */));
          tmp1 = tmpMeta58;
          goto tmp3_done;
        }
        case 18: {
          modelica_metatype tmpMeta59;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!listEmpty((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))) goto tmp3_end;
          tmpMeta59 = stringAppend(_OMC_LIT144,omc_NFExpression_multaryFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _exp, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _format, 1 /* true */));
          tmp1 = tmpMeta59;
          goto tmp3_done;
        }
        case 19: {
          modelica_metatype tmpMeta60;
          modelica_metatype tmpMeta61;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta60 = stringAppend(omc_NFExpression_multaryFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _exp, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _format, 1 /* true */),omc_NFOperator_symbol(threadData, omc_NFOperator_invert(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))), _OMC_LIT132));
          tmpMeta61 = stringAppend(tmpMeta60,omc_NFExpression_multaryFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _exp, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _format, 1 /* true */));
          tmp1 = tmpMeta61;
          goto tmp3_done;
        }
        case 20: {
          modelica_metatype tmpMeta62;
          modelica_metatype tmpMeta63;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta62 = stringAppend(omc_NFExpression_operandFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _exp, 1 /* true */, _format),omc_NFOperator_symbol(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _OMC_LIT132));
          tmpMeta63 = stringAppend(tmpMeta62,omc_NFExpression_operandFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _exp, 0 /* false */, _format));
          tmp1 = tmpMeta63;
          goto tmp3_done;
        }
        case 21: {
          modelica_metatype tmpMeta64;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta64 = stringAppend(omc_NFOperator_symbol(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _OMC_LIT20),omc_NFExpression_operandFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _exp, 0 /* false */, _format));
          tmp1 = tmpMeta64;
          goto tmp3_done;
        }
        case 22: {
          modelica_metatype tmpMeta65;
          modelica_metatype tmpMeta66;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta65 = stringAppend(omc_NFExpression_operandFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _exp, 1 /* true */, _format),omc_NFOperator_symbol(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _OMC_LIT132));
          tmpMeta66 = stringAppend(tmpMeta65,omc_NFExpression_operandFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _exp, 0 /* false */, _format));
          tmp1 = tmpMeta66;
          goto tmp3_done;
        }
        case 23: {
          modelica_metatype tmpMeta67;
          modelica_metatype tmpMeta68;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta67 = stringAppend(omc_NFOperator_symbol(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _OMC_LIT20),_OMC_LIT132);
          tmpMeta68 = stringAppend(tmpMeta67,omc_NFExpression_operandFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _exp, 0 /* false */, _format));
          tmp1 = tmpMeta68;
          goto tmp3_done;
        }
        case 24: {
          modelica_metatype tmpMeta69;
          modelica_metatype tmpMeta70;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta69 = stringAppend(omc_NFExpression_operandFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _exp, 1 /* true */, _format),omc_NFOperator_symbol(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _OMC_LIT132));
          tmpMeta70 = stringAppend(tmpMeta69,omc_NFExpression_operandFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _exp, 0 /* false */, _format));
          tmp1 = tmpMeta70;
          goto tmp3_done;
        }
        case 25: {
          modelica_metatype tmpMeta71;
          modelica_metatype tmpMeta72;
          modelica_metatype tmpMeta73;
          modelica_metatype tmpMeta74;
          modelica_metatype tmpMeta75;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta71 = stringAppend(_OMC_LIT145,omc_NFExpression_toFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _format));
          tmpMeta72 = stringAppend(tmpMeta71,_OMC_LIT146);
          tmpMeta73 = stringAppend(tmpMeta72,omc_NFExpression_toFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _format));
          tmpMeta74 = stringAppend(tmpMeta73,_OMC_LIT147);
          tmpMeta75 = stringAppend(tmpMeta74,omc_NFExpression_toFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _format));
          tmp1 = tmpMeta75;
          goto tmp3_done;
        }
        case 26: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,23,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 27: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,25,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 28: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 29: {
          modelica_metatype tmpMeta76;
          modelica_metatype tmpMeta77;
          modelica_metatype tmpMeta78;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta76 = stringAppend(_OMC_LIT133,omc_NFExpression_toFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _format));
          tmpMeta77 = stringAppend(tmpMeta76,_OMC_LIT134);
          tmpMeta78 = stringAppend(tmpMeta77,omc_NFSubscript_toFlatStringList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _format));
          tmp1 = tmpMeta78;
          goto tmp3_done;
        }
        case 30: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 31: {
          modelica_metatype tmpMeta79;
          modelica_metatype tmpMeta80;
          modelica_metatype tmpMeta81;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,28,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta79 = stringAppend(_OMC_LIT133,omc_NFExpression_toFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _format));
          tmpMeta80 = stringAppend(tmpMeta79,_OMC_LIT148);
          tmpMeta81 = stringAppend(tmpMeta80,(MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          tmp1 = tmpMeta81;
          goto tmp3_done;
        }
        case 32: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,29,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 33: {
          modelica_metatype tmpMeta82;
          modelica_metatype tmpMeta83;
          modelica_metatype tmpMeta84;
          modelica_metatype tmpMeta85;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,33,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta82 = stringAppend(_OMC_LIT149,intString(mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))));
          tmpMeta83 = stringAppend(tmpMeta82,_OMC_LIT107);
          tmpMeta84 = stringAppend(tmpMeta83,omc_NFExpression_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          tmpMeta85 = stringAppend(tmpMeta84,_OMC_LIT140);
          tmp1 = tmpMeta85;
          goto tmp3_done;
        }
        case 34: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,30,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT150;
          goto tmp3_done;
        }
        case 35: {
          modelica_metatype tmpMeta86;
          modelica_metatype tmpMeta87;
          modelica_metatype tmpMeta88;
          modelica_metatype tmpMeta94;
          modelica_metatype tmpMeta95;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,31,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta86 = stringAppend(_OMC_LIT151,omc_NFComponentRef_toFlatString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _format));
          tmpMeta87 = stringAppend(tmpMeta86,_OMC_LIT133);
          {
            modelica_metatype __omcQ_24tmpVar113;
            modelica_metatype* tmp89;
            modelica_metatype tmpMeta90;
            modelica_metatype tmpMeta91;
            modelica_metatype tmpMeta92;
            modelica_string __omcQ_24tmpVar112;
            modelica_integer tmp93;
            modelica_metatype _a_loopVar = 0;
            modelica_metatype _a;
            modelica_metatype _n_loopVar = 0;
            modelica_metatype _n;
            _a_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            _n_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)));
            tmpMeta90 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar113 = tmpMeta90; /* defaultValue */
            tmp89 = &__omcQ_24tmpVar113;
            while(1) {
              tmp93 = 2;
              if (!listEmpty(_a_loopVar)) {
                _a = MMC_CAR(_a_loopVar);
                _a_loopVar = MMC_CDR(_a_loopVar);
                tmp93--;
              }if (!listEmpty(_n_loopVar)) {
                _n = MMC_CAR(_n_loopVar);
                _n_loopVar = MMC_CDR(_n_loopVar);
                tmp93--;
              }
              if (tmp93 == 0) {
                tmpMeta91 = stringAppend(_n,_OMC_LIT152);
                tmpMeta92 = stringAppend(tmpMeta91,omc_NFExpression_toFlatString(threadData, _a, _format));
                __omcQ_24tmpVar112 = tmpMeta92;
                *tmp89 = mmc_mk_cons(__omcQ_24tmpVar112,0);
                tmp89 = &MMC_CDR(*tmp89);
              } else if (tmp93 == 2) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp89 = mmc_mk_nil();
            tmpMeta88 = __omcQ_24tmpVar113;
          }
          tmpMeta94 = stringAppend(tmpMeta87,stringDelimitList(tmpMeta88, _OMC_LIT107));
          tmpMeta95 = stringAppend(tmpMeta94,_OMC_LIT134);
          tmp1 = tmpMeta95;
          goto tmp3_done;
        }
        case 36: {
          modelica_metatype tmpMeta96;
          modelica_metatype tmpMeta97;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,32,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta96 = stringAppend(_OMC_LIT135,omc_Util_escapeModelicaStringToCString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          tmpMeta97 = stringAppend(tmpMeta96,_OMC_LIT135);
          tmp1 = tmpMeta97;
          goto tmp3_done;
        }
        case 37: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,34,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT153;
          goto tmp3_done;
        }
        case 38: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_anyString(_exp);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _str = tmp1;
  _return: OMC_LABEL_UNUSED
  return _str;
}

DLLDirection
modelica_string omc_NFExpression_toString(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_string _str = NULL;
  modelica_metatype _t = NULL;
  modelica_metatype _clk = NULL;
  modelica_metatype _first = NULL;
  modelica_metatype _first_inv = NULL;
  modelica_metatype _rest = NULL;
  modelica_metatype _rest_inv = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _str has no default value.
  // _t has no default value.
  // _clk has no default value.
  // _first has no default value.
  // _first_inv has no default value.
  // _rest has no default value.
  // _rest_inv has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 39; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = intString(mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = realString(mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta6 = stringAppend(_OMC_LIT135,omc_System_escapedString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), 0 /* false */));
          tmpMeta7 = stringAppend(tmpMeta6,_OMC_LIT135);
          tmp1 = tmpMeta7;
          goto tmp3_done;
        }
        case 3: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))?_OMC_LIT29:_OMC_LIT30);
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,3) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,5,2) == 0) goto tmp3_end;
          
          _t = tmpMeta8;
          /* Pattern matching succeeded */
          tmpMeta9 = stringAppend(omc_AbsynUtil_pathString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_t), 2))), _OMC_LIT13, 1 /* true */, 0 /* false */),_OMC_LIT13);
          tmpMeta10 = stringAppend(tmpMeta9,(MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          tmp1 = tmpMeta10;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta11;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,1) == 0) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          _clk = tmpMeta11;
          /* Pattern matching succeeded */
          tmp1 = omc_NFClockKind_toString(threadData, _clk);
          goto tmp3_done;
        }
        case 6: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFComponentRef_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp3_done;
        }
        case 7: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFType_typenameString(threadData, omc_NFType_arrayElementType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar115;
            modelica_metatype* tmp13;
            modelica_metatype tmpMeta14;
            modelica_string __omcQ_24tmpVar114;
            modelica_integer tmp15;
            modelica_metatype _e_loopVar = 0;
            modelica_integer tmp16;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmp16 = 1;
            tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar115 = tmpMeta14; /* defaultValue */
            tmp13 = &__omcQ_24tmpVar115;
            while(1) {
              tmp15 = 1;
              if (tmp16 <= arrayLength(_e_loopVar)) {
                _e = arrayGet(_e_loopVar, tmp16++);
                tmp15--;
              }
              if (tmp15 == 0) {
                __omcQ_24tmpVar114 = omc_NFExpression_toString(threadData, _e);
                *tmp13 = mmc_mk_cons(__omcQ_24tmpVar114,0);
                tmp13 = &MMC_CDR(*tmp13);
              } else if (tmp15 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp13 = mmc_mk_nil();
            tmpMeta12 = __omcQ_24tmpVar115;
          }
          tmpMeta17 = stringAppend(_OMC_LIT137,stringDelimitList(tmpMeta12, _OMC_LIT107));
          tmpMeta18 = stringAppend(tmpMeta17,_OMC_LIT108);
          tmp1 = tmpMeta18;
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar119;
            modelica_metatype* tmp20;
            modelica_metatype tmpMeta21;
            modelica_metatype tmpMeta22;
            modelica_string __omcQ_24tmpVar118;
            modelica_integer tmp26;
            modelica_metatype _el_loopVar = 0;
            modelica_metatype _el;
            _el_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
            tmpMeta21 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar119 = tmpMeta21; /* defaultValue */
            tmp20 = &__omcQ_24tmpVar119;
            while(1) {
              tmp26 = 1;
              if (!listEmpty(_el_loopVar)) {
                _el = MMC_CAR(_el_loopVar);
                _el_loopVar = MMC_CDR(_el_loopVar);
                tmp26--;
              }
              if (tmp26 == 0) {
                {
                  modelica_metatype __omcQ_24tmpVar117;
                  modelica_metatype* tmp23;
                  modelica_metatype tmpMeta24;
                  modelica_string __omcQ_24tmpVar116;
                  modelica_integer tmp25;
                  modelica_metatype _e_loopVar = 0;
                  modelica_metatype _e;
                  _e_loopVar = _el;
                  tmpMeta24 = MMC_REFSTRUCTLIT(mmc_nil);
                  __omcQ_24tmpVar117 = tmpMeta24; /* defaultValue */
                  tmp23 = &__omcQ_24tmpVar117;
                  while(1) {
                    tmp25 = 1;
                    if (!listEmpty(_e_loopVar)) {
                      _e = MMC_CAR(_e_loopVar);
                      _e_loopVar = MMC_CDR(_e_loopVar);
                      tmp25--;
                    }
                    if (tmp25 == 0) {
                      __omcQ_24tmpVar116 = omc_NFExpression_toString(threadData, _e);
                      *tmp23 = mmc_mk_cons(__omcQ_24tmpVar116,0);
                      tmp23 = &MMC_CDR(*tmp23);
                    } else if (tmp25 == 1) {
                      break;
                    } else {
                      goto goto_2;
                    }
                  }
                  *tmp23 = mmc_mk_nil();
                  tmpMeta22 = __omcQ_24tmpVar117;
                }
                __omcQ_24tmpVar118 = stringDelimitList(tmpMeta22, _OMC_LIT107);
                *tmp20 = mmc_mk_cons(__omcQ_24tmpVar118,0);
                tmp20 = &MMC_CDR(*tmp20);
              } else if (tmp26 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp20 = mmc_mk_nil();
            tmpMeta19 = __omcQ_24tmpVar119;
          }
          tmpMeta27 = stringAppend(_OMC_LIT138,stringDelimitList(tmpMeta19, _OMC_LIT139));
          tmpMeta28 = stringAppend(tmpMeta27,_OMC_LIT140);
          tmp1 = tmpMeta28;
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta29;
          modelica_boolean tmp30;
          modelica_string tmp31;
          modelica_metatype tmpMeta32;
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp30 = (modelica_boolean)isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          if(tmp30)
          {
            tmpMeta29 = stringAppend(_OMC_LIT47,omc_NFExpression_operandString(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))), _exp, 0 /* false */));
            tmp31 = tmpMeta29;
          }
          else
          {
            tmp31 = _OMC_LIT20;
          }
          tmpMeta32 = stringAppend(omc_NFExpression_operandString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _exp, 0 /* false */),tmp31);
          tmpMeta33 = stringAppend(tmpMeta32,_OMC_LIT47);
          tmpMeta34 = stringAppend(tmpMeta33,omc_NFExpression_operandString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _exp, 0 /* false */));
          tmp1 = tmpMeta34;
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          {
            modelica_metatype __omcQ_24tmpVar121;
            modelica_metatype* tmp36;
            modelica_metatype tmpMeta37;
            modelica_string __omcQ_24tmpVar120;
            modelica_integer tmp38;
            modelica_metatype _e_loopVar = 0;
            modelica_metatype _e;
            _e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            tmpMeta37 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar121 = tmpMeta37; /* defaultValue */
            tmp36 = &__omcQ_24tmpVar121;
            while(1) {
              tmp38 = 1;
              if (!listEmpty(_e_loopVar)) {
                _e = MMC_CAR(_e_loopVar);
                _e_loopVar = MMC_CDR(_e_loopVar);
                tmp38--;
              }
              if (tmp38 == 0) {
                __omcQ_24tmpVar120 = omc_NFExpression_toString(threadData, _e);
                *tmp36 = mmc_mk_cons(__omcQ_24tmpVar120,0);
                tmp36 = &MMC_CDR(*tmp36);
              } else if (tmp38 == 1) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp36 = mmc_mk_nil();
            tmpMeta35 = __omcQ_24tmpVar121;
          }
          tmpMeta39 = stringAppend(_OMC_LIT133,stringDelimitList(tmpMeta35, _OMC_LIT107));
          tmpMeta40 = stringAppend(tmpMeta39,_OMC_LIT134);
          tmp1 = tmpMeta40;
          goto tmp3_done;
        }
        case 12: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_List_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), boxvar_NFExpression_toString, omc_AbsynUtil_pathString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _OMC_LIT13, 1 /* true */, 0 /* false */), _OMC_LIT133, _OMC_LIT107, _OMC_LIT134, 1 /* true */, ((modelica_integer) 0));
          goto tmp3_done;
        }
        case 13: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFCall_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 14: {
          modelica_metatype tmpMeta41;
          modelica_metatype tmpMeta42;
          modelica_boolean tmp43;
          modelica_string tmp44;
          modelica_metatype tmpMeta45;
          modelica_metatype tmpMeta46;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta41 = stringAppend(_OMC_LIT141,omc_NFExpression_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          tmp43 = (modelica_boolean)isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          if(tmp43)
          {
            tmpMeta42 = stringAppend(_OMC_LIT107,omc_NFExpression_toString(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))))));
            tmp44 = tmpMeta42;
          }
          else
          {
            tmp44 = _OMC_LIT20;
          }
          tmpMeta45 = stringAppend(tmpMeta41,tmp44);
          tmpMeta46 = stringAppend(tmpMeta45,_OMC_LIT134);
          tmp1 = tmpMeta46;
          goto tmp3_done;
        }
        case 15: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT142;
          goto tmp3_done;
        }
        case 16: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!listEmpty((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))))) goto tmp3_end;
          tmp1 = omc_NFExpression_multaryString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _exp, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), 0 /* false */);
          goto tmp3_done;
        }
        case 17: {
          modelica_metatype tmpMeta47;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!(listEmpty((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) && omc_NFOperator_isDashClassification(threadData, omc_NFOperator_getMathClassification(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))))))) goto tmp3_end;
          tmpMeta47 = stringAppend(_OMC_LIT143,omc_NFExpression_multaryString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _exp, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), 1 /* true */));
          tmp1 = tmpMeta47;
          goto tmp3_done;
        }
        case 18: {
          modelica_metatype tmpMeta48;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!listEmpty((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))) goto tmp3_end;
          tmpMeta48 = stringAppend(_OMC_LIT144,omc_NFExpression_multaryString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _exp, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), 1 /* true */));
          tmp1 = tmpMeta48;
          goto tmp3_done;
        }
        case 19: {
          modelica_metatype tmpMeta49;
          modelica_metatype tmpMeta50;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta49 = stringAppend(omc_NFExpression_multaryString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _exp, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), 1 /* true */),omc_NFOperator_symbol(threadData, omc_NFOperator_invert(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))), _OMC_LIT132));
          tmpMeta50 = stringAppend(tmpMeta49,omc_NFExpression_multaryString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _exp, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), 1 /* true */));
          tmp1 = tmpMeta50;
          goto tmp3_done;
        }
        case 20: {
          modelica_metatype tmpMeta51;
          modelica_metatype tmpMeta52;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta51 = stringAppend(omc_NFExpression_operandString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _exp, 1 /* true */),omc_NFOperator_symbol(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _OMC_LIT132));
          tmpMeta52 = stringAppend(tmpMeta51,omc_NFExpression_operandString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _exp, 0 /* false */));
          tmp1 = tmpMeta52;
          goto tmp3_done;
        }
        case 21: {
          modelica_metatype tmpMeta53;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta53 = stringAppend(omc_NFOperator_symbol(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _OMC_LIT20),omc_NFExpression_operandString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _exp, 0 /* false */));
          tmp1 = tmpMeta53;
          goto tmp3_done;
        }
        case 22: {
          modelica_metatype tmpMeta54;
          modelica_metatype tmpMeta55;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta54 = stringAppend(omc_NFExpression_operandString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _exp, 1 /* true */),omc_NFOperator_symbol(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _OMC_LIT132));
          tmpMeta55 = stringAppend(tmpMeta54,omc_NFExpression_operandString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _exp, 0 /* false */));
          tmp1 = tmpMeta55;
          goto tmp3_done;
        }
        case 23: {
          modelica_metatype tmpMeta56;
          modelica_metatype tmpMeta57;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta56 = stringAppend(omc_NFOperator_symbol(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _OMC_LIT20),_OMC_LIT132);
          tmpMeta57 = stringAppend(tmpMeta56,omc_NFExpression_operandString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _exp, 0 /* false */));
          tmp1 = tmpMeta57;
          goto tmp3_done;
        }
        case 24: {
          modelica_metatype tmpMeta58;
          modelica_metatype tmpMeta59;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta58 = stringAppend(omc_NFExpression_operandString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _exp, 1 /* true */),omc_NFOperator_symbol(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _OMC_LIT132));
          tmpMeta59 = stringAppend(tmpMeta58,omc_NFExpression_operandString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _exp, 0 /* false */));
          tmp1 = tmpMeta59;
          goto tmp3_done;
        }
        case 25: {
          modelica_metatype tmpMeta60;
          modelica_metatype tmpMeta61;
          modelica_metatype tmpMeta62;
          modelica_metatype tmpMeta63;
          modelica_metatype tmpMeta64;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta60 = stringAppend(_OMC_LIT145,omc_NFExpression_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          tmpMeta61 = stringAppend(tmpMeta60,_OMC_LIT146);
          tmpMeta62 = stringAppend(tmpMeta61,omc_NFExpression_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))));
          tmpMeta63 = stringAppend(tmpMeta62,_OMC_LIT147);
          tmpMeta64 = stringAppend(tmpMeta63,omc_NFExpression_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)))));
          tmp1 = tmpMeta64;
          goto tmp3_done;
        }
        case 26: {
          modelica_metatype tmpMeta65;
          modelica_metatype tmpMeta66;
          modelica_metatype tmpMeta67;
          modelica_metatype tmpMeta68;
          modelica_boolean tmp69;
          modelica_string tmp70;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,23,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp69 = (modelica_boolean)omc_Flags_isSet(threadData, _OMC_LIT157);
          if(tmp69)
          {
            /* Tail recursive call */
            _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            goto _tailrecursive;
            /* TODO: Make sure any eventual dead code below is never generated */
          }
          else
          {
            tmpMeta65 = stringAppend(_OMC_LIT158,omc_NFType_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
            tmpMeta66 = stringAppend(tmpMeta65,_OMC_LIT107);
            tmpMeta67 = stringAppend(tmpMeta66,omc_NFExpression_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
            tmpMeta68 = stringAppend(tmpMeta67,_OMC_LIT134);
            tmp70 = tmpMeta68;
          }
          tmp1 = tmp70;
          goto tmp3_done;
        }
        case 27: {
          modelica_metatype tmpMeta71;
          modelica_metatype tmpMeta72;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta71 = stringAppend(_OMC_LIT159,omc_NFExpression_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          tmpMeta72 = stringAppend(tmpMeta71,_OMC_LIT134);
          tmp1 = tmpMeta72;
          goto tmp3_done;
        }
        case 28: {
          modelica_metatype tmpMeta73;
          modelica_metatype tmpMeta74;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,25,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta73 = stringAppend(_OMC_LIT160,omc_NFExpression_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          tmpMeta74 = stringAppend(tmpMeta73,_OMC_LIT134);
          tmp1 = tmpMeta74;
          goto tmp3_done;
        }
        case 29: {
          modelica_metatype tmpMeta75;
          modelica_metatype tmpMeta76;
          modelica_metatype tmpMeta77;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta75 = stringAppend(_OMC_LIT133,omc_NFExpression_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          tmpMeta76 = stringAppend(tmpMeta75,_OMC_LIT134);
          tmpMeta77 = stringAppend(tmpMeta76,omc_NFSubscript_toStringList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          tmp1 = tmpMeta77;
          goto tmp3_done;
        }
        case 30: {
          modelica_metatype tmpMeta78;
          modelica_metatype tmpMeta79;
          modelica_metatype tmpMeta80;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta78 = stringAppend(omc_NFExpression_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))),_OMC_LIT138);
          tmpMeta79 = stringAppend(tmpMeta78,intString(mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))))));
          tmpMeta80 = stringAppend(tmpMeta79,_OMC_LIT140);
          tmp1 = tmpMeta80;
          goto tmp3_done;
        }
        case 31: {
          modelica_metatype tmpMeta81;
          modelica_metatype tmpMeta82;
          modelica_metatype tmpMeta83;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,28,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta81 = stringAppend(_OMC_LIT133,omc_NFExpression_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          tmpMeta82 = stringAppend(tmpMeta81,_OMC_LIT148);
          tmpMeta83 = stringAppend(tmpMeta82,(MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          tmp1 = tmpMeta83;
          goto tmp3_done;
        }
        case 32: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,29,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 33: {
          modelica_metatype tmpMeta84;
          modelica_metatype tmpMeta85;
          modelica_metatype tmpMeta86;
          modelica_metatype tmpMeta87;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,33,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta84 = stringAppend(_OMC_LIT161,intString(mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))));
          tmpMeta85 = stringAppend(tmpMeta84,_OMC_LIT107);
          tmpMeta86 = stringAppend(tmpMeta85,omc_NFExpression_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          tmpMeta87 = stringAppend(tmpMeta86,_OMC_LIT134);
          tmp1 = tmpMeta87;
          goto tmp3_done;
        }
        case 34: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,30,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT150;
          goto tmp3_done;
        }
        case 35: {
          modelica_metatype tmpMeta88;
          modelica_metatype tmpMeta89;
          modelica_metatype tmpMeta90;
          modelica_metatype tmpMeta96;
          modelica_metatype tmpMeta97;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,31,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta88 = stringAppend(_OMC_LIT151,omc_NFComponentRef_toString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          tmpMeta89 = stringAppend(tmpMeta88,_OMC_LIT133);
          {
            modelica_metatype __omcQ_24tmpVar123;
            modelica_metatype* tmp91;
            modelica_metatype tmpMeta92;
            modelica_metatype tmpMeta93;
            modelica_metatype tmpMeta94;
            modelica_string __omcQ_24tmpVar122;
            modelica_integer tmp95;
            modelica_metatype _a_loopVar = 0;
            modelica_metatype _a;
            modelica_metatype _n_loopVar = 0;
            modelica_metatype _n;
            _a_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
            _n_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)));
            tmpMeta92 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar123 = tmpMeta92; /* defaultValue */
            tmp91 = &__omcQ_24tmpVar123;
            while(1) {
              tmp95 = 2;
              if (!listEmpty(_a_loopVar)) {
                _a = MMC_CAR(_a_loopVar);
                _a_loopVar = MMC_CDR(_a_loopVar);
                tmp95--;
              }if (!listEmpty(_n_loopVar)) {
                _n = MMC_CAR(_n_loopVar);
                _n_loopVar = MMC_CDR(_n_loopVar);
                tmp95--;
              }
              if (tmp95 == 0) {
                tmpMeta93 = stringAppend(_n,_OMC_LIT152);
                tmpMeta94 = stringAppend(tmpMeta93,omc_NFExpression_toString(threadData, _a));
                __omcQ_24tmpVar122 = tmpMeta94;
                *tmp91 = mmc_mk_cons(__omcQ_24tmpVar122,0);
                tmp91 = &MMC_CDR(*tmp91);
              } else if (tmp95 == 2) {
                break;
              } else {
                goto goto_2;
              }
            }
            *tmp91 = mmc_mk_nil();
            tmpMeta90 = __omcQ_24tmpVar123;
          }
          tmpMeta96 = stringAppend(tmpMeta89,stringDelimitList(tmpMeta90, _OMC_LIT107));
          tmpMeta97 = stringAppend(tmpMeta96,_OMC_LIT134);
          tmp1 = tmpMeta97;
          goto tmp3_done;
        }
        case 36: {
          modelica_metatype tmpMeta98;
          modelica_metatype tmpMeta99;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,32,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta98 = stringAppend(_OMC_LIT135,omc_System_escapedString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), 0 /* false */));
          tmpMeta99 = stringAppend(tmpMeta98,_OMC_LIT135);
          tmp1 = tmpMeta99;
          goto tmp3_done;
        }
        case 37: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,34,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT153;
          goto tmp3_done;
        }
        case 38: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_anyString(_exp);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _str = tmp1;
  _return: OMC_LABEL_UNUSED
  return _str;
}

DLLDirection
modelica_string omc_NFExpression_toStringTyped(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_string _str = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _str has no default value.
  tmpMeta1 = stringAppend(_OMC_LIT162,omc_NFType_toString(threadData, omc_NFExpression_typeOf(threadData, _exp)));
  tmpMeta2 = stringAppend(tmpMeta1,_OMC_LIT163);
  tmpMeta3 = stringAppend(tmpMeta2,omc_NFExpression_toString(threadData, _exp));
  _str = tmpMeta3;
  _return: OMC_LABEL_UNUSED
  return _str;
}

DLLDirection
modelica_integer omc_NFExpression_toInteger(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_integer _i;
  modelica_integer tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _i has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))?((modelica_integer) 2):((modelica_integer) 1));
          goto tmp3_done;
        }
        case 7: {
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _i = tmp1;
  _return: OMC_LABEL_UNUSED
  return _i;
}
modelica_metatype boxptr_NFExpression_toInteger(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_integer _i;
  modelica_metatype out_i;
  _i = omc_NFExpression_toInteger(threadData, _exp);
  out_i = mmc_mk_icon(_i);
  return out_i;
}

DLLDirection
modelica_boolean omc_NFExpression_isIntegerValue(threadData_t *threadData, modelica_metatype _exp, modelica_integer _value)
{
  modelica_boolean _result;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _result has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = (mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) == _value);
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _result = tmp1;
  _return: OMC_LABEL_UNUSED
  return _result;
}
modelica_metatype boxptr_NFExpression_isIntegerValue(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _value)
{
  modelica_integer tmp1;
  modelica_boolean _result;
  modelica_metatype out_result;
  tmp1 = mmc_unbox_integer(_value);
  _result = omc_NFExpression_isIntegerValue(threadData, _exp, tmp1);
  out_result = mmc_mk_icon(_result);
  return out_result;
}

DLLDirection
modelica_metatype omc_NFExpression_makeEnumLiterals(threadData_t *threadData, modelica_metatype _enumType)
{
  modelica_metatype _literals = NULL;
  modelica_metatype _lits = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _literals has no default value.
  // _lits has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _enumType;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,5,2) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  _lits = tmpMeta2;

  {
    modelica_metatype __omcQ_24tmpVar125;
    modelica_metatype* tmp4;
    modelica_metatype tmpMeta5;
    modelica_metatype tmpMeta6;
    modelica_metatype __omcQ_24tmpVar124;
    modelica_integer tmp7;
    modelica_metatype _l_loopVar = 0;
    modelica_metatype _l;
    modelica_integer tmp8;
    modelica_integer tmp9;
    modelica_integer _i;
    _l_loopVar = _lits;
    tmp8 = 1 /* Range step-value */;
    tmp9 = listLength(_lits) /* Range stop-value */;
    _i = ((modelica_integer) 1) /* Range start-value */;
    _i = (((modelica_integer) 1) /* Range start-value */)-tmp8;
    tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
    __omcQ_24tmpVar125 = tmpMeta5; /* defaultValue */
    tmp4 = &__omcQ_24tmpVar125;
    while(1) {
      tmp7 = 2;
      if (!listEmpty(_l_loopVar)) {
        _l = MMC_CAR(_l_loopVar);
        _l_loopVar = MMC_CDR(_l_loopVar);
        tmp7--;
      }if (tmp8 > 0 ? _i+tmp8 <= tmp9 : _i+tmp8 >= tmp9) {
        _i += tmp8;
        tmp7--;
      }
      if (tmp7 == 0) {
        tmpMeta6 = mmc_mk_box4(7, &NFExpression_ENUM__LITERAL__desc, _enumType, _l, mmc_mk_integer(_i));
        __omcQ_24tmpVar124 = tmpMeta6;
        *tmp4 = mmc_mk_cons(__omcQ_24tmpVar124,0);
        tmp4 = &MMC_CDR(*tmp4);
      } else if (tmp7 == 2) {
        break;
      } else {
        MMC_THROW_INTERNAL();
      }
    }
    *tmp4 = mmc_mk_nil();
    tmpMeta3 = __omcQ_24tmpVar125;
  }
  _literals = tmpMeta3;
  _return: OMC_LABEL_UNUSED
  return _literals;
}

DLLDirection
modelica_metatype omc_NFExpression_makeEnumLiteral(threadData_t *threadData, modelica_metatype _enumType, modelica_integer _index)
{
  modelica_metatype _literal = NULL;
  modelica_metatype _literals = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _literal has no default value.
  // _literals has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _enumType;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,5,2) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  _literals = tmpMeta2;

  tmpMeta3 = mmc_mk_box4(7, &NFExpression_ENUM__LITERAL__desc, _enumType, listGet(_literals, _index), mmc_mk_integer(_index));
  _literal = tmpMeta3;
  _return: OMC_LABEL_UNUSED
  return _literal;
}
modelica_metatype boxptr_NFExpression_makeEnumLiteral(threadData_t *threadData, modelica_metatype _enumType, modelica_metatype _index)
{
  modelica_integer tmp1;
  modelica_metatype _literal = NULL;
  tmp1 = mmc_unbox_integer(_index);
  _literal = omc_NFExpression_makeEnumLiteral(threadData, _enumType, tmp1);
  /* skip box _literal; NFExpression */
  return _literal;
}

DLLDirection
modelica_metatype omc_NFExpression_arrayFromList__impl(threadData_t *threadData, modelica_metatype _inExps, modelica_metatype _elemTy, modelica_metatype _inDims)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _ldim = NULL;
  modelica_metatype _restdims = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _newlst = NULL;
  modelica_metatype _partexps = NULL;
  modelica_integer _dimsize;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _ldim has no default value.
  // _restdims has no default value.
  // _ty has no default value.
  // _newlst has no default value.
  // _partexps has no default value.
  // _dimsize has no default value.
  omc_Error_assertion(threadData, (!listEmpty(_inDims)), _OMC_LIT164, _OMC_LIT165);

  /* Pattern-matching assignment */
  tmpMeta1 = _inDims;
  if (listEmpty(tmpMeta1)) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_CAR(tmpMeta1);
  tmpMeta3 = MMC_CDR(tmpMeta1);
  _ldim = tmpMeta2;
  _restdims = tmpMeta3;

  _dimsize = omc_NFDimension_size(threadData, _ldim, 0 /* false */);

  _ty = omc_NFType_liftArrayLeft(threadData, _elemTy, _ldim);

  if(omc_List_hasOneElement(threadData, _inDims))
  {
    omc_Error_assertion(threadData, (_dimsize == listLength(_inExps)), _OMC_LIT166, _OMC_LIT167);

    _outExp = omc_NFExpression_makeArray(threadData, _ty, listArray(_inExps), 0 /* false */);

    goto _return;
  }

  _partexps = omc_List_partition(threadData, _inExps, _dimsize);

  tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
  _newlst = tmpMeta4;

  {
    modelica_metatype _arrexp;
    for (tmpMeta5 = _partexps; !listEmpty(tmpMeta5); tmpMeta5=MMC_CDR(tmpMeta5))
    {
      _arrexp = MMC_CAR(tmpMeta5);
      tmpMeta6 = mmc_mk_cons(omc_NFExpression_makeArray(threadData, _ty, listArray(_arrexp), 0 /* false */), _newlst);
      _newlst = tmpMeta6;
    }
  }

  _newlst = listReverse(_newlst);

  /* Tail recursive call */
  _inExps = _newlst;
  _elemTy = _ty;
  _inDims = _restdims;
  goto _tailrecursive;
  /* TODO: Make sure any eventual dead code below is never generated */
  ;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_arrayFromList(threadData_t *threadData, modelica_metatype _inExps, modelica_metatype _elemTy, modelica_metatype _inDims)
{
  modelica_metatype _outExp = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  _outExp = omc_NFExpression_arrayFromList__impl(threadData, _inExps, _elemTy, listReverse(_inDims));
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

PROTECTED_FUNCTION_STATIC modelica_boolean omc_NFExpression_containsIterator_containsIterator2(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _iterator)
{
  modelica_boolean _res;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _res has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _node = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _node has no default value.
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          
          _node = tmpMeta7;
          /* Pattern matching succeeded */
          tmp1 = omc_NFInstNode_InstNode_refEqual(threadData, _node, _iterator);
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _res = tmp1;
  _return: OMC_LABEL_UNUSED
  return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_NFExpression_containsIterator_containsIterator2(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _iterator)
{
  modelica_boolean _res;
  modelica_metatype out_res;
  _res = omc_NFExpression_containsIterator_containsIterator2(threadData, _exp, _iterator);
  out_res = mmc_mk_icon(_res);
  return out_res;
}

static modelica_metatype closure25_NFExpression_containsIterator_containsIterator2(threadData_t *thData, modelica_metatype closure, modelica_metatype exp)
{
  modelica_metatype iterator = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_containsIterator_containsIterator2(thData, exp, iterator);
}
DLLDirection
modelica_boolean omc_NFExpression_containsIterator(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _iterator)
{
  modelica_boolean _res;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _res has no default value.
  tmpMeta1 = mmc_mk_box1(0, _iterator);
  _res = omc_NFExpression_contains(threadData, _exp, (modelica_fnptr) mmc_mk_box2(0,closure25_NFExpression_containsIterator_containsIterator2,tmpMeta1));
  _return: OMC_LABEL_UNUSED
  return _res;
}
modelica_metatype boxptr_NFExpression_containsIterator(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _iterator)
{
  modelica_boolean _res;
  modelica_metatype out_res;
  _res = omc_NFExpression_containsIterator(threadData, _exp, _iterator);
  out_res = mmc_mk_icon(_res);
  return out_res;
}

DLLDirection
modelica_metatype omc_NFExpression_replaceIterator2(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _iterator, modelica_metatype _iteratorValue)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _node = NULL;
      modelica_metatype _fields = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _node has no default value.
      // _fields has no default value.
      tmp4 = 0;
      for (; tmp4 < 3; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          
          _node = tmpMeta7;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_NFComponentRef_isSimple(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))))) goto tmp3_end;
          tmpMeta1 = (omc_NFInstNode_InstNode_refEqual(threadData, _iterator, _node)?_iteratorValue:_exp);
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,5) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _node = omc_NFComponentRef_node(threadData, omc_NFComponentRef_last(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));

          if(omc_NFInstNode_InstNode_refEqual(threadData, _iterator, _node))
          {
            _outExp = _iteratorValue;

            {
              modelica_metatype __omcQ_24tmpVar127;
              modelica_metatype* tmp10;
              modelica_metatype tmpMeta11;
              modelica_string __omcQ_24tmpVar126;
              modelica_integer tmp12;
              modelica_metatype _n_loopVar = 0;
              modelica_metatype tmpMeta13;
              modelica_metatype _n;
              tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
              _n_loopVar = listRest(omc_NFComponentRef_nodes(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), tmpMeta13));
              tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
              __omcQ_24tmpVar127 = tmpMeta11; /* defaultValue */
              tmp10 = &__omcQ_24tmpVar127;
              while(1) {
                tmp12 = 1;
                if (!listEmpty(_n_loopVar)) {
                  _n = MMC_CAR(_n_loopVar);
                  _n_loopVar = MMC_CDR(_n_loopVar);
                  tmp12--;
                }
                if (tmp12 == 0) {
                  __omcQ_24tmpVar126 = omc_NFInstNode_InstNode_name(threadData, _n);
                  *tmp10 = mmc_mk_cons(__omcQ_24tmpVar126,0);
                  tmp10 = &MMC_CDR(*tmp10);
                } else if (tmp12 == 1) {
                  break;
                } else {
                  goto goto_2;
                }
              }
              *tmp10 = mmc_mk_nil();
              tmpMeta9 = __omcQ_24tmpVar127;
            }
            _fields = tmpMeta9;

            {
              modelica_metatype _f;
              for (tmpMeta14 = _fields; !listEmpty(tmpMeta14); tmpMeta14=MMC_CDR(tmpMeta14))
              {
                _f = MMC_CAR(tmpMeta14);
                _outExp = omc_NFExpression_recordElement(threadData, _f, _outExp);
              }
            }
          }
          else
          {
            _outExp = _exp;
          }
          tmpMeta1 = _outExp;
          goto tmp3_done;
        }
        case 2: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

static modelica_metatype closure26_NFExpression_replaceIterator2(threadData_t *thData, modelica_metatype closure, modelica_metatype exp)
{
  modelica_metatype iterator = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype iteratorValue = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NFExpression_replaceIterator2(thData, exp, iterator, iteratorValue);
}
DLLDirection
modelica_metatype omc_NFExpression_replaceIterator(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _iterator, modelica_metatype _iteratorValue)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  tmpMeta1 = mmc_mk_box2(0, _iterator, _iteratorValue);
  _exp = omc_NFExpression_map(threadData, _exp, (modelica_fnptr) mmc_mk_box2(0,closure26_NFExpression_replaceIterator2,tmpMeta1));
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_makeSubscriptedExp(threadData_t *threadData, modelica_metatype _subscripts, modelica_metatype _exp, modelica_boolean _backend)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _e = NULL;
  modelica_metatype _subs = NULL;
  modelica_metatype _extra_subs = NULL;
  modelica_metatype _ty = NULL;
  modelica_integer _dim_count;
  modelica_boolean _split;
  modelica_boolean tmp1_c3 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _e has no default value.
  // _subs has no default value.
  // _extra_subs has no default value.
  // _ty has no default value.
  // _dim_count has no default value.
  // _split has no default value.
  
  
  
  
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          tmpMeta[0+1] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          tmpMeta[0+2] = omc_NFExpression_typeOf(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          tmp1_c3 = mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
          tmpMeta[0+0] = _exp;
          tmpMeta[0+1] = tmpMeta6;
          tmpMeta[0+2] = omc_NFExpression_typeOf(threadData, _exp);
          tmp1_c3 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _e = tmpMeta[0+0];
  _subs = tmpMeta[0+1];
  _ty = tmpMeta[0+2];
  _split = tmp1_c3;

  if((!_split))
  {
    _split = omc_List_any(threadData, _subscripts, boxvar_NFSubscript_isSplitIndex);
  }

  _dim_count = omc_NFType_dimensionCount(threadData, _ty);

  _subs = omc_NFSubscript_mergeList(threadData, _subscripts, _subs, _dim_count, _backend ,&_extra_subs);

  if((!listEmpty(_extra_subs)))
  {
    tmpMeta7 = stringAppend(_OMC_LIT168,omc_NFExpression_toString(threadData, _exp));
    tmpMeta8 = stringAppend(tmpMeta7,_OMC_LIT169);
    tmpMeta9 = stringAppend(tmpMeta8,omc_NFSubscript_toStringList(threadData, _subscripts));
    omc_Error_assertion(threadData, 0 /* false */, tmpMeta9, _OMC_LIT170);
  }

  _ty = omc_NFType_subscript(threadData, _ty, _subs, 1 /* true */);

  tmpMeta10 = mmc_mk_box5(29, &NFExpression_SUBSCRIPTED__EXP__desc, _e, _subs, _ty, mmc_mk_boolean(_split));
  _outExp = tmpMeta10;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}
modelica_metatype boxptr_NFExpression_makeSubscriptedExp(threadData_t *threadData, modelica_metatype _subscripts, modelica_metatype _exp, modelica_metatype _backend)
{
  modelica_integer tmp1;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_backend);
  _outExp = omc_NFExpression_makeSubscriptedExp(threadData, _subscripts, _exp, tmp1);
  /* skip box _outExp; NFExpression */
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_applySubscriptIf(threadData_t *threadData, modelica_metatype _subscript, modelica_metatype _exp, modelica_metatype _restSubscripts, modelica_boolean _applyToScope)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _cond = NULL;
  modelica_metatype _tb = NULL;
  modelica_metatype _fb = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta12;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _cond has no default value.
  // _tb has no default value.
  // _fb has no default value.
  // _ty has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _exp;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,22,4) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 4));
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 5));
  _ty = tmpMeta2;
  _cond = tmpMeta3;
  _tb = tmpMeta4;
  _fb = tmpMeta5;

  if(omc_NFType_isConditionalArray(threadData, _ty))
  {
    { /* matchcontinue expression */
      {
        volatile mmc_switch_type tmp8;
        int tmp9;
        tmp8 = 0;
        MMC_TRY_INTERNAL(mmc_jumper)
        tmp7_top:
        threadData->mmc_jumper = &new_mmc_jumper;
        for (; tmp8 < 2; tmp8++) {
          switch (MMC_SWITCH_CAST(tmp8)) {
          case 0: {
            modelica_metatype tmpMeta10;
            /* Pattern matching succeeded */
            _tb = omc_NFExpression_applySubscript(threadData, _subscript, _tb, _restSubscripts, _applyToScope);

            _fb = omc_NFExpression_applySubscript(threadData, _subscript, _fb, _restSubscripts, _applyToScope);

            _ty = omc_NFType_setConditionalArrayTypes(threadData, _ty, omc_NFExpression_typeOf(threadData, _tb), omc_NFExpression_typeOf(threadData, _fb));

            tmpMeta10 = mmc_mk_box5(25, &NFExpression_IF__desc, _ty, _cond, _tb, _fb);
            _outExp = tmpMeta10;
            goto tmp7_done;
          }
          case 1: {
            modelica_metatype tmpMeta11;
            /* Pattern matching succeeded */
            tmpMeta11 = mmc_mk_cons(_subscript, _restSubscripts);
            _outExp = omc_NFExpression_makeSubscriptedExp(threadData, tmpMeta11, _exp, 0 /* false */);
            goto tmp7_done;
          }
          }
          goto tmp7_end;
          tmp7_end: ;
        }
        goto goto_6;
        tmp7_done:
        (void)tmp8;
        MMC_RESTORE_INTERNAL(mmc_jumper);
        goto tmp7_done2;
        goto_6:;
        MMC_CATCH_INTERNAL(mmc_jumper);
        if (++tmp8 < 2) {
          goto tmp7_top;
        }
        MMC_THROW_INTERNAL();
        tmp7_done2:;
      }
    }
    ;
  }
  else
  {
    _tb = omc_NFExpression_applySubscript(threadData, _subscript, _tb, _restSubscripts, _applyToScope);

    _fb = omc_NFExpression_applySubscript(threadData, _subscript, _fb, _restSubscripts, _applyToScope);

    _ty = omc_NFExpression_typeOf(threadData, _tb);

    tmpMeta12 = mmc_mk_box5(25, &NFExpression_IF__desc, _ty, _cond, _tb, _fb);
    _outExp = tmpMeta12;
  }
  _return: OMC_LABEL_UNUSED
  return _outExp;
}
modelica_metatype boxptr_NFExpression_applySubscriptIf(threadData_t *threadData, modelica_metatype _subscript, modelica_metatype _exp, modelica_metatype _restSubscripts, modelica_metatype _applyToScope)
{
  modelica_integer tmp1;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_applyToScope);
  _outExp = omc_NFExpression_applySubscriptIf(threadData, _subscript, _exp, _restSubscripts, tmp1);
  /* skip box _outExp; NFExpression */
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_applyIndexSubscriptArrayConstructor(threadData_t *threadData, modelica_metatype _call, modelica_metatype _index)
{
  modelica_metatype _subscriptedExp = NULL;
  modelica_metatype _ty = NULL;
  modelica_integer _var;
  modelica_integer _pur;
  modelica_metatype _exp = NULL;
  modelica_metatype _iter_exp = NULL;
  modelica_metatype _iters = NULL;
  modelica_metatype _iter = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_integer tmp4;
  modelica_metatype tmpMeta5;
  modelica_integer tmp6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  modelica_metatype tmpMeta11;
  modelica_metatype tmpMeta12;
  modelica_metatype tmpMeta13;
  modelica_metatype tmpMeta14;
  modelica_metatype tmpMeta15;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _subscriptedExp has no default value.
  // _ty has no default value.
  // _var has no default value.
  // _pur has no default value.
  // _exp has no default value.
  // _iter_exp has no default value.
  // _iters has no default value.
  // _iter has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _call;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,4,5) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
  tmp4 = mmc_unbox_integer(tmpMeta3);
  tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 4));
  tmp6 = mmc_unbox_integer(tmpMeta5);
  tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 5));
  tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 6));
  _ty = tmpMeta2;
  _var = tmp4  /* pattern as ty=enumeration(CONSTANT, STRUCTURAL_PARAMETER, PARAMETER, NON_STRUCTURAL_PARAMETER, DISCRETE, IMPLICITLY_DISCRETE, CONTINUOUS) */;
  _pur = tmp6  /* pattern as ty=enumeration(PURE, IMPURE) */;
  _exp = tmpMeta7;
  _iters = tmpMeta8;

  /* Pattern-matching tuple assignment */
  tmpMeta10 = omc_List_splitLast(threadData, _iters, &tmpMeta9);
  tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 1));
  tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
  _iter = tmpMeta11;
  _iter_exp = tmpMeta12;
  _iters = tmpMeta9;

  tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
  _iter_exp = omc_NFExpression_applySubscript(threadData, _index, _iter_exp, tmpMeta13, 0 /* false */);

  _subscriptedExp = omc_NFExpression_replaceIterator(threadData, _exp, _iter, _iter_exp);

  if((!listEmpty(_iters)))
  {
    tmpMeta14 = mmc_mk_box6(7, &NFCall_TYPED__ARRAY__CONSTRUCTOR__desc, omc_NFType_unliftArray(threadData, _ty), mmc_mk_integer((modelica_integer)_var), mmc_mk_integer((modelica_integer)_pur), _subscriptedExp, _iters);
    tmpMeta15 = mmc_mk_box2(16, &NFExpression_CALL__desc, tmpMeta14);
    _subscriptedExp = tmpMeta15;
  }
  _return: OMC_LABEL_UNUSED
  return _subscriptedExp;
}

DLLDirection
modelica_metatype omc_NFExpression_applySubscriptArrayConstructor(threadData_t *threadData, modelica_metatype _subscript, modelica_metatype _call, modelica_metatype _restSubscripts)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  if((omc_NFSubscript_isIndex(threadData, _subscript) && listEmpty(_restSubscripts)))
  {
    _outExp = omc_NFExpression_applyIndexSubscriptArrayConstructor(threadData, _call, _subscript);
  }
  else
  {
    tmpMeta1 = mmc_mk_cons(_subscript, _restSubscripts);
    tmpMeta2 = mmc_mk_box2(16, &NFExpression_CALL__desc, _call);
    _outExp = omc_NFExpression_makeSubscriptedExp(threadData, tmpMeta1, tmpMeta2, 0 /* false */);
  }
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_applySubscriptCall(threadData_t *threadData, modelica_metatype _subscript, modelica_metatype _exp, modelica_metatype _restSubscripts, modelica_boolean _applyToScope)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _call = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _call has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _exp;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,13,1) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  _call = tmpMeta2;

  { /* match expression */
    modelica_metatype tmp6_1;
    tmp6_1 = _call;
    {
      modelica_metatype _arg = NULL;
      modelica_metatype _ty = NULL;
      volatile mmc_switch_type tmp6;
      int tmp7;
      // _arg has no default value.
      // _ty has no default value.
      tmp6 = 0;
      for (; tmp6 < 3; tmp6++) {
        switch (MMC_SWITCH_CAST(tmp6)) {
        case 0: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,2,6) == 0) goto tmp5_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 6));
          if (listEmpty(tmpMeta8)) goto tmp5_end;
          tmpMeta9 = MMC_CAR(tmpMeta8);
          tmpMeta10 = MMC_CDR(tmpMeta8);
          if (!listEmpty(tmpMeta10)) goto tmp5_end;
          
          _arg = tmpMeta9;
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_NFFunction_Function_isSubscriptableBuiltin(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_call), 2))))) goto tmp5_end;
          _arg = omc_NFExpression_applySubscript(threadData, _subscript, _arg, _restSubscripts, _applyToScope);

          _ty = omc_NFType_copyDims(threadData, omc_NFExpression_typeOf(threadData, _arg), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_call), 3))));
          tmpMeta11 = mmc_mk_cons(_arg, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta12 = mmc_mk_box7(5, &NFCall_TYPED__CALL__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_call), 2))), _ty, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_call), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_call), 5))), tmpMeta11, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_call), 7))));
          tmpMeta13 = mmc_mk_box2(16, &NFExpression_CALL__desc, tmpMeta12);
          tmpMeta3 = tmpMeta13;
          goto tmp5_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,4,5) == 0) goto tmp5_end;
          
          /* Pattern matching succeeded */
          tmpMeta3 = omc_NFExpression_applySubscriptArrayConstructor(threadData, _subscript, _call, _restSubscripts);
          goto tmp5_done;
        }
        case 2: {
          modelica_metatype tmpMeta14;
          
          /* Pattern matching succeeded */
          tmpMeta14 = mmc_mk_cons(_subscript, _restSubscripts);
          tmpMeta3 = omc_NFExpression_makeSubscriptedExp(threadData, tmpMeta14, _exp, 0 /* false */);
          goto tmp5_done;
        }
        }
        goto tmp5_end;
        tmp5_end: ;
      }
      goto goto_4;
      goto_4:;
      MMC_THROW_INTERNAL();
      goto tmp5_done;
      tmp5_done:;
    }
  }
  _outExp = tmpMeta3;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}
modelica_metatype boxptr_NFExpression_applySubscriptCall(threadData_t *threadData, modelica_metatype _subscript, modelica_metatype _exp, modelica_metatype _restSubscripts, modelica_metatype _applyToScope)
{
  modelica_integer tmp1;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_applyToScope);
  _outExp = omc_NFExpression_applySubscriptCall(threadData, _subscript, _exp, _restSubscripts, tmp1);
  /* skip box _outExp; NFExpression */
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_applyIndexSubscriptRange2(threadData_t *threadData, modelica_metatype _startExp, modelica_metatype _stepExp, modelica_metatype _stopExp, modelica_integer _index)
{
  modelica_metatype _subscriptedExp = NULL;
  modelica_integer _iidx;
  modelica_real _ridx;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _subscriptedExp has no default value.
  // _iidx has no default value.
  // _ridx has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _startExp;
    tmp4_2 = _stepExp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 6; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_integer tmp8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          if (optionNone(tmp4_2)) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,1) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
          tmp8 = mmc_unbox_integer(tmpMeta7);
          _iidx = tmp8  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmpMeta9 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer(mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_startExp), 2)))) + (((modelica_integer) -1) + _index) * (_iidx)));
          tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta10;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta10 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer(((modelica_integer) -1) + mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_startExp), 2)))) + _index));
          tmpMeta1 = tmpMeta10;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_real tmp13;
          modelica_metatype tmpMeta14;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          if (optionNone(tmp4_2)) goto tmp3_end;
          tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,1,1) == 0) goto tmp3_end;
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
          tmp13 = mmc_unbox_real(tmpMeta12);
          _ridx = tmp13  /* pattern as ty=Real */;
          /* Pattern matching succeeded */
          tmpMeta14 = mmc_mk_box2(4, &NFExpression_REAL__desc, mmc_mk_real(mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_startExp), 2)))) + (((modelica_real)((modelica_integer) -1) + _index)) * (_ridx)));
          tmpMeta1 = tmpMeta14;
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta15;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta15 = mmc_mk_box2(4, &NFExpression_REAL__desc, mmc_mk_real(-1.0 + mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_startExp), 2)))) + ((modelica_real)_index)));
          tmpMeta1 = tmpMeta15;
          goto tmp3_done;
        }
        case 4: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = ((_index == ((modelica_integer) 1))?_startExp:_stopExp);
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta16;
          modelica_integer tmp17;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,3) == 0) goto tmp3_end;
          tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          tmp17 = mmc_unbox_integer(tmpMeta16);
          
          _iidx = tmp17  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          _iidx = ((modelica_integer) -1) + _iidx + _index;
          tmpMeta1 = omc_NFExpression_nthEnumLiteral(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_startExp), 2))), _iidx);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _subscriptedExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _subscriptedExp;
}
modelica_metatype boxptr_NFExpression_applyIndexSubscriptRange2(threadData_t *threadData, modelica_metatype _startExp, modelica_metatype _stepExp, modelica_metatype _stopExp, modelica_metatype _index)
{
  modelica_integer tmp1;
  modelica_metatype _subscriptedExp = NULL;
  tmp1 = mmc_unbox_integer(_index);
  _subscriptedExp = omc_NFExpression_applyIndexSubscriptRange2(threadData, _startExp, _stepExp, _stopExp, tmp1);
  /* skip box _subscriptedExp; NFExpression */
  return _subscriptedExp;
}

DLLDirection
modelica_metatype omc_NFExpression_applyIndexSubscriptRange(threadData_t *threadData, modelica_metatype _rangeExp, modelica_metatype _index)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _index_exp = NULL;
  modelica_metatype _start_exp = NULL;
  modelica_metatype _stop_exp = NULL;
  modelica_metatype _step_exp = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _subs = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  modelica_metatype tmpMeta9;
  modelica_metatype tmpMeta10;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _index_exp has no default value.
  // _start_exp has no default value.
  // _stop_exp has no default value.
  // _step_exp has no default value.
  // _ty has no default value.
  // _subs has no default value.
  /* Pattern-matching assignment */
  tmpMeta1 = _index;
  if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,2,1) == 0) MMC_THROW_INTERNAL();
  tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
  _index_exp = tmpMeta2;

  if(omc_NFExpression_isScalarLiteral(threadData, _index_exp))
  {
    /* Pattern-matching assignment */
    tmpMeta3 = _rangeExp;
    if (mmc__uniontype__metarecord__typedef__equal(tmpMeta3,10,4) == 0) MMC_THROW_INTERNAL();
    tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 3));
    tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 4));
    tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 5));
    _start_exp = tmpMeta4;
    _step_exp = tmpMeta5;
    _stop_exp = tmpMeta6;

    _outExp = omc_NFExpression_applyIndexSubscriptRange2(threadData, _start_exp, _step_exp, _stop_exp, omc_NFExpression_toInteger(threadData, _index_exp));
  }
  else
  {
    /* Pattern-matching assignment */
    tmpMeta7 = _rangeExp;
    if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,10,4) == 0) MMC_THROW_INTERNAL();
    tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
    _ty = tmpMeta8;

    tmpMeta9 = mmc_mk_cons(_index, MMC_REFSTRUCTLIT(mmc_nil));
    _subs = tmpMeta9;

    _ty = omc_NFType_subscript(threadData, _ty, _subs, 1 /* true */);

    tmpMeta10 = mmc_mk_box5(29, &NFExpression_SUBSCRIPTED__EXP__desc, _rangeExp, _subs, _ty, mmc_mk_boolean(0 /* false */));
    _outExp = tmpMeta10;
  }
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

static modelica_metatype closure27_NFExpression_applyIndexSubscriptRange(threadData_t *thData, modelica_metatype closure, modelica_metatype index)
{
  modelica_metatype rangeExp = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_applyIndexSubscriptRange(thData, rangeExp, index);
}
DLLDirection
modelica_metatype omc_NFExpression_applySubscriptRange(threadData_t *threadData, modelica_metatype _subscript, modelica_metatype _exp)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _sub = NULL;
  modelica_metatype _start_exp = NULL;
  modelica_metatype _stop_exp = NULL;
  modelica_metatype _step_exp = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _expl = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _sub has no default value.
  // _start_exp has no default value.
  // _stop_exp has no default value.
  // _step_exp has no default value.
  // _ty has no default value.
  // _expl has no default value.
  _sub = omc_NFSubscript_expandSlice(threadData, _subscript, 0 /* false */, NULL);

  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _sub;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_applyIndexSubscriptRange(threadData, _exp, _sub);
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta5 = _exp;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta5,10,4) == 0) goto goto_2;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 2));
          _ty = tmpMeta6;

          tmpMeta7 = mmc_mk_cons(omc_NFSubscript_toDimension(threadData, _sub), MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta8 = mmc_mk_box3(10, &NFType_ARRAY__desc, omc_NFType_unliftArray(threadData, _ty), tmpMeta7);
          _ty = tmpMeta8;
          tmpMeta9 = mmc_mk_cons(_subscript, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta10 = mmc_mk_box5(29, &NFExpression_SUBSCRIPTED__EXP__desc, _exp, tmpMeta9, _ty, mmc_mk_boolean(0 /* false */));
          tmpMeta1 = tmpMeta10;
          goto tmp3_done;
        }
        case 8: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          
          /* Pattern matching succeeded */
          tmpMeta11 = mmc_mk_box1(0, _exp);
          _expl = omc_Array_mapList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sub), 2))), (modelica_fnptr) mmc_mk_box2(0,closure27_NFExpression_applyIndexSubscriptRange,tmpMeta11));

          /* Pattern-matching assignment */
          tmpMeta12 = _exp;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,10,4) == 0) goto goto_2;
          tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
          _ty = tmpMeta13;
          tmpMeta1 = omc_NFExpression_makeArray(threadData, omc_NFType_liftArrayLeft(threadData, _ty, omc_NFDimension_fromInteger(threadData, arrayLength(_expl), 1)), _expl, 0 /* false */);
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta14 = _exp;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,10,4) == 0) goto goto_2;
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
          _ty = tmpMeta15;

          _ty = omc_NFType_unliftArray(threadData, _ty);
          tmpMeta16 = mmc_mk_cons(_sub, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta17 = mmc_mk_box5(29, &NFExpression_SUBSCRIPTED__EXP__desc, _exp, tmpMeta16, _ty, mmc_mk_boolean(1 /* true */));
          tmpMeta1 = tmpMeta17;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          
          /* Pattern matching succeeded */
          tmpMeta18 = stringAppend(_OMC_LIT171,omc_NFSubscript_toString(threadData, _sub));
          tmpMeta19 = stringAppend(tmpMeta18,_OMC_LIT125);
          omc_Error_assertion(threadData, 0 /* false */, tmpMeta19, _OMC_LIT172);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_applyIndexExpArray(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _index, modelica_metatype _restSubscripts)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _expl = NULL;
  modelica_integer _idx;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _expl has no default value.
  // _idx has no default value.
  if(omc_NFExpression_isScalarLiteral(threadData, _index))
  {
    /* Pattern-matching assignment */
    tmpMeta1 = _exp;
    if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,8,3) == 0) MMC_THROW_INTERNAL();
    tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
    _expl = tmpMeta2;

    _idx = omc_NFExpression_toInteger(threadData, _index);

    if(((_idx > ((modelica_integer) 0)) && (_idx <= arrayLength(_expl))))
    {
      _outExp = omc_NFExpression_applySubscripts(threadData, _restSubscripts, arrayGet(_expl,_idx) /* DAE.ASUB */, 0 /* false */);

      goto _return;
    }
  }

  tmpMeta4 = mmc_mk_box2(5, &NFSubscript_INDEX__desc, _index);
  tmpMeta3 = mmc_mk_cons(tmpMeta4, _restSubscripts);
  _outExp = omc_NFExpression_makeSubscriptedExp(threadData, tmpMeta3, _exp, 0 /* false */);
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_applyIndexSubscriptArray(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _index, modelica_metatype _restSubscripts)
{
  modelica_metatype _outExp = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  _outExp = omc_NFExpression_applyIndexExpArray(threadData, _exp, omc_NFSubscript_toExp(threadData, _index), _restSubscripts);
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_typeSubscriptedArray(threadData_t *threadData, modelica_metatype _elements, modelica_metatype _subscripts, modelica_metatype __omcQ_24in_5Fty, modelica_boolean __omcQ_24in_5Fliteral, modelica_boolean *out_literal)
{
  modelica_metatype _ty = NULL;
  modelica_boolean _literal;
  modelica_integer _count;
  modelica_metatype _e = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _ty = __omcQ_24in_5Fty;
  _literal = __omcQ_24in_5Fliteral;
  // _count has no default value.
  // _e has no default value.
  _count = arrayLength(_elements);

  if((_count > ((modelica_integer) 0)))
  {
    _e = arrayGet(_elements,((modelica_integer) 1)) /* DAE.ASUB */;

    _ty = omc_NFExpression_typeOf(threadData, _e);

    _literal = (_literal && omc_NFExpression_isLiteral(threadData, _e));
  }
  else
  {
    _ty = omc_NFType_subscript(threadData, omc_NFType_unliftArray(threadData, _ty), _subscripts, 1 /* true */);
  }

  _ty = omc_NFType_liftArrayLeft(threadData, _ty, omc_NFDimension_fromInteger(threadData, _count, 1));
  _return: OMC_LABEL_UNUSED
  if (out_literal) { *out_literal = _literal; }
  return _ty;
}
modelica_metatype boxptr_NFExpression_typeSubscriptedArray(threadData_t *threadData, modelica_metatype _elements, modelica_metatype _subscripts, modelica_metatype __omcQ_24in_5Fty, modelica_metatype __omcQ_24in_5Fliteral, modelica_metatype *out_literal)
{
  modelica_integer tmp1;
  modelica_boolean _literal;
  modelica_metatype _ty = NULL;
  tmp1 = mmc_unbox_integer(__omcQ_24in_5Fliteral);
  _ty = omc_NFExpression_typeSubscriptedArray(threadData, _elements, _subscripts, __omcQ_24in_5Fty, tmp1, &_literal);
  /* skip box _ty; NFType */
  if (out_literal) { *out_literal = mmc_mk_icon(_literal); }
  return _ty;
}

static modelica_metatype closure28_NFExpression_applySubscript(threadData_t *thData, modelica_metatype closure, modelica_metatype exp)
{
  modelica_metatype subscript = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype restSubscripts = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  modelica_metatype applyToScope = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),3));
  return boxptr_NFExpression_applySubscript(thData, subscript, exp, restSubscripts, applyToScope);
}static modelica_metatype closure29_NFExpression_applyIndexSubscriptArray(threadData_t *thData, modelica_metatype closure, modelica_metatype index)
{
  modelica_metatype exp = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  modelica_metatype restSubscripts = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
  return boxptr_NFExpression_applyIndexSubscriptArray(thData, exp, index, restSubscripts);
}
DLLDirection
modelica_metatype omc_NFExpression_applySubscriptArray(threadData_t *threadData, modelica_metatype _subscript, modelica_metatype _exp, modelica_metatype _restSubscripts, modelica_boolean _applyToScope)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _sub = NULL;
  modelica_metatype _s = NULL;
  modelica_metatype _rest_subs = NULL;
  modelica_metatype _expl = NULL;
  modelica_metatype _ty = NULL;
  modelica_integer _el_count;
  modelica_boolean _literal;
  modelica_metatype _first_e = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _sub has no default value.
  // _s has no default value.
  // _rest_subs has no default value.
  // _expl has no default value.
  // _ty has no default value.
  // _el_count has no default value.
  // _literal has no default value.
  // _first_e has no default value.
  if(omc_NFExpression_isEmptyArray(threadData, _exp))
  {
    tmpMeta1 = mmc_mk_cons(_subscript, _restSubscripts);
    _outExp = omc_NFExpression_makeSubscriptedExp(threadData, tmpMeta1, _exp, 0 /* false */);

    goto _return;
  }

  _sub = omc_NFSubscript_expandSlice(threadData, _subscript, 0 /* false */, NULL);

  { /* match expression */
    modelica_metatype tmp5_1;
    tmp5_1 = _sub;
    {
      int tmp5;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp5_1))) {
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta2 = omc_NFExpression_applyIndexSubscriptArray(threadData, _exp, _sub, _restSubscripts);
          goto tmp4_done;
        }
        case 6: {
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          tmpMeta6 = mmc_mk_cons(_subscript, _restSubscripts);
          tmpMeta2 = omc_NFExpression_makeSubscriptedExp(threadData, tmpMeta6, _exp, 0 /* false */);
          goto tmp4_done;
        }
        case 8: {
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_metatype tmpMeta10;
          modelica_integer tmp11;
          modelica_metatype tmpMeta12;
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_metatype tmpMeta15;
          
          /* Pattern matching succeeded */
          if(listEmpty(_restSubscripts))
          {
            _outExp = _exp;
          }
          else
          {
            /* Pattern-matching assignment */
            tmpMeta7 = _exp;
            if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,8,3) == 0) goto goto_3;
            tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
            tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
            tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
            tmp11 = mmc_unbox_integer(tmpMeta10);
            _ty = tmpMeta8;
            _expl = tmpMeta9;
            _literal = tmp11  /* pattern as ty=Boolean */;

            /* Pattern-matching assignment */
            tmpMeta12 = _restSubscripts;
            if (listEmpty(tmpMeta12)) goto goto_3;
            tmpMeta13 = MMC_CAR(tmpMeta12);
            tmpMeta14 = MMC_CDR(tmpMeta12);
            _s = tmpMeta13;
            _rest_subs = tmpMeta14;

            tmpMeta15 = mmc_mk_box3(0, _s, _rest_subs, mmc_mk_boolean(_applyToScope));
            _expl = omc_Array_map(threadData, _expl, (modelica_fnptr) mmc_mk_box2(0,closure28_NFExpression_applySubscript,tmpMeta15));

            _ty = omc_NFExpression_typeSubscriptedArray(threadData, _expl, _restSubscripts, _ty, _literal ,&_literal);

            _outExp = omc_NFExpression_makeArray(threadData, _ty, _expl, _literal);
          }
          tmpMeta2 = _outExp;
          goto tmp4_done;
        }
        case 7: {
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_integer tmp19;
          modelica_metatype tmpMeta20;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta16 = _exp;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,8,3) == 0) goto goto_3;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 4));
          tmp19 = mmc_unbox_integer(tmpMeta18);
          _ty = tmpMeta17;
          _literal = tmp19  /* pattern as ty=Boolean */;

          tmpMeta20 = mmc_mk_box2(0, _exp, _restSubscripts);
          _expl = omc_Array_mapList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sub), 2))), (modelica_fnptr) mmc_mk_box2(0,closure29_NFExpression_applyIndexSubscriptArray,tmpMeta20));

          _ty = omc_NFExpression_typeSubscriptedArray(threadData, _expl, _restSubscripts, _ty, _literal ,&_literal);
          tmpMeta2 = omc_NFExpression_makeArray(threadData, _ty, _expl, _literal);
          goto tmp4_done;
        }
        case 10: {
          modelica_metatype tmpMeta21;
          
          /* Pattern matching succeeded */
          tmpMeta21 = mmc_mk_cons(_subscript, _restSubscripts);
          tmpMeta2 = omc_NFExpression_makeSubscriptedExp(threadData, tmpMeta21, _exp, 0 /* false */);
          goto tmp4_done;
        }
        }
        goto tmp4_end;
        tmp4_end: ;
      }
      goto goto_3;
      goto_3:;
      MMC_THROW_INTERNAL();
      goto tmp4_done;
      tmp4_done:;
    }
  }
  _outExp = tmpMeta2;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}
modelica_metatype boxptr_NFExpression_applySubscriptArray(threadData_t *threadData, modelica_metatype _subscript, modelica_metatype _exp, modelica_metatype _restSubscripts, modelica_metatype _applyToScope)
{
  modelica_integer tmp1;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_applyToScope);
  _outExp = omc_NFExpression_applySubscriptArray(threadData, _subscript, _exp, _restSubscripts, tmp1);
  /* skip box _outExp; NFExpression */
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_applyIndexSubscriptTypename(threadData_t *threadData, modelica_metatype _ty, modelica_metatype _index)
{
  modelica_metatype _subscriptedExp = NULL;
  modelica_metatype _idx_exp = NULL;
  modelica_integer _idx;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta6;
  modelica_metatype tmpMeta7;
  modelica_metatype tmpMeta8;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _subscriptedExp has no default value.
  // _idx_exp has no default value.
  // _idx has no default value.
  _idx_exp = omc_NFSubscript_toExp(threadData, _index);

  if(omc_NFExpression_isScalarLiteral(threadData, _idx_exp))
  {
    _idx = omc_NFExpression_toInteger(threadData, _idx_exp);

    { /* match expression */
      modelica_metatype tmp4_1;
      tmp4_1 = _ty;
      {
        volatile mmc_switch_type tmp4;
        int tmp5;
        tmp4 = 0;
        for (; tmp4 < 2; tmp4++) {
          switch (MMC_SWITCH_CAST(tmp4)) {
          case 0: {
            if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,0) == 0) goto tmp3_end;
            /* Pattern matching succeeded */
            /* Check guard condition after assignments */
            if (!(_idx <= ((modelica_integer) 2))) goto tmp3_end;
            tmpMeta1 = ((_idx == ((modelica_integer) 1))?_OMC_LIT90:_OMC_LIT91);
            goto tmp3_done;
          }
          case 1: {
            if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,2) == 0) goto tmp3_end;
            
            /* Pattern matching succeeded */
            tmpMeta1 = omc_NFExpression_nthEnumLiteral(threadData, _ty, _idx);
            goto tmp3_done;
          }
          }
          goto tmp3_end;
          tmp3_end: ;
        }
        goto goto_2;
        goto_2:;
        MMC_THROW_INTERNAL();
        goto tmp3_done;
        tmp3_done:;
      }
    }
    _subscriptedExp = tmpMeta1;
  }
  else
  {
    tmpMeta6 = mmc_mk_box2(10, &NFExpression_TYPENAME__desc, _ty);
    tmpMeta7 = mmc_mk_cons(_index, MMC_REFSTRUCTLIT(mmc_nil));
    tmpMeta8 = mmc_mk_box5(29, &NFExpression_SUBSCRIPTED__EXP__desc, tmpMeta6, tmpMeta7, _ty, mmc_mk_boolean(0 /* false */));
    _subscriptedExp = tmpMeta8;
  }
  _return: OMC_LABEL_UNUSED
  return _subscriptedExp;
}

static modelica_metatype closure30_NFExpression_applyIndexSubscriptTypename(threadData_t *thData, modelica_metatype closure, modelica_metatype index)
{
  modelica_metatype ty = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_applyIndexSubscriptTypename(thData, ty, index);
}
DLLDirection
modelica_metatype omc_NFExpression_applySubscriptTypename(threadData_t *threadData, modelica_metatype _subscript, modelica_metatype _ty)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _sub = NULL;
  modelica_integer _index;
  modelica_metatype _expl = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _sub has no default value.
  // _index has no default value.
  // _expl has no default value.
  _sub = omc_NFSubscript_expandSlice(threadData, _subscript, 0 /* false */, NULL);

  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _sub;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_applyIndexSubscriptTypename(threadData, _ty, _sub);
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          
          /* Pattern matching succeeded */
          tmpMeta5 = mmc_mk_box2(10, &NFExpression_TYPENAME__desc, _ty);
          tmpMeta6 = mmc_mk_cons(_subscript, MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta7 = mmc_mk_cons(omc_NFSubscript_toDimension(threadData, _sub), MMC_REFSTRUCTLIT(mmc_nil));
          tmpMeta8 = mmc_mk_box3(10, &NFType_ARRAY__desc, _ty, tmpMeta7);
          tmpMeta9 = mmc_mk_box5(29, &NFExpression_SUBSCRIPTED__EXP__desc, tmpMeta5, tmpMeta6, tmpMeta8, mmc_mk_boolean(0 /* false */));
          tmpMeta1 = tmpMeta9;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta10;
          
          /* Pattern matching succeeded */
          tmpMeta10 = mmc_mk_box2(10, &NFExpression_TYPENAME__desc, _ty);
          tmpMeta1 = tmpMeta10;
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta11;
          
          /* Pattern matching succeeded */
          tmpMeta11 = mmc_mk_box1(0, _ty);
          _expl = omc_Array_mapList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sub), 2))), (modelica_fnptr) mmc_mk_box2(0,closure30_NFExpression_applyIndexSubscriptTypename,tmpMeta11));
          tmpMeta1 = omc_NFExpression_makeArray(threadData, omc_NFType_liftArrayLeft(threadData, _ty, omc_NFDimension_fromInteger(threadData, arrayLength(_expl), 1)), _expl, 1 /* true */);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_applySubscriptCref(threadData_t *threadData, modelica_metatype _subscript, modelica_metatype _cref, modelica_metatype _restSubscripts, modelica_boolean _applyToScope)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype _cr = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  // _cr has no default value.
  // _ty has no default value.
  tmpMeta1 = mmc_mk_cons(_subscript, _restSubscripts);
  _cr = omc_NFComponentRef_mergeSubscripts(threadData, tmpMeta1, _cref, _applyToScope, 0 /* false */);

  _ty = omc_NFComponentRef_getSubscriptedType(threadData, _cr, 0 /* false */);

  tmpMeta2 = mmc_mk_box3(9, &NFExpression_CREF__desc, _ty, _cr);
  _outExp = tmpMeta2;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}
modelica_metatype boxptr_NFExpression_applySubscriptCref(threadData_t *threadData, modelica_metatype _subscript, modelica_metatype _cref, modelica_metatype _restSubscripts, modelica_metatype _applyToScope)
{
  modelica_integer tmp1;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_applyToScope);
  _outExp = omc_NFExpression_applySubscriptCref(threadData, _subscript, _cref, _restSubscripts, tmp1);
  /* skip box _outExp; NFExpression */
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_applySubscript(threadData_t *threadData, modelica_metatype _subscript, modelica_metatype _exp, modelica_metatype _restSubscripts, modelica_boolean _applyToScope)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 10; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_applySubscriptCref(threadData, _subscript, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _restSubscripts, _applyToScope);
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!listEmpty(_restSubscripts)) goto tmp3_end;
          tmpMeta1 = omc_NFExpression_applySubscriptTypename(threadData, _subscript, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 2: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_applySubscriptArray(threadData, _subscript, _exp, _restSubscripts, _applyToScope);
          goto tmp3_done;
        }
        case 3: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!listEmpty(_restSubscripts)) goto tmp3_end;
          tmpMeta1 = omc_NFExpression_applySubscriptRange(threadData, _subscript, _exp);
          goto tmp3_done;
        }
        case 4: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_applySubscriptCall(threadData, _subscript, _exp, _restSubscripts, _applyToScope);
          goto tmp3_done;
        }
        case 5: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_applySubscriptIf(threadData, _subscript, _exp, _restSubscripts, _applyToScope);
          goto tmp3_done;
        }
        case 6: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,25,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _outExp = omc_NFExpression_applySubscript(threadData, _subscript, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _restSubscripts, _applyToScope);
          tmpMeta1 = omc_NFExpression_unbox(threadData, _outExp);
          goto tmp3_done;
        }
        case 7: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_box(threadData, omc_NFExpression_applySubscript(threadData, _subscript, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _restSubscripts, _applyToScope));
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,23,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _outExp = omc_NFExpression_applySubscript(threadData, _subscript, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _restSubscripts, _applyToScope);
          tmpMeta6 = mmc_mk_box3(26, &NFExpression_CAST__desc, omc_NFType_copyElementType(threadData, omc_NFExpression_typeOf(threadData, _outExp), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), _outExp);
          tmpMeta1 = tmpMeta6;
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta7;
          
          /* Pattern matching succeeded */
          tmpMeta7 = mmc_mk_cons(_subscript, _restSubscripts);
          tmpMeta1 = omc_NFExpression_makeSubscriptedExp(threadData, tmpMeta7, _exp, 0 /* false */);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}
modelica_metatype boxptr_NFExpression_applySubscript(threadData_t *threadData, modelica_metatype _subscript, modelica_metatype _exp, modelica_metatype _restSubscripts, modelica_metatype _applyToScope)
{
  modelica_integer tmp1;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_applyToScope);
  _outExp = omc_NFExpression_applySubscript(threadData, _subscript, _exp, _restSubscripts, tmp1);
  /* skip box _outExp; NFExpression */
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_applySubscripts(threadData_t *threadData, modelica_metatype _subscripts, modelica_metatype _exp, modelica_boolean _applyToScope)
{
  modelica_metatype _outExp = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  if(listEmpty(_subscripts))
  {
    _outExp = _exp;
  }
  else
  {
    _outExp = omc_NFExpression_applySubscript(threadData, listHead(_subscripts), _exp, listRest(_subscripts), _applyToScope);
  }
  _return: OMC_LABEL_UNUSED
  return _outExp;
}
modelica_metatype boxptr_NFExpression_applySubscripts(threadData_t *threadData, modelica_metatype _subscripts, modelica_metatype _exp, modelica_metatype _applyToScope)
{
  modelica_integer tmp1;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_applyToScope);
  _outExp = omc_NFExpression_applySubscripts(threadData, _subscripts, _exp, tmp1);
  /* skip box _outExp; NFExpression */
  return _outExp;
}

DLLDirection
modelica_integer omc_NFExpression_rangeSize(threadData_t *threadData, modelica_metatype _range, modelica_boolean _resize)
{
  modelica_integer _size;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _size = omc_NFDimension_size(threadData, omc_NFType_nthDimension(threadData, omc_NFExpression_typeOf(threadData, _range), ((modelica_integer) 1)), _resize);
  _return: OMC_LABEL_UNUSED
  return _size;
}
modelica_metatype boxptr_NFExpression_rangeSize(threadData_t *threadData, modelica_metatype _range, modelica_metatype _resize)
{
  modelica_integer tmp1;
  modelica_integer _size;
  modelica_metatype out_size;
  tmp1 = mmc_unbox_integer(_resize);
  _size = omc_NFExpression_rangeSize(threadData, _range, tmp1);
  out_size = mmc_mk_icon(_size);
  return out_size;
}

DLLDirection
modelica_metatype omc_NFExpression_makeTuple(threadData_t *threadData, modelica_metatype _expl)
{
  modelica_metatype _tupleExp = NULL;
  modelica_metatype _tyl = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta5;
  modelica_metatype tmpMeta6;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _tupleExp has no default value.
  // _tyl has no default value.
  if((listLength(_expl) == ((modelica_integer) 1)))
  {
    _tupleExp = listHead(_expl);
  }
  else
  {
    {
      modelica_metatype __omcQ_24tmpVar129;
      modelica_metatype* tmp2;
      modelica_metatype tmpMeta3;
      modelica_metatype __omcQ_24tmpVar128;
      modelica_integer tmp4;
      modelica_metatype _e_loopVar = 0;
      modelica_metatype _e;
      _e_loopVar = _expl;
      tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
      __omcQ_24tmpVar129 = tmpMeta3; /* defaultValue */
      tmp2 = &__omcQ_24tmpVar129;
      while(1) {
        tmp4 = 1;
        if (!listEmpty(_e_loopVar)) {
          _e = MMC_CAR(_e_loopVar);
          _e_loopVar = MMC_CDR(_e_loopVar);
          tmp4--;
        }
        if (tmp4 == 0) {
          __omcQ_24tmpVar128 = omc_NFExpression_typeOf(threadData, _e);
          *tmp2 = mmc_mk_cons(__omcQ_24tmpVar128,0);
          tmp2 = &MMC_CDR(*tmp2);
        } else if (tmp4 == 1) {
          break;
        } else {
          MMC_THROW_INTERNAL();
        }
      }
      *tmp2 = mmc_mk_nil();
      tmpMeta1 = __omcQ_24tmpVar129;
    }
    _tyl = tmpMeta1;

    tmpMeta5 = mmc_mk_box3(11, &NFType_TUPLE__desc, _tyl, mmc_mk_none());
    tmpMeta6 = mmc_mk_box3(14, &NFExpression_TUPLE__desc, tmpMeta5, _expl);
    _tupleExp = tmpMeta6;
  }
  _return: OMC_LABEL_UNUSED
  return _tupleExp;
}

DLLDirection
modelica_integer omc_NFExpression_getInteger(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_integer _i;
  modelica_metatype _e = NULL;
  modelica_integer tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _i has no default value.
  // _e has no default value.
  _e = omc_NFExpression_map(threadData, _exp, boxvar_NFExpression_replaceResizableParameter);

  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = omc_NFSimplifyExp_simplify(threadData, _e, 0 /* false */);
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmp7 = mmc_unbox_integer(tmpMeta6);
          _i = tmp7  /* pattern as ty=Integer */;
          /* Pattern matching succeeded */
          tmp1 = _i;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta8;
          
          /* Pattern matching succeeded */
          tmpMeta8 = stringAppend(_OMC_LIT173,omc_NFExpression_toString(threadData, _exp));
          omc_Error_assertion(threadData, 0 /* false */, tmpMeta8, _OMC_LIT174);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _i = tmp1;
  _return: OMC_LABEL_UNUSED
  return _i;
}
modelica_metatype boxptr_NFExpression_getInteger(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_integer _i;
  modelica_metatype out_i;
  _i = omc_NFExpression_getInteger(threadData, _exp);
  out_i = mmc_mk_icon(_i);
  return out_i;
}

DLLDirection
modelica_integer omc_NFExpression_getIntegerRange(threadData_t *threadData, modelica_metatype _range, modelica_integer *out_step, modelica_integer *out_stop)
{
  modelica_integer _start;
  modelica_integer _step;
  modelica_integer _stop;
  modelica_integer tmp1_c0 __attribute__((unused)) = 0;
  modelica_integer tmp1_c1 __attribute__((unused)) = 0;
  modelica_integer tmp1_c2 __attribute__((unused)) = 0;
  modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _start has no default value.
  // _step has no default value.
  // _stop has no default value.
  
  
  
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _range;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          { /* matchcontinue expression */
            {
              volatile mmc_switch_type tmp8;
              int tmp9;
              tmp8 = 0;
              MMC_TRY_INTERNAL(mmc_jumper)
              tmp7_top:
              threadData->mmc_jumper = &new_mmc_jumper;
              for (; tmp8 < 2; tmp8++) {
                switch (MMC_SWITCH_CAST(tmp8)) {
                case 0: {
                  /* Pattern matching succeeded */
                  _start = omc_NFExpression_getInteger(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 3))));

                  _stop = omc_NFExpression_getInteger(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 5))));

                  if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 4)))))
                  {
                    _step = omc_NFExpression_getInteger(threadData, omc_Util_getOption(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_range), 4)))));
                  }
                  else
                  {
                    _step = ((_start > _stop)?((modelica_integer) -1):((modelica_integer) 1));
                  }
                  goto tmp7_done;
                }
                case 1: {
                  modelica_metatype tmpMeta10;
                  /* Pattern matching succeeded */
                  tmpMeta10 = stringAppend(_OMC_LIT175,omc_NFExpression_toString(threadData, _range));
                  omc_Error_assertion(threadData, 0 /* false */, tmpMeta10, _OMC_LIT176);

                  goto goto_6;
                  goto tmp7_done;
                }
                }
                goto tmp7_end;
                tmp7_end: ;
              }
              goto goto_6;
              tmp7_done:
              (void)tmp8;
              MMC_RESTORE_INTERNAL(mmc_jumper);
              goto tmp7_done2;
              goto_6:;
              MMC_CATCH_INTERNAL(mmc_jumper);
              if (++tmp8 < 2) {
                goto tmp7_top;
              }
              goto goto_2;
              tmp7_done2:;
            }
          }
          ;
          tmp1_c0 = _start;
          tmp1_c1 = _step;
          tmp1_c2 = _stop;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta11;
          
          /* Pattern matching succeeded */
          tmpMeta11 = stringAppend(_OMC_LIT177,omc_NFExpression_toString(threadData, _range));
          omc_Error_assertion(threadData, 0 /* false */, tmpMeta11, _OMC_LIT178);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _start = tmp1_c0;
  _step = tmp1_c1;
  _stop = tmp1_c2;
  _return: OMC_LABEL_UNUSED
  if (out_step) { *out_step = _step; }
  if (out_stop) { *out_stop = _stop; }
  return _start;
}
modelica_metatype boxptr_NFExpression_getIntegerRange(threadData_t *threadData, modelica_metatype _range, modelica_metatype *out_step, modelica_metatype *out_stop)
{
  modelica_integer _step;
  modelica_integer _stop;
  modelica_integer _start;
  modelica_metatype out_start;
  _start = omc_NFExpression_getIntegerRange(threadData, _range, &_step, &_stop);
  out_start = mmc_mk_icon(_start);
  if (out_step) { *out_step = mmc_mk_icon(_step); }
  if (out_stop) { *out_stop = mmc_mk_icon(_stop); }
  return out_start;
}

DLLDirection
modelica_metatype omc_NFExpression_makeIntegerRange(threadData_t *threadData, modelica_integer _start, modelica_integer _step, modelica_integer _stop)
{
  modelica_metatype _rangeExp = NULL;
  modelica_metatype _start_exp = NULL;
  modelica_metatype _stop_exp = NULL;
  modelica_metatype _step_exp = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _rangeExp has no default value.
  // _start_exp has no default value.
  // _stop_exp has no default value.
  // _step_exp has no default value.
  tmpMeta1 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer(_start));
  _start_exp = tmpMeta1;

  tmpMeta2 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer(_stop));
  _stop_exp = tmpMeta2;

  if((((_start == _stop) || ((_step == ((modelica_integer) 1)) && (_start <= _stop))) || ((_step == ((modelica_integer) -1)) && (_start >= _stop))))
  {
    _step_exp = mmc_mk_none();
  }
  else
  {
    tmpMeta3 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer(_step));
    _step_exp = mmc_mk_some(tmpMeta3);
  }

  _rangeExp = omc_NFExpression_makeRange(threadData, _start_exp, _step_exp, _stop_exp);
  _return: OMC_LABEL_UNUSED
  return _rangeExp;
}
modelica_metatype boxptr_NFExpression_makeIntegerRange(threadData_t *threadData, modelica_metatype _start, modelica_metatype _step, modelica_metatype _stop)
{
  modelica_integer tmp1;
  modelica_integer tmp2;
  modelica_integer tmp3;
  modelica_metatype _rangeExp = NULL;
  tmp1 = mmc_unbox_integer(_start);
  tmp2 = mmc_unbox_integer(_step);
  tmp3 = mmc_unbox_integer(_stop);
  _rangeExp = omc_NFExpression_makeIntegerRange(threadData, tmp1, tmp2, tmp3);
  /* skip box _rangeExp; NFExpression */
  return _rangeExp;
}

DLLDirection
modelica_metatype omc_NFExpression_makeRange(threadData_t *threadData, modelica_metatype _start, modelica_metatype _step, modelica_metatype _stop)
{
  modelica_metatype _rangeExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _rangeExp has no default value.
  tmpMeta1 = mmc_mk_box5(13, &NFExpression_RANGE__desc, omc_NFTypeCheck_getRangeType(threadData, _start, _step, _stop, omc_NFExpression_typeOf(threadData, _start), _OMC_LIT38), _start, _step, _stop);
  _rangeExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _rangeExp;
}

DLLDirection
modelica_metatype omc_NFExpression_makeRecord(threadData_t *threadData, modelica_metatype _recordName, modelica_metatype _recordType, modelica_metatype _fields)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _exp has no default value.
  tmpMeta1 = mmc_mk_box4(15, &NFExpression_RECORD__desc, _recordName, _recordType, _fields);
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_makeExpArray(threadData_t *threadData, modelica_metatype _elements, modelica_metatype _elementType, modelica_boolean _isLiteral)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _ty = NULL;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _exp has no default value.
  // _ty has no default value.
  _ty = omc_NFType_liftArrayLeft(threadData, _elementType, omc_NFDimension_fromInteger(threadData, arrayLength(_elements), 1));

  _exp = omc_NFExpression_makeArray(threadData, _ty, _elements, _isLiteral);
  _return: OMC_LABEL_UNUSED
  return _exp;
}
modelica_metatype boxptr_NFExpression_makeExpArray(threadData_t *threadData, modelica_metatype _elements, modelica_metatype _elementType, modelica_metatype _isLiteral)
{
  modelica_integer tmp1;
  modelica_metatype _exp = NULL;
  tmp1 = mmc_unbox_integer(_isLiteral);
  _exp = omc_NFExpression_makeExpArray(threadData, _elements, _elementType, tmp1);
  /* skip box _exp; NFExpression */
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_makeRealMatrix(threadData_t *threadData, modelica_metatype _values)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _ty = NULL;
  modelica_metatype _expl = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  modelica_metatype tmpMeta3;
  modelica_metatype tmpMeta4;
  modelica_metatype tmpMeta5;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _exp has no default value.
  // _ty has no default value.
  // _expl has no default value.
  if(listEmpty(_values))
  {
    tmpMeta1 = mmc_mk_cons(omc_NFDimension_fromInteger(threadData, ((modelica_integer) 0), 1), mmc_mk_cons(_OMC_LIT180, MMC_REFSTRUCTLIT(mmc_nil)));
    tmpMeta2 = mmc_mk_box3(10, &NFType_ARRAY__desc, _OMC_LIT179, tmpMeta1);
    _ty = tmpMeta2;

    _exp = omc_NFExpression_makeEmptyArray(threadData, _ty);
  }
  else
  {
    tmpMeta3 = mmc_mk_cons(omc_NFDimension_fromInteger(threadData, listLength(listHead(_values)), 1), MMC_REFSTRUCTLIT(mmc_nil));
    tmpMeta4 = mmc_mk_box3(10, &NFType_ARRAY__desc, _OMC_LIT179, tmpMeta3);
    _ty = tmpMeta4;

    {
      modelica_metatype __omcQ_24tmpVar133;
      modelica_metatype* tmp6;
      modelica_metatype tmpMeta7;
      modelica_metatype tmpMeta8;
      modelica_metatype __omcQ_24tmpVar132;
      modelica_integer tmp13;
      modelica_metatype _row_loopVar = 0;
      modelica_metatype _row;
      _row_loopVar = _values;
      tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
      __omcQ_24tmpVar133 = tmpMeta7; /* defaultValue */
      tmp6 = &__omcQ_24tmpVar133;
      while(1) {
        tmp13 = 1;
        if (!listEmpty(_row_loopVar)) {
          _row = MMC_CAR(_row_loopVar);
          _row_loopVar = MMC_CDR(_row_loopVar);
          tmp13--;
        }
        if (tmp13 == 0) {
          {
            modelica_metatype __omcQ_24tmpVar131;
            modelica_metatype* tmp9;
            modelica_metatype tmpMeta10;
            modelica_metatype tmpMeta11;
            modelica_metatype __omcQ_24tmpVar130;
            modelica_integer tmp12;
            modelica_metatype _v_loopVar = 0;
            modelica_metatype _v;
            _v_loopVar = _row;
            tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
            __omcQ_24tmpVar131 = tmpMeta10; /* defaultValue */
            tmp9 = &__omcQ_24tmpVar131;
            while(1) {
              tmp12 = 1;
              if (!listEmpty(_v_loopVar)) {
                _v = MMC_CAR(_v_loopVar);
                _v_loopVar = MMC_CDR(_v_loopVar);
                tmp12--;
              }
              if (tmp12 == 0) {
                tmpMeta11 = mmc_mk_box2(4, &NFExpression_REAL__desc, _v);
                __omcQ_24tmpVar130 = tmpMeta11;
                *tmp9 = mmc_mk_cons(__omcQ_24tmpVar130,0);
                tmp9 = &MMC_CDR(*tmp9);
              } else if (tmp12 == 1) {
                break;
              } else {
                MMC_THROW_INTERNAL();
              }
            }
            *tmp9 = mmc_mk_nil();
            tmpMeta8 = __omcQ_24tmpVar131;
          }
          __omcQ_24tmpVar132 = omc_NFExpression_makeArray(threadData, _ty, listArray(tmpMeta8), 1 /* true */);
          *tmp6 = mmc_mk_cons(__omcQ_24tmpVar132,0);
          tmp6 = &MMC_CDR(*tmp6);
        } else if (tmp13 == 1) {
          break;
        } else {
          MMC_THROW_INTERNAL();
        }
      }
      *tmp6 = mmc_mk_nil();
      tmpMeta5 = __omcQ_24tmpVar133;
    }
    _expl = tmpMeta5;

    _ty = omc_NFType_liftArrayLeft(threadData, _ty, omc_NFDimension_fromInteger(threadData, listLength(_expl), 1));

    _exp = omc_NFExpression_makeArray(threadData, _ty, listArray(_expl), 1 /* true */);
  }
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_makeRealArray(threadData_t *threadData, modelica_metatype _values)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _exp has no default value.
  tmpMeta1 = mmc_mk_cons(omc_NFDimension_fromInteger(threadData, listLength(_values), 1), MMC_REFSTRUCTLIT(mmc_nil));
  tmpMeta2 = mmc_mk_box3(10, &NFType_ARRAY__desc, _OMC_LIT179, tmpMeta1);
  _exp = omc_NFExpression_makeArray(threadData, tmpMeta2, omc_Array_mapList(threadData, _values, boxvar_NFExpression_makeReal), 1 /* true */);
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_makeIntegerArray(threadData_t *threadData, modelica_metatype _values)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _exp has no default value.
  tmpMeta1 = mmc_mk_cons(omc_NFDimension_fromInteger(threadData, listLength(_values), 1), MMC_REFSTRUCTLIT(mmc_nil));
  tmpMeta2 = mmc_mk_box3(10, &NFType_ARRAY__desc, _OMC_LIT60, tmpMeta1);
  _exp = omc_NFExpression_makeArray(threadData, tmpMeta2, omc_Array_mapList(threadData, _values, boxvar_NFExpression_makeInteger), 1 /* true */);
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_makeEmptyArray(threadData_t *threadData, modelica_metatype _ty)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  modelica_metatype tmpMeta2;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
  tmpMeta2 = mmc_mk_box4(11, &NFExpression_ARRAY__desc, _ty, listArray(tmpMeta1), mmc_mk_boolean(1 /* true */));
  _outExp = tmpMeta2;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_makeArrayCheckLiteral(threadData_t *threadData, modelica_metatype _ty, modelica_metatype _expl)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  tmpMeta1 = mmc_mk_box4(11, &NFExpression_ARRAY__desc, _ty, _expl, mmc_mk_boolean(omc_Array_all(threadData, _expl, boxvar_NFExpression_isLiteral)));
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_makeArray(threadData_t *threadData, modelica_metatype _ty, modelica_metatype _expl, modelica_boolean _literal)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _outExp has no default value.
  tmpMeta1 = mmc_mk_box4(11, &NFExpression_ARRAY__desc, _ty, _expl, mmc_mk_boolean(_literal));
  _outExp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _outExp;
}
modelica_metatype boxptr_NFExpression_makeArray(threadData_t *threadData, modelica_metatype _ty, modelica_metatype _expl, modelica_metatype _literal)
{
  modelica_integer tmp1;
  modelica_metatype _outExp = NULL;
  tmp1 = mmc_unbox_integer(_literal);
  _outExp = omc_NFExpression_makeArray(threadData, _ty, _expl, tmp1);
  /* skip box _outExp; NFExpression */
  return _outExp;
}

DLLDirection
modelica_boolean omc_NFExpression_booleanValue(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _value;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _value has no default value.
  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp2_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta5 = _exp;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta5,3,1) == 0) goto goto_1;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 2));
          tmp7 = mmc_unbox_integer(tmpMeta6);
          _value = tmp7  /* pattern as ty=Boolean */;
          goto tmp2_done;
        }
        case 1: {
          /* Pattern matching succeeded */
          _value = 0 /* false */;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      tmp2_done:
      (void)tmp3;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp2_done2;
      goto_1:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp3 < 2) {
        goto tmp2_top;
      }
      MMC_THROW_INTERNAL();
      tmp2_done2:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _value;
}
modelica_metatype boxptr_NFExpression_booleanValue(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _value;
  modelica_metatype out_value;
  _value = omc_NFExpression_booleanValue(threadData, _exp);
  out_value = mmc_mk_icon(_value);
  return out_value;
}

DLLDirection
modelica_string omc_NFExpression_stringValue(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_string _value = NULL;
  modelica_string tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _value has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 5: {
          
          /* Pattern matching succeeded */
          tmp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto tmp3_done;
        }
        case 35: {
          
          /* Pattern matching succeeded */
          tmp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmp1 = _OMC_LIT20;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _value = tmp1;
  _return: OMC_LABEL_UNUSED
  return _value;
}

DLLDirection
modelica_metatype omc_NFExpression_makeInteger(threadData_t *threadData, modelica_integer _value)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer(_value));
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}
modelica_metatype boxptr_NFExpression_makeInteger(threadData_t *threadData, modelica_metatype _value)
{
  modelica_integer tmp1;
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta2;
  tmp1 = mmc_unbox_integer(_value);
  _exp = omc_NFExpression_makeInteger(threadData, tmp1);
  /* skip box _exp; NFExpression */
  return _exp;
}

DLLDirection
modelica_integer omc_NFExpression_integerValueOrDefault(threadData_t *threadData, modelica_metatype _exp, modelica_integer __omcQ_24in_5Fvalue)
{
  modelica_integer _value;
  modelica_integer tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _value = __omcQ_24in_5Fvalue;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = _value;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _value = tmp1;
  _return: OMC_LABEL_UNUSED
  return _value;
}
modelica_metatype boxptr_NFExpression_integerValueOrDefault(threadData_t *threadData, modelica_metatype _exp, modelica_metatype __omcQ_24in_5Fvalue)
{
  modelica_integer tmp1;
  modelica_integer _value;
  modelica_metatype out_value;
  tmp1 = mmc_unbox_integer(__omcQ_24in_5Fvalue);
  _value = omc_NFExpression_integerValueOrDefault(threadData, _exp, tmp1);
  out_value = mmc_mk_icon(_value);
  return out_value;
}

DLLDirection
modelica_integer omc_NFExpression_integerValue(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_integer _value;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _value has no default value.
  { /* matchcontinue expression */
    {
      volatile mmc_switch_type tmp3;
      int tmp4;
      tmp3 = 0;
      MMC_TRY_INTERNAL(mmc_jumper)
      tmp2_top:
      threadData->mmc_jumper = &new_mmc_jumper;
      for (; tmp3 < 2; tmp3++) {
        switch (MMC_SWITCH_CAST(tmp3)) {
        case 0: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta5 = _exp;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta5,0,1) == 0) goto goto_1;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 2));
          tmp7 = mmc_unbox_integer(tmpMeta6);
          _value = tmp7  /* pattern as ty=Integer */;
          goto tmp2_done;
        }
        case 1: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          /* Pattern matching succeeded */
          tmpMeta9 = stringAppend(_OMC_LIT181,omc_NFExpression_toString(threadData, _exp));
          tmpMeta8 = mmc_mk_cons(tmpMeta9, MMC_REFSTRUCTLIT(mmc_nil));
          omc_Error_addMessage(threadData, _OMC_LIT83, tmpMeta8);

          goto goto_1;
          goto tmp2_done;
        }
        }
        goto tmp2_end;
        tmp2_end: ;
      }
      goto goto_1;
      tmp2_done:
      (void)tmp3;
      MMC_RESTORE_INTERNAL(mmc_jumper);
      goto tmp2_done2;
      goto_1:;
      MMC_CATCH_INTERNAL(mmc_jumper);
      if (++tmp3 < 2) {
        goto tmp2_top;
      }
      MMC_THROW_INTERNAL();
      tmp2_done2:;
    }
  }
  ;
  _return: OMC_LABEL_UNUSED
  return _value;
}
modelica_metatype boxptr_NFExpression_integerValue(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_integer _value;
  modelica_metatype out_value;
  _value = omc_NFExpression_integerValue(threadData, _exp);
  out_value = mmc_mk_icon(_value);
  return out_value;
}

DLLDirection
modelica_metatype omc_NFExpression_makeReal(threadData_t *threadData, modelica_real _value)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = mmc_mk_box2(4, &NFExpression_REAL__desc, mmc_mk_real(_value));
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}
modelica_metatype boxptr_NFExpression_makeReal(threadData_t *threadData, modelica_metatype _value)
{
  modelica_real tmp1;
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta2;
  tmp1 = mmc_unbox_real(_value);
  _exp = omc_NFExpression_makeReal(threadData, tmp1);
  /* skip box _exp; NFExpression */
  return _exp;
}

DLLDirection
modelica_real omc_NFExpression_realValue(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_real _value;
  modelica_real tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _value has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_real)mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _value = tmp1;
  _return: OMC_LABEL_UNUSED
  return _value;
}
modelica_metatype boxptr_NFExpression_realValue(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_real _value;
  modelica_metatype out_value;
  _value = omc_NFExpression_realValue(threadData, _exp);
  out_value = mmc_mk_rcon(_value);
  return out_value;
}

DLLDirection
modelica_metatype omc_NFExpression_typeCastGeneric(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _ty)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _exp_ty = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  _exp_ty = omc_NFExpression_typeOf(threadData, _exp);
  if((!omc_NFType_isEqual(threadData, _ty, omc_NFType_arrayElementType(threadData, _exp_ty))))
  {
    tmpMeta1 = mmc_mk_box3(26, &NFExpression_CAST__desc, omc_NFType_setArrayElementType(threadData, _exp_ty, _ty), _exp);
    _exp = tmpMeta1;
  }
  _return: OMC_LABEL_UNUSED
  return _exp;
}

static modelica_metatype closure31_NFExpression_typeCast(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_metatype ty = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_typeCast(thData, $in_exp, ty);
}
DLLDirection
modelica_metatype omc_NFExpression_typeCast(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _ty)
{
  modelica_metatype _exp = NULL;
  modelica_metatype _t = NULL;
  modelica_metatype _t2 = NULL;
  modelica_metatype _ety = NULL;
  modelica_metatype _el = NULL;
  modelica_metatype _e1 = NULL;
  modelica_metatype _e2 = NULL;
  modelica_integer _dim_diff;
  modelica_metatype _arr = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  // _t has no default value.
  // _t2 has no default value.
  // _ety has no default value.
  // _el has no default value.
  // _e1 has no default value.
  // _e2 has no default value.
  // _dim_diff has no default value.
  // _arr has no default value.
  _ety = omc_NFType_arrayElementType(threadData, _ty);

  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 12; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          modelica_boolean tmp8;
          modelica_metatype tmpMeta9;
          modelica_boolean tmp10;
          modelica_metatype tmpMeta11;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp10 = (modelica_boolean)omc_NFType_isReal(threadData, _ety);
          if(tmp10)
          {
            tmpMeta6 = mmc_mk_box2(4, &NFExpression_REAL__desc, mmc_mk_real(((modelica_real)mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))))));
            tmpMeta11 = tmpMeta6;
          }
          else
          {
            tmp8 = (modelica_boolean)(omc_NFType_isEnumeration(threadData, _ety) && omc_Flags_isConfigFlagSet(threadData, _OMC_LIT234, _OMC_LIT193));
            if(tmp8)
            {
              tmpMeta7 = mmc_mk_box4(7, &NFExpression_ENUM__LITERAL__desc, _ety, omc_NFType_nthEnumLiteral(threadData, _ety, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
              tmpMeta9 = tmpMeta7;
            }
            else
            {
              tmpMeta9 = omc_NFExpression_typeCastGeneric(threadData, _exp, _ety);
            }
            tmpMeta11 = tmpMeta9;
          }
          tmpMeta1 = tmpMeta11;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta12;
          modelica_boolean tmp13;
          modelica_metatype tmpMeta14;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Check guard condition after assignments */
          if (!omc_Flags_isConfigFlagSet(threadData, _OMC_LIT234, _OMC_LIT189)) goto tmp3_end;
          tmp13 = (modelica_boolean)omc_NFType_isInteger(threadData, _ety);
          if(tmp13)
          {
            tmpMeta12 = mmc_mk_box2(3, &NFExpression_INTEGER__desc, mmc_mk_integer(omc_NFExpression_toInteger(threadData, _exp)));
            tmpMeta14 = tmpMeta12;
          }
          else
          {
            tmpMeta14 = omc_NFExpression_typeCastGeneric(threadData, _exp, _ety);
          }
          tmpMeta1 = tmpMeta14;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta15;
          modelica_boolean tmp16;
          modelica_metatype tmpMeta17;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp16 = (modelica_boolean)(omc_NFType_isReal(threadData, _ety) && omc_Flags_isSet(threadData, _OMC_LIT157));
          if(tmp16)
          {
            tmpMeta15 = mmc_mk_box2(4, &NFExpression_REAL__desc, mmc_mk_real((mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))?1.0:0.0)));
            tmpMeta17 = tmpMeta15;
          }
          else
          {
            tmpMeta17 = omc_NFExpression_typeCastGeneric(threadData, _exp, _ety);
          }
          tmpMeta1 = tmpMeta17;
          goto tmp3_done;
        }
        case 3: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = (omc_NFType_isReal(threadData, _ety)?_exp:omc_NFExpression_typeCastGeneric(threadData, _exp, _ety));
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _t = tmpMeta18;
          _arr = tmpMeta19;
          /* Pattern matching succeeded */
          tmpMeta20 = mmc_mk_box1(0, _ety);
          _arr = omc_Array_map(threadData, _arr, (modelica_fnptr) mmc_mk_box2(0,closure31_NFExpression_typeCast,tmpMeta20));

          _t = omc_NFType_setArrayElementType(threadData, _t, _ety);
          tmpMeta21 = mmc_mk_box4(11, &NFExpression_ARRAY__desc, _t, _arr, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          tmpMeta1 = tmpMeta21;
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
          tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _t = tmpMeta22;
          /* Pattern matching succeeded */
          _t = omc_NFType_setArrayElementType(threadData, _t, _ety);
          tmpMeta23 = mmc_mk_box5(13, &NFExpression_RANGE__desc, _t, omc_NFExpression_typeCast(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _ety), omc_NFExpression_typeCastOpt(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _ety), omc_NFExpression_typeCast(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _ety));
          tmpMeta1 = tmpMeta23;
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta24;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _t = omc_NFType_setArrayElementType(threadData, omc_NFOperator_typeOf(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), _ety);
          tmpMeta24 = mmc_mk_box3(20, &NFExpression_UNARY__desc, omc_NFOperator_setType(threadData, _t, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), omc_NFExpression_typeCast(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _ety));
          tmpMeta1 = tmpMeta24;
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta25;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_typeCast(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _ety);

          _e2 = omc_NFExpression_typeCast(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))), _ety);

          _t = (omc_NFType_isConditionalArray(threadData, _ty)?omc_NFType_setConditionalArrayTypes(threadData, _ty, omc_NFExpression_typeOf(threadData, _e1), omc_NFExpression_typeOf(threadData, _e2)):omc_NFExpression_typeOf(threadData, _e1));
          tmpMeta25 = mmc_mk_box5(25, &NFExpression_IF__desc, _t, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _e1, _e2);
          tmpMeta1 = tmpMeta25;
          goto tmp3_done;
        }
        case 8: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFCall_typeCast(threadData, _exp, _ety);
          goto tmp3_done;
        }
        case 9: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,23,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          __omcQ_24in_5Fexp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta26;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          _e1 = omc_NFExpression_typeCast(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _ety);

          _t = omc_NFType_setArrayElementType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))), _ety);
          tmpMeta26 = mmc_mk_box5(29, &NFExpression_SUBSCRIPTED__EXP__desc, _e1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), _t, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
          tmpMeta1 = tmpMeta26;
          goto tmp3_done;
        }
        case 11: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFExpression_typeCastGeneric(threadData, _exp, _ety);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

static modelica_metatype closure32_NFExpression_typeCast(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_exp)
{
  modelica_metatype ty = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_NFExpression_typeCast(thData, $in_exp, ty);
}
DLLDirection
modelica_metatype omc_NFExpression_typeCastOpt(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _ty)
{
  modelica_metatype _outExp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  tmpMeta1 = mmc_mk_box1(0, _ty);
  _outExp = omc_Util_applyOption(threadData, _exp, (modelica_fnptr) mmc_mk_box2(0,closure32_NFExpression_typeCast,tmpMeta1));
  _return: OMC_LABEL_UNUSED
  return _outExp;
}

DLLDirection
modelica_metatype omc_NFExpression_applyToType(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_fnptr _func)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _o = NULL;
      int tmp4;
      // _o has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 7: {
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          tmpMeta5 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta5), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta5))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          _exp = tmpMeta5;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          
          /* Pattern matching succeeded */
          tmpMeta6 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta6), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta6))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          _exp = tmpMeta6;

          tmpMeta7 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta7), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta7))[3] = omc_NFComponentRef_applyToType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          _exp = tmpMeta7;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta8;
          
          /* Pattern matching succeeded */
          tmpMeta8 = MMC_TAGPTR(mmc_alloc_words(3));
          memcpy(MMC_UNTAGPTR(tmpMeta8), MMC_UNTAGPTR(_exp), 3*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta8))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          _exp = tmpMeta8;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta9;
          
          /* Pattern matching succeeded */
          tmpMeta9 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta9), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta9))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          _exp = tmpMeta9;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 13: {
          modelica_metatype tmpMeta10;
          
          /* Pattern matching succeeded */
          tmpMeta10 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta10), MMC_UNTAGPTR(_exp), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta10))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          _exp = tmpMeta10;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 14: {
          modelica_metatype tmpMeta11;
          
          /* Pattern matching succeeded */
          tmpMeta11 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta11), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta11))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          _exp = tmpMeta11;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 15: {
          modelica_metatype tmpMeta12;
          
          /* Pattern matching succeeded */
          tmpMeta12 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta12), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta12))[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          _exp = tmpMeta12;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 16: {
          modelica_metatype tmpMeta13;
          
          /* Pattern matching succeeded */
          tmpMeta13 = MMC_TAGPTR(mmc_alloc_words(3));
          memcpy(MMC_UNTAGPTR(tmpMeta13), MMC_UNTAGPTR(_exp), 3*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta13))[2] = omc_NFCall_setType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), omc_NFCall_typeOf(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, omc_NFCall_typeOf(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))));
          _exp = tmpMeta13;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 17: {
          modelica_metatype tmpMeta14;
          
          /* Pattern matching succeeded */
          tmpMeta14 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta14), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta14))[2] = omc_NFExpression_applyToType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          _exp = tmpMeta14;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 24: {
          modelica_metatype tmpMeta15;
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,3) == 0) goto tmp3_end;
          tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
          _o = tmpMeta15;
          /* Pattern matching succeeded */
          tmpMeta16 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta16), MMC_UNTAGPTR(_o), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta16))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_o), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_o), 2))));
          _o = tmpMeta16;

          tmpMeta17 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta17), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta17))[4] = _o;
          _exp = tmpMeta17;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 19: {
          modelica_metatype tmpMeta18;
          modelica_metatype tmpMeta19;
          modelica_metatype tmpMeta20;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _o = tmpMeta18;
          /* Pattern matching succeeded */
          tmpMeta19 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta19), MMC_UNTAGPTR(_o), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta19))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_o), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_o), 2))));
          _o = tmpMeta19;

          tmpMeta20 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta20), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta20))[3] = _o;
          _exp = tmpMeta20;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 20: {
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          modelica_metatype tmpMeta23;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,2) == 0) goto tmp3_end;
          tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _o = tmpMeta21;
          /* Pattern matching succeeded */
          tmpMeta22 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta22), MMC_UNTAGPTR(_o), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta22))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_o), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_o), 2))));
          _o = tmpMeta22;

          tmpMeta23 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta23), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta23))[2] = _o;
          _exp = tmpMeta23;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 21: {
          modelica_metatype tmpMeta24;
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,3) == 0) goto tmp3_end;
          tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _o = tmpMeta24;
          /* Pattern matching succeeded */
          tmpMeta25 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta25), MMC_UNTAGPTR(_o), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta25))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_o), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_o), 2))));
          _o = tmpMeta25;

          tmpMeta26 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta26), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta26))[3] = _o;
          _exp = tmpMeta26;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 22: {
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,2) == 0) goto tmp3_end;
          tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          
          _o = tmpMeta27;
          /* Pattern matching succeeded */
          tmpMeta28 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta28), MMC_UNTAGPTR(_o), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta28))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_o), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_o), 2))));
          _o = tmpMeta28;

          tmpMeta29 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta29), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta29))[2] = _o;
          _exp = tmpMeta29;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 23: {
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,4) == 0) goto tmp3_end;
          tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          
          _o = tmpMeta30;
          /* Pattern matching succeeded */
          tmpMeta31 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta31), MMC_UNTAGPTR(_o), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta31))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_o), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_o), 2))));
          _o = tmpMeta31;

          tmpMeta32 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta32), MMC_UNTAGPTR(_exp), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta32))[3] = _o;
          _exp = tmpMeta32;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 25: {
          modelica_metatype tmpMeta33;
          
          /* Pattern matching succeeded */
          tmpMeta33 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta33), MMC_UNTAGPTR(_exp), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta33))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          _exp = tmpMeta33;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 26: {
          modelica_metatype tmpMeta34;
          
          /* Pattern matching succeeded */
          tmpMeta34 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta34), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta34))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          _exp = tmpMeta34;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 27: {
          modelica_metatype tmpMeta35;
          
          /* Pattern matching succeeded */
          tmpMeta35 = MMC_TAGPTR(mmc_alloc_words(3));
          memcpy(MMC_UNTAGPTR(tmpMeta35), MMC_UNTAGPTR(_exp), 3*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta35))[2] = omc_NFExpression_applyToType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), ((modelica_fnptr) _func));
          _exp = tmpMeta35;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 28: {
          modelica_metatype tmpMeta36;
          
          /* Pattern matching succeeded */
          tmpMeta36 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta36), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta36))[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          _exp = tmpMeta36;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 29: {
          modelica_metatype tmpMeta37;
          
          /* Pattern matching succeeded */
          tmpMeta37 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta37), MMC_UNTAGPTR(_exp), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta37))[4] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          _exp = tmpMeta37;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 30: {
          modelica_metatype tmpMeta38;
          
          /* Pattern matching succeeded */
          tmpMeta38 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta38), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta38))[4] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          _exp = tmpMeta38;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 31: {
          modelica_metatype tmpMeta39;
          
          /* Pattern matching succeeded */
          tmpMeta39 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta39), MMC_UNTAGPTR(_exp), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta39))[5] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
          _exp = tmpMeta39;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 32: {
          
          /* Pattern matching succeeded */
          omc_Mutable_update(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), omc_NFExpression_applyToType(threadData, omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))), ((modelica_fnptr) _func)));
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 36: {
          modelica_metatype tmpMeta40;
          
          /* Pattern matching succeeded */
          tmpMeta40 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta40), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta40))[3] = omc_NFExpression_applyToType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), ((modelica_fnptr) _func));
          _exp = tmpMeta40;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 33: {
          modelica_metatype tmpMeta41;
          
          /* Pattern matching succeeded */
          tmpMeta41 = MMC_TAGPTR(mmc_alloc_words(3));
          memcpy(MMC_UNTAGPTR(tmpMeta41), MMC_UNTAGPTR(_exp), 3*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta41))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          _exp = tmpMeta41;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 34: {
          modelica_metatype tmpMeta42;
          
          /* Pattern matching succeeded */
          tmpMeta42 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta42), MMC_UNTAGPTR(_exp), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta42))[5] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)))) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5))));
          _exp = tmpMeta42;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_setType(threadData_t *threadData, modelica_metatype _ty, modelica_metatype __omcQ_24in_5Fexp)
{
  modelica_metatype _exp = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _exp = __omcQ_24in_5Fexp;
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 7: {
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          tmpMeta5 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta5), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta5))[2] = _ty;
          _exp = tmpMeta5;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta6;
          
          /* Pattern matching succeeded */
          tmpMeta6 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta6), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta6))[2] = _ty;
          _exp = tmpMeta6;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta7;
          
          /* Pattern matching succeeded */
          tmpMeta7 = MMC_TAGPTR(mmc_alloc_words(3));
          memcpy(MMC_UNTAGPTR(tmpMeta7), MMC_UNTAGPTR(_exp), 3*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta7))[2] = _ty;
          _exp = tmpMeta7;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta8;
          
          /* Pattern matching succeeded */
          tmpMeta8 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta8), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta8))[2] = _ty;
          _exp = tmpMeta8;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 13: {
          modelica_metatype tmpMeta9;
          
          /* Pattern matching succeeded */
          tmpMeta9 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta9), MMC_UNTAGPTR(_exp), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta9))[2] = _ty;
          _exp = tmpMeta9;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 14: {
          modelica_metatype tmpMeta10;
          
          /* Pattern matching succeeded */
          tmpMeta10 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta10), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta10))[2] = _ty;
          _exp = tmpMeta10;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 15: {
          modelica_metatype tmpMeta11;
          
          /* Pattern matching succeeded */
          tmpMeta11 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta11), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta11))[3] = _ty;
          _exp = tmpMeta11;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 16: {
          modelica_metatype tmpMeta12;
          
          /* Pattern matching succeeded */
          tmpMeta12 = MMC_TAGPTR(mmc_alloc_words(3));
          memcpy(MMC_UNTAGPTR(tmpMeta12), MMC_UNTAGPTR(_exp), 3*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta12))[2] = omc_NFCall_setType(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _ty);
          _exp = tmpMeta12;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 19: {
          modelica_metatype tmpMeta13;
          
          /* Pattern matching succeeded */
          tmpMeta13 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta13), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta13))[3] = omc_NFOperator_setType(threadData, _ty, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          _exp = tmpMeta13;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 20: {
          modelica_metatype tmpMeta14;
          
          /* Pattern matching succeeded */
          tmpMeta14 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta14), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta14))[2] = omc_NFOperator_setType(threadData, _ty, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          _exp = tmpMeta14;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 21: {
          modelica_metatype tmpMeta15;
          
          /* Pattern matching succeeded */
          tmpMeta15 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta15), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta15))[3] = omc_NFOperator_setType(threadData, _ty, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          _exp = tmpMeta15;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 22: {
          modelica_metatype tmpMeta16;
          
          /* Pattern matching succeeded */
          tmpMeta16 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta16), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta16))[2] = omc_NFOperator_setType(threadData, _ty, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          _exp = tmpMeta16;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 23: {
          modelica_metatype tmpMeta17;
          
          /* Pattern matching succeeded */
          tmpMeta17 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta17), MMC_UNTAGPTR(_exp), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta17))[3] = omc_NFOperator_setType(threadData, _ty, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          _exp = tmpMeta17;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 25: {
          modelica_metatype tmpMeta18;
          
          /* Pattern matching succeeded */
          tmpMeta18 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta18), MMC_UNTAGPTR(_exp), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta18))[2] = _ty;
          _exp = tmpMeta18;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 26: {
          modelica_metatype tmpMeta19;
          
          /* Pattern matching succeeded */
          tmpMeta19 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta19), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta19))[2] = _ty;
          _exp = tmpMeta19;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 28: {
          modelica_metatype tmpMeta20;
          
          /* Pattern matching succeeded */
          tmpMeta20 = MMC_TAGPTR(mmc_alloc_words(4));
          memcpy(MMC_UNTAGPTR(tmpMeta20), MMC_UNTAGPTR(_exp), 4*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta20))[3] = _ty;
          _exp = tmpMeta20;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 29: {
          modelica_metatype tmpMeta21;
          
          /* Pattern matching succeeded */
          tmpMeta21 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta21), MMC_UNTAGPTR(_exp), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta21))[4] = _ty;
          _exp = tmpMeta21;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 30: {
          modelica_metatype tmpMeta22;
          
          /* Pattern matching succeeded */
          tmpMeta22 = MMC_TAGPTR(mmc_alloc_words(5));
          memcpy(MMC_UNTAGPTR(tmpMeta22), MMC_UNTAGPTR(_exp), 5*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta22))[4] = _ty;
          _exp = tmpMeta22;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 31: {
          modelica_metatype tmpMeta23;
          
          /* Pattern matching succeeded */
          tmpMeta23 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta23), MMC_UNTAGPTR(_exp), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta23))[5] = _ty;
          _exp = tmpMeta23;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        case 34: {
          modelica_metatype tmpMeta24;
          
          /* Pattern matching succeeded */
          tmpMeta24 = MMC_TAGPTR(mmc_alloc_words(6));
          memcpy(MMC_UNTAGPTR(tmpMeta24), MMC_UNTAGPTR(_exp), 6*sizeof(modelica_metatype));
          ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta24))[5] = _ty;
          _exp = tmpMeta24;
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _exp;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _exp = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _exp;
}

DLLDirection
modelica_metatype omc_NFExpression_typeOf(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_metatype _ty = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _ty has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      int tmp4;
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT60;
          goto tmp3_done;
        }
        case 4: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT179;
          goto tmp3_done;
        }
        case 5: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT235;
          goto tmp3_done;
        }
        case 6: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT236;
          goto tmp3_done;
        }
        case 7: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto tmp3_done;
        }
        case 8: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT237;
          goto tmp3_done;
        }
        case 9: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto tmp3_done;
        }
        case 10: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto tmp3_done;
        }
        case 11: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto tmp3_done;
        }
        case 13: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto tmp3_done;
        }
        case 14: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto tmp3_done;
        }
        case 15: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto tmp3_done;
        }
        case 16: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFCall_typeOf(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 17: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))))?_OMC_LIT60:omc_NFType_sizeType(threadData, omc_NFExpression_typeOf(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))));
          goto tmp3_done;
        }
        case 18: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT60;
          goto tmp3_done;
        }
        case 24: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFOperator_typeOf(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
          goto tmp3_done;
        }
        case 19: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFOperator_typeOf(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp3_done;
        }
        case 20: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFOperator_typeOf(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 21: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFOperator_typeOf(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
          goto tmp3_done;
        }
        case 22: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFOperator_typeOf(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 23: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = omc_NFType_copyDims(threadData, omc_NFOperator_typeOf(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))), _OMC_LIT236);
          goto tmp3_done;
        }
        case 25: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto tmp3_done;
        }
        case 26: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto tmp3_done;
        }
        case 27: {
          modelica_metatype tmpMeta5;
          
          /* Pattern matching succeeded */
          tmpMeta5 = mmc_mk_box2(16, &NFType_METABOXED__desc, omc_NFExpression_typeOf(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)))));
          tmpMeta1 = tmpMeta5;
          goto tmp3_done;
        }
        case 28: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto tmp3_done;
        }
        case 29: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)));
          goto tmp3_done;
        }
        case 30: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4)));
          goto tmp3_done;
        }
        case 31: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)));
          goto tmp3_done;
        }
        case 32: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 36: {
          
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)));
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 33: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2)));
          goto tmp3_done;
        }
        case 34: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 5)));
          goto tmp3_done;
        }
        case 35: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT235;
          goto tmp3_done;
        }
        case 37: {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT235;
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          tmpMeta1 = _OMC_LIT78;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _ty = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _ty;
}

DLLDirection
modelica_integer omc_NFExpression_compareList(threadData_t *threadData, modelica_metatype _expl1, modelica_metatype _expl2)
{
  modelica_integer _comp;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _comp = omc_List_compare(threadData, _expl1, _expl2, boxvar_NFExpression_compare);
  _return: OMC_LABEL_UNUSED
  return _comp;
}
modelica_metatype boxptr_NFExpression_compareList(threadData_t *threadData, modelica_metatype _expl1, modelica_metatype _expl2)
{
  modelica_integer _comp;
  modelica_metatype out_comp;
  _comp = omc_NFExpression_compareList(threadData, _expl1, _expl2);
  out_comp = mmc_mk_icon(_comp);
  return out_comp;
}

DLLDirection
modelica_integer omc_NFExpression_compareOpt(threadData_t *threadData, modelica_metatype _expl1, modelica_metatype _expl2)
{
  modelica_integer _comp;
  modelica_metatype _e1 = NULL;
  modelica_metatype _e2 = NULL;
  modelica_integer tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _comp has no default value.
  // _e1 has no default value.
  // _e2 has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;modelica_metatype tmp4_2;
    tmp4_1 = _expl1;
    tmp4_2 = _expl2;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 4; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (!optionNone(tmp4_1)) goto tmp3_end;
          if (!optionNone(tmp4_2)) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 0);
          goto tmp3_done;
        }
        case 1: {
          if (!optionNone(tmp4_1)) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) -1);
          goto tmp3_done;
        }
        case 2: {
          if (!optionNone(tmp4_2)) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 1);
          goto tmp3_done;
        }
        case 3: {
          modelica_metatype tmpMeta6;
          modelica_metatype tmpMeta7;
          if (optionNone(tmp4_1)) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
          if (optionNone(tmp4_2)) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
          _e1 = tmpMeta6;
          _e2 = tmpMeta7;
          /* Pattern matching succeeded */
          tmp1 = omc_NFExpression_compare(threadData, _e1, _e2);
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _comp = tmp1;
  _return: OMC_LABEL_UNUSED
  return _comp;
}
modelica_metatype boxptr_NFExpression_compareOpt(threadData_t *threadData, modelica_metatype _expl1, modelica_metatype _expl2)
{
  modelica_integer _comp;
  modelica_metatype out_comp;
  _comp = omc_NFExpression_compareOpt(threadData, _expl1, _expl2);
  out_comp = mmc_mk_icon(_comp);
  return out_comp;
}

static modelica_metatype closure33_List_compare(threadData_t *thData, modelica_metatype closure, modelica_metatype list1, modelica_metatype list2)
{
  modelica_fnptr compareFn = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
  return boxptr_List_compare(thData, list1, list2, compareFn);
}
DLLDirection
modelica_integer omc_NFExpression_compare(threadData_t *threadData, modelica_metatype _exp1, modelica_metatype _exp2)
{
  modelica_integer _comp;
  modelica_integer tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _comp has no default value.
  if(referenceEq(_exp1, _exp2))
  {
    _comp = ((modelica_integer) 0);

    goto _return;
  }

  _comp = omc_Util_intCompare(threadData, valueConstructor(_exp1), valueConstructor(_exp2));

  if((_comp != ((modelica_integer) 0)))
  {
    goto _return;
  }

  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp1;
    {
      modelica_integer _i;
      modelica_real _r;
      modelica_string _s = NULL;
      modelica_boolean _b;
      modelica_metatype _cr = NULL;
      modelica_metatype _ty = NULL;
      modelica_metatype _expl = NULL;
      modelica_metatype _inv_expl = NULL;
      modelica_metatype _e1 = NULL;
      modelica_metatype _e2 = NULL;
      modelica_metatype _e3 = NULL;
      modelica_metatype _oe = NULL;
      modelica_metatype _p = NULL;
      modelica_metatype _op = NULL;
      modelica_metatype _c = NULL;
      modelica_metatype _subs = NULL;
      modelica_metatype _clk1 = NULL;
      modelica_metatype _clk2 = NULL;
      modelica_metatype _me = NULL;
      modelica_metatype _mat = NULL;
      modelica_metatype _arr = NULL;
      modelica_metatype _node = NULL;
      int tmp4;
      // _i has no default value.
      // _r has no default value.
      // _s has no default value.
      // _b has no default value.
      // _cr has no default value.
      // _ty has no default value.
      // _expl has no default value.
      // _inv_expl has no default value.
      // _e1 has no default value.
      // _e2 has no default value.
      // _e3 has no default value.
      // _oe has no default value.
      // _p has no default value.
      // _op has no default value.
      // _c has no default value.
      // _subs has no default value.
      // _clk1 has no default value.
      // _clk2 has no default value.
      // _me has no default value.
      // _mat has no default value.
      // _arr has no default value.
      // _node has no default value.
      {
        switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
        case 3: {
          modelica_metatype tmpMeta5;
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta5 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta5,0,1) == 0) goto goto_2;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 2));
          tmp7 = mmc_unbox_integer(tmpMeta6);
          _i = tmp7  /* pattern as ty=Integer */;
          tmp1 = omc_Util_intCompare(threadData, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2)))), _i);
          goto tmp3_done;
        }
        case 4: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          modelica_real tmp10;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta8 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,1,1) == 0) goto goto_2;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
          tmp10 = mmc_unbox_real(tmpMeta9);
          _r = tmp10  /* pattern as ty=Real */;
          tmp1 = omc_Util_realCompare(threadData, mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2)))), _r);
          goto tmp3_done;
        }
        case 5: {
          modelica_metatype tmpMeta11;
          modelica_metatype tmpMeta12;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta11 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,2,1) == 0) goto goto_2;
          tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
          _s = tmpMeta12;
          tmp1 = stringCompare((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2))), _s);
          goto tmp3_done;
        }
        case 6: {
          modelica_metatype tmpMeta13;
          modelica_metatype tmpMeta14;
          modelica_integer tmp15;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta13 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,3,1) == 0) goto goto_2;
          tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
          tmp15 = mmc_unbox_integer(tmpMeta14);
          _b = tmp15  /* pattern as ty=Boolean */;
          tmp1 = omc_Util_boolCompare(threadData, mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2)))), _b);
          goto tmp3_done;
        }
        case 7: {
          modelica_metatype tmpMeta16;
          modelica_metatype tmpMeta17;
          modelica_metatype tmpMeta18;
          modelica_integer tmp19;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta16 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,4,3) == 0) goto goto_2;
          tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
          tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 4));
          tmp19 = mmc_unbox_integer(tmpMeta18);
          _ty = tmpMeta17;
          _i = tmp19  /* pattern as ty=Integer */;

          _comp = omc_AbsynUtil_pathCompare(threadData, omc_NFType_enumName(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2)))), omc_NFType_enumName(threadData, _ty));

          if((_comp == ((modelica_integer) 0)))
          {
            _comp = omc_Util_intCompare(threadData, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 4)))), _i);
          }
          tmp1 = _comp;
          goto tmp3_done;
        }
        case 8: {
          modelica_metatype tmpMeta20;
          modelica_metatype tmpMeta21;
          modelica_metatype tmpMeta22;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,1) == 0) goto tmp3_end;
          tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          _clk1 = tmpMeta20;
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta21 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta21,5,1) == 0) goto goto_2;
          tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 2));
          _clk2 = tmpMeta22;
          tmp1 = omc_NFClockKind_compare(threadData, _clk1, _clk2);
          goto tmp3_done;
        }
        case 9: {
          modelica_metatype tmpMeta23;
          modelica_metatype tmpMeta24;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta23 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta23,6,2) == 0) goto goto_2;
          tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 3));
          _cr = tmpMeta24;
          tmp1 = omc_NFComponentRef_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 3))), _cr);
          goto tmp3_done;
        }
        case 10: {
          modelica_metatype tmpMeta25;
          modelica_metatype tmpMeta26;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta25 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta25,7,1) == 0) goto goto_2;
          tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 2));
          _ty = tmpMeta26;
          tmp1 = valueCompare((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2))), _ty);
          goto tmp3_done;
        }
        case 11: {
          modelica_metatype tmpMeta27;
          modelica_metatype tmpMeta28;
          modelica_metatype tmpMeta29;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta27 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta27,8,3) == 0) goto goto_2;
          tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 2));
          tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 3));
          _ty = tmpMeta28;
          _arr = tmpMeta29;

          _comp = valueCompare(_ty, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2))));
          tmp1 = ((_comp == ((modelica_integer) 0))?omc_Array_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 3))), _arr, boxvar_NFExpression_compare):_comp);
          goto tmp3_done;
        }
        case 12: {
          modelica_metatype tmpMeta30;
          modelica_metatype tmpMeta31;
          modelica_metatype tmpMeta32;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta30 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta30,9,1) == 0) goto goto_2;
          tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta30), 2));
          _mat = tmpMeta31;
          tmpMeta32 = mmc_mk_box1(0, boxvar_NFExpression_compare);
          tmp1 = omc_List_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2))), _mat, (modelica_fnptr) mmc_mk_box2(0,closure33_List_compare,tmpMeta32));
          goto tmp3_done;
        }
        case 13: {
          modelica_metatype tmpMeta33;
          modelica_metatype tmpMeta34;
          modelica_metatype tmpMeta35;
          modelica_metatype tmpMeta36;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta33 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta33,10,4) == 0) goto goto_2;
          tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta33), 3));
          tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta33), 4));
          tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta33), 5));
          _e1 = tmpMeta34;
          _oe = tmpMeta35;
          _e2 = tmpMeta36;

          _comp = omc_NFExpression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 3))), _e1);

          if((_comp == ((modelica_integer) 0)))
          {
            _comp = omc_NFExpression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 5))), _e2);

            if((_comp == ((modelica_integer) 0)))
            {
              _comp = omc_NFExpression_compareOpt(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 4))), _oe);
            }
          }
          tmp1 = _comp;
          goto tmp3_done;
        }
        case 14: {
          modelica_metatype tmpMeta37;
          modelica_metatype tmpMeta38;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta37 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta37,11,2) == 0) goto goto_2;
          tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 3));
          _expl = tmpMeta38;
          tmp1 = omc_List_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 3))), _expl, boxvar_NFExpression_compare);
          goto tmp3_done;
        }
        case 15: {
          modelica_metatype tmpMeta39;
          modelica_metatype tmpMeta40;
          modelica_metatype tmpMeta41;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta39 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta39,12,3) == 0) goto goto_2;
          tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta39), 2));
          tmpMeta41 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta39), 4));
          _p = tmpMeta40;
          _expl = tmpMeta41;

          _comp = omc_AbsynUtil_pathCompare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2))), _p);
          tmp1 = ((_comp == ((modelica_integer) 0))?omc_List_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 4))), _expl, boxvar_NFExpression_compare):_comp);
          goto tmp3_done;
        }
        case 16: {
          modelica_metatype tmpMeta42;
          modelica_metatype tmpMeta43;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta42 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta42,13,1) == 0) goto goto_2;
          tmpMeta43 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta42), 2));
          _c = tmpMeta43;
          tmp1 = omc_NFCall_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2))), _c);
          goto tmp3_done;
        }
        case 17: {
          modelica_metatype tmpMeta44;
          modelica_metatype tmpMeta45;
          modelica_metatype tmpMeta46;
          modelica_boolean tmp47;
          modelica_integer tmp48;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta44 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta44,14,2) == 0) goto goto_2;
          tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta44), 2));
          tmpMeta46 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta44), 3));
          _e1 = tmpMeta45;
          _oe = tmpMeta46;

          _comp = omc_NFExpression_compareOpt(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 3))), _oe);
          tmp47 = (modelica_boolean)(_comp == ((modelica_integer) 0));
          if(tmp47)
          {
            /* Tail recursive call */
            _exp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2)));
            _exp2 = _e1;
            goto _tailrecursive;
            /* TODO: Make sure any eventual dead code below is never generated */
          }
          else
          {
            tmp48 = _comp;
          }
          tmp1 = tmp48;
          goto tmp3_done;
        }
        case 18: {
          
          /* Pattern matching succeeded */
          tmp1 = ((modelica_integer) 0);
          goto tmp3_done;
        }
        case 24: {
          modelica_metatype tmpMeta49;
          modelica_metatype tmpMeta50;
          modelica_metatype tmpMeta51;
          modelica_metatype tmpMeta52;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta49 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta49,21,3) == 0) goto goto_2;
          tmpMeta50 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta49), 2));
          tmpMeta51 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta49), 3));
          tmpMeta52 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta49), 4));
          _expl = tmpMeta50;
          _inv_expl = tmpMeta51;
          _op = tmpMeta52;

          _comp = omc_NFOperator_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 4))), _op);

          if((_comp == ((modelica_integer) 0)))
          {
            _comp = omc_NFExpression_compareList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2))), _expl);
          }

          if((_comp == ((modelica_integer) 0)))
          {
            _comp = omc_NFExpression_compareList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 3))), _inv_expl);
          }
          tmp1 = _comp;
          goto tmp3_done;
        }
        case 19: {
          modelica_metatype tmpMeta53;
          modelica_metatype tmpMeta54;
          modelica_metatype tmpMeta55;
          modelica_metatype tmpMeta56;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta53 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta53,16,3) == 0) goto goto_2;
          tmpMeta54 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta53), 2));
          tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta53), 3));
          tmpMeta56 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta53), 4));
          _e1 = tmpMeta54;
          _op = tmpMeta55;
          _e2 = tmpMeta56;

          _comp = omc_NFOperator_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 3))), _op);

          if((_comp == ((modelica_integer) 0)))
          {
            _comp = omc_NFExpression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2))), _e1);

            if((_comp == ((modelica_integer) 0)))
            {
              _comp = omc_NFExpression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 4))), _e2);
            }
          }
          tmp1 = _comp;
          goto tmp3_done;
        }
        case 20: {
          modelica_metatype tmpMeta57;
          modelica_metatype tmpMeta58;
          modelica_metatype tmpMeta59;
          modelica_boolean tmp60;
          modelica_integer tmp61;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta57 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta57,17,2) == 0) goto goto_2;
          tmpMeta58 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta57), 2));
          tmpMeta59 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta57), 3));
          _op = tmpMeta58;
          _e1 = tmpMeta59;

          _comp = omc_NFOperator_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2))), _op);
          tmp60 = (modelica_boolean)(_comp == ((modelica_integer) 0));
          if(tmp60)
          {
            /* Tail recursive call */
            _exp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 3)));
            _exp2 = _e1;
            goto _tailrecursive;
            /* TODO: Make sure any eventual dead code below is never generated */
          }
          else
          {
            tmp61 = _comp;
          }
          tmp1 = tmp61;
          goto tmp3_done;
        }
        case 21: {
          modelica_metatype tmpMeta62;
          modelica_metatype tmpMeta63;
          modelica_metatype tmpMeta64;
          modelica_metatype tmpMeta65;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta62 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta62,18,3) == 0) goto goto_2;
          tmpMeta63 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta62), 2));
          tmpMeta64 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta62), 3));
          tmpMeta65 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta62), 4));
          _e1 = tmpMeta63;
          _op = tmpMeta64;
          _e2 = tmpMeta65;

          _comp = omc_NFOperator_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 3))), _op);

          if((_comp == ((modelica_integer) 0)))
          {
            _comp = omc_NFExpression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2))), _e1);

            if((_comp == ((modelica_integer) 0)))
            {
              _comp = omc_NFExpression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 4))), _e2);
            }
          }
          tmp1 = _comp;
          goto tmp3_done;
        }
        case 22: {
          modelica_metatype tmpMeta66;
          modelica_metatype tmpMeta67;
          modelica_metatype tmpMeta68;
          modelica_boolean tmp69;
          modelica_integer tmp70;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta66 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta66,19,2) == 0) goto goto_2;
          tmpMeta67 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta66), 2));
          tmpMeta68 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta66), 3));
          _op = tmpMeta67;
          _e1 = tmpMeta68;

          _comp = omc_NFOperator_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2))), _op);
          tmp69 = (modelica_boolean)(_comp == ((modelica_integer) 0));
          if(tmp69)
          {
            /* Tail recursive call */
            _exp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 3)));
            _exp2 = _e1;
            goto _tailrecursive;
            /* TODO: Make sure any eventual dead code below is never generated */
          }
          else
          {
            tmp70 = _comp;
          }
          tmp1 = tmp70;
          goto tmp3_done;
        }
        case 23: {
          modelica_metatype tmpMeta71;
          modelica_metatype tmpMeta72;
          modelica_metatype tmpMeta73;
          modelica_metatype tmpMeta74;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta71 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta71,20,4) == 0) goto goto_2;
          tmpMeta72 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta71), 2));
          tmpMeta73 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta71), 3));
          tmpMeta74 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta71), 4));
          _e1 = tmpMeta72;
          _op = tmpMeta73;
          _e2 = tmpMeta74;

          _comp = omc_NFOperator_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 3))), _op);

          if((_comp == ((modelica_integer) 0)))
          {
            _comp = omc_NFExpression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2))), _e1);

            if((_comp == ((modelica_integer) 0)))
            {
              _comp = omc_NFExpression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 4))), _e2);
            }
          }
          tmp1 = _comp;
          goto tmp3_done;
        }
        case 25: {
          modelica_metatype tmpMeta75;
          modelica_metatype tmpMeta76;
          modelica_metatype tmpMeta77;
          modelica_metatype tmpMeta78;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta75 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta75,22,4) == 0) goto goto_2;
          tmpMeta76 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta75), 3));
          tmpMeta77 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta75), 4));
          tmpMeta78 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta75), 5));
          _e1 = tmpMeta76;
          _e2 = tmpMeta77;
          _e3 = tmpMeta78;

          _comp = omc_NFExpression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 3))), _e1);

          if((_comp == ((modelica_integer) 0)))
          {
            _comp = omc_NFExpression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 4))), _e2);

            if((_comp == ((modelica_integer) 0)))
            {
              _comp = omc_NFExpression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 5))), _e3);
            }
          }
          tmp1 = _comp;
          goto tmp3_done;
        }
        case 26: {
          modelica_metatype tmpMeta79;
          
          /* Pattern matching succeeded */
          { /* match expression */
            modelica_metatype tmp82_1;
            tmp82_1 = _exp2;
            {
              volatile mmc_switch_type tmp82;
              int tmp83;
              tmp82 = 0;
              for (; tmp82 < 2; tmp82++) {
                switch (MMC_SWITCH_CAST(tmp82)) {
                case 0: {
                  modelica_metatype tmpMeta84;
                  if (mmc__uniontype__metarecord__typedef__equal(tmp82_1,23,2) == 0) goto tmp81_end;
                  tmpMeta84 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp82_1), 3));
                  _e1 = tmpMeta84;
                  /* Pattern matching succeeded */
                  tmpMeta79 = _e1;
                  goto tmp81_done;
                }
                case 1: {
                  
                  _e1 = tmp82_1;
                  /* Pattern matching succeeded */
                  tmpMeta79 = _e1;
                  goto tmp81_done;
                }
                }
                goto tmp81_end;
                tmp81_end: ;
              }
              goto goto_80;
              goto_80:;
              goto goto_2;
              goto tmp81_done;
              tmp81_done:;
            }
          }
          _e1 = tmpMeta79;
          /* Tail recursive call */
          _exp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 3)));
          _exp2 = _e1;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 27: {
          modelica_metatype tmpMeta85;
          modelica_metatype tmpMeta86;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta85 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta85,24,1) == 0) goto goto_2;
          tmpMeta86 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta85), 2));
          _e2 = tmpMeta86;
          /* Tail recursive call */
          _exp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2)));
          _exp2 = _e2;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 28: {
          modelica_metatype tmpMeta87;
          modelica_metatype tmpMeta88;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta87 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta87,25,2) == 0) goto goto_2;
          tmpMeta88 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta87), 2));
          _e1 = tmpMeta88;
          /* Tail recursive call */
          _exp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2)));
          _exp2 = _e1;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 29: {
          modelica_metatype tmpMeta89;
          modelica_metatype tmpMeta90;
          modelica_metatype tmpMeta91;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta89 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta89,26,4) == 0) goto goto_2;
          tmpMeta90 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta89), 2));
          tmpMeta91 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta89), 3));
          _e1 = tmpMeta90;
          _subs = tmpMeta91;

          _comp = omc_NFExpression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2))), _e1);

          if((_comp == ((modelica_integer) 0)))
          {
            _comp = omc_NFSubscript_compareList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 3))), _subs);
          }
          tmp1 = _comp;
          goto tmp3_done;
        }
        case 30: {
          modelica_metatype tmpMeta92;
          modelica_metatype tmpMeta93;
          modelica_metatype tmpMeta94;
          modelica_integer tmp95;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta92 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta92,27,3) == 0) goto goto_2;
          tmpMeta93 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta92), 2));
          tmpMeta94 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta92), 3));
          tmp95 = mmc_unbox_integer(tmpMeta94);
          _e1 = tmpMeta93;
          _i = tmp95  /* pattern as ty=Integer */;

          _comp = omc_Util_intCompare(threadData, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 3)))), _i);

          if((_comp == ((modelica_integer) 0)))
          {
            _comp = omc_NFExpression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2))), _e1);
          }
          tmp1 = _comp;
          goto tmp3_done;
        }
        case 31: {
          modelica_metatype tmpMeta96;
          modelica_metatype tmpMeta97;
          modelica_metatype tmpMeta98;
          modelica_integer tmp99;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta96 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta96,28,4) == 0) goto goto_2;
          tmpMeta97 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta96), 2));
          tmpMeta98 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta96), 3));
          tmp99 = mmc_unbox_integer(tmpMeta98);
          _e1 = tmpMeta97;
          _i = tmp99  /* pattern as ty=Integer */;

          _comp = omc_Util_intCompare(threadData, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 3)))), _i);

          if((_comp == ((modelica_integer) 0)))
          {
            _comp = omc_NFExpression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2))), _e1);
          }
          tmp1 = _comp;
          goto tmp3_done;
        }
        case 32: {
          modelica_metatype tmpMeta100;
          modelica_metatype tmpMeta101;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta100 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta100,29,1) == 0) goto goto_2;
          tmpMeta101 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta100), 2));
          _me = tmpMeta101;
          /* Tail recursive call */
          _exp1 = omc_Mutable_access(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2))));
          _exp2 = omc_Mutable_access(threadData, _me);
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 36: {
          modelica_metatype tmpMeta102;
          modelica_metatype tmpMeta103;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta102 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta102,33,2) == 0) goto goto_2;
          tmpMeta103 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta102), 3));
          _e1 = tmpMeta103;
          /* Tail recursive call */
          _exp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 3)));
          _exp2 = _e1;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 33: {
          modelica_metatype tmpMeta104;
          modelica_metatype tmpMeta105;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta104 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta104,30,1) == 0) goto goto_2;
          tmpMeta105 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta104), 2));
          _ty = tmpMeta105;
          tmp1 = valueCompare((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2))), _ty);
          goto tmp3_done;
        }
        case 34: {
          modelica_metatype tmpMeta106;
          modelica_metatype tmpMeta107;
          modelica_metatype tmpMeta108;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta106 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta106,31,4) == 0) goto goto_2;
          tmpMeta107 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta106), 2));
          tmpMeta108 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta106), 3));
          _cr = tmpMeta107;
          _expl = tmpMeta108;

          _comp = omc_NFComponentRef_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2))), _cr);

          if((_comp == ((modelica_integer) 0)))
          {
            _comp = omc_List_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 3))), _expl, boxvar_NFExpression_compare);
          }
          tmp1 = _comp;
          goto tmp3_done;
        }
        case 35: {
          modelica_metatype tmpMeta109;
          modelica_metatype tmpMeta110;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta109 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta109,32,1) == 0) goto goto_2;
          tmpMeta110 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta109), 2));
          _s = tmpMeta110;
          tmp1 = stringCompare((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2))), _s);
          goto tmp3_done;
        }
        case 37: {
          modelica_metatype tmpMeta111;
          modelica_metatype tmpMeta112;
          
          /* Pattern matching succeeded */
          /* Pattern-matching assignment */
          tmpMeta111 = _exp2;
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta111,34,1) == 0) goto goto_2;
          tmpMeta112 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta111), 2));
          _node = tmpMeta112;
          tmp1 = omc_NFInstNode_InstNode_refCompare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp1), 2))), _node);
          goto tmp3_done;
        }
        default:
        tmp3_default: OMC_LABEL_UNUSED; {
          
          /* Pattern matching succeeded */
          omc_Error_assertion(threadData, 0 /* false */, _OMC_LIT238, _OMC_LIT239);
          goto goto_2;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _comp = tmp1;
  _return: OMC_LABEL_UNUSED
  return _comp;
}
modelica_metatype boxptr_NFExpression_compare(threadData_t *threadData, modelica_metatype _exp1, modelica_metatype _exp2)
{
  modelica_integer _comp;
  modelica_metatype out_comp;
  _comp = omc_NFExpression_compare(threadData, _exp1, _exp2);
  out_comp = mmc_mk_icon(_comp);
  return out_comp;
}

DLLDirection
modelica_boolean omc_NFExpression_isEqual(threadData_t *threadData, modelica_metatype _exp1, modelica_metatype _exp2)
{
  modelica_boolean _isEqual;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isEqual has no default value.
  _isEqual = (((modelica_integer) 0) == omc_NFExpression_compare(threadData, _exp1, _exp2));
  _return: OMC_LABEL_UNUSED
  return _isEqual;
}
modelica_metatype boxptr_NFExpression_isEqual(threadData_t *threadData, modelica_metatype _exp1, modelica_metatype _exp2)
{
  modelica_boolean _isEqual;
  modelica_metatype out_isEqual;
  _isEqual = omc_NFExpression_isEqual(threadData, _exp1, _exp2);
  out_isEqual = mmc_mk_icon(_isEqual);
  return out_isEqual;
}

DLLDirection
modelica_integer omc_NFExpression_hash(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_integer _hash;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _hash = stringHashDjb2(omc_NFExpression_toString(threadData, _exp));
  _return: OMC_LABEL_UNUSED
  return _hash;
}
modelica_metatype boxptr_NFExpression_hash(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_integer _hash;
  modelica_metatype out_hash;
  _hash = omc_NFExpression_hash(threadData, _exp);
  out_hash = mmc_mk_icon(_hash);
  return out_hash;
}

DLLDirection
modelica_boolean omc_NFExpression_isTrivialCref(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _b;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _b has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 4; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,2) == 0) goto tmp3_end;
          tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _b = tmp1;
  _return: OMC_LABEL_UNUSED
  return _b;
}
modelica_metatype boxptr_NFExpression_isTrivialCref(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _b;
  modelica_metatype out_b;
  _b = omc_NFExpression_isTrivialCref(threadData, _exp);
  out_b = mmc_mk_icon(_b);
  return out_b;
}

DLLDirection
modelica_boolean omc_NFExpression_isFalse(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isTrue;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isTrue has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmp7 = mmc_unbox_integer(tmpMeta6);
          if (0 /* false */ != tmp7) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isTrue = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isTrue;
}
modelica_metatype boxptr_NFExpression_isFalse(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isTrue;
  modelica_metatype out_isTrue;
  _isTrue = omc_NFExpression_isFalse(threadData, _exp);
  out_isTrue = mmc_mk_icon(_isTrue);
  return out_isTrue;
}

DLLDirection
modelica_boolean omc_NFExpression_isAllTrue(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isTrue;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isTrue has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      modelica_metatype _e = NULL;
      volatile mmc_switch_type tmp4;
      int tmp5;
      // _e has no default value.
      tmp4 = 0;
      for (; tmp4 < 4; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmp7 = mmc_unbox_integer(tmpMeta6);
          if (1 /* true */ != tmp7) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_Array_all(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), boxvar_NFExpression_isAllTrue);
          goto tmp3_done;
        }
        case 2: {
          modelica_metatype tmpMeta8;
          modelica_metatype tmpMeta9;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
          tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,4,5) == 0) goto tmp3_end;
          tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
          
          _e = tmpMeta9;
          /* Pattern matching succeeded */
          /* Tail recursive call */
          _exp = _e;
          goto _tailrecursive;
          /* TODO: Make sure any eventual dead code below is never generated */
          goto tmp3_done;
        }
        case 3: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isTrue = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isTrue;
}
modelica_metatype boxptr_NFExpression_isAllTrue(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isTrue;
  modelica_metatype out_isTrue;
  _isTrue = omc_NFExpression_isAllTrue(threadData, _exp);
  out_isTrue = mmc_mk_icon(_isTrue);
  return out_isTrue;
}

DLLDirection
modelica_boolean omc_NFExpression_isTrue(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isTrue;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isTrue has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          modelica_integer tmp7;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
          tmp7 = mmc_unbox_integer(tmpMeta6);
          if (1 /* true */ != tmp7) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isTrue = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isTrue;
}
modelica_metatype boxptr_NFExpression_isTrue(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isTrue;
  modelica_metatype out_isTrue;
  _isTrue = omc_NFExpression_isTrue(threadData, _exp);
  out_isTrue = mmc_mk_icon(_isTrue);
  return out_isTrue;
}

DLLDirection
modelica_boolean omc_NFExpression_isCallNamed(threadData_t *threadData, modelica_metatype _exp, modelica_string _name)
{
  modelica_boolean _res;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _res has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFCall_isNamed(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))), _name);
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _res = tmp1;
  _return: OMC_LABEL_UNUSED
  return _res;
}
modelica_metatype boxptr_NFExpression_isCallNamed(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _name)
{
  modelica_boolean _res;
  modelica_metatype out_res;
  _res = omc_NFExpression_isCallNamed(threadData, _exp, _name);
  out_res = mmc_mk_icon(_res);
  return out_res;
}

DLLDirection
modelica_boolean omc_NFExpression_isExternalCall(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _res;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _res has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFCall_isExternal(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _res = tmp1;
  _return: OMC_LABEL_UNUSED
  return _res;
}
modelica_metatype boxptr_NFExpression_isExternalCall(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _res;
  modelica_metatype out_res;
  _res = omc_NFExpression_isExternalCall(threadData, _exp);
  out_res = mmc_mk_icon(_res);
  return out_res;
}

DLLDirection
modelica_boolean omc_NFExpression_isImpureCall(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isImpure;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isImpure has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFCall_isImpure(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isImpure = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isImpure;
}
modelica_metatype boxptr_NFExpression_isImpureCall(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isImpure;
  modelica_metatype out_isImpure;
  _isImpure = omc_NFExpression_isImpureCall(threadData, _exp);
  out_isImpure = mmc_mk_icon(_isImpure);
  return out_isImpure;
}

DLLDirection
modelica_boolean omc_NFExpression_isCall(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isCall;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isCall has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isCall = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isCall;
}
modelica_metatype boxptr_NFExpression_isCall(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isCall;
  modelica_metatype out_isCall;
  _isCall = omc_NFExpression_isCall(threadData, _exp);
  out_isCall = mmc_mk_icon(_isCall);
  return out_isCall;
}

DLLDirection
modelica_boolean omc_NFExpression_isWildCref(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _wild;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _wild has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          modelica_metatype tmpMeta6;
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
          if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,2,0) == 0) goto tmp3_end;
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _wild = tmp1;
  _return: OMC_LABEL_UNUSED
  return _wild;
}
modelica_metatype boxptr_NFExpression_isWildCref(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _wild;
  modelica_metatype out_wild;
  _wild = omc_NFExpression_isWildCref(threadData, _exp);
  out_wild = mmc_mk_icon(_wild);
  return out_wild;
}

DLLDirection
modelica_boolean omc_NFExpression_isFunctionInputCref(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _res;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _res has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFComponentRef_isInput(threadData, omc_NFComponentRef_last(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))));
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _res = tmp1;
  _return: OMC_LABEL_UNUSED
  return _res;
}
modelica_metatype boxptr_NFExpression_isFunctionInputCref(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _res;
  modelica_metatype out_res;
  _res = omc_NFExpression_isFunctionInputCref(threadData, _exp);
  out_res = mmc_mk_icon(_res);
  return out_res;
}

DLLDirection
modelica_boolean omc_NFExpression_isCref(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isCref;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isCref has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isCref = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isCref;
}
modelica_metatype boxptr_NFExpression_isCref(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isCref;
  modelica_metatype out_isCref;
  _isCref = omc_NFExpression_isCref(threadData, _exp);
  out_isCref = mmc_mk_icon(_isCref);
  return out_isCref;
}

DLLDirection
modelica_boolean omc_NFExpression_isVector(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _res;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _res has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = omc_NFType_isVector(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _res = tmp1;
  _return: OMC_LABEL_UNUSED
  return _res;
}
modelica_metatype boxptr_NFExpression_isVector(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _res;
  modelica_metatype out_res;
  _res = omc_NFExpression_isVector(threadData, _exp);
  out_res = mmc_mk_icon(_res);
  return out_res;
}

DLLDirection
modelica_boolean omc_NFExpression_isEmptyArray(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _emptyArray;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _emptyArray has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = (arrayLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3)))) == ((modelica_integer) 0));
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _emptyArray = tmp1;
  _return: OMC_LABEL_UNUSED
  return _emptyArray;
}
modelica_metatype boxptr_NFExpression_isEmptyArray(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _emptyArray;
  modelica_metatype out_emptyArray;
  _emptyArray = omc_NFExpression_isEmptyArray(threadData, _exp);
  out_emptyArray = mmc_mk_icon(_emptyArray);
  return out_emptyArray;
}

DLLDirection
modelica_boolean omc_NFExpression_isArray(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isArray;
  modelica_boolean tmp1 = 0;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  // _isArray has no default value.
  { /* match expression */
    modelica_metatype tmp4_1;
    tmp4_1 = _exp;
    {
      volatile mmc_switch_type tmp4;
      int tmp5;
      tmp4 = 0;
      for (; tmp4 < 2; tmp4++) {
        switch (MMC_SWITCH_CAST(tmp4)) {
        case 0: {
          if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,3) == 0) goto tmp3_end;
          
          /* Pattern matching succeeded */
          tmp1 = 1 /* true */;
          goto tmp3_done;
        }
        case 1: {
          
          /* Pattern matching succeeded */
          tmp1 = 0 /* false */;
          goto tmp3_done;
        }
        }
        goto tmp3_end;
        tmp3_end: ;
      }
      goto goto_2;
      goto_2:;
      MMC_THROW_INTERNAL();
      goto tmp3_done;
      tmp3_done:;
    }
  }
  _isArray = tmp1;
  _return: OMC_LABEL_UNUSED
  return _isArray;
}
modelica_metatype boxptr_NFExpression_isArray(threadData_t *threadData, modelica_metatype _exp)
{
  modelica_boolean _isArray;
  modelica_metatype out_isArray;
  _isArray = omc_NFExpression_isArray(threadData, _exp);
  out_isArray = mmc_mk_icon(_isArray);
  return out_isArray;
}

